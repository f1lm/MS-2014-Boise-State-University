<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <title>Source code of the sample server application Cookbook</title>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Christoph Mueller">
   <meta name="GENERATOR" content="Mozilla/4.5 [de] (WinNT; I) [Netscape]">
   <meta http-equiv="KEYWORDS" content="Source code, Server application, sample, Java, Linux, MySQL">
   <meta name="Audience" content="IT, Software engineers, Programmer">
   <meta name="Content-Language" content="en-US">
   <meta http-equiv="AUTHOR" content="Christoph Mueller">
   <meta name="COPYRIGHT" content="Christoph Mueller">
   <meta http-equiv="Reply-to" content="CMueller@de.must.de">
   <meta name="PUBLISHER" content="Christoph Mueller">
   <meta name="PUBLISHER-EMAIL" content="CMueller@de.must.de">
   <meta name="CREATION" content="Wdn, 13 Jun 2001">
   <meta name="REVISON" content="Wdn, 15 Aug 2001">
   <meta name="ROBOTS" content="INDEX, FOLLOW">
   <meta name="REVISIT-AFTER" content="28 days">
   <meta name="Description" content="Create reliable database applications easyly - swing and browser by identical concept">
   <meta name="KeyWords" content="Source code, Server application, sample, Java, Linux, MySQL">
</head>
<body background="indtextb.jpg">

<pre>
<h1>CbpresButler</h1>
/*
 * Public Domain Sample Code
 */
package de.jugs.cookbook.jsp;

import de.jugs.cookbook.Constants;
import de.jugs.cookbook.DoCookbook;
import de.jugs.cookbook.DoType;
import de.must.markup.*;

/**
 * Devoted butler of the cookbook detail presentation JSP.
 * See super class JspButler for documentation.
 * @author Christoph Mueller
 */
public class CbpresButler extends JspButler {

  private DoCookbook doCookbook;
  private DoType doType;
  private DataImageViewer sampleViewer;

  public CbpresButler(SessionData sessionData) {
    super(sessionData);
    doCookbook = new DoCookbook(sessionData);
    doType = new DoType(sessionData);
    sampleViewer = new DataImageViewer(sessionData, de.jugs.cookbook.Constants.SAMPLE_IMAGE_DIRECTORY, doCookbook);
  }

  protected void handle(GeneralizedRequest request) {
    try {
      doCookbook.load(Integer.parseInt(request.getParameter("ID")));
      sampleViewer.loadValue();
    }
    catch(Exception e) {
      setUriToGo(Constants.START_JSP_NAME); return;
    }
  }

  public String getRezeptBez() {
    return doCookbook.getText("RezeptBez");
  }

  public String getDiabetiker() {
    if (doCookbook.getBoolean("Diabetiker")) return " / " + sessionData.getResourceString("TEXT_DIABETIC_RECOMMENDATION");
    else return "";
  }

  public String getTyp() {
   if (doType.load(doCookbook.getInt("Typ"))) {
     return doType.getText("TypBez");
   } else {
     return "";
   }
  }

  public String getZutaten() {
    return doCookbook.getText("Zutaten");
  }

  public String getZubereit() {
    return doCookbook.getText("Zubereit");
  }

  public String getQuelle() {
    return doCookbook.getText("Quelle");
  }

  public String getVom() {
    java.sql.Date date = doCookbook.getDate("Vom");
    if (date == null) return "";
    return getEditableDateString(date);
  }

  public String getSampleImage() {
    return sampleViewer.getCreationTag();
  }

  private String getEditableDateString(java.sql.Date date) {
    de.must.util.DateString ds = new de.must.util.DateString(sessionData.locale, date);
    return ds.getEditableDateString();
  }

}

</pre>

<hr WIDTH="100%">
<center> Source is part of the <a href="http://www.must.de/Jacompe.htm" TARGET="_top">Open Source Project Cameleon OSP</a></center>

</body>
</html>
