<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <title>Source code of the sample server application Cookbook</title>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Christoph Mueller">
   <meta name="GENERATOR" content="Mozilla/4.5 [de] (WinNT; I) [Netscape]">
   <meta http-equiv="KEYWORDS" content="Source code, Server application, sample, Java, Linux, MySQL">
   <meta name="Audience" content="IT, Software engineers, Programmer">
   <meta name="Content-Language" content="en-US">
   <meta http-equiv="AUTHOR" content="Christoph Mueller">
   <meta name="COPYRIGHT" content="Christoph Mueller">
   <meta http-equiv="Reply-to" content="CMueller@de.must.de">
   <meta name="PUBLISHER" content="Christoph Mueller">
   <meta name="PUBLISHER-EMAIL" content="CMueller@de.must.de">
   <meta name="CREATION" content="Wdn, 13 Jun 2001">
   <meta name="REVISON" content="Wdn, 15 Aug 2001">
   <meta name="ROBOTS" content="INDEX, FOLLOW">
   <meta name="REVISIT-AFTER" content="28 days">
   <meta name="Description" content="Create reliable database applications easyly - swing and browser by identical concept">
   <meta name="KeyWords" content="Source code, Server application, sample, Java, Linux, MySQL">
</head>
<body background="indtextb.jpg">

<pre>
<h1>Main</h1>
//elementary!

/*
 * Public Domain Sample Code 
 */
package mkt;

import de.must.wuic.*;
import de.must.util.*;
import javax.swing.*;

/**
 * @author Christoph Mueller
 */
public final class Main extends MainStd {

  private static final String version = "2.2";
  private static final int licenceType = ApplLicence.STANDARD_LICENCE;
  private static MainMenu mainMenu;

  static public void main(String[] args) {
    int i, j, argLength;
    argLength = args.length;
    // if (argLength > 0 && args[0] != null) codeBase = args[0]; // not in use anymore!
    if (argLength > 1 && args[1] != null) browserPath = args[1];
    if (argLength > 2) odbcNames = new String[argLength - 2]; else odbcNames = new String[0];
    j = -1;
    for (i=2; i < argLength; i++) {
      j++;
      if (args[i] != null) odbcNames[j] = args[i];
      else odbcNames[j] = "";
    }
    new Main();
  }

  public Main() {
    MustFrame.setDefaultIconImage(java.awt.Toolkit.getDefaultToolkit().getImage("bin/images/must16.png"));
    LoadFrame loadFrame = new LoadFrame();
    loadFrame.setStatusText("Stelle Datenbankverbindung her ...");
    Global.getInstance().connectionSpecification = ParamLoc.getConnectionSpecification();
    Global.getInstance().createOrCheckConnections();
    TableCreator tableCreator = new TableCreator(); // needs Global
    if (Global.getInstance().mainConnectionHolder.isConnected()) {
      tableCreator.createIfNecessary((JFrame)loadFrame); 
    }
    if (Global.getInstance().mainConnectionHolder.isConnected() && tableCreator.isHappy()) {
      loadFrame.setStatusText("Lade Parameter ...");
      Global.getInstance().createGlobalDataObjects();
    }
    loadFrame.setStatusText("Initialisiere ...");
    // WinContr.create(); // needs ParamLoc
    ApplLicence.setLicenceType(licenceType);
    MustStatusLabel.setDefaultStatustext(" ");
    if (ParamLoc.getBrowserPath().equals("*AUTO")) {
      Browser.setBrowserPath(browserPath);
    }
    else {
      Browser.setBrowserPath(ParamLoc.getBrowserPath());
    }
    if (Global.getInstance().mainConnectionHolder.isConnected() && tableCreator.isHappy()) {
      AbstractDataListFrame.setMaxListEntries(Parameter.getInstance().getValueAsInt(Parameter.MAX_ENTRIES));
    }
    de.must.dataobj.DataObject.setRecordingUser(CurrentUser.getUserName());
    loadFrame.setStatusText("Lade Menü ...");
    mainMenu = new MainMenu();
    // temporary:
      // mainMenu.extendFunctions(Main.SECURITY_EXTENDED);
    MainStd.setMainFrame((java.awt.Frame)mainMenu);
    mainMenu.setVisible(true);

    if (Global.getInstance().mainConnectionHolder.isConnected() && tableCreator.isHappy()) {
      loadFrame.setStatusText("Lade Kontakte ...");
      FrKontaktSl.openMainInstance();
    }

    loadFrame.setVisible(false);
    loadFrame.dispose();

  }

  public static String getVersion() {
    return version;
  }

  public static void extendFunctions(int newSecurityLevel) {
    securityLevel = newSecurityLevel;
    mainMenu.extendFunctions(newSecurityLevel);
  }

}



</pre>

<hr WIDTH="100%">
<center> Source is part of the <a href="http://www.must.de/Jacompe.htm" TARGET="_top">Open Source Project Cameleon OSP</a></center>

</body>
</html>
