(function(B,L){if(B.YAFT!==undefined){return}var a,H=false,M=false,s=false,e=new Date().getTime(),o=false,m=L.documentElement,j={useNormalizeCoverage:true,useCustomSelector:false,canShowVisualReport:true,generateHAR:false,maxWaitTime:3000,modules:[],modulesExclude:[]},C,k=0,F=0,I=0,p=[],h={},r={},D=0,E={};function b(w){var N={},d;for(d in w){if(typeof(w[d])==="object"&&w[d]!==null){N[d]=b(w[d])}else{N[d]=w[d]}}return N}function z(W){var ae=navigator.userAgent,R=navigator.appVersion,w,U=a.timing,O=U.navigationStart,Y,P=new Date(O),S,V,ah,ac,N="200",Z="OK",X=-1,aa=0,d=0,ag=0,ab=0,ad=-1,Q=0,af=0,T=0;ah={log:{version:"1.2",creator:{name:"YAFT",version:"0.1.0"},browser:{name:ae,version:R},pages:[{startedDateTime:P.toISOString(),id:"Page_1",title:L.location.href,pageTimings:{onContentLoad:U.domInteractive-O,onLoad:U.loadEventEnd-O}}],entries:[],comment:""}};for(ac=0;ac<W.length;ac+=1){w=W[ac];Y=new Date(Math.round(O+w.start));aa=Math.round(w.dnsDuration);d=Math.round(w.tcpDuration);ad=Math.round(w.sslDuration);ag=Math.round(w.responseStart-w.requestStart);ab=Math.round(w.responseDuration);Q=Math.round(w.duration)-aa-d-ag-ab;af=Math.round(w.duration);if(Q<0){af=af-Q;Q=0}V={pageref:"Page_1",startedDateTime:Y.toISOString(),time:af,request:{method:"GET",url:w.url,httpVersion:"HTTP/1.1",cookies:[],headers:[],queryString:[],headersSize:-1,bodySize:-1},response:{status:N,statusText:Z,httpVersion:"HTTP/1.0",cookies:[],headers:[],content:{size:X,compression:0,mimeType:""},redirectURL:"",headersSize:-1,bodySize:X},cache:{},timings:{blocked:-1,dns:aa,connect:d,send:ag,ssl:ad,wait:Q,receive:ab}};ah.log.entries.push(V)}return ah}function t(){var d=[],R,w,P,Q=0,O=[];d.push(i());O=a.getEntriesByType("resource");for(R=0;R<O.length;R+=1){if(O[R].name!=="document"){d.push(n(O[R]))}}P=document.getElementsByTagName("iframe");if(P&&P.length){for(w=0;w<P.length;w+=1){try{O=P[w].contentWindow.performance.getEntriesByType("resource");Q=P[w].contentWindow.performance.timing.navigationStart-a.timing.navigationStart;for(R=0;R<O.length;R+=1){if(O[R].name!=="document"){d.push(n(O[R],Q))}}}catch(N){}}d.sort(function(T,S){return T.start-S.start})}return d}function n(d,w){if(!(w&&w>0)){w=0}return{url:d.name,start:d.startTime+w,duration:d.duration,durationFromNStart:(d.duration>0)?(d.duration+d.startTime+w):d.startTime+w,redirectStart:d.redirectStart+w,redirectDuration:d.redirectEnd-d.redirectStart,appCacheStart:0,appCacheDuration:0,dnsStart:d.domainLookupStart+w,dnsDuration:d.domainLookupEnd-d.domainLookupStart,tcpStart:d.connectStart+w,tcpDuration:d.connectEnd-d.connectStart,sslStart:(d.secureConnectionStart>0)?d.secureConnectionStart-d.connectStart:0,sslDuration:(d.secureConnectionStart>0)?(d.connectEnd-d.secureConnectionStart):-1,requestStart:d.requestStart+w,requestDuration:d.responseStart-d.requestStart,responseStart:d.responseStart+w,responseDuration:d.responseStart===0?0:d.responseEnd-d.responseStart}}function i(){var d=a.timing;return{url:L.location.href,start:0,duration:d.responseEnd-d.navigationStart,durationFromNStart:d.responseEnd-d.navigationStart,redirectStart:d.redirectStart===0?0:d.redirectStart-d.navigationStart,redirectDuration:d.redirectEnd-d.redirectStart,appCacheStart:0,appCacheDuration:0,dnsStart:d.domainLookupStart-d.navigationStart,dnsDuration:d.domainLookupEnd-d.domainLookupStart,tcpStart:d.connectStart-d.navigationStart,tcpDuration:d.connectEnd-d.connectStart,sslStart:(d.secureConnectionStart>0)?d.secureConnectionStart-d.connectStart:0,sslDuration:(d.secureConnectionStart>0)?(d.connectEnd-d.secureConnectionStart):-1,requestStart:d.requestStart-d.navigationStart,requestDuration:d.responseStart-d.requestStart,responseStart:d.responseStart-d.navigationStart,responseDuration:d.responseEnd-d.responseStart}}function l(){return{win:B,doc:L,docElem:m,viewportWidth:(m.clientWidth<B.innerWidth?B.innerWidth:m.clientWidth),viewportHeight:(m.clientHeight<B.innerHeight?B.innerHeight:m.clientHeight),getScrollXY:function(){return{x:B.scrollX||B.pageXOffset,y:B.scrollY||B.pageYOffset}},getViewportArea:function(){return this.viewportWidth*this.viewportHeight},getElementBounds:function(N,w){var O,d,P;if(w){d=N}else{d=L.getElementById(N)}O=this.getScrollXY();P=b(d.getBoundingClientRect());P.top=P.top+O.y;P.bottom=P.bottom+O.y;P.left=P.left+O.x;P.right=P.right+O.x;return P},isInViewport:function(N,w){var d=this.getElementBounds(N,w);return(d.top<this.viewportHeight&&d.left<this.viewportWidth&&d.bottom>=0&&d.right>=0)},getElementCoverage:function(N){var w=this.getElementBounds(N),d,O;if(w.right<0){d=0}else{if(w.right>this.viewportWidth){if(w.left>=0){d=this.viewportWidth-w.left}else{d=this.viewportWidth}}else{if(w.left<0&&w.right>0){d=w.right}else{d=w.width}}}if(w.bottom<0){O=0}else{if(w.bottom>this.viewportHeight){if(w.top>=0){O=this.viewportHeight-w.top}else{O=this.viewportHeight}}else{if(w.top<0&&w.bottom>0){O=w.bottom}else{O=w.height}}}return d*O},getElementPercentage:function(N){var O=this.getElementCoverage(N),d=this.getViewportArea(),w=(O*100)/d;return Math.round(w)>0?w:0}}}function y(V,T){var W="",P,N,w,U,d,O,Q=false,R=(T&&T.length)?T.length:0,S=(V&&V.length)?V.length:0;for(P=0;P<S;P+=1){U=V[P];if(j.useCustomSelector){d=L.querySelectorAll(U)}else{d=L.querySelectorAll('div[id^="'+U+'"],section[id^="'+U+'"], ul[id^="'+U+'"]')}O=d.length;for(N=O-1;N>=0;N--){W=d[N].id;Q=false;for(w=0;w<R;w+=1){if(W.search(T[w])!==-1){Q=true;break}}if(!Q){r[W]=d[N]}}}return r}function A(w,d){var N=w.id;if(!E[N]){E[N]=v(w,d)}}function G(w){var d=0,N;for(N in w){if(w.hasOwnProperty(N)){if(!E[N]){E[N]=v(w[N])}}}return E}function x(){return M?a.timing.domContentLoadedEventEnd-e:0}function v(V,R){var S,P,U=false,w,O=[],Q,N=x(),d=x(),W=V.querySelectorAll("div, img, a, video, span, ul"),T=W.length;if(!R){if(W&&T>0){for(S=0;S<T;S+=1){w="";P=W[S];if(P.nodeName==="VIDEO"){}else{if(P.src){w=P.src}else{if(P.style&&P.style.backgroundImage){w=P.style.backgroundImage.slice(4,-1)}}}if(w){Q=a.getEntriesByName(w);if(Q&&Q.length&&Q.length>0&&C.isInViewport(P,true)){O.push(n(Q[0]))}}}}T=O.length;if(T>0){for(S=0;S<T;S+=1){if(O[S].start>N){N=O[S].start}if(O[S].durationFromNStart>d){d=O[S].durationFromNStart}}}}else{U=true;if(R.modStart){N=R.modStart}if(R.modEnd){d=R.modEnd}}return{isCustom:U,start:N,loadTime:d,name:V.id,resources:O,inViewPort:C.isInViewport(V.id),coverageArea:C.getElementCoverage(V.id),coveragePercentage:C.getElementPercentage(V.id)}}function q(O){var d,N=0,w=0;for(d in O){if(O.hasOwnProperty(d)){N=O[d].coveragePercentage;if(O[d].inViewPort&&Math.round(N)>0){w+=N}}}return w}function f(w){var N,d=w.length;for(N=0;N<d;N+=1){if(j.useNormalizeCoverage){if(Math.round(w[N])===Math.round(I)){return N*100}}else{if(Math.round(w[N])===Math.round(F)){return N*100}}}return 0}function J(O){var R=0,w=a.now(),N=Math.floor(w/100),d=new Array(N),Q,S=0,P;for(Q=0;Q<N;Q+=1){d[Q]=0}Q=0;for(P in O){if(O.hasOwnProperty(P)&&O[P].inViewPort&&Math.round(O[P].coveragePercentage)>0){if(j.useNormalizeCoverage){O[P].normCoveragePercentage=(O[P].coveragePercentage/F)*100;S+=O[P].normCoveragePercentage}if(O[P].loadTime>0){Q=Math.round(O[P].loadTime/100);d[Q]+=j.useNormalizeCoverage?O[P].normCoveragePercentage:O[P].coveragePercentage}}}for(Q=1;Q<N;Q+=1){d[Q]=d[Q-1]+d[Q];if(j.useNormalizeCoverage){R+=(S-d[Q])}else{R+=(F-d[Q])}}return{aft:R,aftIntervals:d,normTotalCoveragePercentage:S}}function c(){var d=h.slice(0);d.sort(function(N,w){return w.duration-N.duration});return d}function u(d){var R={},O=0,P=0,N=YAFT.getPageLoadTime(),w=0,Q=0;R.count=d.length;for(O=0;O<R.count;O+=1){if(d[O].start<=N){w+=1}if(d[O].duration<=0){P+=1;if(d[O].start<=N){Q+=1}}}R.cached=P;R.nonCached=R.count-P;R.onloadCount=w;R.onloadCached=Q;R.onloadNonCached=w-Q;return R}function K(V,T){var O={},P={},d=YAFT.getPageLoadTime(),N=YAFT.getStartRenderTime(),W=YAFT.getDomElementsCount(),w=YAFT.getTTFB(),U=YAFT.getDomInteractive(),R={},S={},Q={};h=t();if(!(h&&h.length&&h.length>0)){T(null,"No timings available");return}if(!C){C=l()}y(j.modules,j.modulesExclude);G(r);R=YAFT.getFinalModulesReport();F=q(R);P=J(R);I=P.normTotalCoveragePercentage;p=c();Q=u(p);D=f(P.aftIntervals);if(j.generateHAR){S=z(h)}O={aft:P.aft,pageLoadTime:d,startRender:N,domInteractive:U,ttfb:w,event:V,modulesReport:R,totalCoveragePercentage:F,normTotalCoveragePercentage:I,domElementsCount:W,resources:h,har:S,costlyResources:p,httpRequests:Q,visuallyComplete:D};if(T){YAFT.logToConsole(O);YAFT.logToConsole(P.aftIntervals);T(O)}if(s===true&&j.canShowVisualReport&&B.YAFT_REPORT&&B.YAFT_REPORT.drawReport){B.YAFT_REPORT.drawReport(O)}}function g(w,d){if(o||!H){return}o=true;if(!M){d(null,"Nav or resource timing or both are not available");return false}if(j.maxWaitTime&&j.maxWaitTime>0){setTimeout(function(){K(w,d)},j.maxWaitTime)}else{K(w,d)}}B.YAFT={triggerPerf:g,triggerCustomTiming:function(N,P,d){if(!M){return false}var w,O;if(YAFT.isInitialized()){if(!C){C=l()}if(this.getConfig().useCustomSelector){w=L.querySelectorAll(N)}else{w=L.querySelectorAll('div[id^="'+N+'"], section[id^="'+N+'"], ul[id^="'+N+'"]')}if(w&&w.length>0){O=w[0];r[O.id]=O;A(O,{modStart:P,modEnd:d})}}},getFinalModulesReport:function(){return E},reset:function(){H=true;o=false;r=[]},perfExists:function(){return M},isInitialized:function(){return H},getConfig:function(){return j},getPerformance:function(){return B.performance||B.webkitPerformance||B.msPerformance||B.mozPerformance||B.Performance},getRequestAnimationFrame:function(){return B.requestAnimationFrame||B.webkitRequestAnimationFrame||B.mozRequestAnimationFrame||B.msRequestAnimationFrame||function(d){return B.setTimeout(d,1000/60)}},init:function(w,N){var d;this.reset();a=this.getPerformance();if(a&&a.timing&&(a.getEntriesByType!==undefined||a.webkitGetEntriesByType!==undefined)){e=a.timing.navigationStart;a.now=a.now||a.webkitNow||a.msNow||a.mozNow||function(){return new Date().getTime()-e};M=true}else{N(null,"Nav or resource timing or both are not available");return false}if(this.getQueryStrings().showaft){s=true}for(d in w){if(j.hasOwnProperty(d)&&w.hasOwnProperty(d)){if(j[d]!=="undefined"){j[d]=w[d]}}}if(a.timing.loadEventStart>a.timing.navigationStart){YAFT.triggerPerf("deferred",N)}else{if(B.addEventListener){B.addEventListener("load",function(){YAFT.triggerPerf("load",N)},false);B.addEventListener("unload",function(){YAFT.triggerPerf("unload",N)},false)}else{if(B.attachEvent){B.attachEvent("onload",function(){YAFT.triggerPerf("load",N)});B.attachEvent("onunload",function(){YAFT.triggerPerf("unload",N)})}}}},getDomElementsCount:function(){return L.getElementsByTagName("*").length},getTTFB:function(){return M?a.timing.responseStart-e:0},getPageLoadTime:function(){return M?a.timing.loadEventStart-e:0},getStartRenderTime:function(){return M?a.timing.domContentLoadedEventStart-e:0},getDomInteractive:function(){return M?a.timing.domInteractive-e:0},getNow:function(){return M?a.now():0},getQueryStrings:function(){var w={},P="",O=B.location.search.slice(1).split("&"),N=0,d=O.length||0;for(N=0;N<d;N+=1){P=O[N].split("=");w[P[0]]=P[1]||""}return w},getViewport:function(){return C},logToConsole:function(d){if(M&&s&&console&&console.log){console.log(d)}}}})(window,document);(function(l,u){var b="http://www.w3.org/2000/svg",o={blocked:"rgb(204, 204, 204)",thirdParty:"rgb(0, 0, 0)",redirect:"rgb(255, 221, 0)",appCache:"rgb(161, 103, 38)",dns:"rgb(48, 150, 158)",tcp:"rgb(255, 157, 66)",ssl:"rgb(213,102, 223)",request:"rgb(64, 255, 64)",response:"rgb(52, 150, 255)"},a=false,m=false;function j(){var d=document.getElementById("waterfall-div");if(a){a=false;d.style.visibility="hidden"}else{d.style.visibility="visible";a=true}}function n(P){var I=P.resources,O=0,L=0,E="waterfall-div",x=10,d=2,G=200;for(L=0;L<I.length;L++){O=Math.max(O,I[L].durationFromNStart)}var H=document.getElementById(E),M=1000,J=(I.length+1)*(x+d),K=e(M,J);H=document.createElement("div");H.id=E;H.style.cssText="background:#fff;border: 2px solid #000;margin:5px;position:absolute;top:0px;left:0px;z-index:99999;margin:0px;padding:0px;";document.body.appendChild(H);H.width=M;H.height=J;var A=1000;if(O<=200){A=20}else{if(O>200&&O<=500){A=100}else{if(O>500&&O<=2000){A=200}else{if(O>16000&&O<=40000){A=2000}else{if(O>40000){A=5000}}}}}var C=(A*(M-5-G))/O,z=A/C,D=O/A,N=G,B=x+d,y=J;for(L=0;L<=D;L++){K.appendChild(r(N,0,0,x,"font: 10px sans-serif;","middle",L*A));K.appendChild(p(N,B,N,y,"stroke: #ccc;"));N+=C}N=G+(P.pageLoadTime/z);K.appendChild(r(N,0,0,x,"font: 10px sans-serif;","middle",""));K.appendChild(p(N,B,N,y,"stroke: #F00;"));for(L=0;L<I.length;L++){var w=I[L];var F=q("translate(0,"+(L+1)*(x+d)+")");F.appendChild(i(w));F.appendChild(r(5,0,0,x,"font: 10px sans-serif;","start",k(w.url)));F.appendChild(t(w,G,x,z));K.appendChild(F)}H.appendChild(K)}function i(x){var d=document.createElementNS(b,"title"),w=x.url+"\n\n";if(x.dnsDuration>0){w+="DNS Lookup:"+x.dnsDuration+"\n"}if(x.tcpDuration>0){w+="TCP Duration:"+x.tcpDuration+"\n"}if(x.sslDuration>0){w+="SSL Duration:"+x.sslDuration+"\n"}if(x.requestDuration>0){w+="Request Duration:"+x.requestDuration+"\n"}if(x.responseDuration>0){w+="Response Duration:"+x.responseDuration+"\n"}d.textContent=w;return d}function t(z,y,x,w){var d=q("translate("+y+", 0)");if(z.duration>0){d.appendChild(g(z.start/w,0,z.duration/w,x,"fill:"+o.blocked))}else{d.appendChild(g(z.start/w,0,2,x,"fill:"+o.blocked))}if(z.redirectDuration>0){d.appendChild(g(z.redirectStart/w,0,z.redirectDuration/w,x,"fill:"+o.redirect))}if(z.appCacheDuration>0){d.appendChild(g(z.appCacheStart/w,0,z.appCacheDuration/w,x,"fill:"+o.appCache))}if(z.dnsDuration>0){d.appendChild(g(z.dnsStart/w,0,z.dnsDuration/w,x,"fill:"+o.dns))}if(z.tcpDuration>0){d.appendChild(g(z.tcpStart/w,0,z.tcpDuration/w,x,"fill:"+o.tcp))}if(z.sslDuration>0){d.appendChild(g(z.sslStart/w,0,z.sslDuration/w,x,"fill:"+o.ssl))}if(z.requestDuration>0){d.appendChild(g(z.requestStart/w,0,z.requestDuration/w,x,"fill:"+o.request))}if(z.responseDuration>0){d.appendChild(g(z.responseStart/w,0,z.responseDuration/w,x,"fill:"+o.response))}return d}function k(w){var d=w;if(w.length>40){d=w.slice(0,17)+" ... "+w.slice(-20)}return d}function e(x,d){var w=document.createElementNS(b,"svg");w.setAttribute("width",x);w.setAttribute("height",d);return w}function q(d){var w=document.createElementNS(b,"g");w.setAttribute("transform",d);return w}function g(w,C,B,d,A){var z=document.createElementNS(b,"rect");z.setAttribute("x",w);z.setAttribute("y",C);z.setAttribute("width",B);z.setAttribute("height",d);z.setAttribute("style",A);return z}function p(w,A,d,x,z){var y=document.createElementNS(b,"line");y.setAttribute("x1",w);y.setAttribute("y1",A);y.setAttribute("x2",d);y.setAttribute("y2",x);y.setAttribute("style",z);return y}function r(B,A,F,E,d,z,D,C){var w=document.createElementNS(b,"text");w.setAttribute("x",B);w.setAttribute("y",A);w.setAttribute("dx",F);w.setAttribute("dy",E);w.setAttribute("style",d);w.setAttribute("text-anchor",z);if(C){w.setAttribute("onclick",C)}w.appendChild(document.createTextNode(D));return w}function h(){var w=u.createElement("style"),d=".aft-data-containter {display: none;} #waterfall-div {display:none;}";w.setAttribute("type","text/css");w.appendChild(u.createTextNode(d));u.getElementsByTagName("head")[0].appendChild(w)}function c(d){var w=u.createElement("div");w.className="aft-data-containter";w.innerHTML='<div class="aft-data"><ul><li>Module: '+d.name+"</li><li>Load time: "+Math.round(d.loadTime)+" ms</li><li>Coverage: "+Math.round(d.coveragePercentage)+"%</li><li>In viewport: "+d.inViewPort+"</li></ul></div>";return w}function v(w){var d,x;if(w.coveragePercentage>0){d=c(w);x=l.YAFT.getViewport().getElementBounds(w.name);d.style.position="absolute";d.style.top=x.top+"px";d.style.left=x.left+"px";u.body.appendChild(d)}}function f(){var w=u.createElement("style"),d=".aft-data-containter {text-align: left;position: relative;height: 0px;z-index: 99999;}.aft-data {color: rgb(200, 200, 200); color: rgba(255, 255, 255, .7); background: rgb(100, 100, 100); background: rgba(000, 000, 000, .5); display: inline-block;font-size: 12px;font-weight: bolder;}.aft-data ul {margin: 0;padding: 0 15px;}";w.setAttribute("type","text/css");w.appendChild(u.createTextNode(d));u.getElementsByTagName("head")[0].appendChild(w)}function s(z){var x,d,w,y;if(l.YAFT===undefined&&z===undefined){return false}f();x=u.createElement("div");x.className="aft-data-containter";x.style.position="absolute";x.style.top="0px";x.style.right="0px";x.style.zIndex="1000000";x.innerHTML='<div class="aft-data"><ul><li>PLT: '+Math.floor(z.pageLoadTime)+"</li><li>AFT: "+Math.floor(z.aft)+"</li><li>Visually Complete: "+Math.floor(z.visuallyComplete)+"</li><li>HTTP Requests PLT: "+z.httpRequests.onloadCount+" (Cached: "+z.httpRequests.onloadCached+")</li><li>HTTP Requests: "+z.httpRequests.count+" (Cached: "+z.httpRequests.cached+")</li><li>Start Render: "+Math.floor(z.startRender)+"</li><li>Dom Interactive: "+Math.floor(z.domInteractive)+"</li><li>Total Coverage: "+Math.round(z.totalCoveragePercentage)+"%</li><li>N Total Coverage: "+Math.round(z.normTotalCoveragePercentage)+'%</li></ul><a id="aft-report-waterfall" style="position:absolute;top:0px;right:15px;color:white;border:1px solid white;" href="#">WF</a><a id="aft-report-close" style="position:absolute;top:0px;right:0px;color:white;border:1px solid white;" onclick="YAFT_REPORT.closeReport();" href="#">X</a></div>';u.body.appendChild(x);for(w in z.modulesReport){if(z.modulesReport.hasOwnProperty(w)){v(z.modulesReport[w])}}d=u.getElementById("aft-report-waterfall");d.onclick=function(){if(!m){n(z);m=true;a=true}else{j()}}}l.YAFT_REPORT={drawReport:s,drawWaterfall:n,closeReport:h,toggleWaterfall:j}})(window,document);