window.ucs||(window.ucs={}),window.ucs.UH_MAIN_ID||(window.ucs.UH_MAIN_ID="#yucs"),window.ucs.ymreqid||(window.ucs.ymreqid=function(){var a=(new Date).getTime(),b=null,c="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(){return b=(a+16*Math.random())%16|0,a=Math.floor(a/16),b.toString(16)});return c}),window.ucs._sendBeacon||(window.ucs._sendBeacon=function(a){var b=new Image;b.height=0,b.width=0,b.style.display="none",b.src="https://geo.yahoo.com/t"+a,document.body.appendChild(b)}),window.ucs.YObj||(window.ucs.YObj=function(){var a=document.getElementById("yucs");return"undefined"!=typeof window.Y&&a&&"srp"===a.getAttribute("data-property")?window.Y:YUI()}());YUI.add("gallery-jsonp",function(a){function b(){this._init.apply(this,arguments)}var c=a.Lang.isObject,d=a.Lang.isFunction;b._pattern=/\bcallback=(.*?)(?=&|$)/i,b._template="callback={callback}",b.prototype={_init:function(b,c){this.url=b,c=c||{},d(c)&&(c={on:{success:c}}),c.on=c.on||{},c.on.success||(c.on.success=this._getCallbackFromUrl(b)),this._config=a.merge({on:{},context:this,args:[],format:this._format},c)},_getCallbackFromUrl:function(e){var f,g,h,i,j=e.match(b._pattern);if(j){for(g=a.config.win,h=j[1].split(/\./).reverse(),f=h.shift(),i=h.length-1;i>=0;--i)if(g=g[h[i]],!c(g))return null;if(c(g)&&d(g[f]))return a.bind(g[f],g)}return null},send:function(){function b(a){return d(a)?function(b){delete YUI.Env.JSONP[c],a.apply(e.context,[b].concat(e.args))}:null}if(!this._config.on.success)return this;var c=a.guid().replace(/-/g,"_"),e=this._config,f=e.format.call(this,this.url,"YUI.Env.JSONP."+c);return YUI.Env.JSONP[c]=b(e.on.success),a.Get.script(f,{onFailure:b(e.on.failure),onTimeout:b(e.on.timeout||e.on.failure),timeout:e.timeout}),this},_format:function(a,c){var d,e=b._template.replace(/\{callback\}/,c);return b._pattern.test(a)?a.replace(b._pattern,e):(d=a.slice(-1),"&"!==d&&"?"!==d&&(a+=a.indexOf("?")>-1?"&":"?"),a+e)}},a.JSONPRequest=b,a.jsonp=function(b,c){return new a.JSONPRequest(b,c).send()},YUI.Env.JSONP||(YUI.Env.JSONP={})},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(a){if(a.namespace("ucs"),!a.ucs.MenuUtils){var b='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></li>{separatorBottom}',c='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></li>{separatorBottom}',d='<span class="separator" role="presentation"></span>',e="click",f="a",g="role",h="tabIndex",i="yucs-hide",j="iframe",k="ul",l="li",m="parentNode",n="http://l.yimg.com/a/lib/ush/icon.gif",o="https://s.yimg.com/lq/lib/ush/icon.gif",p=300;a.ucs.MenuUtils=function(a,b){var c=b&&b.panelSelector||k;this.menu=a,this.enableClick=b&&b.enableClick,this.panel=this.menu.one(c),this.panel&&this.init(),this.openDelay=b&&"undefined"!=typeof b.openDelay?b.openDelay:p,this.closeTimer=null,this.overPanel=!1,this.overLink=!1},a.ucs.MenuUtils.prototype={init:function(){this.keyedup=!1,this.menu.on("hover",a.bind(this._handleMenuEnter,this),a.bind(this._handleMouseOut,this),this),this.panel.on("hover",a.bind(this._handlePanelEnter,this),a.bind(this._handlePanelLeave,this),this),this.enableClick&&this.menu.on("click",a.bind(this._handleMenuToggle,this),this),this.menu.delegate(e,this._handleMenuItemClick,"li a",this),this.menu.on("keyup",this._handleKeyup,this),this.menu.on("keydown",this._handleKeydown,this),this.menu.removeClass("yucs-activate"),this._initAria()},_initAria:function(){this.menu.one(f).set(g,"button"),this.panel.all(f).set(g,"menuitemradio"),this.panel.set(g,"menu"),this.panel.all("div,ul,li").set(g,"presentation"),a.UA.ipad||a.UA.mobile||this.panel.set(h,-1),this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:f,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(a){return a.get(m)}},circular:!0})},_refreshAria:function(){this.focusmanager.focusManager.refresh()},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager),this.panel.one(f).set(h,0)},_handleMenuClick:function(a){this.overLink&&this.panel.hasClass(i)&&(this._accessShowMenu(a),this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null))},_handleMenuEnter:function(b){b.halt(),this.overLink=!0,a.later(this.openDelay,this,this._handleMenuClick)},_handlePanelEnter:function(){this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.overPanel=!0},_handlePanelLeave:function(){this.overPanel=!1,this.panelShown&&this._handleMouseOut()},_handleMenuToggle:function(){this.overLink=this.overLink?!1:!0,this.panelShown?(this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))):a.later(this.openDelay,this,this._handleMenuClick)},_handleKeyup:function(a){27===a.keyCode?(this.menu.one(f).focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one(f).focus(),this.keyedup=!0)},_handleKeydown:function(a){this.panel.hasClass(i)||a.stopPropagation(),40===a.keyCode&&a.preventDefault()},_handleDocumentClick:function(a){return this.panel.contains(a.target)||a.target._node===this.panel._node||this.panel.hasClass(i)||a.target===this.menu.one(">a")||a.target.get("parentNode")===this.menu.one(">a")?void(this.skipBlur=!0):void this._hideMenu()},_accessShowMenu:function(b){this._hideAllMenus(),this._showMenu(b),this.panel.focus(),a.Node.DOM_EVENTS.touchend=!0,this.documentBlurHandle=a.on("blur",function(){var a=this;this.skipBlur||(this.timeout=setTimeout(function(){a._hideMenu()},50)),this.skipBlur=!1},this.panel,this),this.documentFocusHandle=a.on("focus",function(a){this.timeout&&this.panel.hasChildNodes(a.target)&&(clearTimeout(this.timeout),this.timeout=null)},this.panel,this)},_showMenu:function(){this.panel.removeClass(i),this._addIframeShim();var a=this.menu.one(j);a&&a.removeClass(i)},_position:function(){var a=this.menu.get("region");this.panel.hasClass("yucs-menu-right")||this.panel.hasClass("yucs-menu-left")||this.panel.setStyle("left",a[0]),this.panel.setStyle("top",a[1]+13)},_handleMouseOut:function(){this.overLink=!1,this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))},_handleLeave:function(){this.overPanel||this.overLink||this._hideMenu()},_hideMenu:function(){this.panel.addClass(i),this.overPanel=!1;var a=this.menu.one(j);a&&a.addClass(i),this.documentBlurHandle&&this.documentBlurHandle.detach(),this.documentFocusHandle&&this.documentFocusHandle.detach(),this.documentClickHandle&&this.documentClickHandle.detach(),this.documentMouseDownHandle&&this.documentMouseDownHandle.detach(),this.documentTouchEndHandle&&this.documentTouchEndHandle.detach(),this.keyedup=!1},_hideAllMenus:function(){var b=a.all("yucs-menu iframe"),c=a.one("#yucs-top-menu");this._hideMenu(),c&&c.one("ul")&&(c.one("ul").addClass(i),a.one("#yucs-more").removeClass("yucs-menu-active")),b.addClass(i)},_addIframeShim:function(){var b,c=a.all("select"),d=a.UA.ie<=6;d&&0!==c.size()&&(b=this.menu.one(j),b||(b=document.createElement(j),b=this.panel.get(m).insertBefore(b,this.panel)),b.className="yucs-shim",b.setStyle("position","absolute"),b.setStyle("width",this.panel.getComputedStyle("width")),b.setStyle("height",this.panel.getComputedStyle("height")),b.setStyle("top",this.panel.getY()+"px"),b.setStyle("border","0px none"),this.menu.hasClass("yucs-help")||b.setStyle("left",0),b.frameBorder=0)},_addMenuGroups:function(a,b,c){for(var d=this.menu.one(k),e="",f=d.get("children")._nodes.length?!0:!1,g=0,h=a.length;h>g;g++){var i=a[g].length;"bottom"===b?a[g][0].separatorTop=!0:(h-1>g||f)&&(a[g][i-1].separatorBottom=!0),e+=this._addMenuGroup(a[g],c)}"bottom"===b?d.append(e):d.prepend(e)},_addMenuGroup:function(a,b){for(var c="",d=0,e=a.length;e>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass="debug-item"):(a[d].isDebugItem=!1,a[d].menuClass="minty-item"),c+=this._addMenuItem(a[d]);return c},_addMenuItem:function(d){var e="";switch(d.checkedAria=d.isActive?'aria-checked="true"':"",d.disabledAria=d.isDisabled?'aria-disabled="true"':"",d.actionType){case"link":e=a.substitute(b,d,this._processTemplateValue);break;case"customEvent":e=a.substitute(c,d,this._processTemplateValue)}return e&&(e=d.isDebugItem?e.replace(/separator/,"separator debug-item"):e.replace(/separator/,"separator minty-item")),e},_clearMenuItem:function(a){this.menu.one(k).all("."+a).each(function(a){a.remove(!0)})},_processTemplateValue:function(b,c,e){a.log("key = "+b+" value = "+c+" meta_data = "+e);var f="",g="https:"===document.location.protocol?o:n;switch(b){case"icon":void 0!==c&&(f="available"===c?'<img src="'+g+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+g+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+g+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+g+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+g+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(f=d);break;case"separatorBottom":c&&(f=d);break;case"actionData":c&&(f='data-mad="'+c+'"');break;case"isDisabled":c&&(f="disabled");break;case"isActive":c&&(f="sp active");break;case"checkedAria":f=c;break;default:f=c}return f},_resetItemStatus:function(a){var b,c=a.ancestor(k).all(l),d=a.ancestor(k).all("li.disabled");c.removeClass("sp active"),d.removeClass("disabled"),a.getAttribute("data-dis")&&(b=a.ancestor(l),b.addClass("disabled")),a.getAttribute("data-hs")&&(b=a.ancestor(l),b.addClass("sp active"))},_handleMenuItemClick:function(a){a.target}}}},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]}),function(){var a=document.getElementById("yucs");a&&window.ucs.YObj.use("node","ucs-menu-utils",function(a){var b=a.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(b){new a.ucs.MenuUtils(b)})})}();!function(){function a(a){switch(a){case"tr-tr":return[" "];case"es-cl":case"nl-nl":case"ta-in":case"zh-hant-cn":case"hi-in":case"kn-in":return["-"];case"de-at":case"de-ch":case"de-de":case"fi-fi":case"nb-no":case"pl-pl":case"ro-ro":case"ru-ru":return["."];default:return["/"]}}function b(a){switch(a){case"en-ae":case"en-au":case"en-ca":case"en-ie":case"en-in":case"en-my":case"en-nz":case"en-ph":case"en-sg":case"en-us":case"es-us":case"ja-jp":case"sv-se":return[e,g,f,g,d].join("");case"ro-ro":case"fi-fi":case"pl-pl":case"en-gb":case"th-th":case"en-ie":case"tr-tr":case"vi-vn":return[f,g,e,g,c].join("");case"zh-hant-cn":case"zh-hant-tw":return[d,g,e,g,f].join("");default:return[f,g,e,g,d].join("")}}var c="%Y",d="%y",e="%m",f="%d",g="_",h=document.getElementById("yucs")&&document.getElementById("yucs").getAttribute("data-lang").toLowerCase()||"en-us";window.ucs||(window.ucs={}),window.ucs.getLocalDateFormat=function(c){c=c.toLowerCase();var d=a(c),e=b(c);return e.replace(new RegExp(g,"g"),d)},window.ucs.localeDateFormat=window.ucs.getLocalDateFormat(h)}();window.ucs.YObj.use("datatype-date",function(){}),YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp"),a.ucs.Timestamp={getTimeStamp:function(b){var c,d,e,f,g,h="AM",i=a.one("#yucs"),j=b.dateRef||new Date,k=b.date,l=b.locale?b.locale:i.getAttribute("data-lang"),m=k.getTime(),n=k.getDate(),o=j.getDate(),p=j.getTime(),q=p-m,r=o-n,s=!0,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return s=/^en-us$/i.test(l),q=parseInt(q/1e3,10),d=k.getMonth(),e=k.getHours(),f=k.getMinutes(),g=p-(60*j.getHours()*60*1e3+60*j.getMinutes()*1e3+1e3*j.getSeconds()+j.getMilliseconds()),10>f&&(f="0"+f),e>=12&&(h="PM"),e>12&&(e-=12),b.type&&"short"===b.type&&a.DataType&&a.DataType.Date?0===r?c=e+":"+f+" "+h:(/^th-th$/i.test(l)&&k.setFullYear(k.getFullYear()+543),c=a.DataType.Date.format(k,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,"")):s?0===r?60>q?c=q>1?q+" secs ago":q+" sec ago":3600>q?(q=Math.ceil(q/60,10),c=2>q?q+" min ago":q+" mins ago"):86400>q&&(q=Math.ceil(q/3600),c=q>1?q+" hours ago":q+" hour ago"):c=864e5>g-m&&0!==r?"Yesterday "+e+":"+f+" "+h:t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h:c=t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h,c}}},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-logodebug",function(a){a.namespace("ucs");var b=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),d=!1;-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(d=!0),(b&&0===b.offsetWidth&&void 0===b.readyState||b&&0===b.offsetWidth&&"uninitialized"===b.readyState||d&&b&&"uninitialized"===b.readyState||d&&b&&void 0===b.readyState)&&(c.style.visibility="visible",c.style.position="relative"),a.ucs.LogoDebug=function(a){a.on("click",this._handleClick,this),this.publish("ucs:logoDebug",{broadcast:2,emitFacade:!0})},a.ucs.LogoDebug.prototype={_handleClick:function(a){a.altKey&&(a.halt(),this.fire("ucs:logoDebug"))}},a.Global.on("ucs:themeChange",function(){a.later(11,this,function(){a.one("#animator")&&a.one("#animator").setStyle("display","none"),a.one("#yucs-logo-ani")&&(a.one("#yucs-logo-ani").setStyle("position","relative"),a.one("#yucs-logo-ani").setStyle("visibility","visible"),a.one(".lt #yucs-logo-ani")?a.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important"):a.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0% !important"))})}),a.Global.on("ucs:playLogo",function(){"undefined"!=typeof Aniden&&Aniden.play&&Aniden.play()}),a.augment(a.ucs.LogoDebug,a.EventTarget)},"1.0",{requires:["node"]}),function(){window.ucs.YObj.use("node","ucs-logodebug",function(a){var b=a.one("#yucs-logo");if(b){new a.ucs.LogoDebug(b)}})}();YUI.add("ucs-switch-theme",function(a){"use strict";a.namespace("ucs"),a.ucs.SwitchTheme=function(a){this.init(a)},a.ucs.SwitchTheme.prototype={init:function(a){this.container=a},_getTheme:function(){return this.container.hasClass("lt")?"light":"dark"},_setTheme:function(a){"light"===a?this.container.addClass("lt"):"dark"===a&&this.container.removeClass("lt")}}}),window.ucs.YObj.use("node","ucs-switch-theme",function(a){if(window.ucs.UhTheme){var b=a.one("#yucs");window.ucs.UhTheme=new a.ucs.SwitchTheme(b),window.ucs.UhTheme.getTheme=function(){return window.ucs.UhTheme._getTheme()},window.ucs.UhTheme.setTheme=function(a){return window.ucs.UhTheme._setTheme(a)}}});window.ucs&&window.ucs.YObj&&!function(a){YUI.add("ucs-meta",function(a){"use strict";if(a.namespace("ucs"),a.ucs.Meta)return void a.log("Y.ucs.Meta is already defined.","debug","ucs-meta");var b=null,c=function(b){return a.version>="3.5.1"?b.getData():{authstate:b.getAttribute("data-authState"),cobrand:b.getAttribute("data-cobrand"),crumb:b.getAttribute("data-crumb"),mccrumb:b.getAttribute("data-mc-crumb"),gta:b.getAttribute("data-gta"),device:b.getAttribute("data-device"),experience:b.getAttribute("data-experience"),firstname:b.getAttribute("data-firstname"),flight:b.getAttribute("data-flight"),forcecobrand:b.getAttribute("data-forcecobrand"),guid:b.getAttribute("data-guid"),host:b.getAttribute("data-host"),https:b.getAttribute("data-https"),languagetag:b.getAttribute("data-languagetag"),property:b.getAttribute("data-property"),protocol:b.getAttribute("data-protocol"),shortfirstname:b.getAttribute("data-shortfirstname"),shortuserid:b.getAttribute("data-shortuserid"),status:b.getAttribute("data-status"),spaceid:b.getAttribute("data-spaceid"),test_id:b.getAttribute("data-test_id"),userid:b.getAttribute("data-userid")}};a.ucs.Meta=function(a){b=this,b.components={meta:a},b.data=c(a)},a.ucs.Meta.prototype={authState:function(){return a.Object.getValue(b.data,"authstate")},cobrand:function(){return a.Object.getValue(b.data,"cobrand")},crumb:function(){return a.Object.getValue(b.data,"crumb")},mccrumb:function(){return a.Object.getValue(b.data,"mccrumb")},gta:function(){return a.Object.getValue(b.data,"gta")},device:function(){return a.Object.getValue(b.data,"device")},experience:function(){return a.Object.getValue(b.data,"experience")},find:function(b){return a.one(a.Lang.sub("#yucs-{component}",{component:b}))},firstname:function(){return a.Object.getValue(b.data,"firstname")},flight:function(){return a.Object.getValue(b.data,"flight")},forcecobrand:function(){return a.Object.getValue(b.data,"forcecobrand")},guid:function(){return a.Object.getValue(b.data,"guid")},host:function(){return a.Object.getValue(b.data,"host")},https:function(){return a.Object.getValue(b.data,"https")},languagetag:function(){return a.Object.getValue(b.data,"languagetag")},property:function(){return a.Object.getValue(b.data,"property")},protocol:function(){return a.Object.getValue(b.data,"protocol")},shortfirstname:function(){return a.Object.getValue(b.data,"shortfirstname")},shortuserid:function(){return a.Object.getValue(b.data,"shortuserid")},status:function(){return a.Object.getValue(b.data,"status")},spaceid:function(){return a.Object.getValue(b.data,"spaceid")},test_id:function(){return a.Object.getValue(b.data,"test_id")},userid:function(){return a.Object.getValue(b.data,"userid")},toJSON:function(){return{authState:b.authState(),cobrand:b.cobrand(),crumb:b.crumb(),mccrumb:b.mccrumb(),gta:b.gta(),device:b.device(),experience:b.experience(),firstname:b.firstname(),flight:b.flight(),forcecobrand:b.forcecobrand(),guid:b.guid(),host:b.host(),https:b.https(),languagetag:b.languagetag(),property:b.property(),protocol:b.protocol(),shortfirstname:b.shortfirstname(),shortuserid:b.shortuserid(),status:b.status(),spaceid:b.spaceid(),test_id:b.test_id(),userid:b.userid()}}}},"0.0.1",{requires:["node"]}),a.YObj.use("ucs-meta",function(b){b.Lang.isObject(a.Meta)&&a.Meta instanceof b.ucs.Meta||(a.Meta=new b.ucs.Meta(b.one("#yucs-meta")))})}(window.ucs);YUI.add("ucs-beacon",function(d){var a=null,c=function(h){var e=null,j={},k="",f="",g=null;e=b();if(e!==null){d.log("emit_beacon: beacon=YMedia.Af.Beacon","debug","Beacon");d.log(h,"debug");switch(h.type){case"info":e.info(h.source,{code:h.code,message:d.JSON.stringify(h)});break;case"error":e.error(h.source,{},{code:h.code,message:d.JSON.stringify(h)});break;}}else{d.log("emit_beacon: beacon=geo.yahoo.com","debug","Beacon");d.log(h,"debug");j.s=1197747123;j.r=encodeURIComponent(location.href);j.t=Math.random();j.dmsgs=encodeURIComponent(d.JSON.stringify(h.dmsgs));j.sec=encodeURIComponent(h.sec);j.slk=encodeURIComponent(h.slk);j.type=h.type;for(g in j){k+=f+g+"="+j[g];f="&";}e=new Image(0,0);e.src="https://geo.yahoo.com/p?"+k;}},b=function(){var e=null;if(typeof YMedia!=="undefined"&&d.Lang.isObject(YMedia)&&d.Lang.isObject(YMedia.Af)&&d.Lang.isObject(YMedia.Af.Beacon)){e=YMedia.Af.Beacon;if(d.Lang.isFunction(e.setSampleSize)){if(window.location.href.match(/debug_beacon=1/)){e.setSampleSize(1);}}else{d.log("get_beacon: setSampleSize method not found!");}}return e;};d.namespace("ucs").Beacon={error:function(e){c(e);},info:function(e){c(e);},perf:function(e){c(e);}};},"1.0",{requires:["json"]});YUI.add("comet",function(d){d.namespace("Comet");function b(e){b.superclass.constructor.apply(this,arguments);}var c={};var a="comet:ready";d.initComet=function(g,f){var e=g.replace(/https:/,"http:");if(e.substr(-1)==="/"){e=e.substring(0,e.length-1);}if(!c[e]){d.publish(a);c[e]=new b();c[e].clearListeners();}else{}if(f){c[e].addListener("/meta/handshake",f);}c[e].initBayeux(g,function(h){if(h.successful){d.fire(a,{message:h});}});return c[e];};b.NAME="Comet";b.ATTRS={uri:{value:null,setter:function(g){if(g===null){return;}var e=window.location.protocol;if(e.indexOf("https")!==-1){g=g.replace(/http:/,"https:");}else{if(e.indexOf("http")!==-1){g=g.replace(/https:/,"http:");}}var f=g.toLowerCase();if(f.indexOf("https://")!==-1){this.set("protocol","https://");}else{if(f.indexOf("http://")!==-1){this.set("protocol","http://");}}return g;}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json","Accept":"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}};d.extend(b,d.Base,{_clientState:"unconnected",_advice:{},_connected:false,_config:{backoffIncrement:1000,maxBackoff:10000,maxNetworkDelay:300000,delayedSendMaxCount:10,advice:{timeout:60000,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5000}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:false,_isSendingQueue:false,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new d.AsyncQueue(),_ioQueue_c2s:d.io.queue,_ioQueue_s2c:d.io.queue,_jsonp:null,_listeners:{},initializer:function(e){this.setClientState("unconnected");d.on("beforeunload",d.bind(function(){if(this.getClientState()!=="unconnected"){this.disconnect();}},this),window);},config:function(e,f){d.Object.setValue(this._config,e,f);},_Queue_send:function(f){var e=this;e._batch(f);if(!e.getClientId()){return;}if(e._isSendingQueue){return;}if(e._outgoing.length<=0){return;}d.each(e._outgoing,function(g){g=e._patchMessage(g);});e._IO_send(true,e._outgoing);e._outgoing=[];},_nextQueueSend:function(){this._Queue_send();},_IO_send:function(g,f){var e=this;if(!e.get("uri")){return;}if(g){if(e._isSendingQueue||!f){return;}e._IO_Queue_Send(f);}else{if(!e.getClientId()){return;}if(e._isLongpollingConnect||!f){return;}e._IO_Longpolling_Send(f);}},_IO_Queue_Send:function(f){var e=this;e.setTokenHeader(e._token);var g=d.merge(e.get("ioCfg"),{context:e,timeout:e._config.maxNetworkDelay,data:d.JSON.stringify(f),xdr:{credentials:true},on:{success:function(h,k){try{var i=d.JSON.parse(k.responseText);e._handleResponse(i);}catch(j){e._handleFailure(f,"json parse error");return;}},failure:function(h,i){e._handleFailure(f,"500::io failed");},start:function(){e._isSendingQueue=true;},complete:function(){e._isSendingQueue=false;e._nextQueueSend();}}});e._ioQueue_c2s.stop();e._ioQueue_c2s(e.get("uri"),g);e._ioQueue_c2s.start();},_IO_Jsonp_Send:function(f){var e=this;if(!e.get("uri")){return;}var h=e.get("uri")+"?callback={callback}";var g=encodeURIComponent(d.JSON.stringify(f));h=h+"&data="+g;e._jsonp=new d.JSONPRequest(h,{on:{success:function(i){e._handleResponse(i);},timeout:function(i){e._handleFailure(f,"408:"+e._config.subscribe.jsonpTimeout+":jsonp timeout");},failure:function(){e._handleFailure(f,"500::jsonp failed");}},timeout:e._config.subscribe.jsonpTimeout});e._jsonp.send();},_IO_Longpolling_Send:function(f){var e=this;e.setTokenHeader(e._token);var g=d.merge(e.get("ioCfg"),{context:e,timeout:e._config.maxNetworkDelay,xdr:{credentials:true},data:d.JSON.stringify(f),on:{success:function(h,k){try{var i=d.JSON.parse(k.responseText);e._handleResponse(i);}catch(j){e._handleFailure(f,"json parse error");return;}},failure:function(h,i){e._handleFailure(f,"500::io failed");},start:function(){e._isLongpollingConnect=true;},complete:function(){e._isLongpollingConnect=false;}}});e._ioQueue_s2c.stop();e._ioQueue_s2c(e.get("uri"),g);e._ioQueue_s2c.start();},_handleResponse:function(e){if(e===undefined||e===null){return;}var f=this;d.each(e,function(h){f._updateAdvice(h.advice);h.originalURI=f._urlOrigin;var g=h.channel;switch(g){case"/meta/handshake":f._handshakeResponse(h);break;case"/meta/connect":f._connectResponse(h);break;case"/meta/disconnect":f._disconnectResponse(h);break;case"/meta/subscribe":f._subscribeResponse(h);break;case"/meta/unsubscribe":f._unsubscribeResponse(h);break;default:f._messageResponse(h);break;}});},_updateAdvice:function(e){if(e){this._advice=this._mixin(false,{},this._config.advice,e);}else{this._advice=this._config.advice;}},_handshakeResponse:function(f){var e=this;if(f.successful){e.setClientState("connected");e._clientId=f.clientId;if(e._advice.VIP){e.set("uri",e.get("protocol")+e._advice.VIP+"/comet");}e._notifyListeners("/meta/handshake",f);e._Queue_send();var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._resetBackoff();e._delayedConnect();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}}else{e._failHandshake(f);}},_failHandshake:function(g){var f=this;f.setClientState("unconnected");f._clientId=null;f._notifyListeners("/meta/handshake",g);f._notifyListeners("/meta/unsuccessful",g);var e=(f._advice.reconnect!=="none");if(e){f._increaseBackoff();f._delayedHandshake();}else{f._disconnect(false);}},_delayedHandshake:function(){var e=this;
this._delayedSend(function(){e._handshake();});},_subscribeResponse:function(e){if(e.successful){if(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===true){}else{this._subscribeChannel[e.subscription]=true;}if(e["ext"]["Comet-auth-token"]){this._token=e["ext"]["Comet-auth-token"];}this._notifyListeners("/meta/subscribe",e);}else{this._failSubscribe(e);}},_failSubscribe:function(e){this._notifyListeners("/meta/subscribe",e);this._notifyListeners("/meta/unsuccessful",e);},_connectResponse:function(f){var e=this;if(e._isDisconnected()){return;}e._connected=f.successful;if(e._connected){e.setClientState("connected");e._notifyListeners("/meta/connect",f);var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._resetBackoff();e._delayedConnect();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}}else{e._failConnect(f);}},_failConnect:function(f){var e=this;e._notifyListeners("/meta/connect",f);e._notifyListeners("/meta/unsuccessful",f);var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._delayedConnect();e._increaseBackoff();break;case"subscribe":e._delayedConnect();e._increaseBackoff();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}},_delayedConnect:function(){var e=this;this._delayedSend(function(){e._connect();});},_disconnectResponse:function(e){if(e.successful){this._disconnect(false);this._notifyListeners("/meta/disconnect",e);}else{this._failDisconnect(e);}},_failDisconnect:function(e){this._disconnect(true);this._notifyListeners("/meta/disconnect",e);this._notifyListeners("/meta/unsuccessful",e);},_unsubscribeResponse:function(e){if(e.successful){if(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===true){delete this._subscribeChannel[e.subscription];}this._notifyListeners("/meta/unsubscribe",e);}else{this._failUnsubscribe(e);}},_failUnsubscribe:function(e){this._notifyListeners("/meta/unsubscribe",e);this._notifyListeners("/meta/unsuccessful",e);},_messageResponse:function(e){if(e.successful===undefined){if(e.data){this._notifyListeners(e.channel,e);}else{this._notifyListeners("/meta/unsuccessful",e);}}else{if(e.successful){this._notifyListeners("/meta/publish",e);}else{this._failMessage(e);}}},_failMessage:function(e){this._notifyListeners("/meta/publish",e);this._notifyListeners("/meta/unsuccessful",e);},_delayedSend:function(e){var h=this;var f=h._advice.interval+h._backoff;if(h._config.maxBackoff<=h._backoff){h._delayedSendCount++;}else{h._delayedSendCount=0;}if(h._delayedSendCount>h._config.delayedSendMaxCount){var g=h.get("uri");h.set("uri",h._urlOrigin);if(g===h.get("uri")){return;}h._resetBackoff();h._delayedSendCount=0;}h._queue.add({fn:e,timeout:f});h._queue.run();},_handshakeFailure:function(f,e){this._failHandshake({successful:false,failure:true,channel:"/meta/handshake",request:f,advice:{reconnect:"retry",interval:this._backoff},error:e||"",ext:f.ext||{},id:f.id||""});},_connectFailure:function(f,e){this._connected=false;this._failConnect({successful:false,failure:true,channel:"/meta/connect",request:f,advice:{reconnect:"retry",interval:this._backoff},clientId:f.clientId||"",error:e||"",ext:f.ext||{},id:f.id||""});},_disconnectFailure:function(f,e){this._failDisconnect({successful:false,failure:true,channel:"/meta/disconnect",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",error:e||"",ext:f.ext||{},id:f.id||""});},_subscribeFailure:function(f,e){this._failSubscribe({successful:false,failure:true,channel:"/meta/subscribe",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_unsubscribeFailure:function(f,e){this._failUnsubscribe({successful:false,failure:true,channel:"/meta/unsubscribe",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_messageFailure:function(f,e){this._failMessage({successful:false,failure:true,channel:f.channel,request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_handleFailure:function(j,e){var h,g,f;for(f=0;f<j.length;++f){h=j[f];g=h.channel;switch(g){case"/meta/handshake":this._handshakeFailure(h,e);break;case"/meta/connect":this._connectFailure(h,e);break;case"/meta/disconnect":this._disconnectFailure(h,e);break;case"/meta/subscribe":this._subscribeFailure(h,e);break;case"/meta/unsubscribe":this._unsubscribeFailure(h,e);break;default:this._messageFailure(h,e);break;}}},_notifyListeners:function(j,h){this._notify(j,h);this._notify(j+"/*",h);var k=j.split("/");var g=k.length-1,f=0;for(f=g;f>0;--f){var e=k.slice(0,f).join("/")+"/*";if(f===g){this._notify(e,h);}this._notify(e,h);}},_notify:function(g,f){var e=this._listeners[g];if(e){d.each(e,function(h){if(d.Lang.isFunction(h.listener)){h.listener(f);}});}},_isDisconnected:function(){return this._clientState==="unconnected";},_resetBackoff:function(){this._backoff=0;},_nextMessageId:function(){return ++this._lastMessageId+"";},_increaseBackoff:function(){if(this._backoff<this._config.maxBackoff){this._backoff+=this._config.backoffIncrement;}},_createMessage:function(g,f){f=f||{};var j=(new Date()).valueOf();var i=window.location.host;var e=[];var h=d.merge(this.get("ext").all,this.get("ext")[g],f.ext||{},{"timestamp":j,"host":i||""});switch(g){case"handshake":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g]));break;case"connect":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId()}));break;case"subscribe":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),subscription:f.channel}));break;case"unsubscribe":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),subscription:f.channel}));
break;case"publish":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),channel:f.channel,data:f.data}));break;case"disconnect":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId()}));break;}return e;},_handshake:function(e){var h=this;if(h.getClientState()!=="unconnected"){if(h.getClientState()==="connected"){var g={successful:true,channel:"/meta/handshake",clientId:h._clientId,originalURI:h._urlOrigin};h._notifyListeners("/meta/handshake",g);}return;}if(e&&e.listener){h._addListener(e,false);}h._clientId=null;h._token=null;h.resetTokenHeader();h._clearSubscriptions();h._updateAdvice(h._config.advice);var f=h._createMessage("handshake",e);h._IO_send(true,f);h.setClientState("connecting");},_connect:function(e){var g=this;if(g.getClientState()!=="connected"){return;}if(g._isLongpollingConnect){return;}var f=g._createMessage("connect",e);g._IO_send(false,f);},_subscribeJSONP:function(e){if(!(e&&e.channel)){return;}if(!this.getClientId()){return;}if(this._subscribeChannel[e.channel]&&this._subscribeChannel[e.channel]===true){return;}if(e.listener){this._addListener(e,true);}var f=this._createMessage("subscribe",e);this._IO_Jsonp_Send(f);},_unsubscribe:function(e){if(!this.getClientId()){return;}if(e&&e.channel){this.removeListeners(e.channel);}if(e&&e.channel){var f=this._createMessage("unsubscribe",e);this._Queue_send(f);}},_disconnect:function(f){var g=this;if(f){g._ioQueue_c2s.stop();g._ioQueue_s2c.stop();}g.setClientState("unconnected");g._clientId=null;g._resetBackoff();g._queue.stop();if(g._outgoing.length>0){var e=g._outgoing;g._outgoing=[];g._handleFailure(e,"500::canceled after disconnect");}g._clearSubscriptions();},_patchMessage:function(e){if(!e.id){e.id=this._nextMessageId();}e.clientId=this.getClientId();if(e.channel==="/meta/handshake"){delete e.clientId;}return e;},_batch:function(){d.each(arguments,function(e){if(e&&d.Lang.isArray(e)){var f=0;for(f=0;f<e.length;++f){this._outgoing.push(e[f]);}}else{if(e){this._outgoing.push(e);}}},this);},_clearSubscriptions:function(){d.each(this._listeners,function(e){if(e){d.each(e,function(g,f,h){if(g&&g.isSub){h.splice(f);}});}});this._subscribeChannel={};},_reDoSubscriptions:function(){d.each(this._subscribeChannel,function(e,f){if(e){this._subscribeChannel[f]=false;this._subscribeJSONP({channel:f});}},this);},isDuplicatedListener:function(e,g){var f=0;for(f=0;f<g.length;++f){var h=g[f];if(h&&h.listener&&h.listener.toString()===e.toString()){return true;}}return false;},_addListener:function(e,f,g){if(e&&e.listener&&d.Lang.isFunction(e.listener)){if(this._listeners[e.channel]){if(g||!this.isDuplicatedListener(e.listener,this._listeners[e.channel])){this._listeners[e.channel].push({listener:e.listener,isSub:f});}}else{this._listeners[e.channel]=[{listener:e.listener,isSub:f}];}}},_mixin:function(l,j,m){var g,h;var n=j||{};for(g=2;g<arguments.length;++g){var f=arguments[g];if(f===undefined||f===null){continue;}for(h in f){var e=f[h];var k=n[h];if(e===j){continue;}if(e===undefined){continue;}if(l&&typeof e==="object"&&e!==null){if(e instanceof Array){n[h]=this._mixin(l,k instanceof Array?k:[],e);}else{n[h]=this._mixin(l,{},e);}}else{n[h]=e;}}}return n;},destructor:function(){},getClientState:function(){return this._clientState;},setClientState:function(e){this._clientState=e;},getClientId:function(){return this._clientId;},initBayeux:function(e,f){this._urlOrigin=e;this.set("uri",e);this._handshake({channel:"/meta/handshake",listener:f});},subscribe:function(e,f){this._subscribeJSONP({channel:e,listener:f});},unsubscribe:function(e){this._unsubscribe({channel:e});},disconnect:function(g){var f=this;if(g){f._addListener({channel:"/meta/disconnect",listener:g},false);}if(f.getClientState()==="unconnected"){return;}if(!f.getClientId()){return;}var e=f._createMessage("disconnect");f._Queue_send(e);},publishMsg:function(f,h){if(f&&h){var e={channel:f,data:h};var g=this._createMessage("publish",e);this._Queue_send(g);}},clearListeners:function(){this._listeners={};},addListener:function(e,g,f){f=f||false;if(!g&&d.Lang.isFunction(g)){return;}this._addListener({channel:e,listener:g},false,f);},removeListeners:function(e){if(this._listeners[e]){delete this._listeners[e];}},setUserInfo:function(f,e){if(f&&e){var g=this.get("ext");g.subscribe["Comet-subscriber-auth-info"]={"uid":f,"user_type":"yahoo","user_cred":e};}},setUserInfoWithCookie:function(f,e){if(f){var g=this.get("ext");g.subscribe["Comet-subscriber-auth-info"]={"uid":f,"user_type":"yahoo","user_cred":"Any Value"};}},setTokenHeader:function(e){if(e){var f=this.get("ioCfg");f["headers"]["Authorization"]="Basic token="+e;}},resetTokenHeader:function(){var e=this.get("ioCfg");e["headers"]["Authorization"]="Basic token=";},setYcaHeader:function(e,f){if(e){var h=this.get("ioCfg");h["headers"]["Yahoo-App-Auth"]=e;}if(f){var g=this.get("ext");g.publish["Comet-opaque-id"]=f;}}});d.Comet=b;},"3.4.1",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});YUI.add("ucs-comet-conn",function(f){f.namespace("ucs");var b={counts_max:{unsuccessful:{"/meta/handshake":25,"/meta/subscribe":25,"/meta/unsubscribe":25,"/meta/connect":25,"/meta/disconnect":25}},prod:{notifications:{host:"https://pr.comet.yahoo.com/comet"},mail_count:{host:"https://pr.comet.yahoo.com/comet"},system_status:{host:"https://comet.yahoo.com/comet"}},nonprod:{notifications:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},mail_count:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},system_status:{host:"http://perf501.snp.mobile.gq1.yahoo.com/comet"}}},d="connect",c="disconnect",g="message",a="error",e={};f.ucs.CometConn=function(i,h){this.app=i;this.env=h;this.comet=null;this.init(b[h][i]);this.publish(d);this.publish(c);this.publish(g);};f.ucs.CometConn.getConn=function(k,j,l){var h=null,i=null;f.config.debug=window.location.href.match(/debug_comet-conn=1/);j=j||"prod";if(window.location.href.match(/env=nonprod/)){j="nonprod";}if(f.Lang.isUndefined(j)){throw new Error("getConn(): env is required.");}if(f.Lang.isUndefined(k)){throw new Error("getConn(): app is required.");}if(!f.Object.hasKey(b,j)){throw new Error("getConn(): cannot find config for env="+j);}if(!f.Object.hasKey(b[j],k)){throw new Error("getConn(): cannot find config for app="+k);}i=f.Lang.sub("{app}:{env}",{app:k,env:j});if(!f.Object.hasKey(e,i)){e[i]=new f.ucs.CometConn(k,j);}else{}return e[i];};f.ucs.CometConn.prototype={counts:{},init:function(i){var h=this;h.comet=f.initComet(i.host);h.comet.addListener("/meta/handshake",f.bind(h.cbHandShake,h),true);h.comet.addListener("/meta/subscribe",f.bind(h.cbSubscribe,h),true);h.comet.addListener("/meta/unsubscribe",f.bind(h.cbUnsubscribe,h),true);h.comet.addListener("/meta/connect",f.bind(h.cbConnect,h),true);h.comet.addListener("/meta/disconnect",f.bind(h.cbDisconnect,h),true);h.comet.addListener("/meta/unsuccessful",f.bind(h.cbUnsuccessful,h),true);h.resetCounts();},extractMessage:function(h){return{clientId:h.clientId||"",channel:h.channel||"",timestamp:h.timestamp||"",error:h.error||""};},getComet:function(){return this.comet;},getCounts:function(){return this.counts;},resetCounts:function(){this.counts={unsuccessful:{"/meta/handshake":0,"/meta/subscribe":0,"/meta/unsubscribe":0,"/meta/connect":0,"/meta/disconnect":0}};return this;},isDisconnect:function(j){var i=this,h=true;if(j.successful===false){if(f.Object.hasKey(i.counts.unsuccessful,j.channel)){i.counts.unsuccessful[j.channel]++;if(i.counts.unsuccessful[j.channel]<b.counts_max.unsuccessful[j.channel]){h=false;}}}return h;},cbHandShake:function(k){var i=this,h=null,j=null;if(f.Object.hasKey(k,"originalURI")){j=k.originalURI;}else{if(f.Object.hasKey(k,"uri")){j=k.uri;}else{this.fire(a,"uri / originalURI is missing in the callback_handshake response.");return;}}if(j===b[this.env][this.app].host){if(k.successful){i.fire(d,k);}else{i.fire(a,"cb_handshake. successful=false");}}else{i.fire(a,"cb_handshake.uri is not found in config. uri="+j);}if(k&&k.successful){i.resetCounts();i.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet HandShake",dmsgs:i.extractMessage(k),type:"info",source:"ucs-comet-conn",code:"hand"});}else{i.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet HandShake",dmsgs:i.extractMessage(k),type:"error",source:"ucs-comet-conn",code:"hand"});}},cbSubscribe:function(i){var h=this;if(i&&i.successful){h.resetCounts();h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Subscribe",dmsgs:h.extractMessage(i),type:"info",source:"ucs-comet-conn",code:"sub"});}else{h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Subscribe",dmsgs:h.extractMessage(i),type:"error",source:"ucs-comet-conn",code:"sub"});}},cbUnsubscribe:function(i){var h=this;if(i&&i.successful){h.resetCounts();h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Unsubscribe",dmsgs:h.extractMessage(i),type:"info",source:"ucs-comet-conn",code:"unsub"});}else{h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Unsubscribe",dmsgs:h.extractMessage(i),type:"error",source:"ucs-comet-conn",code:"unsub"});}},cbConnect:function(i){var h=this;},cbDisconnect:function(i){var h=this;},cbUnsuccessful:function(i){var h=this;if(h.isDisconnect(i)){h.getComet().disconnect();}},cbSystemStatus:function(h){if(h){this.fire("message",h);}},cbNotification:function(h){if(h){this.fire(g,h);}},initSystemStatus:function(h){this.comet.subscribe(h,f.bind(this.cbSystemStatus,this));},initNotification:function(){this.comet.subscribe("/UNP/alerts/*",f.bind(this.cbNotification,this));},emitBeacon:function(h){if(f.Lang.isObject(f.ucs)&&f.Lang.isObject(f.ucs.Beacon)){switch(h.type){case"info":f.ucs.Beacon.info(h);break;case"error":f.ucs.Beacon.error(h);break;}}}};f.augment(f.ucs.CometConn,f.EventTarget,true,null,{emitFacade:true,broadcast:2});},"1.0",{requires:["event","event-custom","comet","ucs-beacon"]});if(window.ucs&&window.ucs.YObj){window.ucs.YObj.use("node","ucs-comet-conn",function(e){var c=null,b=null,d={};c=e.one("#yucs-meta").getAttribute("data-authstate");b=e.one("#yucs-meta").getAttribute("data-property");r=e.one("#yucs-notifications");if(!e.Lang.isObject(r)){if((c==="signedin")||(b==="mail")){if(e.Lang.isFunction(e.ucs.CometConn)){d.notifications=e.ucs.CometConn.getConn("notifications");d.notifications.on("connect",function a(f){d.notifications.initNotification();});}}}});}YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs"),a.ucs.DisclaimerSeed={init:function(){var b=!1,c=a.one(a.one("#yucs-disclaimer")?"#yucs-disclaimer":"#yucs-disclaimer-md"),d=c.getAttribute("data-property"),e=(c.getAttribute("data-lang"),c.getAttribute("data-dss")),f=!1,g=!1,h=(a.Cookie.getSub("ucs","disclaimer",Number),"desktop"),i="false",j=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),k=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),l=(a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt'));this.jsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/294/js/disclaimer-min.js",this.cssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/294/css/disclaimer-min.css";var m=navigator.userAgent.toLowerCase();a.one("#yucs-disclaimer")?h=a.one("#yucs-disclaimer").getAttribute("data-device"):a.one("#yucs-disclaimer-md")&&(h=a.one("#yucs-disclaimer-md").getAttribute("data-device")),i=h&&(h.match(/smartphone/gi)||h.match(/tablet/gi)),"frontpage"===d&&(h.match(/smartphone/gi)||h.match(/tablet/gi))&&(a.one("#OpenMenuBtn")&&a.one("#OpenMenuBtn").on("touchstart",this.setKillswitch,this),a.one("#OpenWidgetsBtn")&&a.one("#OpenWidgetsBtn").on("touchstart",this.setKillswitch,this)),e&&"0"===e&&m.indexOf("version")>=0&&m.indexOf("crios")<0&&(h.match(/desktop/gi)?this.loadCSS():i&&a.UA.ios&&a.UA.ios<8&&this.loadCSS()),l&&(l=l.replace('"',""),l=l.replace("'",""),l=parseInt(l)),k&&(k=k.replace('"',""),k=k.replace("'",""),k=parseInt(k)),j?(j=j.replace('"',""),j=j.replace("'",""),j=parseInt(j)):b=!0,b=!0,f=!0,l&&1===l&&f===!0&&g===!1&&(l=a.Cookie.get("AO",{raw:!0}),l=l.replace("o=1","o=0"),a.Cookie.set("AO",l,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:!0}))},setKillswitch:function(){a.one("#yucs-disclaimer").setAttribute("data-killswitch","1")},loadCSS:function(){var b={onSuccess:function(){this.loadJS()},onFailure:function(){this.loadCSS()},context:this};a.Get.css(this.cssPath,b)},checkTimer:function(){var b=a.Cookie.getSub("ucs","disclaimerts",Number),c=(new Date).getTime();return c>=b||null===b?!0:!1},loadJS:function(){var b={onFailure:function(){this.loadJS()},context:this};a.Get.script(this.jsPath,b)}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()})}}();YUI.add("ucs-simple-menu",function(a){a.namespace("ucs.MoreMenu");var b="yucs-menu-active",c="role",d=">li>a",e="parentNode";a.ucs.MoreMenu=function(b){a.ucs.MoreMenu.superclass.constructor.call(this,b),b.removeClass("yucs-more-activate"),this.ylt=b.getAttribute("data-ylt"),this.topBar=a.one("#yucs-top-bar"),this._init()},a.extend(a.ucs.MoreMenu,a.ucs.MenuUtils,{_init:function(){this._position(),this._initAriaTopbar(),this._initEvents()},_initEvents:function(){this.menu.detach("hover"),this.panel.detach("hover"),a.one("#yucs-more-link").on("click",this._handleMenuClick,this),a.Global.on("ucs:menuNavShow",this._hideMenu,this)},_handleMenuClick:function(b){b.halt(),this.panel.hasClass("yucs-hide")?(this._showMenu(b),this.menu.removeClass("yucs-has-focus"),this.menu.one("a").blur(),this.documentClickHandle=a.one("body").on("click",this._handleDocumentClick,this),this.documentMouseDownHandle=a.one("body").on("mousedown",this._handleDocumentClick,this)):this._hideMenu()},_position:function(){var b=this.menu.get("region").height;b-=2,a.one("#yucs-top-menu").setStyle("top",b+"px")},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt)},_showMenu:function(){this.panel.hasClass("yucs-hide")&&(this._sendBeacon(),this.menu.addClass(b),a.ucs.MoreMenu.superclass._showMenu.apply(this,arguments))},_hideMenu:function(){a.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments),this.menu.removeClass(b)},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._handleMenuClick(a),this.panel.one("a").focus()),this.keyedup=!0)},_initAriaTopbar:function(){this.topBar&&(this.toolbar=a.one("#yucs-top-list"),this.toolbar.set(c,"toolbar"),this.toolbar.all(">li").set(c,"presentation"),this.toolbar.delegate("mouseenter",function(a){a.currentTarget.removeClass("yucs-has-focus")},">li"),this.fm=this.toolbar.plug(a.Plugin.NodeFocusManager,{descendants:d,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(a){return a.get(e)}},circular:!0}),this.panel.focusManager.get("descendants").after("keydown",function(a){9===a.keyCode&&(this.panel.focusManager.focus(0),this._hideMenu())},this),this.toolbar.focusManager.get("descendants").after("keyup",function(a){9===a.keyCode&&this.toolbar.focusManager.focus(0),27===a.keyCode&&(this.menu.one("a").focus(),this._hideMenu())},this))}})},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]}),function(){window.ucs.YObj.use("node","ucs-simple-menu",function(a){var b,c=a.one("#yucs-more.yucs-more-activate");c&&(b=new a.ucs.MoreMenu(c))})}();window.ucs.YObj.use("node","node-core","event-base","event-mousewheel","event-resize","dom-screen",function(a){"use strict";function b(){a.DOM.winWidth()>970?d.removeClass(g):d.addClass(g)}var c=a.one("body"),d=a.one("html"),e=!1,f="page-has-scrolled",g="yucs-fixed";if(!a.one("#yucs.persist-init")){if(a.one("#yucs").addClass("persist-init"),a.one(".yucs-games")&&null!=a.one(".yom-games-gameplay, .yom-games-yap"))return void d.addClass(g);(!a.UA.ie||a.UA.ie>6)&&(b(),a.on("windowresize",b)),(window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop)>0&&(c.addClass(f),e=!0),a.on("scroll",function(){var a=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;0===a?(c.removeClass(f),e=!1):e||(c.addClass(f),e=!0)})}});if(typeof(YAHOO)=="undefined"){YAHOO={};}if(typeof(YAHOO.util)=="undefined"){YAHOO.util={};}if(typeof(YAHOO.util.UHScriptNodeDataSource)=="undefined"){YAHOO.util.UHScriptNodeDataSource={};}YUI.add("ucs-search",function(d){var p={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "};if(!ucs.Search){var h="value",m="click",u="suggest",c="touchstart",t="submit",s="innerHTML",a="tabindex",f="target",o=20,b=10,e=parseInt(d.one("#yucs").getStyle("paddingLeft"),b),j="yucs-qry",n="yucs-content-qry",v="#yucs-satray",i=d.one("#yucs-debug"),r="#yucs-btn-delete",q="https://s.yimg.com/kx/yucs/uh3/search/593/js/mini-assist-min.js",l="https://s.yimg.com/kx/yucs/uh3/search/js/442/tray-align-plugin-min.js",g="https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",k="https://s.yimg.com/kx/yucs/uh3/search/css/434/assist-min.css";ucs.Search=function(w){if(typeof w.getDOMNode==="function"){this.form=(w.getDOMNode().nodeName.toLowerCase()==="form")?w:w.one("form");}else{this.form=w.one("form");}this.searchWrapper=d.one("#yucs-search");this.searchFormClass=d.one(".yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.yucs=d.one("#yucs");this.loadedAssist=false;this.property=d.one("#yucs").getData("property");this.cleanBtn=d.one(r);this.languagetag=d.one("#yucs").getAttribute("data-lang");this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){var C=this.property;var A=navigator.userAgent.toLowerCase();if(d.one(".enable_form_focus")&&C!=="mail"){if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}else{document.getElementById("mnp-search_box").focus();}}}else{if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}}}this.searchWrapper.removeClass("yucs-search-activate");this._setTabIndex();this.is2Button=(this.buttons.size()===2)&&!this.searchWrapper.hasClass("yucs-one_button");if(this.searchFormClass.getAttribute("data-webaction")){this.form.one("input").setAttribute("name","p");this.searchFormClass.setAttribute("action",this.searchFormClass.getAttribute("data-webaction"));d.one("#yucs-sprop_button").setAttribute("data-vsearch",d.one("#mnp-search_box").getAttribute("data-yltvsearch"));}if(this._hasPlaceholderSupport()&&!d.UA.ie){var z=document.getElementById("mnp-search_box");z.removeAttribute("data-sh");}if((C==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()&&!this.loadedAssist){this.loadedAssist=true;this._initAssist();}if((d.one("#yucs")&&d.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=d.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();var y=this.input.getAttribute("data-resize");if(!y||y==="enable"){this._initSizeControl();}this._initEventListeners();if(this.vertSearchBtn){this.vertSearchBtn.setAttribute("onclick","");}this.form.removeClass("yucs-activate");var x=document.URL,B=/[?&]p=([^&]+)/i,w=B.exec(x);if(w===null&&C==="help"){B=/[?&]question_box=([^&]+)/i;w=B.exec(x);}if(w!==null&&(C==="answers"||C==="help"||C==="shopping")){d.one(".yucs-search-input").setAttribute("value",decodeURIComponent(w[1].replace(/\+/g," ")));}if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}if(d.one("#search_hot_keyword_block")&&C!=="mail"){this._initHotKeyword();}else{if(d.one("#search_hot_keyword_block")&&C!=="mail"){d.one("#advanced-search").set("offsetWidth",d.one(".yucs-search-input").get("offsetWidth"));}}},html:function(w){return(w+"").replace(/[&<>"'\/`]/g,this._htmlReplacer);},_htmlReplacer:function(w){return p[w];},_initSizeControl:function(){this.oldYucsWidth=this.yucs.get("region").width;this.isRTL=/ar|he/gi.test(d.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftWrapper=d.one(".yucs-fl-left");this.rightWrapper=d.one(".yucs-fl-right");this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),b);this.IEOffset=0;if(d.UA.ie>0&&d.UA.ie<=7){this._calcIEOffset();}this._resizeSearchContainer(this.oldYucsWidth);d.on("windowresize",d.bind(this._handleWindowResize,this));},_hasPlaceholderSupport:function(){var w=document.createElement("input");return("placeholder" in w);},_initEventListeners:function(){var w=this.form.on(t,this._handleSubmit,this);this.input.on("keydown",this._handleInputKeypress,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);this.input.on("click",this._handleInputClick,this);if(this.stype){this._initSearchTypeMenu();}if(this.property==="mail"||this.is2Button){this.webSearchBtn.on(m,this._handleWebSearchClick,this);if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}if(d.UA.ie){w.detach();this.webSearchBtn.on(m,this._handleWebSearchClick,this);this.form.on(t,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});d.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);d.Global.on("ucs:mailSearch",this._trackMailSearch,this);
d.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}if(this.cleanBtn){this.cleanBtn.on("click",this._resetSearchInput,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(C){var y=this.stype.one(".yucs-active"),x=this.stype.one(".yucs-inactive"),A,w,z,B;C.preventDefault();if(parseFloat(YUI.version,10)>3.1){x.toggleView();}else{if(x.getStyle("display")=="none"){x.setStyle("display","block");}else{x.setStyle("display","none");}}if(C.target.hasClass("yucs-active")||C.target.hasClass("yucs-inactive")){z=y.getData("yucs-stype");B=C.target.getData("yucs-stype");if(z!=B){A=y.get("text");w=C.target.get("text");y.set("text",w);y.setData("yucs-stype",B);x.set("text",A);x.setData("yucs-stype",z);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(w){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(w){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var w=d.all(".yucs-fl-left > div"),y=e,z,x;w.each(function(A){if(A.get("id")!=="yucs-search"){y+=A.get("offsetWidth")+parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}else{y+=parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}});return y;},_calcIEOffset:function(){var x=d.all(".yucs-search-buttons").pop(),w=x.intersect(this.searchWrapper);if(d.one("body").getAttribute("dir")==="rtl"){this.IEOffset=w.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),b)-w.right;}this.defaultWidth+=this.IEOffset;},_handleWindowResize:function(){var w=this.yucs.get("region").width;if(w!==this.oldYucsWidth){this._resizeSearchContainer(w);this.oldYucsWidth=w;}},_setInputWidth:function(){var w=d.one(".yucs-form-input"),x=parseInt(this.input.getStyle("paddingLeft"))+parseInt(this.input.getStyle("paddingRight"))+parseInt(this.input.getStyle("borderLeftWidth"))+parseInt(this.input.getStyle("borderRightWidth"));this.input.setStyle("width",(w.get("region").width-x)+"px");},_resizeSearchContainer:function(z){var y=this.searchWrapper.get("region").width,x=this.rightWrapper.get("region").width+e,w=z-(this.leftWrapperWidth+x+o)+this.IEOffset;if(w>this.defaultWidth){if(y===this.defaultWidth){return;}else{w=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",w+"px");if(this.IEOffset>0&&this.isRTL){d.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var w=this.input.get(h);w=d.Lang.trim(w);return w;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(w){if(this._inputIsEmpty()){this._resetSearchInput();this._setCaretStart();}else{if(!this._inputIsDefaultTerm()){this._setTabIndex();}}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}this._showCleanBtn();},_handleInputClick:function(){if(this._inputIsDefaultTerm()){this._resetSearchInput();this._setCaretStart();}},_setCaretStart:function(){var y;if((y=window.document.selection)){if(y.type!="Control"){var w=this.input.get("value").length,x=y.createRange();x.move("character",-w);x.select();}}},_setTabIndex:function(){var w=(d.UA.ie>0&&d.UA.ie<=7);this.buttons.each(function(x){var y=x.getAttribute(a);if((w&&y===0)||(w&&y===65535)||(y&&!(w&&y===32768))){x.setAttribute(a,0);}else{x.setAttribute(a,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(f,"searchWin");}else{this.form.setAttribute(f,this.linkTarget);}},_initAssist:function(){var w=this.input.getAttribute("data-satype");switch(w){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(w){var x={searchbox:w,clid:"uh-yui3",align:true,shim:1,nresults:w.getAttribute("data-maxresults")||10};x.node=v;if(w.getAttribute("data-pubid")){x.pubid=w.getAttribute("data-pubid");}if(w.getAttribute("data-gosurl")){x.url=w.getAttribute("data-gosurl");}if(d.one("#yucs-sfilter")&&d.one("#yucsHead").hasClass("ua-ie")){x.tray={plugin:{align:"#yucs-input_wrap"}};}var y=parseInt(w.getAttribute("data-minlength"),10);if(!isNaN(y)){x.minLength=1;}return x;},_getUHB:function(){var w=d.one("#uhb");return w&&w.get("value")||"uhb2";},_initMiniAssist:function(y){var w=this,x={"miniassist":{fullpath:q,requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:k,type:"css"},"tray-align-plugin":{fullpath:l,requires:["miniassist"]},"tray-shim-plugin":{fullpath:g,requires:["miniassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move","escape",function(A){if(ucs.YObj.config.fetchCSS===false){A.Get.css(k);}var I=new A.Node(y),G=w._buildAssistConfig(I),E=A.one(v),C=E.getAttribute("data-vfr");w.sa=new A.Search.MiniAssist(G);if(!isNaN(G.minLength)){w.sa.assist.set("minLength",1);}w.sa.assist._checkValue();w.sa.gossip.set("scrollSize",13);w.sa.gossip.set("linkStem",E.getAttribute("data-vsearch"));if(A.one("#search_hot_keyword_block")){var K="",H="",z=A.one("#yucs").getData("property"),B=A.one("#yucs").getAttribute("data-lang");if("sports"===z&&B==="zh-hant-tw"){K="tw.sports.yahoo.com";}else{if("ivy"===z&&B==="zh-hant-tw"){H="hq";}else{if("omg"===z&&B==="zh-hant-hk"){K="hk.ent.yahoo.com";}else{if("finance"===z&&B==="zh-hant-hk"){K="hk.finance.yahoo.com";}else{if("lifestyles"===z&&B==="zh-hant-hk"){K="hk.lifestyle.yahoo.com";}}}}}if(K!==""){w.sa.gossip.set("linkParams",{fr:C,"vs":K});}else{if(H!==""){w.sa.gossip.set("linkParams",{fr:C,"ilk":H});
}else{w.sa.gossip.set("linkParams",{fr:C});}}}else{w.sa.gossip.set("linkParams",{fr:C});}if(!w.is2Button){w.sa.gossip.set("hideEmptyTray",false);}if(w.property==="finance"&&w.languagetag!=="zh-hant-hk"){var J=A.one(G.node),D=J.getAttribute("data-vstext"),F=J.getAttribute("data-vert_fin_search"),L=w._getUHB();w.sa.gossip.set("uhbParams",{uhb:L,fr:C});w.sa.assist.on(u,function(N){if(N.query){var M=A.one("#"+n),O=w.sa.buildSearchUrl(I,N.query,F,{fr:C});if(w.property==="finance"){O=O.replace("?s=","?p=");}if(!M){if(document.getElementById("hspart")){O+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){O+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){O+="&type="+document.getElementById("yucs-hstype").value;}M=A.Node.create("<ul id='"+n+"'><li><a id='searchVertical' href='"+O+"'>"+D+"<q>"+A.Escape.html(N.query)+"</q></a></li></ul>");A.one(".sa-panel").append(M);}else{M.one("li").setContent("<a  id='searchVertical' href='"+O+"' text='"+A.Escape.html(N.query)+"'>"+D+" <q>"+A.Escape.html(N.query)+"</q></a>");}}});}A.one(".yucs-search").on("submit",function(N){if(A.one("#"+j+" a.sa-active")){var M=A.one("#"+j+" a.sa-active").getAttribute("href");N.preventDefault();if(w.linkTarget==="_blank"||w.form.hasClass("yucs-search-fh")){window.open(M,"searchWin");}else{window.location.href=M;}}});});},_initRichAssist:function(y){var w=this,x={richassist:{fullpath:"https://s.yimg.com/lq/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(B){var z=new B.Node(y),A=w._buildAssistConfig(z);w.sa=new B.Search.RichAssist(A);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(w){w.preventDefault();this._toggleSearch();},_toggleSearch:function(){var w=this,x=function(y){w._handleBodyClick(y);};d.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(d.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){d.log("using touchstart in mobile browser","info","search");document.body.addEventListener(c,x,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(c,x,false);}}};}else{this.bodyClick=d.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=d.on("scroll",function(y){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(y){var x=y&&y.target||null,w;if(!x){return;}w=typeof x.ancestor==="function"?x:d.one(x);if(w&&!w.ancestor("#yucs")){this._toggleSearch();}},_handleWebSearchClick:function(w){this.isWebSearch=true;if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this.sa&&this.is2Button){this.sa.set("iswebsearch",true);}},_handleSubmit:function(x){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(x&&x.target){this.isWebSearch=d.one(x.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(f)!=="searchWin"){x.preventDefault();}var w=d.Node.create("<img />");w.once("load",this._handleImageLoad,this);w.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(d.bind(this._handleImageLoad,this),2000);w.set("src","https://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(w){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(f)!=="searchWin"){this.form.submit();}},_handleInputKeypress:function(z){var y=this._inputIsDefaultTerm(),x,w;if((z.keyCode===46||z.keyCode===8)&&y){z.preventDefault();return;}else{if(z.keyCode!==9&&z.keyCode!==13){if(y){this._setInputBlank();this.input.removeClass("yucs-search-hint-color");}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}}else{if(z.keyCode===13&&!y){this.enterButtonPressed=true;x=z.target.getAttribute("data-enter-fr");w=z.target.getAttribute("data-enter-ylt");if(w){this.form.setAttribute("action",w);}if(x){if(this.is2Button){this.vertSearchBtn.setAttribute("data-vfr",x);}else{this._setFrCode(x);}}}}}},_handleInputBlur:function(w){if(this._inputIsEmpty()){this._resetSearchInput();}},_handleVertSearch:function(C){d.log("handleVertSearch");if(this.isWebSearch||d.one("#"+j+" a.sa-active")){this.isWebSearch=false;return;}C.preventDefault();if(this._inputIsEmpty()){return;}var y=C.target.getAttribute("data-vsearch"),E="1button",A,w=this.property,x=this.languagetag,z=C.target.getAttribute("data-vfr"),F=this.input.getAttribute("data-enter-ylt");if(this.is2Button){E="2button";}if(!y){y=this.vertSearchBtn.getAttribute("data-vsearch");}if(this.enterButtonPressed&&F){y=F;}if(y&&w!=="mail"){A=y.split("?");if(A.length==1){A="";}else{y=A[0];A=A[1];}if(w==="finance"&&x!="zh-hant-hk"){y+="?uhb="+this._getUHB()+"&fr="+z+"&type="+E+"&s="+encodeURIComponent(this.input.get(h));if(d.one("#searchAll")&&d.one("#searchAll").hasClass("sa-active")){y=d.one("#searchAll").getAttribute("href");}if(d.one("#searchVertical")&&d.one("#searchVertical").hasClass("sa-active")){y=d.one("#searchVertical").getAttribute("href");}}else{if(w==="groups"){y+="?query="+encodeURIComponent(this.input.get(h));}else{if(w==="help"){this.helpForm=d.one("#landingSearch");if(!this.helpForm){this.helpForm=d.one("#question_form");}var B=this;if(this.helpForm){this.vsu="";var D=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(G){B.vsu+=G.getAttribute("name")+"="+G.getAttribute("value")+"&";
},B);y=this.helpForm.getAttribute("action");y+="?"+this.vsu+D+"="+encodeURIComponent(this.input.get(h));if(D!="question_box"){y+="&p="+encodeURIComponent(this.input.get(h));}}else{y+="?fr="+z+"&type="+E+"&query="+encodeURIComponent(this.input.get(h));}}else{if(x=="zh-hant-tw"&&(w=="omg"||w=="news"||w=="ivy")){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";if(w=="ivy"){y+="&ilk=hq";}}else{if(w=="sports"&&x=="zh-hant-tw"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8&vs=tw.sports.yahoo.com";}else{if(w=="omg"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.ent.yahoo.com&ei=UTF-8";}else{if(w=="finance"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.finance.yahoo.com&ei=UTF-8";}else{if(w=="news"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";}else{if(w=="lifestyles"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.lifestyle.yahoo.com&ei=UTF-8";}else{if(w=="money"&&x=="zh-hant-tw"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=tw.money.yahoo.com&ei=UTF-8";}else{if(z){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h));}else{y+="?type="+E+"&p="+encodeURIComponent(this.input.get(h));}}}}}}}}}}}if(A){y+="&"+A;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(y,"searchWin");}else{if(window!=window.top){window.top.location.href=y;}else{window.location.href=y;}}}else{this._fireVertSearchEvent(C);}},_fireVertSearchEvent:function(x){var w=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":w});},_handleWebSearchEvent:function(w){if(w.query){this.input.set("value",w.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){if(this.searchHint){this.input.addClass("yucs-search-hint-color");}this._hideCleanBtn();this.input.set(h,this.searchHint);},_setSearchInput:function(w){this.input.set(h,w);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(s);},_initHotKeyword:function(){var x=this.yucs.getAttribute("data-lang").split("-").pop(),y=d.one("#search_hot_keyword_block");var z={"title":" : ","count":8,"max_charaters":30,"data":"","url":"http://global.tts.search.yahoo.com/pulse.php","fr":this.vertSearchBtn.getAttribute("data-vfr"),"format":"json","intl":x,"type":"metro","src":"metro","order":"rank","retry":1,"project_id":0,"tracking_id":0,"host":"a.analytics.yahoo.com","colo":"","fr_code":"","spaceid":y.getData("spaceid"),"bucketid":y.getData("bucketid")};if("zh-hant-tw"===this.languagetag&&("news"===this.property||"omg"===this.property||"sports"===this.property||"ivy"===this.property||"mail"===this.property||"money"===this.property)){z.project_id=1167069579;z.tracking_id=10001167069579;z.host="y3.analytics.yahoo.com";z.colo="VSCALE4";if(z.fr==="tw_uh3_news_vert_1"){z.fr_code="tw_uh3_news_tts_1";}else{if(z.fr==="tw_uh3_news_vert_2"){z.fr_code="tw_uh3_news_tts_2";}else{if(z.fr==="tw_uh3_omg_vert_1"){z.fr_code="tw_uh3_omg_tts_1";}else{if(z.fr==="tw_uh3_sports_vert_1"){z.fr_code="tw_uh3_sports_tts_1";}else{if(z.fr==="tw_uh3_screen_vert_1"){z.fr_code="tw_uh3_screen_tts_1";}else{if(z.fr==="tw_uh3_mail_vert_1"){z.fr_code="tw_uh3_mail_tts_1";}else{if(z.fr==="uh3_money_vert"){z.url="https://tw.search.yahoo.com/tts";z.type="webttstw";z.fr_code="uh3_money_tts";}}}}}}}if("omg"===this.property||"ivy"===this.property){z.type="uh3omg";}}else{if("zh-hant-hk"==this.languagetag&&("omg"==this.property||"lifestyles"==this.property||"finance"==this.property||"news"==this.property||"mail"==this.property)){z.project_id=21324579;z.tracking_id=100021324579;z.host="y3.analytics.yahoo.com";z.colo="ONO";if(z.fr==="hkomg"){z.fr_code="hk_uh3_ent_tts_1";}else{if(z.fr==="hk_uh3_news_vert_1"){z.fr_code="hk_uh3_news_tts_1";}else{if(z.fr==="hk_uh3_finance_vert_1"){z.fr_code="hk_uh3_finance_tts_1";}else{if(z.fr==="hk_uh3_lifestyle_vert_1"){z.fr_code="hk_uh3_lifestyle_tts_1";}else{if(z.fr==="hk_uh3_mail_vert_1"){z.fr_code="hk_uh3_mail_tts_1";}}}}}if("news"==this.property||"finance"===this.property||"mail"===this.property){z.type="shine";}else{if("omg"===this.property||"lifestyles"===this.property){z.type="entertainment";}}}}var w=z.url+"?fr="+z.fr_code+"&format="+z.format+"&count="+z.count+"&intl="+z.intl+"&type="+z.type+"&src="+z.src+"&order="+z.order+"&jsonp_cb=YAHOO.util.UHScriptNodeDataSource.callbacks";this._getHotKeyword(w,z);},_getHotKeyword:function(x,w){d.Get.script(x,{onSuccess:YAHOO.util.UHScriptNodeDataSource.callbacks});YAHOO.util.UHScriptNodeDataSource.callbacks=function(z){if(z!==undefined&&z[0]!==undefined){var E=0,C=1;var y='<marquee scrollamount="2" scrolldelay="120" direction="up" height="18" behavior="slide" loop="1">'+'<ul id="search_hot_keyword_items" class="search_hot_keywork_items">'+'<li id="search_hot_keyword_title">'+w.title+"</li>";for(var G in z){if(undefined!==z[G].display_term){E+=z[G].display_term.length;if(E>w.max_charaters){break;}if(G<w.count){y+='<li class="search_hot_keyword_item">';if(d.UA.ie&&d.UA.ie<9){y+='<a href="'+z[G].link+'" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'">';}else{y+='<a href="#" onClick="setTimeout(function(){window.location.href=\''+z[G].link+'\';}, 2000)" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'" class="rapidnofollow">';}y+=z[G].display_term;y+="</a></li>";C++;}}}y+="</ul></marquee>";this.hotKeywordBlock=d.one("#search_hot_keyword_block");this.hotKeywordBlock.set("innerHTML",y);var I={ultkey1:"search hot keyword",A_pn:"search hot keyword pn",tim:"red"};var F={project_id:w.tracking_id,host:w.host,cf:{22:w.fr_code}};var D={compr_type:"deflate",debug:false,tracked_mods:{"search_hot_keyword_items":"search_hot_keyword_items"},keys:I,spaceid:w.spaceid,ywa:F,nofollow_class:["rapidnofollow","search_hot_keyword_items"]};
if(typeof(YAHOO.i13n)=="undefined"){YAHOO.i13n={};}if(typeof(YAHOO.i13n.Rapid)=="undefined"){var A="https://s.yimg.com/ss/rapid-3.12.1.js",H="https://s.yimg.com/ss/rapidworker-1.1.js";d.Get.js([A,H],function(K){if(K){console.log("get rapid js error");}else{var J=new YAHOO.i13n.Rapid(D);}});}else{var B=new YAHOO.i13n.Rapid(D);}}};},_hideCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","none");}},_showCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","inline-block");}},_setFrCode:function(w){if(w){d.one("#fr").set("value",w);}},_getFrCode:function(){return d.one("#fr").get("value");},_setVertSearchBtnContent:function(w){this.vertSearchBtn.set(s,(w["text"])?w["text"]:w);},_setVertSearchBtnPathName:function(w){this.vertSearchBtn.setAttribute("data-vsearch",w);},_trackMailSearch:function(){d.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){d.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){d.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:window.ucs._sendBeacon};d.augment(ucs.Search,d.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});ucs.YObj.use("node","ucs-search",function(b){var a=b.all("#yucs-search.yucs-search-activate");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.getFrCode=function(){return ucs.UhSearchInterface._getFrCode();};ucs.UhSearchInterface.setFrCode=function(g){ucs.UhSearchInterface._setFrCode(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface.setVertSearchBtnPathName=function(g){ucs.UhSearchInterface._setVertSearchBtnPathName(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});YUI.add("ucs-profile-menu",function(d){var e="ucs:profileMenuShow",b="ucs:menuNavShow",a=d.Lang.trimRight,c;d.namespace("ucs.ProfileMenu");d.ucs.ProfileMenu=function(f){this.profile=f;this.name=this.profile.one(".yuhead-name");this.greeting=this.profile.one(".yuhead-name-greeting")||"";this.optimizedNameCache={};this.menuId=this.profile.getAttribute("id");this.init();};d.ucs.ProfileMenu.prototype={init:function(){this.publishEvents();this.initEventHandlers();this.optimizeNameLength();},optimizeNameLength:function(){var g=9,h="65px",f=this.name?this.name.get("text").length:0,i=this.greeting?this.greeting.get("text").length:0;if(this.name&&d.one(".ua-ie6, .ua-ie5")&&(f>g)){this.name.setStyle("width",h);this.name.get("parentNode").setStyle("width",h);}},publishEvents:function(){d.augment(d.ucs.ProfileMenu,d.EventTarget,null,null,{});this.publish(e,{broadcast:2,emitFacade:true});},initEventHandlers:function(){var f=this;d.Global.on(b,this.handleMenuNavShow,this);},handleMenuNavShow:function(f){if(f&&f.menuid===this.menuId){if(d.UA.ie===8){this.profile.one("#yucs-profile-cont").setStyle("maxHeight","100%");}this.fire(e);}}};},"1.0",{requires:["node","event","event-custom","event-resize"]});(function(){ucs.YObj.use("ucs-profile-menu",function(c){var b=c.one("#yucs-profile"),a;if(b){a=new c.ucs.ProfileMenu(b);}});}());YUI.add("ucs-usermenu-notif",function(d){d.namespace("ucs.UserMenuNotif");var p="ucs:userMenuShow",l="ucs:userMenuItemClick",a="ucs:userMenuNotifShow",o="ucs:userMenuNotifHide",u="yucs-hide",i="yui3-menu-hidden";var n='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",t='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",m='<span class="yucs-separator" role="presentation"></span>',h="click",r="a",j="role",b="tabIndex",g="yucs-hide",c="iframe",k="ul",e="li",q="parentNode",s="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";d.ucs.UserMenuNotif=function(v){v.removeClass("yucs-um-activate");this.menuContainer=v.ancestor("div");this.previewPanel=d.one("#yucs-profile_inner");this.PANEL_OFFSET=30;this.PANEL_OFFSET_Y=3;this.headerNode=d.one("#yucs");this.profileNode=this.headerNode.one(".yucs-profile");this.showMenuYlt=this.previewPanel.getAttribute("data-yltmenushown");d.ucs.UserMenuNotif.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-profile_inner",enableClick:true,openDelay:0}]);this._initCustomEvents();};d.extend(d.ucs.UserMenuNotif,d.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(p,{broadcast:2,emitFacade:true});this.publish(a,{broadcast:2,emitFacade:true});this.publish(o,{broadcast:2,emitFacade:true});this.publish(l,{broadcast:2,emitFacade:true});d.Global.on("ucs:userMenuAriaHelper",this._ariaHelper,this);d.Global.on("ucs:userMenuReshow",this._showMenu,this);d.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{"location":"bottom","menuType":"minty-um-item"});this.menu.delegate(h,this._handleMenuItemClick,"li.minty-um-item a",this);},_sendBeacon:function(w){var v=new Image();v.height=0;v.width=0;v.src="https://geo.yahoo.com/t"+w;},_hideMenu:function(){if(this.previewPanel&&!this.previewPanel.hasClass("yucs-hide")){this.fire(o);}d.ucs.UserMenuNotif.superclass._hideMenu.apply(this,arguments);},_showMenu:function(v){d.ucs.UserMenuNotif.superclass._showMenu.apply(this,arguments);this.fire(p);this.fire(a);if(this.previewPanel){this.previewPanel.set("scrollTop",0);}this._sendBeacon(this.showMenuYlt);this._setPosition();},_ariaHelper:function(v){d.ucs.UserMenuNotif.superclass._refreshAria.apply(this,arguments);},_showMenuItems:function(){this.menu.all("li").removeClass(u);this.menu.all("span.separator").setStyle("display","block");},_setPosition:function(){this.avatarIcon=this.profileNode.one(".yucs-avatar");var z=this.previewPanel.one(".yucs-dock"),x=z&&z.get("offsetWidth"),y,v=this.headerNode.get("offsetHeight"),C=Math.round(this.avatarIcon.getX()),w=this.headerNode.get("offsetWidth"),B=this.previewPanel.get("offsetWidth"),A=this.headerNode.one(".yucs-mail_link");if(this.rtl){this.previewPanel.setX(Math.round(this.headerNode.getX()+this.PANEL_OFFSET));}else{if(!A&&(C+B>w)){this.previewPanel.setX(Math.round(this.headerNode.getX()+w-B-20));}else{this.previewPanel.setX(C-(A?75:85));}}if(d.one("#search_hot_keyword_block")){this.panel.setY((this.headerNode.getY()+v)-this.PANEL_OFFSET_Y-30);}else{if(v>0){this.panel.setY((this.headerNode.getY()+v)-this.PANEL_OFFSET_Y);}else{this.panel.setY(this.avatarIcon.getY()+this.avatarIcon.get("offsetHeight")+3);}}if(z){y=(this.avatarIcon.get("offsetWidth")/2)-(x/2);z.setX(this.avatarIcon.getX()+y);}},_handleKeyup:function(v){if(27===v.keyCode||9===v.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===v.keyCode&&!this.keyedup){if(this.panel.one("a")){this._showMenu(v);this.panel.one("a").focus();}this.keyedup=true;}}},_handleUserMenuItems:function(A,z){d.log("user menu items received");var w="bottom",y="minty-user-item";if(!A.menuGroups||!A.menuGroups.length){return;}if(z&&z.location){w=z.location;}if(z&&z.menuType){y=z.menuType;}var x=A.menuGroups,v=this.menu.one(k);if(A.reset&&v){v.all("."+y).each(function(B){B.remove(true);});}if(x.length>0){this._addMenuGroups(x,w,false,y);}},_handleMenuItemClick:function(A){d.log("user menu item click");var z,x,v,w;z=A.target;z=z.ancestor("a",true);x=z.getAttribute("data-mad");v=z.getAttribute("data-customevt");w=z.ancestor("li").hasClass("disabled");if(w){A.halt();return;}if(v){A.preventDefault();}if(!w){var y={actionData:x};this.fire(l,y);}},_addMenuGroups:function(y,E,C,D){var A=this.menu.one(k),w,v="";w=(A.get("children")._nodes.length)?true:false;for(var x=0,z=y.length;x<z;x++){var B=y[x].length;if(E==="bottom"){y[x][0].separatorTop=true;}else{if(x<(z-1)||w){y[x][B-1].separatorBottom=true;}}v+=this._addMenuGroup(y[x],C,D);}if(E==="bottom"){A.append(v);}else{A.prepend(v);}if(v!=""){A.setStyle("width",(A.get("offsetWidth")+10)+"px");}},_addMenuGroup:function(w,z,y){var A="";for(var x=0,v=w.length;x<v;x++){if(w[x].actionData==="themes"){continue;}if(z){w[x].isDebugItem=true;w[x].menuClass=y+" debug-item";}else{w[x].isDebugItem=false;w[x].menuClass=y+" minty-item";}A+=this._addMenuItem(w[x],y);}return A;},_addMenuItem:function(x,w){var v="";if(x.isActive){x.checkedAria='aria-checked="true"';}else{x.checkedAria="";}if(x.isDisabled){x.disabledAria='aria-disabled="true"';}else{x.disabledAria="";}if(x.actionData&&x.actionData.match(/^om:/)){return v;}switch(x.actionType){case"link":v=d.substitute(n,x,this._processTemplateValue);break;case"customEvent":v=d.substitute(t,x,this._processTemplateValue);break;default:break;}if(v){if(x.isDebugItem){v=v.replace(/separator/,"separator debug-item "+w);}else{v=v.replace(/separator/,"separator minty-item "+w);}}return v;},_processTemplateValue:function(w,x,y){d.log("key = "+w+" value = "+x+" meta_data = "+y);var z="";var v=(document.location.protocol==="https:")?f:s;switch(w){case"icon":if(x!==undefined){if(x==="available"){z='<img src="'+v+'" class="yucs-opi available"/>';}else{if(x==="offline"){z='<img src="'+v+'" class="yucs-opi offline"/>';
}else{if(x==="invisible"){z='<img src="'+v+'" class="yucs-opi invisible"/>';}else{if(x==="busy"){z='<img src="'+v+'" class="yucs-opi busy"/>';}else{if(x==="idle"){z='<img src="'+v+'" class="yucs-opi idle"/>';}else{z='<img src="'+x+'" />';}}}}}}break;case"separatorTop":if(x){z=m;}break;case"separatorBottom":if(x){z=m;}break;case"actionData":if(x){z='data-mad="'+x+'"';}break;case"isDisabled":if(x){z="disabled";}break;case"isActive":if(x){z="sp active";}break;case"checkedAria":z=x;break;default:z=x;break;}return z;}});d.augment(d.ucs.UserMenuNotif,d.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]});(function(){ucs.YObj.use("node","ucs-usermenu-notif",function(c){var a=c.one("#yucs-menu_link_profile.yucs-um-activate"),b;if(a){b=new c.ucs.UserMenuNotif(a);}});})();YUI.add("jsonp-super-cached",function(b){b.namespace("jsonpsupercached");if(!YUI.Env.JsonpSuperCached){YUI.Env.JsonpSuperCached={};}if(!YUI.Env.JsonpSuperCached.services){YUI.Env.JsonpSuperCached.services={};}var a=YUI.Env.JsonpSuperCached.services;b.jsonpsupercached.getData=function(f){var c={};var d=f.url||"";var j=f.serviceName||"service";var m=f.callbackName||"callback";var i=f.broadcast||false;var j="_"+j+"_"+m;var g=f.onSuccess||function(){};c.timeout=f.timeout;c.onTimeout=f.onTimeout||null;c.onFailure=f.onFailure||null;var l=(d.indexOf("?")===-1)?"?":"&";var h=d+l+m+"=YUI.Env.JsonpSuperCached."+j;var k=f.args||[];var e=f.context||null;b.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||b.Get;if(!a[h]){a[h]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var n=a[h];if(n.dataAvailable){g(n.data);}else{n.callbacksQueue.push(g);if(!n.requestInProgress){YUI.Env.JsonpSuperCached[j]=function(r){n.data=r;n.dataAvailable=true;var s=n.callbacksQueue;for(var q=0,o=s.length;q<o;q++){var p=s.pop();p.apply(e,[r].concat(k));}};n.requestInProgress=true;b.jsonpsupercached.get.script(h,c);}}};},"0.0.1");YUI.add("ucs-avatar",function(a){var b="https://s.yimg.com/dh/ap/social/profile/profile_b32.png";a.namespace("ucs"),a.ucs.Avatar=function(a){this.container=a,this.crumb=this.container.getAttribute("data-crumb"),this.guid=this.container.getAttribute("data-guid"),this.profile=this.container.getAttribute("data-prof"),this.username=this.container.getAttribute("data-user"),this.init()},a.ucs.Avatar.prototype={init:function(){this.container.removeClass("yucs-av-activate"),this.img=a.Node.create('<img width="28" height="28" alt="'+this.username+" "+this.profile+'">'),this._fetchData()},_fetchData:function(){var b='select imageUrl from social.profile.image where guid = "'+this.guid+'" and size="32x32" and imgssl=1;',c="https://ucs.query.yahoo.com/v1/console/yql?"+a.QueryString.stringify({q:b,format:"json",crumb:this.crumb,_maxage:900});a.jsonpsupercached.getData({url:c,serviceName:"avatar",onSuccess:a.bind(this._buildMarkup,this)})},_buildMarkup:function(a){var c;a.query&&a.query.results&&"0"!==a.query.results&&a.query.results.image&&!a.query.results.image.imageUrl.match(/profile_/)?(c=a.query.results.image.imageUrl,"https:"===window.location.protocol&&(c=c.replace(/^http:\/\/l\.yimg/,"https://s.yimg"),c=c.replace(/^http:\/\/socialprofiles\.zenfs/,"https://socialprofiles.zenfs"))):c=b,this.img.on("load",function(){this.img.addClass("yucs-avatar"),this.container.setContent(this.img)},this),this.img.setAttribute("src",c)}}},"1.0",{requires:["node","event","jsonp-super-cached","querystring-stringify"]}),function(){ucs.YObj.use("node","ucs-avatar",function(a){var b,c=a.one("#yucs").one("span.yucs-avatar.yucs-av-activate");c&&(b=new a.ucs.Avatar(c))})}();"undefined"==typeof window.ucs&&(window.ucs={}),window.ucs.ULT||(window.ucs.ULT={}),window.ucs.ULT.BEACON||(window.ucs.ULT.BEACON="https://geo.yahoo.com/t"),window.ucs.ULT.IMG||(window.ucs.ULT.IMG=new Image),window.ucs.ULT.SRC_SPACEID_KEY="_S",window.ucs.ULT.DEST_SPACEID_KEY="_s",window.ucs.ULT.YLC_LIBSRC=2,window.ucs.ULT.CTRL_C="",window.ucs.ULT.CTRL_D="",window.ucs.ULT.BASE64_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",function(){window.ucs.ULT.track_click=function(a,b,c){return a&&b?(a=window.ucs.ULT.y64_token("ylc",a,b),c&&(a=window.ucs.ULT.y64_token("ylg",a,c)),a):a},window.ucs.ULT.beacon_click=function(a,b,c){if(c||(c=window.ucs.ULT.IMG),a){var d=window.ucs.ULT.track_click(window.ucs.ULT.BEACON,a,b);d+="?t="+Math.random(),c.src=d}return!0},window.ucs.ULT.click_beacon=function(a,b,c){var d=a.target||a.srcElement,e=d.getAttribute("href",2),f="",g=window.ucs.ULT.IMG;b&&(f=window.ucs.ULT.track_click(window.ucs.ULT.BEACON,b,c),f+="?t="+Math.random(),g.onerror=g.onload=function(){location=e},a.preventDefault?a.preventDefault():a.returnValue=!1,g.src=f)},window.ucs.ULT.y64_token=function(a,b,c){if(!a||!b||!c)return b;c._r=window.ucs.ULT.YLC_LIBSRC;var d,e=[],f=0;for(d in c){var g=c[d];if("string"!=typeof g&&(g=String(g),c[d]=g),d.length<1)return b;if(d.length>8)return b;if(-1!==d.indexOf(" "))return b;if(window.ucs.ULT.has_ctrl_char(d)||window.ucs.ULT.has_ctrl_char(g))return b;e[f++]=d}e=e.sort();var h=[];for(f=0;f<e.length;f++)h[f]=e[f]+window.ucs.ULT.CTRL_C+c[e[f]];return h=h.join(window.ucs.ULT.CTRL_D),h.length<1||h.length>1024?b:(h=";_"+a+"="+window.ucs.ULT.encode64(h),f=b.indexOf("/*"),-1===f&&(f=b.indexOf("/?")),-1===f&&(f=b.indexOf("?")),-1===f?b+h:b.substr(0,f)+h+b.substr(f))},window.ucs.ULT.has_ctrl_char=function(a){for(var b=0;b<a.length;b++)if(a.charCodeAt(b)<32)return!0;return!1},window.ucs.ULT.encode64=function(a){var b,c,d,e,f,g="",h="",i="",j=0;do b=a.charCodeAt(j++),c=a.charCodeAt(j++),h=a.charCodeAt(j++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+window.ucs.ULT.BASE64_STR.charAt(d)+window.ucs.ULT.BASE64_STR.charAt(e)+window.ucs.ULT.BASE64_STR.charAt(f)+window.ucs.ULT.BASE64_STR.charAt(i),b=c=h="",d=e=f=i="";while(j<a.length);return g}}();YUI.add("ucs-notifications-store",function(a){a.namespace("ucs.Notifications");var b={};a.ucs.Notifications.Notification=function(a){this.config={descriptionMaxChars:70,defaultImage:"https://s.yimg.com/rz/uh/icons/ycon_20140228.png"},this.id=a.id,this.msgID=a.msgID,this.position=a.position,this.state=a.state,this.icon=a.icon,this.thumbnail=a.thumbnail,this.favicon=a.favicon,this.title=a.title,this.text=a.text,this.timestamp=a.timestamp,this.link=a.link},a.ucs.Notifications.Store={instance:null,getInstance:function(){return this.instance||(this.instance=new a.ucs.Notifications.StoreObject),this.instance}},a.ucs.Notifications.StoreObject=function(){this.mode="default",this.notifications=[],this.cometCount=0,this.isCacheStale=!0,this.init()},a.ucs.Notifications.StoreObject.prototype={init:function(){this.setConfig(),a.Lang.isFunction(a.ucs.CometConn)&&(this.comet=new a.ucs.CometConn.getConn("notifications")),this.addEventListeners()},setConfig:function(){var c=a.ucs.Notifications.config;b.environment=c.environment,b.crumb=c.crumb,b.guid=c.guid},addEventListeners:function(){a.publish("ucs-notifications:setMode",{broadcast:2}),a.publish("ucs-notifications:getNotifications",{broadcast:2}),a.publish("ucs-notifications:setNotificationState",{broadcast:2}),a.publish("ucs-notifications:NewNotifications",{broadcast:2}),a.publish("ucs-notifications:countChange",{broadcast:2}),a.Global.on("ucs-notifications:getNotifications",a.bind(this.getNotifications,this)),a.Global.on("ucs-notifications:setMode",a.bind(this.setMode,this)),a.Global.on("ucs-notifications:setNotificationState",a.bind(this.setNotificationState,this)),a.Global.on("ucs-notifications:mockCommetMessage",a.bind(this.handleCometEvent,this)),this.comet&&(this.comet.on("connect",a.bind(function(){this.comet.initNotification()},this)),this.comet.on("message",a.bind(this.handleCometEvent,this)))},setMode:function(b){var c=b.mode;return"default"!==c&&"broadcast"!==c&&"polling"!==c?void a.log("ucs-notifications: mode "+c+" is not valid."):(this.mode=c,void a.log("ucs-notifications: mode set to ",c))},handleCometEvent:function(b){var c=b.data.count;this.cometCount=c,a.log("Comet signal count: ",c),a.Global.fire("ucs-notifications:countChange",{count:c}),c>0&&(this.isCacheStale=!0,"broadcast"===this.mode&&this.getNotifications({count:c,callback:a.bind(this.broadcastNotifications,this)}))},broadcastNotifications:function(b){b.error||a.Global.fire("ucs-notifications:NewNotifications",b)},getNotifications:function(b){var c=b.start||0,d=b.count,e=b.callback;d&&e&&(this.isCacheStale||"polling"===this.mode?this.fetchNotifications(c,d,a.bind(function(a){a.error?e(a):(this.setCache(a.notifications),e({notifications:this.notifications.slice(c,d)}))},this)):e({notifications:this.notifications.slice(c,d)}))},setCache:function(a){for(var b=0;b<a.length;b++)this.findNotification(a[b].id)||this.notifications.push(a[b]);this.notifications.sort(this.compareTimestamp)},compareTimestamp:function(a,b){return Number(a.timestamp)<Number(b.timestamp)?1:Number(a.timestamp)>Number(b.timestamp)?-1:0},emptyCache:function(){this.isCacheStale=!0,this.notifications=[]},buildQueryUrl:function(c){var d,e={fetch:"select * from social.uhnotifications ("+c.start+","+c.count+') where date = "epoch" and guid = "'+b.guid+'"  and state="seen|notseen"',clearCount:'select * from ucs.user_notif_status where guid = "'+b.guid+'" and clear="true";',setState:'update social.uhnotifications set state= "'+c.state+'" where id = "'+c.notificationId+'";'},f=b.environment,g="";for(var h in f)"query"===h&&(g+="?"),g+=f[h];return d=a.QueryString.stringify({q:e[c.query],format:"json",crumb:b.crumb,t:(new Date).getTime()})+"&callback={callback}",g+"?"+d},executeJSONP:function(b,c,d,e){a.jsonp(b,{on:{success:c,timeout:d,failure:e},timeout:6e3})},clearCount:function(){var b=this,c=this.buildQueryUrl({query:"clearCount"}),d=function(){b.count=0,a.Global.fire("ucs-notifications:countChange",{count:0})},e=function(){},f=function(){};this.executeJSONP(c,d,e,f)},fetchNotifications:function(a,b,c){var d=this,e=this.buildQueryUrl({query:"fetch",start:a,count:b}),f=function(a){d.processFetchResponse(a,c)},g=function(){d.handleFetchError("timeout",c)},h=function(){d.handleFetchError("timeout",c)};this.executeJSONP(e,f,g,h,c)},handleFetchError:function(a,b){var c;c=a&&a.query&&a.query.results&&a.query.results.result?"<status>error: 401</status>"===a.query.results.result?401:a.query.results.result:a&&a.error&&a.error.status?a.error.status:a,b({error:c})},processFetchResponse:function(b,c){var d=[],e=[];b&&b.query&&b.query.results&&b.query.results.notifications?(this.clearCount(),this.isCacheStale=!1,d=d.concat(b.query.results.notifications.notification),a.each(d,function(a,b){var c=this.parseRawNotification(a,b)||[];e=e.concat(c)},this),c({notifications:e})):this.handleFetchError(b,c)},parseRawNotification:function(b,c){var d;try{return"string"==typeof b.meta.actionData&&(b.meta.actionData=a.JSON.parse(b.meta.actionData)),d=new a.ucs.Notifications.Notification({id:b.id,msgID:b.meta.actionData.msgID||null,position:c+1,state:b.state,icon:b.meta.actionData.icon||null,thumbnail:b.meta.actionData.thumbnail||null,favicon:b.favicon||null,title:b.meta.pageTitle||null,text:b.meta.actionData.text||null,timestamp:b.created,link:b.meta.pageUrl||null}),"notseen"===d.state&&c<this.cometCount&&(d.state="new"),d}catch(e){return void a.log("Invalid JSON string in meta.actionData "+b)}},setNotificationState:function(a){var b=this.findNotification(a.notificationId),c=a.state,d=a.callback||function(){},e=function(a){b.state=c,d(a)},f=function(a){d(a)},g=function(a){d(a)},h=this.buildQueryUrl({query:"setState",state:a.state,notificationId:a.notificationId});b&&c&&this.executeJSONP(h,e,f,g,d)},findNotification:function(b){return a.Array.find(this.notifications,function(a){return a.id===b})}}},"1.0",{requires:["event","cookie","json","jsonp","querystring","ucs-timestamp-library","ucs-comet-conn"]});YUI.add("ucs-notifications-tracker",function(a){var b,c,d={},e={};a.namespace("ucs.Notifications"),a.ucs.Notifications.Tracker=function(a){this.panel=a,this.init()},a.ucs.Notifications.Tracker.prototype={init:function(){e=a.ucs.Notifications.helpers||{},b=a.ucs.Notifications.config.device||"desktop",this._loadConfig(),this._addListeners(),c=d.rapid.slk},_addListeners:function(){a.on({trackPanel:a.bind(this.trackPanel,this),trackBadge:a.bind(this.trackBadge,this),trackHeaderCTA:a.bind(this.trackHeaderClick,this),trackNotificationCTA:a.bind(this.trackNotificationClick,this),trackFooterCTA:a.bind(this.trackFooterClick,this)})},_getInstrumentation:function(){return"rapid"},_loadConfig:function(){var c=a.one(this.panel.container);d=a.ucs.Notifications.config,d.instrumentation=this._getInstrumentation(),"desktop"===b&&(d.ult={ylt:{badge:c.getAttribute("data-ylt-ntf-badge")||"",panel_hidden:c.getAttribute("data-ylt-ntf-panl-hid")||"",panel_new:c.getAttribute("data-ylt-ntf-panl-new")||"",panel_old:c.getAttribute("data-ylt-ntf-panl-old")||"",panel_empty:c.getAttribute("data-ylt-ntf-panl-emp")||"",panel_mid_new:c.getAttribute("data-ylt-ntf-panl-mid-n")||"",panel_mid:c.getAttribute("data-ylt-ntf-panl-mid-nn")||"",timeout:c.getAttribute("data-ylt-ntf-timeout")||"",error:c.getAttribute("data-ylt-ntf-error")||"",error_401_out:c.getAttribute("data-ylt-ntf-401-out")||"",error_401_mid:c.getAttribute("data-ylt-ntf-401-mid")||"",notification_cta:c.getAttribute("data-ylt-ntf-cta")||"",manage_cta:c.getAttribute("data-ylt-ntf-manage")||"",view_all_cta:c.getAttribute("data-ylt-ntf-vwall-in")||"",error_401_out_cta:c.getAttribute("data-ylt-ntf-vwall-out")||"",learn_more_cta:c.getAttribute("data-ylt-ntf-learn")||"",sign_in_cta:c.getAttribute("data-ylt-ntf-signin-nn")||"",sign_in_new_cta:c.getAttribute("data-ylt-ntf-signin-new")||""}}),d.rapid={slk:{badge:"UH 3 Notification Badge Display",panel_hidden:"UH 3 Notification Panel Hide",panel_new:"UH 3 Notification Panel Display New",panel_old:"UH 3 Notification Panel Display Old",panel_empty:"UH 3 Notification Panel Display Empty",panel_mid_new:"UH 3 Notification Panel Display New MidAuth",panel_mid:"UH 3 Notification Panel Display NoNew MidAuth",timeout:"UH 3 Notification Timeout",error:"UH 3 Notification Error",error_401_out:"UH 3 Notification 401 SignedOut",error_401_mid:"UH 3 Notification 401 MidAuth",notification_cta:"UH 3 Notification CTA",manage_cta:"UH 3 Notification Manage CTA",view_all_cta:"UH 3 Notification ViewAll SignedIn CTA",error_401_out_cta:"UH 3 Notification ViewAll SignedOut CTA",learn_more_cta:"UH 3 Notification Learn More CTA",sign_in_cta:"UH 3 Notification SignIn NoNew MidAuth CTA",sign_in_new_cta:"UH 3 Notification SignIn New MidAuth CTA"}}},_getPanelState:function(){var a=d.authState,b=this.panel.badge.count<1,c=this.panel.notifications.length<1;return e.isNTSubCookieSet()?this.panel.fetchError?401===this.panel.fetchError?"middleauth"===a?"error_401_mid":"error_401_out":"timeout"===this.panel.fetchError?"timeout":"error":"middleauth"===a?b?"panel_mid":"panel_mid_new":b?c?"panel_empty":"panel_old":"panel_new":"panel_hidden"},_getFooterAction:function(a){return a+"_cta"},_getSec:function(){var a={desktop:"d",smpartphone:"m",tablet:"t"};return"uh-"+a[b]},_fireRapidBeacon:function(c,d){var e;d.act=c,d.mid="desktop"===b?"yucs-profile-panel":"yucs-sidebar",d.t1=d.t1||"a1",d.t2=d.t2||"hd",d.t3=d.t3||"Notifications","click"===c?e={sec:this._getSec(),slk:d.slk,_pValue:d.cpos,keys:d,outcome:d.outcome}:"event"===c&&(e={eventName:"secvw",keys:d,outcome:d.outcome}),a.Global.fire("ucs-rapid:"+c,e)},_fireUltBeacon:function(a,b,c){var d=new Image,e="https://geo.yahoo.com/"+a+b,f=!1;c&&window.ucs&&window.ucs.ULT&&window.ucs.ULT.track_click&&(c._S||(ucs.Meta&&(f=ucs.Meta.spaceid()),"undefined"!=typeof YAHOO&&"undefined"!=typeof YAHOO.i13n&&"undefined"!=typeof YAHOO.i13n.SPACEID&&(f=YAHOO.i13n.SPACEID),f||(f="1197757397")),e=window.ucs.ULT.track_click(e,c)),d.height=0,d.width=0,d.src=e},trackPanel:function(a){var e,f=this._getPanelState();e={slk:c[f],elmt:c[f],itc:"1"},this._fireRapidBeacon("event",e,a),"desktop"===b&&this._fireUltBeacon("t",d.ult.ylt[f]),this.panel.notifications.length&&this.trackMsgIDs(a)},trackBadge:function(a){var e;e={slk:c.badge,elmt:c.badge,itc:"1"},this._fireRapidBeacon("event",e,a),"desktop"===b&&this._fireUltBeacon("t",d.ult.ylt.badge)},trackHeaderClick:function(a){var c,e,f;e=d.rapid.slk.manage_cta,c={rspns:"nav",slk:e,elmt:e,elm:"btn",itc:"0"},this._fireRapidBeacon("click",c,a),"desktop"===b&&(f=d.ult.ylt.manage_cta,this._fireUltBeacon("t",f))},trackNotificationClick:function(a){var c,e=a.notification;c={slk:d.rapid.slk.notification_cta,elmt:d.rapid.slk.notification_cta,elm:"itm",itc:"0",g:e.id,cpos:e.position},this._fireRapidBeacon("click",c,a),"desktop"===b&&this._fireUltBeacon("t",d.ult.ylt.notification_cta)},trackFooterClick:function(a){var c,e,f,g=this.panel.footer.message;e=d.rapid.slk[this._getFooterAction(g)],c={rspns:"nav",slk:e,elmt:e,elm:"btn",itc:"0"},this._fireRapidBeacon("click",c,a),"desktop"===b&&(f=d.ult.ylt[this._getFooterAction(g)],this._fireUltBeacon("t",f))},trackMsgIDs:function(){var c,e,f,g=d.languagetag,h=d.property,i=[];c=b.replace(/^./,function(a){return a.toUpperCase()}),a.each(this.panel.notifications,function(a){i.push(a.msgID)}),e="?s=2146128176&prop="+h+"&lt="+g+"&r="+encodeURIComponent(location.href)+"&t="+Math.random()+"&device="+c+"&dmsgs="+encodeURIComponent(i.join()),f={g:i.join(),lt:g,device:c,prop:h},this._fireUltBeacon("p",e,f)}}},"1.0",{requires:["node","event-custom"]});YUI.add("ucs-notifications-badge",function(a){var b=a.one("#yucs-profile");a.namespace("ucs.Notifications"),a.ucs.Notifications.Badge=function(){this.node=a.one(a.ucs.Notifications.config.badgeContainerNode),this.count=0,this.isFrozen=!1,this.init()},a.ucs.Notifications.Badge.prototype={init:function(){this.node&&(b&&(b.on("mouseenter",a.bind(this.handlePanelOpen,this)),b.on("mouseleave",a.bind(this.handlePanelClose,this))),a.Global.on("ucs-notifications:countChange",a.bind(this.handleCountChange,this)))},handlePanelOpen:function(){this.isFrozen=!0},handlePanelClose:function(){this.isFrozen=!1,this.handleCountChange()},handleCountChange:function(b){b&&b.hasOwnProperty("count")&&this.setCount(b.count),this.isFrozen||(this.node.setHTML(this.count),this.count>0?(this.display(),a.ucs.Notifications.helpers.setNTSubCookie(),a.fire("trackBadge",{debug:!1})):this.hide())},setCount:function(a){this.count=a>99?"+99":a},display:function(){this.node.removeClass("V-h")},hide:function(){this.node.addClass("V-h")}}},"1.0",{requires:["node","event-mouseenter"]});YUI.add("ucs-notifications-footer",function(a){var b={};a.namespace("ucs.Notifications"),a.ucs.Notifications.Footer=function(c){b=a.ucs.Notifications.config,this.messages={empty:{strings:{},template:"",links:{}},loading:{strings:{},template:b.templates.footer.loading,links:{}},view_all:{template:b.templates.footer.view_all,strings:{view_all_notifications:b.localizedStrings.view_all_notifications},links:{notification_center:b.links.notificationCenterUrl}},learn_more:{template:b.templates.footer.learn_more,strings:{no_notifications:b.localizedStrings.no_notifications,learn_more:b.localizedStrings.learn_more},links:{learn_more:b.links.learnMoreUrl}},sign_in:{template:b.templates.footer.sign_in,strings:{sign_in:b.localizedStrings.sign_in},links:{notification_center:b.links.notificationCenterUrl}},sign_in_new:{template:b.templates.footer.sign_in_new,strings:{new_notifications:b.localizedStrings.new_notifications,verify_password:b.localizedStrings.verify_password},links:{notification_center:b.links.notificationCenterUrl}},error:{template:b.templates.footer.error,strings:{unavailable:b.localizedStrings.unavailable,try_again:b.localizedStrings.try_again},links:{}},error_401_out:{template:b.templates.footer.view_all,strings:{view_all_notifications:b.localizedStrings.view_all_notifications},links:{notification_center:b.links.notificationCenterUrl}}},this.message=this.messages.hasOwnProperty(c)?c:"empty",this.template=this.messages[this.message].template||b.templates[this.message]||"",this.strings=this.messages[this.message].strings,this.links=this.messages[this.message].links},a.ucs.Notifications.Footer.prototype={render:function(){var b=new a.Template;return b.render(this.template,{strings:this.strings,links:this.links})}}},"1.0",{requires:["node","template"]});YUI.add("ucs-notifications-panel",function(a){a.namespace("ucs.Notifications");var b,c={};a.ucs.Notifications.Panel=function(){c=a.ucs.Notifications.config,this.container=c.panelContainerNode,this.notifications=[],this.badge=new a.ucs.Notifications.Badge,this.footer=new a.ucs.Notifications.Footer("empty"),this.tracker=new a.ucs.Notifications.Tracker(this),this.init()},a.ucs.Notifications.Panel.prototype={init:function(){b=a.ucs.Notifications.helpers,this.addEventHandlers()},addEventHandlers:function(){a.one("#yucs-profile").on("mouseenter",a.bind(this.handlePanelopen,this)),a.one("#yucs-notifications")?(a.one("#yucs-notifications").delegate("click",a.bind(this.handleHeaderClick,this),".NotiHeader a"),a.one("#yucs-notifications").delegate("click",a.bind(this.handleNotificationClick,this),".Notification a"),a.one("#yucs-notifications").delegate("click",a.bind(this.handleFooterClick,this),".NotiFooter a")):a.one("#yucs-notif-panel")&&(a.one("#yucs-notif-panel").delegate("click",a.bind(this.handleHeaderClick,this),".NotiHeader a"),a.one("#yucs-notif-panel").delegate("click",a.bind(this.handleNotificationClick,this),".Notification a"),a.one("#yucs-notif-panel").delegate("click",a.bind(this.handleFooterClick,this),".NotiFooter a"))},handlePanelopen:function(){this.display({loader:!0,qty:4})},handleHeaderClick:function(b){var c=b.currentTarget.getAttribute("href");b.preventDefault(),a.fire("trackHeaderCTA",{debug:!1}),a.later(200,this,function(){window.location.href=c})},handleNotificationClick:function(b){var c=b.currentTarget.getAttribute("href"),d=b.currentTarget.getAttribute("notid"),e=Number(b.currentTarget.getAttribute("cpos")),f=this.notifications[e-1];f.position=e,b.preventDefault(),a.fire("ucs-notifications:setNotificationState",{notificationId:d,state:"seen"}),a.fire("trackNotificationCTA",{notification:f,debug:!1}),a.later(500,this,function(){window.location.href=c})},handleFooterClick:function(b){var c=b.currentTarget.getAttributes("href");b.preventDefault(),a.fire("trackFooterCTA",{debug:!1}),a.later(200,this,function(){window.location.href=c})},getNotifications:function(b,c){a.fire("ucs-notifications:getNotifications",{count:b,callback:a.bind(c,this)})},display:function(b){var d=a.one(this.container);b.loader&&d.setHTML(this.render(b)),"signedin"===c.authState?this.getNotifications(b.qty,function(b){var c={notifications:b.notifications,error:b.error};this.notifications=b.notifications||[],d.setHTML(this.render(c)),a.fire("trackPanel",{debug:!0})}):(d.setHTML(this.render({})),a.fire("trackPanel",{debug:!0}))},render:function(d){var e=new a.Template,f=d.notifications||[],g={};if(b.isNTSubCookieSet()||0!==f.length){g.headerRowHTML=this.renderHeaderRow()||"",g.notificationsHTML="";for(var h=0;h<f.length;h++)g.notificationsHTML+=f[h].render(c.templates.notification),"new"===f[h].state&&a.fire("ucs-notifications:setNotificationState",{notificationId:f[h].id,state:"notseen"});return this.footer=new a.ucs.Notifications.Footer(this.getFooterMessage(d)),g.footerRowHTML=this.footer.render(),e.render(c.templates.panel,g)}},renderHeaderRow:function(){var b=new a.Template;return b.render(c.templates.header,{localizedStrings:c.localizedStrings,notificationCenterUrl:c.links.notificationCenterUrl,manageNotificationsUrl:c.links.manageNotificationsUrl})},getFooterMessage:function(a){if("middleauth"===c.authState)return this.badge.count>0?"sign_in_new":"sign_in";if(a){if(a.loader===!0)return"loading";if(a.empty)return"empty"}return a.error?401===a.error?"error_401_out":"error":a.notifications&&a.notifications.length>0?"view_all":"learn_more"}},a.ucs.Notifications.Notification.prototype={getTimestring:function(){return a.ucs.Timestamp.getTimeStamp({date:new Date(1e3*parseInt(this.timestamp,10)),dateRef:new Date,locale:c.languagetag})},getDescription:function(){var a="string"==typeof this.text?this.text:"",b=this.config.descriptionMaxChars-3,c=!1;return a.indexOf("{UH_b_start}")>=0&&a.indexOf("{UH_b_end}")<b+13&&(c=!0,b+=17),c?(a=a.replace("{UH_b_start}","<strong>"),a=a.replace("{UH_b_end}","</strong>")):(a=a.replace("{UH_b_start}",""),a=a.replace("{UH_b_end}","")),a.length>=b&&(a=a.substring(0,b)+"..."),a},getImage:function(){return this.thumbnail?this.thumbnail:this.icon?this.icon:this.favicon?this.favicon:c.notification.defaultImage},getImageSource:function(){return this.thumbnail?"thumbnail":this.icon?"icon":this.favicon?"favicon":"default"},render:function(b){var c=new a.Template;return c.render(b,{notification:this})}}},"1.0",{requires:["node","template","event","cookie","ucs-timestamp-library","ucs-notifications-store","ucs-notifications-tracker","ucs-notifications-footer","ucs-notifications-badge"]});window.ucs&&window.ucs.YObj&&window.ucs.YObj.use("node","cookie","ucs-notifications-store","ucs-notifications-tracker","ucs-notifications-badge","ucs-notifications-footer","ucs-notifications-panel",function(a){var b,c,d=window.ucs.Meta||{data:{}},e=a.one("#yucs-notifications");e&&(a.namespace("ucs.Notifications"),a.ucs.Notifications.config={environment:{scheme:"https://",host:"ucs.query.yahoo.com",port:":443",path:"/v1/console/yql"},crumb:d.data.crumb||e.getAttribute("data-crumb"),guid:d.data.guid||e.getAttribute("data-guid"),authState:d.data.authState||e.getAttribute("data-authstate"),languagetag:d.data.languagetag||e.getAttribute("data-languagetag"),device:d.data.device||e.getAttribute("data-device"),property:d.data.property||e.getAttribute("data-property"),badgeContainerNode:"#yucs-notif-count-con",panelContainerNode:"#yucs-notifications",links:{notificationCenterUrl:e.getAttribute("data-notificationCenterUrl")||"https://yahoo.com/notifications",learnMoreUrl:e.getAttribute("data-learnMoreUrl")||"https://yahoo.com/notifications/ob",manageNotificationsUrl:e.getAttribute("data-manageNotificationsUrl")||"https://yahoo.com/notifications/edit"},localizedStrings:{learn_more:e.getAttribute("data-learnMore-txt")||"Learn how to enable notifications.",manage:e.getAttribute("data-manage-txt")||"Manage",new_notifications:e.getAttribute("data-newNotifications-txt")||"You have new notifications",no_notifications:e.getAttribute("data-noNotifications-txt")||"You have no notifications.",notification:e.getAttribute("data-notification-txt")||"Notification",notifications:e.getAttribute("data-notifications-txt")||"Notifications",sign_in:e.getAttribute("data-signIn-txt")||"Verify your password to view notifications",try_again:e.getAttribute("data-tryAgain-txt")||"Please try again later",unavailable:e.getAttribute("data-unavailable-txt")||"Notifications are temporarily unavailable",verify_password:e.getAttribute("data-verifyPassword-txt")||"To view them, verify your password",view_all:e.getAttribute("data-viewAll-txt")||"View all",view_all_notifications:e.getAttribute("data-viewAllNotifications-txt")||"View All Notifications"},templates:{panel:'<ul class="Pos-r Mb-0 Whs-nw W-100"><%== this.headerRowHTML %><%== this.notificationsHTML %><%== this.footerRowHTML %></ul>',header:'<li class="Px-16 Bd-b NotiHeader"><ul class="GridSpread GridVCenter Whs-n"><li class="Grid-U Fz-xs C-n"><%= this.localizedStrings.notifications %></li> <li class="Grid-U Fz-xs"><a class="D-b P-4"href="<%= this.manageNotificationsUrl %>"><%= this.localizedStrings.manage %></a></li></ul></li>',notification:'<li class="Px-16 Bd-b NoLinkColor Notification BackgroundChange <%= (this.notification.state === "seen") ? "Fw-200 Bgc-x Op-66":"" %> "><a class="Pos-r D-b" href="<%= this.notification.link %>"  notid="<%= this.notification.id %>" cpos="<%= this.notification.position %>" target="_self"><div class="Grid-U-4-5 Whs-n Pb-4" style="line-height:14px;"><div class="M-0 Mt-10 P-0 Ell Fz-s <%= (this.notification.state === "new") ? "Fw-b":"" %> "><%== this.notification.title %></div><div class="M-0 P-0 Fw-200" style="font-size: 12px;" ><%== this.notification.getDescription() %></div><div class="Mx-0 My-4 P-0 Fw-200 Op-66" style="font-size: 10px;"><%== this.notification.getTimestring() %></div></div><img class="M-a T-0 B-0 Pos-a" src="<%= this.notification.getImage() %>" style="width:55px;  margin-left:4px;<%= (this.notification.getImageSource() === "thumbnail") ? "width: 50px; margin-left: 7px;":""%>"></a></li>',footer:{error:'<li class="Py-10 Px-16 Bd-b Fz-s Fw-400 Whs-n NotiFooter"><%== this.strings.unavailable %>. <%== this.strings.try_again %>.</li>',learn_more:'<li class="Bd-b Fz-s Fw-400 Whs-n NoLinkColor BackgroundChange NotiFooter"><a class="Td-n D-b Py-10 Px-16 " href="<%= this.links.learn_more %>"><span><%== this.strings.no_notifications %><br><%== this.strings.learn_more %></span></a></li>',loading:'<li class="Py-10 Px-16 Bd-b Ta-c Fz-s Fw-200 Whs-n NoLinkColor"><img src="https://s.yimg.com/ok/u/assets/img/spinner-24x24-anim.gif"></li>',sign_in:'<li class="Bd-b Fz-s Fw-400 Whs-n NoLinkColor BackgroundChange NotiFooter"><a class="Td-n D-b Py-10 Pstart-16 " href="<%= this.links.notification_center %>"><span class=""><%== this.strings.sign_in %>.</span></a></li>',sign_in_new:'<li class="Bd-b Fz-s Fw-400 Whs-n NoLinkColor BackgroundChange NotiFooter"><a class="Td-n D-b Py-10 Px-16 " href="<%= this.links.notification_center %>"><span class=""><%== this.strings.new_notifications %>.<br><%== this.strings.verify_password %>.</span></a></li>',view_all:'<li class="Bd-b Fz-s Fw-400 Whs-n NoLinkColor BackgroundChange NotiFooter"><a class="Td-n D-b Py-10 Px-16" href="<%= this.links.notification_center %>"><%== this.strings.view_all_notifications %></a></li>'}}},a.ucs.Notifications.helpers={isNTSubCookieSet:function(){return a.Cookie.getSub("ucs","nt")?!0:!1},setNTSubCookie:function(){var b=(new Date).getTime();a.Cookie.setSub("ucs","nt",b,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com"})}},b=a.ucs.Notifications.Store.getInstance(),c=new a.ucs.Notifications.Panel)});YUI.add("ucs-mailcount-v2",function(b){b.namespace("ucs");var a="https://s1.yimg.com/kx/yucs/uh3/mail_link/js/89/mail_preview_ssl-min.js";b.ucs.MailCount=function(c){this.mailcount=c;this.mailPreview=null;this.init();};b.ucs.MailCount.prototype={init:function(){this.property=b.one("#yucs").getAttribute("data-property");this.crumb=this.mailcount.getAttribute("data-mc-crumb");this.maxCountDisplay="99+";this.mailUrl=this._getMailCountURI();this.count=0;this.mailCountTimer=null;this.mouseMoveHandle=null;this.keypressHandle=null;this.pollingDurationTimer=null;this.pollingDuration=10*60000;this.mailCountPollingInterval=2*60000;if(b.UA.ie){b.one("document").on("focus",this._handleWindowFocus,this);b.one("document").on("blur",this._handleCancelMailCountFetch,this);}else{b.one("window").on("focus",this._handleWindowFocus,this);b.one("window").on("blur",this._handleCancelMailCountFetch,this);}this._initPollingTimer();if(top===self&&(this.mailcount.getAttribute("data-authstate")!=="signedout")&&document.location.protocol!=="https"){if(location.href.match(/ucs_mail_preview_popupsignin=1/)){this._loadMailPreviewScript();}else{this.mailcount.get("parentNode").once("yucs-mailcount|mouseenter",this._loadMailPreviewScript,this);this.mailcount.get("parentNode").once("yucs-mailcount|focus",this._loadMailPreviewScript,this);}}this._getMailCount();this.mailcount.removeClass("yucs-activate");},_getMailCountURI:function(){var g=this.mailcount,c="https",f=g.getAttribute("data-uri-path"),e=b.QueryString.stringify({"wssid":this.crumb,"appid":"UnivHeader"}),d=null;d=c+"://"+f+"?"+e+"&callback={callback}";return d;},_processMailCount:function(d){if(!d.newmailcount){return;}else{var c=parseInt(d.newmailcount,10);this.count=c;if(this.mailPreview){this.mailPreview.setMailCount(this.count);}if(c>0){if(c>9){this.mailcount.get("parentNode").addClass("yucs-lgnewmail");}else{this.mailcount.get("parentNode").addClass("yucs-newmail");}if(c>99){c=this.maxCountDisplay;}this.mailcount.one(".yucs-alert-count").set("innerHTML",c);this.mailcount.removeClass("yucs-hide");}else{this.mailcount.addClass("yucs-hide");this.mailcount.get("parentNode").removeClass("yucs-newmail");this.mailcount.get("parentNode").removeClass("yucs-lgnewmail");}}},_sendMailCountRequest:function(c,d,e){this.mailCountTimer=b.later(d,this,function(){this._service=new b.JSONPRequest(c+"&ymreqid:"+window.ucs.ymreqid(),{on:{success:b.bind(this._processMailCount,this),timeout:function(f){}},timeout:3000,end:this.requestInProgress=false});this._service.send();},null,e);},_getMailCount:function(){this._sendMailCountRequest(this.mailUrl,500,false);this._sendMailCountRequest(this.mailUrl,this.mailCountPollingInterval,true);},_initPollingTimer:function(){this.pollingDurationTimer=b.later(this.pollingDuration,this,this._cancelMailCountFetch,null,false);if(this.mouseMoveHandle){this.mouseMoveHandle.detach();}if(this.keyPressHandle){this.keyPressHandle.detach();}},_handleWindowFocus:function(c){if(this.mailCountTimer){this.mailCountTimer.cancel();}if(this.pollingDurationTimer){this.pollingDurationTimer.cancel();this._initPollingTimer();}this._getMailCount();},_cancelMailCountFetch:function(c){if(!c){this.mouseMoveHandle=b.one("window").on("mousemove",this._handleWindowFocus,this);this.keyPressHandle=b.one("window").on("keypress",this._handleWindowFocus,this);}if(this.mailCountTimer){this.mailCountTimer.cancel();}},_loadMailPreviewScript:function(h){if(h){h.preventDefault();}this.mailcount.get("parentNode").detach("yucs-mailcount|*");var i=h?h.currentTarget:this.mailcount.get("parentNode"),c=this.count,f=h&&h.type==="focus"?true:false,g=this,d=document.getElementById("yucs"),j=d&&d.getAttribute("data-property")==="mobile",k=j?b:ucs.YObj,l={onSuccess:b.bind(function(){k.use("ucs-mail-preview",function(e){g.mailPreview=new e.ucs.MailPreview({"mailLink":i,"mailCount":c});g.mailPreview._accessShowMenu();if(f){g.mailPreview._hideMenu();g.mailcount.get("parentNode").focus();}});},this)};if(b.one(".yucs-mail-preview-panel")){b.Get.script(a,l);}}};},"1.0",{requires:["node","event","jsonp","event-mouseenter","querystring-stringify"]});(function(){ucs.YObj.use("node","ucs-mailcount-v2",function(c){var a=c.one("#yucs").one("span.yucs-activate.yucs-mail-count"),b;if(a){if(a.getAttribute("data-authstate")!=="signedout"){b=new c.ucs.MailCount(a);}}});if(window.opener&&window.location.href.match(/ucs_mail_preview_popupsignin=1/)){window.opener.location=window.location;window.close();}})();YUI.add("ucs-helpmenu",function(a){"use strict";a.namespace("ucs.HelpMenu");var b="ucs:helpMenuShow",c="ucs:helpDebugMenuShow",d="ucs:helpMenuItemClick",e="ucs:helpDebugMenuItemClick",f="ucs:utilityMenuShow",g="ucs:utilityMenuItemClick",h='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></div></li>{separatorBottom}',i='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></div></li>{separatorBottom}',j='<span class="yucs-separator" role="presentation"></span>',k="http://l.yimg.com/a/lib/ush/icon.gif",l="https://s.yimg.com/lq/lib/ush/icon.gif";a.ucs.HelpMenu=function(b){this.menuContainer=b.ancestor("div"),this.shown=!1,this.helpLink=a.one("#yucs-help_button"),this.helpLink.setAttribute("data-mad","true"),this.previewPanel=a.one("#yucs-help_inner"),this.ylt=this.previewPanel.getAttribute("data-yltmenushown"),this.PANEL_OFFSET=30,this.PANEL_OFFSET_Y=3,this.headerNode=a.one("#yucs"),a.ucs.HelpMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-help_inner"}]),this._initCustomEvents(),b.removeClass("yucs-hm-activate")},a.extend(a.ucs.HelpMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(b,{broadcast:2,emitFacade:!0}),this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),this.publish(e,{broadcast:2,emitFacade:!0}),this.publish(f,{broadcast:2,emitFacade:!0}),this.publish(g,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{location:"top",menuType:"minty-utility-item"}),a.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{location:"bottom",menuType:"minty-help-item"}),a.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{location:"bottom",menuType:"minty-debug-item"})},_showMenu:function(d){this.previewPanel.hasClass("yucs-hide")&&this._sendBeacon(),a.ucs.HelpMenu.superclass._showMenu.apply(this,arguments),"mail"===a.one("#yucs").getAttribute("data-property")&&this.menu.all("li").addClass("yucs-hide"),d&&(d.ctrlKey||d.metaKey)&&d.shiftKey?(this.fire(c),this.shown===!1?a.later(4e3,this,function(){this.fire(c)}):this._showDebugMenuItems()):(this.fire(b),this.fire(f),this.shown===!1?a.later(4e3,this,function(){this.fire(b),this.fire(f)}):this._showMenuItems()),this._setPosition()},_showDebugMenuItems:function(){this.shown=!0,this.menu.all("li").addClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","none"),this.menu.all("li.debug-item").removeClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","block")},_showMenuItems:function(){this.shown=!0,this.menu.all("li").removeClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","block"),this.menu.all("li.debug-item").addClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","none"),this._destructAria(),this._initAria()},_setPosition:function(){this.mailIcon=a.one("#yucs-help_button");var b,c=this.previewPanel.one(".yucs-dock"),d=c&&c.get("offsetWidth"),e=this.headerNode.get("offsetHeight");this.previewPanel.setX(this.rtl?Math.round(this.headerNode.getX()+this.PANEL_OFFSET):Math.round(this.headerNode.getX()+this.headerNode.get("offsetWidth")-this.panel.get("offsetWidth")-2)),this.panel.setY(a.one("#search_hot_keyword_block")?this.headerNode.getY()+e-this.PANEL_OFFSET_Y-30:e>0?this.headerNode.getY()+e-this.PANEL_OFFSET_Y:this.mailIcon.getY()+this.mailIcon.get("offsetHeight")+3),c&&(b=this.mailIcon.get("offsetWidth")/2-d/2,c.setX(this.mailIcon.getX()+b))},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._showMenu(a),this.panel.one("a").focus()),this.keyedup=!0)},_handleHelpMenuItems:function(b,c){a.log("help menu items received");var d,e,f=c&&c.location||"top",g=c&&c.menuType||"minty-help-item";b.menuGroups&&b.menuGroups.length&&(d=b.menuGroups,e=this.menu.one("#yuhead-help-panel"),b.reset&&e&&e.all("."+g).remove(!0),this._addMenuGroups(d,f,!1,g),this._showMenuItems())},_handleHelpDebugMenuItems:function(b){a.log("help menu items received");var c,d;b.menuGroups&&b.menuGroups.length&&(c=b.menuGroups,d=this.menu.one("#yuhead-help-panel"),b.reset&&d&&d.all(".minty-debug-item").remove(!0),this._addMenuGroups(c,"top",!0,"minty-debug-item"),this._showDebugMenuItems())},_handleMenuItemClick:function(b){a.log("help menu item click");var c,f,h,i;if(c=b.target,c=c.ancestor("a",!0),f=c.getAttribute("data-mad"),h=c.getAttribute("data-customevt"),i=c.ancestor("li").hasClass("disabled"))return void b.halt();if(h&&b.preventDefault(),!i){var j={actionData:f},k=c.ancestor("li");k.hasClass("debug-item")?this.fire(e,j):k.hasClass("minty-utility-item")?this.fire(g,j):this.fire(d,j)}},_addMenuGroups:function(a,b,c,d){var e,f,g,h=this.menu.one("#yuhead-help-panel"),i="",j=a.length;for(e=h.hasChildNodes(),f=0;j>f;f++)g=a[f].length,"bottom"===b?f>0&&(a[f][0].separatorTop=!0):(j-1>f||e)&&(a[f][g-1].separatorBottom=!0),i+=this._addMenuGroup(a[f],c,d);h.ancestor("div.yucs-yql_loading")&&h.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading"),"bottom"===b?h.append(i):h.prepend(i),h.one(".yucs-keepatbottom")&&h.all(".yucs-keepatbottom").each(function(a){h.append(a)})},_addMenuGroup:function(a,b,c){var d,e="",f=a.length;for(d=0;f>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass=c+" debug-item"):(a[d].isDebugItem=!1,a[d].menuClass=c+" minty-item"),e+=this._addMenuItem(a[d],c);return e},_addMenuItem:function(b,c){var d="";switch(b.checkedAria=b.isActive?'aria-checked="true"':"",b.disabledAria=b.isDisabled?'aria-disabled="true"':"",b.actionType){case"link":d=a.substitute(h,b,this._processTemplateValue);break;case"customEvent":d=a.substitute(i,b,this._processTemplateValue)}return d&&(d=b.isDebugItem?d.replace(/separator/,"separator debug-item "+c):d.replace(/separator/,"separator minty-item "+c)),d},_processTemplateValue:function(b,c,d){a.log("key = "+b+" value = "+c+" meta_data = "+d);var e="",f="https:"===document.location.protocol?l:k;switch(b){case"icon":void 0!==c&&(e="available"===c?'<img src="'+f+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+f+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+f+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+f+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+f+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(e=j);break;case"separatorBottom":c&&(e=j);break;case"actionData":c&&(e='data-mad="'+c+'"');break;case"isDisabled":c&&(e="disabled");break;case"isActive":c&&(e="sp active");break;case"checkedAria":e=c;break;default:e=c}return e},_sendBeacon:function(){this.ylt&&window.ucs._sendBeacon(this.ylt+"?t="+Math.random())}}),a.augment(a.ucs.HelpMenu,a.EventTarget)},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]}),function(){window.ucs.YObj.use("node","ucs-helpmenu",function(a){var b,c=a.one("#yucs").all(".yucs-hm-activate");c.each(function(c){b=new a.ucs.HelpMenu(c)})})}();window.ucs||(window.ucs={}),window.ucs.api=window.ucs.api||{},YUI.add("ucs-rapid",function(a){"use strict";a.namespace("ucs");var b="ucs-rapid:",c=b+"click",d=b+"event",e=b+"destroy-instance",f=b+"addmodules",g=b+"removemodules",h=b+"refreshmodules",i=null;a.ucs.Rapid=function(a,b,c){this.container=a,b&&(this.rapidConfig=b,this.tracked_mods=c,this._init())},a.ucs.Rapid.prototype={_init:function(){var a=window;i||a.YAHOO&&a.YAHOO.i13n&&a.YAHOO.i13n.Rapid&&(i=new a.YAHOO.i13n.Rapid(this.rapidConfig)),i&&(i.addModules(this.tracked_mods),this._publish())},_publish:function(){a.Global.on(c,this._handleBeaconing,this,"click"),a.Global.on(d,this._handleBeaconing,this,"event"),a.Global.on(e,this._handleDestroyInstance,this),a.Global.on(f,this.addModules,this),a.Global.on(g,this.removeModule,this),a.Global.on(h,this.refreshModule,this)},getUHRapidInstance:function(){return i},_handleBeaconing:function(b,c){if(!b)return void a.log("data is absent.");if(!i)return void a.log("uhRapidInstance is absent.");if(b.keys||(a.log("no data keys. setting it to empty"),b.keys={}),b.outcome||a.log("no outcome. setting it to null"),"click"===c)b.sec||(a.log("SEC is absent. Using default sec."),b.sec="uh-d"),b.slk||(a.log("SLK is absent. Using default slk."),b.slk="hd"),b._pValue||(a.log("_pValue is absent. Using default _pValue."),b._pValue=0),this.beaconClick(b.sec,b.slk,b._pValue,b.keys,b.outcome);else{if(!b.eventName)return void a.log("event Name is absent.");this.beaconEvent(b.eventName,b.keys,b.outcome)}},beaconClick:function(b,c,d,e,f){i?i.beaconClick(b,c,d,e,f):a.log("no rapid instance available. cant fire beacon click.")},beaconEvent:function(b,c,d){i?i.beaconEvent(b,c,d):a.log("no rapid instance available. cant fire beacon event.")},addModules:function(b,c,d){c=!1,i?this.isModuleTracked(b)?a.log("module is already tracked"):i.addModules(b,c,d):a.log("no rapid instance available. cant add module.")},removeModule:function(b){i?i.removeModule(b):a.log("no rapid instance available. cant remove module.")},refreshModule:function(b,c,d,e){c=!1,i?this.isModuleTracked(b)?i.refreshModule(b,c,d,e):a.log("module is not tracked, we cant do a refreshModule"):a.log("no rapid instance available.")},isModuleTracked:function(b){return i?i.isModuleTracked(b):void a.log("no rapid instance available. dont know if module is present.")},_handleDestroyInstance:function(){i?(this.rapidConfig={},i.destroy(),i=null):a.log("no rapid instance available. cant destroy instance.")}}},"0.1",{requires:["array-extras","event-custom","node"]}),function(){"use strict";window.ucs.YObj.use("node","ucs-rapid",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=window,o=a.one(".yucs"),p=a.one("#yucs-meta"),q=a.all("[data-uh-test]"),r="standard",s=n.YAHOO&&n.YAHOO.i13n||null,t={},u={};return o?(b=o.getAttribute("data-spaceid"),c=o.getAttribute("data-property"),d=o.getAttribute("data-device"),k="true"===o.getAttribute("data-stencil"),d&&(i=!!d.match(/smartphone/gi),j=!!d.match(/tablet/gi)),p&&(e=p.getAttribute("data-test_id"),f=p.getAttribute("data-languagetag"),g=p.getAttribute("data-forcecobrand"),h=p.getAttribute("data-cobrand"),l=p.getAttribute("data-headercollapse")),g&&"standard"!==g?r=g:h&&"standard"!==h&&(r=h),s&&("undefined"!=typeof s.SPACEID&&(b=s.SPACEID),"undefined"!=typeof s.WEBWORKER_FILE&&(m=s.WEBWORKER_FILE)),b||(b="1197757397"),void(n.ucs.rapid||(u={spaceid:b,keys:{site:c,ver:"uh3s",psp:r,lang:f,uh_test:""},apv:!1,client_only:0,pageview_on_init:!1,rapid_noclick_resp:"uh-ignore-rapid"},s&&"undefined"!=typeof s.TEST_ID?u.test_id=s.TEST_ID:e&&(u.test_id=e),!q.isEmpty()&&u&&u.keys&&(u.keys.uh_test=a.Array.map(q.getDOMNodes(),function(a){return a.getAttribute("data-uh-test")}).join()),i?t=k?{NavMenu:"uh-m",MobileUH:"uh-m",SubMenuCountries:"uh-m","searchbox-mojit":"uh-m"}:"frontpage"===c&&"att"===g?{yucs:"uh-m","yucs-sidebar":"uh-m","yucs-search":"uh-m"}:{yucs:"uh-m","yucs-sidebar":"uh-m"}:j?t=k?{NavMenu:"uh-t",MobileUH:"uh-t",SubMenuCountries:"uh-t"}:{yucs:"uh-t","yucs-sidebar":"uh-t"}:k&&(t={masterNav:"uh-d",uhWrapper:"uh-d"}),"answers"===c&&(m||(m="/static/js/rapidworker-1.0.js"),u.webworker_file=m),l&&(u.keys.state="initial"),"groups"===c&&(m||(m="/js/rapid_worker.js"),u.webworker_file=m),("news"===c||"sports"===c||"finance"===c||"music"===c||"tv"===c||"weather"===c||"celebrity"===c||"homes"===c)&&(m||(m="/__rapid-worker-1.1.js"),u.webworker_file=m),c.match(/mag_/gi)&&(m||(m="/lib/metro/g/uicontrib/rapid_worker_1.1.1.js"),u.webworker_file=m),"frontpage"===c&&(u.ywa={project_id:0x918ba1d9327,host:"y.analytics.yahoo.com"}),n.ucs.rapid=new a.ucs.Rapid(o,u,t)))):void a.log("UH is absent")})}();YUI.add("gallery-event-pasted",function(a){function b(b,c){var d=c&&a.one(c).get("tagName")||"div",e=document.createElement(d),f=0===b.indexOf("on")?b:"on"+b,g=f in e;return g||(e.setAttribute(f,""),g=a.Lang.isFunction(e[f])),g&&!a.Node.DOM_EVENTS[f.substr(2)]&&(a.Node.DOM_EVENTS[f.substr(2)]=1),g}a.Event.define("pasted",{on:function(c,d,e){var f,g,h,i,j,k=d.args&&d.args[0],l=c.test("input[type=text],input[type=password],textarea")?"value":"text",m=a.guid(),n=function(a,b){k&&a===b||e.fire({prevVal:a,newVal:b})};b("paste",c)?c.on(m+"|paste",function(b){f=this.get(l),a.later(0,null,function(){g=b.target.get(l),n(f,g)})}):b("input",c)&&(i=50,j=function(a){"keypress"===a.type&&a.ctrlKey||(h={sel:this.get("selectionEnd")-this.get("selectionStart"),val:this.get(l),mtime:+new Date})},c.on(m+"|keypress",j),c.on(m+"|select",j),c.on(m+"|input",function(a){f=h?h.val:"",g=this.get(l),h&&g.length===f.length-h.sel||(!h||+new Date-h.mtime>i)&&n(f,g),j.call(this,a)}),d._state=h),d._evtGroup=m},detach:function(a,b){a.detachAll(b._evtGroup+"|*")}})},"gallery-2010.08.11-20-39",{requires:["event-synthetic"]}),YUI.add("input-mask",function(a){"use strict";var b,c,d,e={srcNode:".phone-number-input",mask:"+1(   )   -    ",maskLetter:" "},f=function(a){var b,d;return void 0!==a.get("selectionStart")?(b=a.get("selectionStart"),d=a.get("selectionEnd")):document.selection&&(a.focus(),c=document.selection.createRange(),b=-c.duplicate().moveStart("character",-a.get("value").length),d=b+c.text.length),{start:b,end:d}},g=function(a,c){b=a.getDOMNode(),b.setSelectionRange?(b.focus(),b.setSelectionRange(c.start,c.end)):b.createTextRange&&(d=b.createTextRange(),d.collapse(!0),d.moveEnd("character",c.end),d.moveStart("character",c.start),d.select())};a.InputMask=function(b){this.config={},this.config.srcNode=b.srcNode||e.srcNode,this.mask=b.mask||e.mask,this.maskLetter=b.maskLetter||e.maskLetter,this.firstMaskPos=this.mask.indexOf(this.maskLetter),this.lastMaskPos=this.mask.lastIndexOf(this.maskLetter)+1,this.notInputPos=[],this.maskPhoneLength=this.mask.match(new RegExp(this.maskLetter,"g")).length,this.input=a.one(this.config.srcNode);for(var c=this.mask,d=c.search(new RegExp("[^"+this.maskLetter+"]")),f=0;d>-1;)this.notInputPos.push(d+f),f+=d+1,c=c.substr(d+1),d=c.search(new RegExp("[^"+this.maskLetter+"]"))},a.InputMask.prototype={setCaret:function(a){var b=this.input,c=b.get("value");return!(c.charAt(a.end)>="0"&&c.charAt(a.end)<="9")&&c.charAt(a.end)!==this.maskLetter&&a.end<this.mask.length||a.start<this.firstMaskPos?void this.setCaret(a.start===a.end?{start:a.start+1,end:a.end+1}:{start:a.start,end:a.end+1}):void g(b,a)},getCaret:function(){return f(this.input)},caretLeft:function(a,b){var c=b.start,d=b.end;return b=d<=this.firstMaskPos?{start:this.firstMaskPos,end:this.firstMaskPos}:c<=this.firstMaskPos&&d>this.firstMaskPos?{start:this.firstMaskPos,end:this.firstMaskPos}:")"===a.charAt(c-1)||"-"===a.charAt(c-1)?{start:c-2,end:c-2}:{start:c-1,end:c-1},this.setCaret(b),b},setValue:function(a,b){for(var c,d,e,f=a.substr(this.firstMaskPos).replace(new RegExp("[^0-9"+this.maskLetter+" ]","g"),"");f.length<this.maskPhoneLength+1;)f=f.concat(this.maskLetter);for(f=f.substr(0,this.maskPhoneLength),c=this.mask,d=0,e=0;d<c.length;++d)c.charAt(d)===this.maskLetter&&(c=c.substring(0,d)+f.charAt(e)+c.substr(d+1),e++);this.input.set("value",c),this.setCaret(b)},getPhoneNumberOnly:function(){var a=this.input.get("value");return a.replace(/[^0-9]/g,"")},render:function(){var a=this,b=this.input,c={onFocus:function(){b.get("value")||a.setValue(a.mask,{start:a.firstMaskPos,end:a.firstMaskPos})},onPaste:function(){var c,d=b.get("value"),e=a.getCaret(),f=d.substr(a.firstMaskPos).replace(/[^0-9]/g,""),g=f.length,h=0;for(c=0;c<a.notInputPos.length;++c)a.notInputPos[c]>a.firstMaskPos&&a.notInputPos[c]-a.firstMaskPos<g+h&&h++;e.start=g+h+a.firstMaskPos,e.end=e.start,a.setValue(d,e)},afterClick:function(){var c=b.get("value");c&&c!==a.mask||a.setCaret({start:a.firstMaskPos,end:a.firstMaskPos})},onKeyDown:function(c){{var d="",e=a.getCaret(),f=e.start,g=e.end,h=b.get("value"),i=c.keyCode;String.fromCharCode(i)}9!==c.keyCode&&(c.preventDefault(),8===i||46===i?(e=a.caretLeft(h,e),d=h.substring(0,e.start)+h.substr(e.start+1),a.setValue(d,e)):37===i?c.shiftKey&&f>a.firstMaskPos?a.setCaret({start:f-1,end:g}):c.metaKey?a.setCaret({start:a.firstMaskPos,end:a.firstMaskPos}):f>a.firstMaskPos?a.caretLeft(h,{start:f,end:f}):a.setCaret({start:a.firstMaskPos,end:a.firstMaskPos}):39===i&&a.setCaret(c.shiftKey?{start:e.start,end:e.end+1}:c.metaKey?{start:a.lastMaskPos,end:a.lastMaskPos}:g<a.lastMaskPos?{start:g+1,end:g+1}:{start:a.lastMaskPos,end:a.lastMaskPos}))},onKeyPress:function(c){var d="",e=a.getCaret(),f=e.start,g=e.end,h=b.get("value"),i=c.charCode||c.keyCode,j=String.fromCharCode(i);c.altKey||c.ctrlKey||c.metaKey||(c.preventDefault(),i>=48&&57>=i&&(d=h.substring(0,f)+j+h.substr(g),a.setValue(d,{start:f+1,end:f+1})))}};navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||(b.on("valuechange",c.onValueChange),b.on("keydown",c.onKeyDown),b.on("keyup",c.onKeyPress),b.on("focus",c.onFocus),b.on("pasted",c.onPaste),b.after("click",c.afterClick))}}},"0.0.1",{requires:["event-valuechange","event-base-ie","gallery-event-pasted","event-focus"]});if("undefined"==typeof YAHOO||!YAHOO)var YAHOO={};"undefined"!=typeof YAHOO.UCS&&YAHOO.UCS||(YAHOO.UCS={}),YAHOO.UCS.Get_The_App_Promo=function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=!1,u="",v="",w=!1,x=document.getElementById("yucs")||document.getElementById("UH"),y=null,z=null,A=document.getElementById("yucs_gta"),B=!1,C="Microsoft Internet Explorer"===navigator.appName,D=function(a,b){YUI().use("node",function(c){c.Global.fire(a,b)})},E=function(a){var b=0,c=a.style;return b=C?parseFloat(c.filter.substring(14))/100:parseFloat(c.opacity)},F=function(a,b){var c=a.style;C?(c.opacity=b,c.filter="alpha(opacity="+100*b+")"):c.opacity=b},G=function(){var a=document,b=a.body,c=a.documentElement;return Math.max(Math.max(b.scrollHeight,c.scrollHeight),Math.max(b.offsetHeight,c.offsetHeight),Math.max(b.clientHeight,c.clientHeight))},H=function(){var a=460;return document.body&&document.body.offsetWidth&&(a=document.body.offsetHeight),"CSS1Compat"===document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a=window.innerHeight),a},I=function(a,b){return a&&b?(u=a,v=b,!0):!1},J=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},K=function(){for(var a=document.createElement("div"),b=["O","Moz","ms"],c=b.length;c--;)if(b[c]+"Transition"in a.style)return o=b[c],!0;return!1}(),L=function(a){var b=a.style;C?b.filter="alpha(opacity=0)":b.opacity=0},M=function(){a.style.display="none",k.style.display="none",b.style.display="none",X()},N=function(){x.className=x.className.replace(new RegExp("\\b"+l+"\\b"),""),w=!0,a.className="uh-dmos-overlay",b.style.height="0px",null!==p&&(p.style.display="none"),K?d.className="uh-dmos-msgbox uh-dmos-hide-anim":s=setInterval(function(){var a=E(d)-.1;F(d,a),"0.1"===E(d).toFixed(1)&&(clearInterval(s),M())},56),document.getElementById("uh-dmos-imagebg").style.display="block",document.getElementById("uh-dmos-bd").style.display="block",document.getElementById("uh-dmos-success-message").style.display="none",document.getElementById("input-id-phoneNumber").value="",document.getElementById("phone-prompt").style.display="none",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="none"},O=function(){y&&y.beaconClick?t?y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"close",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}):y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"close",elm:"btn",itc:1,cat:"gtaa"}):(z=t?{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"close",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}}:{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"close",elm:"btn",itc:1,cat:"gtaa"}},D("ucs-rapid:click",z)),N()},P=function(){y&&y.beaconClick?t?y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}):y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}):(z=t?{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}}:{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}},D("ucs-rapid:click",z)),N()},Q=function(){y&&y.beaconClick?t?y.beaconClick("signup","apple-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}):y.beaconClick("signup","apple-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}):(z=t?{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}}:{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}},D("ucs-rapid:click",z))},R=function(){y&&y.beaconClick?t?y.beaconClick("signup","android-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}):y.beaconClick("signup","android-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}):(z=t?{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}}:{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}},D("ucs-rapid:click",z))},S=function(){J(e,"click",O),g&&J(g,"click",P),h&&J(h,"click",Q),i&&J(i,"click",R),d.className="uh-dmos-msgbox",c.className="uh-dmos-show",Y(),K?d.className="uh-dmos-msgbox uh-dmos-msgbox-show-anim":(L(d),r=setInterval(function(){var a=E(d)+.1;F(d,a),a>=1&&clearInterval(r)},56))},T=function(){a.style.display="block",k.style.display="block",b.style.display="block",b.style.height=H()+"px",a.style.height=G()+"px",a.style.left="0px",a.style.top="0px",a.style.bottom="0px",a.style.visibility="visible",K?(d.className="uh-dmos-msgbox",a.className="uh-dmos-overlay uh-dmos-overlay-show-anim"):(L(a),q=setInterval(function(){var b=E(a)+.2;F(a,b),b>=.8&&(S(),clearInterval(q))},56))},U=function(){var a=document.getElementById("input-id-phoneNumber").value,b=/^(\+1| )?\(?\d{3}\)? ?? ?\d{3} ?\-? ?\d{4}$/;return b.test(a)?1:b.test(a)||"+1(   )   -    "!==a?b.test(a)||""===a?!1:-2:!1},V=function(){w&&(X(),M()),w=!1},W=function(){var b={O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd",ms:"transitionend"};X(),B=b[o],window.addEventListener&&(a.addEventListener(B,S,!1),d.addEventListener(B,V,!1))},X=function(){window.addEventListener&&(a.removeEventListener(B,S,!1),d.removeEventListener(B,V,!1))},Y=function(){b.style.height=H()+"px",a.style.height=G()+"px",k.style.left="50%",k.style.marginLeft=-k.offsetWidth/2+"px"},Z=function(){b=document.getElementById("uh-dmos-wrapper"),a=document.getElementById("uh-dmos-overlay"),c=document.getElementById("uh-dmos-container"),d=document.getElementById("uh-dmos-msgbox"),e=document.getElementById("uh-dmos-msgbox-close-btn"),f=document.getElementById("input-id-phoneNumber"),k=document.getElementById("uh-dmos-container"),j=document.getElementById("uh-dmos-subscribe"),g=document.getElementById("uh-dmos-successBtn"),h=document.getElementById("apple-link"),i=document.getElementById("android-link")};return{_enableSubscribe:function(a){var b=(document.getElementById("input-id-phoneNumber").value.replace(/\D/g,""),"sbmt");return 1===a?(document.getElementById("uh-dmos-imagebg").style.display="none",document.getElementById("uh-dmos-bd").style.display="none",document.getElementById("uh-dmos-success-message").style.display="block",b+=" p-y",y&&y.beaconClick?t?y.beaconClick("signup",b,"",{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"},"sbmt"):y.beaconClick("signup",b,"",{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"},"sbmt"):(z=t?{sec:"signup",slk:b,_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}}:{sec:"signup",slk:"cnfrm-pop",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}},D("ucs-rapid:click",z)),y&&y.beaconEvent?t?y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"confirm",t4:u,t5:v,sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}):y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"confirm",sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}):(z=t?{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"confirm",t4:u,t5:v,sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}}:{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"confirm",sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}},D("ucs-rapid:event",z)),!0):(-1===a?(document.getElementById("phone-prompt").style.display="none",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="none"):-2===a?(document.getElementById("phone-prompt").style.display="block",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="none"):(document.getElementById("phone-prompt").style.display="none",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="block"),!1)},enableSubscribe:function(){var a=U();this._enableSubscribe(a)},checkFields:function(){var a=U();return 1===a?!0:(this._enableSubscribe(a),!1)},submitForm:function(){var a;if(YAHOO.UCS.Get_The_App_Promo.checkFields()){a=document.getElementById("input-id-phoneNumber").value.replace(/\D/g,"");var b=x.getAttribute("data-property");window.ucs.YObj.use("jsonp","node",function(c){var d="https://ucs.netsvs.yahoo.com/json/gtaa/index.php?phoneNumber="+encodeURIComponent(a)+"&wssid="+encodeURIComponent(c.one("#uh-dmos-subscribe").getAttribute("data-crumb"))+"&appid="+encodeURIComponent(l)+"&button_revision="+encodeURIComponent(m)+"&modal_revision="+encodeURIComponent(n)+"&property="+encodeURIComponent(b)+"&format=json&callback={callback}";c.jsonp(d,{on:{success:function(a){a&&a.result&&YAHOO.UCS.Get_The_App_Promo._enableSubscribe(a.result)},failure:function(){}}})})}},displayModalPopup:function(){y&&y.beaconClick?t?y.beaconClick("signup","gta-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}):y.beaconClick("signup","gta-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}):(z=t?{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}}:{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}},D("ucs-rapid:click",z)),y&&y.beaconEvent?t?y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"signup",t4:u,t5:v,sec:"signup",slk:"signup-pop",cat:"gtaa"}):y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"signup",sec:"signup",slk:"signup-pop",cat:"gtaa"}):(z=t?{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"signup",t4:u,t5:v,sec:"signup",slk:"signup-pop",cat:"gtaa"}}:{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"signup",sec:"signup",slk:"signup-pop",cat:"gtaa"}},D("ucs-rapid:event",z)),null===b&&(Z(),window.ucs||(window.ucs={}),window.ucs.YObj||document.getElementById("yUnivHead")&&document.getElementById("yUnivHead").getAttribute("data-property")&&(window.ucs.YObj=function(){var a=document.getElementById("yUnivHead");return"undefined"!=typeof window.Y&&a&&"srp"===a.getAttribute("data-property")?window.Y:YUI()}()),window.ucs.YObj.use("node","event","input-mask","base-ie","gallery-event-pasted","jsonp","json-parse",function(a){var b=new a.InputMask({srcNode:null,mask:null});b.render(),a.on("click",YAHOO.UCS.Get_The_App_Promo.submitForm,"#uh-dmos-subscribe"),a.on("keyup",function(a){var b=YAHOO.UCS.Get_The_App_Promo,c=a.target.get("id"),d="input-id-phoneNumber"===c||"uh-dmos-subscribe"===c;13===a.keyCode&&d&&b.submitForm(a)},".uh-dmos-msgbox-canvas")})),W(),T(),J(window,"resize",Y)},fireGTAEvent:function(a,b){l=a.getAttribute("data-appid"),b.Global.fire("ucs-alert:show-overlay",{data:{id:l,name:"Get the app",type:"get_the_app",text:"Send me a link:",cnfrmText:"Thanks! A link has been sent."}})},init:function(){"undefined"!=typeof YMedia&&YMedia.rapid&&(y=YMedia.rapid);var a=A?A:null;a&&(A.style.display="block",YUI().use("node",function(b){var c=x,d=!0;d||b.all(".yucs_gta").on("click",function(d){y&&y.beaconClick?y.beaconClick("ucs-alert","alert-cta","0",{t1:"a0",t2:"ucs-alert",elm:"btn",cat:"get_the_app"}):(z={sec:"ucs-alert",slk:"alert-cta",_pValue:"0",keys:{t1:"a0",t2:"ucs-alert",elm:"btn",cat:"get_the_app"}},D("ucs-rapid:click",z)),d.halt(!0),l=a.getAttribute("data-appid"),m=a.getAttribute("data-button-rev"),n=a.getAttribute("data-modal-rev"),c.className=c.className+" "+l,I(m,n)&&(t=!0),b.Global.fire("ucs-alert:show-overlay",{data:{id:l,name:"Get the app",type:"get_the_app",text:"Send me a link:",cnfrmText:"Thanks! A link has been sent."}})})}))}}}(),YAHOO.UCS.Get_The_App_Promo.init();