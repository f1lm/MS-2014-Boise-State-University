function pickLanguage(){var a=document.getElementById("language_select").value;window.location=a}$J.fn.lpdropdown=function(){var a=function(){$J(this).addClass("hover");$J("ul:first",this).css("visibility","visible")};var b=function(){$J(this).removeClass("hover");$J("ul:first",this).css("visibility","hidden")};this.hover(a,b);this.focusin(a);this.focusout(b);$J("li",this).hover(function(){$J(this).addClass("hover")},function(){$J(this).removeClass("hover")});$J("li",this).focusin(function(){$J(this).addClass("hover")});$J("li",this).focusout(function(){$J(this).removeClass("hover")})};$J(function(){var a=$J("span.lpdropdown");"function"==typeof a.lpdropdown&&a.lpdropdown()});function switchlang(b){var a=b.options[b.selectedIndex].value;window.location=document.getElementById("language_link_"+a).href}function handleImageLoad(a){var b=a.responseText.evalJSON();if(b.image==null||b.image.toLowerCase()=="badimageurl"){var e=document.getElementById(b.imageid+"Title");if(e){if(b.style){e.style.display=b.style}else{e.style.display="block"}}}else{var c=document.getElementById(b.imageid);c.src=b.image}}$J(function(){$J("#libraryInfo").hide();$J("#libInfoLink").click(function(a){$J("#libraryInfo").toggle()})});$J(window).load(function(){$J("html").click(function(){if($J("#libraryInfo")[0]){$J("#libraryInfo")[0].style.display="none"}})});$J(function(){$J("#logoutWarning").dialog({autoOpen:false,modal:true,buttons:[{id:"okButton",text:window.logoutWarningButtonLabel,click:function(){$J(this).dialog("close");window.location.assign(window.logoutWarningLocation)}}]})});function showWarning(){$J("#logoutWarning").dialog("open")}var SDLib={};SDLib.findPositionOfElement=function(a){var c=0;var b=0;if(a.offsetParent){do{c+=a.offsetLeft;b+=a.offsetTop}while(a=a.offsetParent)}return[c,b]};SDLib.getInnerText=function(a){var b;if(a.textContent!=null&&a.textContent!=undefined){b=a.textContent}else{b=a.innerText}return b};SDLib.debugConfirm=function(a,c){alert("element: "+a);var f="Basic Element Info:\nid: "+a.id;if(a.style!=null&&a.style!=undefined){f=f+"\nclass: "+a.style.className}f=f+"\ntag: "+a.tagName;var e=0;for(var b in a){if(e>0){e=e-1;continue}if(!confirm(f+"\nel."+b+": "+a[b])){if(c==null){break}else{e=c}}}};var SearchBoxLinker=Class.create();SearchBoxLinker.prototype={initialize:function(){this.sbox=null;this.ajaxHandler=null;this.callback=null},getData:function(a){this.callback=a;this.ajaxHandler.invokeAjax()},jsContextProvider:function(){var a=document.getElementById("q").value;if(a.startsWith(".")){a=" "+a}return[a]},handleData:function(a){var b=a.responseText.evalJSON();if(b.data){this.sbox.data=b.data}else{this.sbox.data=new Array()}this.callback()},doSubmit:function(){document.getElementById("searchForm").submit()}};var sboxLink=new SearchBoxLinker();var SearchBoxRestrictionManager=Class.create();SearchBoxRestrictionManager.prototype={initialize:function(){this.link=null;this.rstPlaceholderVal=null;this.pageLoaded=false;this.rstId="restrictionDropDown";this.limitId="searchLimitDropDown";this.singleRoomTargetValue=""},onChange:function(){select=document.getElementById(this.limitId);var b=document.getElementById("targetValue");var c=document.getElementById("limitValue");if(select==null){b.value=this.singleRoomTargetValue;c.value=""}else{this.setupTargetLimit(select[select.selectedIndex].value)}var a=addPathParams(addPathParams(this.link,encodeAsTapestry(b.value)),encodeAsTapestry(c.value));$T("restrictionZone").zoneManager.updateFromURL(a)},setupTargetLimit:function(a){if(!a){document.getElementById("targetValue").value=this.singleRoomTargetValue;document.getElementById("limitValue").value=""}else{if(a.startsWith("T")){document.getElementById("targetValue").value=a.substring(1);document.getElementById("limitValue").value=""}else{document.getElementById("targetValue").value=this.singleRoomTargetValue;document.getElementById("limitValue").value=a.substring(1)}}},setupExistingValues:function(b,e){var a=$J(".searchLimitDropDown");if(a){a.val(b);if(a[0]&&a[0].selectedIndex==-1){a[0].selectedIndex=0}}this.setupTargetLimit(a.val());var c=document.getElementById("roomsRestrictionValues");if(c.options.length>1&&!c.options[1].text){c.remove(1)}this.checkRestrictionValues(e)},tryExistingRestriction:function(a){var b=document.getElementsByClassName("restrictionDropDown")[0];b.value=a?a:"";if(b.selectedIndex==-1){b.selectedIndex=0}document.getElementById("restrictionValue").value=b.value},onRestrictionChange:function(a){document.getElementById("restrictionValue").value=a},copyPlaceholderOptions:function(){var c=document.getElementsByClassName("restrictionDropDown")[0];if(c.options.length==1&&(c.options[0].value==this.rstPlaceholderVal)){var f=document.getElementById("roomsRestrictionValues");c.options.length=0;for(var a=0;a<f.options.length;a++){var e=f.options[a];var b=document.createElement("OPTION");c.options.add(b);b.innerHTML=e.innerHTML;b.value=e.value}}},checkDisableDropdown:function(){var a=document.getElementsByClassName("restrictionDropDown")[0];if(a.options.length==1&&!a.options[0].value){a.setAttribute("disabled","disabled")}else{a.removeAttribute("disabled")}},checkRestrictionValues:function(a){this.copyPlaceholderOptions();this.checkDisableDropdown();if(typeof(a)==="undefined"){this.tryExistingRestriction(document.getElementById("restrictionValue").value)}else{this.tryExistingRestriction(a)}$J(".searchLimitDropDown").focus();this.setRestrictionTabIndex()},setRestrictionTabIndex:function(){(document.getElementsByClassName("restrictionDropDown")[0]).tabIndex=document.getElementById("rTabIndex").innerHTML}};var sboxRstManager=new SearchBoxRestrictionManager();var SuggestBox=Class.create();SuggestBox.prototype={initialize:function(b){this.textInputBox=null;this.dropDown=null;this.dataFetch=this.defaultDataFetch;this.submit=this.onSubmit;this.closeButton=true;this.closeLinkText="close";this.useMouseOut=false;this.resultCountColumn=false;this.closeTimeout=null;this.closeTimeoutTime=300;this.currentlyClosed=false;this.origText="";this.selectedRowIndex=null;for(var a in b){if(typeof(this[a])!="undefined"){this[a]=b[a]}}if(this.textInputBox==null||this.dropDown==null){alert("Script Error!")}Event.observe(this.textInputBox,"keyup",this.handleTextInputEvent.bindAsEventListener(this));Event.observe(this.textInputBox,"keydown",this.handleTextInputEvent.bindAsEventListener(this));Event.observe(this.textInputBox,"blur",this.handleTextInputEvent.bindAsEventListener(this));Event.observe(this.textInputBox,"focus",this.handleTextInputEvent.bindAsEventListener(this))},onSubmit:function(){alert("overwrite this to submit your form!")},defaultDataFetch:function(a){alert("overwrite this to fetch your data!");this.data=Array({suggestion:"hello",count:"5 results"},{suggestion:"world",count:"100000 results"},{suggestion:"how",count:"842 results"},{suggestion:"are",count:"57 results"},{suggestion:"you!",count:"9270 results"});a()},handleTextInputEvent:function(b){var a=this.textInputBox;switch(b.type){case"keydown":switch(b.keyCode){case 13:case 27:Event.stop(b);return false;default:break}break;case"keyup":switch(b.keyCode){case 9:this.origText=this.textInputBox.value;this.hideDropdown();break;case 13:this.origText=this.textInputBox.value;this.hideDropdown();this.submit();break;case 27:this.textInputBox.value=this.origText;this.hideDropdown();break;case 37:break;case 38:if(this.selectedRowIndex==null&&this.textInputBox.value!=""){if(!this.dropDown.className.toLowerCase().match("hidden")){this.origText=this.textInputBox.value;this.selectLastRow()}}else{if(this.selectedRowIndex!=null){this.selectPreviousRow()}}break;case 39:break;case 40:if(this.selectedRowIndex==null&&this.textInputBox.value!=""){if(this.dropDown.className.toLowerCase().match("hidden")&&this.data.length>0){this.createDropDown()}this.origText=this.textInputBox.value;this.selectFirstRow()}else{if(this.selectedRowIndex!=null){this.selectNextRow()}}break;default:this.dataFetch(this.handleKeyUpDefault.bind(this));break}break;case"blur":this.textInputBox.className="suggestFieldBlur";this.closeTimeout=window.setTimeout(this.hideDropdown.bind(this),this.closeTimeoutTime);break;case"focus":this.textInputBox.className="suggestFieldFocus";break;default:alert("el: "+a+", - "+b.type+" event not supported");break}},handleKeyUpDefault:function(){this.origText=this.textInputBox.value;if(this.textInputBox.value!=""&&!this.currentlyClosed&&this.data.length>0){this.createDropDown()}else{if(this.textInputBox.value==""){this.hideDropdown();this.currentlyClosed=false}else{if(this.data.length==0){this.hideDropdown()}}}},handleDropDownEvent:function(f){var a=Event.element(f);var c=a.getAttribute("rowind")*1;var b;switch(f.type){case"click":window.clearTimeout(this.closeTimeout);this.selectedRowIndex=c;b=this.dropDown.childNodes[this.selectedRowIndex];this.textInputBox.value=SDLib.getInnerText(b.childNodes[0]);this.origText=this.textInputBox.value;this.hideDropdown();this.submit();break;case"mouseover":if(this.selectedRowIndex!=null){b=this.dropDown.childNodes[this.selectedRowIndex];b.className="ddRowNotSelected"}this.selectedRowIndex=c;b=this.dropDown.childNodes[this.selectedRowIndex];b.className="ddRowSelected";break;case"mouseout":if(this.selectedRowIndex!=null){b=this.dropDown.childNodes[this.selectedRowIndex];b.className="ddRowNotSelected";this.selectedRowIndex=null}break;default:alert("el: "+a+", - "+f.type+" event not supported");break}},handleCloseEvent:function(){window.clearTimeout(this.closeTimeout);if(this.closeButton){this.textInputBox.value=this.origText;this.hideDropdown();var a=this.textInputBox.value.length;if(this.textInputBox.createTextRange){var b=this.textInputBox.createTextRange();b.move("character",a);b.select()}else{if(this.textInputBox.selectionStart){this.textInputBox.focus();this.textInputBox.setSelectionRange(a,a)}}}},selectPreviousRow:function(){var a;if((this.selectedRowIndex-1)>=0){a=this.dropDown.childNodes[this.selectedRowIndex];a.className="ddRowNotSelected";this.selectedRowIndex--;a=this.dropDown.childNodes[this.selectedRowIndex];this.textInputBox.value=SDLib.getInnerText(a.childNodes[0]);a.className="ddRowSelected"}else{if((this.selectedRowIndex-1)<0){this.textInputBox.value=this.origText;a=this.dropDown.childNodes[this.selectedRowIndex];a.className="ddRowNotSelected";this.selectedRowIndex=null}}},selectLastRow:function(){this.selectedRowIndex=this.dropDown.childNodes.length-1;if(this.closeButton){this.selectedRowIndex--}var a=this.dropDown.childNodes[this.selectedRowIndex];a.className="ddRowSelected";this.textInputBox.value=SDLib.getInnerText(a.childNodes[0])},selectNextRow:function(){var b;var a=this.dropDown.childNodes.length;if(this.closeButton){a--}if((this.selectedRowIndex+1)<a){b=this.dropDown.childNodes[this.selectedRowIndex];b.className="ddRowNotSelected";this.selectedRowIndex++;b=this.dropDown.childNodes[this.selectedRowIndex];this.textInputBox.value=SDLib.getInnerText(b.childNodes[0]);b.className="ddRowSelected"}else{if((this.selectedRowIndex+1)>=a){this.textInputBox.value=this.origText;b=this.dropDown.childNodes[this.selectedRowIndex];b.className="ddRowNotSelected";this.selectedRowIndex=null}}},selectFirstRow:function(){this.selectedRowIndex=0;var a=this.dropDown.childNodes[0];a.className="ddRowSelected";this.textInputBox.value=SDLib.getInnerText(a.childNodes[0])},hideDropdown:function(){this.selectedRowIndex=null;if(typeof ieVersion=="number"&&ieVersion==6){$("optionPicker").style.display="block"}this.dropDown.className="dropDownHidden"},createDropDown:function(){var c=this.dropDown.children;var b=this.dropDown.children.length;if(b>0){for(var i=0;i<b;i++){this.dropDown.removeChild(c[0])}}var g;var a;for(var e=0;e<this.data.length;e++){g=document.createElement("div");g.className="ddRowNotSelected";a=document.createElement("div");a.className="ddCell";a.setAttribute("rowind",e);if(this.resultCountColumn){a.appendChild(document.createTextNode(this.data[e].suggestion));g.appendChild(a);a=document.createElement("div");a.className="ddCellCount";a.setAttribute("rowind",e);a.appendChild(document.createTextNode(this.data[e].count))}else{a.appendChild(document.createTextNode(this.data[e]))}g.appendChild(a);Event.observe(g,"mouseover",this.handleDropDownEvent.bindAsEventListener(this));if(this.useMouseOut){Event.observe(g,"mouseout",this.handleDropDownEvent.bindAsEventListener(this))}Event.observe(g,"click",this.handleDropDownEvent.bindAsEventListener(this));g.setAttribute("rowind",e);this.dropDown.appendChild(g)}if(this.closeButton){g=document.createElement("div");g.className="ddRowClose";a=document.createElement("div");a.className="ddCellClose";var f=document.createElement("span");Event.observe(f,"click",this.handleCloseEvent.bindAsEventListener(this));f.className="ddCloseSpan";f.appendChild(document.createTextNode(this.closeLinkText));a.appendChild(f);g.appendChild(a);this.dropDown.appendChild(g)}this.dropDown.className="suggestDropDown";this.dropDown.style.width=$("q").offsetWidth-6+"px";if(ieVersion==-1){this.dropDown.style.margin="0px 0px 0px 0px !important"}if(ieVersion==8){this.dropDown.style.left=$("q").offsetLeft+"px"}if(ieVersion==7){this.dropDown.style.left=$("q").offsetLeft+"px"}if(ieVersion==6){this.dropDown.style.top=$("q").offsetHeight+30+"px";this.dropDown.style.left=$("q").offsetLeft+10+"px";$("optionPicker").style.display="none"}}};var templateSD={that:null,refreshSesionTimeoutMS:null,refreshSessionUrl:null,renewSession:null,refreshSessionHtml:null,refreshSessionAjaxError:null,redirectFunction:null,renewSession:false,isLoggedIn:false,init:function(){that=this},generateModal:function(){var a=$J("#refreshSessionModal");if(a.length==0){a=$J(this.refreshSessionHtml);a.dialog({autoOpen:false,title:"",modal:true,dynamicLoad:false,resizable:false}).bind("dialogclose",function(){$J(this).remove();that.renewSession=true;return false})}a.dialog("open");a.dialog("option","position",{my:"center",at:"center",of:window,collision:"none"})},promptRenewal:function(){that.renewSession=false;if(that.isLoggedIn){that.generateModal()}setTimeout(function(){if(that.renewSession){new Ajax.Request(that.refreshSessionUrl,{onSuccess:function(a){that.countDownRedirect()},onException:Tapestry.ajaxFailureHandler,onFailure:Tapestry.ajaxFailureHandler,asynchronous:true})}else{that.redirectFunction()}},60000)},countDownRedirect:function(){setTimeout(function(){that.promptRenewal()},that.refreshSesionTimeoutMS)}};var AjaxHandler=Class.create();AjaxHandler.prototype={initialize:function(e,c,f,i,g,a,b){this.url=c;this.callback=i;this.jsContext=g;this.bindingObject=b;this.production_mode=a;this.safe="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.:";if(e){Event.observe($(e),f,this.invokeAjax.bindAsEventListener(this))}},invokeAjax:function(c){var a=this.url;if(this.jsContext!=null){var f=this.jsContext(c);var e="";for(var b=0;b<f.length;b++){e+="/"+encodeAsTapestry(f[b])}a=addPathParams(a,e)}if(this.bindingObject!=null&&!this.production_mode){this.prototypeAjax(a,this.callback,this.bindingObject)}else{if(this.bindingObject!=null&&this.production_mode){this.prototypeNoErrorAjax(a,this.callback,this.bindingObject)}else{if(this.production_mode){this.noErrorAjax(a,this.callback)}else{Tapestry.ajaxRequest(a,this.callback)}}}},prototypeAjax:function(c,b,a){return new Ajax.Request(c,{onSuccess:function(f,g){if(!f.request.success()){Tapestry.ajaxError("Server request was unsuccesful. There may be a problem accessing the server.");return}try{b.call(a,f,g)}catch(i){Tapestry.ajaxError("Client exception processing response: "+i)}},onException:Tapestry.ajaxFailureHandler,onFailure:Tapestry.ajaxFailureHandler})},noErrorAjax:function(b,a){return new Ajax.Request(b,{onSuccess:function(c,f){if(!c.request.success()){Tapestry.ajaxError("Server request was unsuccesful. There may be a problem accessing the server.");return}try{a.call(this,c,f)}catch(g){g}},onException:Tapestry.ajaxFailureHandler,onFailure:Tapestry.ajaxFailureHandler})},prototypeNoErrorAjax:function(c,b,a){return new Ajax.Request(c,{onSuccess:function(f,g){if(!f.request.success()){Tapestry.ajaxError("Server request was unsuccesful. There may be a problem accessing the server.");return}try{b.call(a,f,g)}catch(i){i}},onException:Tapestry.ajaxFailureHandler,onFailure:Tapestry.ajaxFailureHandler})},encodeAsTapestry:function(a){if(a.length==0){return"$N"}var f="";var e=false;for(var b=0;b<a.length;b++){var c=a.charAt(b);if(this.safe.indexOf(c)!=-1){f+=c;continue}if(c=="$"){f+="$$";e=true;continue}f+="$"+this.atox(c);e=true}return e?f:a},atox:function(a){var b=a.charCodeAt().toString(16);if(b.length==1){return"000"+b}else{if(b.length==2){return"00"+b}else{if(b.length==3){return"0"+b}else{if(b.length>4){alert("Hex string larger than 4 length!!")}}}}return b}};var stIsIE=
/*@cc_on!@*/
false;var DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)(\s(\W\W)?(\d\d?):(\d\d?)\s?(\w\w)?)?$/;function go_go_gadget_sorttable(){sorttable={init:function(a){if(arguments.callee.done){return}arguments.callee.done=true;if(!document.createElement||!document.getElementsByTagName){return}var b=new RegExp("\\bsortable"+a+"\\b");forEach(document.getElementsByTagName("table"),function(c){if(c.className.search(b)!=-1){sorttable.makeSortable(c)}})},makeSortable:function(b){if(b.getElementsByTagName("thead").length==0){the=document.createElement("thead");the.appendChild(b.rows[0]);b.insertBefore(the,b.firstChild)}if(b.tHead==null){b.tHead=b.getElementsByTagName("thead")[0]}if(b.tHead.rows.length!=1){return}if(b.tBodies.length==0){return}sortbottomrows=[];for(var a=0;a<b.rows.length;a++){if(b.rows[a].className.search(/\bsortbottom\b/)!=-1){sortbottomrows[sortbottomrows.length]=b.rows[a]}}if(sortbottomrows){if(b.tFoot==null){tfo=document.createElement("tfoot");b.appendChild(tfo)}for(var a=0;a<sortbottomrows.length;a++){tfo.appendChild(sortbottomrows[a])}delete sortbottomrows}headrow=b.tHead.rows[0].cells;for(var a=0;a<headrow.length;a++){if(!headrow[a].className.match(/\bsorttable_nosort\b/)){mtch=headrow[a].className.match(/\bsorttable_([a-z0-9]+)\b/);if(mtch){override=mtch[1]}if(mtch&&typeof sorttable["sort_"+override]=="function"){headrow[a].sorttable_sortfunction=sorttable["sort_"+override]}else{headrow[a].sorttable_sortfunction=sorttable.guessType(b,a)}sortAnyInd=document.createElement("span");sortAnyInd.className="sorttable_sortAnyInd";sortAnyInd.innerHTML="<img src='/client/images/account-icons/sortable.png' class='checkoutsIcons' alt='Click to Sort'/>";headrow[a].appendChild(sortAnyInd);headrow[a].sorttable_columnindex=a;headrow[a].sorttable_tbody=b.tBodies[0];dean_addEvent(headrow[a],"click",function(i){if(this.className.search(/\bsorttable_sorted\b/)!=-1){sorttable.reverse(this.sorttable_tbody);this.className=this.className.replace("sorttable_sorted","sorttable_sorted_reverse");spanElements=this.getElementsByTagName("span");for(var c=spanElements.length;c-->0;){var g=spanElements[c];g.parentNode.removeChild(g)}sortrevind=document.createElement("span");sortrevind.id="sorttable_sortrevind";sortrevind.innerHTML="<img src='/client/images/account-icons/sort-asc.png' class='checkoutsIcons' alt='Sorted by Ascending'/>";this.appendChild(sortrevind);return}if(this.className.search(/\bsorttable_sorted_reverse\b/)!=-1){sorttable.reverse(this.sorttable_tbody);this.className=this.className.replace("sorttable_sorted_reverse","sorttable_sorted");spanElements=this.getElementsByTagName("span");for(var c=spanElements.length;c-->0;){var g=spanElements[c];g.parentNode.removeChild(g)}sortfwdind=document.createElement("span");sortfwdind.id="sorttable_sortfwdind";sortfwdind.innerHTML="<img src='/client/images/account-icons/sort-desc.png' class='checkoutsIcons' alt='Sorted by Descending' />";this.appendChild(sortfwdind);return}theadrow=this.parentNode;forEach(theadrow.childNodes,function(e){if(e.nodeType==1){e.className=e.className.replace("sorttable_sorted_reverse","");e.className=e.className.replace("sorttable_sorted","")}});sortfwdind=document.getElementById("sorttable_sortfwdind");if(sortfwdind){parNode=sortfwdind.parentNode;sortAnyInd=document.createElement("span");sortAnyInd.className="sorttable_sortAnyInd";sortAnyInd.innerHTML="<img src='/client/images/account-icons/sortable.png' class='checkoutsIcons' alt='Click to sort'/>";parNode.removeChild(sortfwdind);parNode.appendChild(sortAnyInd)}sortrevind=document.getElementById("sorttable_sortrevind");if(sortrevind){parNode=sortrevind.parentNode;sortAnyInd=document.createElement("span");sortAnyInd.className="sorttable_sortAnyInd";sortAnyInd.innerHTML="<img src='/client/images/account-icons/sortable.png' class='checkoutsIcons' alt='Click to sort'/>";parNode.removeChild(sortrevind);parNode.appendChild(sortAnyInd)}spanElements=this.getElementsByTagName("span");for(var c=spanElements.length;c-->0;){var g=spanElements[c];g.parentNode.removeChild(g)}this.className+=" sorttable_sorted";sortfwdind=document.createElement("span");sortfwdind.id="sorttable_sortfwdind";sortfwdind.innerHTML="<img src='/client/images/account-icons/sort-desc.png' class='checkoutsIcons' alt='Sorted by Descending'/>";this.appendChild(sortfwdind);row_array=[];col=this.sorttable_columnindex;rows=this.sorttable_tbody.rows;for(var f=0;f<rows.length;f++){row_array[row_array.length]=[sorttable.getInnerText(rows[f].cells[col]),rows[f]]}sorttable.shaker_sort(row_array,this.sorttable_sortfunction);tb=this.sorttable_tbody;for(var f=0;f<row_array.length;f++){tb.appendChild(row_array[f][1])}delete row_array})}}},guessType:function(c,b){sortfn=sorttable.sort_alpha;for(var a=0;a<c.tBodies[0].rows.length;a++){text=sorttable.getInnerText(c.tBodies[0].rows[a].cells[b]);if(text!=""){if(text.match(/^-?[\u00a3\u0024\u00a4]?[\d,.]+%?$/)){return sorttable.sort_numeric}possdate=text.match(DATE_RE);if(possdate){chineseSplit=text.split("-");if(chineseSplit.length>1){return sorttable.sort_yymmdd}else{first=parseInt(possdate[1]);second=parseInt(possdate[2]);if(first>12){return sorttable.sort_ddmm}else{if(second>12){return sorttable.sort_mmdd}else{sortfn=sorttable.sort_ddmm}}}}}}return sortfn},getInnerText:function(b){hasInputs=(typeof b.getElementsByTagName=="function")&&b.getElementsByTagName("input").length;if(b.getAttribute("sorttable_customkey")!=null){return b.getAttribute("sorttable_customkey")}else{if(typeof b.textContent!="undefined"&&!hasInputs){return b.textContent.replace(/^\s+|\s+$/g,"")}else{if(typeof b.innerText!="undefined"&&!hasInputs){return b.innerText.replace(/^\s+|\s+$/g,"")}else{if(typeof b.text!="undefined"&&!hasInputs){return b.text.replace(/^\s+|\s+$/g,"")}else{switch(b.nodeType){case 3:if(b.nodeName.toLowerCase()=="input"){return b.value.replace(/^\s+|\s+$/g,"")}case 4:return b.nodeValue.replace(/^\s+|\s+$/g,"");break;case 1:case 11:var c="";for(var a=0;a<b.childNodes.length;a++){c+=sorttable.getInnerText(b.childNodes[a])}return c.replace(/^\s+|\s+$/g,"");break;default:return""}}}}}},reverse:function(a){newrows=[];for(var b=0;b<a.rows.length;b++){newrows[newrows.length]=a.rows[b]}for(var b=newrows.length-1;b>=0;b--){a.appendChild(newrows[b])}delete newrows},sort_numeric:function(e,c){aa=parseFloat(e[0].replace(/[^0-9.-]/g,""));if(isNaN(aa)){aa=0}bb=parseFloat(c[0].replace(/[^0-9.-]/g,""));if(isNaN(bb)){bb=0}return aa-bb},sort_alpha:function(e,c){if(e[0].toLowerCase()==c[0].toLowerCase()){return 0}if(e[0].toLowerCase()<c[0].toLowerCase()){return -1}return 1},sort_ddmm:function(e,c){if(e[0]==""||isNaN(parseInt(e[0].charAt(0)))){if(c[0]==""||isNaN(parseInt(c[0].charAt(0)))){return 0}return -1}if(c[0]==""||isNaN(parseInt(c[0].charAt(0)))){return 1}mtch=e[0].match(DATE_RE);y=mtch[3];m=mtch[2];d=mtch[1];if(m.length==1){m="0"+m}if(d.length==1){d="0"+d}dt1=y+m+d+sorttable.format_time(mtch);mtch=c[0].match(DATE_RE);y=mtch[3];m=mtch[2];d=mtch[1];if(m.length==1){m="0"+m}if(d.length==1){d="0"+d}dt2=y+m+d+sorttable.format_time(mtch);if(dt1==dt2){return 0}if(dt1<dt2){return -1}return 1},sort_mmdd:function(e,c){if(e[0]==""||isNaN(parseInt(e[0].charAt(0)))){if(c[0]==""||isNaN(parseInt(c[0].charAt(0)))){return 0}return -1}if(c[0]==""||isNaN(parseInt(c[0].charAt(0)))){return 1}mtch=e[0].match(DATE_RE);y=mtch[3];d=mtch[2];m=mtch[1];if(m.length==1){m="0"+m}if(d.length==1){d="0"+d}dt1=y+m+d+sorttable.format_time(mtch);mtch=c[0].match(DATE_RE);y=mtch[3];d=mtch[2];m=mtch[1];if(m.length==1){m="0"+m}if(d.length==1){d="0"+d}dt2=y+m+d+sorttable.format_time(mtch);if(dt1==dt2){return 0}if(dt1<dt2){return -1}return 1},sort_yymmdd:function(e,c){if(e[0]==""||isNaN(parseInt(e[0].charAt(0)))){if(c[0]==""||isNaN(parseInt(c[0].charAt(0)))){return 0}return -1}if(c[0]==""||isNaN(parseInt(c[0].charAt(0)))){return 1}mtch=e[0].match(DATE_RE);y=mtch[1];d=mtch[3];m=mtch[2];if(m.length==1){m="0"+m}if(d.length==1){d="0"+d}dt1=y+m+d+sorttable.format_time(mtch);mtch=c[0].match(DATE_RE);y=mtch[1];d=mtch[3];m=mtch[2];if(m.length==1){m="0"+m}if(d.length==1){d="0"+d}dt2=y+m+d+sorttable.format_time(mtch);if(dt1==dt2){return 0}if(dt1<dt2){return -1}return 1},format_time:function(a){hour=a[7];minute=a[8];if(!hour){return"2359"}else{if(a[6]){am=a[6]}else{am=a[9]}if((am=="PM"||am=="\u4e0b\u5348")){if(hour!="12"){h=(parseInt(hour)+12).toString()}else{h=hour}}else{if(am&&hour=="12"){h="00"}else{h=hour;if(h.length==1){h="0"+h}}}if(!minute){mn="59"}else{mn=minute;if(mn.length==1){mn="0"+mn}}}return h+mn},shaker_sort:function(j,f){var a=0;var e=j.length-1;var k=true;while(k){k=false;for(var c=a;c<e;++c){if(f(j[c],j[c+1])>0){var g=j[c];j[c]=j[c+1];j[c+1]=g;k=true}}e--;if(!k){break}for(var c=e;c>a;--c){if(f(j[c],j[c-1])<0){var g=j[c];j[c]=j[c-1];j[c-1]=g;k=true}}a++}}}}function dean_addEvent(b,e,c){if(b.addEventListener){b.addEventListener(e,c,false)}else{if(!c.$$guid){c.$$guid=dean_addEvent.guid++}if(!b.events){b.events={}}var a=b.events[e];if(!a){a=b.events[e]={};if(b["on"+e]){a[0]=b["on"+e]}}a[c.$$guid]=c;b["on"+e]=handleEvent}}dean_addEvent.guid=1;function removeEvent(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.events&&a.events[c]){delete a.events[c][b.$$guid]}}}function handleEvent(e){var c=true;e=e||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var a=this.events[e.type];for(var b in a){this.$$handleEvent=a[b];if(this.$$handleEvent(e)===false){c=false}}return c}function fixEvent(a){a.preventDefault=fixEvent.preventDefault;a.stopPropagation=fixEvent.stopPropagation;return a}fixEvent.preventDefault=function(){this.returnValue=false};fixEvent.stopPropagation=function(){this.cancelBubble=true};if(!Array.forEach){Array.forEach=function(e,c,b){for(var a=0;a<e.length;a++){c.call(b,e[a],a,e)}}}Function.prototype.forEach=function(a,e,c){for(var b in a){if(typeof this.prototype[b]=="undefined"){e.call(c,a[b],b,a)}}};String.forEach=function(a,c,b){Array.forEach(a.split(""),function(f,e){c.call(b,f,e,a)})};var forEach=function(a,e,b){if(a){var c=Object;if(a instanceof Function){c=Function}else{if(a.forEach instanceof Function){a.forEach(e,b);return}else{if(typeof a=="string"){c=String}else{if(typeof a.length=="number"){c=Array}}}}c.forEach(a,e,b)}};