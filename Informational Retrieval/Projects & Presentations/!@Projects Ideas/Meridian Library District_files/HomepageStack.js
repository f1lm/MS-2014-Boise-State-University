var loadingMessage;function doNyTimesSetup(d,c){var b;var a=function(f){var e=Tapestry.findZoneManager("moreItemsZoneClicker");if(!e){return}e.processReply(f.responseJSON);b($J(".carouselItems").get(0).innerHTML,finalize)};$J("#jsCarousel").jsCarousel({autoscroll:true,delay:8000,prepareMore:function(f,g){if(f<c){var e=addPathParams(d,f);new AjaxHandler(null,e,null,a,null,true).invokeAjax();b=g}else{g()}}});$J("#most_popular_dialog").dialog({autoOpen:false,modal:true,height:"700",width:"900",resizable:false})}function finalize(){document.getElementById("nytimes_detail_wrapper").innerHTML+=$J(".bookItems").get(0).innerHTML}function openMostPopular(){$J("#most_popular_dialog").dialog({autoOpen:false,modal:true,height:"700",width:"900",resizable:false});$J("#most_popular_dialog").dialog("open")}function changeList(){bookRiverElement=document.getElementById("bookRiver");nytimes_selectElement=$J(".nytimes_select")[0];document.getElementById("nytimes_play_pause").click();$J("#hiddenInitialLoad .brLoadingMsg")[0].innerHTML=loadingMessage.replace("%s",nytimes_selectElement.options[nytimes_selectElement.selectedIndex].text);bookRiverElement.style.backgroundColor="inherit";bookRiverElement.style.display="inherit";bookRiverElement.innerHTML="";$J("#hiddenInitialLoad").show();document.getElementById("bookRiverWrapper").style.display="none";document.getElementById("listFormSubmit").click()}Tapestry.Initializer.progressiveDisplay=function(a){var b=new Tapestry.ZoneManager(a);b.updateFromURL.bind(b).defer(a.url)};function getRSSContext(){var b=document.getElementsByTagName("div");var d=b.length;var i="";for(var h=0;h<d;h++){var e=b[h];if(e.className=="rssItems"){var c=e.getElementsByTagName("span");var a=c.length;i+=e.id+"||";for(var g=0;g<a;g++){var f=c[g];if(f.className=="rssItemsUrl"){i+=f.innerHTML+"||"}else{if(f.className=="rssItemsCount"){i+=f.innerHTML+"||"}else{if(f.className=="rssItemsAge"){i+=f.innerHTML+"^^^"}}}}}}return[i]}function handleRSSReturn(c){var d=c.responseText.evalJSON();if(d.ids!=null){var g=d.ids.length;var f=0;var b=0;var h=d.links.length;var e="";for(var a=0;a<g;a++){e="";while(f<h&&d.links[f]!="||"){e+='<a href="'+d.links[f]+'">-&nbsp;&nbsp;&nbsp;'+d.titles[b]+"</a><br/>";f++;b++}f++;document.getElementById(d.ids[a]).innerHTML=e;document.getElementById(d.ids[a]).style.display="block"}}};