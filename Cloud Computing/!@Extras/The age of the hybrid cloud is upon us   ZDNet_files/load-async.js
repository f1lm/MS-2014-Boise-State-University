define(["jquery","version!fly/managers/debug","version!fly/components/base"],function(e,t){var n=t.get("loadAsync");e.widget("zdnet.loadAsync",e.fly.base,{options:{url:null,data:{},replace:!0,relocate:!1,insertBefore:!1,insertAfter:!1},_create:function(){var e=this.options;this._setup(),this.id=this.$element.attr("id"),this.id||(this.id="uid-"+Math.floor(Math.random()*1e5),this.$element.attr("id",this.id)),n.log("_create: ","container",this.id),this._load()},_load:function(){var t=this.options,r=this;n.log("_load: ","loading",r.id,t.url,t.data),e.ajax({type:"GET",dataType:"json",url:t.url,data:t.data}).done(e.proxy(this._handleSuccess,this)).fail(e.proxy(this._handleFailure,this))},_handleSuccess:function(t){var r=this.options,i=this;n.log("_handleSuccess: ","response success?",t.success,i.id);if(t.success&&t.html){if(r.replace)i.$element.replaceWith(t.html);else if(r.relocate&&e(r.relocate).length>0){var s=e(r.relocate)[0];r.insertBefore?e(t.html).insertBefore(s):r.insertAfter?e(t.html).insertAfter(s):e(t.html).prependTo(s)}else i.$element.html(t.html);i._trigger("contentSet",null,{content:i.$element})}else i._handleFailure(t)},_handleFailure:function(e){var t=this.options,r=this;n.log("_handleFailure: ","error message",e,r.id)}})})