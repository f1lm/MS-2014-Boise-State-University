var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},Handlebars.registerPartial=function(a,b){this.partials[a]=b},Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,e="",f=toString.call(a);f===functionType&&(a=a.call(this));if(a===!0)return d(this);if(a===!1||a==null)return c(this);if(f==="[object Array]"){if(a.length>0)for(var g=0,h=a.length;g<h;g++)e+=d(a[g]);else e=c(this);return e}return d(a)}),Handlebars.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;f<g;f++)e+=c(a[f]);else e=d(this);return e}),Handlebars.registerHelper("if",function(a,b){var c=toString.call(a);return c===functionType&&(a=a.call(this)),!a||Handlebars.Utils.isEmpty(a)?b.inverse(this):b.fn(this)}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse;return b.fn=d,b.inverse=c,Handlebars.helpers["if"].call(this,a,b)}),Handlebars.registerHelper("with",function(a,b){return b.fn(a)}),Handlebars.registerHelper("log",function(a){Handlebars.log(a)}),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:(d=this.programs[a]=Handlebars.VM.program(b),d)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){options={helpers:d,partials:e,data:f};if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,options);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");return e[b]=Handlebars.compile(a),e[b](c,options)}},Handlebars.template=Handlebars.VM.template,function(){var a=function(a,b,c,d,e){function l(a,b){var d="",e,f;return d+='\n    <div class="field hs-form-field">\n      <div id="captcha_wrapper"></div>\n    </div>\n    <script type="text/javascript">\n      Recaptcha.create("',f=c.captchaKey,f?e=f.call(a,{hash:{}}):(e=a.captchaKey,e=typeof e===i?e():e),d+=j(e)+'", "captcha_wrapper", { theme: "white" });\n    </script>\n    ',d}c=c||a.helpers;var f="",g,h,i="function",j=this.escapeExpression,k=this;f+='<div id="comment-form" class="new-comments">\n  <h4>Add a comment</h4>\n  <form id="blog-comment-form" class="hs-form new-comments" action="',h=c.action,h?g=h.call(b,{hash:{}}):(g=b.action,g=typeof g===i?g():g),f+=j(g)+'" method="post">\n    <div class="field hs-form-field">\n      <label>Name</label>\n      <div class="input">\n        <input class="hs-input" id="id_userName" type="text" name="userName" maxlength="100" placeholder="Name"/>\n      </div>\n    </div>\n\n    <div class="field hs-form-field">\n      <label>Email</label>\n      <div class="input">\n        <input class="hs-input" type="text" name="userEmail" id="id_userEmail" placeholder="Email"/>\n      </div>\n    </div>\n\n    <div class="field hs-form-field">\n      <label>Website</label>\n      <div class="input">\n        <input class="hs-input" type="text" name="userUrl" id="id_userUrl" placeholder="Website"/>\n      </div>\n    </div>\n\n    <div class="field hs-form-field comment-field">\n      <label>Comment</label>\n      <div class="input">\n        <textarea class="hs-input" id="id_comment" rows="10" cols="40" name="comment" placeholder="Your comment here..."></textarea>\n      </div>\n    </div>\n\n    <div class="field hs-form-field follow-up-field">\n      <div class="input">\n        <label for="id_follow_up">\n          <input id="id_follow_up" type="checkbox" name="subscribe" value="true" />\n          Subscribe to Follow Up Comments for this Post\n        </label>\n      </div>\n    </div>\n\n    <input type="hidden" id="id_portalId" name="portalId" value="',h=c.portalId,h?g=h.call(b,{hash:{}}):(g=b.portalId,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentId" name="contentId" value="',h=c.contentId,h?g=h.call(b,{hash:{}}):(g=b.contentId,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_collectionId" name="collectionId" value="',h=c.collectionId,h?g=h.call(b,{hash:{}}):(g=b.collectionId,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentAuthorEmail" name="contentAuthorEmail" value="',h=c.contentAuthorEmail,h?g=h.call(b,{hash:{}}):(g=b.contentAuthorEmail,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentAuthorName" name="contentAuthorName" value="',h=c.contentAuthorName,h?g=h.call(b,{hash:{}}):(g=b.contentAuthorName,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_comment_verification_text" name="comment_verification_text" value="',h=c.commentVerificationText,h?g=h.call(b,{hash:{}}):(g=b.commentVerificationText,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentTitle" name="contentTitle" value="',h=c.contentTitle,h?g=h.call(b,{hash:{}}):(g=b.contentTitle,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentPermalink" name="contentPermalink" value="',h=c.contentPermalink,h?g=h.call(b,{hash:{}}):(g=b.contentPermalink,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentCreatedAt" name="contentCreatedAt" value="',h=c.contentCreatedAt,h?g=h.call(b,{hash:{}}):(g=b.contentCreatedAt,g=typeof g===i?g():g),f+=j(g)+'" />\n\n    ',g=b.captchaRequired,g=c["if"].call(b,g,{hash:{},inverse:k.noop,fn:k.program(1,l,e)});if(g||g===0)f+=g;return f+='\n\n    <div class="hs_submit">\n      <div class="actions">\n        <input id="add-comment-button" type="submit" class="hs-button primary" value="Submit Comment" />\n      </div>\n    </div>\n  </form>\n</div><!-- end comment-form -->\n',f};if(typeof define!="function"||!define.amdj)return this.Handlebars.templates||(this.Handlebars.templates={}),this.Handlebars.templates.comment_form=Handlebars.template(a);define(["Handlebars"],function(){return Handlebars.template(a)})}.call(this),function(){var a=function(a,b,c,d,e){function l(a,b){var d="",e,f;return d+='\n    <div class="field hs-form-field">\n      <div id="captcha_wrapper"></div>\n    </div>\n    <script type="text/javascript">\n      hsjQuery(window).load(function() {\n        Recaptcha.create("',f=c.captchaKey,f?e=f.call(a,{hash:{}}):(e=a.captchaKey,e=typeof e===i?e():e),d+=j(e)+'", "captcha_wrapper", { theme: "white" });\n      });\n    </script>\n    ',d}c=c||a.helpers;var f="",g,h,i="function",j=this.escapeExpression,k=this;f+='<div id="comment-form" class="new-comments">\n    <input type="hidden" id="id_portalId" name="portalId" value="',h=c.portalId,h?g=h.call(b,{hash:{}}):(g=b.portalId,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentId" name="contentId" value="',h=c.contentId,h?g=h.call(b,{hash:{}}):(g=b.contentId,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_collectionId" name="collectionId" value="',h=c.collectionId,h?g=h.call(b,{hash:{}}):(g=b.collectionId,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentAuthorEmail" name="contentAuthorEmail" value="',h=c.contentAuthorEmail,h?g=h.call(b,{hash:{}}):(g=b.contentAuthorEmail,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentAuthorName" name="contentAuthorName" value="',h=c.contentAuthorName,h?g=h.call(b,{hash:{}}):(g=b.contentAuthorName,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_comment_verification_text" name="comment_verification_text" value="',h=c.commentVerificationText,h?g=h.call(b,{hash:{}}):(g=b.commentVerificationText,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentTitle" name="contentTitle" value="',h=c.contentTitle,h?g=h.call(b,{hash:{}}):(g=b.contentTitle,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentPermalink" name="contentPermalink" value="',h=c.contentPermalink,h?g=h.call(b,{hash:{}}):(g=b.contentPermalink,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_contentCreatedAt" name="contentCreatedAt" value="',h=c.contentCreatedAt,h?g=h.call(b,{hash:{}}):(g=b.contentCreatedAt,g=typeof g===i?g():g),f+=j(g)+'" />\n    <input type="hidden" id="id_formGuid" name="formGuid" value="',h=c.formId,h?g=h.call(b,{hash:{}}):(g=b.formId,g=typeof g===i?g():g),f+=j(g)+'" />\n\n    ',g=b.captchaRequired,g=c["if"].call(b,g,{hash:{},inverse:k.noop,fn:k.program(1,l,e)});if(g||g===0)f+=g;return f+="\n\n</div><!-- end comment-form -->\n\n<script type=\"text/javascript\">\n  var shuffleForm = function() {\n    hsjQuery('#comment-form input[type=hidden]').appendTo('#comment-form form');\n    hsjQuery('#comment-form form').attr('action', '",h=c.action,h?g=h.call(b,{hash:{}}):(g=b.action,g=typeof g===i?g():g),f+=j(g)+"');\n    hsjQuery('#captcha_wrapper').parent().insertBefore('#comment-form form input[type=submit]');\n  }\n\nhsjQuery(window).load(function() {\n  hbspt.forms.create({\n    portalId: '",h=c.portalId,h?g=h.call(b,{hash:{}}):(g=b.portalId,g=typeof g===i?g():g),f+=j(g)+"',\n    formId: '",h=c.formId,h?g=h.call(b,{hash:{}}):(g=b.formId,g=typeof g===i?g():g),f+=j(g)+"',\n    target: '#comment-form',\n    redirectUrl: 'http://www.hubspot.com/contact-sales/thanks/',\n    pageId: '23423',\n    pageName: 'My great landing page',\n    css: '.your-custom-css {background-color: #fe7722}',\n    requiredCss: '.my-custom-error-msgs {border-radius: 3px;}',\n    submitButtonClass: 'hs-button primary',\n    onFormReady: shuffleForm\n  });\n});\n</script>\n",f};if(typeof define!="function"||!define.amdj)return this.Handlebars.templates||(this.Handlebars.templates={}),this.Handlebars.templates.comment_form_forms=Handlebars.template(a);define(["Handlebars"],function(){return Handlebars.template(a)})}.call(this),function(){var a=function(a,b,c,d,e){function k(a,b){var d="",e;d+='\n    <div class="comment depth-',e=a.depth,e=typeof e===h?e():e,d+=i(e)+'" data-threadid="',e=a.threadId,e=typeof e===h?e():e,d+=i(e)+'">\n        <div class="comment-from">\n          <h4>\n            ',e=a.userUrl,e=c["if"].call(a,e,{hash:{},inverse:j.program(4,m,b),fn:j.program(2,l,b)});if(e||e===0)d+=e;d+='\n          </h4>\n        </div>\n        <div class="comment-date">',e=a.createdAt,e=typeof e===h?e():e,d+=i(e)+'</div>\n        <div class="comment-body"><p>',e=a.comment,e=typeof e===h?e():e,d+=i(e)+"</p></div>\n        ",e=a.canReply,e=c["if"].call(a,e,{hash:{},inverse:j.noop,fn:j.program(6,n,b)});if(e||e===0)d+=e;return d+="\n      </div>\n",d}function l(a,b){var c="",d;return c+='\n            <a href="',d=a.userUrl,d=typeof d===h?d():d,c+=i(d)+'" rel="nofollow" target="_blank">',d=a.userName,d=typeof d===h?d():d,c+=i(d)+"</a>\n            ",c}function m(a,b){var c="",d;return c+="\n            ",d=a.userName,d=typeof d===h?d():d,c+=i(d)+"\n            ",c}function n(a,b){var c="",d;return c+='\n          <button class="comment-reply-to hs-button secondary">Reply to <em>',d=a.userName,d=typeof d===h?d():d,c+=i(d)+"</em></button>\n        ",c}c=c||a.helpers;var f="",g,h="function",i=this.escapeExpression,j=this;g=b.comments,g=c.each.call(b,g,{hash:{},inverse:j.noop,fn:j.program(1,k,e)});if(g||g===0)f+=g;return f+="\n",f};if(typeof define!="function"||!define.amdj)return this.Handlebars.templates||(this.Handlebars.templates={}),this.Handlebars.templates.comment_list=Handlebars.template(a);define(["Handlebars"],function(){return Handlebars.template(a)})}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;x={isSaving:!1},a={local:"http://localhost:8002/comments/v3",qa:"https://api.hubapiqa.com/comments/v3",prod:"https://api.hubapi.com/comments/v3"},n=typeof hsjQuery!="undefined"&&hsjQuery!==null?hsjQuery:jQuery,b=function(b){return a[b]},c=function(a){return""+b(a)+"/comments/thread"},d=function(a,c){return""+b(a)+"/comment?portalId="+c},window.hsEmbedComments=function(a){var b;return a.timestamp=a.timestamp?a.timestamp:(new Date).getTime(),b=n.extend(!0,{},e,a),o(b),h(b),q(b),l(),k(),u()},h=function(a){if(!a.showComments)return;return n.ajax(c(a.apiEnv),{dataType:"jsonp",type:"GET",data:a,jsonpCallback:"callback",error:function(a,b,c){var d;d="Error getting comments from API: "+b;if(c)return d+="; "+c},success:function(b,c,d){return p(a,b)}})},p=function(a,b){var c,d,e,f,h,j,k,l,m;c=n(a.target),f=[],m=b.objects;for(k=0,l=m.length;k<l;k++)e=m[k],j=(new Date(e.createdAt)).toLocaleString(),d=e.comment.replace(/\n/g,"<br/>"),f.push({userUrl:g(e.userUrl),userName:e.userName,comment:new Handlebars.SafeString(d),threadId:e.threadId,createdAt:j,depth:i(e.threadId),canReply:i(e.threadId)<a.maxThreadDepth&&a.showForm});return h=Handlebars.templates.comment_list({comments:f}),c.append(h)},g=function(a){return a&&a.indexOf("http")!==0?"http://"+a:a},q=function(a){var b,c,e,f;if(a.showForm)return c=d(a.apiEnv,a.portalId),f=a.formId?Handlebars.templates.comment_form_forms:Handlebars.templates.comment_form,e=f(n.extend(!0,a,{action:c})),b=n(a.target),b.after(e),n("form#blog-comment-form.new-comments").submit(t)},t=function(a){var b;return n("form#blog-comment-form.new-comments .hs-common-error-message").remove(),n("form#blog-comment-form.new-comments .hs-common-confirm-message").remove(),x.isSaving?!1:w()?v()?!0:(a.preventDefault(),a.stopPropagation(),x.isSaving=!0,n('form#blog-comment-form.new-comments input[type="submit"]').val("Saving..."),b={portalId:Number(n("#id_portalId").val()),contentId:Number(n("#id_contentId").val()),collectionId:Number(n("#id_collectionId").val()),userName:n("#id_userName").val(),userEmail:n("#id_userEmail").val(),userUrl:n("#id_userUrl").val(),comment:n("#id_comment").val(),contentTitle:n("#id_contentTitle").val(),contentPermalink:n("#id_contentPermalink").val(),contentAuthorEmail:n("#id_contentAuthorEmail").val(),contentAuthorName:n("#id_contentAuthorName").val(),contentCreatedAt:n("#id_contentCreatedAt").val()},n.ajax(n("form#blog-comment-form.new-comments").attr("action"),{headers:{"Content-Type":"application/json",Accept:"application/json"},data:JSON.stringify(b),dataType:"json",type:"POST",error:function(a){return n('form#blog-comment-form.new-comments input[type="submit"]').val("Submit"),s(a.message,!0),x.isSaving=!1},success:function(a,b,c){return n('form#blog-comment-form.new-comments input[type="submit"]').val("Submit"),s(n("#id_comment_verification_text").val()+'<span id="hs-added-comment-id" style="display:none">'+a.id+"</span>",!1),x.isSaving=!1,n("input#add-comment-button").addClass("hidden"),n("form#blog-comment-form.new-comments .field").hide("slow")}}),!1):!1},w=function(){var a;return a=[],n("#id_userName").val()||a.push("Name is required"),n("#id_userEmail").val()?n("#id_userEmail").val().indexOf("@")===-1&&a.push("Email address is not valid"):a.push("Email is required"),n("#id_comment").val()||a.push("Comment is required"),r(a)},r=function(a){return a.length>0?(a.unshift("One or more errors occurred:"),s(a.join("<br/>&bull; "),!0),!1):!0},l=function(){var a,b;if(a=f("unsubscribed",!0))return b="Successfully unsubscribed "+a+"!",s(b,!1,n(".body-container"))},k=function(){var a,b;b=f("success",!0),a=f("error");if(b)return s(n("#id_comment_verification_text").val(),!1);if(a)return r(a)},u=function(){return n("body").on("click",".comment-reply-to",function(){var a,b;b=n(this).parents(".comment");if(!b)return;return a=n("#comment-form"),n(".comment-reply-to").show(),a.find("input[name=replyingTo]").remove(),a.hide(),n("#comment-form").addClass("replying"),n("#comment-form > h4").text("Replying to "+n(this).find("em").html()),n("#id_userName").focus(),a.insertAfter(b),a.show(),a.find("form").append(n('<input type="hidden" name="replyingTo" value="'+b.data("threadid")+'"/>')),n(this).hide(),n("html, body").animate({scrollTop:a.offset().top})})},i=function(a){var b,c,d,e,f;c=a.split("."),b=-1;for(e=0,f=c.length;e<f;e++){d=c[e];if(d==="0000")return b;b++}return b},v=function(){var a;return a=f("submitViaForm",!0),!0},m=function(){return"withCredentials"in new XMLHttpRequest},o=function(a){var b,c,d,e;return b=a.css,c=j(),c?(document.createStyleSheet().cssText=b,e="ieMakesMeCry"):(d=document.createElement("STYLE"),d.type="text/css",d.innerHTML=b,document.getElementsByTagName("HEAD")[0].appendChild(d))},j=function(){var a,b,c,d;c=void 0,d=3,b=document.createElement("div"),a=b.getElementsByTagName("i");for(;;){b.innerHTML="<!--[if gt IE "+ ++d+"]><i></i><![endif]-->";if(!a[0])break}return d>4?d:c},s=function(a,b,c){var d,e;return d=c||n("#comment-form.new-comments"),e=n("<div></div>"),b?e.addClass("hs-common-error-message"):e.addClass("hs-common-confirm-message"),e.html(a),d.prepend(e),n("html, body").animate({scrollTop:d.offset().top})},f=function(a,b){var c,d,e;e=new RegExp("[?&]"+a+"=([^&]+)(?=&|$)","g"),d=[];while((c=e.exec(location.search))!==null)d.push(decodeURIComponent(c[1].replace(/\+/g," ")));return d.length===0?null:b?d[0]:d},e={portalId:null,collectionId:null,contentId:null,css:".comment-reply-to{background:url(https://static2cdn.hubspot.com/pictos_images/static-1.6/img/pictos-1-png/16/pictos-set1-21.png) no-repeat 5px;border:0;padding-left:25px;color:#333}.replying{padding-left:2em}.comment-from,.comment-date{display:inline-block}.comment-from h4{font-size:1.2em;font-weight:700}.comment-date{font-size:.8em;color:#666}#comment-form h4{font-size:1.4em}.comment.depth-0{border-top:2px solid #eee;padding-top:2em;margin-top:2em}.comment.depth-0:first-child{margin-top:0}.comment.depth-1{padding-left:2em}.comment.depth-2{padding-left:4em}.comment.depth-3{padding-left:6em}.comment.depth-4{padding-left:8em}.comment.depth-5{padding-left:10em}.comment.depth-6{padding-left:12em}.comment.depth-7{padding-left:14em}.comment.depth-8{padding-left:16em}.comment.depth-9{padding-left:18em}.shuffle{display:none}.hs_subscribe ul{padding-left:0}.hs_subscribe li{list-style:none}",maxThreadDepth:3}}.call(this),function(){}.call(this);