(function(){_weq["webengage.enableCallbacks"]=true;_weq["webengage._gaTracker"]=(webengage_fs_configurationMap._gaTracker?webengage_fs_configurationMap._gaTracker+".":"")+"_trackEvent";var d=_weq["webengage.ga.gtm"]||false;var c=_weq["GA.universalAnalyticsFunction"]||"ga";var h=webengage_fs_configurationMap._gaTracker||"";var g=function(j){var i;if(j){if(d){i=window[c].getAll()[0].get("trackingId")}else{window[c](function(k){i=k.get("trackingId")})}}else{i=window._gat._getTrackerByName(h)._getAccount()}return i};var f=function(k){var i="",j=false;if(_weq["GA.universalAnalyticsFunction"]||typeof ga!=="undefined"){if(typeof window[c]==="function"){j=true;i=g(true);if(i===k){return true}}}if(window._gaq&&window._gat){i=g(false);if(i===k){return false}}return j};var e=false;var b=function(){if(!e){var j=window[c].getAll()[0].get("clientId");var i=g(true);if(j&&i){window[c]("create",i,{clientId:j});e=true}}};function a(k,j,i,l,m){if(f(_weq["webengage.ga.trackerId"])){if(d){b()}window[c]("send","event",{eventCategory:k,eventAction:j,eventLabel:i,eventValue:l,nonInteraction:(typeof m==="boolean"&&m?1:0)})}else{if(window._gaq){window._gaq.push([_weq["webengage._gaTracker"],k,j,i,l,(typeof m==="boolean"&&m?true:false)])}}}_weq["gaq.push"]=function(j,i){webengage.withELog(function(){switch(j){case"survey":webengage.survey.attachEventListner(i,function(k){webengage.withELog(function(){switch(i){case"submit":var m=k.questionResponses;var l=function(q){if(q instanceof Array){return q.join(",")}else{return webengage.util.stringify(q)}};if(m&&m.length>0){for(var n=0;n<m.length;n++){var p=m[n];var o="";if(p.value){switch(p.value["@class"]){case"text":o=p.value.text;break;case"file":o=p.value.fileName+" | "+p.value.fileSize;break;case"score":o=p.value.value;break;default:o=l(p.value.values);break}}a("WebEngage-Survey","survey-question-response ( "+o+" )","Question [S:"+k.surveyId+"] [Q:"+p.questionId+"] "+p.questionText)}}break;default:if(i==="complete"){a("WebEngage-Survey","survey-"+i,"Survey [S:"+k.surveyId+"] "+k.title,k.questionResponses.length)}a("WebEngage-Survey","survey-"+i,"Survey [S:"+k.surveyId+"] "+k.title,undefined,true);break}},null,true)});break;case"notification":webengage.notification.attachEventListner(i,function(k){webengage.withELog(function(){if(i==="open"){a("WebEngage-Notification","notification-"+i,"Notification [N:"+k.notificationId+"] "+k.title,undefined,true)}else{a("WebEngage-Notification","notification-"+i,"Notification [N:"+k.notificationId+"] "+k.title)}},null,true)});break;case"feedback":webengage.feedback.attachEventListner(i,function(k){webengage.withELog(function(){switch(i){case"submit":var l=k.fields;var n="Anonymous";for(var m in l){if(l[m]&&l[m].value){var o=l[m].value;if(o["@class"]==="email"){n=o.text;break}}}a("WebEngage-Feedback","feedback-submit","By "+n);break;default:a("WebEngage-Feedback","feedback-"+i);break}},null,true)});break}},null,true)};_weq["webengage.gaEvents"]={feedback:["open","submit"],survey:["open","close","submit","complete"],notification:["open","close","click"]};webengage.withELog(function(){for(var k in _weq["webengage.gaEvents"]){for(var j=0;j<_weq["webengage.gaEvents"][k].length;j++){_weq["gaq.push"](k,_weq["webengage.gaEvents"][k][j])}}},null,true)})();