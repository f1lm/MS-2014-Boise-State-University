(function(e,t){sumo.define("plugins/css",[],function(){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var s,o=function(){s=document.createElement("style"),e.appendChild(s)},u=function(e,t){o();var n=s.styleSheet||s.sheet;if(n&&n.addImport)n.addImport(e),s.onload=t;else{s.textContent='@import "'+e+'";';var r=setInterval(function(){try{s.sheet.cssRules,clearInterval(r),t()}catch(e){}},10)}},a=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet";if(r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(s),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?u:a)(t.toUrl(e+".css"),r)},i}),sumo.define("selectorator",["jquery"],function(e){var t,n,r,i,s,o,u,a;return u=e.map,s=e.extend,o=e.inArray,r=function(e,t){return o(e,t)!==-1},i=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},n=function(e,t){return u(e,function(e){return e===t?null:e})},a=function(e){return u(e,function(t,n){return parseInt(n,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,n){this.element=t,this.options=s(s({},e.selectorator.options),n),this.cachedResults={}}return t.prototype.query=function(t){var n;return(n=this.cachedResults)[t]||(n[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){if(this.element[0])return this.element[0].tagName.toLowerCase()=="span"&&this.getIgnore("class")&&r(this.element.attr("class"),this.getIgnore("class"))?this.hasParent()?this.element.parent()[0].tagName.toLowerCase():null:this.element[0].tagName.toLowerCase();return null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},t.prototype.isElement=function(){var e;return e=this.element[0],e&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,n,i){var s,o;n==null&&(n=!0),i==null&&(i=!1),o=this.query(e);if(n&&1<o.size()||!n&&0===o.size()){if(!t||e.indexOf(":")!==-1)return null;s=i?" > ":" ",e=t+s+e,o=this.query(e);if(n&&1<o.size()||!n&&0===o.size())return null}return r(this.element[0],o.get())?e:null},t.prototype.generate=function(){var e,t,r,i,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];t=[],s=[this.generateSimple,this.generateAncestor,this.generateRecursive];for(r=0,i=s.length;r<i;r++){e=s[r],t=a(n(e.call(this)));if(t&&t.length>0)return t}return a(t)},t.prototype.generateText=function(){var e,t,r,i,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];t=[],s=[this.generateTextSelector];for(r=0,i=s.length;r<i;r++){e=s[r],t=a(n(e.call(this)));if(t&&t.length>0)return t}return a(t)},t.prototype.generateAncestor=function(){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;o=[],v=this.element.parents();for(f=0,h=v.length;f<h;f++){r=v[f],n=!0,a=this.generateSimple(null,!1);for(l=0,p=a.length;l<p;l++){u=a[l],s=(new t(e(r),this.options)).generateSimple(null,!1);for(c=0,d=s.length;c<d;c++)i=s[c],e.merge(o,this.generateSimple(i,!0,n))}n=!1}return o},t.prototype.generateSimple=function(e,t,r){var i,s,o,a,f,l,c,h;o=this,a=o.getProperTagName(),f=function(n){return o.validate(n,e,t,r)},h=[[o.getIdSelector],[o.getClassSelector],[o.getIdSelector,!0],[o.getClassSelector,!0],[o.getNameSelector],[function(){return[o.getProperTagName()]}]];for(l=0,c=h.length;l<c;l++){i=h[l],s=i[0].call(o,i[1])||[],s=n(u(s,f));if(s.length>0)return s}return[]},t.prototype.generateTextSelector=function(e,t,r){var i,s,o,u,a,f,l,c;o=this,u=o.getProperTagName(),a=function(n){return o.validate(n,e,t,r)},c=[[o.getIdSelector],[o.getTextSelector,!0],[function(){return[o.getProperTagName()]}]];for(f=0,l=c.length;f<l;f++){i=c[f],s=i[0].call(o,i[1])||[],s=n(s);if(s.length>0)return s}return[]},t.prototype.generateRecursive=function(){var e,n,r,i;return i=this.getProperTagName(),i.indexOf(":")!==-1&&(i="*"),n=this.element.parent(),r=(new t(n)).generate()[0],e=n.children(i).index(this.element),i=""+i+":eq("+e+")",r!==""&&(i=r+" > "+i),[i]},t.prototype.getIdSelector=function(e){var t;return e==null&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),typeof t=="string"&&t.trim().length&&!r(t,this.getIgnore("id"))&&t.indexOf("yui")!=0?[""+e+"#"+i(t)]:null},t.prototype.getTextSelector=function(n){var r="";if(this.hasParent()){var i=this.element.parent()[0];n=n?i.tagName.toLowerCase():"",i=e(i);var s=i.text();typeof s=="string"&&s.length>0&&(r=n+":similar("+s+")")}var o=this.element.prev();if(o.length){var u=(new t(o)).generateSimple(null,!1);u&&(r+=" > "+u)}return r?[r]:null},t.prototype.getClassSelector=function(e){var t,n,s;return e==null&&(e=!1),s=this.getProperTagName(),/^(body|html)$/.test(s)?null:(e=e?s:"",n=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),u(t,function(t){return t&&!r(t,n)?""+e+"."+i(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!r(e,this.getIgnore("name"))?[""+t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,n,r;return n=this.options.ignore||{},t=e==="class"?"classes":""+e+"s",r=n[e]||n[t],typeof r=="string"?[r]:r},t}(),e.selectorator={options:{},unique:a,clean:n,escapeSelector:i},e.fn.selectorator=function(n){return new t(e(this),n)},e.fn.getSelector=function(e){return this.selectorator(e).generate()},e.fn.getTextSelector=function(e){return this.selectorator(e).generateText()},this}),sumo.define("jquery.similar",["jquery"],function(e){String.prototype.levenshtein=function(e){var t=new Array,n=e,r=this,i=n.length,s=this.length,o,u,a=function(e,t,n){var r=e;return t<r&&(r=t),n<r&&(r=n),r};if(i==0)return;if(s==0)return;for(var o=0;o<=i;o++)t[o]=new Array;for(o=0;o<=i;o++)t[o][0]=o;for(u=0;u<=s;u++)t[0][u]=u;for(o=1;o<=i;o++){var f=n.charAt(o-1);for(u=1;u<=s;u++){var l=r.charAt(u-1);f==l?t[o][u]=t[o-1][u-1]:t[o][u]=1+a(t[o-1][u-1],t[o][u-1],t[o-1][u])}}return t[i][s]},e.fn.textExcept=function(t){if(!this.get(0)||e.inArray(this.get(0).nodeName.toLowerCase(),["script"])!=-1)return"";try{var n=e(this).contents().filter(function(){return e(this).is(t)!=1}).map(function(){if(this.nodeType==1&&e.inArray(this.nodeName.toLowerCase(),["script"])==-1)return e(this).textExcept(t);if(this.nodeType==3)return e.trim(this.data)}).get().join("");return n}catch(r){}return""},e.expr[":"].similar=e.expr.createPseudo(function(t){return function(n){var r=e(n).textExcept(".sumome-leads-edit").replace(/[^0-9a-zA-Z\s.,]/g,"").substr(0,128);return r&&r.levenshtein(t.substr(0,128))<5}})}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/service",["jquery","selectorator","jquery.similar"],function(e){return function(t){var n=!1,r=!1,i=0,s=function(e){var t=(new Date).getTime();while((new Date).getTime()<t+e);},o=function(){if(r)return;e(document).on("mousedown.sumome-heatmaps",function(n){if(n.which!=1)return;var r,i,o;if(document.elementFromPoint)i=document.elementFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint)r=document.caretPositionFromPoint(n.clientX,n.clientY),i=r.offsetNode,o=r.offset;else{if(!document.caretRangeFromPoint)return;r=document.caretRangeFromPoint(n.clientX,n.clientY),i=r.startContainer,o=r.startOffset}if(e(i).closest(".sumome-control").length>0||e(i).closest(".sumome-heatmaps").length>0)return;o=e(i).offset();if(!(!!o&&"left"in o&&"top"in o))return;o.left=n.pageX-o.left,o.top=n.pageY-o.top;var u=.05,a=o.left/e(i).outerWidth(),f=o.top/e(i).outerHeight();a=(Math.round(a/u)*u).toFixed(2),f=(Math.round(f/u)*u).toFixed(2);var l={left:a,top:f},c=e(i).getSelector()[0];if(!c||isNaN(l.left)||isNaN(l.top)||!isFinite(l.left)||!isFinite(l.top))return;var h={site_id:t.properties.siteId,selector:c,x:l.left,y:l.top,path:window.location.pathname+window.location.search,_:Math.random()},p=e("<img />").css({display:"none"}).attr("src",t.properties.sumoUrl+"/apps/heatmaps/click?"+e.param(h));p.on("error",function(){e(this).remove()}),p.on("load",function(){e(this).remove()}),e(document.body).append(p),n.target&&"href"in n.target&&n.target.href&&n.target.href.indexOf("#")!==0&&n.target.href.toLowerCase().indexOf("javascript")!=0&&s(500)}),r=!0},u=function(){if(!r)return;e(document).off("mousedown.sumome-heatmaps"),r=!1},a=function(){e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:t.properties.sumoUrl+"/apps/heatmaps/status",data:{site_id:t.properties.siteId,path:window.location.pathname+window.location.search},success:function(e){var r=!0;e.success?(n=e.campaign!=null&&e.campaign.finished_at==null,i=e.count,r=e.track_all_users):n=!1,t.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:n,campaignCount:i}),n&&(r==1||r==0&&t.properties.user==null)?o():u()}})},f=function(e,r){t.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/checkStatus",function(){t.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:n,campaignCount:i})}),t.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start",function(){a()}),t.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop",function(){a()}),a(),r()},l=function(e){e()};return{init:f,destroy:l}}}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/service",function(){})})(undefined,undefined);