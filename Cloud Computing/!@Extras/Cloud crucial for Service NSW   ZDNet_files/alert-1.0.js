define(["jquery","version!fly/managers/debug","managers/user","version!fly/components/base"],function(e,t,n){var r=e.support.touch?"vclick":"click",i=t.init("alert");e.widget("zdnet.alert",e.fly.base,{options:{alertFormAction:"/members/alerts/add/"},_create:function(){this._setup(),this._setupEvents()},_setupEvents:function(){var t={};t[r+".add_alert"]="_handleSubmit",this._on(this.$document,t),e(".add_alert",this.$document).css("visibility","visible")},_handleSubmit:function(t){t.preventDefault();var r=e(t.currentTarget),i=this.options;n.hasAccess({nextAction:function(){alertSubject=r.attr("data-alert-subject"),alertUrl=r.attr("data-alert-url");var t=e('<form method="post" action="'+i.alertFormAction+'"></form>');return t.html('<input type="hidden" name="subject" value="'+alertSubject+'" /><input type="hidden" name="rss_url" value="'+alertUrl+'" />'),t.appendTo(e("body")),t.submit(),!1}})}})})