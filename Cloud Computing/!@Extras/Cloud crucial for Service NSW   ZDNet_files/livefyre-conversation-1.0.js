define(["jquery","version!fly/managers/debug","version!fly/components/base"],function(e,t){var n=t.init("livefyre");e.widget("fly.livefyreConversation",e.fly.base,{options:{urlLogin:"/user/login",urlLogout:"/user/logout",userToken:null,globalConfig:{},commentStreamConfigs:[{}]},conversation:null,authDelegate:{login:function(e){n.log("authDelegate login"),this._trigger("login"),window.location=this.options.urlLogin},logout:function(e){n.log("authDelegate logout"),this._trigger("logout"),window.location=this.options.urlLogout},viewProfile:function(e,t){n.log("authDelegate editProfile: ",t),this._trigger("viewProfile"),window.open(t.profileUrl)},editProfile:function(e,t){n.log("authDelegate editProfile: ",t),this._trigger("editProfile"),window.open(t.settingsUrl)}},events:{initialRenderComplete:e.noop,commentPosted:e.noop,commentFlagged:e.noop,commentLiked:e.noop,commentShared:e.noop,commentCountUpdated:e.noop,userLoggedIn:e.noop,userLoggedOut:e.noop},_create:function(t){var r=this,i=r.options;this._setup(),require(["livefyre"],function(){e.each(r.authDelegate,function(t,n){r.authDelegate[t]=e.proxy(n,this)}),i.globalConfig.authDelegate=e.extend(new fyre.conv.RemoteAuthDelegate,r.authDelegate),r.conversation=fyre.conv.load(i.globalConfig,[i.commentStreamConfigs],function(t){e.ajax({url:"/livefyre/user-token/xhr/"}).done(function(e){e.userToken&&fyre.conv.login(e.userToken)}),e.each(r.events,function(e,i){t.on(e,function(t){i.call(r,t),r._trigger(e,null,t),n.log(e+": ",t)})})})})}})})