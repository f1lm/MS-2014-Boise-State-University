if(!jQuery.parseNumber)
/*! 
* Note:  Microsoft Corporation is not the original author of this script 
* file. Microsoft obtained the original file from 
* http://plugins.jquery.com/project/numberformatter under the license that is referred 
* to below. That license and the other notices below are provided for 
* informational purposes only and are not the license terms under which 
* Microsoft distributes the file.  Microsoft grants you the right to use the 
* file solely to interact through your browser with the Microsoft web site 
* hosting the file, subject to that web siteï¿½s terms of use. Unless 
* applicable law gives you more rights, Microsoft reserves all other rights 
* and grants no additional rights, whether by implication, estoppel or 
* otherwise. 
* 
* jquery.numberformatter - Formatting/Parsing Numbers in jQuery 
* Written by Michael Abernethy (mike@abernethysoft.com) 
* 
* Originally obtained under the MIT License. 
* 
* Date: 1/26/08 
* 
* @author Michael Abernethy 
* @version 1.1.0 
* 
* MIT License 
* 
* Permission is hereby granted, free of charge, to any person obtaining 
* a copy of this software and associated documentation files (the 
* "Software"), to deal in the Software without restriction, including 
* without limitation the rights to use, copy, modify, merge, publish, 
* distribute, sublicense, and/or sell copies of the Software, and to 
* permit persons to whom the Software is furnished to do so, subject to 
* the following conditions: 
* 
* The above copyright notice and this permission notice shall be 
* included in all copies or substantial portions of the Software. 
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE 
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION 
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION 
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 
**/
(function(n){function i(n,t,i){this.dec=n,this.group=t,this.neg=i}function t(n){var r=".",t=",",u="-";return n=="us"||n=="ae"||n=="eg"||n=="il"||n=="jp"||n=="sk"||n=="th"||n=="cn"||n=="hk"||n=="tw"||n=="au"||n=="ca"||n=="gb"||n=="in"?(r=".",t=","):n=="de"||n=="vn"||n=="es"||n=="dk"||n=="at"||n=="gr"||n=="br"?(r=",",t="."):n=="cz"||n=="fr"||n=="fi"||n=="ru"||n=="se"?(t=" ",r=","):n=="ch"&&(t="'",r="."),new i(r,t,u)}n.formatNumber=function(i,r){var r=n.extend({},n.fn.parse.defaults,r),f=t(r.locale.toLowerCase()),o=f.dec,s=f.group,e=f.neg,u=new String(i);return u=u.replace(".",o).replace("-",e)},n.fn.parse=function(i){var i=n.extend({},n.fn.parse.defaults,i),r=t(i.locale.toLowerCase()),e=r.dec,f=r.group,s=r.neg,o="1234567890.-",u=[];return this.each(function(){var t=new String(n(this).text()),h,c,r,i;for(n(this).is(":input")&&(t=new String(n(this).val()));t.indexOf(f)>-1;)t=t.replace(f,"");for(t=t.replace(e,".").replace(s,"-"),h="",c=!1,t.charAt(t.length-1)=="%"&&(c=!0),r=0;r<t.length;r++)o.indexOf(t.charAt(r))>-1&&(h=h+t.charAt(r));i=new Number(h),c&&(i=i/100,i=i.toFixed(h.length-1)),u.push(i)}),u},n.fn.format=function(i){var i=n.extend({},n.fn.format.defaults,i),f=t(i.locale.toLowerCase()),e=f.dec,r=f.group,u=f.neg,o="0#-,.";return this.each(function(){var p=new String(n(this).text()),c,nt,v,s,f,it,tt,w,l,a,d,g,b,t;for(n(this).is(":input")&&(p=new String(n(this).val())),c="",nt=!1,t=0;t<i.format.length;t++)if(o.indexOf(i.format.charAt(t))==-1)c=c+i.format.charAt(t);else if(t==0&&i.format.charAt(t)=="-"){nt=!0;continue}else break;for(v="",t=i.format.length-1;t>=0;t--)if(o.indexOf(i.format.charAt(t))==-1)v=i.format.charAt(t)+v;else break;for(i.format=i.format.substring(c.length),i.format=i.format.substring(0,i.format.length-v.length);p.indexOf(r)>-1;)p=p.replace(r,"");if(s=new Number(p.replace(e,".").replace(u,"-")),v=="%"&&(s=s*100),f="",it=s%1,i.format.indexOf(".")>-1){var k=e,y=i.format.substring(i.format.lastIndexOf(".")+1),h=new String(it.toFixed(y.length));for(h=h.substring(h.lastIndexOf(".")+1),t=0;t<y.length;t++)if(y.charAt(t)=="#"&&h.charAt(t)!="0"){k+=h.charAt(t);continue}else if(y.charAt(t)=="#"&&h.charAt(t)=="0")if(tt=h.substring(t),tt.match("[1-9]")){k+=h.charAt(t);continue}else break;else y.charAt(t)=="0"&&(k+=h.charAt(t));f+=k}else s=Math.round(s);if(w=Math.floor(s),s<0&&(w=Math.ceil(s)),l="",w==0)l="0";else for(a="",a=i.format.indexOf(".")==-1?i.format:i.format.substring(0,i.format.indexOf(".")),d=new String(Math.abs(w)),g=9999,a.lastIndexOf(",")!=-1&&(g=a.length-a.lastIndexOf(",")-1),b=0,t=d.length-1;t>-1;t--)l=d.charAt(t)+l,b++,b==g&&t!=0&&(l=r+l,b=0);f=l+f,s<0&&nt&&c.length>0?c=u+c:s<0&&(f=u+f),i.decimalSeparatorAlwaysShown||f.lastIndexOf(e)==f.length-1&&(f=f.substring(0,f.length-1)),f=c+f+v,n(this).is(":input")?n(this).val(f):n(this).text(f)})},n.fn.parse.defaults={locale:"us",decimalSeparatorAlwaysShown:!1},n.fn.format.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1}})(jQuery),function(n,t,i){var c,d,g,tt,rt,v,w,ut,y,ft,it,nt,st,p,ht,et,ot,h,a,k,o,l,u,f,b=Array.prototype.slice,e=function(n,t){return function(){return n.apply(t,arguments)}},ct=Object.prototype.hasOwnProperty,s=function(n,t){function r(){this.constructor=n}for(var i in t)ct.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};o=n.console,typeof o=="undefined"&&(l=function(){},o={log:l,warn:l,assert:l,clear:l,dir:l,error:l,info:l,profile:l,profileEnd:l}),u={achievementsEarned:"Achievements Earned",avatar:"Avatar of ${DisplayName}",header:{},recentAchievements:"Recent Achievements",recognitionPoints:"Points",learnHow:"No Achievements Earned. <a>Learn How!</a>",learnHowLink:function(){var n;return n='<a href="http://${$item.settings.brand}.microsoft.com/ff395928.aspx#How_do_I_earn_achievements" class="profile-usercard-profileLink" target="_blank">',u.learnHow.replace("<a>",n)},leaderboardEmpty:"No leaderboard results available at this time.",viewProfile:"View Profile",boostProfile:"Boost your online profile",joined:"Joined ",notableAchievements:"Notable Achievements",recentActivity:"Recent Activity: ",topPercentile:"Top",uploadImage:"Upload an image",userPoint:"Point",userPoints:"Points",goToProfile:"Go to ${DisplayName}'s profile",showActivity:"Show Activity"},u.header["all time"]="all time",u.header.day="last day",u.header.days="last %d days",u.header.hour="last hour",u.header.hours="last %d hours",u.header.week="last week",u.header.weeks="last %d weeks",u.header["activities completed"]="activities completed",u.header["points earned"]="points earned",u.achievementsEarned="Achievements Earned",u.avatar="Avatar of ${DisplayName}",u.learnHow="No Achievements Earned. <a>Learn How!</a>",u.recentAchievements="Recent Achievements",u.recognitionPoints="Points",u.viewProfile="View Profile",u.leaderboardEmpty="No leaderboard results available at this time.",u.header["all time"]="all time",u.header.day="last day",u.header.days="last %d days",u.header.hour="last hour",u.header.hours="last %d hours",u.header.week="last week",u.header.weeks="last %d weeks",u.header["activities completed"]="activities completed",u.header["points earned"]="points earned",u.boostProfile="Boost your online profile",u.joined="Joined ",u.notableAchievements="Notable Achievements",u.recentActivity="Recent Activity: ",u.topPercentile="Top",u.uploadImage="Upload an image",u.userPoint="Point",u.userPoints="Points",u.goToProfile="Go to ${DisplayName}'s profile",u.showActivity="Show activity",f={animationSpeed:100,brand:"msdn",host:n.location.host,lang:"en",largeImageDimension:135,leaderboardDataUri:"/v1/leaderboard/",scanDelay:250,search:"",statGroupDataUri:"/v1/statGroup/",userDataUri:"/v1/user/usercard/",userDataBatchSize:50,widgetImageUri:"/v1/resources/widget.png",hideDelay:250,showDelay:750,version:"debug",protocol:n.location.protocol},f.brand="msdn",f.lang="en-US",f.host="widgets.services.microsoft.com:80",f.search="?brand=msdn&lang=en-US&_=1418199744504&ver=4.9.0.0",f.version="4.9.0.0",f.protocol="http:",c={LogMetric:function(t,i){var f,u,r,e;if(n.appInsights){if(u=this.getBaseMetricObject,i)for(r=0,e=i.length;r<e;r++)f=i[r],u[f]=i[f];appInsights.logEvent(t,u)}return!0},getBaseMetricObject:function(){var n;return n={currentUrl:t.URL,referrer:t.referrer}}},h={resolve:function(n){return f.protocol+"//"+f.host+n},resolveStatic:function(n){return this.resolve(n)+f.search},createDataUri:function(){var n,t;return n=arguments[0],t=2<=arguments.length?b.call(arguments,1):[],n=""+h.resolve(n)+(t!=null?t.sort().join(","):void 0),n+("?lang="+f.lang+"&brand="+f.brand)},createQSDataUri:function(){var n,t;return n=arguments[0],t=2<=arguments.length?b.call(arguments,1):[],n=""+h.resolve(n)+"?id="+(t!=null?t.sort().join(","):void 0),n+("&lang="+f.lang+"&brand="+f.brand)},createStatGroupDataUri:function(n,t,i){var r;return r=h.createDataUri(f.statGroupDataUri,n),r+("&filterLocale="+t+"&filterUserId="+i)},createUsercardDataUri:e(function(){var n;return n=1<=arguments.length?b.call(arguments,0):[],h.createQSDataUri(f.userDataUri,n)},this),createLeaderboardDataUri:e(function(){var n;return n=1<=arguments.length?b.call(arguments,0):[],h.createDataUri(f.leaderboardDataUri,n)},this),createWidgetImageUri:function(){return h.resolve(f.widgetImageUri+"?v="+f.version)}},y={scaleImage:function(n,t){var r,f,u;return r=i(n),f={x:r.width(),y:r.height()},u=this.getXDimension(f,t),r.css("width",u),r.css("display","inline-block")},getXDimension:function(n,t){var r,i;return n.x<=t&&n.y<=t?n.x:(i=n.x>=n.y?n.x:n.y,r=t/i,Math.floor(n.x*r))}},ot={ellipsify:function(n,t){return n.length<=t?n:(o.log("ellipsify"),n.substr(0,t-3).concat("..."))}},w=function(){function n(n,t,i,r,u){this.dataIdName=n,this.inline=t,this.selector=i,this.template=r,this.templateName=u,this.warn}return n.prototype.canonicalizeId=function(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()},n.prototype.findIds=function(n){var e,u,t,o,r,s,f;for(u=[],f=i(this.selector,n),r=0,s=f.length;r<s;r++)o=f[r],e=i(o).attr(this.dataIdName),e?(t=this.canonicalizeId(e),i(o).attr(this.dataIdName,t),i.inArray(t,u)===-1&&u.push(t)):this.warn('Missing required attribute "'+this.dataIdName+'"');return u},n.prototype.onDataLoaded=function(){return this.abstractWarn()},n.prototype.showAll=function(){return this.abstractWarn()},n.prototype.showWidget=function(){return this.abstractWarn()},n.prototype.abstractWarn=function(){return this.warn("You must implement this abstract class method.")},n.prototype.warn=function(n){return o.warn("Profile [BaseWidgetRegistration]: "+n)},n}(),a=function(){function n(n,t,r,u,f){this.dataIdName=n,this.inline=t,this.selector=r,this.template=u,this.templateName=f,this.foundIds=[],i.template(this.templateName,this.template)}return s(n,w),n.prototype.onDataLoaded=function(n){var t;return t=this,i(""+this.selector+"[data-profile-usercard-customLink]").each(function(){var u,r;return u=i(this).attr("data-profile-usercard-customLink"),r=i(this).attr("data-profile-userid"),t.setCustomLink(n,r,u)})},n.prototype.setCustomLink=function(n,t,r){if(n&&n[t])try{n[t].customLink=i.parseJSON(r)}catch(u){o.warn("Profile [UsercardRegistration]: Invalid JSON in data-profile-usercard-customLink")}else o.warn("Profile [UsercardRegistration]: Failed to set custom link; user does not exist in data")},n.prototype.showAll=function(n){return i(this.selector).each(e(function(t,i){return this.showWidget(i,n)},this))},n.prototype.showWidget=function(n,t){var r,s,u,f,e;if(r=i(n),r.length===0&&o.warn("Profile [UsercardRegistration]: Widget not found in DOM"),e=typeof r.attr("data-profile-rendered")!="undefined",!e)return f=r.attr(this.dataIdName),f?(u=t(this.dataIdName,f),u?(u.Content=r.html(),u.Rank=r.attr("data-profile-rank"),u.UserId=f,this.inline&&r.html(""),s=i(this.bindTemplate(u)).appendTo(r),r.attr("data-profile-rendered","true")):o.warn("Profile [UsercardRegistration]: Usercard does not exist in data.")):o.warn('Profile [UsercardRegistration]: Expected id in attribute "'+this.dataIdName+'".')},n.prototype.bindTemplate=function(n){var u,t,r;return t=parseFloat(n.PercentileRankings),r=t>=1?0:1,u={settings:f,ellipsify:ot.ellipsify,useDataUri:f.supportsDataUri,PercentileRankingsFormatted:t.toLocaleString(f.lang,{maximumFractionDigits:r})},i.tmpl(this.templateName,n,u)},n.prototype.warn=function(n){return o.warn("Profile [UsercardRegistration]: "+n)},n.prototype.usercardTemplate='<div class="profile-usercard">            <div class="profile-header">                <span class="profile-userimage">                    {{if $item.useDataUri }}                        <img src="data:image/jpg;base64,${AvatarData}" alt="'+u.avatar+'">                    {{else}}                        <img src="${Avatar}" alt="'+u.avatar+'">                    {{/if}}                </span>                <div>                    <p title="${DisplayName}" class="profile-display-name">${$item.ellipsify(DisplayName, 32)}</p>                {{if Company}}                    <p class="profile-company">${$item.ellipsify(Company, 27)}</p>                {{/if}}                    <p class="profile-affiliations">${Affiliations}</p>                </div>            </div>            <div class="profile-points-bar">                <span class="profile-points">${Points}<span class="points-label"> '+u.recognitionPoints+'</span></span>                <span class="profile-count profile-bronze-points"><span class="profile-bronze-img" title="'+u.achievementsEarned+'"></span><span>${Achievements.Bronze}</span></span>                <span class="profile-count profile-silver-points"><span class="profile-silver-img" title="'+u.achievementsEarned+'"></span><span>${Achievements.Silver}</span></span>                <span class="profile-count profile-gold-points"><span class="profile-gold-img" title="'+u.achievementsEarned+'"></span><span>${Achievements.Gold}</span></span>                        </div>            <div class="profile-achievements-header">                <span class="profile-achievements-title">'+u.recentAchievements+'</span>            </div>            <div class="profile-achievements-recent">                <div class="profile-achievements-centering">                    {{if Achievements.Recent && Achievements.Recent.length > 0}}                        {{each Achievements.Recent}}                    <span class="profile-achievement profile-achievement-${Medal}"><span>${Title}</span></span>                        {{/each}}                    {{else}}                        <div class="profile-achievement-none">'+u.learnHowLink()+'</div>                    {{/if}}                </div>            </div>            <div class="profile-footer">                {{if customLink}}                    <a href="${customLink.href}" title="${customLink.text}" class="profile-usercard-custom-link" target="_blank">${customLink.text}</a>                {{/if}}                <a href="${Profile}?ws=usercard-hover" class="profile-usercard-profileLink" target="_blank">'+u.viewProfile+"</a>            </div>        </div>",n}(),ut=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!1,".profile-usercard-hover",this.usercardTemplate,"usercardTemplate"),this.canHide=!1,i(this.selector).live("mouseenter",e(function(n){return this.onMouseEnter(n)},this)),i(this.selector).live("mouseleave",e(function(n){return this.onMouseLeave(n)},this))}return s(n,a),n.prototype.onMouseEnter=function(n){var r,u,t;return t=n.currentTarget,r=i(t),r.data("canHide","no"),u=e(function(){if(r.data("canHide")!=="yes")return r.data("data-profile-rendered")||this.showWidget(t,this.getData),i(".profile-usercard",t).fadeIn(f.animationSpeed),this.canHide=!1,c.LogMetric("Widget.HoverUserCard")},this),setTimeout(u,f.showDelay)},n.prototype.onMouseLeave=function(n){var t;return i(n.currentTarget).data("canHide","yes"),this.canHide=!0,t=e(function(){if(i(n.currentTarget).data("canHide")==="yes")return i(".profile-usercard",n.currentTarget).fadeOut(f.animationSpeed)},this),setTimeout(t,f.hideDelay)},n}(),v=function(){function n(n,t,r,u,f){this.dataIdName=n,this.inline=t,this.selector=r,this.template=u,this.templateName=f,this.foundIds=[],i.template(this.templateName,this.template),this.baseHeader,this.baseBody,this.compactHeader}return s(n,a),n.prototype.showWidget=function(t,r){return n.__super__.showWidget.call(this,t,r),i(t).find(".textfill")&&i(t).find("div.textsize").textfill(),i(t).find(".profile-userimage-large > img").bind("load",function(n){return y.scaleImage(n.currentTarget,f.largeImageDimension)}).each(function(){if(this.complete)return y.scaleImage(this,f.largeImageDimension)})},n.baseHeader='<div class="baseball-card-header">\t        <table style="border-collapse: collapse;">\t        <tr>\t\t        <td style="padding-left: 0px;">\t\t\t        <div>                \t\t\t\t        <a id="baseball-card-userimage" class="crop" href="${Profile}">                            <span class="imageHelper"></span>\t\t\t\t\t        <img src="${LargeAvatar}" alt=" '+u.avatar+' " title=" '+u.goToProfile+' "/>\t\t\t\t        </a>\t\t\t        </div>\t\t        </td>\t\t        <td>\t\t\t        <div class="baseball-card-summary">\t\t\t\t        <div class="baseball-card-point-count">\t\t\t\t\t        <div class="textsize" style="width:96px; height:36px; text-align:center">\t\t\t\t\t\t        <span>${Points}</span>\t\t\t\t\t        </div>\t\t\t\t        </div>\t\t\t\t        {{if Points == 1}}\t\t\t\t\t        <div class="baseball-card-points-label">'+u.userPoint+'</div>\t\t\t\t        {{else}}\t\t\t\t\t        <div class="baseball-card-points-label">'+u.userPoints+'</div>\t\t\t\t        {{/if}}\t\t\t\t        {{if PercentileRankings <= 50.0}}\t\t\t\t\t        <div class="baseball-card-percentile" style.display="none">'+u.topPercentile+" ${$item.PercentileRankingsFormatted}</div>\t\t\t\t        {{/if}}\t\t\t        </div>\t\t        </td>\t        </tr>\t        </table>        </div>",n.compactHeader='<div class="baseball-card-compact-header">\t\t    <table style="border-collapse: collapse;">\t\t    <tr>\t\t\t    <td style="padding-left: 0px;">\t\t\t\t    <div>                \t\t\t\t\t    <a id="baseball-card-userimage" class="crop baseball-card-compact-userimage" href="${Profile}">                            <span class="imageHelper"></span>\t\t\t\t\t\t    <img src="${LargeAvatar}" alt="'+u.avatar+' " title="'+u.goToProfile+' "/>\t\t\t\t\t    </a>\t\t\t\t    </div>\t\t\t    </td>\t\t\t    <td>\t\t\t\t    <div class="baseball-card-summary">\t\t\t\t\t    <table style="border-collapse: collapse;">\t\t\t\t\t    <tr>\t\t\t\t\t\t    <td>\t\t\t\t\t\t\t    <div class="baseball-card-point-count">\t\t\t\t\t\t\t\t    <div class="textsize" style="max-width:100px;height:41px; padding-right:5px; padding-left:5px;">\t\t\t\t\t\t\t\t\t    <span>${Points}</span>\t\t\t\t\t\t\t\t    </div>\t\t\t\t\t\t\t    </div>\t\t\t\t\t\t    </td>\t\t\t\t\t\t    <td style="width:100%; margin:3px; padding-top:5px">\t\t\t\t\t\t\t    {{if Points == 1}}\t\t\t\t\t\t\t\t    <div class="baseball-card-points-label">'+u.userPoint+'</div>\t\t\t\t\t\t\t    {{else}}\t\t\t\t\t\t\t\t    <div class="baseball-card-points-label">'+u.userPoints+'</div>\t\t\t\t\t\t\t    {{/if}}\t\t\t\t\t\t\t    {{if PercentileRankings <= 50.0}}\t\t\t\t\t\t\t\t    <div class="baseball-card-percentile" style.display="none">'+u.topPercentile+" ${$item.PercentileRankingsFormatted}</div>\t\t\t\t\t\t\t    {{/if}}\t\t\t\t\t\t    </td>\t\t\t\t\t    </tr>\t\t\t\t\t    </table>\t\t\t\t    </div>\t\t\t    </td>\t\t    </tr>\t\t    </table>\t    </div>",n.baseBody='<table class="table" style="width:100%; table-layout: fixed; border-collapse: collapse;">        <tr>\t        <td colspan="2" style="padding-bottom: 0px; padding-left: 0px;">\t\t        <a href="${Profile}" id="displayName" title="'+u.goToProfile+'" class="baseball-card-display-name" target="_blank">${DisplayName}</a>\t        </td>        </tr>        <tr>\t        <td style="padding-top: 0px;">\t\t        <span class="baseball-card-affiliate-company" title="${Affiliations}">${Affiliations}</span>\t        </td>\t        <td>\t\t        <span class="baseball-card-joined" class="ahenih">'+u.joined+' ${JoinedDate}</span>\t        </td>        </tr>        <tr>\t        <td colspan="2" style="padding-bottom: 10px;">\t\t        <!--<span class="baseball-card-recent-activity">'+u.recentActivity+' <span class="timeago" title="${RecentActivityDate}">${RecentActivityDate}</span></span>-->            </td>        </tr>        <tr>\t        <td>\t\t        <div class="baseball-card-medals">\t\t\t        {{if Achievements.Gold > 0}}\t\t\t\t        <span class="baseball-card-gold-img">\t\t\t\t\t        <p>${Achievements.Gold}</p>\t\t\t\t        </span>\t\t\t        {{/if}} \t\t\t        {{if Achievements.Silver > 0}}\t\t\t\t\t\t\t\t\t        <span class="baseball-card-silver-img">\t\t\t\t\t        <p>${Achievements.Silver}</p>\t\t\t\t        </span>\t\t\t\t\t\t\t\t        {{/if}} \t\t\t        {{if Achievements.Bronze > 0}}\t\t\t\t\t\t\t\t\t        <span class="baseball-card-bronze-img">\t\t\t\t\t        <p>${Achievements.Bronze}</p>\t\t\t\t        </span>\t\t\t\t\t\t\t\t        {{/if}}\t\t        </div>\t        </td>\t        <td>\t\t        <div style="float:right;">\t\t\t        <div style="padding-bottom: 9px;">\t\t\t        {{if customLink}}\t\t\t\t        <a href="${customLink.href}" target="_blank" title="${customLink.text}" class="baseball-card-custom-link">${customLink.text}</a>\t\t\t\t    {{/if}}\t\t\t        </div>\t\t\t        <div>\t\t\t\t        <a href="${Profile}activity" target="_blank" class="baseball-card-user-activity"> '+u.showActivity+"</a>\t\t\t        </div>\t\t        </div>\t        </td>        </tr>        </table>",n}(),d=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!0,".unified-baseball-card",this.bbCardBaseCardTemplate,"bbCardBaseCardTemplate")}return s(n,v),n.prototype.showWidget=function(t,i){return n.__super__.showWidget.call(this,t,i),c.LogMetric("Widget.BBUnifiedUserCard")},n.prototype.bbCardBaseCardTemplate=""+n.baseHeader+"        "+n.baseBody,n}(),g=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!0,".unified-baseball-card-compact",this.bbCardBaseCardCompactTemplate,"bbCardBaseCardCompactTemplate")}return s(n,v),n.prototype.showWidget=function(t,i){return n.__super__.showWidget.call(this,t,i),c.LogMetric("Widget.BBCompactUserCard")},n.prototype.bbCardBaseCardCompactTemplate=""+n.compactHeader+"        "+n.baseBody,n}(),tt=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!1,".unified-baseball-card-compact-hover",this.bbCardBaseCardCompactHoverTemplate,"bbCardBaseCardCompactHoverTemplate"),this.canHide=!1,i(this.selector).live("mouseenter",e(function(n){return this.onMouseEnter(n)},this)),i(this.selector).live("mouseleave",e(function(n){return this.onMouseLeave(n)},this))}return s(n,v),n.prototype.onMouseEnter=function(n){var r,u,t;return t=n.currentTarget,r=i(t),r.data("canHide","no"),u=e(function(){if(r.data("canHide")!=="yes")return r.data("data-profile-rendered")||this.showWidget(t,this.getData),i(".unified-baseball-card-compact-whole",t).fadeIn(f.animationSpeed),i("div.textsize").textfill(),this.canHide=!1,c.LogMetric("Widget.BBHoverUserCard")},this),setTimeout(u,f.showDelay)},n.prototype.onMouseLeave=function(n){var t;return i(n.currentTarget).data("canHide","yes"),this.canHide=!0,t=e(function(){if(i(n.currentTarget).data("canHide")==="yes")return i(".unified-baseball-card-compact-whole",n.currentTarget).fadeOut(f.animationSpeed)},this),setTimeout(t,f.hideDelay)},n.prototype.showWidget=function(t,i){return n.__super__.showWidget.call(this,t,i)},n.prototype.bbCardBaseCardCompactHoverTemplate='<div class="unified-baseball-card-compact-whole">'+n.compactHeader+"        "+n.baseBody+"</div>",n}(),rt=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!1,".unified-baseball-card-mini",this.bbCardMiniTemplate,"bbCardMiniTemplate")}return s(n,v),n.prototype.showWidget=function(t,r){var u,f;if(!i(".profile-mini",t).length)return u=i(t),f=u.html(),u.html(""),n.__super__.showWidget.call(this,t,r),u.find(".profile-mini-content").html(f)},n.prototype.bbCardMiniTemplate='<div class="profile-mini">            <div class="profile-mini-header">            <div class="profile-mini-userimage">            {{if $item.useDataUri }}                <img src="data:image/jpg;base64,${AvatarData}" alt="'+u.avatar+'">            {{else}}                <img src="${Avatar}" alt="'+u.avatar+'">            {{/if}}            </div>            <div class="profile-mini-container">                <div class="profile-mini-display-name"><div class="unified-baseball-card-compact-hover" data-profile-userid="${UserId}"><a href="${Profile}?ws=usercard-mini" class="profile-mini-display-name-link" target="_blank">${DisplayName}</a></div></div>            {{if Company}}                <div class="profile-mini-company">${$item.ellipsify(Company, 27)}</div>            {{/if}}                <div class="profile-mini-affiliations">                {{if Affiliations}}                    (${Affiliations})                {{/if}}                </div>                <span class="profile-mini-points">${Points}<span class="points-label"> '+u.recognitionPoints+'</span></span>                </div>                <div class="profile-mini-content">                </div>            </div>        </div>',n}(),ft=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!0,".profile-usercard-inline",this.inlineTemplate,"inlineTemplate")}return s(n,a),n.prototype.showWidget=function(t,r){return n.__super__.showWidget.call(this,t,r),i(t).find(".profile-userimage-large > img").bind("load",function(n){return y.scaleImage(n.currentTarget,f.largeImageDimension)}).each(function(){if(this.complete)return y.scaleImage(this,f.largeImageDimension)}),c.LogMetric("Widget.InlineUserCard")},n.prototype.inlineTemplate='<div class="profile-usercard profile-inline">            <div class="profile-inline-header">                <span class="profile-userimage-large">                    <img src="${LargeAvatar}" alt="'+u.avatar+'" />                </span>                <div class="profile-inline-header-details">                    <div title="${DisplayName}" class="profile-inline-display-name">${$item.ellipsify(DisplayName, 32)}</div>            {{if Company}}                    <div class="profile-company profile-inline-secondary">${$item.ellipsify(Company, 27)}</div>            {{/if}}                    <div class="profile-affiliations profile-inline-secondary">${Affiliations}</div>            {{if Website}}                    <div class="profile-inline-url profile-inline-secondary">                        <a title="${Website}" href="${Website}" target="_blank">${$item.ellipsify(Website.replace("http://", "").replace("https://", ""), 22)}</a></div>            {{/if}}                </div>            </div>            <div class="profile-statline">                <span class="profile-points">${Points}<span class="points-label"> '+u.recognitionPoints+'</span></span>                <span class="profile-count profile-bronze-points"><span class="profile-bronze-img" title="'+u.achievementsEarned+'"></span><span>${Achievements.Bronze}</span></span>                <span class="profile-count profile-silver-points"><span class="profile-silver-img" title="'+u.achievementsEarned+'"></span><span>${Achievements.Silver}</span></span>                <span class="profile-count profile-gold-points"><span class="profile-gold-img" title="'+u.achievementsEarned+'"></span><span>${Achievements.Gold}</span></span>            </div>                        <div class="profile-biography">{{if Biography}}${Biography}{{/if}}</div>                        <div class="profile-footer">                {{if customLink}}                <a href="${customLink.href}" title="${customLink.text}" target="_blank" class="profile-usercard-custom-link">${customLink.text}</a>                {{/if}}                <a href="${Profile}?ws=usercard-inline" class="profile-usercard-profileLink" target="_blank">'+u.viewProfile+"</a>            </div>        </div>",n}(),nt=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!1,".profile-leaderboard-item",this.leaderboardTemplate,"leaderboardTemplate")}return s(n,a),n.prototype.showWidget=function(t,r){var u;return n.__super__.showWidget.call(this,t,r),u=i(t),u.find("div").length>0&&u.show(),u.find(".profile-leaderboard-value").format({format:"+#,###",locale:f.lang}),u.show()},n.prototype.leaderboardTemplate='<div class="profile-leaderboard-container">            <div class="profile-leaderboard-rank">${Rank}</div>            <div class="profile-leaderboard-userimage">            {{if $item.useDataUri }}                <img src="data:image/jpg;base64,${AvatarData}" alt="'+u.avatar+'">            {{else}}                <img src="${Avatar}" alt="'+u.avatar+'">            {{/if}}            </div>            <div class="profile-leaderboard-name profile-usercard-hover" data-profile-userid="${UserId}">                <a href="${Profile}?ws=leaderboard" target="_blank" data-profile-userid="${UserId}">${DisplayName}</a>            </div>            <div class="profile-ie7-envelope"><div class="profile-leaderboard-value">+${Content}</div></div>        </div>',n}(),st=function(){function n(){n.__super__.constructor.call(this,"data-profile-userid",!1,".profile-usercard-mini",this.miniTemplate,"miniTemplate")}return s(n,a),n.prototype.showWidget=function(t,r){var u,f;if(!i(".profile-mini",t).length)return u=i(t),f=u.html(),u.html(""),n.__super__.showWidget.call(this,t,r),u.find(".profile-mini-content").html(f)},n.prototype.miniTemplate='<div class="profile-mini">            <div class="profile-mini-header">            <div class="profile-mini-userimage">            {{if $item.useDataUri }}                <img src="data:image/jpg;base64,${AvatarData}" alt="'+u.avatar+'">            {{else}}                <img src="${Avatar}" alt="'+u.avatar+'">            {{/if}}            </div>            <div class="profile-mini-container">                <div title="${DisplayName}" class="profile-mini-display-name"><div class="profile-usercard-hover" data-profile-userid="${UserId}"><a href="${Profile}?ws=usercard-mini" target="_blank">${DisplayName}</a></div></div>            {{if Company}}                <div class="profile-mini-company">${$item.ellipsify(Company, 27)}</div>            {{/if}}                <div class="profile-mini-affiliations">                {{if Affiliations}}                    (${Affiliations})                {{/if}}                </div>                <span class="profile-mini-points">${Points}<span class="points-label"> '+u.recognitionPoints+'</span></span>                </div>                <div class="profile-mini-content">                </div>            </div>        </div>',n}(),it=function(){function n(){this.dataIdName="data-profile-leaderboard-key",this.selector=".profile-leaderboard",this.foundIds=[],this.headerName="leaderboardHeaderTemplate",this.itemName="leaderboardItemTemplate",this.emptyName="leaderboardEmptyTemplate",i.template(this.headerName,this.leaderboardHeaderTemplate),i.template(this.itemName,this.leaderboardItemTemplate),i.template(this.emptyName,this.leaderboardEmptyTemplate)}return s(n,w),n.prototype.showAll=function(n){return i(this.selector).each(e(function(t,i){return this.showWidget(i,n)},this))},n.prototype.showWidget=function(n,t){var f,a,o,c,y,l,r,s,h,e,v;if(f=i(n),f.attr("data-profile-leaderboard-loaded")){f.profileWidgitize();return}if(f.attr("data-profile-leaderboard-loaded",!0),l=f.attr("data-profile-leaderboard-key"),l){if(o=t(this.dataIdName,l),o!=null&&(r=eval(o.Items),(r!=null?r.length:void 0)>0)){for(y=this.localizeHeader(o.Header),i.tmpl(this.headerName,y).appendTo(n),h=1,s=r[0].RankingColumn,e=0,v=r.length;e<v;e++)c=r[e],a=c.RankingColumn,a!==s&&(h=e+1),s=a,c.Rank=h;i.tmpl(this.itemName,r).appendTo(n),f.profileWidgitize();return}return i.tmpl(this.emptyName,u.leaderboardEmpty).appendTo(n)}return this.warn('Expected key in attribute "'+this.dataIdName+'"')},n.prototype.localizeHeader=function(n){var f,e,r,t,i;try{f=n.match(/points earned|activities completed/)[0],r=n.match(/weeks|week|days|day|hours|hour|all time/)[0],e=(i=n.match(/\d+/))!=null?i[0]:void 0,t=u.header[f]+" - "+u.header[r].replace(/%d/,e)}catch(o){leaderboard.warn("failed to load leaderboard header")}return t},n.prototype.onDataLoaded=function(){},n.prototype.leaderboardEmptyTemplate='<div class="profile-leaderboard-empty">${}</div>',n.prototype.leaderboardHeaderTemplate='<div class="profile-leaderboard-header">${}</div>',n.prototype.leaderboardItemTemplate='<div class="profile-leaderboard-item" data-profile-userid="${UserId}" data-profile-rank="${Rank}" style="display: none;">${RankingColumn}</div>',n.prototype.warn=function(n){return o.warn("Profile [Leaderboard]: "+n)},n}(),et=function(){function n(){this.dataIdName="data-profile-statGroupId",this.selector=".profile-statGroup",this.foundIds=[],this.statGroupTemplateName="statGroupTemplate",i.template(this.statGroupTemplateName,this.statGroupTemplate)}return s(n,w),n.prototype.canonicalizeId=function(n){return n.replace(/[^a-zA-Z0-9_\-;]/g,"")},n.prototype.findIds=function(n){var o,e,s,t,u,l,r,f,c,h;for(e=[],h=i(this.selector,n),f=0,c=h.length;f<c;f++)t=h[f],u=l=void 0,u=i(t).attr("data-profile-statGroup-key"),o=i(t).attr("data-profile-filterLocale"),o!=null||(o=""),r=i(t).attr("data-profile-userId"),r!=null||(r=""),u!=null?(s=this.canonicalizeId(u+";"+o+";"+r),i(t).attr(this.dataIdName,s),i.inArray(s,e)===-1&&e.push(s)):this.warn('Missing required attribute(s) "data-profile-statGroup-key"');return e},n.prototype.showAll=function(n){return i(this.selector).each(e(function(t,i){return this.showWidget(i,n)},this))},n.prototype.showWidget=function(n,t){var r,e,u,s;if(r=i(n),r.length===0&&o.warn("Profile [StatGroupWidgetRegistration]: Widget not found in DOM"),s=typeof r.attr("data-profile-rendered")!="undefined",!s)return u=r.attr(this.dataIdName),u!=null?(e=t(this.dataIdName,u),e?(i.tmpl(this.statGroupTemplate,e).appendTo(r),r.attr("data-profile-rendered","true"),r.find(".value").format({format:"#,###",locale:f.lang})):o.warn("Profile [StatGroupWidgetRegistration]: Item does not exist in data.")):o.warn('Profile [StatGroupWidgetRegistration]: Expected id in attribute "'+this.dataIdName+'".')},n.prototype.onDataLoaded=function(){},n.prototype.statGroupTemplate='<div class="statistic-group">            <div class="statistic-header">${Header}</div>            <table class="statistic-table">                <tbody>                    {{each Statistics}}                    <tr>                        <td class="name">${$value.Name}</td>                        <td class="value"><span>${$value.Value}</span></td>                    </tr>                    {{/each}}                </tbody>            </table>        </div>',n}(),p=function(){function n(n,r,u,f){var h,o,c,s;for(this.registeredWidgets=n,this.createDataUri=r,this.jsonpCallbackName=u,this.batch=f!=null?f:!1,this.getData=e(this.getData,this),this.loadDataError=e(this.loadDataError,this),this.loadDataSuccess=e(this.loadDataSuccess,this),this.scannedIds=[],i(t).ajaxComplete(e(function(){return this.scanWhenAble()},this)),s=this.registeredWidgets,o=0,c=s.length;o<c;o++)h=s[o],h.getData=e(function(n,t){return this.getData(n,t)},this)}return n.prototype.scan=function(n){var r,t,u,a,h,o,f,e,l,v,c,s;for(r=[],s=this.registeredWidgets,o=0,l=s.length;o<l;o++)for(a=s[o],h=a.findIds(n),f=0,v=h.length;f<v;f++)t=h[f],i.inArray(t,r)===-1&&r.push(t);if(u=[],this.scannedIds)for(e=0,c=r.length;e<c;e++)t=r[e],i.inArray(t,this.scannedIds)===-1&&(u.push(t),this.scannedIds.push(t));else u=r,this.scannedIds=r;return u.length?this.loadData(u):this.showItems()},n.prototype.scanWhenAble=function(){var n;return this.pending||(n=e(function(){return this.scan(),this.pending=!1},this),setTimeout(n,f.scanDelay)),this.pending=!0},n.prototype.showItems=function(){var r,n,u,t,i;for(t=this.registeredWidgets,i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(r.showAll(this.getData));return i},n.prototype.loadData=function(n){var t;return this.batch?(t=f.userDataBatchSize,this.currentBatch=this.currentBatch>=0?this.currentBatch+1:0,n.length<=t?this.loadDataAjax(n,this.currentBatch):(this.batch=n.slice(0,t),this.loadDataAjax(this.batch,this.currentBatch),n=n.slice(t,n.length),this.loadData(n))):this.loadDataAjax(n)},n.prototype.loadDataAjax=function(n,t){return i.ajax({url:this.createDataUri(n),dataType:"jsonp",cache:!0,jsonpCallback:this.jsonpCallbackName+(t!=null?t:""),success:this.loadDataSuccess,error:this.loadDataError})},n.prototype.loadDataSuccess=function(n){var u,t,f,r;for(this.data=i.extend(!0,this.data,n),r=this.registeredWidgets,t=0,f=r.length;t<f;t++){u=r[t];u.onDataLoaded(this.data)}return this.showItems()},n.prototype.loadDataError=function(n){return this.warn("Ajax request error: #status, "+n.status+": "+n.statusText)},n.prototype.getData=function(n,t){var i,r;return this.data||this.warn("Unable to load data"),i=(r=this.data)!=null?r[t]:void 0,i&&(i[n]=t),i},n.prototype.warn=function(n){return o.warn("Profile [Scanner]: "+n)},n}(),ht=function(){function n(){n.__super__.constructor.apply(this,arguments)}return s(n,p),n.prototype.loadData=function(n){var r,t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(this.loadDataAjax(r));return i},n.prototype.loadDataAjax=function(n){var r;return r=n.split(";"),i.ajax({url:this.createDataUri(r[0],r[1],r[2]),dataType:"jsonp",cache:!0,jsonpCallback:this.jsonpCallbackName,success:this.loadDataSuccess,error:this.loadDataError})},n}(),k=function(){function n(){var u,f,r,n,t;this.detectFeatures(),r=[new ft,new nt,new st,new ut,new rt,new d,new g,new tt],this.usercardScanner=new p(r,h.createUsercardDataUri,"jsonp_loadUserData",!0),f=[new it],this.leaderboardScanner=new p(f,h.createLeaderboardDataUri,"jsonp_loadLeaderboardData",!1),n=[new et],this.statGroupScanner=new ht(n,h.createStatGroupDataUri,"jsonp_loadStatGroupData",!1),t=this.usercardScanner,i.fn.profileWidgitize=function(){return t.scanWhenAble(this),this},this.usercardScanner.scan(),this.leaderboardScanner.scan(),this.statGroupScanner.scan(),u=new Image,u.src=h.createWidgetImageUri(),this.aiSetup()}return n.prototype.detectFeatures=function(){var n;return n=new Image,n.onload=n.onabort=n.onerror=function(){return f.supportsDataUri=this.width===1&&this.height===1},n.src="data:image/gif;base64,R0lGODlhAQABAIABAP8AAP///yH5BAEAAAEALAAAAAABAAEAAAICRAEAOw%3D%3D"},n.prototype.aiSetup=function(){return i("#baseball-card-userimage, .baseball-card-compact-userimage").live("click",e(function(){return c.LogMetric("Widget.DisplayImage.Click")},this)),i(".baseball-card-display-name").live("click",e(function(){return c.LogMetric("Widget.DisplayName.Click")},this)),i(".profile-mini-display-name-link").live("click",e(function(){return c.LogMetric("Widget.Mini.DisplayName.Click")},this)),i(".baseball-card-custom-link").live("click",e(function(){return c.LogMetric("Widget.CustomLink.Click")},this)),i(".baseball-card-user-activity").live("click",e(function(){return c.LogMetric("Widget.UserActivity.Click")},this))},n}(),i(t).ready(function(){return new k})}(this,document,jQuery),function(n){n.fn.textfill=function(t){function r(){i.debug&&typeof console!="undefined"&&typeof console.debug!="undefined"&&console.debug.apply(console,arguments)}function o(){typeof console!="undefined"&&typeof console.warn!="undefined"&&console.warn.apply(console,arguments)}function u(n,t,i,u,f,e){function o(n,t){var i=" / ";return n>t?i=" > ":n==t&&(i=" = "),i}r(n+"font: "+t.css("font-size")+", H: "+t.height()+o(t.height(),i)+i+", W: "+t.width()+o(t.width(),u)+u+", minFontPixels: "+f+", maxFontPixels: "+e)}function f(n,t,i,r,f,e,o,s){for(u(n+": ",t,f,e,o,s);o<s-1;){var h=Math.floor((o+s)/2);if(t.css("font-size",h),i.call(t)<=r){if(o=h,i.call(t)==r)break}else s=h;u(n+": ",t,f,e,o,s)}return t.css("font-size",s),i.call(t)<=r&&(o=s,u(n+"* ",t,f,e,o,s)),o}var e={debug:!1,maxFontPixels:40,minFontPixels:4,innerTag:"span",widthOnly:!1,success:null,callback:null,fail:null,complete:null,explicitWidth:null,explicitHeight:null},i=n.extend(e,t);return this.each(function(){var t=n(i.innerTag+":visible:first",this),u=i.explicitHeight||n(this).height(),e=i.explicitWidth||n(this).width(),a=t.css("font-size"),v,s;r("Opts: ",i),r("Vars: maxHeight: "+u+", maxWidth: "+e);var c=i.minFontPixels,l=i.maxFontPixels<=0?u:i.maxFontPixels,h=undefined;i.widthOnly||(h=f("H",t,n.fn.height,u,u,e,c,l)),s=f("W",t,n.fn.width,e,u,e,c,l),i.widthOnly?t.css({"font-size":s,"white-space":"nowrap"}):t.css("font-size",Math.min(h,s)),r("Final: "+t.css("font-size")),t.width()>e||t.height()>u&&!i.widthOnly?(t.css("font-size",a),i.fail&&i.fail(this)):i.success?i.success(this):i.callback&&(o("callback is deprecated, use success, instead"),i.callback(this))}),i.complete&&i.complete(this),this}}(window.jQuery)