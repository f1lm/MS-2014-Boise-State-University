LI.define("BaseControl");
LI.BaseControl=Fiber.extend(function(){return{init:function(el,config){var control=this,isReady=new $.Deferred;var bindAll=function(obj){var funcs=_.functions(obj);_.each(funcs,function(f){obj[f]=_.bind(obj[f],obj)})};this._$el=$(el);this._observableEmitter=$({});this._state={};this._config=this._config||config||{};this.isReady=isReady.promise();this.beforeInit();this.beforeDecoration();this.decorate().then(function(){bindAll(control)}).then(function(){control.afterDecoration()}).then(function(){control.beforeLoad()}).then(function(){if(control._config.dependencies)return control.loadDependencies()}).then(function(deps){control.afterLoad(deps)}).then(function(){control.attachEventListeners()}).then(function(){control.afterInit()}).then(function(){isReady.resolve()})},destroy:function(){this.detachEventListeners()},
state:function(one,two,undefined){var args=[].slice.call(arguments,0),name,values={},stateChanges=[],newState=null;if(typeof args[1]==="undefined")if(typeof args[0]==="undefined"){for(name in this._state)if(this._state.hasOwnProperty(name))values[name]=this._state[name].value;return values}else if(typeof args[0]==="string")if(this._state.hasOwnProperty(args[0]))return this._state[args[0]].value;else return undefined;if(typeof args[0]==="object")for(name in args[0])if(args[0].hasOwnProperty(name))if(args[1]||
!this._state.hasOwnProperty(name)){this._setState(name,args[0][name]);stateChanges.push(name)}if(typeof args[0]==="string"){this._setState(args[0],args[1]);stateChanges.push(args[0])}for(var i=0,len=stateChanges.length;i<len;i++){newState=this._state[stateChanges[i]];this._observableEmitter.trigger(stateChanges[i],{newValue:newState.value,oldValue:newState.lastValue,revision:newState.rev})}},_setState:function(key,val){if(typeof this._state[key]==="undefined")this._state[key]={rev:0,value:val,lastValue:undefined};
else{this._state[key].rev++;this._state[key].lastValue=this._state[key].value;this._state[key].value=val}},observe:function(name,fn){this._observableEmitter.on(name,fn);return this},unobserve:function(name,fn){this._observableEmitter.off(name,fn);return this},beforeInit:function(){},beforeDecoration:function(){},decorate:function(){if(this._config.decorators)return this.loadDependencies(this._config.decorators).then(_.bind(this._applyDecorators,this));else return $.Deferred().resolve().promise()},
_applyDecorators:function(require){_.each(this._config.decorators,function(decoratorPath){if(typeof require(decoratorPath)!=="function")throw new TypeError("Decorator ("+decoratorPath+") is not a function");Fiber.decorate(this,require(decoratorPath))},this)},afterDecoration:function(){},beforeLoad:function(){},afterLoad:function(){},attachEventListeners:function(){},detachEventListeners:function(){},afterInit:function(){},onResolve:function(){},before:function(wrappedFunctionName,before){var control=
this;this.isReady.then(function(){control[wrappedFunctionName]=_.wrap(control[wrappedFunctionName],function beforeFunction(original){var args=Array.prototype.slice.apply(arguments,[1]);if(typeof before==="string")control[before].apply(control,args);else before.apply(control,args);return original.apply(control,args)})})},after:function(wrappedFunctionName,after){var control=this;this.isReady.then(function(){control[wrappedFunctionName]=_.wrap(control[wrappedFunctionName],function afterFunction(original){var args=
Array.prototype.slice.apply(arguments,[1]),originalReturn=original.apply(control,args);if(typeof after==="string")control[after].apply(control,args);else after.apply(control,args);return originalReturn})})},clobber:function(clobberedFunctionName,clobberingFunction){var control=this;this.isReady.then(function(){control[clobberedFunctionName]=_.bind(clobberingFunction,control)})},loadDependencies:function(dependencies){var deferral=new $.Deferred;dependencies=dependencies||this._config.dependencies||
[];require.ensure(dependencies,function(require){deferral.resolve(require)});return deferral.promise()},loadCss:function(cssPaths){var control=this,cssDeferral=new $.Deferred;require.ensure(cssPaths,function(require){_.each(cssPaths,function(cssPath){require(cssPath).attach()});cssDeferral.resolve()});return cssDeferral.promise()}}});
(function(){var $=LIModules.requires("jquery"),_=LIModules.requires("underscore"),Controls=LIModules.imports("Controls")||{},BaseControl=LIModules.requires("BaseControl"),i18n=LIModules.requires("i18n"),parseFragment=LIModules.imports("Controls.parseFragment")||function(){},previousClose=null;var _registerSingleton=function(closeFunction){if(previousClose&&typeof previousClose==="function")previousClose();previousClose=closeFunction};var DialogBox=BaseControl.extend(function(base){var DEFAULT_CONFIG=
{width:500,top:150,xOffset:0,yOffset:0,errorMessage:"We're sorry. Something unexpected happened and your request could not be completed. Please try again.",closeText:"Close",startText:"Dialog start",endText:"Dialog end",customClassName:undefined,dialogTemplate:"tl/shared/dialog",dialogCss:["css!scss/modules/dialog_v3"],cssDependencies:null,templateDataUrl:null,centerVertically:false,fitDialogBoxToWindow:true},CLICK="click",KEYUP="keyup",RESIZE="resize",CLASS_DIALOG_BODY="dialog-body",BOTTOM_SPACE=
50;function getRegisteredI18n(){var dialogi18n=[{key:"errorMessage",value:"dialogbox_error_generic"},{key:"closeText",value:"dialogbox_close"},{key:"startText",value:"dialogbox_start"},{key:"endText",value:"dialogbox_end"}],len=dialogi18n.length,i=0,output={},i18nValue="";for(;i<len;i++){i18nValue=i18n.get(dialogi18n[i].value);if(i18nValue)output[dialogi18n[i].key]=i18nValue}return output}return{beforeDecoration:function(){this._$dialog=undefined;this._config=_.defaults(this._config,getRegisteredI18n(),
DEFAULT_CONFIG);this._requiredTemplates=[this._config.dialogTemplate];this._requiredCSS=_.flatten(_.compact([this._config.dialogCss,this._config.cssDependencies]));this._href=this._config.templateDataUrl||this._$el.data("href")||this._$el.attr("href")},attachEventListeners:function(){this._$el.on(CLICK,_.bind(this._eventOpen,this))},detachEventListeners:function(){this._$el.off(CLICK)},onResolve:function(mapping){this.open()},_eventOpen:function(evt){evt.preventDefault();this.open()},_eventClose:function(evt){evt.preventDefault();
this.close()},_keyupHandler:function(evt){if(evt.which===27)this._eventClose(evt)},_resizeHandler:_.throttle(function(evt){if(this._$dialog&&this._$dialog.length){this._$dialog.css(this._getPosition());this._fitToWindow()}},500),_attachEventListeners:function(){this._$dialog.on(CLICK,".dialog-close",this._eventClose);$(document).on(KEYUP,this._keyupHandler);$(window).on(RESIZE,this._resizeHandler)},open:function(){return $.when(this.loadDependencies(this._requiredTemplates),this.loadCss(this._requiredCSS)).then(_registerSingleton(_.bind(this.close,
this))).then(_.bind(this._render,this)).then(_.bind(this.setFocusToDialog,this))},close:function(){if(this._$dialog)this._$dialog.remove();$(document).off(KEYUP,this._keyupHandler);$(window).off(RESIZE,this._resizeHandler);this._$el.focus()},destroy:function(){this.close();this.detachEventListeners();base.destroy.apply(this,arguments)},setFocusToDialog:function(){this._$dialog.attr("tabindex",-1);this._$dialog.focus()},_loadContent:function(){var $targetEl=$(this._href),targetElContent=$targetEl.html(),
deferral=new $.Deferred;if($targetEl[0]||!this._href)deferral.resolve(targetElContent);else deferral.reject();return deferral.promise()},_buildMarkup:function(){return this._renderDialogMarkup().then(this._renderMarkUpSuccess,this._renderMarkUpFailure)},_renderMarkUpSuccess:function(dialogMarkup){this._$dialog=$(dialogMarkup).prop("id","modeless-dialog").addClass(this._config.customClassName);this._$dialog.css(this._getPosition());$("body").append(this._$dialog)},_renderMarkUpFailure:function(){throw new Error("Unable to render dialog markup");
},_loadContentSuccess:function(dialogContent){this.setDialogBodyContent(dialogContent)},_loadContentFail:function(){this.setDialogBodyContent(this._config.errorMessage)},setDialogBodyContent:function(html){this._$dialog.find("."+CLASS_DIALOG_BODY).html(html);parseFragment(this._$dialog);this._$dialog.css(this._getPosition());this._fitToWindow()},_render:function(){return this._buildMarkup().then(this._attachEventListeners).then(this._loadContent).then(this._loadContentSuccess,this._loadContentFail)},
_renderDialogMarkup:function(){var deferral=new $.Deferred;dust.render(this._config.dialogTemplate,this._config,function postDustRender(err,out){if(err)deferral.reject(err);else deferral.resolve(out)});return deferral.promise()},_getPosition:function(){var $win=$(window),verticalOffset=this._config.top,horizontalOffset=$win.innerWidth()/2-this._config.width/2+this._config.xOffset;if(this._config.centerVertically){verticalOffset=$win.innerHeight()/2-this._$dialog.outerHeight()/2+this._config.yOffset;
verticalOffset=Math.max(verticalOffset,this._config.top)}return{left:horizontalOffset,top:verticalOffset}},_fitToWindow:function(){var availableVerticalSpace=$(window).innerHeight()-this._config.top-BOTTOM_SPACE,titleHeight=this._$dialog.find(".dialog-title").outerHeight(),$ghostDialog;$ghostDialog=this._$dialog.clone().css("visibility","hidden");$ghostDialog.find(".dialog-body").height("auto");$("body").append($ghostDialog);if($ghostDialog.height()>availableVerticalSpace&&this._config.fitDialogBoxToWindow)this._$dialog.find(".dialog-body").height(availableVerticalSpace-
titleHeight);else this._$dialog.find(".dialog-body").height("auto");$ghostDialog.remove()}}});LIModules.exports("DialogBox",DialogBox)})(window.require);
(function(require){var $=LIModules.requires("jquery"),_=LIModules.requires("underscore"),DialogBox=LIModules.requires("DialogBox");var ModalDialogBox=DialogBox.extend(function(base){var DEFAULT_CONFIG={maskTemplate:"tl/shared/dialog_mask",fitToWindow:true,closeOnMaskClick:true},CLICK="click",KEYUP="keyup",RESIZE="resize",FOCUSIN="focusin";return{beforeDecoration:function(){base.beforeDecoration.call(this);this._config=_.defaults(this._config,DEFAULT_CONFIG);this._requiredTemplates=[this._config.maskTemplate,
this._config.dialogTemplate];this._requiredCSS=_.flatten(_.compact([this._config.dialogCss,this._config.cssDependencies]));this._$mask=undefined;this._initialHtmlOverflowValue=undefined;if(!this._config.fitToWindow)this._fitToWindow=function(){}},_maskClickHandler:function(evt){if($(evt.target).is("#dialog-mask"))this._eventClose(evt)},_attachEventListeners:function(){base._attachEventListeners.call(this);if(this._config.closeOnMaskClick)this._$mask.on(CLICK,this._maskClickHandler);$(document).on(FOCUSIN,
this._trapFocus)},close:function(){if(this._$mask)this._$mask.remove();$(document).off(KEYUP,this._keyupHandler);$(window).off(RESIZE,this._resizeHandler);$("html").css({overflow:this._initialHtmlOverflowValue});this._$el.focus()},_buildMarkup:function(){return $.when(this._renderMaskMarkup(),this._renderDialogMarkup()).then(this._renderMarkUpSuccess,this._renderMarkUpFailure)},_renderMarkUpSuccess:function(maskMarkup,dialogMarkup){this._$mask=$(maskMarkup);this._$dialog=$(dialogMarkup);this._$dialog.css(this._getPosition());
this._$mask.append(this._$dialog);if(!this._config.fitToWindow)this._$mask.css({"overflow-y":"auto"});$("body").append(this._$mask)},_render:function(){this._initialHtmlOverflowValue=$("html").css("overflow");$("html").css({overflow:"hidden"});return this._buildMarkup().then(this._attachEventListeners).then(this._loadContent).then(this._loadContentSuccess,this._loadContentFail)},_renderMaskMarkup:function(){var deferral=new $.Deferred;dust.render(this._config.maskTemplate,this._config,function postDustRender(err,
out){if(err)deferral.reject(err);else deferral.resolve(out)});return deferral.promise()},_trapFocus:function(evt){evt.stopPropagation();if(this._$dialog.is($(evt.target))||this._$dialog.has($(evt.target)).length>0)return false;else this._$dialog.focus()}}});LIModules.exports("ModalDialogBox",ModalDialogBox)})();
(function(require){var CLASS_SPINNER="spinner",$=window.jQuery||require("jquery");function createSpinner(){return $('\x3cdiv class\x3d"'+CLASS_SPINNER+'"\x3e\x3c/div\x3e')}LIModules.exports("Spinner",{showSpinner:function($el){var $spinner=$el.children("."+CLASS_SPINNER);if($spinner.length===0)$el.append(createSpinner()).children("."+CLASS_SPINNER).height($el.prop("scrollHeight"));else $el.children("."+CLASS_SPINNER).show().height($el.prop("scrollHeight"))},hideSpinner:function($el){$el.children("."+
CLASS_SPINNER).hide()}})})(window.require);define("css!scss/themes/katy/chrome/hopscotch",function(hopscotchCss){return{attach:function(){}}});
(function(){var i18n=LIModules.imports("i18n");var Bidi=function(){var matches={left:"right",right:"left",ltr:"rtl",rtl:"ltr"},cachedReadsRTL;function _isFunction(val){return typeof val==="function"}function _isBoolean(val){return val===true||val===false||Object.prototype.toString.call(val)==="[object Boolean]"}function _isUndefined(val){return val===void 0}function _result(val){return _isFunction(val)?val():val}function _resolveMatching(val){val=_result(val);if(_isBoolean(val))val=!val;else if(val&&
matches[val])val=matches[val];return val}function _readsRTL(){return cachedReadsRTL}function flip(ltr,rtl){var val;if(_readsRTL())if(_isUndefined(rtl))val=_resolveMatching(ltr);else val=_result(rtl);else val=_result(ltr);return val}function applyWhenRTL(val){return this.flip(null,val)}function init(){cachedReadsRTL=i18n&&i18n.page&&i18n.page.readsRTL()}init();return{init:init,flip:flip,applyWhenRTL:applyWhenRTL}}();LIModules.exports("Bidi",Bidi)})();
(function(){var BaseControl=LIModules.requires("BaseControl"),Bidi=LIModules.imports("Bidi"),$=LIModules.requires("jquery"),_=LIModules.requires("underscore");var Tooltip=BaseControl.extend(function(base){var ANIMATE_MAP,ANIMATION_EVENT,ANIMATION_EVENT_MAP,A11Y,DEFAULTS,DIRECTIONS,EVENTS,KEYS,TOOLTIP,ERRORS,ANIMATED="animated",AUTO="auto",BODY="body",ID="id",SHOWN="shown",PENDING="pending",DOCUMENT=$(document),WINDOW=$(window),DEFAULT_DELAY_OPEN=50,DEFAULT_DELAY_CLOSE=250,DEFAULT_OFFSET_EXTRA=5,DEFAULT_OFFSET=
0,NULL=null,TRUE=true,FALSE=false;EVENTS={MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",FOCUS:"focus",BLUR:"blur",KEYDOWN:"keydown"};KEYS={ESCAPE:27};ANIMATION_EVENT_MAP={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oanimationend"};A11Y={DESCRIBED_BY:"aria-describedby",ROLE:"role",TABINDEX:"tabIndex"};DIRECTIONS={BOTTOM:"bottom",TOP:"top",RIGHT:"right",LEFT:"left"};ANIMATE_MAP={TOP:"fade-in-down",BOTTOM:"fade-in-up",RIGHT:"fade-in-left",LEFT:"fade-in-right"};
TOOLTIP={TOOLTIP:"tooltip",OVERLAY:"tooltip-overlay",CONTENT:"tooltip-content",ARROW:"tooltip-arrow",CONTAINER:"tooltip-content-container"};ERRORS={TOOLTIP_ALREADY_SHOWING:"Tooltip already showing.",TOOLTIP_CLOSED_BEFORE_FULLY_OPENED:"Tooltip closed before it fully opened.",USER_INTERACTING_TOOLTIP:"User is interacting with tooltip.",USER_MOUSEOUT:"User is no long hovering."};DEFAULTS={delayOpen:DEFAULT_DELAY_OPEN,delayClose:DEFAULT_DELAY_CLOSE,doAnimate:TRUE,direction:DIRECTIONS.BOTTOM,isFlippable:TRUE,
offsetExtra:DEFAULT_OFFSET_EXTRA,offsetX:DEFAULT_OFFSET,offsetY:DEFAULT_OFFSET,type:TOOLTIP.TOOLTIP,width:AUTO,tooltipContentID:NULL,dependencies:["scripts/shared/Bidi"],cssDependencies:["css!scss/modules/tooltip"]};function _browserAnimationEvent(){var el=document.body;for(var a in ANIMATION_EVENT_MAP)if(typeof el.style[a]!=="undefined")return ANIMATION_EVENT_MAP[a]}ANIMATION_EVENT=_browserAnimationEvent();return{beforeDecoration:function(){var $el=this._$el;this._config=_.defaults(this._config,
DEFAULTS);if(_.isUndefined($el.attr(A11Y.TABINDEX)))$el.attr(A11Y.TABINDEX,0)},attachEventListeners:function(){this._$el.on(EVENTS.MOUSEOVER+" "+EVENTS.FOCUS,this._setTriggerMouseover).on(EVENTS.MOUSEOUT+" "+EVENTS.BLUR,this._removeTriggerMouseover)},_attachTooltipListeners:function(){this.$overlay.on(EVENTS.MOUSEOVER,this._setTooltipMouseover).on(EVENTS.MOUSEOUT,this._removeTooltipMouseover)},_attachOpenListeners:function(){DOCUMENT.on(EVENTS.KEYDOWN,this._closeIfEscapeKey)},_setTriggerMouseover:function(){this.isMouseoverTrigger=
TRUE;this.open()},_removeTriggerMouseover:function(){this.isMouseoverTrigger=FALSE;this.close()},_setTooltipMouseover:function(){this.isMouseoverTooltip=TRUE},_removeTooltipMouseover:function(){this.isMouseoverTooltip=FALSE;this.close()},_closeIfEscapeKey:function(evt){if(evt.which===KEYS.ESCAPE)this._hideTooltip()},detachEventListeners:function(){this._$el.off(EVENTS.MOUSEOVER+" "+EVENTS.FOCUS,this._setTriggerMouseover).off(EVENTS.MOUSEOUT+" "+EVENTS.BLUR,this._removeTriggerMouseover);if(this.$overlay)this.$overlay.off(EVENTS.MOUSEOVER,
this._setTooltipMouseover).off(EVENTS.MOUSEOUT,this._removeTooltipMouseover);this._detachOpenListeners()},_detachOpenListeners:function(){DOCUMENT.off(EVENTS.KEYDOWN,this._closeIfEscapeKey)},destroy:function(){this.detachEventListeners();if(this.$overlay)this.$overlay.remove()},_loadCss:function(){return this.loadCss(this._config.cssDependencies)},open:function(){var _isOpening;if(this._isOpening&&this._isOpening.state()===PENDING)return this._isOpening.promise();this._isOpening=_isOpening=new $.Deferred;
if(!this.$overlay)this._loadCss().then(this._onFirstOpen).then(this._open).then(_isOpening.resolve,_isOpening.reject);else this._open().then(_isOpening.resolve,_isOpening.reject);return _isOpening.then(_.bind(this._attachOpenListeners,this)).promise()},_open:function(){var deferred=new $.Deferred,that=this;if(this.isMouseoverTrigger===FALSE)return deferred.reject(new Error(ERRORS.USER_MOUSEOUT)).promise();if(!this.showTimer)this.showTimer=_.delay(function(){that._showTooltip().then(deferred.resolve)},
this._config.delayOpen);else deferred.reject(new Error(ERRORS.TOOLTIP_ALREADY_SHOWING));return deferred.promise()},_onFirstOpen:function(){var config=this._config;if(Bidi)config.offsetX=Bidi.flip(config.offsetX,-config.offsetX);this.createOverlay();this.setContent();this.isCreating=false},_showTooltip:function(){var deferred=new $.Deferred,config=this._config,$overlay=this.$overlay,that=this;this.currentDirection=config.direction;$overlay.addClass(SHOWN).appendTo($(BODY));this.calculatePosition();
if(config.isFlippable)this._setTooltipStyling($overlay);if(ANIMATION_EVENT&&config.doAnimate)$overlay.one(ANIMATION_EVENT,function(){deferred.resolve(that)});else deferred.resolve(this);return deferred.promise()},close:function(){var deferred=new $.Deferred,that=this;if(this.showTimer&&this._isOpening&&this._isOpening.state()===PENDING){clearTimeout(this.showTimer);this._isOpening.reject(new Error(ERRORS.TOOLTIP_CLOSED_BEFORE_FULLY_OPENED))}_.delay(function(){that._close().then(deferred.resolve,deferred.reject)},
this._config.delayClose);return deferred.then(this._detachOpenListeners).promise()},_close:function(){var deferred=new $.Deferred;if(!this.isMouseoverTooltip&&!this.isMouseoverTrigger){this._hideTooltip();deferred.resolve(this)}else deferred.reject(new Error(ERRORS.USER_INTERACTING_TOOLTIP));return deferred.promise()},_hideTooltip:function(){this.showTimer=null;if(this.$overlay)this.$overlay.removeClass(SHOWN).detach()},createOverlay:function(){var $overlay=$("\x3cdiv/\x3e").attr(ID,TOOLTIP.OVERLAY),
$arrow=$("\x3cspan/\x3e").addClass(TOOLTIP.ARROW);$overlay.append($arrow);this._setTooltipStyling($overlay);this.$overlay=$overlay;this._attachTooltipListeners()},setContent:function(){var $content=$("\x3cdiv/\x3e").addClass(TOOLTIP.CONTENT),$contents=this._setContent();this._addAccessibility($contents);$content.append($contents);this.$overlay.prepend($content)},_setContent:function(){var $content=NULL,$parent;if(this._config.tooltipContentID){$content=$("#"+this._config.tooltipContentID);$parent=
$content.parent();if($parent.hasClass(TOOLTIP.CONTAINER)&&$parent.children().length===1)$parent.remove()}return $content},_addAccessibility:function($content){var aria=this._$el.attr(A11Y.DESCRIBED_BY),role=$content.attr(A11Y.ROLE);if(_.isUndefined(aria))this._$el.attr(A11Y.DESCRIBED_BY,this._config.tooltipContentID);if(_.isUndefined(role))$content.attr(A11Y.ROLE,TOOLTIP.TOOLTIP)},_setTooltipStyling:function($overlay){var config=this._config,type=config.type,direction=this.currentDirection||config.direction,
doAnimate=config.doAnimate,classes=[type,"tooltip-"+direction];$overlay.removeClass();if(config.overlayClasses)classes.push(config.overlayClasses);$overlay.addClass(classes.join(" ")).css({width:config.width});if(this.showTimer)$overlay.addClass(SHOWN);if(doAnimate)$overlay.addClass(ANIMATED+" "+ANIMATE_MAP[direction.toUpperCase()])},_isFlippable:function(isFlipped){return this._config.isFlippable&&!isFlipped},_isAboveViewport:function(topEdge){return topEdge<WINDOW.scrollTop()},_isBelowViewport:function(bottomEdge){return bottomEdge>
WINDOW.height()+WINDOW.scrollTop()},_isLeftOfViewport:function(leftEdge){return leftEdge<WINDOW.scrollLeft()},_isRightOfViewport:function(rightEdge){return rightEdge>WINDOW.width()+WINDOW.scrollLeft()},calculatePosition:function(){var pos={},config=this._config,offset=this._$el.offset(),top=offset.top,left=offset.left,bidiRL=Bidi&&Bidi.flip(DIRECTIONS.RIGHT,DIRECTIONS.LEFT)||DIRECTIONS.RIGHT,bidiLR=Bidi&&Bidi.flip(DIRECTIONS.LEFT,DIRECTIONS.RIGHT)||DIRECTIONS.LEFT;this.currentTop=top;this.currentLeft=
left;switch(config.direction){case DIRECTIONS.BOTTOM:pos=this.calculateBottom();break;case DIRECTIONS.TOP:pos=this.calculateTop();break;case bidiRL:pos=this.calculateRight();break;case bidiLR:pos=this.calculateLeft();break;default:pos=this.calculateBottom()}this.$overlay.css(pos);return pos},calculateBottom:function(isFlipped){var config=this._config,$overlay=this.$overlay,$el=this._$el,heightOffset,widthOffset,elWidthOffset,top,left;isFlipped=isFlipped||false;heightOffset=$overlay.outerHeight()+
config.offsetExtra;elWidthOffset=$el.outerWidth()/2;widthOffset=$overlay.outerWidth()/2;top=this.currentTop-heightOffset+config.offsetY;left=this.currentLeft-widthOffset+elWidthOffset+config.offsetX;if(this._isFlippable(isFlipped)&&this._isAboveViewport(top)){this.currentDirection=DIRECTIONS.TOP;return this.calculateTop(true)}else return{top:top,left:left}},calculateTop:function(isFlipped){var config=this._config,$overlay=this.$overlay,$el=this._$el,heightOffset,widthOffset,elWidthOffset,bottom,top,
left;isFlipped=isFlipped||false;heightOffset=$el.outerHeight()+config.offsetExtra;elWidthOffset=$el.outerWidth()/2;widthOffset=$overlay.outerWidth()/2;top=this.currentTop+heightOffset+config.offsetY;left=this.currentLeft-widthOffset+elWidthOffset+config.offsetX;bottom=top+$overlay.outerHeight();if(this._isFlippable(isFlipped)&&this._isBelowViewport(bottom)){this.currentDirection=DIRECTIONS.BOTTOM;return this.calculateBottom(true)}else return{top:top,left:left}},calculateLeft:function(isFlipped){var config=
this._config,$overlay=this.$overlay,$el=this._$el,heightOffset,widthOffset,elHeightOffset,right,top,left;isFlipped=isFlipped||false;widthOffset=$el.outerWidth()+config.offsetExtra;elHeightOffset=$el.outerHeight()/2;heightOffset=$overlay.outerHeight()/2;top=this.currentTop-heightOffset+elHeightOffset+config.offsetY;left=this.currentLeft+widthOffset+config.offsetX;right=left+$overlay.outerWidth();if(this._isFlippable(isFlipped)&&this._isRightOfViewport(right)){this.currentDirection=DIRECTIONS.RIGHT;
return this.calculateRight(true)}else return{top:top,left:left}},calculateRight:function(isFlipped){var config=this._config,$overlay=this.$overlay,$el=this._$el,heightOffset,widthOffset,elHeightOffset,top,left;isFlipped=isFlipped||false;widthOffset=$overlay.outerWidth()+config.offsetExtra;elHeightOffset=$el.outerHeight()/2;heightOffset=$overlay.outerHeight()/2;top=this.currentTop-heightOffset+elHeightOffset+config.offsetY;left=this.currentLeft-widthOffset+config.offsetX;if(this._isFlippable(isFlipped)&&
this._isLeftOfViewport(left)){this.currentDirection=DIRECTIONS.LEFT;return this.calculateLeft(true)}else return{top:top,left:left}}}});LIModules.exports("Tooltip",Tooltip)})();