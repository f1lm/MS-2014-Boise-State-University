function CSBJs_Core(){}CSBJs_Core.basePath="";CSBJs_Core.includedTable=[];CSBJs_Core.isClient=function(){return"undefined"==typeof document?!1:!0};CSBJs_Core.ieBrowserVersion=function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!==/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a};
CSBJs_Core.getUrlParams=function(a){var b={},d=null,d=window.location.search;if(a)if(match=a.match(/\?.*/))d=match[0];else return null;d.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,d,h){b[d]=h});return b};CSBJs_Core.getUrlPath=function(){return window.location.pathname};
CSBJs_Core.include=function(a,b){a=CSBJs_Core.basePath+a;if(/\/{0,1}([a-zA-Z0-9_-]+\.js)$/.test(a)){var d=a.replace(/[^a-zA-Z0-9]*/g,"");if(!1===CSBJs_Core.ClassExists(window[d])&&!CSBJs_Core.includedTable.hasOwnProperty(d)){CSBJs_Core.includedTable[d]=a;var d=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript";e.src=a;e.addEventListener?e.addEventListener("load",b,!1):e.readyState&&(e.onreadystatechange=function(){("loaded"==e.readyState||"complete"==
e.readyState)&&b()});d.appendChild(e)}else"function"==typeof b&&b()}};CSBJs_Core.ClassExists=function(a){return"function"===typeof a&&"object"==typeof a.prototype?!0:!1};CSBJs_Core.loaded=!0;CSBJs_Core.ready=function(a,b){if("function"==typeof a){var d,e=0,f=function(){clearTimeout(d);!0===CSBJs_Core.loaded?a():1E4<e?("function"==typeof b&&b(),clearTimeout(d)):(e+=1,d=setTimeout(f,1))};f()}};CSBJs_Core.timeout=function(a){CSBJs_Core.timeoutCallback=a};
CSBJs_Core.init=function(a){CSBJs_Core.loaded=!1;if("undefined"==typeof a||0===a.length)CSBJs_Core.loaded=!0;else{var b=function(d){CSBJs_Core.include(d,function(){if(0===a.length)CSBJs_Core.loaded=!0;else{var d=a.splice(0,1);b(d)}})},d=a.splice(0,1);b(d)}};CSBJs_Core.cookie=function(){};
CSBJs_Core.cookie.load=function(a){if("undefined"==typeof document)return null;var b=null,d=document.cookie,a=a+"=";0<d.length&&(begin=d.indexOf(a),-1!=begin&&(begin+=a.length,end=d.indexOf(";",begin),-1==end&&(end=d.length),b=unescape(d.substring(begin,end))));try{b=JSON.parse(b)}catch(e){}return b};
CSBJs_Core.cookie.save=function(a,b,d){if("undefined"==typeof document)return!1;try{b=JSON.stringify(b)}catch(e){}var f=new Date;f.setTime(f.getTime()+d);document.cookie=a+"="+escape(b)+"; path=/"+(null===f?"":"; expires="+f.toGMTString());return!0};CSBJs_Core.cookie.deleteCookie=function(a){document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/"};var JSON;JSON||(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=k[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,e){var f,k,p,t,r=h,s,q=e[a];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(a));"function"===typeof j&&(q=j.call(e,a,q));switch(typeof q){case "string":return b(q);case "number":return isFinite(q)?""+q:"null";case "boolean":case "null":return""+
q;case "object":if(!q)return"null";h+=g;s=[];if("[object Array]"===Object.prototype.toString.apply(q)){t=q.length;for(f=0;f<t;f+=1)s[f]=d(f,q)||"null";p=0===s.length?"[]":h?"[\n"+h+s.join(",\n"+h)+"\n"+r+"]":"["+s.join(",")+"]";h=r;return p}if(j&&"object"===typeof j){t=j.length;for(f=0;f<t;f+=1)"string"===typeof j[f]&&(k=j[f],(p=d(k,q))&&s.push(b(k)+(h?": ":":")+p))}else for(k in q)Object.prototype.hasOwnProperty.call(q,k)&&(p=d(k,q))&&s.push(b(k)+(h?": ":":")+p);p=0===s.length?"{}":h?"{\n"+h+s.join(",\n"+
h)+"\n"+r+"}":"{"+s.join(",")+"}";h=r;return p}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,g,k={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,e){var f;g=h="";if("number"===typeof e)for(f=0;f<e;f+=1)g+=" ";else"string"===typeof e&&(g=e);if((j=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",
{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function d(a,e){var f,g,h=a[e];if(h&&"object"===typeof h)for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(g=d(h,f),void 0!==g?h[f]=g:delete h[f]);return b.call(a,e,h)}var f,a=""+a;e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof b?d({"":f},""):f;throw new SyntaxError("JSON.parse");})})();function CSBJs_OOP(){}CSBJs_OOP.getClassName=function(a){return null===a||"undefined"==typeof a?null:(a=/^function ([^\s\(]+)\(/.exec(a.constructor.toString()))&&1<a.length?a[1]:""};CSBJs_OOP.isClass=function(a,b){return null!==a&&CSBJs_OOP.getClassName(a)==b?!0:!1};
CSBJs_OOP.isSubClass=function(a,b){return"undefined"==typeof a?!1:"undefined"!=typeof a.parent&&CSBJs_OOP.isClass(a.parent,b)||CSBJs_OOP.isClass(a,b)?!0:!1};Function.prototype.inherits=function(a){a.constructor==Function?(this.prototype=new a,this.prototype.constructor=this,this.prototype.parent=a.prototype):(this.prototype=a,this.prototype.constructor=this,this.prototype.parent=a);return this};function CSBJs_Resources(){}CSBJs_Resources.resource=[];
CSBJs_Resources.addResource=function(a,b){this.resource[a]={data:b,type:b}};CSBJs_Resources.getResource=function(a){return this.resource[a].data};CSBJs_Resources.getResourceType=function(a){return this.resource[a].type};CSBJs_Resources.addResource("ProgressIndicator_Blue","data:image/gif;base64,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");
function CSBJs_ServiceRequest(){this.entity="CSB_Entity_ServiceRequest";this.type="json";this.data=null}CSBJs_ServiceRequest.prototype.setData=function(a){this.data=a};CSBJs_ServiceRequest.prototype.toJson=function(){return{Entity:this.entity,Data:{value:this.data},Type:{value:this.type}}};CSBJs_ServiceRequest.prototype.toString=function(){return JSON.stringify(this.toJson())};function CSBJs_Exception(a,b){this.code=b;this.csb_code=null;this.message=a}function CSBJs_Ajax(){}
CSBJs_Ajax.sessionCount=0;CSBJs_Ajax._callbacks={};CSBJs_Ajax.timeout=6E4;CSBJs_Ajax.addUrlParams=function(a,b){var d="?";a.match(/\?$/)?d="":a.match(/\?/)&&(d="&");var a=a+d,e;for(e in b)b.hasOwnProperty(e)&&(a=a+e+"="+b[e]+"&");return a.replace(/&$/,"")};CSBJs_Ajax.newRequest=function(){var a=null;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return!1}}}return a};
CSBJs_Ajax.Timer=function(a,b){this.timer=null;this.start=function(){this.timer=setTimeout(function(){CSBJs_Ajax.sessionCount--;"function"==typeof CSBJs_Ajax.endCallback&&CSBJs_Ajax.endCallback();"function"==typeof b&&b()},a)};this.clear=function(){null!==this.timer&&clearTimeout(this.timer)}};
CSBJs_Ajax.request=function(a,b,d,e,f,h){var g=CSBJs_Ajax.newRequest(),k=null,k="function"==typeof f?new CSBJs_Ajax.Timer(CSBJs_Ajax.timeout,function(){f(new CSBJs_Exception("Timed-out",408));g.abort()}):new CSBJs_Ajax.Timer(CSBJs_Ajax.timeout,function(){g.abort()});g.onreadystatechange=function(){var a=null,b=null;if(4==g.readyState){k.clear();if(200==g.status){if("function"==typeof e){a=null;switch(g.getResponseHeader("content-type")){case "application/json":try{a=JSON.parse(g.responseText)}catch(d){if("function"==
typeof h)b=new CSBJs_Exception,b.csb_code=-1,b.message="Invalid JSON response",h(b);else throw d;}break;default:a=g.responseText}a&&e(a)}}else if(404==g.status){if("function"==typeof h){a=null;if("application/json"==g.getResponseHeader("content-type"))try{a=JSON.parse(g.responseText)}catch(f){b=new CSBJs_Exception,b.csb_code=-1,b.message="Invalid JSON response",h(b)}"undefined"!=typeof a&&null!==a?"Exception"==a.Entity&&(b=new CSBJs_Exception,a.ErrorCode&&a.ErrorCode.value&&(b.csb_code=a.ErrorCode.value),
b.message=a.ErrorMessage&&a.ErrorMessage.value?a.ErrorMessage.value:g.statusText,b.code=g.status,h(b)):h(new CSBJs_Exception("Request not found",404))}}else if(302==g.status)"function"==typeof h&&h(new CSBJs_Exception("Request is a redirect",302));else if(0!==g.status&&"function"==typeof h){a=null;if("application/json"==g.getResponseHeader("content-type"))try{a=JSON.parse(g.responseText)}catch(n){b=new CSBJs_Exception,b.csb_code=-1,b.message="Invalid JSON response",h(b)}"undefined"!=typeof a&&null!==
a?"Exception"==a.Entity&&(b=new CSBJs_Exception,a.ErrorCode&&a.ErrorCode.value&&(b.csb_code=a.ErrorCode.value),b.message=a.ErrorMessage&&a.ErrorMessage.value?a.ErrorMessage.value:g.statusText,b.code=g.status,h(b)):h(new CSBJs_Exception(g.statusText,g.status))}CSBJs_Ajax.sessionCount--;"function"==typeof CSBJs_Ajax.endCallback&&CSBJs_Ajax.endCallback(g)}};switch(a){case "POST":case "PUT":if("undefined"==typeof d||null===d)d="";g.open(a,b,!0);g.setRequestHeader("Content-type","application/x-www-form-urlencoded");
g.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest");g.send(d);break;default:"undefined"!=typeof d&&null!==d&&(b=this.addUrlParams(b,d)),g.open(a,b,!0),g.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest"),g.send()}"function"==typeof CSBJs_Ajax.startCallback&&CSBJs_Ajax.startCallback(g);CSBJs_Ajax.sessionCount++;k.start()};
CSBJs_Ajax.getJsonp=function(a,b,d,e){for(var f=this,h=null,g="callback"+(new Date).getTime();"function"==typeof this._callbacks[g];)g="callback"+(new Date).getTime();var k=null;this._callbacks[g]=function(a){"function"==typeof d&&(d(a,k),delete f._callbacks[g]);CSBJs_Ajax.sessionCount--;h.clear()};a=this.addUrlParams(a,{callback:"CSBJs_Ajax._callbacks."+g});a=this.addUrlParams(a,{_jsonp:"CSBJs_Ajax._callbacks."+g});b&&(b.callbackData&&(k=b.callbackData,delete b.callbackData),a=this.addUrlParams(a,
b));var b=document.getElementsByTagName("head")[0],j=document.createElement("script");j.type="text/javascript";j.src=a;CSBJs_Ajax.sessionCount++;b.appendChild(j);h=new CSBJs_Ajax.Timer(f.timeout,function(){"function"==typeof e&&e();CSBJs_Ajax.sessionCount--;"function"==typeof f._callbacks[g]&&delete f._callbacks[g]})};CSBJs_Ajax.get=function(a,b,d,e,f){CSBJs_Ajax.request("GET",a,b,d,e,f)};
CSBJs_Ajax.post=function(a,b,d,e,f){CSBJs_OOP.isClass(b,"CSBJs_ServiceRequest")?(b=b.toString(),CSBJs_Ajax.request("POST",a,b,d,e,f)):CSBJs_Ajax.request("POST",a,JSON.stringify(b),d,e,f)};CSBJs_Ajax.put=function(a,b,d,e,f){CSBJs_OOP.isClass(b,"CSBJs_ServiceRequest")?(b=b.toString(),CSBJs_Ajax.request("PUT",a,b,d,e,f)):CSBJs_Ajax.request("PUT",a,JSON.stringify(b),d,e,f)};CSBJs_Ajax.del=function(a,b,d,e,f){CSBJs_Ajax.request("DELETE",a,b,d,e,f)};
CSBJs_Ajax.setCallback=function(a,b){"function"==typeof a&&(CSBJs_Ajax.startCallback=a);"function"==typeof b&&(CSBJs_Ajax.endCallback=b)};CSBJs_Ajax.loading=function(){return 0<CSBJs_Ajax.sessionCount?!0:!1};
CSBJs_Ajax.postFile=function(a,b,d,e,f,h){var g=document.createElement("iframe");g.height=0;g.width=0;g.style.border="0px";g.style.display="none";g.style.position="absolute";g.style.top="-1000px";g.style.left="-1000px";g.onload=function(){var f=g.contentWindow?g.contentWindow.document:g.contentDocument?g.contentDocument:g.document,j=f.createElement("form");j.action=a;j.method="post";j.enctype="multipart/form-data";j.encoding="multipart/form-data";j.appendChild(b);f.body.appendChild(j);"function"==
typeof d&&d();g.onload=function(){var a=g.contentDocument||g.contentWindow.document;if(a.body){try{var b=JSON.parse(a.body.innerHTML)}catch(d){"function"==typeof h&&h(d)}b&&"function"==typeof e&&e(b)}else"function"==typeof h&&h();g.parentNode.removeChild(g)};j.submit()};document.body.appendChild(g)};function CSBJs_Decorator(){}CSBJs_Decorator.prototype.render=function(){};
function CSBJs_Decorator_HtmlNode(a){this.tag=a;this.attributes={};this.innerContents=[];this.cssProperties={};this.escape=!1}CSBJs_Decorator_HtmlNode.inherits(CSBJs_Decorator);CSBJs_Decorator_HtmlNode.prototype.setClass=function(a){this.attributes._class=a};CSBJs_Decorator_HtmlNode.prototype.setId=function(a){this.attributes.id=a};CSBJs_Decorator_HtmlNode.prototype.appendChild=function(a){if("string"==typeof a||CSBJs_OOP.isSubClass(a,"CSBJs_Decorator_HtmlNode")||!isNaN(a))isNaN(a)||(a=""+a),this.innerContents.push(a)};
CSBJs_Decorator_HtmlNode.prototype.prependChild=function(a){if("string"==typeof a||CSBJs_OOP.isSubClass(a,"CSBJs_Decorator_HtmlNode")||!isNaN(a))isNaN(a)||(a=""+a),this.innerContents.splice(0,0,a)};CSBJs_Decorator_HtmlNode.prototype.css=function(a,b){this.cssProperties[a]=b};CSBJs_Decorator_HtmlNode.prototype.attr=function(a,b){this.attributes[a]=b};CSBJs_Decorator_HtmlNode.prototype.removeAttr=function(a){delete this.attributes[a]};
CSBJs_Decorator_HtmlNode.prototype.addClass=function(a){if("undefined"==typeof this.attributes._class||null===this.attributes._class.match(RegExp(a+"$|"+a+"s")))"undefined"==typeof this.attributes._class&&(this.attributes._class=""),this.attributes._class=this.attributes._class+" "+a,this.attributes._class=this.attributes._class.replace(/^\s+|\s+$/g,"")};
CSBJs_Decorator_HtmlNode.prototype.removeClass=function(a){c=this.attributes._class;this.attributes._class=c.replace(RegExp(" ?"+a,"g"),"").replace(/^\s+|\s+$/g,"")};
CSBJs_Decorator_HtmlNode.prototype.toString=function(){var a="",b;for(b in this.attributes){var d=b.replace(/^_/,"");this.attributes.hasOwnProperty(b)&&(a=a+" "+d+'="'+this.attributes[b]+'"')}b="";for(var e in this.cssProperties)this.cssProperties.hasOwnProperty(e)&&(b=b+e+":"+this.cssProperties[e]+"; ");b=0<b.length?' style="'+b.replace(/^\s+|\s+$/g,"")+'"':"";a="<"+this.tag+a+b+">";e="</"+this.tag+">";b="";for(d=0;d<this.innerContents.length;d++)"string"==typeof this.innerContents[d]?b+=this.innerContents[d]:
CSBJs_OOP.isSubClass(this.innerContents[d],"CSBJs_Decorator_HtmlNode")&&(b+=this.innerContents[d].toString());return a+b+e};
CSBJs_Decorator_HtmlNode.prototype.domNode=function(){var a=CSBJs_Core.ieBrowserVersion(),b=null,b=7>=a&&0<a?this.attributes&&"undefined"!==typeof this.attributes.type&&null!==this.attributes.type?document.createElement("<"+this.tag+' type="'+this.attributes.type+'">'):document.createElement(this.tag):document.createElement(this.tag),d;for(d in this.attributes)if(!(7>=a&&0<a&&"type"==d))if("_class"==d)b.className=this.attributes[d];else{var e=d.replace(/^_/,"");this.attributes.hasOwnProperty(d)&&
b.setAttribute(e,this.attributes[d])}d="";for(var f in this.cssProperties)this.cssProperties.hasOwnProperty(f)&&(d=d+f+":"+this.cssProperties[f]+"; ");0<d.length&&(7>=a&&0<a?b.style.setAttribute("cssText",d):b.setAttribute("style",d));for(a=0;a<this.innerContents.length;a++)"string"==typeof this.innerContents[a]?this.escape?b.appendChild(document.createTextNode(this.innerContents[a])):b.innerHTML=this.innerContents[a]:CSBJs_OOP.isSubClass(this.innerContents[a],"CSBJs_Decorator_HtmlNode")&&b.appendChild(this.innerContents[a].domNode());
return b};function CSBJs_App(){this.children=[]}CSBJs_App.prototype.addChild=function(a){a._parent=this;this.children.push(a)};CSBJs_App.prototype.render=function(){for(var a="",b=0;b<this.children.length;b++)a+=this.children[b].render().toString();return a};CSBJs_App.prototype.postRender=function(){for(var a=0;a<this.children.length;a++)this.children[a].postRender()};
function CSBJs_App_Window(a){this.title=null;this.dock=this.header="none";this.borderless=!0;this.closable=!1;this.closeAction="hide";this.onShowAction=this.onHideAction=null;this.layout="border";this.simpleWindow=this.collapsible=!1;this.id=this.onCloseAction=this.collapseButton=this.closeButton=null;this.y=this.x=0;this.maxHeight=this.minHeight=this.innerWidth=this.innerHeight=this.height=this.width=null;this.visible=!0;this.collapsed=this.draggable=this.resizable=this.disabled=!1;this.scrollable=
!0;this._parent=this.zIndex=null;this.children=[];this.events=null;this.decoratorTag="div";this.decoratorClass="CSBJs_App_Window";this.innerContainerClass=this.innerContainerId=null;this.id=a;this.sticky=!1;this.beforeLoadCallback=this.onLoadCallback=this.className=null}CSBJs_App_Window.closeButtonImage=null;CSBJs_App_Window.collapseButtonImage=null;CSBJs_App_Window.expandButtonImage=null;CSBJs_App_Window.prototype.addChild=function(a){a!=this._parent&&(a._parent=this,this.children.push(a))};
CSBJs_App_Window.prototype.removeAllChildren=function(){delete this.children;this.children=[]};CSBJs_App_Window.prototype.setPosition=function(a,b){this.x=a;this.y=b};CSBJs_App_Window.prototype.setWidth=function(a){this.width=a};CSBJs_App_Window.prototype.setHeight=function(a){this.height=a};CSBJs_App_Window.prototype.setInnerHeight=function(a){this.innerHeight=a};CSBJs_App_Window.prototype.setHeaderHeight=function(a){this.headerHeight=a};
CSBJs_App_Window.prototype.setTitle=function(a){this.title=a};CSBJs_App_Window.prototype.setResizable=function(a){this.resizable=a};CSBJs_App_Window.prototype.collapse=function(){if(!this.collapsed){this.collapsed=!0;if("function"==typeof this.onCollapseAction)this.onCollapseAction(this);this.reRender()}};CSBJs_App_Window.prototype.expand=function(){if(this.collapsed&&(this.collapsed=!1,this.reRender(),"function"==typeof this.onExpandAction))this.onExpandAction(this)};
CSBJs_App_Window.prototype.show=function(){if(!this.visible&&(this.visible=!0,this.reRender(),"function"==typeof this.onShowAction))this.onShowAction(this)};CSBJs_App_Window.prototype.hide=function(){if(this.visible){this.visible=!1;if("function"==typeof this.onHideAction)this.onHideAction(this);this.reRender()}};
CSBJs_App_Window.prototype.renderHeader=function(){var a=this,b=new CSBJs_Decorator_HtmlNode("div");b.addClass("CSBJs_App_Window_Header");b.addClass("csbjs-window-header-"+this.header);if(null!==this.title){var d=new CSBJs_Decorator_HtmlNode("span");d.addClass("CSBJs_App_Window_Header_Title");d.appendChild(this.title);b.appendChild(d)}d=new CSBJs_Decorator_HtmlNode("div");d.addClass("CSBJs_App_Window_Header_Controls");d.css("text-align","right");this.collapsible&&(null===this.collapseButton&&(this.collapseButton=
new CSBJs_App_Button(this.id+"_collapseButton")),this.collapsed?null!==CSBJs_App_Window.expandButtonImage?this.collapseButton.image=CSBJs_App_Window.expandButtonImage:this.collapseButton.setLabel("+"):null!==CSBJs_App_Window.collapseButtonImage?this.collapseButton.image=CSBJs_App_Window.collapseButtonImage:this.collapseButton.setLabel("-"),this.collapseButton.addEventHandler("mouseup",function(){a.collapsed?a.expand():a.collapse()}),d.appendChild(this.collapseButton.render()));this.closable&&(null===
this.closeButton&&(this.closeButton=new CSBJs_App_Button(this.id+"_closeButton"),this.closeButton.setLabel("X"),this.closeButton.addEventHandler("mouseup",function(){if("function"==typeof a.onCloseAction)a.onCloseAction(a);a.hide()}),CSBJs_App_Window.closeButtonImage&&(this.closeButton.image=CSBJs_App_Window.closeButtonImage)),d.appendChild(this.closeButton.render()));b.appendChild(d);return b};
CSBJs_App_Window.prototype.preRender=function(){"function"==typeof this.beforeLoadCallback&&this.visible&&this.beforeLoadCallback(this);delete this.decorator;this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.addClass(this.decoratorClass);null!==this.id&&this.decorator.setId(this.id);if(this.draggable)this.decorator.addClass("CSBJs_App_Window_Draggable"),this.sticky?this.decorator.css("position","fixed"):this.decorator.css("position","absolute"),this.decorator.css("left",
this.x+"px"),this.decorator.css("top",this.y+"px");else if("none"!=this.dock)switch(this.dock){case "bottom":this.decorator.css("position","fixed"),this.decorator.css("bottom","0px"),this.decorator.css("width","99%"),this.decorator.addClass("csbjs-app-window-docking"),this.decorator.addClass("csbjs-app-window-docking-bottom"),this.collapsible=!0}this.resizable&&this.decorator.addClass("CSBJs_App_Window_Resizable");null!==this.width&&("number"==typeof width?this.decorator.css("width",this.width+"px"):
"string"==typeof width&&this.decorator.css("width",this.width));null!==this.height&&("number"==typeof height?this.decorator.css("height",this.height+"px"):"string"==typeof height&&this.decorator.css("height",this.height));null!==this.zIndex&&this.decorator.css("z-index",this.zIndex);"undefined"!=typeof this.header&&null!==this.header&&"none"!=this.header&&this.decorator.appendChild(this.renderHeader());this.visible||this.decorator.addClass("csbjs-app-window-hidden");if(null!==this.className)for(var a=
this.className.split(" "),b=0;b<a.length;b++)this.decorator.addClass(a[b])};
CSBJs_App_Window.prototype.render=function(){this.preRender();if(this.collapsed||!this.visible)return this.decorator;var a=null;this.simpleWindow?this.decorator.addClass("csbjs-window-type-simple"):(a=new CSBJs_Decorator_HtmlNode("div"),a.addClass("CSBJs_App_Window_InnerContainer"),null!==this.innerContainerId&&a.setId(this.innerContainerId),null!==this.innerContainerClass&&a.addClass(this.innerContainerClass),this.scrollable&&a.css("overflow","auto"),this.innerHeight&&("number"==typeof this.innerHeight?
a.css("height",this.innerHeight+"px"):"string"==typeof this.innerHeight&&a.css("height",this.innerHeight)),this.maxHeight&&("number"==typeof this.maxHeight?a.css("max-height",this.maxHeight+"px"):"string"==typeof this.maxHeight&&a.css("max-height",this.maxHeight)),this.innerWidth&&("number"==typeof this.innerWidth?a.css("width",this.innerWidth+"px"):"string"==typeof this.innerWidth&&a.css("width",this.innerWidth)));for(var b=0;b<this.children.length;b++)CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Window")||
CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Window_TwoColumns")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Window_Tabs")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Button")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Field")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Html")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_DataGrid")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_App_Canvas")||CSBJs_OOP.isSubClass(this.children[b],"CSBJs_Form")?null!==a?a.appendChild(this.children[b].render()):
this.decorator.appendChild(this.children[b].render()):"string"==typeof this.children[b]&&(null!==a?a.appendChild(this.children[b]):this.decorator.appendChild(this.children[b]));null!==a&&this.decorator.appendChild(a);return this.decorator};CSBJs_App_Window.prototype.getChild=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].id==a)return this.children[b];return!1};CSBJs_App_Window.prototype.messageHandler=function(){};
CSBJs_App_Window.prototype.addEventHandler=function(a,b){null===this.events&&(this.events=[]);switch(a){case "mousedown":case "mouseup":case "hover":case "load":case "keypress":case "mousemove":case "mouseout":case "mouseover":this.events[a]=b}};
CSBJs_App_Window.prototype.clearEvents=function(){var a=this.node();if(!(null===a||"object"!=typeof a)){for(var b in this.events)this.events.hasOwnProperty(b)&&(a.removeEventListener?a.removeEventListener(b,this.events[b],!0):a.detachEvent&&a.detachEvent(b,this.events[b],!0));for(a=0;a<this.children.length;a++)"function"==typeof this.children[a].clearEvents&&this.children[a].clearEvents()}};
CSBJs_App_Window.prototype.postRender=function(){for(var a=0;a<this.children.length;a++)(CSBJs_OOP.isSubClass(this.children[a],"CSBJs_App_Window")||CSBJs_OOP.isSubClass(this.children[a],"CSBJs_App_Window_Tabs_Tab")||CSBJs_OOP.isSubClass(this.children[a],"CSBJs_App_Button")||CSBJs_OOP.isSubClass(this.children[a],"CSBJs_App_Field")||CSBJs_OOP.isSubClass(this.children[a],"CSBJs_App_DataGrid")||CSBJs_OOP.isSubClass(this.children[a],"CSBJs_App_Canvas")||CSBJs_OOP.isSubClass(this.children[a],"CSBJs_Form"))&&
!0===this.children[a].visible&&this.children[a].postRender();a=this.node();if(!(null===a||"object"!=typeof a)){for(var b in this.events)this.events.hasOwnProperty(b)&&(a.addEventListener?a.addEventListener(b,this.events[b],!0):a.attachEvent&&a.attachEvent(b,this.events[b],!0));null!==this.closeButton&&this.closeButton.postRender();null!==this.collapseButton&&this.collapseButton.postRender();if("function"==typeof this.onLoadCallback&&this.visible)this.onLoadCallback(this)}};
CSBJs_App_Window.prototype.reRender=function(){var a=this.node();if(!(null===a||"object"!=typeof a)&&!(null===a.parentNode||"undefined"==typeof a.parentNode)){var b=function(a){for(var e=0;e<a.length;e++)CSBJs_OOP.isSubClass(a[e],"CSBJs_App_Window")&&b(a[e].children),"function"==typeof a[e].clearEvents&&a[e].clearEvents()};b(this.children);this.clearEvents();a.parentNode.replaceChild(this.render().domNode(),a);if(!1===this.visible)for(a=0;a<this.children.length;a++)"function"==typeof this.children[a].hidePostRender&&
this.children[a].hidePostRender();this.visible&&this.postRender()}};CSBJs_App_Window.prototype.onLoad=function(a){"function"==typeof a&&(this.onLoadCallback=a)};CSBJs_App_Window.prototype.beforeLoad=function(a){"function"==typeof a&&(this.beforeLoadCallback=a)};CSBJs_App_Window.prototype.onClose=function(a){"function"==typeof a&&(this.onCloseAction=a)};CSBJs_App_Window.prototype.node=function(){if(null!==this.id)return document.getElementById(this.id)};
CSBJs_App_Window.prototype.alignCenter=function(){var a=this.node();if("undefined"!=typeof a&&null!==a){var b=0,d=0,e=null,e="undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight;e>a.offsetHeight&&(d=Math.floor((e-a.offsetHeight)/2)+"px");e="undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement.clientWidth;e>a.offsetWidth&&(b=Math.floor((e-a.offsetWidth)/2)+"px");a.style.left=b;a.style.top=d}};
function CSBJs_App_Window_Modal(a){this.title="";this.title=null;this.header="none";this.borderless=!0;this.closable=!1;this.closeAction="hide";this.layout="border";this.simpleWindow=this.collapsible=!1;this.closeButton=null;this.y=this.x=0;this.width=600;this.minHeight=this.height=null;this.collapsed=this.draggable=this.resizable=this.disabled=this.visible=!1;this.zIndex=1E5;this.children=[];this.events=null;this.decoratorTag="div";this.decoratorClass="CSBJs_App_Window";this.overlayDecorator=null;
this.overlayDecoratorClass="CSBJs_App_Window_Modal-overlay";this.id=a;this.sticky=!1;this.className=null}CSBJs_App_Window_Modal.inherits(CSBJs_App_Window);
CSBJs_App_Window_Modal.prototype.preRender=function(){this.parent.preRender.call(this);this.decorator.css("margin","auto");this.width?this.decorator.css("width",this.width+"px"):this.decorator.css("width","100%");this.decorator.addClass("CSBJs_App_Window_Modal");this.overlayDecorator=new CSBJs_Decorator_HtmlNode("div");this.overlayDecorator.addClass(this.overlayDecoratorClass);this.overlayDecorator.css("position","fixed");this.overlayDecorator.css("display","block");this.overlayDecorator.css("padding",
"0px");this.overlayDecorator.css("margin","0px");this.overlayDecorator.css("top","0px");this.overlayDecorator.css("left","0px");this.overlayDecorator.css("width","100%");this.overlayDecorator.css("height","100%");this.overlayDecorator.css("z-index",this.zIndex);this.overlayDecorator.setId(this.id+"-overlay");this.overlayDecorator.appendChild(this.decorator);this.visible||(this.overlayDecorator.addClass("csbjs-app-window-modal-overlay-hidden"),this.overlayDecorator.css("display","none"))};
CSBJs_App_Window_Modal.prototype.reRender=function(){var a=document.getElementById(this.id+"-overlay");if(!(null===a||"object"!=typeof a)&&!(null===a.parentNode||"undefined"==typeof a.parentNode)){var b=function(a){for(var e=0;e<a.length;e++)CSBJs_OOP.isSubClass(a[e],"CSBJs_App_Window")&&b(a[e].children),"function"==typeof a[e].clearEvents&&a[e].clearEvents()};b(this.children);this.clearEvents();a.parentNode.replaceChild(this.render().domNode(),a);if(!1===this.visible)for(a=0;a<this.children.length;a++)"function"==
typeof this.children[a].hidePostRender&&this.children[a].hidePostRender();this.visible&&this.postRender()}};CSBJs_App_Window_Modal.prototype.show=function(){"object"!=typeof CSBJs_App_Window_Modal.currentWindow&&(CSBJs_App_Window_Modal.currentWindow=this,this.parent.show.call(this),this.centerWindow())};CSBJs_App_Window_Modal.prototype.hide=function(){CSBJs_App_Window_Modal.currentWindow==this&&(CSBJs_App_Window_Modal.currentWindow=!1,this.parent.hide.call(this))};
CSBJs_App_Window_Modal.isOpen=function(){return"object"==typeof CSBJs_App_Window_Modal.currentWindow?!0:!1};CSBJs_App_Window_Modal.prototype.render=function(){this.parent.render.call(this);return this.overlayDecorator};CSBJs_App_Window_Modal.prototype.centerWindow=function(){var a=this.node();if("undefined"!=typeof a&&null!==a){var b=null,b="undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight;b>a.offsetHeight&&(a.style.marginTop=(b-a.offsetHeight)/2+"px")}};
CSBJs_App_Window_Modal.prototype.postRender=function(){this.parent.postRender.call(this);this.centerWindow()};
function CSBJs_App_Window_Alert(a){this.title="";this.title=null;this.header="none";this.borderless=!0;this.closable=!1;this.closeAction="hide";this.layout="border";this.simpleWindow=this.collapsible=!1;this.id=this.closeButton=null;this.y=this.x=0;this.innerWidth=this.width=400;this.minHeight=this.height=null;this.collapsed=this.draggable=this.resizable=this.disabled=this.visible=!1;this.zIndex=100100;this.children=[];this.events=null;this.decoratorTag="div";this.decoratorClass="CSBJs_App_Window";
this.overlayDecorator=null;this.overlayDecoratorClass="CSBJs_App_Window_Alert-overlay";this.innerContainerId="CSBJs_App_Window_Alert-window";this.id=a;this.sticky=!1;this.className=null;this.messageHtml=new CSBJs_App_Html(this.id+"-message");this.okButton=new CSBJs_App_Button(this.id+"_OK_Button");this.okButton.setLabel("OK");this.cancelButton=new CSBJs_App_Button(this.id+"_Cancel_Button");this.cancelButton.setLabel("Cancel");this.addChild(this.messageHtml);this.addChild(this.okButton);this.addChild(this.cancelButton);
this.position="center";this.addedClass=""}CSBJs_App_Window_Alert.inherits(CSBJs_App_Window);CSBJs_App_Window_Alert.instance=null;CSBJs_App_Window_Alert.getInstance=function(){null===CSBJs_App_Window_Alert.instance&&(CSBJs_App_Window_Alert.instance=new CSBJs_App_Window_Alert("csbjs-alert-window"));return CSBJs_App_Window_Alert.instance};
CSBJs_App_Window_Alert.alert=function(a,b){var d;d="undefined"!=typeof b?b:{};d.cancelButtonHidden=!0;if("undefined"==typeof b||"undefined"==typeof b.position)d.position="center-top";CSBJs_App_Window_Alert.confirm(a,d)};CSBJs_App_Window_Alert.wait=function(a,b){if("undefined"==typeof b||null===b)b={};b.cancelButtonHidden=!0;b.okButtonHidden=!0;CSBJs_App_Window_Alert.confirm(a,b)};
CSBJs_App_Window_Alert.waitComplete=function(a,b){CSBJs_App_Window_Alert.getInstance().hide();CSBJs_App_Window_Alert.confirm(a,b)};CSBJs_App_Window_Alert.close=function(){CSBJs_App_Window_Alert.getInstance().hide()};
CSBJs_App_Window_Alert.waitLoading=function(a,b,d){var e=new CSBJs_Decorator_HtmlNode("div");e.addClass("csbjs-alert-message-text");e.appendChild(a);a=new CSBJs_Decorator_HtmlNode("div");a.addClass("csbjs-loading-indicator");a.appendChild('<img src="'+b+'" />');CSBJs_App_Window_Alert.wait(e.toString()+a.toString(),d)};
CSBJs_App_Window_Alert.confirm=function(a,b){var d=CSBJs_App_Window_Alert.getInstance();CSBJs_App_Window_Alert.isOpen()||(d.message=a,d.okButton.clearEvents(),d.cancelButton.clearEvents(),d.position="center",d.okButton.setVisible(!0),d.okButton.setLabel("Ok"),d.cancelButton.setVisible(!0),d.cancelButton.setLabel("Cancel"),"undefined"!=typeof b?("undefined"!=typeof b.okLabel&&d.okButton.setLabel(b.okLabel),"undefined"!=typeof b.cancelLabel&&d.cancelButton.setLabel(b.cancelLabel),"undefined"!=typeof b.position&&
(d.position=b.position),"undefined"!=typeof b.cancelButtonHidden&&d.cancelButton.setVisible(!b.cancelButtonHidden),"undefined"!=typeof b.okButtonHidden&&d.okButton.setVisible(!b.okButtonHidden),d.innerWidth=isNaN(b.width)?d.width:b.width,d.addedClass="undefined"!=typeof b.cls?b.cls:"","function"==typeof b.okAction?d.okButton.addEventHandler("mouseup",function(a){!0!==b.okAction(a)&&d.hide()}):d.okButton.addEventHandler("mouseup",function(){d.hide()}),"function"==typeof b.cancelAction?d.cancelButton.addEventHandler("mouseup",
function(a){!0!==b.cancelAction(a)&&d.hide()}):d.cancelButton.addEventHandler("mouseup",function(){d.hide()})):(d.okButton.addEventHandler("mouseup",function(){d.hide()}),d.cancelButton.addEventHandler("mouseup",function(){d.hide()})),d.show())};
CSBJs_App_Window_Alert.prototype.preRender=function(){this.parent.preRender.call(this);this.decorator.css("margin","auto");this.decorator.css("width",this.innerWidth+"px");this.addedClass&&0<this.addedClass.length?this.decorator.addClass("CSBJs_App_Window_Alert "+this.addedClass):this.decorator.addClass("CSBJs_App_Window_Alert");this.overlayDecorator=new CSBJs_Decorator_HtmlNode("div");this.overlayDecorator.addClass(this.overlayDecoratorClass);this.overlayDecorator.css("position","fixed");this.overlayDecorator.css("display",
"block");this.overlayDecorator.css("padding","0px");this.overlayDecorator.css("margin","0px");this.overlayDecorator.css("top","0px");this.overlayDecorator.css("left","0px");this.overlayDecorator.css("width","100%");this.overlayDecorator.css("height","100%");this.overlayDecorator.css("z-index",this.zIndex);this.overlayDecorator.setId(this.id+"-overlay");this.overlayDecorator.appendChild(this.decorator);this.visible||(this.overlayDecorator.addClass("csbjs-app-window-alert-overlay-hidden"),this.overlayDecorator.css("display",
"none"));this.messageHtml.setContent(this.message)};
CSBJs_App_Window_Alert.prototype.reRender=function(){var a=document.getElementById(this.id+"-overlay");if(!(null===a||"object"!=typeof a)&&!(null===a.parentNode||"undefined"==typeof a.parentNode)){var b=function(a){for(var e=0;e<a.length;e++)CSBJs_OOP.isSubClass(a[e],"CSBJs_App_Window")&&b(a[e].children),"function"==typeof a[e].clearEvents&&a[e].clearEvents()};b(this.children);this.clearEvents();this.okButton.clearEvents();this.cancelButton.clearEvents();a.parentNode.replaceChild(this.render().domNode(),
a);this.postRender()}};CSBJs_App_Window_Alert.prototype.show=function(){if("object"!=typeof CSBJs_App_Window_Alert.currentWindow){var a=this.node();"undefined"==typeof a||null===a?document.body.appendChild(this.render().domNode()):this.reRender();if("function"==typeof this.onShowAction)this.onShowAction(this);CSBJs_App_Window_Alert.currentWindow=this;this.parent.show.call(this);this.centerWindow()}};
CSBJs_App_Window_Alert.prototype.hide=function(){if(CSBJs_App_Window_Alert.currentWindow==this){CSBJs_App_Window_Alert.currentWindow=!1;this.parent.hide.call(this);var a=document.getElementById(this.id);("undefined"!=typeof a||null!==a)&&a.parentNode.removeChild(a)}};CSBJs_App_Window_Alert.isOpen=function(){return"object"==typeof CSBJs_App_Window_Alert.currentWindow?!0:!1};CSBJs_App_Window_Alert.prototype.render=function(){this.parent.render.call(this);return this.overlayDecorator};
CSBJs_App_Window_Alert.prototype.centerWindow=function(){var a=this.node();if("undefined"!=typeof a&&null!==a){var b=null,b="undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight;b>a.offsetHeight&&(a.style.marginTop=(b-a.offsetHeight)/2+"px")}};CSBJs_App_Window_Alert.prototype.postRender=function(){this.parent.postRender.call(this);this.centerWindow()};
function CSBJs_App_Button(a){this.id=a;this.decorator=this._parent=null;this.label="Button";this.title=this.image=null;this.disabled=!1;this.events=null;this.decoratorTag="button";this.decoratorClass="CSBJs_App_Button";this.className=this.width=this.height=null;this.visible=!0;this.type="button"}CSBJs_App_Button.prototype.setLabel=function(a){this.label=a};CSBJs_App_Button.prototype.setVisible=function(a){this.visible=a};
CSBJs_App_Button.prototype.preRender=function(){delete this.decorator;this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.addClass(this.decoratorClass);this.decorator.attr("type",this.type);"undefined"!=typeof this.id&&null!==this.id&&this.decorator.setId(this.id);if(null===this.image)this.decorator.appendChild(this.label);else{var a=new CSBJs_Decorator_HtmlNode("img");a.attr("src",this.image);this.width&&a.attr("width",this.width);this.height&&a.attr("height",this.height);
this.decorator.appendChild(a)}null!==this.title&&this.decorator.attr("title",this.title);this.disabled&&this.decorator.attr("disabled","disabled");if(null!==this.className)for(var a=this.className.split(" "),b=0;b<a.length;b++)this.decorator.addClass(a[b]);this.visible||this.decorator.addClass("csbjs-app-button-hidden")};CSBJs_App_Button.prototype.render=function(){this.preRender();return this.decorator};CSBJs_App_Button.prototype.node=function(){if(null!==this.id)return document.getElementById(this.id)};
CSBJs_App_Button.prototype.postRender=function(){var a=this.node();if(!(null===a||"object"!=typeof a)){var b=!1;if(a.addEventListener)b=!1;else if(a.attachEvent)b=!0;else return;for(var d in this.events)this.events.hasOwnProperty(d)&&(b?a.attachEvent("on"+d,this.events[d]):a.addEventListener(d,this.events[d],!0))}};
CSBJs_App_Button.prototype.clearEvents=function(){var a=this.node();if(!(null===a||"object"!=typeof a)){var b=!1;if(a.removeEventListener)b=!1;else if(a.detachEvent)b=!0;else return;for(var d in this.events)this.events.hasOwnProperty(d)&&(b?a.detachEvent("on"+d,this.events[d]):a.removeEventListener(d,this.events[d],!0))}};CSBJs_App_Button.prototype.addEventHandler=function(a,b){null===this.events&&(this.events=[]);switch(a){case "mousedown":case "mouseup":this.events[a]=b}};
function CSBJs_App_Html(a){this.id=a;this.events=this._parent=null;this.decoratorTag="div";this.decoratorClass="CSBJs_App_Html";this.className=this.decorator=null;this.visible=!0;this.content=null;this.htmlDecode=!1}CSBJs_App_Html.prototype.setContent=function(a){this.content=a};
CSBJs_App_Html.prototype.preRender=function(){this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.escape=!1;this.decorator.addClass(this.decoratorClass);"undefined"!=typeof this.id&&null!==this.id&&this.decorator.setId(this.id);if(null!==this.className)for(var a=this.className.split(" "),b=0;b<a.length;b++)this.decorator.addClass(a[b])};
CSBJs_App_Html.prototype.render=function(){this.preRender();if(!1===this.visible)return this.decorator;if(this.content){var a="";"undefined"!==typeof document&&!0===this.htmlDecode?(a=document.createElement("div"),a.innerHTML=this.content,a=a.nodeValue):a=this.content;this.decorator.appendChild(a)}return this.decorator};CSBJs_App_Html.prototype.node=function(){if(null!==this.id)return document.getElementById(this.id)};CSBJs_App_Html.prototype.postRender=function(){};
CSBJs_App_Html.prototype.addEventHandler=function(a,b){null===this.events&&(this.events=[]);switch(a){case "click":case "focus":case "change":this.events[a]=b}};CSBJs_App_Html.prototype.reRender=function(){var a=this.node();!(null===a||"object"!=typeof a)&&!(null===a.parentNode||"undefined"==typeof a.parentNode)&&a.parentNode.replaceChild(this.render().domNode(),a)};
function CSBJs_App_Field(a){this.id=a;this.image=this.label=this.decorator=this._parent=null;this.disabled=!1;this.events=null;this.decoratorTag="input";this.decoratorClass="CSBJs_App_Field";this.value=this.attributes=this.className=this.outerClassName=null;this.readonly=!1;this.visible=!0;this.height=this.width=null}CSBJs_App_Field.prototype.setLabel=function(a){this.label=a};CSBJs_App_Field.prototype.setValue=function(a){this.value=a};CSBJs_App_Field.prototype.getValue=function(){return this.value};
CSBJs_App_Field.prototype.preRender=function(){this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.addClass(this.decoratorClass);this.decorator.attr("type","text");"undefined"!=typeof this.id&&null!==this.id&&this.decorator.setId(this.id);null!==this.value&&this.decorator.attr("value",this.value);this.disabled&&this.decorator.attr("disabled","disabled");this.readonly&&(this.decorator.attr("readonly","readonly"),this.decorator.addClass("csbjs-app-field-readonly"),this.decorator.css("border",
"none"));if(null!==this.className)for(var a=this.className.split(" "),b=0;b<a.length;b++)this.decorator.addClass(a[b]);this.width&&this.decorator.css("width",this.width+"px");this.height&&this.decorator.css("height",this.height+"px");if(null!==this.attributes)for(var d in this.attributes)this.attributes.hasOwnProperty(d)&&this.decorator.attr(d,this.attributes[d])};
CSBJs_App_Field.prototype.render=function(){this.preRender();var a=new CSBJs_Decorator_HtmlNode("div");a.addClass("CSBJs_App_FieldWrapper");a.setId("Wrapper_CSBJs_fieldId_"+this.id);this.visible||a.addClass("csbjs-app-fieldwrapper-hidden");if(null!==this.outerClassName)for(var b=this.outerClassName.split(" "),d=0;d<b.length;d++)a.addClass(b[d]);null!==this.label&&(b=new CSBJs_Decorator_HtmlNode("span"),b.addClass("CSBJs_App_Field_Label"),b.appendChild(this.label),a.appendChild(b));this.visible&&a.appendChild(this.decorator);
return a};CSBJs_App_Field.prototype.node=function(){if(null!==this.id)return document.getElementById(this.id)};CSBJs_App_Field.prototype.clearEvents=function(){var a=this.node();if(!(null===a||"object"!=typeof a))for(var b in this.events)this.events.hasOwnProperty(b)&&(a.removeEventListener?a.removeEventListener(b,this.events[b],!0):a.detachEvent&&a.detachEvent(b,this.events[b],!0))};
CSBJs_App_Field.prototype.postRender=function(){var a=this.node();if(!(null===a||"object"!=typeof a))for(var b in this.events)this.events.hasOwnProperty(b)&&(a.addEventListener?a.addEventListener(b,this.events[b],!0):a.attachEvent&&a.attachEvent("on"+b,this.events[b],!0))};CSBJs_App_Field.prototype.addEventHandler=function(a,b){null===this.events&&(this.events=[]);switch(a){case "click":case "focus":case "change":case "blur":case "keydown":case "keyup":this.events[a]=b}};
function CSBJs_App_Field_File(a){this.id=a;this.image=this.label=this.decorator=this._parent=null;this.disabled=!1;this.events=null;this.decoratorTag="input";this.decoratorClass="CSBJs_App_Field_File";this.data=this.value=null}CSBJs_App_Field_File.inherits(CSBJs_App_Field);CSBJs_App_Field_File.prototype.preRender=function(){this.parent.preRender.call(this);this.decorator.attr("type","file");this.decorator.attr("name",this.id);this.value&&!0===this.value&&this.decorator.attr("checked","checked")};
CSBJs_App_Field_File.prototype.setData=function(a){this.data=a};CSBJs_App_Field_File.prototype.getData=function(){return this.data};function CSBJs_App_Field_TextArea(a){this.id=a;this.image=this.label=this.decorator=this._parent=null;this.readonly=this.disabled=!1;this.resizable=!0;this.events=null;this.decoratorTag="textarea";this.decoratorClass="CSBJs_App_Field_TextArea";this.value=null}CSBJs_App_Field_TextArea.inherits(CSBJs_App_Field);
CSBJs_App_Field_TextArea.prototype.render=function(){this.preRender();var a=new CSBJs_Decorator_HtmlNode("div");a.addClass("CSBJs_App_FieldWrapper");a.setId("Wrapper_CSBJs_fieldId_"+this.id);if(!1===this.visible)return a;if(null!==this.label){var b=new CSBJs_Decorator_HtmlNode("span");b.addClass("CSBJs_App_Field_Label");b.appendChild(this.label);a.appendChild(b)}null!==this.value&&(this.decorator.attr("name",this.id),this.decorator.removeAttr("value"),this.decorator.removeAttr("type"),this.decorator.appendChild(this.value));
this.readonly&&this.decorator.attr("readonly","readonly");this.resizable||this.decorator.css("resize","none");if(null!==this.attributes)for(var d in this.attributes)this.attributes.hasOwnProperty(d)&&this.decorator.attr(d,this.attributes[d]);a.appendChild(this.decorator);return a};function CSBJs_Timer(){}
CSBJs_Timer.waitUntil=function(a,b,d){if("function"!=typeof a||"function"!=typeof b)return!1;var e=(new Date).getTime();"undefined"==typeof d&&(d=3E4);var f=function(){if(a())return b(),!0;if((new Date).getTime()-e>d)return!1;setTimeout(f,1)};f()};
function CSBJs_Form(a){this.formClass="CSBJs_Form";this.formId="undefined"!=typeof a?a:"CSBJs_Form_Default";this.formHeaderContent=this.formLabel=null;this.groups={};this.method="post";this.action="";this.clientValidation=!0;this.serializeSubmit=this.bypassValidation=!1;this.serializedDataElement=null;this.error=!1;this.visible=!0;this.stepForm=!1;this.steps=[];this.currentStep=this.lastStep=this.firstStep=null;this.disabled=!1;this.decorator=null;this.decoratorTag="form";this.outerClassName=null;
this.autocomplete=!1;this.onSubmitInvalid=this.onSubmitValid=this.onSubmit=null;this.ajaxSubmit=!1;this.validateErrors=this.ajaxSubmitError=this.ajaxSubmitComplete=this.ajaxSubmitStart=null;this.saveFormState=!1;this.hiddenFields=null}CSBJs_Form.forms={};CSBJs_Form.getFormById=function(a){return"undefined"!==typeof CSBJs_Form.forms[a]&&null!==CSBJs_Form.forms[a]?CSBJs_Form.forms[a]:null};
CSBJs_Form.prototype.setAjaxSubmitHandler=function(a){if(typeof("undefined"!=a)&&("function"==typeof a.start&&(this.ajaxSubmitStart=a.start),"function"==typeof a.complete&&(this.ajaxSubmitComplete=a.complete),"function"==typeof a.error))this.ajaxSubmitError=a.error};
CSBJs_Form.prototype.preRender=function(){this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.addClass(this.formClass);this.decorator.setId(this.formId);this.decorator.attr("name",this.formId);this.decorator.attr("method",this.method);this.decorator.attr("action",this.action);this.stepForm&&this.decorator.addClass("StepForm");this.autocomplete||this.decorator.attr("autocomplete","off")};
CSBJs_Form.prototype.postRender=function(a){if(!CSBJs_Core.isClient())return!1;for(var b in this.groups)this.groups.hasOwnProperty(b)&&this.groups[b].postRender();if(this.clientValidation){var d=this;this.getFormNode().onsubmit=function(){return d.formEvent("onSubmit")}}("undefined"===typeof a||null===a)&&this.updateConditionals();return!0};
CSBJs_Form.prototype.render=function(a){this.preRender();("undefined"===typeof a||null===a)&&this.updateConditionals();this.formLabel&&(a=new CSBJs_Decorator_HtmlNode("div"),a.addClass("csbjs-form-label"),a.appendChild(this.formLabel),this.decorator.appendChild(a));var a=[],b;for(b in this.groups)this.groups.hasOwnProperty(b)&&a.push(this.groups[b]);a.sort(function(a,b){return a.displayOrder-b.displayOrder});this.stepForm&&this.decorator.appendChild(this.stepNavigationDecorator(!0));for(var d in a)a.hasOwnProperty(d)&&
(b=!1,this.stepForm&&this.currentStep&&this.currentStep===a[d].step&&(b=!0),this.decorator.appendChild(a[d].render(b)));CSBJs_Form.forms[this.formId]=this;return this.decorator};CSBJs_Form.prototype.html=function(){return this.render().toString()};
CSBJs_Form.prototype.stepNavigationDecorator=function(a){var b=new CSBJs_Decorator_HtmlNode("ul");b.addClass("CSBJs_Form_StepNavigation");for(var d in this.steps)if(this.steps.hasOwnProperty(d)){var e=new CSBJs_Decorator_HtmlNode("li");this.currentStep===this.steps[d]&&e.addClass("current_step");e.appendChild(this.steps[d].label);b.appendChild(e)}a&&null!==this.currentStep&&(a=new CSBJs_Decorator_HtmlNode("div"),a.addClass("CSBJS_Form_CurrentStepLabel"),a.appendChild(this.currentStep.label),b.appendChild(a));
return b};CSBJs_Form.prototype.stepNavigationHtml=function(a){var b="</ul>",d="",e;for(e in this.steps)this.steps.hasOwnProperty(e)&&(d+="<li"+(this.currentStep===this.steps[e]?' class="current_step"':"")+">"+this.steps[e].label+"</li>");a&&null!==this.currentStep&&(b+='<div class="CSBJS_Form_CurrentStepLabel">'+this.currentStep.label+"</div>");return'<ul class="CSBJs_Form_StepNavigation">'+d+b};CSBJs_Form.prototype.setId=function(a){this.formId=a};
CSBJs_Form.prototype.setAction=function(a){this.action=a};CSBJs_Form.prototype.setMethod=function(a){this.method=a};CSBJs_Form.prototype.enableStepForm=function(a){this.stepForm=a};CSBJs_Form.prototype.addGroup=function(a){CSBJs_OOP.isSubClass(a,"CSBJs_Form_Group")&&(a.parentForm=this,this.groups[a.name]=a)};
CSBJs_Form.prototype.addStep=function(a){CSBJs_OOP.isSubClass(a,"CSBJs_Form_Step")&&(null===this.firstStep&&(this.firstStep=a),null===this.currentStep&&(this.currentStep=a),null!==this.lastStep&&(a.prevStep=this.lastStep,this.lastStep.nextStep=a),this.steps.push(a),this.lastStep=a)};CSBJs_Form.prototype.setCurrentStep=function(a){CSBJs_OOP.isSubClass(a,"CSBJs_Form_Step")&&(this.currentStep=a)};
CSBJs_Form.prototype.gotoNextStep=function(){if(null!==this.currentStep){if(this.currentStep===this.lastStep&&this.formEvent("onSubmit"))return this.submit(),!0;if(null!==this.currentStep.nextStep){this.updateFields();var a=this.currentStep.validate();a&&this.setCurrentStep(this.currentStep.nextStep);this.reloadForm();return a}return!1}return null};
CSBJs_Form.prototype.gotoPreviousStep=function(){if(null!==this.currentStep)if(null!==this.currentStep.prevStep)this.currentStep=this.currentStep.prevStep,this.reloadForm();else return!1;return null};CSBJs_Form.prototype.removeGroupByName=function(a){delete this.groups[a]};CSBJs_Form.prototype.getGroupByName=function(a){return this.groups[a]};
CSBJs_Form.prototype.getElementByName=function(a){for(var b in this.groups)if(this.groups.hasOwnProperty(b)){var d=this.groups[b].getElementByName(a);if(null!==d)return d}return null};CSBJs_Form.prototype.getFormNode=function(){return"undefined"==typeof document?null:document.getElementById(this.formId)};CSBJs_Form.prototype.submit=function(){if("undefined"==typeof document)return!1;this.formEvent("onsubmit");document[this.formId].submit();return!0};
CSBJs_Form.prototype.disableForm=function(a,b){if("undefined"!=typeof b)for(var d=[],e=0;e<b.length;e++)d[b[e]]=!0;for(var f in this.groups){var h=e=0;if(this.groups.hasOwnProperty(f)){var g=this.groups[f],k;for(k in g.elements)g.elements.hasOwnProperty(k)&&(e++,"undefined"!=typeof d&&"undefined"!=typeof d[k]||(g.elements[k].setDisabled(a),h++));e==h&&a?g.setDisabled(!0):g.setDisabled(!1)}}this.disabled=a;this.reloadForm()};
CSBJs_Form.prototype.updateFields=function(){if("undefined"==typeof document)return!1;for(var a in this.groups)if(this.groups.hasOwnProperty(a)){var b=this.groups[a],d;for(d in b.elements)b.elements.hasOwnProperty(d)&&b.elements[d].updateValue()}return!1};
CSBJs_Form.prototype.applyFilters=function(a){if(null!==a&&"undefined"!=typeof a&&"undefined"!=typeof document){var b=this.getElementByName(a.name.replace(/\[\]/,""));return null!==b&&!1!==b?b.applyFilters():!1}for(b in this.groups)if(this.groups.hasOwnProperty(b)){var a=this.groups[b],d;for(d in a.elements)a.elements.hasOwnProperty(d)&&a.elements[d].applyFilters()}return!1};
CSBJs_Form.prototype.formEvent=function(a,b){if(!CSBJs_Core.isClient())return!1;if("undefined"!=typeof b||null!==b)b=this.getFormNode();var d=this;switch(a){case "onSubmit":if(this.disabled)break;if("function"==typeof this.onSubmit)this.onSubmit();this.applyFilters();var e=this.validate(),f=this.serializeData();if(e){if("function"==typeof this.onSubmitValid){var h=this.onSubmitValid(f,this);if("undefined"!=typeof h&&!1===h)break}}else if("function"==typeof this.onSubmitInvalid)this.onSubmitInvalid(this.validateErrors);
if((this.serializeSubmit||this.ajaxSubmit)&&null===this.serializedDataElement)this.serializedDataElement=document.createElement("input"),this.serializedDataElement.setAttribute("type","hidden"),this.serializedDataElement.setAttribute("name","serialized_data"),this.serializedDataElement.setAttribute("value",JSON.stringify(f)),b.appendChild(this.serializedDataElement);if(this.hiddenFields)for(var g in this.hiddenFields)this.hiddenFields.hasOwnProperty(g)&&(h=document.createElement("input"),h.setAttribute("type",
"hidden"),h.setAttribute("name",g),h.setAttribute("value",this.hiddenFields[g]),b.appendChild(h),f[g]=this.hiddenFields[g]);CSBJs_Timer.waitUntil(function(){return!CSBJs_Ajax.loading()},function(){!d.disabled&&e&&!d.error&&(d.ajaxSubmit?("function"==typeof d.ajaxSubmitStart&&d.ajaxSubmitStart(),CSBJs_Ajax.post(d.action,f,function(a){"function"==typeof d.ajaxSubmitComplete&&d.ajaxSubmitComplete(a)},function(a){"function"==typeof d.ajaxSubmitError&&d.ajaxSubmitError(a)},function(a){"function"==typeof d.ajaxSubmitError&&
d.ajaxSubmitError(a)})):b.submit())})}return!1};CSBJs_Form.prototype.elementEvent=function(a,b,d){switch(a){default:a=null!==d&&"undefined"!=typeof d&&!0===d?b:b.getElementNode();if(null===a||"undefined"==typeof a)break;this.applyFilters(a);this.validate(a);this.updateConditionals(a)}};
CSBJs_Form.prototype.updateConditionals=function(a){if(null!==a&&"undefined"!=typeof a&&"undefined"!=typeof document){var b=this.getElementByName(a.name.replace(/\[\]/,""));return null!==b&&!1!==b?b.updateConditionals():!0}for(b in this.groups)if(this.groups.hasOwnProperty(b)){var a=this.groups[b],d;for(d in a.elements)a.elements.hasOwnProperty(d)&&a.elements[d].updateConditionals()}return!0};
CSBJs_Form.prototype.validate=function(a){var b=!0;this.validateErrors={};this.saveState();var d=null;if(null!==a&&"undefined"!=typeof a&&"undefined"!=typeof document)return b=this.getElementByName(a.name.replace(/\[\]/,"")),null!==b&&!1!==b?b.validate():!1;for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var a=this.groups[e].getSortedElements(),f;for(f in a)a.hasOwnProperty(f)&&!1===a[f].validate()&&(b=!1,this.validateErrors[a[f].name]=a[f].getErrors(),null===d&&(d=a[f]))}this.updateConditionals();
CSBJs_Core.isClient()&&null!==d&&d.focusOnField();this.error=!b;return b};CSBJs_Form.prototype.getElementErrors=function(){return this.validateErrors};CSBJs_Form.prototype.reRender=function(a){this.reloadForm(a)};CSBJs_Form.prototype.reloadForm=function(a){if("undefined"!=typeof document){var b=document.getElementById(this.formId);b.innerHTML=null;b.parentNode.replaceChild(this.render().domNode(),b);this.postRender(a)}};CSBJs_Form.prototype.setClientValidation=function(a){this.clientValidation=a};
CSBJs_Form.prototype.serializeData=function(){var a={},b;for(b in this.groups)if(this.groups.hasOwnProperty(b)){var d=this.groups[b],e;for(e in d.elements)if(d.elements.hasOwnProperty(e)&&(d.elements[e].updateValue(),(null!==d.elements[e].getValue()||""!==d.elements[e].value)&&!d.elements[e].hidden))if("undefined"!=typeof d.elements[e].otherFields){var f=[],h;for(h in d.elements[e].otherFields)d.elements[e].otherFields.hasOwnProperty(h)&&f.push({name:d.elements[e].otherFields[h].name,value:d.elements[e].otherFields[h].getValue()});
a[d.elements[e].name]={value:d.elements[e].getValue(),other_fields_value:f}}else a[d.elements[e].name]=d.elements[e].getValue()}return a};
CSBJs_Form.prototype.elementTypeTable=function(){var a={},b;for(b in this.groups)if(this.groups.hasOwnProperty(b)){var d=this.groups[b],e;for(e in d.elements)if(d.elements.hasOwnProperty(e)){var f=d.elements[e];a[f.name]=f.elementType;if("checkboxes"==f.elementType&&"undefined"!=typeof f.otherFields&&0<f.otherFields.length)for(var h=0;h<f.otherFields.length;h++)a[f.otherFields[h].name]=f.otherFields[h].elementType}}return a};
CSBJs_Form.prototype.saveState=function(){this.saveFormState&&CSBJs_Core.cookie.save("CSBJs_Form_State_"+this.formId,this.serializeData(!0),9E5)};
CSBJs_Form.prototype.loadState=function(a){var b=null;if("undefined"==typeof a&&CSBJs_Core.isClient())b=CSBJs_Core.cookie.load("CSBJs_Form_State_"+this.formId);else{if("undefined"==typeof a)return!1;b=a}if(b){if("undefined"!=typeof document&&!1===confirm("We've detected that you were in the middle of filling out this form. Continue where you left off?"))return CSBJs_Core.cookie.deleteCookie("CSBJs_Form_State_"+this.formId),!1;for(var d in b)if(b.hasOwnProperty(d)&&null!==b[d])if("undefined"!=typeof b[d].value&&
"undefined"!=typeof b[d].other_fields_value){var e=b[d].other_fields_value,a=this.getElementByName(d);if(null!==a&&(a.setValue(b[d].value),null!==a.otherFields&&"undefined"!=typeof a.otherFields))for(var f in a.otherFields)if(a.otherFields.hasOwnProperty(f))for(var h in e)e.hasOwnProperty(h)&&e[h].name==a.otherFields[f].name&&a.otherFields[f].setValue(e[h].value)}else a=this.getElementByName(d),null!==a&&a.setValue(b[d]);this.reloadForm();return!0}return!1};
CSBJs_Form.createFormFromJson=function(a){var b=new this;return b.initFromJson(a)?b:null};
CSBJs_Form.prototype.initFromJson=function(a){var b={},d={},e=[],f=[];typeof("undefined"!=a.form.id)&&this.setId(a.form.id);typeof("undefined"!=a.form.action)&&this.setAction(a.form.action);typeof("undefined"!=a.form.method)&&this.setMethod(a.form.method);typeof("undefined"!=a.form.step)&&this.enableStepForm(a.form.step);for(var h=0;h<a.steps.length;h++){var g=new CSBJs_Form_Step(h);g.setLabel(a.steps[h]);this.addStep(g)}for(var k in a.groups)if(a.groups.hasOwnProperty(k)){d[k]=new CSBJs_Form_Group(k);
"undefined"!=typeof a.groups[k].label&&d[k].setLabel(a.groups[k].label);d[k].displayOrder="undefined"!=typeof a.groups[k].order&&null!==a.groups[k].order?a.groups[k].order:0;if(typeof("undefined"!=a.groups[k].step))for(h=0;h<a.steps.length;h++)if(a.steps[h]==a.groups[k].step){d[k].setStep(this.steps[h]);break}this.addGroup(d[k])}for(var j in a.elements)if(a.elements.hasOwnProperty(j)&&!("undefined"==typeof a.elements[j].name||"undefined"==typeof a.elements[j].type)){h=a.elements[j].name;switch(a.elements[j].type){case "text":g=
{element:new CSBJs_Form_Element_TextField(h)};break;case "textarea":g={element:new CSBJs_Form_Element_TextArea(h)};break;case "dynamic":g={element:new CSBJs_Form_Element_Dynamic(h)};break;case "select":g={element:new CSBJs_Form_Element_Select(h)};"undefined"!=typeof a.elements[j].options&&(g.options=a.elements[j].options);break;case "password":g={element:new CSBJs_Form_Element_Password(h)};break;case "other-text":g={element:new CSBJs_Form_Element_OtherTextField(h)};break;case "checkbox":g={element:new CSBJs_Form_Element_Checkbox(h)};
"undefined"!=typeof a.elements[j].checkedValue&&null!==a.elements[j].checkedValue&&(g.element.checkedValue=a.elements[j].checkedValue);"undefined"!=typeof a.elements[j].uncheckedValue&&null!==a.elements[j].uncheckedValue&&(g.element.uncheckedValue=a.elements[j].uncheckedValue);"string"==typeof a.elements[j].description&&g.element.setDescription(a.elements[j].description);break;case "checkboxes":g={element:new CSBJs_Form_Element_Checkboxes(h)};"undefined"!=typeof a.elements[j].options&&(g.options=
a.elements[j].options);break;case "radio":g={element:new CSBJs_Form_Element_Radio(h)};"undefined"!=typeof a.elements[j].options&&(g.options=a.elements[j].options);break;case "html":g={element:new CSBJs_Form_Element_Html(h)};break;case "image":g={element:new CSBJs_Form_Element_Image(h)};break;case "submit":g={element:new CSBJs_Form_Element_Submit(h)};break;case "reset":g={element:new CSBJs_Form_Element_Reset(h)};break;case "next-step":g={element:new CSBJs_Form_Element_NextStep(h)};break;case "previous-step":g=
{element:new CSBJs_Form_Element_PreviousStep(h)};break;default:continue}"undefined"!=typeof a.elements[j].label&&g.element.setLabel(a.elements[j].label);"undefined"!=typeof a.elements[j].tooltip&&g.element.setTooltip(a.elements[j].tooltip);"undefined"!=typeof a.elements[j].hidden&&!0===a.elements[j].hidden&&g.element.setHidden(!0);"undefined"!=typeof a.elements[j].active&&null!==a.elements[j].active&&g.element.setActive(a.elements[j].active);"undefined"!=typeof a.elements[j].required&&("undefined"!=
typeof a.elements[j].required_message?g.element.setRequired(a.elements[j].required,a.elements[j].required_message):g.element.setRequired(a.elements[j].required));"undefined"!=typeof a.elements[j].value&&null!==a.elements[j].value&&g.element.setValue(a.elements[j].value);"undefined"!=typeof a.elements[j].values&&0<a.elements[j].values.length&&("function"==typeof g.element.setValues?g.element.setValues(a.elements[j].values):("undefined"==typeof a.elements[j].value||null===a.elements[j].value)&&g.element.setValue(a.element[j].values[0]));
"undefined"!=typeof a.elements[j].order&&g.element.setDisplayOrder(a.elements[j].order);"undefined"!=typeof a.elements[j].validations&&(g.validations=a.elements[j].validations);"undefined"!=typeof a.elements[j].conditionals&&(g.conditionals=a.elements[j].conditionals);"undefined"!=typeof a.elements[j].filters&&(g.filters=a.elements[j].filters);"undefined"!=typeof a.elements[j].group&&d.hasOwnProperty(a.elements[j].group)&&d[a.elements[j].group].addElement(g.element);b[h]=g}if("undefined"!=typeof a.validations)for(var o in a.validations)if(a.validations.hasOwnProperty(o)&&
"undefined"!=typeof a.validations[o].type){switch(a.validations[o].type){case "regex":if("undefined"==typeof a.validations[o].regex)continue;d=new CSBJs_Form_Validation_Regex;d.setRegex(RegExp(a.validations[o].regex));break;case "compare_equal":if("undefined"==typeof a.validations[o].target)continue;if("undefined"==typeof b[a.validations[o].target])continue;d=new CSBJs_Form_Validation_CompareEqual(b[a.validations[o].target].element);break;case "js_function":if("undefined"==typeof a.validations[o].function_body)continue;
d=new CSBJs_Form_Validation_JsFunction(o);d.setFunction(a.validations[o].function_body);"undefined"!==typeof a.validations[o].condition&&d.setCondition(a.validations[o].condition);break;default:continue}"undefined"!=typeof a.validations[o].message&&d.setErrorMessage(a.validations[o].message);e[o]=d}if("undefined"!=typeof a.filters)for(var l in a.filters)if(a.filters.hasOwnProperty(l)&&"undefined"!=typeof a.filters[l].type){switch(a.filters[l].type){case "replace":if("undefined"==typeof a.filters[l].regex||
"undefined"==typeof a.filters[l].replacement)continue;if("undefined"!=typeof a.filters[l].modifiers)var m=a.filters[l].modifiers;o=new CSBJs_Form_Filter_Replace(RegExp(a.filters[l].regex,m),a.filters[l].replacement);break;default:continue}f[l]=o}for(var n in b)if(b.hasOwnProperty(n)){if("undefined"!=typeof b[n].options){var a=b[n].options,p;for(p in a)a.hasOwnProperty(p)&&(l=a[p],"undefined"!=typeof l.other&&"undefined"!=typeof b[l.other]?b[n].element.addOption(l.label,l.value,b[l.other].element):
b[n].element.addOption(l.label,l.value))}if("undefined"!=typeof b[n].validations)for(var t in b[n].validations)b[n].validations.hasOwnProperty(t)&&(a=b[n].validations[t],"undefined"!=typeof e[a]&&b[n].element.addValidation(e[a]));if("undefined"!=typeof b[n].filters)for(var r in b[n].filters)b[n].filters.hasOwnProperty(r)&&(a=b[n].filters[r],"undefined"!=typeof f[a]&&b[n].element.addFilter(f[a]));if("undefined"!=typeof b[n].conditionals&&(l=b[n].conditionals,a=l.observes,l=l.actions,!("undefined"==
typeof a||"undefined"==typeof l))){m=new CSBJs_Form_Observer(b[n].element);o=!1;for(var s in a)if(a.hasOwnProperty(s))if("undefined"!=typeof b[a[s]])m.observe(a[s].replace(/[^a-zA-Z0-9_]/,"_"),b[a[s]].element);else{b[n].element.parentGroup.removeElementByName(n);delete b[n];o=!0;break}if(!o)for(var q in l)if(l.hasOwnProperty(q)&&!("undefined"==typeof l[q].type||"undefined"==typeof l[q].conditions)){a=null;switch(l[q].type){case "hide":a=new CSBJs_Form_Observer_Action_Hide;break;case "change-dynamic":a=
new CSBJs_Form_Observer_Action_ChangeDynamic;break;default:continue}for(var u in l[q].conditions)l[q].conditions.hasOwnProperty(u)&&a.addCondition(l[q].conditions[u]);m.setAction(a)}}}return this};
CSBJs_Form.prototype.serialize=function(){var a={},b={},d=[],e={};a.id=this.formId;a.method=this.method;a.action=this.action;var f={CSBJs_Form_Element_Dynamic:"dynamic",CSBJs_Form_Element_TextField:"text",CSBJs_Form_Element_TextArea:"textarea",CSBJs_Form_Element_OtherTextField:"other-text",CSBJs_Form_Element_Hidden:"hidden",CSBJs_Form_Element_Password:"password",CSBJs_Form_Element_Select:"select",CSBJs_Form_Element_Checkbox:"checkbox",CSBJs_Form_Element_Checkboxes:"checkboxes",CSBJs_Form_Element_Radio:"radio",
CSBJs_Form_Element_Button:"button",CSBJs_Form_Element_Submit:"submit"},h={CSBJs_Form_Validation_Ajax:"ajax",CSBJs_Form_Validation_CompareEqual:"compare_equal",CSBJs_Form_Validation_JsFunction:"js_function",CSBJs_Form_Validation_Regex:"regex"},g={CSBJs_Form_Observer_Action_Hide:"hide",CSBJs_Form_Observer_Action_ChangeDynamic:"change_dynamic"},k;for(k in this.groups)if(this.groups.hasOwnProperty(k)){b[this.groups[k].name]={label:this.groups[k].label};var j=[],o=this.groups[k].elements,l;for(l in o)if(o.hasOwnProperty(l)){var m=
o[l],n=CSBJs_OOP.getClassName(m);if("undefined"!=typeof f[n]){var p=f[n],n=[],t;for(t in m.options)if(m.options.hasOwnProperty(t)){var r={id:m.options[t].id,label:m.options[t].label,value:m.options[t].value,order:m.options[t].order};"undefined"!=typeof m.options[t].other_field&&CSBJs_OOP.isSubClass(m.options[t].other_field,"CSBJs_Form_Element_OtherTextField")&&(r.other=m.name+"_"+m.options[t].value+"_o",j.push(m.options[t].other_field));n.push(r)}var r={},s=[],q=[],u;for(u in m.conditionals)if(m.conditionals.hasOwnProperty(u)){var v=
m.conditionals[u];if(CSBJs_OOP.isSubClass(v,"CSBJs_Form_Observer")&&(s.push(v.element.name),actionClassName=CSBJs_OOP.getClassName(v.action),"undefined"!=typeof g[actionClassName])){actionType=g[actionClassName];for(var y=[],v=v.action.conditions,A=0;A<v.length;A++)y.push(v[A].replace(/_([\d]+[a-z-A-Z0-9_-]*\.value)/g,"$1"));q.push({type:actionType,conditions:y})}}null!==m.conditionals&&(r.observes=s,r.actions=q);p={name:m.name,label:m.label,group:m.parentGroup.name,order:m.displayOrder,required:m.required,
required_message:m.requiredErrorMessage,type:p};0<n.length&&(p.options=n);null!==m.conditionals&&(p.conditionals=r);null!==m.value&&0<m.value.length&&(p.value=m.value);d.push(p);if(0<j.length)for(n=0;0<(n<j.length);n++)oe=j[n],otherElementJson={name:oe.name,label:oe.label,value:oe.value,required:oe.required,required_message:oe.requiredErrorMessage,type:"other-text"},d.push(otherElementJson);for(var z in m.validations)n=m.validations[z].validation,m.validations.hasOwnProperty(z)&&(r=CSBJs_OOP.getClassName(n),
"undefined"!=typeof h[r]&&(r=h[r],s={type:r,message:n.errorMessage},q=r+"_"+z,"js_function"==r&&(s.function_body=n.functionBody,q=n.functionName),e[q]=s,p.validations?p.validations.push(q):p.validations=[q]))}}}return{form:a,groups:b,elements:d,validations:e}};
CSBJs_Form.prototype.compareForm=function(a){for(var b=this.serialize(),d={form:{},elements:{deletedFields:[],newFields:[],updates:[]},groups:{},validations:{}},e={},f=0;g<b.elements.length;f++)e[b.elements[f].name]={element:b.elements[f],checked:!1};for(var h="name,label,conditionals,options,validations,order,required,required_message,value".split(","),f=["action","method","id"],g=0;g<a.elements.length;g++)if("undefined"!=typeof e[a.elements[g].name]){e[a.elements[g].name].checked=!0;for(var k=e[a.elements[g].name].element,
j=a.elements[g],o=0;o<h.length;o++)if("conditionals"==h[o]||"options"==h[o]||"validations"==h[o]){if("undefined"!=typeof k[h[o]]&&"validations"!=h[o]&&"options"==h[o]){for(var l={},m={deleted:[],added:[],updated:[]},n=0;n<k.options.length;n++)l[k.options[n].value]=k.options[n];for(n=0;n<j.options.length;n++)"undefined"!=typeof l[j.options[n].value]?l[j.options[n].value].label!=j.options[n].label&&(m.updated.push({option:j.options[n],oldLabel:j.options[n].label,newLabel:l[j.options[n].value].label}),
delete l[j.options[n].value]):m.deleted.push(j.options[n]);(0<m.deleted.length||0<m.added.length||0<m.updated.length)&&d.elements.updates.push({element:k.name,property:h[o],options:m})}}else k[h[o]]!=j[h[o]]&&!("undefined"==typeof j[h[o]]&&!1===k[h[o]])&&d.elements.updates.push({element:k.name,property:h[o],oldValue:j[h[o]],newValue:k[h[o]]})}else d.elements.deletedFields.push(a.elements[g]);for(var p in e)e.hasOwnProperty(p)&&!1===e[p].checked&&d.elements.newFields.push(e[p].element);for(e=0;e<f.length;e++)b.form[f[e]]!=
a.form[f[e]]&&(d.form[f[e]]=b.form[f[e]]);return d};
CSBJs_Form.geolocate=function(a){var b,d={address:null,state:null,city:null,country:null,postal:null};b=new google.maps.Geocoder;var e=function(e,h){var g=new google.maps.LatLng(e,h);b.geocode({latLng:g},function(b,e){if(e==google.maps.GeocoderStatus.OK)if(b[1]){d.address=b[0].formatted_address;for(var f=0;f<b[0].address_components.length;f++)for(var g=0;g<b[0].address_components[f].types.length;g++)if("administrative_area_level_1"==b[0].address_components[f].types[g]){d.state=b[0].address_components[f];
break}else if("country"==b[0].address_components[f].types[g]){d.country=b[0].address_components[f];break}else if("postal_code"==b[0].address_components[f].types[g]){d.postal=b[0].address_components[f];break}else if("locality"==b[0].address_components[f].types[g]){d.city=b[0].address_components[f];break}"function"==typeof a&&a(d)}else"function"==typeof a&&a(null);else"function"==typeof a&&a(null)})};navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){e(a.coords.latitude,a.coords.longitude)},
function(){"function"==typeof a&&a(!1)})};CSBJs_Form.__valFns={};function CSBJs_Form_Group(a){this.name=a;this.label=null;this.elements={};this.highestOrder=this.displayOrder=this.currentOrder=0;this.decorator=this.step=null;this.decoratorTag="fieldset";this.decoratorClass="CSBJs_Form_Group";this.disabled=this.useLegend=!1;this.parentForm=null}CSBJs_Form_Group.prototype.setDisabled=function(a){this.disabled=a};
CSBJs_Form_Group.prototype.addElement=function(a){if(CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element")||CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element_Multi"))a.parentGroup=this,this.elements[a.name]=a,a.displayOrder>this.highestOrder&&(this.highestOrder=a.displayOrder),a.uid=CSBJs_Form_Element.idCounter,CSBJs_Form_Element.idCounter+=1};CSBJs_Form_Group.prototype.removeElementByName=function(a){delete this.elements[a]};
CSBJs_Form_Group.prototype.getElementByName=function(a){return"undefined"==typeof this.elements[a]?null:this.elements[a]};CSBJs_Form_Group.prototype.setLabel=function(a){this.label=a};CSBJs_Form_Group.prototype.setStep=function(a){CSBJs_OOP.isSubClass(a,"CSBJs_Form_Step")&&(a.addGroup(this),this.step=a)};CSBJs_Form_Group.prototype.setDisplayOrder=function(a){this.displayOrder=a};
CSBJs_Form_Group.prototype.getTotalElements=function(){var a=0,b;for(b in this.elements)this.elements.hasOwnProperty(b)&&(a+=1);return a};CSBJs_Form_Group.prototype.preRender=function(){this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.addClass(this.decoratorClass);this.decorator.setId("group_"+this.name);this.disabled&&this.decorator.addClass("csbjs-form-group-disabled")};
CSBJs_Form_Group.prototype.postRender=function(){for(var a in this.elements)this.elements.hasOwnProperty(a)&&this.elements[a].postRender()};CSBJs_Form_Group.prototype.getSortedElements=function(){var a=[],b;for(b in this.elements)this.elements.hasOwnProperty(b)&&this.elements.hasOwnProperty(b)&&a.push(this.elements[b]);a.sort(function(a,b){return a.displayOrder-b.displayOrder});return a};
CSBJs_Form_Group.prototype.render=function(a){this.preRender();null!==this.step&&(this.decorator.addClass("CSBJs_Form_Group-step"),a&&this.decorator.addClass("step_active"),this.decorator.attr("step",this.step.stepNumber));for(var a=this.getSortedElements(),b=0,d=0;d<a.length;d++)!1===a[d].hidden&&a[d].active&&(b+=1);0===b&&this.decorator.addClass("empty-group");null!==this.label&&(b=new CSBJs_Decorator_HtmlNode(this.useLegend?"legend":"div"),b.addClass("csbjs-group-label"),b.appendChild(this.label),
this.decorator.appendChild(b));for(var e in a)a.hasOwnProperty(e)&&"function"==typeof a[e].render&&this.decorator.appendChild(a[e].render());return this.decorator};
CSBJs_Form_Group.prototype.html=function(a){var b=null!==this.step?' class="form_step'+(a?" step_active":"")+'" step="'+this.step.stepNumber+'"':"",a=[],d;for(d in this.elements)this.elements.hasOwnProperty(d)&&a.push(this.elements[d]);a.sort(function(a,b){return a.displayOrder-b.displayOrder});d='<fieldset id="group_'+this.name+'" class="CSBJs_Form_Group"'+b+">";null!==this.label&&0<this.label.length&&(d=d+"<legend>"+this.label+"</legend>");for(var e in a)a.hasOwnProperty(e)&&(d+=a[e].html());return d+
"</fieldset>"};function CSBJs_Form_Step(a){this.stepNumber=a;this.label=null;this.groups=[];this.active=!1;this.prevStep=this.nextStep=null;this.isFirstStep=!1;this.groups=[]}CSBJs_Form_Step.prototype.setLabel=function(a){this.label=a};CSBJs_Form_Step.prototype.setFirstStep=function(a){this.isFirstStep=a};CSBJs_Form_Step.prototype.isFirstStep=function(){return this.isFirstStep};
CSBJs_Form_Step.prototype.validate=function(){var a=!0,b;for(b in this.groups)if(this.groups.hasOwnProperty(b))for(var d in this.groups[b].elements)this.groups[b].elements.hasOwnProperty(d)&&(this.groups[b].elements[d].validate()||(a=!1));return a};CSBJs_Form_Step.prototype.addGroup=function(a){CSBJs_OOP.isSubClass(a,"CSBJs_Form_Group")&&this.groups.push(a)};
function CSBJs_Form_Element(a){this.name=a;this.type="text";this.className=this.baseClassName="CSBJs_Form_Element";this.addedClasses="";this.idPrefix="CSBJs_elementId_";this.label="";this.validations=[];this.filters=[];this.observers=[];this.value="";this.innerValue=!1;this.displayOrder=0;this.required=!1;this.requiredValidation=null;this.hidden=this.disabled=!1;this.active=!0;this.requiredErrorMessage=null;this.stateless=!1;this.labelClass="normal";this.placeholder=this.events=this.parentGroup=this.conditionals=
null;this.validated=!1;this.decorator=this.elementType=null;this.decoratorTag="div";this.tooltipDecorator=this.tooltip=this.outerClassName=null;this.fieldTag="input";this.fieldEventAction=this.fieldEventType=null;this.focus=!1;this.onBlur=null;this.uid=CSBJs_Form_Element.idCounter}CSBJs_Form_Element.idCounter=0;CSBJs_Form_Element.prototype.setValue=function(a){this.value=a};
CSBJs_Form_Element.prototype.setLabel=function(a){this.label=a;a=a.replace(/(<([^>]+)>)/ig,"").length;20>a?this.labelClass="normal":30>a?this.labelClass="medium":40>a?this.labelClass="long":40<a&&(this.labelClass="extra-long")};CSBJs_Form_Element.prototype.setTooltip=function(a){this.tooltip=a};CSBJs_Form_Element.prototype.setPlaceholder=function(a){this.placeholder=a};CSBJs_Form_Element.prototype.setDisplayOrder=function(a){this.displayOrder=a};
CSBJs_Form_Element.prototype.setRequired=function(a,b){this.required=a;"undefined"!=typeof b&&(this.requiredErrorMessage=b)};CSBJs_Form_Element.prototype.getValue=function(){return this.value};CSBJs_Form_Element.prototype.setStateless=function(a){this.stateless=a};CSBJs_Form_Element.prototype.setHidden=function(a){this.hidden=a};CSBJs_Form_Element.prototype.setActive=function(a){this.active=a};CSBJs_Form_Element.prototype.setDisabled=function(a){this.disabled=a};
CSBJs_Form_Element.prototype.moveToGroup=function(a){if("undefined"==typeof a||!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Group"))return!1;this.parentGroup.removeElementByName(this.name);a.addElement(this);return!0};CSBJs_Form_Element.prototype.addFilter=function(a){if(CSBJs_OOP.isSubClass(a,"CSBJs_Form_Filter")||"undefined"!=typeof this.filters)a.element=this,this.filters.push(a)};CSBJs_Form_Element.prototype.addObserver=function(a){this.observers.push(a)};
CSBJs_Form_Element.prototype.notifyObservers=function(){for(var a in this.observers)this.observers.hasOwnProperty(a)&&"function"==typeof this.observers[a].execute&&this.observers[a].execute()};CSBJs_Form_Element.prototype.addClass=function(a){this.addedClasses.match(" "+a)||(this.addedClasses+=" "+a)};CSBJs_Form_Element.prototype.getIdName=function(){return this.idPrefix+this.uid+"-"+this.name};
CSBJs_Form_Element.prototype.addValidation=function(a){if(CSBJs_OOP.isSubClass(a,"CSBJs_Form_Validation")||"undefined"!=typeof this.validations)a.element=this,this.validations.push({validation:a,error:!1})};
CSBJs_Form_Element.prototype.preRender=function(){this.decorator=new CSBJs_Decorator_HtmlNode(this.decoratorTag);this.decorator.addClass(this.className);this.decorator.addClass(this.baseClassName);this.required&&this.decorator.addClass(this.baseClassName+"-required");this.disabled&&this.decorator.addClass(this.baseClassName+"-disabled");this.hidden&&this.decorator.addClass(this.baseClassName+"-hidden");var a=this.getErrors();!this.hidden&&"undefined"!=typeof a&&0<a.length?(this.decorator.addClass(this.className+
"-error"),this.decorator.addClass(this.baseClassName+"-error")):null!==this.value&&0<this.value.length&&!0===this.validated&&this.decorator.addClass(this.baseClassName+"-validated");if("undefined"!=typeof this.otherFields){var a=!1,b;for(b in this.otherFields)if(this.otherFields.hasOwnProperty(b)&&0<this.otherFields[b].getErrors().length){a=!0;break}a&&(this.decorator.addClass(this.className+"-error"),this.decorator.addClass(this.baseClassName+"-error"))}null!==this.tooltip&&(this.tooltipDecorator=
new CSBJs_Decorator_HtmlNode("div"),this.tooltipDecorator.addClass("csbjs-form-element-tooltip"),this.tooltipDecorator.appendChild(this.tooltip));this.decorator.addClass(this.baseClassName+"-label-"+this.labelClass)};
CSBJs_Form_Element.prototype.render=function(a){this.preRender();this.decorator.setId("Wrapper_"+this.getIdName());var b=new CSBJs_Decorator_HtmlNode("label");b.addClass(this.labelClass);b.attr("for",this.name);null!==this.label&&0<this.label.length&&b.appendChild(this.label);var d=new CSBJs_Decorator_HtmlNode(this.fieldTag);d.attr("type",this.type);d.addClass(this.baseClassName+"-field");d.addClass(this.className+"-field");d.attr("name",this.name);d.setId(this.getIdName());null!==this.tooltip&&d.attr("tooltip",
this.tooltip);null!==this.value&&0<this.value.length&&(this.innerValue?d.appendChild(this.value):d.attr("value",this.value));"undefined"!=typeof document&&null!==this.fieldEventType&&null!==this.fieldEventAction&&d.attr(this.fieldEventType,this.fieldEventAction);this.disabled&&d.attr("disabled","disabled");var e=this.getErrors(),f=new CSBJs_Decorator_HtmlNode("ul");f.addClass(this.baseClassName+"-errors");if(0<e.length)for(var h in e)if(e.hasOwnProperty(h)){var g=new CSBJs_Decorator_HtmlNode("li");
g.appendChild(e[h]);f.appendChild(g)}if(a)return a=new CSBJs_Decorator_HtmlNode("span"),a.appendChild(d),0<e.length&&a.appendChild(f),a;!this.hidden&&this.active&&(null!==this.label&&0<this.label.length&&this.decorator.appendChild(b),a=new CSBJs_Decorator_HtmlNode("div"),a.addClass("csbjs-form-input-container"),a.appendChild(d),null!==this.placeholder&&(d=new CSBJs_Decorator_HtmlNode("span"),d.addClass("csbjs-form-element-placeholder"),d.appendChild(this.placeholder),a.appendChild(d)),this.decorator.appendChild(a),
0<e.length&&this.decorator.appendChild(f));return this.decorator};CSBJs_Form_Element.prototype.getElementNode=function(){return!CSBJs_Core.isClient()?!1:document.getElementById(this.getIdName())};CSBJs_Form_Element.prototype.focusOnField=function(){CSBJs_Core.isClient()&&!this.disabled&&this.getElementNode().focus()};CSBJs_Form_Element.prototype.updateValue=function(){if(CSBJs_Core.isClient()){var a=this.getElementNode();null!==a&&this.setValue(a.value)}};
CSBJs_Form_Element.prototype.updateElement=function(){if("undefined"!==typeof document){var a=document.getElementById("Wrapper_"+this.getIdName());if(null!==a){this.clearEvents();this.preRender();var b=document.createElement("div");b.id="Wrapper_"+this.getIdName();b=this.render().domNode();a.parentNode.replaceChild(b,a);this.postRender()}}};CSBJs_Form_Element.prototype.updateConditionals=function(){this.notifyObservers()};
CSBJs_Form_Element.prototype.validate=function(){if(this.hidden||!this.active)return!0;this.updateValue();var a=!0;this.addedClasses=this.className;this.required&&null===this.requiredValidation&&(this.requiredValidation=new CSBJs_Form_Validation_Required,this.addValidation(this.requiredValidation),null!==this.requiredErrorMessage&&this.requiredValidation.setErrorMessage(this.requiredErrorMessage));for(var b in this.validations)this.validations.hasOwnProperty(b)&&(!1===this.validations[b].validation.validate(this)?
(this.validations[b].error=!0,a=this.validated=!1):(this.validated=!0,this.validations[b].error=!1));this.updateElement();return a};CSBJs_Form_Element.prototype.applyFilters=function(){this.updateValue();for(var a in this.filters)this.filters.hasOwnProperty(a)&&this.filters[a].apply()};CSBJs_Form_Element.prototype.getErrors=function(){var a=[],b;for(b in this.validations)this.validations.hasOwnProperty(b)&&!0===this.validations[b].error&&a.push(this.validations[b].validation.getErrorMessage());return a};
CSBJs_Form_Element.prototype.addEventHandler=function(a,b){null===this.events&&(this.events=[]);this.events[a]=b};
CSBJs_Form_Element.prototype.postRender=function(){if(!CSBJs_Core.isClient())return!1;var a=this.getElementNode();if(null===a||"object"!=typeof a)return!1;var b=this;if(null!==this.placeholder){var d=a.parentNode.getElementsByTagName("span")[0];if(d&&"csbjs-form-element-placeholder"===d.className){d.addEventListener?d.addEventListener("click",function(){a.focus()},!0):d.attachEvent&&d.attachEvent("onclick",function(){a.focus()},!0);if(null===this.events||"undefined"==typeof this.events)this.events=
[];var e=CSBJs_OOP.getClassName(this),f=CSBJs_Core.ieBrowserVersion();if("CSBJs_Form_Element_TextField"==e||"CSBJs_Form_Element_Password"==e){if(9==f?(this.addEventHandler("focus",function(){d.style.display="none";a.style.textIndent="0px";0<this.value.length?(this.value=this.value,this.selectionStart=this.value.length):(this.value=" ",this.value="")}),this.addEventHandler("blur",function(){var a=b.getElementNode(),d=a.parentNode.getElementsByTagName("span")[0];d.style.display="inline";a.style.textIndent=
d.offsetWidth+"px";a.style.lineHeight="100%";a.value=a.value})):(this.addEventHandler("focus",function(){d.style.display="none";a.style.textIndent="0px"}),this.addEventHandler("blur",function(){d.style.display="inline";a.style.textIndent=d.offsetWidth+"px";a.style.lineHeight="100%"})),d.style.display="inline",e=d.offsetWidth+"px",0<a.value.length&&(a.style.textIndent=e),a.style.lineHeight="100%",9==f)a.value=b.getValue()}else"CSBJs_Form_Element_Select"==e&&(6==f||7==f?(this.addEventHandler("focus",
function(){a.style.width=a.offsetWidth+d.offsetWidth+"px";d.style.display="none";a.style.textIndent="0px";a.style.lineHeight="100%"}),this.addEventHandler("blur",function(){d.style.display="inline";a.style.width=a.offsetWidth-d.offsetWidth+"px";a.style.textIndent=d.offsetWidth+"px";a.style.lineHeight="100%"}),e=d.offsetWidth+"px",a.style.width=a.offsetWidth-d.offsetWidth+"px",a.style.textIndent=e,a.style.lineHeight="100%"):(this.addEventHandler("focus",function(){d.style.display="none";a.style.paddingLeft=
"0px"}),this.addEventHandler("blur",function(){d.style.display="inline";a.style.paddingLeft=d.offsetWidth+"px"}),e=d.offsetWidth+"px",a.style.paddingLeft=e))}}for(var h in this.events)this.events.hasOwnProperty(h)&&(f=h.replace(/_\d/,""),a.addEventListener?a.addEventListener(f,this.events[h],!1):a.attachEvent&&a.attachEvent("on"+f,this.events[h],!1));return!0};
CSBJs_Form_Element.prototype.clearEvents=function(){if(!CSBJs_Core.isClient())return!1;var a=this.getElementNode();if(null===a||"object"!=typeof a)return!1;if(null!==this.placeholder){var b=a.parentNode.getElementsByTagName("span")[0];b&&"csbjs-form-element-placeholder"===b.className&&(b.removeEventListener?b.removeEventListener("click",function(){a.focus()},!1):b.detachEvent&&b.detachEvent("onclick",function(){a.focus()},!1))}for(var d in this.events)this.events.hasOwnProperty(d)&&(b=d.replace(/_\d/,
""),a.removeEventListener?a.removeEventListener(b,this.events[d],!1):a.detachEvent&&a.detachEvent("on"+b,this.events[d],!1));return!0};function CSBJs_Form_Element_Html(a){this.name=a;this.className="CSBJs_Form_Element_Html";this.content=""}CSBJs_Form_Element_Html.inherits(CSBJs_Form_Element);CSBJs_Form_Element_Html.prototype.setRequired=function(){};CSBJs_Form_Element_Html.prototype.addValidation=function(){};CSBJs_Form_Element_Html.prototype.setLabel=function(){};
CSBJs_Form_Element_Html.prototype.setHtml=function(a){this.content=a};CSBJs_Form_Element_Html.prototype.render=function(){this.preRender();this.decorator.setId("Wrapper_"+this.getIdName());this.decorator.addClass("elementName-"+this.name);this.decorator.appendChild(this.content);return this.decorator};function CSBJs_Form_Element_Image(a){this.name=a;this.className="CSBJs_Form_Element_Image";this.source=null;this.alt=""}CSBJs_Form_Element_Image.inherits(CSBJs_Form_Element);
CSBJs_Form_Element_Image.prototype.setRequired=function(){};CSBJs_Form_Element_Image.prototype.addValidation=function(){};CSBJs_Form_Element_Image.prototype.setLabel=function(){};CSBJs_Form_Element_Image.prototype.setSource=function(a){this.source=a};CSBJs_Form_Element_Image.prototype.setAlt=function(a){this.alt=a};CSBJs_Form_Element_Image.prototype.render=function(){this.preRender();if(null!=this.source){var a=new CSBJs_Decorator_HtmlNode("img");a.attr("src",this.source);a.attr("alt",this.alt);this.decorator.appendChild(a)}return this.decorator};
function CSBJs_Form_Element_TextField(a){this.name=a;this.className="CSBJs_Form_Element_TextField";this.validations=[];this.observers=[];this.filters=[];this.elementType=this.type="text"}CSBJs_Form_Element_TextField.inherits(CSBJs_Form_Element);CSBJs_Form_Element_TextField.prototype.postRender=function(){var a=this;this.addEventHandler("blur_0",function(){a.parentGroup.parentForm.elementEvent("onBlur",a)});this.parent.postRender.call(this)};
function CSBJs_Form_Element_OtherTextField(a){this.name=a;this.className="CSBJs_Form_Element_OtherTextField";this.validations=[];this.observers=[];this.filters=[];this.parentOptionValue=this.parentElement=null;this.noValidation=!1;this.value="";this.fieldTag="input";this.elementType=this.type="text"}CSBJs_Form_Element_OtherTextField.inherits(CSBJs_Form_Element);
CSBJs_Form_Element_OtherTextField.prototype.validate=function(){var a=!1,b;for(b in this.parentElement.values)this.parentElement.values.hasOwnProperty(b)&&this.parentElement.values[b]==this.parentOptionValue&&(a=!0);if(!a)return!0;a=!0;!this.noValidation&&!this.parent.validate.call(this)&&(a=!1);this.parentElement.updateElement();return a};CSBJs_Form_Element_OtherTextField.prototype.getErrors=function(){return this.noValidation?[]:this.parent.getErrors.call(this)};
CSBJs_Form_Element_OtherTextField.prototype.postRender=function(){var a=this.parentElement;this.addEventHandler("blur_0",function(){a.parentGroup.parentForm.elementEvent("onBlur",a)});return this.parent.postRender.call(this)};function CSBJs_Form_Element_Submit(){this.name="submit_button";this.className="CSBJs_Form_Element_Submit";this.value="Submit";this.type="submit";this.hidden=!1}CSBJs_Form_Element_Submit.inherits(CSBJs_Form_Element);CSBJs_Form_Element_Submit.prototype.updateValue=function(){};
CSBJs_Form_Element_Submit.prototype.getValue=function(){return null};
CSBJs_Form_Element_Submit.prototype.render=function(){this.parent.preRender.call(this);this.decorator.setId("Wrapper_"+this.getIdName());var a=new CSBJs_Decorator_HtmlNode("button");a.attr("type",this.type);a.attr("name",this.name);a.addClass(this.baseClassName+"-field");a.addClass(this.className+"-field");a.setId(this.getIdName());null!==this.value&&0<this.value.length&&a.appendChild(this.value.replace(/"/g,"&quot;"));this.decorator.appendChild(a);return this.decorator};
function CSBJs_Form_Element_NextStep(a){this.name=a;this.className="CSBJs_Form_Element_NextStep";this.value=this.label="Next";this.type="button";this.fieldEventType="onClick";this.fieldEventAction="return CSBJs_Form.form.gotoNextStep()"}CSBJs_Form_Element_NextStep.inherits(CSBJs_Form_Element);CSBJs_Form_Element_NextStep.prototype.getValue=function(){return null};CSBJs_Form_Element_NextStep.prototype.preRender=function(){this.parent.preRender.call(this);this.label=null};
function CSBJs_Form_Element_PreviousStep(a){this.name=a;this.className="CSBJs_Form_Element_PreviousStep";this.value=this.label="Previous";this.type="button";this.fieldEventType="onClick";this.fieldEventAction="return CSBJs_Form.form.gotoPreviousStep()"}CSBJs_Form_Element_PreviousStep.inherits(CSBJs_Form_Element);CSBJs_Form_Element_PreviousStep.prototype.getValue=function(){return null};CSBJs_Form_Element_PreviousStep.prototype.preRender=function(){this.parent.preRender.call(this);this.label=null};
CSBJs_Form_Element_PreviousStep.prototype.html=function(){return'<div class="'+this.className+'">'+('<input type="button" onclick="CSBJs_Form.form.gotoPreviousStep()" class="'+this.className+'_field" name="'+this.name+'" id="'+this.idPrefix+this.name+'" value="'+this.value+'"'+(this.parentGroup.parentForm.currentStep===this.parentGroup.parentForm.firstStep?' disabled="disabled"':"")+" />")+"</div>"};
function CSBJs_Form_Element_Reset(a){this.name=a;this.className="CSBJs_Form_Element_Reset";this.value="Reset";this.type="reset"}CSBJs_Form_Element_Reset.inherits(CSBJs_Form_Element);CSBJs_Form_Element_Reset.prototype.getValue=function(){return null};CSBJs_Form_Element_Reset.prototype.html=function(){return'<div class="'+this.className+'">'+('<input type="reset" class="'+this.className+'_field" name="'+this.name+'" value="'+this.value+'"/>')+"</div>"};
function CSBJs_Form_Element_Multi(a){this.name=a;this.observers=[];this.className="CSBJs_Form_Element_Multi";this.options=[];this.fieldTag="select";this.highestOptionOrder=0;this.optionEvents=null}CSBJs_Form_Element_Multi.inherits(CSBJs_Form_Element);CSBJs_Form_Element_Multi.prototype.setId=function(a){this.id=a};
CSBJs_Form_Element_Multi.prototype.addOption=function(a,b,d,e){"undefined"!=typeof this.options&&(a={label:a,value:b},"undefined"!=typeof d&&(a.id=d),"undefined"!=typeof e?(a.order=e,e>this.highestOptionOrder&&(this.highestOptionOrder=e)):(this.highestOptionOrder+=1,a.order=this.highestOptionOrder),this.options.push(a))};CSBJs_Form_Element_Multi.prototype.setData=function(a){if(!CSBJs_OOP.isSubClass(a,"CSBJs_Data"))return!1;this.options=a.fetchItems();return!0};
CSBJs_Form_Element_Multi.prototype.removeOptionByLabel=function(a){if("undefined"==typeof this.options)return!1;for(var b in this.options)if(this.options.hasOwnProperty(b))return this.options[b].label==a&&this.options.shift(b,1),!0;return!1};CSBJs_Form_Element_Multi.prototype.addOptionEventHandler=function(a,b){null===this.optionEvents&&(this.optionEvents=[]);this.optionEvents[a]=b};
function CSBJs_Form_Element_Select(a){this.name=a;this.className="CSBJs_Form_Element_Select";this.validations=[];this.filters=[];this.observers=[];this.options=[];this.elementType="select"}CSBJs_Form_Element_Select.inherits(CSBJs_Form_Element_Multi);
CSBJs_Form_Element_Select.prototype.render=function(){this.parent.preRender.call(this);this.decorator.setId("Wrapper_"+this.getIdName());var a=new CSBJs_Decorator_HtmlNode("label");a.addClass(this.labelClass);a.attr("for",this.name);a.appendChild(this.label);var b=new CSBJs_Decorator_HtmlNode(this.fieldTag);b.addClass("CSBJs_Form_Element-field");b.addClass(this.className+"-field");b.attr("name",this.name);b.setId(this.getIdName());this.options.sort(function(a,b){return a.order-b.order});for(var d in this.options)if(this.options.hasOwnProperty(d)){var e=
new CSBJs_Decorator_HtmlNode("option");this.getValue()==this.options[d].value&&e.attr("selected","selected");e.attr("value",this.options[d].value);e.appendChild(this.options[d].label);b.appendChild(e)}this.disabled&&b.attr("disabled","disabled");d=this.getErrors();e=new CSBJs_Decorator_HtmlNode("ul");e.addClass("CSBJs_Form_Element-errors");if(0<d.length)for(var f in d)if(d.hasOwnProperty(f)){var h=new CSBJs_Decorator_HtmlNode("li");h.appendChild(d[f]);e.appendChild(h)}!this.hidden&&this.active&&(this.decorator.appendChild(a),
a=new CSBJs_Decorator_HtmlNode("div"),a.addClass("csbjs-form-input-container"),a.appendChild(b),null!==this.placeholder&&(b=new CSBJs_Decorator_HtmlNode("span"),b.addClass("csbjs-form-element-placeholder"),b.appendChild(this.placeholder),a.appendChild(b)),this.decorator.appendChild(a),0<d.length&&this.decorator.appendChild(e));return this.decorator};
CSBJs_Form_Element_Select.prototype.postRender=function(){var a=this;this.addEventHandler("change_0",function(){a.parentGroup.parentForm.elementEvent("onChange",a)});this.parent.postRender.call(this)};function CSBJs_Form_Element_Password(a){this.name=a;this.className="CSBJs_Form_Element_Password";this.validations=[];this.observers=[];this.filters=[];this.elementType=this.type="password"}CSBJs_Form_Element_Password.inherits(CSBJs_Form_Element);
CSBJs_Form_Element_Password.prototype.postRender=function(){var a=this;this.addEventHandler("blur_0",function(){a.parentGroup.parentForm.elementEvent("onBlur",a)});this.parent.postRender.call(this)};function CSBJs_Form_Element_Dynamic(a){this.name=a;this.className="CSBJs_Form_Element_Dynamic";this.currentElement=this.value=null;this.elements=[];this.validations=[];this.observers=[]}CSBJs_Form_Element_Dynamic.inherits(CSBJs_Form_Element);
CSBJs_Form_Element_Dynamic.prototype.addElement=function(a){var b=a.name;a.name=this.name;this.elements[b]=a;this.updateElement(a);null==this.currentElement&&(this.currentElement=a)};CSBJs_Form_Element_Dynamic.prototype.setHidden=function(a){this.hidden=a;null!=this.currentElement&&this.currentElement.setHidden(a)};CSBJs_Form_Element_Dynamic.prototype.setValue=function(a){this.value=a;null!=this.currentElement&&this.currentElement.setValue(a)};
CSBJs_Form_Element_Dynamic.prototype.updateElement=function(){null!=this.currentElement&&(this.currentElement.setLabel(this.label),this.currentElement.setValue(this.value),this.currentElement.setRequired(this.required),this.currentElement.setDisabled(this.disabled),this.currentElement.setHidden(this.hidden),this.currentElement.addedClasses=this.addedClasses,this.currentElement.requiredValidation=this.requiredValidation,this.currentElement.observers=this.observers,null!=this.currentElement&&this.currentElement.updateElement(),
this.parent.updateElement.call(this))};CSBJs_Form_Element_Dynamic.prototype.setCurrentElement=function(a){return this.elements.hasOwnProperty(a)?(this.currentElement=this.elements[a],this.updateElement(this.currentElement),!0):!1};
CSBJs_Form_Element_Dynamic.prototype.validate=function(){if(null==this.currentElement||0==this.validations.length&&!this.required)return!1;this.required&&null==this.requiredValidation&&(this.requiredValidation=new CSBJs_Form_Validation_Required,this.addValidation(this.requiredValidation));this.updateElement(this.currentElement);this.addedClasses=this.className;this.currentElement.validations=this.validations;this.currentElement.setRequired(this.required);return this.currentElement.validate()};
CSBJs_Form_Element_Dynamic.prototype.getErrors=function(){if(null!=this.currentElement)return this.currentElement.getErrors()};CSBJs_Form_Element_Dynamic.prototype.html=function(a){return null!=this.currentElement?this.currentElement.html(a):""};CSBJs_Form_Element_Dynamic.prototype.render=function(){return null!=this.currentElement?this.currentElement.render():""};
function CSBJs_Form_Element_Hidden(a){this.name=a;this.className="CSBJs_Form_Element_Hidden";this.validations=[];this.observers=[];this.filters=[];this.type="hidden"}CSBJs_Form_Element_Hidden.inherits(CSBJs_Form_Element);
CSBJs_Form_Element_Hidden.prototype.html=function(a){this.parent.preHtml.call(this);var b=null==this.value?"":this.value,b='<input type="hidden" class="'+this.className+'_field" name="'+this.name+'" id="'+this.getIdName()+'" value="'+b+'"/>',d='<div class="'+this.classHtml+'" id="Wrapper_'+this.getIdName()+'">';return!0===a?b:this.hidden?d+"</div>":d+b+"</div>"};
function CSBJs_Form_Element_Checkbox(a){this.name=a;this.className="CSBJs_Form_Element_Checkbox";this.validations=[];this.filters=[];this.observers=[];this.value="";this.checkedValue=!0;this.checkRequired=this.uncheckedValue=!1;this.description=null;this.fieldTag="input";this.elementType=this.type="checkbox"}CSBJs_Form_Element_Checkbox.inherits(CSBJs_Form_Element);CSBJs_Form_Element_Checkbox.prototype.getValue=function(){return this.value};
CSBJs_Form_Element_Checkbox.prototype.updateValue=function(){if("undefined"!=typeof document){var a=document.getElementById("Wrapper_"+this.getIdName());null!==a&&(a=a.getElementsByTagName("input"),"undefined"!=typeof a[0]&&(a[0].checked?this.setValue(this.checkedValue):this.setValue(this.uncheckedValue)))}};CSBJs_Form_Element_Checkbox.prototype.setDescription=function(a){this.description=a};
CSBJs_Form_Element_Checkbox.prototype.render=function(a){this.preRender();this.decorator.setId("Wrapper_"+this.getIdName());var b=new CSBJs_Decorator_HtmlNode("label");b.addClass(this.labelClass);b.attr("for",this.name);null!==this.label&&0<this.label.length&&b.appendChild(this.label);var d=new CSBJs_Decorator_HtmlNode(this.fieldTag);d.attr("type",this.type);d.addClass(this.baseClassName+"-field");d.addClass(this.className+"-field");d.attr("name",this.name);d.setId(this.getIdName());var e=null;null!==
this.description&&"string"==typeof this.description&&(e=new CSBJs_Decorator_HtmlNode("span"),e.addClass(this.baseClassName+"-desc"),e.addClass(this.className+"-desc"),e.appendChild(this.description));this.value===this.checkedValue?(d.attr("checked","checked"),d.attr("defaultChecked","defaultChecked")):this.value=this.uncheckedValue;this.disabled&&d.attr("disabled","disabled");var f=this.getErrors(),h=new CSBJs_Decorator_HtmlNode("ul");h.addClass(this.baseClassName+"-errors");if(0<f.length)for(var g in f)if(f.hasOwnProperty(g)){var k=
new CSBJs_Decorator_HtmlNode("li");k.appendChild(f[g]);h.appendChild(k)}if(a)return a=new CSBJs_Decorator_HtmlNode("span"),a.appendChild(d),e&&a.appendChild(e),0<f.length&&a.appendChild(h),a;!this.hidden&&this.active&&(null!==this.label&&0<this.label.length&&this.decorator.appendChild(b),a=new CSBJs_Decorator_HtmlNode("div"),a.addClass("csbjs-form-input-container"),a.appendChild(d),e&&a.appendChild(e),null!==this.placeholder&&(d=new CSBJs_Decorator_HtmlNode("span"),d.addClass("csbjs-form-element-placeholder"),
d.appendChild(this.placeholder),a.appendChild(d)),this.decorator.appendChild(a),0<f.length&&this.decorator.appendChild(h));return this.decorator};
CSBJs_Form_Element_Checkbox.prototype.postRender=function(){var a=this;this.addEventHandler("click_0",function(){a.parentGroup.parentForm.elementEvent("onClick",a)});if(!this.parent.postRender.call(this))return!1;var b=a.getElementNode().getElementsByTagName("span");for(i=0;i<b.length;i++)b[i].className.match(/csbjs-option-styled-checkbox/)&&(b[i].addEventListener?b[i].addEventListener("click",this.optionEvents.click_0,!0):b[i].attachEvent&&b[i].attachEvent("onclick",this.optionEvents.click_0,!0));
return!0};CSBJs_Form_Element_Checkbox.prototype.clearEvents=function(){return!this.parent.clearEvents.call(this)?!1:!0};function CSBJs_Form_Element_Checkboxes(a){this.name=a;this.className="CSBJs_Form_Element_Checkboxes";this.validations=[];this.filters=[];this.observers=[];this.options=[];this.groups=[];this.values=[];this.value=null;this.otherFields=[];this.styledCheckboxe=!1;this.optionEvents=[];this.fieldTag="fieldset";this.elementType="checkboxes"}CSBJs_Form_Element_Checkboxes.inherits(CSBJs_Form_Element_Multi);
CSBJs_Form_Element_Checkboxes.prototype.addOption=function(a,b,d){"undefined"==typeof this.options&&(this.options=[]);"undefined"!=typeof d&&CSBJs_OOP.isClass(d,"CSBJs_Form_Element_OtherTextField")?(d.parentElement=this,d.parentOptionValue=b,this.otherFields.push(d),this.options.push({label:a,value:b,other_field:d})):this.options.push({label:a,value:b})};CSBJs_Form_Element_Checkboxes.prototype.startGroup=function(a){this.groups.push({start:this.options.length,label:a})};
CSBJs_Form_Element_Checkboxes.prototype.endGroup=function(){this.groups[this.groups.length-1].end=this.options.length-1};CSBJs_Form_Element_Checkboxes.prototype.setValues=function(a){this.values=a};CSBJs_Form_Element_Checkboxes.prototype.getValues=function(){return this.values};CSBJs_Form_Element_Checkboxes.prototype.getValue=function(){return this.values};CSBJs_Form_Element_Checkboxes.prototype.setValue=function(a){"object"==typeof a&&0<a.length?this.setValues(a):this.value=a};
CSBJs_Form_Element_Checkboxes.prototype.updateValue=function(){if("undefined"!=typeof document){this.values=[];var a=document.getElementById("Wrapper_"+this.getIdName());if(null!==a)for(var a=a.getElementsByTagName("input"),b=null,d=0;d<a.length;d++)if("undefined"!=typeof a[d].checked&&a[d].checked&&a[d].name.replace(/\[\]/,"")===this.name&&this.values.push(a[d].value),a[d].className.match(/CSBJs_Form_Element_OtherTextField-field/))for(var e in this.otherFields){if(this.otherFields.hasOwnProperty(e)&&
this.otherFields[e].name==a[d].name){var f=b.checked?a[d].value:"";this.otherFields[e].noValidation=b.checked?!1:!0;this.otherFields[e].setValue(f)}}else b=a[d]}};CSBJs_Form_Element_Checkboxes.prototype.validate=function(){var a=!0;if(this.parent.validate.call(this)){for(var b in this.otherFields)this.otherFields.hasOwnProperty(b)&&"undefined"!=typeof this.otherFields[b]&&(this.otherFields[b].validate()||(a=!1));return a}return!1};
CSBJs_Form_Element_Checkboxes.prototype.render=function(){this.parent.preRender.call(this);this.decorator.setId("Wrapper_"+this.getIdName());var a=new CSBJs_Decorator_HtmlNode("legend");a.appendChild('<div class="legend-label">'+this.label+"</div>");var b=new CSBJs_Decorator_HtmlNode(this.fieldTag);b.addClass("CSBJs_Form_Element-field");b.addClass(this.className+"-field");b.attr("name",this.name);b.setId(this.getIdName());b.appendChild(a);var a=null,d=[],e;for(e in this.groups)this.groups.hasOwnProperty(e)&&
d.push(this.groups[e]);e=null;for(var f in this.options)if(this.options.hasOwnProperty(f)){0<d.length&&null===a&&(a=d.shift());var h=new CSBJs_Decorator_HtmlNode("span");h.addClass(this.className+"-option");if(!0===this.styledCheckbox){var g=new CSBJs_Decorator_HtmlNode("span");g.addClass("csbjs-option-styled-checkbox");h.appendChild(g)}g=new CSBJs_Decorator_HtmlNode("input");g.attr("type","checkbox");if(0<this.values.length)for(var k in this.values)if(this.values.hasOwnProperty(k)&&this.values[k]==
this.options[f].value){g.attr("checked","checked");g.attr("defaultChecked","defaultChecked");h.addClass("csbjs-checkbox-checked");break}g.setId(this.getIdName()+"_"+this.options[f].value);g.attr("value",this.options[f].value);g.addClass(this.className+"-field");g.attr("name",this.name+"[]");this.disabled&&g.attr("disabled","disabled");var j=new CSBJs_Decorator_HtmlNode("label");j.attr("for",this.getIdName()+"_"+this.options[f].value);j.appendChild(this.options[f].label);h.appendChild(g);h.appendChild(j);
"undefined"!=typeof this.options[f].other_field&&(g=this.options[f].other_field.render(!0),g.attr("parent",this.getIdName()+"_"+f),h.appendChild(g));"undefined"!=typeof a&&null!==a?parseInt(f,10)==a.start?(e=new CSBJs_Decorator_HtmlNode("fieldset"),g=new CSBJs_Decorator_HtmlNode("legend"),g.appendChild('<div class="legend-label">'+a.label+"</div>"),e.appendChild(g),e.appendChild(h)):parseInt(f,10)==a.end&&null!==e?(e.appendChild(h),b.appendChild(e),a=null):null!==e&&e.appendChild(h):b.appendChild(h)}f=
this.getErrors();k=new CSBJs_Decorator_HtmlNode("ul");k.addClass("CSBJs_Form_Element-errors");if(0<f.length)for(var o in f)f.hasOwnProperty(o)&&(a=new CSBJs_Decorator_HtmlNode("li"),a.appendChild(f[o]),k.appendChild(a));!this.hidden&&this.active&&(this.decorator.appendChild(b),0<f.length&&this.decorator.appendChild(k));return this.decorator};CSBJs_Form_Element_Checkboxes.prototype.optionClickEvent=function(){};
CSBJs_Form_Element_Checkboxes.prototype.postRender=function(){var a=this;this.styledCheckbox&&this.addOptionEventHandler("click_0",function(b){b=b.currentTarget?b.currentTarget:b.srcElement;b.className.match(/csbjs-option-styled-checkbox/)&&(b=b.parentNode.getElementsByTagName("input")[0]);for(var d=b.value,e=null,f=0;f<a.values.length;f++)if(d==a.values[f]){e=f;break}null!==e?(b.checked=!1,b.defaultChecked=!1):(b.checked="checked",b.defaultChecked="checked");a.parentGroup.parentForm.elementEvent("onClick",
b,!0)});if(!this.parent.postRender.call(this))return!1;for(var b=0;b<this.options.length;b++){var d=this.options[b].value.replace(" ","_"),d=document.getElementById(this.getIdName()+"_"+d);if("undefined"!=typeof d&&null!==d)for(var e in this.optionEvents)if(this.optionEvents.hasOwnProperty(e)){var f=e.replace(/_\d/,"");d.addEventListener?d.addEventListener(f,this.optionEvents[e],!0):d.attachEvent&&d.attachEvent("on"+f,this.optionEvents[e],!0)}}if(this.styledCheckbox){b=a.getElementNode().getElementsByTagName("span");
for(e=0;e<b.length;e++)b[e].className.match(/csbjs-option-styled-checkbox/)&&(b[e].addEventListener?b[e].addEventListener("click",this.optionEvents.click_0,!0):b[e].attachEvent&&b[e].attachEvent("onclick",this.optionEvents.click_0,!0))}for(e=0;e<this.otherFields.length;e++)this.otherFields[e].postRender();return!0};
CSBJs_Form_Element_Checkboxes.prototype.clearEvents=function(){for(var a=0;a<this.otherFields.length;a++)this.otherFields[a].clearEvents();for(a=0;a<this.options.length;a++){var b=this.options[a].value.replace(" ","_"),b=document.getElementById(this.getIdName()+"_"+b);if("undefined"!=typeof b&&null!==b)for(var d in this.optionEvents)if(this.optionEvents.hasOwnProperty(d)){var e=d.replace(/_\d/,"");b.removeEventListener?b.removeEventListener(e,this.optionEvents[d],!0):b.detachEvent&&b.detachEvent("on"+
e,this.optionEvents[d],!0)}}return!this.parent.clearEvents.call(this)?!1:!0};function CSBJs_Form_Element_Radio(a){this.name=a;this.className="CSBJs_Form_Element_Radio";this.validations=[];this.filters=[];this.observers=[];this.options=[];this.values=[];this.value=null;this.otherFields=[];this.fieldTag="fieldset";this.elementType="radio"}CSBJs_Form_Element_Radio.inherits(CSBJs_Form_Element_Multi);
CSBJs_Form_Element_Radio.prototype.addOption=function(a,b,d){"undefined"==typeof this.options&&(this.options=[]);"undefined"!=typeof d&&CSBJs_OOP.isClass(d,"CSBJs_Form_Element_OtherTextField")?(d.parentElement=this,d.parentOptionValue=b,this.otherFields.push(d),this.options.push({label:a,value:b,other_field:d})):this.options.push({label:a,value:b})};CSBJs_Form_Element_Radio.prototype.setValues=function(a){this.values=a};CSBJs_Form_Element_Radio.prototype.getValues=function(){return this.values};
CSBJs_Form_Element_Radio.prototype.getValue=function(){return this.values};CSBJs_Form_Element_Radio.prototype.setValue=function(a){"object"==typeof a&&0<a.length?this.setValues(a):this.value=a};
CSBJs_Form_Element_Radio.prototype.updateValue=function(){if("undefined"!=typeof document){this.values=[];var a=document.getElementById("Wrapper_"+this.getIdName());if(null!==a)for(var a=a.getElementsByTagName("input"),b=null,d=0;d<a.length;d++)if("undefined"!=typeof a[d].checked&&a[d].checked&&a[d].name.replace(/\[\]/,"")===this.name&&this.values.push(a[d].value),"CSBJs_Form_Element_OtherTextField_field"==a[d].className)for(var e in this.otherFields){if(this.otherFields.hasOwnProperty(e)&&this.otherFields[e].name==
a[d].name){var f=b.checked?a[d].value:"";this.otherFields[e].noValidation=b.checked?!1:!0;this.otherFields[e].setValue(f)}}else b=a[d]}};CSBJs_Form_Element_Radio.prototype.validate=function(){var a=!0;if(this.parent.validate.call(this)){for(var b in this.otherFields)this.otherFields.hasOwnProperty(b)&&"undefined"!=typeof this.otherFields[b]&&(this.otherFields[b].validate()||(a=!1));return a}return!1};
CSBJs_Form_Element_Radio.prototype.render=function(){this.parent.preRender.call(this);this.decorator.setId("Wrapper_"+this.getIdName());var a=new CSBJs_Decorator_HtmlNode("legend");a.appendChild('<div class="legend-label">'+this.label+"</div>");var b=new CSBJs_Decorator_HtmlNode(this.fieldTag);b.addClass("CSBJs_Form_Element-field");b.addClass(this.className+"-field");b.attr("name",this.name);b.setId(this.getIdName());b.appendChild(a);var a=null,d=[],e;for(e in this.groups)d.push(this.groups[e]);var f=
null;for(e in this.options)if(this.options.hasOwnProperty(e)){0<d.length&&null==a&&(a=d.shift());var h=new CSBJs_Decorator_HtmlNode("span");h.addClass(this.className+"-option");var g=new CSBJs_Decorator_HtmlNode("input");g.attr("type","radio");0===this.values.length&&"undefined"!=typeof this.value&&this.value&&(this.values[0]=this.value);if(0<this.values.length)for(var k in this.values)if(this.values.hasOwnProperty(k)&&this.values[k]==this.options[e].value){g.attr("checked","checked");g.attr("defaultChecked",
"checked");break}g.setId(this.getIdName()+"_"+e);g.attr("value",this.options[e].value);g.addClass(this.className+"-field");g.attr("name",this.name+"[]");this.disabled&&g.attr("disabled","disabled");"undefined"!=typeof document&&g.attr("onClick","return CSBJs_Form.forms."+this.parentGroup.parentForm.formId+".elementEvent('onClick',this,true)");var j=new CSBJs_Decorator_HtmlNode("label");j.attr("for",this.getIdName()+"_"+e);j.appendChild(this.options[e].label);h.appendChild(g);h.appendChild(j);"undefined"!=
typeof this.options[e].other_field&&(g=this.options[e].other_field.render(!0),g.attr("parent",this.getIdName()+"_"+e),h.appendChild(g));null!=a?parseInt(e)==a.start?(f=new CSBJs_Decorator_HtmlNode("fieldset"),g=new CSBJs_Decorator_HtmlNode("legend"),g.appendChild('<div class="legend-label">'+a.label+"</div>"),f.appendChild(g),f.appendChild(h)):parseInt(e)==a.end&&null!=f?(f.appendChild(h),b.appendChild(f),a=null):null!=f&&f.appendChild(h):b.appendChild(h)}e=this.getErrors();a=new CSBJs_Decorator_HtmlNode("ul");
a.addClass("CSBJs_Form_Element-errors");if(0<e.length)for(k in e)e.hasOwnProperty(k)&&(d=new CSBJs_Decorator_HtmlNode("li"),d.appendChild(e[k]),a.appendChild(d));!this.hidden&&this.active&&(this.decorator.appendChild(b),0<e.length&&this.decorator.appendChild(a));return this.decorator};
function CSBJs_Form_Element_TextArea(a){this.name=a;this.className="CSBJs_Form_Element_TextArea";this.validations=[];this.observers=[];this.filters=[];this.fieldTag=this.elementType=this.type="textarea";this.innerValue=!0}CSBJs_Form_Element_TextArea.inherits(CSBJs_Form_Element);CSBJs_Form_Element_TextArea.prototype.postRender=function(){var a=this;this.addEventHandler("blur_0",function(){a.parentGroup.parentForm.elementEvent("onBlur",a)});this.parent.postRender.call(this)};
function CSBJs_Form_Validation(){this.errorMessage="Validation failed";this.actionOnSucceed=this.actionOnFailure=this.targetElement=this.validatedErrorMessage=null}CSBJs_Form_Validation.prototype.setErrorMessage=function(a){this.errorMessage=a};CSBJs_Form_Validation.prototype.setFlashErrorMessage=function(a){this.validatedErrorMessage=a};CSBJs_Form_Validation.prototype.getErrorMessage=function(){return"string"==typeof this.validatedErrorMessage?this.validatedErrorMessage:this.errorMessage};
CSBJs_Form_Validation.prototype.applyErrorMessageFilter=function(a){null===a||0===this.errorMessage.length||(this.errorMessage=this.errorMessage.replace(/\$element_name/,a.name),this.errorMessage=this.errorMessage.replace(/\$element_label/,a.label),null!==this.targetElement&&(this.errorMessage=this.errorMessage.replace(/\$target_element_name/,this.targetElement.name),this.errorMessage=this.errorMessage.replace(/\$target_element_label/,this.targetElement.label)))};
CSBJs_Form_Validation.prototype.validate=function(a){if(null===a||!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element")&&!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element_Multi")&&!CSBJs_OOP.isClass(a,"CSBJs_Form_Element_OtherTextField"))return!1;"string"==typeof a.value&&null!==a.value.match(/^#option-divider#/)&&(a.value=null);this.applyErrorMessageFilter(a);return!0};
CSBJs_Form_Validation.prototype.callAction=function(a){!0===a&&null!==this.actionOnSucceed?this.actionOnSucceed():!1===a&&null!==this.actionOnFailure&&this.actionOnFailure()};function CSBJs_Form_Validation_Regex(){this.regex=null}CSBJs_Form_Validation_Regex.inherits(CSBJs_Form_Validation);CSBJs_Form_Validation_Regex.prototype.setRegex=function(a){this.regex=a};
CSBJs_Form_Validation_Regex.prototype.validate=function(a){if(null==this.regex||null==a||!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element")&&!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element_Multi")||!this.parent.validate.call(this,a))return!1;a=a.getValue();return null==a||0==a.length||a.match(this.regex)?!0:!1};function CSBJs_Form_Validation_CompareEqual(a){this.regex=null;this.targetElement=a}CSBJs_Form_Validation_CompareEqual.inherits(CSBJs_Form_Validation);
CSBJs_Form_Validation_CompareEqual.prototype.setCompareEqual=function(a){this.regex=a};CSBJs_Form_Validation_CompareEqual.prototype.validate=function(a){if(!this.parent.validate.call(this,a)||null==a)return!1;var a=a.getValue(),b=this.targetElement.getValue();return a===b?!0:!1};function CSBJs_Form_Validation_Required(){this.errorMessage="$element_label is required"}CSBJs_Form_Validation_Required.inherits(CSBJs_Form_Validation);
CSBJs_Form_Validation_Required.prototype.validate=function(a){if(!this.parent.validate.call(this,a))return!1;var b=a.getValue();return"undefined"!==typeof a.elementType&&"checkbox"==a.elementType&&a.checkRequired?b===a.checkedValue?!0:!1:null===b||0===b.length||""===b?!1:!0};function CSBJs_Form_Validation_JsFunction(a){this.functionName=a;this.condition=this.functionBody=this.validatedErrorMessage=null}CSBJs_Form_Validation_JsFunction.inherits(CSBJs_Form_Validation);
CSBJs_Form_Validation_JsFunction.prototype.setFunction=function(a){this.functionBody=a};CSBJs_Form_Validation_JsFunction.prototype.setCondition=function(a){this.condition=a};CSBJs_Form_Validation_JsFunction.prototype.applyErrorMessageFilter=function(a){null===a||0===this.errorMessage.length||(this.parent.applyErrorMessageFilter.call(this,a),null!==this.condition&&"undefined"!=typeof this.condition&&(this.errorMessage=this.errorMessage.replace("{}",this.condition)))};
CSBJs_Form_Validation_JsFunction.prototype.validate=function(a){if(null===this.functionName||null===a||!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element")&&!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element_Multi")||!this.parent.validate.call(this,a))return!1;a=a.getValue();if(null===a||0===a.length||null===this.functionBody)return!0;"function"!=typeof CSBJs_Form.__valFns[this.functionName]&&eval("CSBJs_Form.__valFns."+this.functionName+" = "+this.functionBody);a=CSBJs_Form.__valFns[this.functionName](a,this.condition);
this.validatedErrorMessage=null;if(!0===a)return!0;"object"==typeof a&&"undefined"!==typeof a.errors&&0<a.errors.length&&this.setFlashErrorMessage(a.errors[0]);return!1};function CSBJs_Form_Validation_Ajax(){this.excludeValue=this.previousElementValue=this.timeoutCallback=this.errorCallback=this.successCallback=this.endpoint=null}CSBJs_Form_Validation_Ajax.inherits(CSBJs_Form_Validation);CSBJs_Form_Validation_Ajax.prototype.setEndpoint=function(a){this.endpoint=a};
CSBJs_Form_Validation_Ajax.prototype.setExcludeValue=function(a){this.excludeValue=a};
CSBJs_Form_Validation_Ajax.prototype.validate=function(a){if("undefined"==typeof document||null===this.endpoint)return!0;if(null===a||!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element")&&!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element_Multi")||!this.parent.validate.call(this,a))return!1;var b=a.getValue();if(null===b||0===b.length)return!0;if(this.excludeValue&&b==this.excludeValue)return this.previousElementValue=b,!0;var d=this.endpoint.replace("{value}",encodeURI(b).replace(/\//g,"")),e=this;if(null!==this.previousElementvalue&&
this.previousElementValue===b)return 0<a.getErrors().length?!1:!0;this.previousElementValue=b;CSBJs_Ajax.get(d,null,function(b){if("function"==typeof e.successCallback&&!e.successCallback(b)){for(var d in a.validations)a.validations[d].validation==e&&(a.validations[d].error=!0);a.updateElement()}},function(a){"function"==typeof e.timeoutCallback&&e.timeoutCallback(a)},function(a){"function"==typeof e.errorCallback&&e.errorCallback(a)});return!0};
function CSBJs_Form_Validation_JsonP(){this.excludeValue=this.params=this.previousElementValue=this.timeoutCallback=this.errorCallback=this.successCallback=this.endpoint=null}CSBJs_Form_Validation_JsonP.inherits(CSBJs_Form_Validation);CSBJs_Form_Validation_JsonP.prototype.setEndpoint=function(a){this.endpoint=a};CSBJs_Form_Validation_JsonP.prototype.setParams=function(a){this.params=a};CSBJs_Form_Validation_JsonP.prototype.setExcludeValue=function(a){this.excludeValue=a};
CSBJs_Form_Validation_JsonP.prototype.validate=function(a){if("undefined"==typeof document||null===this.endpoint)return!0;if(null===a||!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element")&&!CSBJs_OOP.isSubClass(a,"CSBJs_Form_Element_Multi")||!this.parent.validate.call(this,a))return!1;var b=a.getValue();if(null===b||0===b.length)return!0;if(this.excludeValue&&b==this.excludeValue)return this.previousElementValue=b,!0;var d=this.endpoint.replace("{value}",encodeURI(b).replace(/\//g,"")),e=this;if(null!==
this.previousElementvalue&&this.previousElementValue===b)return 0<a.getErrors().length?!1:!0;this.previousElementValue=b;CSBJs_Ajax.getJsonp(d,this.params,function(b){if("function"==typeof e.successCallback&&!e.successCallback(b)){for(var d in a.validations)a.validations[d].validation==e&&(a.validations[d].error=!0);a.updateElement()}},function(a){"function"==typeof e.timeoutCallback&&e.timeoutCallback(a)},function(a){"function"==typeof e.errorCallback&&e.errorCallback(a)});return!0};
function CSBJs_Form_Observer(a){this.element=a;this.observees={};this.action=null;null===a.conditionals&&(a.conditionals=[]);a.conditionals.push(this)}CSBJs_Form_Observer.prototype.observe=function(a,b){b.addObserver(this);this.observees[a]=b};CSBJs_Form_Observer.prototype.setAction=function(a){a.observer=this;this.action=a};CSBJs_Form_Observer.prototype.execute=function(){if(null===this.element||null===this.action)return!1;this.action.execute();return!0};
function CSBJs_Form_Observer_Action(){this.observer=null;this.conditions=[];this.values=[]}CSBJs_Form_Observer_Action.prototype.addCondition=function(a,b){this.conditions.push(a);"undefined"!=typeof b&&this.values.push(b)};
CSBJs_Form_Observer_Action.prototype.execute=function(){if(null===this.observer)return!1;var a="var elements = {}; ",b;for(b in this.observer.observees)this.observer.observees.hasOwnProperty(b)&&(a+="elements['"+b+"'] = this.observer.observees[\""+b+'"]; ');eval(a);var a=!0,d;for(d in this.conditions)if(this.conditions.hasOwnProperty(d)){b=this.conditions[d].replace(/([^&\|\s]+)(\.value)/g,"elements['$1']$2");try{if(eval(b))return 0<this.values.length&&"undefined"!=typeof this.values[d]?this.values[d]:
!0;a=!1}catch(e){}}return a};function CSBJs_Form_Observer_Action_Hide(){this.observer=null;this.conditions=[]}CSBJs_Form_Observer_Action_Hide.inherits(CSBJs_Form_Observer_Action);CSBJs_Form_Observer_Action_Hide.prototype.execute=function(){this.observer.element.setHidden(this.parent.execute.call(this));this.observer.element.updateElement();return!0};function CSBJs_Form_Observer_Action_ChangeDynamic(){this.observer=null;this.conditions=[];this.values=[]}CSBJs_Form_Observer_Action_ChangeDynamic.inherits(CSBJs_Form_Observer_Action);
CSBJs_Form_Observer_Action_ChangeDynamic.prototype.execute=function(){var a=this.parent.execute.call(this);if(!1===a||!0===a)return!1;"undefined"!=typeof this.observer.element.elements[a]&&this.observer.element.setCurrentElement(a);this.observer.element.updateElement();return!0};function CSBJs_Form_Filter(){this.targetElement=this.element=null}CSBJs_Form_Filter.prototype.apply=function(){return!0};
function CSBJs_Form_Filter_Replace(a,b){this.element=this.replacement=this.search=null;"undefined"!=typeof a&&(this.search=a);"undefined"!=typeof b&&(this.replacement=b)}CSBJs_Form_Filter_Replace.inherits(CSBJs_Form_Filter);CSBJs_Form_Filter_Replace.prototype.setSearch=function(a){this.search=a};CSBJs_Form_Filter_Replace.prototype.setReplacement=function(){this.replacement=replacemnt};
CSBJs_Form_Filter_Replace.prototype.apply=function(){if(null===this.search||null===this.replacement||null===this.element)return!1;this.element.updateValue();var a=this.element.getValue(),a=a.replace(this.search,this.replacement);this.element.setValue(a);this.element.updateElement();return!0};if("undefined"==typeof UBM)var UBM=function(){};UBM.Util=function(){};
UBM.Util.xmlToDom=function(a){var b=null;if("undefined"!=typeof window.DOMParser)b=function(a){return(new window.DOMParser).parseFromString(a,"text/xml")};else if("undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM"))b=function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};else throw Error("No XML parser found");return b(a)};
UBM.Util.ieBrowserVersion=function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!==/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a};UBM.Util.getUrlParams=function(a){var b={},d=null,d=window.location.search;if(a)if(match=a.match(/\?.*/))d=match[0];else return null;d.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,d,h){b[d]=h});return b};
UBM.Util.mergeJson=function(){if(1>=arguments.length)throw Error("Must provide at least two objects");for(var a={},b=0;b<arguments.length;b++){var d=arguments[b];if("object"!=typeof d)throw Error("Argument "+(b+1)+" is not a valid JSON object");for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a};UBM.Widget=function(){};UBM.Widget.version="0.07";UBM.Widget.alert=function(a,b){CSBJs_App_Window_Alert.alert(a,{okAction:b,width:400,cls:"UBM_Widget_Alert-message"})};
UBM.Widget.loadingStart=function(a,b){CSBJs_App_Window_Alert.waitLoading(a,"undefined"==typeof b||null===b?"data:image/gif;base64,R0lGODlhWgBaAOZ/ANnZ2+Xl5oODhE5OUHt7fbKys1ZWWKGhoqurrMXFxb2+wbi6vcrKyuHi4lRUVri5vFFRVElJS8HCxW5ub87O0Pr6+vLy88zNz9LS1GFhY1BQUurq65OTlN7e3v7+/vDw8dXV13Nzdbq7vlpaXY6Oj7y8vdDR04aGiNXW2PT09Ojo6YmJip2dnsXGyO7u78DBwt/f4Nzc3ru8v+rq7Nvb2+np6ra2uVlZW+zs7b/Aw19fYK+vsHd3eMfHyLm6vcfIysjJzGZmaJeXmKamqIuLjenq6+fn52trbdvb3MvLzsPEx5+foW9vcfn5+f39/fz8/Pf398vLzPb29vj4+PHx8cvMzu/v8Pz9/fn6+s/P0ff3+MnKzPv7+9/g4fz7/O/w8I+PkNPU1fX19c3O0Le4u8TFx/b29/n5+vf29/j3+Nvc3bu7vM/Q0l1dX/79/f7+/bq6u/z8++Tk5dTT1fb19ufo6fHy8tfY2X5+gPz8/fPz893e31hYWry9wP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGODdGMTE3NDA3MjA2ODExOEY2MkM5OTY2MjQ2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":
b,{width:95,cls:"UBM_Widget_Alert-loading"})};UBM.Widget.loadingStop=function(){CSBJs_App_Window_Alert.close()};UBM.Widget.Util=function(){};UBM.Widget.Util.NG_FieldTypes={TEXT:200,PASSWORD:201,RADIO_BUTTON:202,CHECKBOX:203,SELECT:204,MULTI_SELECT:205,TEXT_AREA:206,DROP_DOWN:215};UBM.Widget.Util.NG_FieldChoiceTypes={SELECT:"S",OTHER:"O",DIVIDER:"D"};
UBM.Widget.Util.ngXmlFormToCsbForm=function(a){var b=null;if(!a.firstChild)throw Error("Invalid NG XML Form");if("xml"==a.firstChild.nodeName)a.firstChild.nextSibling&&"FormWrapper"==a.firstChild.nextSibling.nodeName&&(b=a.firstChild.nextSibling);else if("FormWrapper"==a.firstChild.nodeName)b=a.firstChild;else throw Error("Invalid NG XML Form");if(!b)throw Error("Invalid NG XML Form");var d=function(a){if("undefined"==typeof a||null===a)return null;if(a.firstChild&&"#text"==a.firstChild.nodeName)return a.firstChild.nodeValue},
e=function(a,b){var e=a.getElementsByTagName(b);return 0<e.length?d(e[0]):null},f=b.getElementsByTagName("Form");if(1!==f.length)throw Error("Invalid NG XML Form");f=f[0];a={form:{},groups:{action:{label:null,order:999},assets:{label:"Assets",order:-1}},elements:[],validations:{},steps:[]};a.form.id=f.getAttribute("id");a.form.method="post";a.form.action="";var h=null,b=b.getElementsByTagName("FormQuestionAnswer");if(0<b.length)for(var h={},g=0;g<b.length;g++){var k=b[g],j=k.getElementsByTagName("FormQuestion");
if(1==j.length){var j=j[0],j=j.getAttribute("id"),o=e(k,"Hidden"),l=e(k,"Answer");h[j]={hidden:o};null!==l&&(h[j].answer=l);k=k.getElementsByTagName("Choice");if(0<k.length){h[j].choices=[];for(o=0;o<k.length;o++)l=d(k[o]),h[j].choices.push(l)}}}b=f.getElementsByTagName("FormQuestion");if(0<b.length){g=null;k=j=0;f=[];for(o=0;o<b.length;o++){k+=1;l={validations:[]};FormQuestion=b[o];var m=FormQuestion.getAttribute("id");e(FormQuestion,"QuestionName");var n=parseInt(e(FormQuestion,"FieldType"),10);
e(FormQuestion,"GroupOrder");var p=e(FormQuestion,"DisplayText");e(FormQuestion,"DisplayOrder");var t=e(FormQuestion,"Description"),r=e(FormQuestion,"Requirement");e(FormQuestion,"DisplayRequirement");var s=e(FormQuestion,"DefaultAnswer");e(FormQuestion,"GroupDisplayRequirement");l.label=p;l.tooltip=p;l.name=m;l.order=k;"undefined"!=typeof s&&null!==s&&(l.value=s);l.required="R"==r?!0:!1;l.required_message="This field is required";p=e(FormQuestion,"GroupName");r=null;null===p?g?r=g:g=r="blank_"+m:
r=p.replace(/\s/g,"_");if("undefined"==typeof a.groups[r]||null===a.groups[r])a.groups[r]={label:p,order:j},j+=1;l.group=r;if(h&&"undefined"!=typeof h[m]&&null!==h[m]){"undefined"!=typeof h[m].answer&&(l.value=h[m].answer);if("undefined"!=typeof h[m].choices&&null!==h[m].choices){var q=h[m].choices;if(0<q.length){l.values=[];for(p=0;p<q.length;p++)l.values.push(q[p])}}if("undefined"!=typeof h[m].hidden&&(!0===h[m].hidden||"true"==h[m].hidden))l.hidden=!0,l.active=!1}p=FormQuestion.getElementsByTagName("FormQuestionChoice");
if(0<p.length){l.options=[];for(var u=null,r=0,v,y=0;y<p.length;y++){v=s=!1;var u=null,u=p[y],A=u.getAttribute("id"),z=e(u,"ChoiceType"),w=e(u,"DisplayText");e(u,"DisplayOrder");e(u,"Grouping");e(u,"DefaultSelected");u=A;switch(z){case this.NG_FieldChoiceTypes.SELECT:break;case this.NG_FieldChoiceTypes.OTHER:var z=l.group,x=w+" (please specify)",E="text",F=m+"_"+A+"_o",A=null;l.value&&(A=l.value);var C=null;n==this.NG_FieldTypes.CHECKBOX?(x=z=null,v=!0,E="other-text"):(C={observes:[],actions:[]},
C.observes.push(m),C.actions.push({type:"hide",conditions:[m+".value !=\t'"+u+"'"]}));var B={};B.type=E;B.name=F;B.required=!0;B.required_message="You must specify";C&&(B.conditionals=C);x&&(B.label=x);z&&(B.group=z);l.order&&(B.order=l.order);A&&(B.value=A);f.push(B);break;case this.NG_FieldChoiceTypes.DIVIDER:u="#option-divider#"+r;r+=1;s=!0;break;default:continue}w={label:w,value:u};s&&(w.disabled=!0);v&&(w.other=F);l.options.push(w)}}switch(n){case this.NG_FieldTypes.TEXT:l.type="text";break;
case this.NG_FieldTypes.PASSWORD:l.type="password";break;case this.NG_FieldTypes.RADIO_BUTTON:l.type="radio";break;case this.NG_FieldTypes.CHECKBOX:0===p.length?(l.type="checkbox",l.checkedValue="Y",l.uncheckedValue="N",t?l.description=t:(l.description=l.label,l.label="")):l.type="checkboxes";break;case this.NG_FieldTypes.DROP_DOWN:case this.NG_FieldTypes.SELECT:l.type="select";0<p.length&&(h&&"undefined"!=typeof h[m]?"undefined"!=typeof h[m].choices&&null!==h[m].choices&&0<q.length&&(l.value=h[m].choices[0]):
l.value=l.options[0].value);break;case this.NG_FieldTypes.MULTI_SELECT:l.type="select";break;case this.NG_FieldTypes.TEXT_AREA:l.type="textarea";break;default:continue}m=FormQuestion.getElementsByTagName("FormQuestionCondition");if(0<m.length){for(var n={},D=[],t=[],p={type:"hide",conditions:[]},r=function(a){for(var b=0;b<D.length;b++)if(D[b]==a)return true;return false},s=0;s<m.length;s++)if(v=d(m[s]),y=v.match(/H\((.+)\)/),w=v.match(/S\((.+)\)/),v=u=null,y?(u=y[1],v="hide"):w&&(u=w[1],v="show"),
null!==v)if(y=u.split("||"),x=w=x=null,1<y.length){u="";for(z=0;z<y.length;z++)x=y[z].match(/Q\(([^,\)]+),([^\)]+)\)/),w=x[1],x=x[2].replace(/^\s+|\s+$/g,""),r(w)||D.push(w),"hide"==v?u=u+w+".value == '"+x+"' || ":"show"==v&&(u=u+w+".value != '"+x+"' && ");u=u.replace(/ \|\| $/,"");u=u.replace(/ \&\& $/,"");p.conditions.push(u);t.push(p)}else 1==y.length&&(x=y[0].match(/Q\(([^,\)]+),([^\)]+)\)/),w=x[1],x=x[2].replace(/^\s+|\s+$/g,""),r(w)||D.push(w),"hide"==v?p.conditions.push(w+".value == '"+x+"'"):
"show"==v&&p.conditions.push(w+".value != '"+x+"'"),t.push(p));n.observes=D;n.actions=t;l.conditionals=n}m=FormQuestion.getElementsByTagName("FormQuestionFilter");for(n=0;n<m.length;n++)if(s=m[n],t=e(s,"FilterFunctionName"),v=e(s,"FilterType"),p=e(s,"FilterBody"),r=e(s,"FilterCondition"),"V"==v){if("undefined"==typeof a.validations[t]||null===a.validations[t])s=e(s,"ErrorMessage"),a.validations[t]={type:"js_function"},a.validations[t].message=s,a.validations[t].function_body=p,r&&0<r.length&&(a.validations[t].condition=
r);l.validations.push(t)}a.elements.push(l)}if(0<f.length)for(q=0;q<f.length;q++)a.elements.push(f[q]);a.elements.push({type:"submit",name:"submit_button",group:"action",value:"Submit",order:0})}else throw Error("Invalid NG XML Form. No form question.");return a};
UBM.Widget.Form=function(a){if("undefined"==typeof CSBJs_Form)throw Error("Required CSBJs_Form Library");this._options={ajax:!1,method:"post",action:null,formXML:null,successCallback:null,failureCallback:null,ajaxStartCallback:null,ajaxCompleteCallback:null,ajaxErrorCallback:null,windowTitle:"Registration",windowWidth:800,windowHeight:null,windowMaxHeight:600,windowClosable:!0,onClose:null,emailFieldName:"131",nicknameFieldName:"123",passwordFieldName:"124",emailConfirmationField:!0,passwordConfirmationField:!0,
emailCheckService:null,nicknameCheckService:null,serviceApiKey:null,submitFormId:!1,submitFieldTypeTable:!1,asteriskRequiredLabeling:!0,asteriskRequiredLabelingOnSingleCheckbox:!1,submitButtonLabel:"Submit",autocomplete:!0,loginLinkCallback:null};this._cached={csbForm:null,form_window:null,form_header_container:null,form_header_content:null,form_footer_container:null,form_footer_html:null,form_message_container:null};this._language=UBM.Widget.Resource.Language.getInstance();"object"==typeof a&&(this._options=
UBM.Util.mergeJson(this._options,a));return this};UBM.Widget.Form.prototype.setFormMethod=function(a,b){this._options.method=a;"boolean"==typeof b&&(this._options.ajax=b)};UBM.Widget.Form.prototype.setFormAction=function(a){this._options.action=a};UBM.Widget.Form.prototype.setFormXML=function(a){this._options.formXML=a;delete this._cached.csbForm;this._cached.csbForm=null;return this.initForm()?!0:!1};
UBM.Widget.Form.prototype.initForm=function(){var a=null;if("object"!=typeof this._cached.csbForm||null===this._cached.csbForm){if(null===this._options.formXML)throw Error("Form XML data is not set");a=UBM.Util.xmlToDom(this._options.formXML);a=UBM.Widget.Util.ngXmlFormToCsbForm(a);if(!a)return!1;a=CSBJs_Form.createFormFromJson(a);if("undefined"==typeof a||null===a)throw Error("Unable to create CSBJs Form from xml");if(null!==this._options.emailFieldName){var b=a.getElementByName(this._options.emailFieldName);
if(b){if(!0!==b.disabled&&!0!==b.hidden&&!0===this._options.emailConfirmationField){var d=b.parentGroup,e=new CSBJs_Form_Element_TextField("emailConfirmationField");e.setDisplayOrder(b.displayOrder);e.setLabel(this._language.get("FormLabel_ConfirmEmail"));e.setRequired(!0);var f=new CSBJs_Form_Validation_CompareEqual(b);f.setErrorMessage(this._language.get("ValidationError_ConfirmEmailNotMatch"));e.addValidation(f);d.addElement(e)}null!==this._options.emailCheckService&&(d=new CSBJs_Form_Validation_JsonP,
null!==b.value&&d.setExcludeValue(b.value),null!==this._options.serviceApiKey&&d.setParams({"ng-api-key":this._options.serviceApiKey}),d.setEndpoint(this._options.emailCheckService),typeof("function"==this._options.loginLinkCallback)?(UBM.Widget.Form.loginLink=this._options.loginLinkCallback,e=this._language.get("ValidationError_EmailExistsWithLogin").replace(/\$\{login_callback\}/,"UBM.Widget.Form.loginLink();return false;")):e=this._language.get("ValidationError_EmailExists"),d.setErrorMessage(e),
d.successCallback=function(a){b.getElementNode();return a.emailInUse?!a.emailInUse:true},b.addValidation(d))}}if(null!==this._options.nicknameFieldName){var h=a.getElementByName(this._options.nicknameFieldName);h&&null!==this._options.nicknameCheckService&&(d=new CSBJs_Form_Validation_JsonP,null!==h.value&&d.setExcludeValue(h.value),null!==this._options.serviceApiKey&&d.setParams({"ng-api-key":this._options.serviceApiKey}),d.setEndpoint(this._options.nicknameCheckService),d.setErrorMessage(this._language.get("ValidationError_NicknameExists")),
d.successCallback=function(a){h.getElementNode();return a.nicknameInUse?!a.nicknameInUse:!0},h.addValidation(d))}if(null!==this._options.passwordFieldName&&(f=a.getElementByName(this._options.passwordFieldName))&&!0!==f.disabled&&!0!==f.hidden&&!0===this._options.passwordConfirmationField)d=f.parentGroup,e=new CSBJs_Form_Element_Password("passwordConfirmationField"),e.setDisplayOrder(f.displayOrder),e.setLabel(this._language.get("FormLabel_ConfirmPassword")),e.setRequired(!0),f=new CSBJs_Form_Validation_CompareEqual(f),
f.setErrorMessage(this._language.get("ValidationError_ConfirmPasswordNotMatch")),e.addValidation(f),d.addElement(e);if(!0===this._options.asteriskRequiredLabeling)for(var g in a.groups)if(a.groups.hasOwnProperty(g)){var d=a.groups[g].elements,k;for(k in d)d.hasOwnProperty(k)&&("checkbox"!=d[k].type||this._options.asteriskRequiredLabelingOnSingleCheckbox)&&d[k].required&&d[k].setLabel(d[k].label+' <span class="required-asterisk">*</span>')}if(g=a.getElementByName("submit_button"))g.value=this._options.submitButtonLabel;
g=a.getGroupByName("action");if("undefined"!=typeof g&&null!==g&&(this._options.submitFieldTypeTable&&(k=new CSBJs_Form_Element_Hidden("field_type_table"),k.setValue(JSON.stringify(a.elementTypeTable())),g.addElement(k)),this._options.submitFormId))k=new CSBJs_Form_Element_Hidden("form_id"),k.setValue(a.formId),g.addElement(k);a.autocomplete=this._options.autocomplete;this._cached.csbForm=a}if("object"!=typeof this._cached.csbForm)throw Error("Unable to initialize CSB Form, form is not instantiated");
a=this._cached.csbForm;a.method=this._options.method;a.action=this._options.action;a.ajaxSubmit=this._options.ajax;"function"==typeof this._options.ajaxStartCallback&&(a.ajaxSubmitStart=this._options.ajaxStartCallback);"function"==typeof this._options.ajaxCompleteCallback&&(a.ajaxSubmitComplete=this._options.ajaxCompleteCallback);"function"==typeof this._options.ajaxErrorCallback&&(a.ajaxSubmitError=this._options.ajaxErrorCallback);"function"==typeof this._options.successCallback&&(a.onSubmitValid=
this._options.successCallback);"function"==typeof this._options.failureCallback&&(a.onSubmitInvalid=this._options.failureCallback);return a};UBM.Widget.Form.prototype.renderFormToContainer=function(a){var b=this.initForm();if("undefined"!=typeof a&&a.appendChild)a.appendChild(b.render().domNode()),b.postRender();else throw Error("Unable to render form to container, invalid Element node");return!0};
UBM.Widget.Form.prototype.openFormWindow=function(){var a=this.initForm(),b=null;if("undefined"==typeof this._cached.form_window||null===this._cached.form_window)b=new CSBJs_App_Window_Modal("UBM_Widget_Form_Window"),this._cached.form_window=b,b.width=this._options.windowWidth,b.innerHeight=this._options.windowHeight,b.maxHeight=this._options.windowMaxHeight,b.height=this._options.windowMaxHeight,b.closable=this._options.windowClosable,b.onCloseAction=this._options.onClose,b.header="top",b.setTitle(this._options.windowTitle);
var d=null;"undefined"==typeof this._cached.form_header_container||null===this._cached.form_header_container?(d=new CSBJs_App_Window("UBM_Widget_Form_Header_Container"),this._cached.form_header_container=d):d=this._cached.form_header_container;d.visible=!1;if("undefined"!=typeof this._cached.form_header_content&&null!==this._cached.form_header_content&&("string"==typeof this._cached.form_header_content||"object"==typeof this._cached.form_header_content))d.removeAllChildren(),d.addChild(this._cached.form_header_content),
d.visible=!0;var e=null;"undefined"==typeof this._cached.form_footer_container||null===this._cached.form_footer_container?(e=new CSBJs_App_Window("UBM_Widget_Form_Footer_Container"),this._cached.form_footer_container=e):e=this._cached.form_footer_container;e.visible=!1;"undefined"!=typeof this._cached.form_footer_html&&null!==this._cached.form_footer_html&&0<this._cached.form_footer_html.length&&(e.removeAllChildren(),e.addChild(this._cached.form_footer_html),e.visible=!0);var f=null;"undefined"==
typeof this._cached.form_message_container||null===this._cached.form_message_container?(f=new CSBJs_App_Window("UBM_Widget_Form_Message_Container"),this._cached.form_message_container=f):(f=this._cached.form_message_container,f.removeAllChildren());f.visible=!1;b=this._cached.form_window;null===document.getElementById("UBM_Widget_Form_Window")&&document.body.appendChild(b.render().domNode());b.removeAllChildren();b.addChild(d);b.addChild(f);b.addChild(a);b.addChild(e);b.show()};
UBM.Widget.Form.prototype.setFormMessage=function(a,b){if("undefined"==typeof this._cached.form_message_container||null===this._cached.form_message_container)return!1;var d=this._cached.form_message_container;d.removeAllChildren();"undefined"==typeof a||null===a||0===a.length?d.visible=!1:(d.visible=!0,d.addChild(a));d.className="undefined"!=typeof b&&null!==b&&!0===b?"form-error-message":null;d.reRender();return!0};
UBM.Widget.Form.prototype.setFormMessageWithAlert=function(a,b,d){this.setFormMessage(a,b);UBM.Widget.alert(a,d)};UBM.Widget.Form.prototype.setFormHeader=function(a){this._cached.form_header_content=a};UBM.Widget.Form.prototype.setFormFooter=function(a){this._cached.form_footer_html=a};
UBM.Widget.Form.prototype.insertFormElement=function(a,b,d){if("object"!=typeof this._cached.csbForm||null===this._cached.csbForm)return!1;if(b=this._cached.csbForm.getElementByName(b)){var e=b.displayOrder,f=b.parentGroup,h=f.getSortedElements();currentOrder=-999;for(var g=0;g<h.length;g++){var k=h[g];k===b?!0===d?(e=b.displayOrder,b.setDisplayOrder(e+1),currentOrder=e+1):e=currentOrder=b.displayOrder+1:-999!=currentOrder&&(currentOrder+=1,k.displayOrder=currentOrder)}a.setDisplayOrder(e);f.addElement(a);
return!0}return!1};UBM.Widget.Form.prototype.openFormWindowWithXml=function(a,b){if("string"!==typeof a)throw Error("Must provide a form xml");if(this.setFormXML(a))this.openFormWindow(b);else throw Error("Unable to open new form window");};UBM.Widget.Form.prototype.closeFormWindow=function(){"undefined"!=typeof this._cached.form_window&&null!==this._cached.form_window&&this._cached.form_window.hide()};
UBM.Widget.Form.prototype.disableField=function(a,b){if("object"!=typeof this._cached.csbForm||null===this._cached.csbForm)return!1;var d=this._cached.csbForm.getElementByName(a);if("undefined"==typeof d||null===d)return!1;d.setDisabled(b);d.updateElement();return!0};
UBM.Widget.Form.prototype.hideField=function(a,b){if("object"!=typeof this._cached.csbForm||null===this._cached.csbForm)return!1;var d=this._cached.csbForm.getElementByName(a);if("undefined"==typeof d||null===d)return!1;d.setHidden(b);d.updateElement();return!0};
UBM.Widget.Form.prototype.removeField=function(a){if("object"!=typeof this._cached.csbForm||null===this._cached.csbForm)return!1;var b=this._cached.csbForm.getElementByName(a);if("undefined"==typeof b||null===b)return!1;b.parentGroup.removeElementByName(a);return!0};UBM.Widget.Form.prototype.reRenderForm=function(){if("object"!=typeof this._cached.csbForm||null===this._cached.csbForm)return!1;this._cached.csbForm.reRender();return!0};UBM.Widget.Resource=function(){};
UBM.Widget.Resource.Language=function(){if(arguments.callee._instance)return arguments.callee._instance;arguments.callee._instance=this;this._lang="en";this._resource=UBM.Widget.Resource.Language.Default;return this};UBM.Widget.Resource.Language.getInstance=function(){return new this};UBM.Widget.Resource.Language.setLanguage=function(a){this._lang=a};
UBM.Widget.Resource.Language.prototype.load=function(a,b){if("object"==typeof a){if("boolean"==typeof b&&!0===b)this._resource=a;else for(var d in this._resource)if(this._resource.hasOwnProperty(d)){if("undefined"==typeof a[d])throw"Invalid language file";this._resource[d]=UBM.Util.mergeJson(this._resource[d],a[d])}return!0}return!1};UBM.Widget.Resource.Language.prototype.get=function(a){return this._resource[this._lang]&&this._resource[this._lang][a]?this._resource[this._lang][a]:""};
UBM.Widget.Resource.Language.Default={};
UBM.Widget.Resource.Language.Default.en={HelperText_LoginDescription:"The same username and password you use for Techweb, InformationWeek, and Network Computing will also work here. Once you have logged in, you may be asked to verify your information and will then be taken directly to the content you requested.",HelperText_PasswordResetDescription:"Please enter your e-mail address and we'll promptly send you instructions for resetting your password.",HelperText_ChangePasswordDescription:"Please enter your new password",HelperText_OptOut_Message:"To opt-out of any future online event offers, please click on the submit button below",
HelperText_OptOut_ConfirmMessage:"Thank You. You will be removed from any future online event offers within 10 days.",HelperText_OptOut_Error_InvalidURL:"Invalid optout URL. Please contact the site administrator for assistance.",HelperText_OptOut_Error_UnableToCompleteRequest:"Unable to complete request",HelperText_OptOut_ProcessingStatusMessage:"Processing, please wait...",HelperText_OptOut_ConfirmButtonLabel:"Submit",FormLabel_ConfirmEmail:"Confirm e-mail",FormLabel_ConfirmPassword:"Re-type Password",
ValidationError_EmailExistsWithLogin:'This email address is already in use. Please <a href="#" onclick="${login_callback}">log in</a>.',ValidationError_EmailExists:"This email address is already in use. Please log in.",ValidationError_ConfirmEmailNotMatch:"Your emails do not match",ValidationError_NicknameExists:"Nickname is unavailable. Try a different one.",ValidationError_ConfirmPasswordNotMatch:"Your passwords do not match",HelperWindowError_SocialLogin_InvalidServerResponse:"Invalid social login response from server",
HelperWindowError_SocialLogin_ServerTimedOut:"Unable to contact auth server: Server timed out",HelperWindowError_SocialLogin_RetrieveLoginInfo:"Unable to retrieve social login info"};UBM.Widget.Helper=function(){};UBM.Widget.Helper.Config=function(a){this._env=a;this._lang="en"};UBM.Widget.Helper.Config.NG_LOGIN_URL={ngi:"https://ngi-dev.techweb.com/authds/login/login.jsp?type=iframe",ngu:"https://ngu-dev.techweb.com/authds/login/login.jsp?type=iframe",ng:"https://ng.techweb.com/authds/login/login.jsp?type=iframe"};
UBM.Widget.Helper.Config.NG_PASSWORD_RESET_URL={ngi:"https://ngi-dev.techweb.com/authds/login/forgot.jsp?type=iframe",ngu:"https://ngu-dev.techweb.com/authds/login/forgot.jsp?type=iframe",ng:"https://ng.techweb.com/authds/login/forgot.jsp?type=iframe"};UBM.Widget.Helper.Config.NG_CHANGE_PASSWORD_URL={ngi:"https://ngi-dev.techweb.com/authds/login/change.jsp?type=iframe",ngu:"https://ngu-dev.techweb.com/authds/login/change.jsp?type=iframe",ng:"https://ng.techweb.com/authds/login/change.jsp?type=iframe"};
UBM.Widget.Helper.Config.NG_OPTOUT_URL={ngi:"https://ngi-dev.techweb.com/uds/elq/optout",ngu:"https://ngu-dev.techweb.com/uds/elq/optout",ng:"https://ng.techweb.com/uds/elq/optout"};
UBM.Widget.Helper.Config.NG_SERVICE_URL={ngi:{emailCheck:"https://ngi-dev.techweb.com/uds/rest/user/emailInUse/{value}",nicknameCheck:"https://ngi-dev.techweb.com/uds/rest/user/nicknameInUse/{value}"},ngu:{emailCheck:"https://ngu-dev.techweb.com/uds/rest/user/emailInUse/{value}",nicknameCheck:"https://ngu-dev.techweb.com/uds/rest/user/nicknameInUse/{value}"},ng:{emailCheck:"https://ng.techweb.com/uds/rest/user/emailInUse/{value}",nicknameCheck:"https://ng.techweb.com/uds/rest/user/nicknameInUse/{value}"}};
UBM.Widget.Helper.Config.prototype.getLoginUrl=function(){return UBM.Widget.Helper.Config.NG_LOGIN_URL[this._env]};UBM.Widget.Helper.Config.prototype.getChangePasswordUrl=function(){return UBM.Widget.Helper.Config.NG_CHANGE_PASSWORD_URL[this._env]};UBM.Widget.Helper.Config.prototype.getPasswordResetUrl=function(){return UBM.Widget.Helper.Config.NG_PASSWORD_RESET_URL[this._env]};UBM.Widget.Helper.Config.prototype.getNgServiceUrl=function(a){return UBM.Widget.Helper.Config.NG_SERVICE_URL[this._env][a]};
UBM.Widget.Helper.Config.prototype.getOptoutUrl=function(){return UBM.Widget.Helper.Config.NG_OPTOUT_URL[this._env]};UBM.Widget.Helper.Config.UrlResources={DefaultBrandLogo:"https://twimgs.com/custom/csb/images/nextgen/ubm_logo.gif"};UBM.Widget.Helper.Config.prototype.getUrlResource=function(a){return UBM.Widget.Helper.Config.UrlResources[a]};
UBM.Widget.Helper.Login=function(a){this._options={environment:"ngi",windowId:"UBM_Widget_Login_Window",proxyPath:"/cdsocket_proxy.html",title:"Login",width:600,height:null,maxHeight:450,loginIframeWidth:330,loginIframeHeight:260,loginOverrideCSS:null,passwordResetIframeWidth:550,passwordResetIframeHeight:260,changePasswordIframeWidth:550,changePasswordIframeHeight:260,callback:null,passwordResetRequestCallback:null,passwordResetCallback:null,passwordChangeCallback:null,template:'<div id="modalHeader"><div class="modal-logo">{logo}</div><div class="modal-description">{description}</div></div>{form}{extAuth}<div id="modal-footer">{footer}</div>',
changePasswordTemplate:'<div id="modalHeader"><div class="modal-logo">{logo}</div><div class="modal-description">{description}</div></div>{form}<div id="modal-footer"></div>',passwordResetTemplate:'<div id="modalHeader"><div class="modal-logo">{logo}</div><div class="modal-description">{description}</div></div>{form}<div id="modal-footer"></div>',checkForPasswordReset:!0,brandLogo:"",loginDescription:"",passwordResetDescription:"",changePasswordDescription:"",footerContent:"",extAuthUrl:null,extAuthSuccessCallback:null};
this._cached={socket:null,loginWindow:null,passwordResetWindow:null,loginContainer:null,passwordResetContainer:null,changePasswordWindow:null,changePasswordContainer:null,passwordResetToken:null,passwordResetId:null,extAuthToken:null,extAuthReference:null,extAuthWindow:null};this._language=UBM.Widget.Resource.Language.getInstance();"object"==typeof a&&(this._options=UBM.Util.mergeJson(this._options,a));this._config=new UBM.Widget.Helper.Config(this._options.environment);if("object"==typeof a&&("undefined"==
typeof a.loginDescription&&(this._options.loginDescription=this._language.get("HelperText_LoginDescription")),"undefined"==typeof a.passwordResetDescription&&(this._options.passwordResetDescription=this._language.get("HelperText_PasswordResetDescription")),"undefined"==typeof a.changePasswordDescription&&(this._options.changePasswordDescription=this._language.get("HelperText_ChangePasswordDescription")),"undefined"==typeof a.brandLogo))this._options.brandLogo=this._config.getUrlResource("DefaultBrandLogo");
return this};UBM.Widget.Helper.Login._active=null;
UBM.Widget.Helper.Login.prototype.init=function(){var a=this;this._cached.socket=new UBM.CDSocket.Client(this._options.proxyPath);var b=this._cached.socket;this._cached.loginWindow=new CSBJs_App_Window_Modal(this._options.windowId);var d=this._cached.loginWindow,e=new CSBJs_App_Window("loginContainer");this._cached.loginContainer=e;d.setTitle(this._options.title);d.header="top";d.closable=!0;d.height=null;d.innerHeight=this._options.height;d.maxHeight=this._options.maxHeight;d.height=this._options.maxHeight;
d.width=this._options.width;d.addChild(e);null===d.node()&&document.body.appendChild(d.render().domNode());d.onLoad(function(){e.removeAllChildren();e.reRender();var d=a._options.template.replace(/({form}|{logo}|{description}|{footer}|{extAuth})/gi,function(b){switch(b){case "{form}":return'<div id="loginForm"></div>';case "{logo}":return'<img class="brand-logo-image" src="'+a._options.brandLogo+'" />';case "{description}":return a._options.loginDescription;case "{footer}":return a._options.footerContent;
case "{extAuth}":return a._options.extAuthUrl?'<div id="loginExtAuth"><span class="container-header">Or Log in With...</span><div class="ext-auth-button-container"><span onclick="UBM.Widget.Helper.Login._active.extAuth(\'facebook\');" class="ext-auth-button ext-auth-facebook"></span><span onclick="UBM.Widget.Helper.Login._active.extAuth(\'twitter\');" class="ext-auth-button ext-auth-twitter"></span><span onclick="UBM.Widget.Helper.Login._active.extAuth(\'google\');" class="ext-auth-button ext-auth-google"></span><span onclick="UBM.Widget.Helper.Login._active.extAuth(\'linkedin\');" class="ext-auth-button ext-auth-linkedin"></span></div></div>':
"";default:return b}});e.addChild(d);e.reRender();d=document.getElementById("loginForm");d.style.height=a._options.loginIframeHeight+"px";d.style.width=a._options.loginIframeWidth+"px";if(null!==d){var f=null,f=!0===a.changePassword?a._config.getChangePasswordUrl():a._config.getLoginUrl();"undefined"!==typeof a._options.loginOverrideCSS&&null!==a._options.loginOverrideCSS&&(f=f+"&css="+a._options.loginOverrideCSS);b.iframeToContainer(f,d)}});b.addListener("loginCallback",function(b,d){"function"==
typeof a._options.callback&&a._options.callback(b,d)});this._cached.changePasswordWindow=new CSBJs_App_Window_Modal(this._options.windowId+"-change-password");var d=this._cached.changePasswordWindow,f=new CSBJs_App_Window("changePasswordContainer");this._cached.changePasswordContainer=f;d.setTitle("Change Password");d.header="top";d.closable=!0;d.height=null;d.innerHeight=this._options.height;d.maxHeight=this._options.maxHeight;d.height=this._options.maxHeight;d.width=this._options.width;d.addChild(f);
null===d.node()&&document.body.appendChild(d.render().domNode());d.onLoad(function(){f.removeAllChildren();f.reRender();var d=a._options.changePasswordTemplate.replace(/({form}|{logo}|{description}|{footer})/gi,function(b){switch(b){case "{form}":return'<div id="changePasswordForm"></div>';case "{logo}":return'<img class="brand-logo-image" src="'+a._options.brandLogo+'" />';case "{description}":return a._options.changePasswordDescription;case "{footer}":return a._options.footerContent;default:return b}});
f.addChild(d);f.reRender();d=document.getElementById("changePasswordForm");d.style.height=a._options.changePasswordIframeHeight+"px";d.style.width=a._options.changePasswordIframeWidth+"px";if(null!==d){var e=a._config.getChangePasswordUrl();b.iframeToContainer(e,d)}});b.addListener("changeCallback",function(b,d){"function"==typeof a._options.passwordChangeCallback&&a._options.passwordChangeCallback(b,d)});if(!0===this._options.checkForPasswordReset){this._cached.passwordResetWindow=new CSBJs_App_Window_Modal(this._options.windowId+
"-password-reset");var d=this._cached.passwordResetWindow,h=new CSBJs_App_Window("passwordResetContainer");this._cached.passwordResetContainer=h;d.setTitle("Password Reset");d.header="top";d.closable=!0;d.height=null;d.innerHeight=this._options.height;d.maxHeight=this._options.maxHeight;d.height=this._options.maxHeight;d.width=this._options.width;d.addChild(h);null===d.node()&&document.body.appendChild(d.render().domNode());d.onLoad(function(){h.removeAllChildren();h.reRender();var d=a._options.passwordResetTemplate.replace(/({form}|{logo}|{description}|{footer})/gi,
function(b){switch(b){case "{form}":return'<div id="passwordResetForm"></div>';case "{logo}":return'<img class="brand-logo-image" src="'+a._options.brandLogo+'" />';case "{description}":return a._options.passwordResetDescription;case "{footer}":return a._options.footerContent;default:return b}});h.addChild(d);h.reRender();d=document.getElementById("passwordResetForm");d.style.height=a._options.passwordResetIframeHeight+"px";d.style.width=a._options.passwordResetIframeWidth+"px";if(null!==d){var e=
a._config.getPasswordResetUrl(),e=e+"&hash="+a._cached.passwordResetToken+"&id="+a._cached.passwordResetId;b.iframeToContainer(e,d);a._cached.passwordResetToken=null}});b.addListener("resetPwRequestCallback",function(b,d){"function"==typeof a._options.passwordResetRequestCallback&&a._options.passwordResetRequestCallback(b,d)});b.addListener("changedPwCallback",function(b,d){"function"==typeof a._options.passwordResetCallback&&a._options.passwordResetCallback(b,d)});this.checkForPasswordReset()}};
UBM.Widget.Helper.Login.prototype.checkForPasswordReset=function(){var a=UBM.Util.getUrlParams();"undefined"!=typeof a.pwReset&&"true"===a.pwReset&&"undefined"!=typeof a.hash&&null!==a.hash&&"undefined"!=typeof a.id&&null!==a.id&&null!==this._cached.passwordResetWindow&&(this._cached.passwordResetToken=a.hash,this._cached.passwordResetId=a.id,this._cached.passwordResetWindow.show())};
UBM.Widget.Helper.Login.prototype.open=function(){if(null===this._cached.loginWindow)return!1;UBM.Widget.Helper.Login._active=this;this._cached.loginWindow.show();return!0};UBM.Widget.Helper.Login.prototype.openChangePassword=function(){if(null===this._cached.changePasswordWindow)return!1;this._cached.changePasswordWindow.show();return!0};
UBM.Widget.Helper.Login.prototype.close=function(){return null!==this._cached.loginWindow&&this._cached.loginWindow.visible?(this._cached.loginWindow.hide(),UBM.Widget.Helper.Login._active=null,!0):null!==this._cached.changePasswordWindow&&this._cached.changePasswordWindow.visible?(this._cached.changePasswordWindow.hide(),UBM.Widget.Helper.Login._active=null,!0):null!==this._cached.passwordResetWindow&&this._cached.passwordResetWindow.visible?(this._cached.passwordResetWindow.hide(),UBM.Widget.Helper.Login._active=
null,!0):!1};UBM.Widget.Helper.Login.prototype.setTemplate=function(a){this._options.template=a};
UBM.Widget.Helper.Login.prototype.extAuth=function(a){if(!("string"!=typeof a||null===this._options.extAuthUrl)){var b=this;null===b._cached.extAuthWindow||b._cached.extAuthWindow.closed?b._cached.extAuthWindow=window.open("about:blank","extAuthWindow","resizable=0,menubar=0,location=0,status=0,scrollbars=0,width=640,height=640"):b._cached.extAuthWindow.focus();b._cached.extAuthWindow.document.write("Loading...");UBM.Widget.loadingStart("Please wait...");CSBJs_Ajax.get(this._options.extAuthUrl,{provider:a},
function(d){UBM.Widget.loadingStop();if(d&&d.token&&d.reference){b._cached.extAuthToken=d.token;b._cached.extAuthReference=d.reference;b._cached.extAuthWindow.location=b._cached.extAuthReference;var e=null,e=setInterval(function(){try{b._cached.extAuthWindow.closed&&(clearTimeout(e),"function"==typeof b._options.extAuthSuccessCallback&&b._options.extAuthSuccessCallback(b._cached.extAuthToken,a))}catch(d){}},200)}else UBM.Widget.alert(b._language.get("HelperWindowError_SocialLogin_InvalidServerResponse"))},
function(){UBM.Widget.loadingStop();UBM.Widget.alert(b._language.get("HelperWindowError_SocialLogin_ServerTimedOut"))},function(a){UBM.Widget.loadingStop();"string"==typeof a.message?UBM.Widget.alert(b._language.get("HelperWindowError_SocialLogin_RetrieveLoginInfo")+": "+a.message):UBM.Widget.alert(b._language.get("HelperWindowError_SocialLogin_RetrieveLoginInfo")+": Unknown Error")})}};
UBM.Widget.Helper.Registration=function(a){this._options={environment:"ngi",action:null,windowId:"UBM_Widget_Registration_Window",title:"Registration",submitButtonLabel:"Register",width:600,height:null,maxHeight:550,height:null,successCallback:null,errorCallback:null,serviceApiKey:null,processFormMessage:"Processing form, please wait...",successFormMessage:"Form submission successful!",rememberMeCheckbox:!0,rememberMeCheckboxAfterField:"123",emailConfirmationField:!1,passwordConfirmationField:!1,
headerContent:"",privacyLogo:null,privacyText:null,autocomplete:!0,accountAlreadyExistsOnClick:null,windowClosable:!0,onClose:null,loginLinkCallback:null,recaptchaToken:null};"object"==typeof a&&(this._options=UBM.Util.mergeJson(this._options,a));this._cached={formWidget:null,registrationWindow:null};this._config=new UBM.Widget.Helper.Config(this._options.environment);this.init();return this};
UBM.Widget.Helper.Registration.prototype.init=function(){var a=this,b=new UBM.Widget.Form({ajax:!0,action:a._options.action,ajaxStartCallback:function(){b.setFormMessage(a._options.processFormMessage);UBM.Widget.loadingStart(a._options.processFormMessage)},ajaxCompleteCallback:function(d){UBM.Widget.loadingStop();d&&"undefined"!=typeof d.success?!0===d.success?(b.setFormMessage(a._options.successFormMessage),"function"==typeof a._options.successCallback&&a._options.successCallback(d)):!1===d.success&&
"undefined"!=typeof d.error&&null!==d.error?(b.setFormMessageWithAlert(d.error,!0),"function"==typeof a._options.errorCallback&&a._options.errorCallback(d),null!==a._options.recaptchaToken&&"object"==typeof Recaptcha&&Recaptcha.reload()):(b.setFormMessageWithAlert("Unknown error",!0),"function"==typeof a._options.errorCallback&&a._options.errorCallback(d)):(b.setFormMessageWithAlert("Unknown error",!0),"function"==typeof a._options.errorCallback&&a._options.errorCallback(d))},ajaxErrorCallback:function(a){UBM.Widget.loadingStop();
"undefined"!=typeof a&&"string"==typeof a.message?UBM.Widget.alert("Error processing form: "+a.message):UBM.Widget.alert("Error processing form: Unknown error.")},emailCheckService:this._config.getNgServiceUrl("emailCheck"),nicknameCheckService:this._config.getNgServiceUrl("nicknameCheck"),serviceApiKey:this._options.serviceApiKey,emailConfirmationField:this._options.emailConfirmationField,passwordConfirmationField:this._options.passwordConfirmationField,windowWidth:this._options.width,windowHeight:this._options.height,
windowMaxHeight:this._options.maxHeight,windowTitle:this._options.title,submitButtonLabel:this._options.submitButtonLabel,autocomplete:this._options.autocomplete,windowClosable:this._options.windowClosable,onClose:this._options.onClose,submitFieldTypeTable:!0,submitFormId:!0,loginLinkCallback:this._options.loginLinkCallback});if(null!==this._options.recaptchaToken){var d=document.getElementById("recaptcha_ajax_script");d||(d=document.createElement("script"),d.id="recaptcha_ajax_script",d.src="//www.google.com/recaptcha/api/js/recaptcha_ajax.js",
d.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(d))}null!==this._options.privacyText&&null!==this._options.privacyLogo&&b.setFormFooter('<div class="privacy-content"><div class="privacy-logo"><img src="'+this._options.privacyLogo+'" /></div><div class="privacy-text">'+this._options.privacyText+"</div></div>");b.setFormHeader(this._options.headerContent);this._cached.formWidget=b};
UBM.Widget.Helper.Registration.prototype.openWithAjaxForm=function(a,b){var d=this;"undefined"==typeof b&&(b=null);if(null===this._cached.formWidget)return!1;var e=this._cached.formWidget;UBM.Widget.loadingStart("Loading, please wait...");CSBJs_Ajax.get(a,b,function(a){try{e.setFormXML(a)}catch(b){UBM.Widget.loadingStop();UBM.Widget.alert("Unable to retrieve form: "+b);return}d._options.rememberMeCheckbox&&(a=new CSBJs_Form_Element_Checkbox("remember_me"),a.setValue(!0),a.setLabel(""),a.setDescription("Remember me"),
e.insertFormElement(a,d._options.rememberMeCheckboxAfterField));null!==d._options.accountAlreadyExistsOnClick&&(a=new CSBJs_Form_Element_Html("ExistingAccountLink"),a.addClass("existingAccountLink"),a.setHtml('Already Registered? <a href="#" onclick="'+d._options.accountAlreadyExistsOnClick+'">Log-in</a>'),e.insertFormElement(a,"submit_button"));if(null!==d._options.recaptchaToken){var a=new CSBJs_Form_Element_Hidden("recaptcha_challenge"),g=new CSBJs_Form_Element_Hidden("recaptcha_response");a.getValue=
function(){var a=document.getElementById("recaptcha_challenge_field");return a?a.value:""};g.getValue=function(){var a=document.getElementById("recaptcha_response_field");return a?a.value:""};var k=new CSBJs_Form_Element_Html("reCAPTCHA"),j=k.postRender;k.postRender=function(){j.call(this);Recaptcha.create(d._options.recaptchaToken,"recaptcha_widget",{theme:"custom",custom_theme_widget:"recaptcha_widget"})};recaptchaHtml='<div id="recaptcha_widget" style="display:none"><div id="recaptcha_image"></div><div class="recaptcha_only_if_incorrect_sol" style="color:red">Incorrect please try again</div><span class="recaptcha_only_if_image">Enter the words above:</span><span class="recaptcha_only_if_audio">Enter the numbers you hear:</span><input type="text" id="recaptcha_response_field" name="recaptcha_response_field" /><div><a href="javascript:Recaptcha.reload()">Get another CAPTCHA</a></div><div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type(\'audio\')">Get an audio CAPTCHA</a></div><div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type(\'image\')">Get an image CAPTCHA</a></div><div><a href="javascript:Recaptcha.showhelp()">Help</a></div></div>';
k.setHtml(recaptchaHtml);k.validate=function(){};e.insertFormElement(k,"submit_button",!0);e.insertFormElement(a,"submit_button");e.insertFormElement(g,"submit_button")}UBM.Widget.loadingStop();e.openFormWindow()},function(){UBM.Widget.loadingStop();UBM.Widget.alert("Unable to retrieve form: Server timed out")},function(a){UBM.Widget.loadingStop();"string"==typeof a.message?UBM.Widget.alert("Unable to retrieve form: "+a.message):UBM.Widget.alert("Unable to retrieve form: Unknown error")});return!0};
UBM.Widget.Helper.Registration.prototype.close=function(){this._cached.formWidget&&this._cached.formWidget.closeFormWindow()};
UBM.Widget.Helper.UpdateProfile=function(a){this._options={environment:"ngi",action:null,avatarPostUrl:"/",windowId:"UBM_Widget_UpdateProfile_Window",title:"Update Profile",submitButtonLabel:"Update",width:600,height:null,maxHeight:620,successCallback:null,errorCallback:null,serviceApiKey:null,avatarSuccessCallback:null,avatarErrorCallback:null,processFormMessage:"Processing form, please wait...",successFormMessage:"Form submission successful!",headerContent:"",privacyLogo:null,privacyText:null,autocomplete:!1,
changePasswordAction:null,windowClosable:!0,onClose:null};"object"==typeof a&&(this._options=UBM.Util.mergeJson(this._options,a));this._cached={formWidget:null,registrationWindow:null,updateAvatarContainer:null,avatarEditorContainer:null,avatarImageHtml:null,avatarImageUrl:"https://twimgs.com/csb.techweb.com/images/avatar/avatar_male_dark_on_gray_96x96.png"};this._config=new UBM.Widget.Helper.Config(this._options.environment);this.initHeaderContent();this.init();return this};UBM.Widget.Helper.UpdateProfile.inherits(UBM.Widget.Helper.Registration);
UBM.Widget.Helper.UpdateProfile.current=null;
UBM.Widget.Helper.UpdateProfile.prototype.initHeaderContent=function(){var a=this,b=null;0<this._options.headerContent.length&&(b=this._options.headerContent);var d=new CSBJs_App_Window("updateProfileHeaderContainer");this._options.headerContent=d;d.addChild(b);b=new CSBJs_App_Window("updateAvatarContainer");d.addChild(b);this._cached.updateAvatarContainer=b;b.setTitle("Update Avatar");b.header="top";var e=new CSBJs_App_Html("avatarImage");this._cached.avatarImageHtml=e;b.addChild(e);var f=new CSBJs_App_Window("avatarEditorContainer");
this._cached.avatarEditorContainer=f;f.visible=!1;f.closable=!0;f.header="top";b.addChild(f);var h=new CSBJs_App_Field_File("uploadAvatarFileField");h.setLabel("Image Upload");f.addChild(h);h.addEventHandler("change",function(b){(b=b.currentTarget?b.currentTarget:b.srcElement)&&!b.value.match(/\.jpeg$|\.jpg$|\.gif$|\.png$|\.bmp$/)?UBM.Widget.alert("Error: You have selected an invalid image file. Select a different file. <br /> (Valid format: <i>.jpeg,.jpg,.gif,.png,.bmp)</i>",{width:400}):CSBJs_Ajax.postFile(a._options.avatarPostUrl,
h.node(),function(){UBM.Widget.loadingStart("Updating avatar photo, please wait...");f.reRender()},function(b){UBM.Widget.loadingStop();if(b.success===true){typeof b.url=="string"&&a.updateAvatarImage(b.url);f.hide();typeof a._options.avatarSuccessCallback=="function"&&a._options.avatarSuccessCallback(b)}else{typeof b.error!="undefined"&&b.error!==null?UBM.Widget.alert("Error updating avatar: "+b.error):UBM.Widget.alert("Error updating avatar: Unknown error");typeof a._options.avatarErrorCallback==
"function"&&a._options.avatarErrorCallback(b)}},function(b){UBM.Widget.loadingStop();UBM.Widget.alert("Error updating avatar: Unknown error");typeof a._options.avatarErrorCallback=="function"&&a._options.avatarErrorCallback(b)},function(b){UBM.Widget.loadingStop();UBM.Widget.alert("Error updating avatar: Unknown error");typeof a._options.avatarErrorCallback=="function"&&a._options.avatarErrorCallback(b)})});b=new CSBJs_App_Window("updateProfileActionWindow");b.addChild('<a href="#" onclick="UBM.Widget.Helper.UpdateProfile.current.changePassword();">Change Password</a>');
d.addChild(b);this.updateAvatarImage()};UBM.Widget.Helper.UpdateProfile.prototype.changeAvatar=function(){if(this._cached.avatarEditorContainer){var a=this._cached.avatarEditorContainer;a.visible?a.hide():a.show()}};UBM.Widget.Helper.UpdateProfile.prototype.changePassword=function(){"function"==typeof this._options.changePasswordAction&&this._options.changePasswordAction();return!1};
UBM.Widget.Helper.UpdateProfile.prototype.updateAvatarImage=function(a){"string"==typeof a&&(this._cached.avatarImageUrl=a);this._cached.avatarImageHtml&&this._cached.avatarImageHtml.setContent('<a href="#" onclick="UBM.Widget.Helper.UpdateProfile.current.changeAvatar(); return false;" alt="Update Avatar"><img class="avatar" src="'+this._cached.avatarImageUrl+'" /></a>');this._cached.updateAvatarContainer&&this._cached.updateAvatarContainer.visible&&this._cached.updateAvatarContainer.reRender()};
UBM.Widget.Helper.UpdateProfile.prototype.openWithAjaxForm=function(a,b){var d=this;"undefined"==typeof b&&(b=null);if(null===this._cached.formWidget)return!1;var e=this._cached.formWidget;UBM.Widget.loadingStart("Loading, please wait...");CSBJs_Ajax.get(a,b,function(a){try{e.setFormXML(a)}catch(b){UBM.Widget.loadingStop();UBM.Widget.alert("Unable to retrieve form: "+b);return}UBM.Widget.loadingStop();UBM.Widget.Helper.UpdateProfile.current=d;e.openFormWindow()},function(){UBM.Widget.loadingStop();
UBM.Widget.alert("Unable to retrieve form: Server timed out")},function(a){UBM.Widget.loadingStop();"string"==typeof a.message?UBM.Widget.alert("Unable to retrieve form: "+a.message):UBM.Widget.alert("Unable to retrieve form: Unknown error")});return!0};
UBM.Widget.Helper.Modal=function(a){if(arguments.callee._instance)return arguments.callee._instance;arguments.callee._instance=this;this._options={windowId:"UBM_Widget_Modal_Window",title:"",width:600,height:450,showTitleBar:!0,closable:!0,onClose:null};"object"==typeof a&&(this._options=UBM.Util.mergeJson(this._options,arguments[0]));this._cached={modalWindow:null};this._cached.modalWindow=new CSBJs_App_Window_Modal(this._options.windowId);this.init();return this};
UBM.Widget.Helper.Modal.getInstance=function(){return new this};
UBM.Widget.Helper.Modal.prototype.init=function(){var a=this._options;this._cached.modalWindow.closable="undefined"!==typeof a.closable?a.closable:!0;if("number"==typeof a.width||"string"==typeof a.width)this._cached.modalWindow.width=a.width;if("number"==typeof a.height||"string"==typeof a.height)this._cached.modalWindow.innerHeight=a.height;"string"==typeof a.title&&(this._cached.modalWindow.title=a.title);"string"==typeof a.windowId&&(this._cached.modalWindow.id=a.windowId);"undefined"!=typeof a.showTitleBar&&
(this._cached.modalWindow.header=!0===a.showTitleBar?"top":null);"function"==typeof a.onClose&&(this._cached.modalWindow.onCloseAction=a.onClose);return!0};UBM.Widget.Helper.Modal.open=function(a,b){var d=new this;"object"==typeof b&&(d._options=UBM.Util.mergeJson(d._options,b));d.init();null===document.getElementById(d._options.windowId)&&document.body.appendChild(d._cached.modalWindow.render().domNode());d._cached.modalWindow.removeAllChildren();d._cached.modalWindow.addChild(a);d._cached.modalWindow.show()};
UBM.Widget.Helper.Modal.close=function(){(new this)._cached.modalWindow.hide()};UBM.Widget.Helper.Modal.closeAll=function(){"object"==typeof CSBJs_App_Window_Modal.currentWindow&&CSBJs_App_Window_Modal.currentWindow.hide()};
UBM.Widget.Helper.Optout=function(a){if(arguments.callee._instance)return arguments.callee._instance;arguments.callee._instance=this;this._options={environment:"ngi",confirmButtonLabel:"Submit"};"object"==typeof a&&(this._options=UBM.Util.mergeJson(this._options,arguments[0]));this._config=new UBM.Widget.Helper.Config(this._options.environment);this._language=UBM.Widget.Resource.Language.getInstance();this.init();return this};UBM.Widget.Helper.Optout.getInstance=function(){return new this};
UBM.Widget.Helper.Optout.prototype.init=function(){return!0};
UBM.Widget.Helper.Optout.prototype.renderToContainer=function(a){var b=this,d=null;if("string"==typeof a){if(d=document.getElementById(a),null===d)return!1}else if("object"==typeof a){if("function"!=typeof a.appendChild)return!1;d=a}else return!1;if(d){if(a=UBM.Util.getUrlParams()){if("string"!=typeof a.email||"string"!=typeof a.brandId||"string"!=typeof a.promoId)return d.innerHTML=this._language.get("HelperText_OptOut_Error_InvalidURL"),!1;d.setAttribute("class","optoutContainer");var e=a.email,
f=a.brandId,h=a.promoId,g=document.createElement("div");g.setAttribute("class","optoutStatusContainer");g.style.display="none";var k=document.createElement("div");k.setAttribute("class","optoutMessageContainer");k.innerHTML=this._language.get("HelperText_OptOut_Message");var j=document.createElement("button");j.setAttribute("class","optoutSubmitButton");j.value=this._language.get("HelperText_OptOut_ConfirmButtonLabel");j.innerHTML=this._language.get("HelperText_OptOut_ConfirmButtonLabel");j.onclick=
function(){g.style.display="block";g.innerHTML=b._language.get("HelperText_OptOut_ProcessingStatusMessage");var a=b._language.get("HelperText_OptOut_Error_UnableToCompleteRequest");UBM.Widget.Helper.Optout.call(e,h,f,function(d){d&&"undefined"!=typeof d.success?!0===d.success?(g.innerHTML="Success!",k.innerHTML=b._language.get("HelperText_OptOut_ConfirmMessage"),j.style.display="none"):g.innerHTML=!1===d.success?"string"==typeof d.message?a+": ("+d.errorCode+") "+d.message:a+": unknown error":a+": unknown error":
g.innerHTML=a+": invalid server response"},function(){g.innerHTML=a+": unknown error"},function(){g.innerHTML=a+": server timed out"})};d.appendChild(g);d.appendChild(k);d.appendChild(j)}else return d.innerHTML="Invalid URL.",!1;return!0}return!1};
UBM.Widget.Helper.Optout.call=function(a,b,d,e,f,h){var g=new this;g.init();g=g._config.getOptoutUrl();if("string"!=typeof a||"undefined"==typeof b||"undefined"==typeof d)return!1;CSBJs_Ajax.getJsonp(g,{EmailAddress:a,BrandId:d,PromoTypeId:b},function(a){"function"==typeof e&&e(a)},function(a){"function"==typeof h&&h(a)},function(a){"function"==typeof f&&f(a)});return!0};UBM.CDSocket=function(){};
UBM.CDSocket.Client=function(a){if(arguments.callee._instance)return arguments.callee._instance;if("string"!=typeof a)throw Error("Must provide the proxy path as the first argument");arguments.callee._instance=this;this._listeners={};this._host=window.location.href;this._server=null;this._proxy=a;return this};UBM.CDSocket.Client.getInstance=function(){return new this};
UBM.CDSocket.Client.prototype.addListener=function(a,b){if("function"!==typeof b)throw Error("You must provide a valid callback fuction");this._listeners[a]=b};
UBM.CDSocket.Client.prototype.iframeToContainer=function(a,b,d){if("undefined"!==typeof a&&null!==a&&"undefined"!==typeof b){var e=document.createElement("iframe");"string"==typeof d&&e.setAttribute("id",d);var d=window.location.protocol,f=window.location.host;e.setAttribute("frameBorder","0");e.src=null===UBM.Util.getUrlParams(a)?a+"?cdsocket_client="+d+"//"+f+this._proxy:a+"&cdsocket_client="+d+"//"+f+this._proxy;e.style.width="100%";e.style.height="100%";e.setAttribute("frameborder",0);b.appendChild(e);
return e}return null};
