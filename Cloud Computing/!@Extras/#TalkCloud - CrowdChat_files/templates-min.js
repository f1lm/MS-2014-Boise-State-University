/*! Autogenerate CrowdChat 2014-11-07 */
jade=function(a){function b(a){return null!=a}return Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),a.merge=function(a,c){var d=a["class"],e=c["class"];(d||e)&&(d=d||[],e=e||[],Array.isArray(d)||(d=[d]),Array.isArray(e)||(e=[e]),d=d.filter(b),e=e.filter(b),a["class"]=d.concat(e).join(" "));for(var f in c)"class"!=f&&(a[f]=c[f]);return a},a.attrs=function(b,c){var d=[],e=b.terse;delete b.terse;var f=Object.keys(b),g=f.length;if(g){d.push("");for(var h=0;g>h;++h){var i=f[h],j=b[i];"boolean"==typeof j||null==j?j&&d.push(e?i:i+'="'+i+'"'):d.push(0==i.indexOf("data")&&"string"!=typeof j?i+"='"+JSON.stringify(j)+"'":"class"==i&&Array.isArray(j)?i+'="'+a.escape(j.join(" "))+'"':c&&c[i]?i+'="'+a.escape(j)+'"':i+'="'+j+'"')}}return d.join(" ")},a.escape=function(a){return String(a).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},a.rethrow=function(a,b,c){if(!b)throw a;var d=3,e=require("fs").readFileSync(b,"utf8"),f=e.split("\n"),g=Math.max(c-d,0),h=Math.min(f.length,c+d),d=f.slice(g,h).map(function(a,b){var d=b+g+1;return(d==c?"  > ":"    ")+d+"| "+a}).join("\n");throw a.path=b,a.message=(b||"Jade")+":"+c+"\n"+d+"\n\n"+a.message,a},a}({}),jade.templates={},jade.render=function(a,b,c){var d=jade.templates[b](c);a.innerHTML=d},jade.templates.crowd=function(locals,attrs,escape,rethrow,merge){function getRepString(a){return a?(a+="",1e3>a?a:1e4>a?a.charAt(0)+","+a.substring(1):1e6>a?(a/1e3).toFixed(a%1e3!=0)+"K":(a/1e6).toFixed(a%1e6!=0)+"M"):0}attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div id="crowdmodal" role="dialog" class="modal fade in"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a data-dismiss="modal" class="close">x</a><h3 style="text-align:center">Crowd</h3></div><div style="text-align:center" class="modal-body"></div></div></div></div>'),buf.push('<h5 class="heading">Crowd<a onclick="open_crowd_modal()" style="margin-left:5px">(More Info)</a></h5><div id="crowd"></div>'),locals.users&&(users.length>0?(buf.push('<div class="crowd_users">'),function(){if("number"==typeof users.length)for(var a=0,b=users.length;b>a;a++){var c=users[a];c&&c.display_name&&(buf.push('<div class="user_pic"><a'),buf.push(attrs({href:c.profile_url,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a></div>"))}else for(var a in users){var c=users[a];c&&c.display_name&&(buf.push('<div class="user_pic"><a'),buf.push(attrs({href:c.profile_url,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a></div>"))}}.call(this),buf.push("</div>")):buf.push("<p>None Online</p>")),buf.push('<div class="statistics"><div class="heading"><span class="stat">Views:<strong>'+escape(null==(interp=getRepString(stats.total_viewers))?"":interp)+'</strong></span><span class="stat"> Reach:<strong id="spot_reach"></strong></span><span class="stat"> Posts:<strong id="post_count">'+escape(null==(interp=stats.posts)?"":interp)+'</strong></span><span class="stat"> Online:<strong><a'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"top",title:stats.anonymous+" Anonymous"},{"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"+escape(null==(interp=stats.current_viewers)?"":interp)+"</a></strong></span></div></div>")}return buf.join("")},jade.templates.hosts=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<!-- Host Modal--><div id="hostmodal" role="dialog" class="modal fade in"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a data-dismiss="modal" class="close">x</a><h3 style="text-align:center">Hosts</h3></div><div style="text-align:center" class="modal-body">'),locals.users&&(users.length>0?function(){if("number"==typeof users.length)for(var a=0,b=users.length;b>a;a++){var c=users[a];buf.push('<div class="user_block">'),c.screen_name&&(buf.push('<div class="user_pic_modal">'),c.type&&"twitter"!=c.type?"linkedin"==c.type?(buf.push("<a"),buf.push(attrs({href:"http://www.linkedin.com/profile/view?id="+c.user_id,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):"facebook"==c.type&&(buf.push("<a"),buf.push(attrs({href:c.profile_url,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/@"+c.screen_name,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")),buf.push('</div><div class="user_info"><span class="display_name">'+escape(null==(interp=c.display_name)?"":interp)+"</span>"),buf.push(c.bio&&""!=c.bio&&" "!=c.bio?'<span class="bio">'+escape(null==(interp=c.bio)?"":interp)+"</span>":'<span class="bio">No '+escape(null==(interp=c.type)?"":interp)+" bio</span>"),buf.push("</div>")),buf.push("</div>")}else for(var a in users){var c=users[a];buf.push('<div class="user_block">'),c.screen_name&&(buf.push('<div class="user_pic_modal">'),c.type&&"twitter"!=c.type?"linkedin"==c.type?(buf.push("<a"),buf.push(attrs({href:"http://www.linkedin.com/profile/view?id="+c.user_id,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):"facebook"==c.type&&(buf.push("<a"),buf.push(attrs({href:c.profile_url,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/@"+c.screen_name,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")),buf.push('</div><div class="user_info"><span class="display_name">'+escape(null==(interp=c.display_name)?"":interp)+"</span>"),buf.push(c.bio&&""!=c.bio&&" "!=c.bio?'<span class="bio">'+escape(null==(interp=c.bio)?"":interp)+"</span>":'<span class="bio">No '+escape(null==(interp=c.type)?"":interp)+" bio</span>"),buf.push("</div>")),buf.push("</div>")}}.call(this):buf.push("<p>None Online</p>")),buf.push('</div></div></div></div><h5 class="heading">Hosts'),locals.users&&users.length>0&&buf.push('<a onclick="open_host_modal()" style="margin-left:5px">(More Info)</a>'),buf.push('</h5><div id="hosts"></div>'),locals.users&&(users.length>0?(buf.push('<div class="host_users">'),users.length>6&&(users=users.splice(0,6)),function(){if("number"==typeof users.length)for(var a=0,b=users.length;b>a;a++){var c=users[a];c.screen_name&&(buf.push('<div class="user_pic">'),c.type&&"twitter"!=c.type?"linkedin"==c.type?(buf.push("<a"),buf.push(attrs({href:"http://www.linkedin.com/profile/view?id="+c.user_id,"data-toggle":"tooltip","data-placement":"top",title:c.display_name},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):"facebook"==c.type&&(buf.push("<a"),buf.push(attrs({href:c.profile_url,"data-toggle":"tooltip","data-placement":"top",title:c.display_name},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/@"+c.screen_name,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")),buf.push("</div>"))}else for(var a in users){var c=users[a];c.screen_name&&(buf.push('<div class="user_pic">'),c.type&&"twitter"!=c.type?"linkedin"==c.type?(buf.push("<a"),buf.push(attrs({href:"http://www.linkedin.com/profile/view?id="+c.user_id,"data-toggle":"tooltip","data-placement":"top",title:c.display_name},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):"facebook"==c.type&&(buf.push("<a"),buf.push(attrs({href:c.profile_url,"data-toggle":"tooltip","data-placement":"top",title:c.display_name},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/@"+c.screen_name,"data-toggle":"tooltip","data-placement":"top",title:c.display_name,"class":"user_link"},{href:!0,"data-toggle":!0,"data-placement":!0,title:!0})),buf.push(">"),src=c.picture_url&&-1!=c.picture_url.indexOf("http:")?"/img/Unknown-person.gif":c.picture_url,buf.push("<img"),buf.push(attrs({src:src},{src:!0})),buf.push("/></a>")),buf.push("</div>"))}}.call(this),buf.push("</div>")):buf.push("<p>None Online</p>"))}return buf.join("")},jade.templates.tweet=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;if((locals.tweet||tweet)&&tweet.user){var draggable="crowdchat"==tweet.feed_source?"false":"true";buf.push("<div"),buf.push(attrs({draggable:draggable,ondragstart:"drag(event)",id:tweet.user+"/status/"+tweet.id,data_feed_source:tweet.feed_source,data_screen_name:tweet.user,createdDate:tweet.created_at,posted_by:tweet.user,"class":"tweet live_stream_feed"},{draggable:!0,ondragstart:!0,id:!0,data_feed_source:!0,data_screen_name:!0,createdDate:!0,posted_by:!0})),buf.push(">"),"crowdchat"==tweet.feed_source?(buf.push("<a"),buf.push(attrs({onclick:"oUser('"+tweet.user_key+"')","class":"tweet_link"},{onclick:!0})),buf.push("><img"),buf.push(attrs({src:tweet.pic,"class":"tweet_pic"},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+tweet.user,"class":"tweet_link"},{href:!0})),buf.push("><img"),buf.push(attrs({src:tweet.pic,"class":"tweet_pic"},{src:!0})),buf.push("/></a>")),buf.push('<div class="tweet_content">');var src="crowdchat"==tweet.feed_source?"/img/favicon.ico":"/img/twitter/logo.png";buf.push('<div class="ls-action-icons">'),tweet.isHost&&buf.push('<a data-toggle="tooltip" title="Host" data-placement="bottom"><i style="margin-right:3px;color:#08c" class="fa fa-star"></i></a>'),tweet.feed_source&&"twitter"!=tweet.feed_source?(buf.push("<img"),buf.push(attrs({src:src,"class":"feed_source_img"},{src:!0})),buf.push("/>")):(buf.push("<a"),buf.push(attrs({onclick:"open_chat_invite(this);return false","data-invited-handle":tweet.user,"class":"fa fa-plus"},{onclick:!0,"data-invited-handle":!0})),buf.push('></a><i class="fa fa-twitter twit-bird"></i>')),buf.push("</div><div"),buf.push(attrs({"data-urls":tweet.entities.urls,"class":"tweet_user"},{"data-urls":!0})),buf.push('><span class="user_handle">'),"crowdchat"==tweet.feed_source?(buf.push("<a"),buf.push(attrs({onclick:"oUser('"+tweet.user_key+"')","class":"tweet_link"},{onclick:!0})),buf.push(">"+escape(null==(interp=tweet.user)?"":interp)+"</a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+tweet.user,"class":"tweet_link"},{href:!0})),buf.push(">"+escape(null==(interp=tweet.user)?"":interp)+"</a>")),buf.push('</span><span class="user_name"> '+escape(null==(interp=tweet.name)?"":interp)+'</span><div class="tweet_text">');var __val__=tweet.text;buf.push(null==__val__?"":__val__),buf.push("</div><div"),buf.push(attrs({id:tweet.id,"class":"tweet_timestamp"},{id:!0})),buf.push(">"),tweet.retweeted_status&&buf.push('<span style="color:green" title="this was retweeted" class="pull-left fa fa-retweet fa-lg"></span>');var href="crowdchat"==tweet.feed_source?"":"http://www.twitter.com/"+tweet.user+"/status/"+tweet.id,clazz="crowdchat"==tweet.feed_source?"tweet_link":"tweet_link",targ="crowdchat"==tweet.feed_source?"_self":"_blank",onclick="crowdchat"==tweet.feed_source?'return scrollAndHighlight("'+tweet.data_post_id+'");':"";if(buf.push("<a"),buf.push(attrs({target:targ,href:href,onclick:onclick,"class":clazz},{target:!0,href:!0,"class":!0,onclick:!0})),buf.push('><span style="font-size: 11px;color: #999;" class="timestamp"></span></a>'),"crowdchat"==tweet.feed_source&&(buf.push("<div"),buf.push(attrs({onclick:onclick,"class":"live-cc-view"},{onclick:!0})),buf.push(">locate this</div>")),buf.push("<script>var tweet = $('#'+'"+escape(null==(interp=tweet.id)?"":interp)+"');\nvar timestamp = tweet.find('.timestamp');\nvar future = moment( '"+escape(null==(interp=tweet.timestamp)?"":interp)+"' ) > moment();\nif(future) {\n  - console.log('yeaaa');\n  timestamp.html('a few seconds ago');\n} else {\n  var time_string = moment( '"+escape(null==(interp=tweet.timestamp)?"":interp)+'\' ).fromNow();\n  timestamp.html(time_string);\n}</script></div><div class="tweet_view_on_twitter">'),tweet.quotedBy?buf.push('<span title="To quote, drag from Live Stream" class="tweet_link">Quoted By @'+escape(null==(interp=tweet.quotedBy)?"":interp)+"</span>"):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+tweet.user+"/status/"+tweet.id,"class":"tweet_link"},{href:!0})),buf.push(">View it on Twitter</a>")),buf.push('</div><div class="tweet_actions">'),!tweet.feed_source||"twitter"==tweet.feed_source){var twitter="https://twitter.com/intent",postText=tweet.text.replace(/<(?:.|\n)*?>/gm,""),encodedText=encodeURIComponent("RT @"+tweet.user+" "+postText);buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Modified Tweet",href:twitter+"/tweet?text="+encodedText,"class":"rt_link"},{"data-toggle":!0,title:!0,href:!0})),buf.push(">MT</a><a"),buf.push(attrs({href:twitter+"/tweet?in_reply_to="+tweet.id,target:"_blank"},{href:!0,target:!0})),buf.push('><i style="font-size:12px" class="actn twitter_reply fa fa-reply clr-grey"></i></a><a'),buf.push(attrs({href:twitter+"/retweet?tweet_id="+tweet.id,target:"_blank"},{href:!0,target:!0})),buf.push('><i class="actn twitter_retweet fa fa-retweet clr-grey"></i></a><a'),buf.push(attrs({href:twitter+"/favorite?tweet_id="+tweet.id,target:"_blank","class":"twitter_fav"},{href:!0,target:!0})),buf.push('><i class="actn twitter_fav fa fa-star-o clr-grey"></i></a>')}buf.push("</div></div></div></div>")}}return buf.join("")},jade.templates.live_stream=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;locals.tweets?tweets.length>0?function(){if("number"==typeof tweets.length)for(var a=0,b=tweets.length;b>a;a++){var c=tweets[a];if((locals.tweet||c)&&c.user){var d="crowdchat"==c.feed_source?"false":"true";buf.push("<div"),buf.push(attrs({draggable:d,ondragstart:"drag(event)",id:c.user+"/status/"+c.id,data_feed_source:c.feed_source,data_screen_name:c.user,createdDate:c.created_at,posted_by:c.user,"class":"tweet live_stream_feed"},{draggable:!0,ondragstart:!0,id:!0,data_feed_source:!0,data_screen_name:!0,createdDate:!0,posted_by:!0})),buf.push(">"),"crowdchat"==c.feed_source?(buf.push("<a"),buf.push(attrs({onclick:"oUser('"+c.user_key+"')","class":"tweet_link"},{onclick:!0})),buf.push("><img"),buf.push(attrs({src:c.pic,"class":"tweet_pic"},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+c.user,"class":"tweet_link"},{href:!0})),buf.push("><img"),buf.push(attrs({src:c.pic,"class":"tweet_pic"},{src:!0})),buf.push("/></a>")),buf.push('<div class="tweet_content">');var e="crowdchat"==c.feed_source?"/img/favicon.ico":"/img/twitter/logo.png";buf.push('<div class="ls-action-icons">'),c.isHost&&buf.push('<a data-toggle="tooltip" title="Host" data-placement="bottom"><i style="margin-right:3px;color:#08c" class="fa fa-star"></i></a>'),c.feed_source&&"twitter"!=c.feed_source?(buf.push("<img"),buf.push(attrs({src:e,"class":"feed_source_img"},{src:!0})),buf.push("/>")):(buf.push("<a"),buf.push(attrs({onclick:"open_chat_invite(this);return false","data-invited-handle":c.user,"class":"fa fa-plus"},{onclick:!0,"data-invited-handle":!0})),buf.push('></a><i class="fa fa-twitter twit-bird"></i>')),buf.push("</div><div"),buf.push(attrs({"data-urls":c.entities.urls,"class":"tweet_user"},{"data-urls":!0})),buf.push('><span class="user_handle">'),"crowdchat"==c.feed_source?(buf.push("<a"),buf.push(attrs({onclick:"oUser('"+c.user_key+"')","class":"tweet_link"},{onclick:!0})),buf.push(">"+escape(null==(interp=c.user)?"":interp)+"</a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+c.user,"class":"tweet_link"},{href:!0})),buf.push(">"+escape(null==(interp=c.user)?"":interp)+"</a>")),buf.push('</span><span class="user_name"> '+escape(null==(interp=c.name)?"":interp)+'</span><div class="tweet_text">');var f=c.text;buf.push(null==f?"":f),buf.push("</div><div"),buf.push(attrs({id:c.id,"class":"tweet_timestamp"},{id:!0})),buf.push(">"),c.retweeted_status&&buf.push('<span style="color:green" title="this was retweeted" class="pull-left fa fa-retweet fa-lg"></span>');var g="crowdchat"==c.feed_source?"":"http://www.twitter.com/"+c.user+"/status/"+c.id,h="crowdchat"==c.feed_source?"tweet_link":"tweet_link",i="crowdchat"==c.feed_source?"_self":"_blank",j="crowdchat"==c.feed_source?'return scrollAndHighlight("'+c.data_post_id+'");':"";if(buf.push("<a"),buf.push(attrs({target:i,href:g,onclick:j,"class":h},{target:!0,href:!0,"class":!0,onclick:!0})),buf.push('><span style="font-size: 11px;color: #999;" class="timestamp"></span></a>'),"crowdchat"==c.feed_source&&(buf.push("<div"),buf.push(attrs({onclick:j,"class":"live-cc-view"},{onclick:!0})),buf.push(">locate this</div>")),buf.push("<script>var tweet = $('#'+'"+escape(null==(interp=c.id)?"":interp)+"');\nvar timestamp = tweet.find('.timestamp');\nvar future = moment( '"+escape(null==(interp=c.timestamp)?"":interp)+"' ) > moment();\nif(future) {\n  - console.log('yeaaa');\n  timestamp.html('a few seconds ago');\n} else {\n  var time_string = moment( '"+escape(null==(interp=c.timestamp)?"":interp)+'\' ).fromNow();\n  timestamp.html(time_string);\n}</script></div><div class="tweet_view_on_twitter">'),c.quotedBy?buf.push('<span title="To quote, drag from Live Stream" class="tweet_link">Quoted By @'+escape(null==(interp=c.quotedBy)?"":interp)+"</span>"):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+c.user+"/status/"+c.id,"class":"tweet_link"},{href:!0})),buf.push(">View it on Twitter</a>")),buf.push('</div><div class="tweet_actions">'),!c.feed_source||"twitter"==c.feed_source){var k="https://twitter.com/intent",l=c.text.replace(/<(?:.|\n)*?>/gm,""),m=encodeURIComponent("RT @"+c.user+" "+l);buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Modified Tweet",href:k+"/tweet?text="+m,"class":"rt_link"},{"data-toggle":!0,title:!0,href:!0})),buf.push(">MT</a><a"),buf.push(attrs({href:k+"/tweet?in_reply_to="+c.id,target:"_blank"},{href:!0,target:!0})),buf.push('><i style="font-size:12px" class="actn twitter_reply fa fa-reply clr-grey"></i></a><a'),buf.push(attrs({href:k+"/retweet?tweet_id="+c.id,target:"_blank"},{href:!0,target:!0})),buf.push('><i class="actn twitter_retweet fa fa-retweet clr-grey"></i></a><a'),buf.push(attrs({href:k+"/favorite?tweet_id="+c.id,target:"_blank","class":"twitter_fav"},{href:!0,target:!0})),buf.push('><i class="actn twitter_fav fa fa-star-o clr-grey"></i></a>')}buf.push("</div></div></div></div>")}}else for(var a in tweets){var c=tweets[a];if((locals.tweet||c)&&c.user){var d="crowdchat"==c.feed_source?"false":"true";buf.push("<div"),buf.push(attrs({draggable:d,ondragstart:"drag(event)",id:c.user+"/status/"+c.id,data_feed_source:c.feed_source,data_screen_name:c.user,createdDate:c.created_at,posted_by:c.user,"class":"tweet live_stream_feed"},{draggable:!0,ondragstart:!0,id:!0,data_feed_source:!0,data_screen_name:!0,createdDate:!0,posted_by:!0})),buf.push(">"),"crowdchat"==c.feed_source?(buf.push("<a"),buf.push(attrs({onclick:"oUser('"+c.user_key+"')","class":"tweet_link"},{onclick:!0})),buf.push("><img"),buf.push(attrs({src:c.pic,"class":"tweet_pic"},{src:!0})),buf.push("/></a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+c.user,"class":"tweet_link"},{href:!0})),buf.push("><img"),buf.push(attrs({src:c.pic,"class":"tweet_pic"},{src:!0})),buf.push("/></a>")),buf.push('<div class="tweet_content">');var e="crowdchat"==c.feed_source?"/img/favicon.ico":"/img/twitter/logo.png";buf.push('<div class="ls-action-icons">'),c.isHost&&buf.push('<a data-toggle="tooltip" title="Host" data-placement="bottom"><i style="margin-right:3px;color:#08c" class="fa fa-star"></i></a>'),c.feed_source&&"twitter"!=c.feed_source?(buf.push("<img"),buf.push(attrs({src:e,"class":"feed_source_img"},{src:!0})),buf.push("/>")):(buf.push("<a"),buf.push(attrs({onclick:"open_chat_invite(this);return false","data-invited-handle":c.user,"class":"fa fa-plus"},{onclick:!0,"data-invited-handle":!0})),buf.push('></a><i class="fa fa-twitter twit-bird"></i>')),buf.push("</div><div"),buf.push(attrs({"data-urls":c.entities.urls,"class":"tweet_user"},{"data-urls":!0})),buf.push('><span class="user_handle">'),"crowdchat"==c.feed_source?(buf.push("<a"),buf.push(attrs({onclick:"oUser('"+c.user_key+"')","class":"tweet_link"},{onclick:!0})),buf.push(">"+escape(null==(interp=c.user)?"":interp)+"</a>")):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+c.user,"class":"tweet_link"},{href:!0})),buf.push(">"+escape(null==(interp=c.user)?"":interp)+"</a>")),buf.push('</span><span class="user_name"> '+escape(null==(interp=c.name)?"":interp)+'</span><div class="tweet_text">');var f=c.text;buf.push(null==f?"":f),buf.push("</div><div"),buf.push(attrs({id:c.id,"class":"tweet_timestamp"},{id:!0})),buf.push(">"),c.retweeted_status&&buf.push('<span style="color:green" title="this was retweeted" class="pull-left fa fa-retweet fa-lg"></span>');var g="crowdchat"==c.feed_source?"":"http://www.twitter.com/"+c.user+"/status/"+c.id,h="crowdchat"==c.feed_source?"tweet_link":"tweet_link",i="crowdchat"==c.feed_source?"_self":"_blank",j="crowdchat"==c.feed_source?'return scrollAndHighlight("'+c.data_post_id+'");':"";if(buf.push("<a"),buf.push(attrs({target:i,href:g,onclick:j,"class":h},{target:!0,href:!0,"class":!0,onclick:!0})),buf.push('><span style="font-size: 11px;color: #999;" class="timestamp"></span></a>'),"crowdchat"==c.feed_source&&(buf.push("<div"),buf.push(attrs({onclick:j,"class":"live-cc-view"},{onclick:!0})),buf.push(">locate this</div>")),buf.push("<script>var tweet = $('#'+'"+escape(null==(interp=c.id)?"":interp)+"');\nvar timestamp = tweet.find('.timestamp');\nvar future = moment( '"+escape(null==(interp=c.timestamp)?"":interp)+"' ) > moment();\nif(future) {\n  - console.log('yeaaa');\n  timestamp.html('a few seconds ago');\n} else {\n  var time_string = moment( '"+escape(null==(interp=c.timestamp)?"":interp)+'\' ).fromNow();\n  timestamp.html(time_string);\n}</script></div><div class="tweet_view_on_twitter">'),c.quotedBy?buf.push('<span title="To quote, drag from Live Stream" class="tweet_link">Quoted By @'+escape(null==(interp=c.quotedBy)?"":interp)+"</span>"):(buf.push("<a"),buf.push(attrs({href:"http://www.twitter.com/"+c.user+"/status/"+c.id,"class":"tweet_link"},{href:!0})),buf.push(">View it on Twitter</a>")),buf.push('</div><div class="tweet_actions">'),!c.feed_source||"twitter"==c.feed_source){var k="https://twitter.com/intent",l=c.text.replace(/<(?:.|\n)*?>/gm,""),m=encodeURIComponent("RT @"+c.user+" "+l);buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Modified Tweet",href:k+"/tweet?text="+m,"class":"rt_link"},{"data-toggle":!0,title:!0,href:!0})),buf.push(">MT</a><a"),buf.push(attrs({href:k+"/tweet?in_reply_to="+c.id,target:"_blank"},{href:!0,target:!0})),buf.push('><i style="font-size:12px" class="actn twitter_reply fa fa-reply clr-grey"></i></a><a'),buf.push(attrs({href:k+"/retweet?tweet_id="+c.id,target:"_blank"},{href:!0,target:!0})),buf.push('><i class="actn twitter_retweet fa fa-retweet clr-grey"></i></a><a'),buf.push(attrs({href:k+"/favorite?tweet_id="+c.id,target:"_blank","class":"twitter_fav"},{href:!0,target:!0})),buf.push('><i class="actn twitter_fav fa fa-star-o clr-grey"></i></a>')}buf.push("</div></div></div></div>")}}}.call(this):buf.push("<div>No Activity Yet</div>"):buf.push('<div class="loading"><i class="fa fa-spinner fa-2x fa-spin"></i> Establishing a secure connection</div>')}return buf.join("")},jade.templates.posts=function(locals,attrs,escape,rethrow,merge){function date_sort(a,b){return b.timestamp>a.timestamp?-1:1}attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp,twitter_action_mixin=function(a,b,c,d){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:a,"data-toggle":"tooltip",title:b,"class":"action"},{onclick:!0,"data-toggle":!0,title:!0})),buf.push(">"),d?(buf.push("<img"),buf.push(attrs({src:d,"class":c},{src:!0,"class":!0})),buf.push("/>")):(buf.push("<i"),buf.push(attrs({"class":c},{"class":!0})),buf.push("></i>")),buf.push("</a>")},crowdchat_action_mixin=function(a,b,c){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:a,"data-toggle":"tooltip",title:b,"class":"action"},{onclick:!0,"data-toggle":!0,title:!0})),buf.push(">");var d=c;buf.push(null==d?"":d),buf.push("</a>")},bootstroShownInVotePost=!1,votes_mixin=function(a,b,c){this.block,this.attributes||{},this.escaped||{};if(buf.push("<span"),buf.push(attrs({id:b.id+"-votediv"},{id:!0})),buf.push(">"),"post"==a){var d=b.votes;b.posts&&b.posts.forEach(function(a){d+=a.votes,a.posts&&a.posts.forEach(function(a){d+=a.votes})});var e=d;c&&-1!=b.vote_users.indexOf(c.key)?bootstroShownInVotePost?(buf.push("<span"),buf.push(attrs({onclick:'unvote("'+b.id+'")',"class":"vote-post pull-right"},{onclick:!0})),buf.push("><span"),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+'</span><a data-toggle="tooltip" title="Undo Vote"><i class="fa fa-check center-block"></i></a></span>')):(bootstroShownInVotePost=!0,buf.push("<span"),buf.push(attrs({onclick:'unvote("'+b.id+'")',"data-bootstro-step":"5","data-bootstro-title":"","data-bootstro-content":"Vote for a post. The content is arranged in order of votes.","data-bootstro-placement":"top","class":"vote-post pull-right bootstro"},{onclick:!0,"data-bootstro-step":!0,"data-bootstro-title":!0,"data-bootstro-content":!0,"data-bootstro-placement":!0})),buf.push("><span"),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+'</span><a data-toggle="tooltip" title="Undo Vote"><i class="fa fa-check center-block"></i></a></span>')):bootstroShownInVotePost?(buf.push("<span"),buf.push(attrs({onclick:'upvote("'+b.id+'")',"class":"vote-post pull-right"},{onclick:!0})),buf.push('><a data-toggle="tooltip" title="Vote"><i class="fa fa-arrow-up center-block"></i></a><span'),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+"</span></span>")):(bootstroShownInVotePost=!0,buf.push("<span"),buf.push(attrs({onclick:'upvote("'+b.id+'")',"data-bootstro-step":"5","data-bootstro-title":"","data-bootstro-content":"Vote for a post. The content is arranged in order of votes.","data-bootstro-placement":"top","class":"vote-post pull-right bootstro"},{onclick:!0,"data-bootstro-step":!0,"data-bootstro-title":!0,"data-bootstro-content":!0,"data-bootstro-placement":!0})),buf.push('><a data-toggle="tooltip" title="Vote"><i class="fa fa-arrow-up center-block"></i></a><span'),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+"</span></span>")),buf.push("<script>$('#"+escape(null==(interp=b.id)?"":interp)+"-votes').text(getRepString('"+escape(null==(interp=b.votes)?"":interp)+"'))</script>")}else"post b"==a?(buf.push("<span"),buf.push(attrs({id:b.id+"-votes","class":"textVotes"},{id:!0})),buf.push(">"+escape(null==(interp=b.votes)?"":interp)+"</span> Votes"),actions_mixin(b,c,!0)):(buf.push("<span"),buf.push(attrs({id:b.id+"-votes","class":"textVotes"},{id:!0})),buf.push(">"+escape(null==(interp=b.votes)?"":interp)+"</span> Votes"),actions_mixin(b,c));buf.push("</span>")},twitterActions_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push('<span style="margin-left:5px" class="networkIcon"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Sent To Twitter",href:"http://www.twitter.com/"+a.author_twitter_handle+"/status/"+a.tweet_id},{"data-toggle":!0,title:!0,href:!0})),buf.push('><i class="fa fa-twitter cc-twit clr-twit-blue"></i></a></span>'),"twitter"==b.type){var c=", '"+a.id+"','"+a.tweet_id+"')";if(b&&-1!=a.fav_users.indexOf(b.key)){var d="twitter_fav fa fa-star clr-gold cc-twit action";twitter_action_mixin("chatAction('unfav'"+c,"Twitter Undo Favorite",d)}else{var e="twitter_unfav fa fa-star-o clr-grey cc-twit action";twitter_action_mixin("chatAction('fav'"+c,"Twitter Favorite",e)}if(!b||a.author_twitter_handle!=b.screen_name){if(b&&-1!=a.retweet_users.indexOf(b.key)){var f=a.retweet_ids[a.retweet_users.indexOf(b.key)],g="twitter_unretweet fa fa-retweet clr-green cc-twit action";twitter_action_mixin("chatAction('unretweet', \""+a.id+'","'+f+'")',"Twitter Undo Retweet",g)}else{var h="twitter_retweet fa fa-retweet clr-grey cc-twit action";twitter_action_mixin("chatAction('retweet'"+c,"Twitter Retweet",h)}if(a.raw){var i=a.raw.replace(/(\r\n|\r|\n)/gm,"").replace(/\s+/g," ").replace(/<(?:.|\n)*?>/gm,""),j=encodeURIComponent("RT @"+a.author+" "+i);
buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Modified Tweet",href:"https://twitter.com/intent/tweet?text="+j},{"data-toggle":!0,title:!0,href:!0})),buf.push(">MT</a>")}}}},linkedinActions_mixin=function(a){this.block,this.attributes||{},this.escaped||{};buf.push('<span style="margin-left:5px" class="networkIcon"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Sent To LinkedIn",href:a.share_url},{"data-toggle":!0,title:!0,href:!0})),buf.push('><i class="fa fa-linkedin-square fa-lg clr-lnkdin action"></i></a></span>')},facebookActions_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};buf.push('<span style="margin-left:5px" class="networkIcon"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Sent To Facebook",href:a.fbpost_url},{"data-toggle":!0,title:!0,href:!0})),buf.push('><i class="fa fa-facebook-square fa-lg clr-fb action"></i></a></span>'),"facebook"==b.type&&(!b||!a.like_users||a.like_users&&-1==a.like_users.indexOf(b.key)?twitter_action_mixin('likeUnlikePost("likeFBPost","'+a.id+'","'+a.fbpost_id+'")',"Like On Facebook","facebook-like fb-logo","/img/facebook/like.png"):twitter_action_mixin('likeUnlikePost("unlikeFBPost","'+a.id+'","'+a.fbpost_id+'")',"Unlike On Facebook","facebook-unlike fb-logo","/img/facebook/unlike.png"),!b||!a.fbShare_users||a.fbShare_users&&-1==a.fbShare_users.indexOf(b.key)?crowdchat_action_mixin('sharePost("'+a.id+'","'+a.fbpost_url+'")',"Share On Facebook","Share"):buf.push('<a onclick="return;" data-toggle="tooltip" title="Shared on Facebook" class="action disabled-action">Shared</a>'))},actions_mixin=function(a,b,c){this.block,this.attributes||{},this.escaped||{};buf.push('<span class="spacer">&nbsp;</span>');var d="actions";c&&(d=""),buf.push("<span"),buf.push(attrs({"class":d},{"class":!0})),buf.push(">"),b&&-1!=a.vote_users.indexOf(b.key)?crowdchat_action_mixin('unvote("'+a.id+'")',"Undo Vote","Undo Vote"):crowdchat_action_mixin('upvote("'+a.id+'")',"Vote","Vote"),ended||crowdchat_action_mixin('commentReply("'+a.id+'")',"Reply","Reply"),a.tweet_id&&twitterActions_mixin(a,b),a.share_url&&linkedinActions_mixin(a,b),a.fbpost_url&&facebookActions_mixin(a,b),"post"==a.post_type&&(buf.push('<span style="margin-left:5px" class="networkIcon"></span><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Permalink","data-copy":"/post/"+a.id.split("_")[1],onclick:"cp(this)"},{"data-toggle":!0,title:!0,"data-copy":!0,onclick:!0})),buf.push('><i class="fa fa-link fa-lg"></i></a>')),a.timestamp&&(buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Permalink","data-copy":"/post/"+a.id.split("_")[1],onclick:"cp(this)",timestamp:a.timestamp,"class":"timestamp"},{"data-toggle":!0,title:!0,"data-copy":!0,onclick:!0,timestamp:!0})),buf.push("></a>")),b&&a.author_key==b.key&&0==a.posts.length&&0==a.votes&&!ended&&(buf.push('<span class="pull-right"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Delete Post",onclick:'deletePost("'+a.id+'")',"class":"delete_btn"},{"data-toggle":!0,title:!0,onclick:!0})),buf.push(">Delete</a></span>")),buf.push("</span>")},replyblock_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push("<div"),buf.push(attrs({id:a.id+"_replyblock","class":"reply_pane"},{id:!0})),buf.push('><div class="reply_container"><a'),buf.push(attrs({onclick:"oUser('"+b.key+"')","class":"pull-left"},{onclick:!0})),buf.push(">"),src=b.picture_url?-1!=b.picture_url.indexOf("http:")?"/img/Unknown-person.gif":b.picture_url:"/img/Unknown-person.gif",buf.push("<img"),buf.push(attrs({src:src,"class":"comment_logo"},{src:!0,"class":!0})),buf.push('/></a><div style="padding-left:7px" class="col-xs-9 col-sm-8 col-md-8 col-lg-9">'),"twitter"==a.author_type){{a.external_content_author||a.author_twitter_handle}buf.push('<textarea maxlength="256" placeholder="Use @ to reply" ondrop="reply_drop(event)" ondragover="allowDrop(event)" class="newc reply_box"></textarea>')}else("linkedin"==a.author_type||"facebook"==a.author_type)&&(buf.push("<textarea"),buf.push(attrs({maxlength:"256",placeholder:"Reply to "+a.author_display_name,ondrop:"reply_drop(event)",ondragover:"allowDrop(event)","class":"newc reply_box"},{maxlength:!0,placeholder:!0,ondrop:!0,ondragover:!0})),buf.push("></textarea>"));buf.push('<div class="cues pull-left">Press Enter/Return to post</div></div><div class="checkbox tweet_box col-xs-12 col-sm-2 col-md-2 col-lg-2"><div style="margin-top:2px" class="pull-right">'),""!=b&&("twitter"==b.type?(buf.push("unchecked"==b.preference?'<input type="checkbox" id="ctweet" value="value" class="tweet_checkbox"/>':'<input type="checkbox" id="ctweet" value="value" checked="checked" class="tweet_checkbox"/>'),buf.push('<span class="update_text">Twitter</span>')):"linkedin"==b.type?(buf.push("unchecked"==b.preference?'<input type="checkbox" id="share" value="value" class="share_checkbox"/>':'<input type="checkbox" id="share" value="value" checked="checked" class="share_checkbox"/>'),buf.push('<span class="update_text">LinkedIn</span>')):"facebook"==b.type&&(buf.push("unchecked"==b.preference?'<input type="checkbox" id="fbpost" value="value" class="fbpost_checkbox"/>':'<input type="checkbox" id="fbpost" value="value" checked="checked" class="fbpost_checkbox"/>'),buf.push('<span class="update_text">Facebook</span>'))),buf.push('<span id="remainC" class="update_text remain">256</span></div></div></div><div id="extCnPrw" class="extCnPrw"></div></div>')},author_mixin=function(a){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:"oUser('"+a.author_key+"')"},{onclick:!0})),buf.push(">"+escape(null==(interp=a.author_display_name)?"":interp)+"</a><input"),buf.push(attrs({type:"hidden",id:"post",value:a.id},{type:!0,id:!0,value:!0})),buf.push("/><input"),buf.push(attrs({type:"hidden",id:"author",value:"twitter"==a.author_type?"@"+(a.external_content_author||a.author_twitter_handle)+" ":" ","class":"hidaut"},{type:!0,id:!0,value:!0})),buf.push("/>")},author_pic_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:"oUser('"+a.author_key+"')","class":"pull-left"},{onclick:!0})),buf.push(">"),src=a.author_picture_url&&-1!=a.author_picture_url.indexOf("http:")?"/img/Unknown-person.gif":a.author_picture_url,buf.push("<img"),buf.push(attrs({src:src,"class":b},{src:!0,"class":!0})),buf.push("/></a>")},reply_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push("<div"),buf.push(attrs({id:a.id,"class":"reply"},{id:!0})),buf.push('><input type="hidden" id="post_type" value="reply"/>'),author_pic_mixin(a,"reply_logo"),buf.push('<div class="reply_content">'),author_mixin(a),!a.hidePost&&a&&a.post){var c=" "+a.post.replace(/\n/g,"<br/>").replace(/$@.+\s/,"").trim();buf.push(null==c?"":c)}a.external_content&&a.external_content.length>0&&(buf.push('<div class="external_content"></div>'),function(){if("number"==typeof a.external_content.length)for(var b=0,c=a.external_content.length;c>b;b++){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}else for(var b in a.external_content){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}}.call(this)),buf.push('<div class="meta">'),votes_mixin("comment",a,b),buf.push("</div></div></div>")},comment_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push('<div class="wideCommentBox"><div class="collapseButton"><a'),buf.push(attrs({onclick:"hideComments("+a.id+")",title:"Hide Comments",style:"color:black;text-decoration:none"},{onclick:!0,title:!0,style:!0})),buf.push(">[-]</a></div><div"),buf.push(attrs({id:a.id,"class":"comment"},{id:!0})),buf.push('><input type="hidden" id="post_type" value="comment"/>'),author_pic_mixin(a,"comment_logo"),buf.push('<div class="comment_content">'),author_mixin(a),!a.hidePost&&a&&a.post){var c=" "+a.post.replace(/\n/g,"<br/>").trim();buf.push(null==c?"":c)}a.external_content&&a.external_content.length>0&&(buf.push('<div class="external_content">'),function(){if("number"==typeof a.external_content.length)for(var b=0,c=a.external_content.length;c>b;b++){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}else for(var b in a.external_content){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}}.call(this),buf.push("</div>")),buf.push('<div class="meta">'),votes_mixin("comment",a,b),buf.push("</div>"),a.posts&&a.posts.length>0&&a.posts.length>0&&(buf.push('<div class="comment_replies">'),replies_mixin(a.posts,b),buf.push("</div>")),buf.push("</div></div></div>")},bootstroShownInPost=!1,post_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push("<div"),buf.push(attrs({id:a.id,"class":"post"},{id:!0})),buf.push('><input type="hidden" id="post_type" value="post"/>'),author_pic_mixin(a,"post_logo"),buf.push('<div class="post_content">'),author_mixin(a),votes_mixin("post",a,b),!a.hidePost&&a.post){buf.push('<div class="post-text">');var c=a.post.replace(/\n/g,"<br/>");buf.push(null==c?"":c),buf.push("</div>")}a.external_content&&a.external_content.length>0&&(buf.push('<div class="external_content">'),function(){if("number"==typeof a.external_content.length)for(var b=0,c=a.external_content.length;c>b;b++){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}else for(var b in a.external_content){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}}.call(this),buf.push("</div>")),buf.push('<div class="meta">'),votes_mixin("post b",a,b),buf.push("</div>"),a.posts&&(buf.push('<div class="showCommentsButton"><a onclick="showComments(this)">[+] Show Hidden Comments</a></div><div class="post_comments">'),comments_mixin(a.posts,b),buf.push("</div>")),buf.push('<div class="post_comments">'),ended||(buf.push('<div class="comment">'),bootstroShownInPost?replyblock_mixin(a,b):(bootstroShownInPost=!0,buf.push('<div data-bootstro-step="4" data-bootstro-title="Reply" data-bootstro-content="Reply to other posts" class="bootstro">'),replyblock_mixin(a,b),buf.push("</div>")),buf.push("</div>")),buf.push("</div></div></div>")},replies_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};a.sort(date_sort),function(){if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];reply_mixin(e,b)}else for(var c in a){var e=a[c];reply_mixin(e,b)}}.call(this)},comments_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};a.sort(date_sort),a.length>0&&(buf.push('<div class="comment_bubble"></div>'),function(){if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];comment_mixin(e,b)}else for(var c in a){var e=a[c];comment_mixin(e,b)}}.call(this))},posts_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};(function(){if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];post_mixin(e,b)}else for(var c in a){var e=a[c];post_mixin(e,b)}}).call(this)},clockDrift=clockDrift||0,curtime=new Date((new Date).getTime()+clockDrift),started=new Date(datetime)<curtime,endtime=new Date(datetime+duration),ended=curtime>endtime;if(!ended&&started&&!locals.paged){if(buf.push('<div class="reply_pane row main_post">'),src=locals.user_info?user_info.picture_url&&-1!=user_info.picture_url.indexOf("http:")?"/img/Unknown-person.gif":user_info.picture_url:"/img/Unknown-person.gif",buf.push("<img"),buf.push(attrs({src:src,"class":"pull-left post_logo"},{src:!0})),buf.push('/><div class="update_container"><div><textarea'),buf.push(attrs({id:"newp",tabindex:1,maxlength:"256",placeholder:"Share your thoughts on #"+hash+" ...",ondrop:"post_drop(event)",ondragover:"allowDrop(event)","class":"update typeahead"},{tabindex:!0,maxlength:!0,placeholder:!0,ondrop:!0,ondragover:!0})),buf.push('></textarea></div><div id="controls" class="control">'),locals.user_info&&!locals.isPrivate){if(buf.push('<div style="float:left"><label style="margin-top:5px; margin-bottom:5px" class="checkbox">'),"twitter"==user_info.type){buf.push("unchecked"==user_info.preference?'<input type="checkbox" id="ptweet" value="value" tabindex="4" class="tweet_checkbox"/>':'<input type="checkbox" id="ptweet" value="value" checked="checked" tabindex="4" class="tweet_checkbox"/>'),buf.push('<span class="update_text">Post to Twitter with');var twitter_hash=locals.is_temp?"demo":hash;buf.push('<strong class="twitter-hash"> #'+escape(null==(interp=twitter_hash)?"":interp)+"</strong></span>")}else if("linkedin"==user_info.type)buf.push("unchecked"==user_info.preference?'<input type="checkbox" id="pshare" value="value" tabindex="4" class="share_checkbox"/>':'<input type="checkbox" id="pshare" value="value" checked="checked" tabindex="4" class="share_checkbox"/>'),buf.push('<span class="update_text">Share via LinkedIn</span>');else if("facebook"==user_info.type){buf.push("unchecked"==user_info.preference?'<input type="checkbox" id="pfbpost" value="value" tabindex="4" class="fbpost_checkbox"/>':'<input type="checkbox" id="pfbpost" value="value" checked="checked" tabindex="4" class="fbpost_checkbox"/>'),buf.push('<span class="update_text">Post to facebook with');var twitter_hash=locals.is_temp?"demo":hash;buf.push('<strong class="twitter-hash"> #'+escape(null==(interp=twitter_hash)?"":interp)+"</strong></span>")}buf.push("</label></div>")}buf.push('<div style="float:right"><span id="remainP" class="update_text remain">256</span><button id="sayIt" onclick="new_post()" tabindex="2" class="btn btn-primary post_button">Say it!</button><a id="uploadImgBtn" onclick="openPostImageModal()" tabindex="3" class="fa fa-camera btn btn-default"></a></div></div><div id="extCnPrw" class="extCnPrw"></div></div></div>')}var postContent_mixin=function(){this.block,this.attributes||{},this.escaped||{};locals.user_info?posts_mixin(posts,user_info,sortBy):posts_mixin(posts,"",sortBy)};locals.posts&&locals.posts.length>0?locals.paged?postContent_mixin():(buf.push('<div id="post_divs">'),postContent_mixin(),buf.push("</div>")):locals.paged||buf.push('<div id="post_divs"></div>')}return buf.join("")},jade.templates.mixins=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{});return buf.join("")},jade.templates.contribution=function(locals,attrs,escape,rethrow,merge){function date_sort(a,b){return b.timestamp>a.timestamp?-1:1}attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp,twitter_action_mixin=function(a,b,c,d){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:a,"data-toggle":"tooltip",title:b,"class":"action"},{onclick:!0,"data-toggle":!0,title:!0})),buf.push(">"),d?(buf.push("<img"),buf.push(attrs({src:d,"class":c},{src:!0,"class":!0})),buf.push("/>")):(buf.push("<i"),buf.push(attrs({"class":c},{"class":!0})),buf.push("></i>")),buf.push("</a>")},crowdchat_action_mixin=function(a,b,c){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:a,"data-toggle":"tooltip",title:b,"class":"action"},{onclick:!0,"data-toggle":!0,title:!0})),buf.push(">");var d=c;buf.push(null==d?"":d),buf.push("</a>")},bootstroShownInVotePost=!1,votes_mixin=function(a,b,c){this.block,this.attributes||{},this.escaped||{};if(buf.push("<span"),buf.push(attrs({id:b.id+"-votediv"},{id:!0})),buf.push(">"),"post"==a){var d=b.votes;b.posts&&b.posts.forEach(function(a){d+=a.votes,a.posts&&a.posts.forEach(function(a){d+=a.votes})});var e=d;c&&-1!=b.vote_users.indexOf(c.key)?bootstroShownInVotePost?(buf.push("<span"),buf.push(attrs({onclick:'unvote("'+b.id+'")',"class":"vote-post pull-right"},{onclick:!0})),buf.push("><span"),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+'</span><a data-toggle="tooltip" title="Undo Vote"><i class="fa fa-check center-block"></i></a></span>')):(bootstroShownInVotePost=!0,buf.push("<span"),buf.push(attrs({onclick:'unvote("'+b.id+'")',"data-bootstro-step":"5","data-bootstro-title":"","data-bootstro-content":"Vote for a post. The content is arranged in order of votes.","data-bootstro-placement":"top","class":"vote-post pull-right bootstro"},{onclick:!0,"data-bootstro-step":!0,"data-bootstro-title":!0,"data-bootstro-content":!0,"data-bootstro-placement":!0})),buf.push("><span"),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+'</span><a data-toggle="tooltip" title="Undo Vote"><i class="fa fa-check center-block"></i></a></span>')):bootstroShownInVotePost?(buf.push("<span"),buf.push(attrs({onclick:'upvote("'+b.id+'")',"class":"vote-post pull-right"},{onclick:!0})),buf.push('><a data-toggle="tooltip" title="Vote"><i class="fa fa-arrow-up center-block"></i></a><span'),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+"</span></span>")):(bootstroShownInVotePost=!0,buf.push("<span"),buf.push(attrs({onclick:'upvote("'+b.id+'")',"data-bootstro-step":"5","data-bootstro-title":"","data-bootstro-content":"Vote for a post. The content is arranged in order of votes.","data-bootstro-placement":"top","class":"vote-post pull-right bootstro"},{onclick:!0,"data-bootstro-step":!0,"data-bootstro-title":!0,"data-bootstro-content":!0,"data-bootstro-placement":!0})),buf.push('><a data-toggle="tooltip" title="Vote"><i class="fa fa-arrow-up center-block"></i></a><span'),buf.push(attrs({id:b.id+"a-votes"},{id:!0})),buf.push(">"+escape(null==(interp=e)?"":interp)+"</span></span>")),buf.push("<script>$('#"+escape(null==(interp=b.id)?"":interp)+"-votes').text(getRepString('"+escape(null==(interp=b.votes)?"":interp)+"'))</script>")}else"post b"==a?(buf.push("<span"),buf.push(attrs({id:b.id+"-votes","class":"textVotes"},{id:!0})),buf.push(">"+escape(null==(interp=b.votes)?"":interp)+"</span> Votes"),actions_mixin(b,c,!0)):(buf.push("<span"),buf.push(attrs({id:b.id+"-votes","class":"textVotes"},{id:!0})),buf.push(">"+escape(null==(interp=b.votes)?"":interp)+"</span> Votes"),actions_mixin(b,c));buf.push("</span>")},twitterActions_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push('<span style="margin-left:5px" class="networkIcon"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Sent To Twitter",href:"http://www.twitter.com/"+a.author_twitter_handle+"/status/"+a.tweet_id},{"data-toggle":!0,title:!0,href:!0})),buf.push('><i class="fa fa-twitter cc-twit clr-twit-blue"></i></a></span>'),"twitter"==b.type){var c=", '"+a.id+"','"+a.tweet_id+"')";if(b&&-1!=a.fav_users.indexOf(b.key)){var d="twitter_fav fa fa-star clr-gold cc-twit action";twitter_action_mixin("chatAction('unfav'"+c,"Twitter Undo Favorite",d)}else{var e="twitter_unfav fa fa-star-o clr-grey cc-twit action";twitter_action_mixin("chatAction('fav'"+c,"Twitter Favorite",e)}if(!b||a.author_twitter_handle!=b.screen_name){if(b&&-1!=a.retweet_users.indexOf(b.key)){var f=a.retweet_ids[a.retweet_users.indexOf(b.key)],g="twitter_unretweet fa fa-retweet clr-green cc-twit action";twitter_action_mixin("chatAction('unretweet', \""+a.id+'","'+f+'")',"Twitter Undo Retweet",g)}else{var h="twitter_retweet fa fa-retweet clr-grey cc-twit action";twitter_action_mixin("chatAction('retweet'"+c,"Twitter Retweet",h)}if(a.raw){var i=a.raw.replace(/(\r\n|\r|\n)/gm,"").replace(/\s+/g," ").replace(/<(?:.|\n)*?>/gm,""),j=encodeURIComponent("RT @"+a.author+" "+i);buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Modified Tweet",href:"https://twitter.com/intent/tweet?text="+j},{"data-toggle":!0,title:!0,href:!0})),buf.push(">MT</a>")}}}},linkedinActions_mixin=function(a){this.block,this.attributes||{},this.escaped||{};buf.push('<span style="margin-left:5px" class="networkIcon"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Sent To LinkedIn",href:a.share_url},{"data-toggle":!0,title:!0,href:!0})),buf.push('><i class="fa fa-linkedin-square fa-lg clr-lnkdin action"></i></a></span>')},facebookActions_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};buf.push('<span style="margin-left:5px" class="networkIcon"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Sent To Facebook",href:a.fbpost_url},{"data-toggle":!0,title:!0,href:!0})),buf.push('><i class="fa fa-facebook-square fa-lg clr-fb action"></i></a></span>'),"facebook"==b.type&&(!b||!a.like_users||a.like_users&&-1==a.like_users.indexOf(b.key)?twitter_action_mixin('likeUnlikePost("likeFBPost","'+a.id+'","'+a.fbpost_id+'")',"Like On Facebook","facebook-like fb-logo","/img/facebook/like.png"):twitter_action_mixin('likeUnlikePost("unlikeFBPost","'+a.id+'","'+a.fbpost_id+'")',"Unlike On Facebook","facebook-unlike fb-logo","/img/facebook/unlike.png"),!b||!a.fbShare_users||a.fbShare_users&&-1==a.fbShare_users.indexOf(b.key)?crowdchat_action_mixin('sharePost("'+a.id+'","'+a.fbpost_url+'")',"Share On Facebook","Share"):buf.push('<a onclick="return;" data-toggle="tooltip" title="Shared on Facebook" class="action disabled-action">Shared</a>'))},actions_mixin=function(a,b,c){this.block,this.attributes||{},this.escaped||{};buf.push('<span class="spacer">&nbsp;</span>');var d="actions";c&&(d=""),buf.push("<span"),buf.push(attrs({"class":d},{"class":!0})),buf.push(">"),b&&-1!=a.vote_users.indexOf(b.key)?crowdchat_action_mixin('unvote("'+a.id+'")',"Undo Vote","Undo Vote"):crowdchat_action_mixin('upvote("'+a.id+'")',"Vote","Vote"),ended||crowdchat_action_mixin('commentReply("'+a.id+'")',"Reply","Reply"),a.tweet_id&&twitterActions_mixin(a,b),a.share_url&&linkedinActions_mixin(a,b),a.fbpost_url&&facebookActions_mixin(a,b),"post"==a.post_type&&(buf.push('<span style="margin-left:5px" class="networkIcon"></span><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Permalink","data-copy":"/post/"+a.id.split("_")[1],onclick:"cp(this)"},{"data-toggle":!0,title:!0,"data-copy":!0,onclick:!0})),buf.push('><i class="fa fa-link fa-lg"></i></a>')),a.timestamp&&(buf.push("<a"),buf.push(attrs({"data-toggle":"tooltip",title:"Permalink","data-copy":"/post/"+a.id.split("_")[1],onclick:"cp(this)",timestamp:a.timestamp,"class":"timestamp"},{"data-toggle":!0,title:!0,"data-copy":!0,onclick:!0,timestamp:!0})),buf.push("></a>")),b&&a.author_key==b.key&&0==a.posts.length&&0==a.votes&&!ended&&(buf.push('<span class="pull-right"><a'),buf.push(attrs({"data-toggle":"tooltip",title:"Delete Post",onclick:'deletePost("'+a.id+'")',"class":"delete_btn"},{"data-toggle":!0,title:!0,onclick:!0})),buf.push(">Delete</a></span>")),buf.push("</span>")},replyblock_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push("<div"),buf.push(attrs({id:a.id+"_replyblock","class":"reply_pane"},{id:!0})),buf.push('><div class="reply_container"><a'),buf.push(attrs({onclick:"oUser('"+b.key+"')","class":"pull-left"},{onclick:!0})),buf.push(">"),src=b.picture_url?-1!=b.picture_url.indexOf("http:")?"/img/Unknown-person.gif":b.picture_url:"/img/Unknown-person.gif",buf.push("<img"),buf.push(attrs({src:src,"class":"comment_logo"},{src:!0,"class":!0})),buf.push('/></a><div style="padding-left:7px" class="col-xs-9 col-sm-8 col-md-8 col-lg-9">'),"twitter"==a.author_type){{a.external_content_author||a.author_twitter_handle}buf.push('<textarea maxlength="256" placeholder="Use @ to reply" ondrop="reply_drop(event)" ondragover="allowDrop(event)" class="newc reply_box"></textarea>')}else("linkedin"==a.author_type||"facebook"==a.author_type)&&(buf.push("<textarea"),buf.push(attrs({maxlength:"256",placeholder:"Reply to "+a.author_display_name,ondrop:"reply_drop(event)",ondragover:"allowDrop(event)","class":"newc reply_box"},{maxlength:!0,placeholder:!0,ondrop:!0,ondragover:!0})),buf.push("></textarea>"));buf.push('<div class="cues pull-left">Press Enter/Return to post</div></div><div class="checkbox tweet_box col-xs-12 col-sm-2 col-md-2 col-lg-2"><div style="margin-top:2px" class="pull-right">'),""!=b&&("twitter"==b.type?(buf.push("unchecked"==b.preference?'<input type="checkbox" id="ctweet" value="value" class="tweet_checkbox"/>':'<input type="checkbox" id="ctweet" value="value" checked="checked" class="tweet_checkbox"/>'),buf.push('<span class="update_text">Twitter</span>')):"linkedin"==b.type?(buf.push("unchecked"==b.preference?'<input type="checkbox" id="share" value="value" class="share_checkbox"/>':'<input type="checkbox" id="share" value="value" checked="checked" class="share_checkbox"/>'),buf.push('<span class="update_text">LinkedIn</span>')):"facebook"==b.type&&(buf.push("unchecked"==b.preference?'<input type="checkbox" id="fbpost" value="value" class="fbpost_checkbox"/>':'<input type="checkbox" id="fbpost" value="value" checked="checked" class="fbpost_checkbox"/>'),buf.push('<span class="update_text">Facebook</span>'))),buf.push('<span id="remainC" class="update_text remain">256</span></div></div></div><div id="extCnPrw" class="extCnPrw"></div></div>')},author_mixin=function(a){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:"oUser('"+a.author_key+"')"},{onclick:!0})),buf.push(">"+escape(null==(interp=a.author_display_name)?"":interp)+"</a><input"),buf.push(attrs({type:"hidden",id:"post",value:a.id},{type:!0,id:!0,value:!0})),buf.push("/><input"),buf.push(attrs({type:"hidden",id:"author",value:"twitter"==a.author_type?"@"+(a.external_content_author||a.author_twitter_handle)+" ":" ","class":"hidaut"},{type:!0,id:!0,value:!0})),buf.push("/>")},author_pic_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};buf.push("<a"),buf.push(attrs({onclick:"oUser('"+a.author_key+"')","class":"pull-left"},{onclick:!0})),buf.push(">"),src=a.author_picture_url&&-1!=a.author_picture_url.indexOf("http:")?"/img/Unknown-person.gif":a.author_picture_url,buf.push("<img"),buf.push(attrs({src:src,"class":b},{src:!0,"class":!0})),buf.push("/></a>")},reply_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push("<div"),buf.push(attrs({id:a.id,"class":"reply"},{id:!0})),buf.push('><input type="hidden" id="post_type" value="reply"/>'),author_pic_mixin(a,"reply_logo"),buf.push('<div class="reply_content">'),author_mixin(a),!a.hidePost&&a&&a.post){var c=" "+a.post.replace(/\n/g,"<br/>").replace(/$@.+\s/,"").trim();buf.push(null==c?"":c)}a.external_content&&a.external_content.length>0&&(buf.push('<div class="external_content"></div>'),function(){if("number"==typeof a.external_content.length)for(var b=0,c=a.external_content.length;c>b;b++){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}else for(var b in a.external_content){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}}.call(this)),buf.push('<div class="meta">'),votes_mixin("comment",a,b),buf.push("</div></div></div>")},comment_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push('<div class="wideCommentBox"><div class="collapseButton"><a'),buf.push(attrs({onclick:"hideComments("+a.id+")",title:"Hide Comments",style:"color:black;text-decoration:none"},{onclick:!0,title:!0,style:!0})),buf.push(">[-]</a></div><div"),buf.push(attrs({id:a.id,"class":"comment"},{id:!0})),buf.push('><input type="hidden" id="post_type" value="comment"/>'),author_pic_mixin(a,"comment_logo"),buf.push('<div class="comment_content">'),author_mixin(a),!a.hidePost&&a&&a.post){var c=" "+a.post.replace(/\n/g,"<br/>").trim();buf.push(null==c?"":c)}a.external_content&&a.external_content.length>0&&(buf.push('<div class="external_content">'),function(){if("number"==typeof a.external_content.length)for(var b=0,c=a.external_content.length;c>b;b++){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')
}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}else for(var b in a.external_content){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}}.call(this),buf.push("</div>")),buf.push('<div class="meta">'),votes_mixin("comment",a,b),buf.push("</div>"),a.posts&&a.posts.length>0&&a.posts.length>0&&(buf.push('<div class="comment_replies">'),replies_mixin(a.posts,b),buf.push("</div>")),buf.push("</div></div></div>")},bootstroShownInPost=!1,post_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};if(buf.push("<div"),buf.push(attrs({id:a.id,"class":"post"},{id:!0})),buf.push('><input type="hidden" id="post_type" value="post"/>'),author_pic_mixin(a,"post_logo"),buf.push('<div class="post_content">'),author_mixin(a),votes_mixin("post",a,b),!a.hidePost&&a.post){buf.push('<div class="post-text">');var c=a.post.replace(/\n/g,"<br/>");buf.push(null==c?"":c),buf.push("</div>")}a.external_content&&a.external_content.length>0&&(buf.push('<div class="external_content">'),function(){if("number"==typeof a.external_content.length)for(var b=0,c=a.external_content.length;c>b;b++){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}else for(var b in a.external_content){var d=a.external_content[b];if(d.content&&-1==d.content.indexOf('href="undefined"'))if("tweet"==d.type){buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>"),d.created_date&&buf.push("<script>var time_string = moment( '"+escape(null==(interp=d.created_date)?"":interp)+"' ).fromNow();\n$(\"#\" + '"+escape(null==(interp=a.id)?"":interp)+'\' + " .external_content:first .tweet_content:first .tweet_timestamp .timestamp").html(time_string);</script>')}else{buf.push('<div class="tweet">');var e=d.content;buf.push(null==e?"":e),buf.push("</div>")}}}.call(this),buf.push("</div>")),buf.push('<div class="meta">'),votes_mixin("post b",a,b),buf.push("</div>"),a.posts&&(buf.push('<div class="showCommentsButton"><a onclick="showComments(this)">[+] Show Hidden Comments</a></div><div class="post_comments">'),comments_mixin(a.posts,b),buf.push("</div>")),buf.push('<div class="post_comments">'),ended||(buf.push('<div class="comment">'),bootstroShownInPost?replyblock_mixin(a,b):(bootstroShownInPost=!0,buf.push('<div data-bootstro-step="4" data-bootstro-title="Reply" data-bootstro-content="Reply to other posts" class="bootstro">'),replyblock_mixin(a,b),buf.push("</div>")),buf.push("</div>")),buf.push("</div></div></div>")},replies_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};a.sort(date_sort),function(){if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];reply_mixin(e,b)}else for(var c in a){var e=a[c];reply_mixin(e,b)}}.call(this)},comments_mixin=function(a,b){this.block,this.attributes||{},this.escaped||{};a.sort(date_sort),a.length>0&&(buf.push('<div class="comment_bubble"></div>'),function(){if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];comment_mixin(e,b)}else for(var c in a){var e=a[c];comment_mixin(e,b)}}.call(this))},clockDrift=clockDrift||0,curtime=new Date((new Date).getTime()+clockDrift),endtime=new Date(datetime+duration),ended=curtime>endtime||"dead"==locals.state;locals.post&&locals.post_type&&"post"==post_type&&(locals.justVote?votes_mixin("post",post,locals.user_info):locals.user_info?post_mixin(post,user_info,ended):post_mixin(post,"",ended)),locals.post&&locals.post_type&&"post p"==post_type&&locals.justVote&&votes_mixin("post b",post,locals.user_info),locals.post&&locals.post_type&&"comment"==post_type&&(locals.justVote?votes_mixin("comment",post,locals.user_info):locals.user_info?comment_mixin(post,user_info,ended):comment_mixin(post,"",ended)),locals.post&&locals.post_type&&"reply"==post_type&&(locals.justVote?votes_mixin("comment",post,locals.user_info):locals.user_info?reply_mixin(post,user_info,ended):reply_mixin(post,"",ended))}return buf.join("")};