<!DOCTYPE html>
<html class="wf-proximanova-i4-active wf-proximanova-n1-active wf-proximanova-n3-active wf-proximanova-n4-active wf-proximanova-n6-active wf-proximanova-n7-active wf-active m-pikabu-transitions m-pikabu-translate3d"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Understanding the Nginx Configuration File Structure and Configuration Contexts | DigitalOcean</title>

<meta name="description" content="Nginx is one of the most popular web servers in the world, focused on performance and scalability. In this guide, we will explore the Nginx configuration file structure and discuss the configuration 'contexts' that Nginx uses to logically separate dif">
<meta name="keywords" content="Miscellaneous Nginx">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="DigitalOcean">
<meta name="twitter:creator" content="DigitalOcean">
<meta name="twitter:title" content="Understanding the Nginx Configuration File Structure and Configuration Contexts | DigitalOcean">
<meta name="twitter:description" content="Nginx is one of the most popular web servers in the world, focused on performance and scalability. In this guide, we will explore the Nginx configuration file structure and discuss the configuration 'contexts' that Nginx uses to logically separate dif">

<meta name="og:title" content="Understanding the Nginx Configuration File Structure and Configuration Contexts | DigitalOcean">
<meta name="og:description" content="Nginx is one of the most popular web servers in the world, focused on performance and scalability. In this guide, we will explore the Nginx configuration file structure and discuss the configuration 'contexts' that Nginx uses to logically separate dif">
<meta name="og:site_name" content="DigitalOcean">
<meta name="og:type" content="article">
<meta property="og:image" content="https://www.digitalocean.com/assets/community/tags/nginx-bf8fd79b6bbf881889132cd11ed1e5fa.png">

    <link href="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/application-6204a128101f3f454338433428043c13.css" media="all" rel="stylesheet">
    <meta content="authenticity_token" name="csrf-param">
<meta content="OUl7EDh+tS+sptwIHr3GHt+Y9ySuszclXtwwH8DqfLI=" name="csrf-token">
    <script type="text/javascript" async="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/quant.js"></script><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/conversion_async.js" async="" type="text/javascript"></script><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/roundtrip.js" async="" type="text/javascript"></script><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/analytics_002.js" async="" type="text/javascript"></script><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/analytics_002.js" async="" type="text/javascript"></script><script id="cio-tracker" data-site-id="e7cc779295927747a7c2" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/track.js" async="" type="text/javascript"></script><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/gtm.js" async=""></script><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/analytics.js" async="" type="text/javascript"></script><script type="text/javascript" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/njm7orv.js"></script>
    <style type="text/css">.tk-proxima-nova{font-family:"proxima-nova",sans-serif;}</style><link href="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/d.css" rel="stylesheet"><script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/701281621.js"></script>
    <script type="text/javascript">
      if(window.analytics=window.analytics||[],window.analytics.included)window.console&&console.error&&console.error("analytics.js included twice");else{window.analytics.included=!0,window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(a){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(a),window.analytics.push(n),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(a){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+a+"/analytics.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)},window.analytics.SNIPPET_VERSION="2.0.9",
      window.analytics.load("puo3uv968t")}
      window.analytics.page();
    </script>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/application-acef81ba4eadb6d163653e34553438fd.js"></script>
  <style>
.m-pikabu-sidebar, 
.m-pikabu-container {
-webkit-transition: -webkit-transform 0.2s ease-in;
-moz-transition: -moz-transform 0.2s ease-in;
-ms-transition: -ms-transform 0.2s ease-in;
-o-transition: -o-transform 0.2s ease-in;
transition: transform 0.2s ease-in;
}
.m-pikabu-left-visible .m-pikabu-left {
	width: 255px;
}
.m-pikabu-right-visible .m-pikabu-right {
	width: 255px;
}</style><script src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/4IDGVTPEAFC4TM2QKYNQ53" type="text/javascript" async="true"></script><div style="width: 1px; height: 1px; display: inline;"><img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_006.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_007.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_003.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_004.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_002.gif" height="1" width="1">
<img alt="" style="display:none" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/tr_002.gif" height="1" width="1"><img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/a.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_005.gif" height="1" width="1">
<img src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/seg_002.gif" height="1" width="1">
<img alt="" style="display:none" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/tr.gif" height="1" width="1"><img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/a_002.gif" height="1" width="1">
<img style="border-style:none;" alt="" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/out_005.gif" height="1" width="1">
<img src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/seg.gif" height="1" width="1">
</div></head>
  <body class="tutorials-controller" data-env="production">
    <script>
//<![CDATA[

    $(function() {
      dataLayer = [$.parseJSON('{\"user_id\":\"\",\"is_community_page\":true,\"content_type\":\"tutorial\",\"author\":\"Justin Ellingwood\",\"difficulty\":\"intermediate\",\"created_at\":\"2014-11-18T21:09:21.375Z\",\"published_at\":\"2014-11-19T17:19:07.190Z\",\"updated_at\":\"2014-11-19T17:19:07.140Z\",\"article_tags\":\"Miscellaneous, Nginx\"}')];
    });

//]]>
</script>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-KHWBBT"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KHWBBT');</script>
<!-- End Google Tag Manager -->
    

    <div class="outside_viewport">
        <div style="top: 467px; display: block;" id="table-of-contents" class="hide-on-pikabu tocify absolute">
  <div id="toc-trigger">
    <a href="#">
      <div class="title">Contents
      	<span class="icon">
      		<span class="close icon-arrow-up"></span>
      		<span class="open icon-arrow-down"></span>
      	</span>
      </div>
    </a>
  </div>
<ul style="display: none;" class="tocify-header" id="tocify-header0"><li data-unique="understanding-nginx-configuration-contexts" class="tocify-item tocify-focus"><a>Understanding Nginx Configuration Contexts</a></li></ul><ul style="display: none;" class="tocify-header" id="tocify-header1"><li data-unique="the-core-contexts" class="tocify-item"><a>The Core Contexts</a></li></ul><ul style="display: none;" class="tocify-header" id="tocify-header2"><li data-unique="other-contexts" class="tocify-item"><a>Other Contexts</a></li></ul><ul style="display: none;" class="tocify-header" id="tocify-header3"><li data-unique="general-rules-to-follow-regarding-contexts" class="tocify-item"><a>General Rules to Follow Regarding Contexts</a></li></ul><ul style="display: none;" class="tocify-header" id="tocify-header4"><li data-unique="conclusion" class="tocify-item"><a>Conclusion</a></li></ul></div>


    </div>

    <div style="width: auto;" class="m-pikabu-viewport">
      <div class="mobile-nav">
  <div class="m-pikabu-sidebar m-pikabu-left m-pikabu-hidden">
    
<div class="account-buttons">
    <div id="entrance">
      <a class="button" href="https://www.digitalocean.com/community/auth/digitalocean?display=sessionless+register" id="sign-up">Sign Up</a>
      <a class="button" href="https://www.digitalocean.com/community/auth/digitalocean" id="log-in">Log In</a>
    </div>
</div>
      
    <a class="close-panel icon-close" href="javascript:void(0);"></a>

    <form accept-charset="UTF-8" action="/community/search" id="search" method="get"><div style="display:none"><input name="utf8" value="✓" type="hidden"></div>
      <input id="query" name="query" placeholder="Search the community" type="text">

      <button class="icon-btn" name="button" type="submit">
        <span class="icon-arrow-down"></span>
</button></form>
    <nav>
  <ul>
    <li><a href="https://www.digitalocean.com/community/tutorials">Tutorials</a></li>
    <li><a href="https://www.digitalocean.com/community/questions">Questions</a></li>
    <li><a href="https://www.digitalocean.com/community/projects">Projects</a></li>
    <li><a href="https://www.digitalocean.com/community/tags">Tags</a></li>
    <li class="mobile-nav-only"><a href="https://www.digitalocean.com/">Main Site</a></li>
  </ul>
</nav>

    
  </div>
</div>

      <div class="m-pikabu-container"><div class="m-pikabu-overlay"></div>
        
      	<header>
  <div class="wrapper">
    <a class="logo" href="https://www.digitalocean.com/community"></a>
    
    <a class="m-pikabu-nav-toggle icon-navicon" data-role="left">
      <span>Menu</span>
    </a>

    <nav>
  <ul>
    <li><a href="https://www.digitalocean.com/community/tutorials">Tutorials</a></li>
    <li><a href="https://www.digitalocean.com/community/questions">Questions</a></li>
    <li><a href="https://www.digitalocean.com/community/projects">Projects</a></li>
    <li><a href="https://www.digitalocean.com/community/tags">Tags</a></li>
    <li class="mobile-nav-only"><a href="https://www.digitalocean.com/">Main Site</a></li>
  </ul>
</nav>

    
    
<div class="account-buttons">
    <div id="entrance">
      <a class="button" href="https://www.digitalocean.com/community/auth/digitalocean?display=sessionless+register" id="sign-up">Sign Up</a>
      <a class="button" href="https://www.digitalocean.com/community/auth/digitalocean" id="log-in">Log In</a>
    </div>
</div>
    <div class="header-search">
  <input autocomplete="off" class="header-search-input" data-algolia-api-key="c5470567eae7fa1177d43222e18ba086" data-algolia-application-id="6ZHEUVKJ88" id="query" name="query" placeholder="Search the community" spellcheck="off" type="text">
  <input id="dropdown" name="dropdown" value="true" type="hidden">
  <button class="icon-btn" name="button" type="submit">
    <span class="icon-arrow-down"></span>
</button>
  <div id="search-results" data-root-path="https://www.digitalocean.com/community">
  <div id="search-result-count">
    <div class="inner-search">
      <span class="icon icon-mag"></span>
      <h3>There are <span class="header-results-count"></span> Results for ‘<span class="results-query"></span>’</h3>
    </div>
  </div>

  <div class="header-search-results-list"></div>

  <div id="btn-wrap">
    <a class="more-search-results" data-search-path="/community/search" href="https://www.digitalocean.com/community/search">
      <span class="icon-mag"></span>
      View All Results
</a>  </div>
</div>

<script type="text/template" id="autocomplete-hits-template">
  <div class="search-result" id="search-{{type}}">
    <div class="inner-search">
      <span class="icon icon-{{type}}"></span>
      <ul>
          {{#hits}}
            <li>
              <a href="{{url}}">{{{_highlightResult.title.value}}}</a>
            </li>
          {{/hits}}
      </ul>
    </div>
  </div>
</script>
</div>
  </div>
</header>
        

        <div class="wrapper tutorial-single">
          <div class="flash-container"></div>
          





<div class="section section-primary">
  <div class="sidebar main-sidebar" data-sticky-sidebar="" data-sticky-content=".section-content">

      <p class="sidebar-avatar">
        <a href="https://www.digitalocean.com/community/users/jellingwood"><img alt="jellingwood" class="avatar avatar-large" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/60d901f61a6146e14a3e989bc1f4ef11.png" height="80" width="80"></a>
      </p>

      <p class="sidebar-author">
        <a href="https://www.digitalocean.com/community/users/jellingwood">Justin Ellingwood</a>
      </p>
      

    
    <p class="sidebar-date">
        November 19, 2014
    </p>


    <div class="upvotes upvoted"><div class="upvote-count ">15</div><form accept-charset="UTF-8" action="/community/upvotes/toggle?upvote%5Bupvotable_id%5D=1382&amp;upvote%5Bupvotable_type%5D=Tutorial" class="upvote-form upvote signed-out-upvote" data-remote="true" data-upvotable-type="tutorial" data-upvotable="tutorial_1382" method="post"><div style="display:none"><input name="utf8" value="✓" type="hidden"><input name="_method" value="patch" type="hidden"><input name="authenticity_token" value="OUl7EDh+tS+sptwIHr3GHt+Y9ySuszclXtwwH8DqfLI=" type="hidden"></div>
    <button type="submit" disabled="disabled" data-toggle="modal" data-target="#sign-in-modal"><span class="icon-upvote-heart-small upvote-heart" data-toggle="modal" data-target="#sign-in-modal" data-return-url="" title="Do you find this post helpful? Show the author by Hearting it!"></span></button>

</form></div>

    <span class="meta-section opt-in-switch off signed-out-subscribe">
  <span class="meta-label subscribe-label">
    <span class="subscribe">Subscribe</span>
    <span class="subscribed">Subscribed</span>
  </span>
  <span class="meta-value"><a class="mini-switch-container" data-target="#sign-in-modal" data-toggle="modal" href="javascript:void(0);"><div class="mini-switch off signed-out-subscribe"><div class="switch-handle"></div></div></a></span>
</span>

    <span class="meta-section">
      <span class="meta-label">Difficulty</span>
      <span class="meta-value">Intermediate</span>
    </span>
    
    

    <div class="sidebar-button">
    </div>

  </div>

  <div class="section-content content">

    <ul class="social-sharing">
  <li class="shareBtn sbMain">
    <a class="share" href="#">
      <span class="icon icon-share-square"></span>  
    </a>
  </li>
  
  <li class="shareBtn" id="sbTwitter">
    <a href="http://twitter.com/share?text=Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts&amp;url=https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts" target="_blank" title="Share on Twitter">
      <span class="sIcon icon-bird"></span>  
      TWEET
    </a>
  </li>

  <li class="shareBtn" id="sbFacebook">
    <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts" target="_blank" title="Share on Facebook">
      <span class="sIcon icon-facebook-B"></span>
      SHARE
    </a>
  </li>
  <li class="shareBtn" id="sbGoogle">
    <a href="https://plus.google.com/share?url=https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts" target="_blank" title="Share on Google+">
      <span class="sIcon icon-google-plus-B"></span>  
      SHARE
    </a>
  </li>
  <li class="shareBtn" id="sbYC">
    <a href="https://news.ycombinator.com/submitlink?u=https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts&amp;t=Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts" target="_blank" title="Submit to Hacker News">
      <span class="sIcon icon-hacker-news"></span>  
      SHARE
    </a>
  </li>
</ul>
    <h1 class="content-title">Understanding the Nginx Configuration File Structure and Configuration Contexts</h1>

    <div class="tut-meta">
      <div class="feedable-info">
          <span class="meta-section meta-author">
            <span class="meta-label">Author:</span>
            <span class="meta-value"><a href="https://www.digitalocean.com/community/users/jellingwood">Justin Ellingwood</a></span>
            <span class="meta-separator">•</span>
          </span>

        <span class="meta-section meta-date">
            <span class="meta-label">Date:</span>
            <span class="meta-value">November 19, 2014</span>
        </span>


        <br>

          <span class="meta-section opt-in-switch off signed-out-subscribe">
  <span class="meta-label subscribe-label">
    <span class="subscribe">Subscribe</span>
    <span class="subscribed">Subscribed</span>
  </span>
  <span class="meta-value"><a class="mini-switch-container" data-target="#sign-in-modal" data-toggle="modal" href="javascript:void(0);"><div class="mini-switch off signed-out-subscribe"><div class="switch-handle"></div></div></a></span>
</span>

          <span class="meta-section">
            <span class="meta-label">Tagged In: </span>
            <span class="meta-value"><a class="" href="https://www.digitalocean.com/community/tags/miscellaneous?primary_filter=tutorials">Miscellaneous</a>, <a class="" href="https://www.digitalocean.com/community/tags/nginx?primary_filter=tutorials">Nginx</a></span>
            <span class="meta-separator">•</span>
          </span>

          <span class="meta-section">
            <span class="meta-label">Difficulty: </span>
            <span class="meta-value">Intermediate</span>
          </span>

      </div>
    </div>

    

    

    <div class="content-body tutorial-content">
      <h3 id="introduction">Introduction</h3>

<p>Nginx is a high performance web server that is responsible for 
handling the load of some of the largest sites on the internet.  It is 
especially good at handling many concurrent connections and excels at 
serving static content.</p>

<p>While many users are aware of Nginx's capabilities, new users are 
often confused by some of the conventions they find in Nginx 
configuration files.  In this guide, we will focus on discussing the 
basic structure of an Nginx configuration file along with some 
guidelines on how to design your files.</p>

<div data-unique="understanding-nginx-configuration-contexts" name="understanding-nginx-configuration-contexts"></div><h2 id="understanding-nginx-configuration-contexts">Understanding Nginx Configuration Contexts</h2>

<p>This guide will cover the basic structure found in the main Nginx 
configuration file.  The location of this file will vary depending on 
how you installed the software on your machine.  For many distributions,
 the file will be located at <code>/etc/nginx/nginx.conf</code>.  If it does not exist there, it may also be at <code>/usr/local/nginx/conf/nginx.conf</code> or <code>/usr/local/etc/nginx/nginx.conf</code>.</p>

<p>One of the first things that you should notice when looking at the 
main configuration file is that it appears to be organized in a 
tree-like structure, defined by sets of brackets (that look like <code>{</code> and <code>}</code>).
  In Nginx parlance, the areas that these brackets define are called 
"contexts" because they contain configuration details that are separated
 according to their area of concern.  Basically, these divisions provide
 an organizational structure along with some conditional logic to decide
 whether to apply the configurations within.</p>

<p>Because contexts can be layered within one another, Nginx provides a 
level of directive inheritance.  As a general rule, if a directive is 
valid in multiple nested scopes, a declaration in a broader context will
 be passed on to any child contexts as default values.  The children 
contexts can override these values at will.  It is worth noting that an 
override to any array-type directives will <em>replace</em> the previous value, not append to it.</p>

<p>Directives can only be used in the contexts that they were designed 
for.  Nginx will error out on reading a configuration file with 
directives that are declared in the wrong context.  The <a href="http://nginx.org/en/docs/dirindex.html">Nginx documentation</a> contains information about which contexts each directive is valid in, so it is a great reference if you are unsure.</p>

<p>Below, we'll discuss the most common contexts that you're likely to come across when working with Nginx.</p>

<div data-unique="the-core-contexts" name="the-core-contexts"></div><h2 id="the-core-contexts">The Core Contexts</h2>

<p>The first group of contexts that we will discuss are the core 
contexts that Nginx utilizes in order to create a hierarchical tree and 
separate the concerns of discrete configuration blocks.  These are the 
contexts that comprise the major structure of an Nginx configuration.</p>

<h3 id="the-main-context">The Main Context</h3>

<p>The most general context is the "main" or "global" context.  It is 
the only context that is not contained within the typical context blocks
 that look like this:</p>
<pre><code langs=""># The main context is here, outside any other contexts

. . .

<span class="highlight">context</span> {

    . . .

}
</code></pre>
<p>Any directive that exist entirely outside of these blocks is said to 
inhabit the "main" context.  Keep in mind that if your Nginx 
configuration is set up in a modular fashion, some files will contain 
instructions that appear to exist outside of a bracketed context, but 
which will be included within such a context when the configuration is 
stitched together.</p>

<p>The main context represents the broadest environment for Nginx 
configuration.  It is used to configure details that affect the entire 
application on a basic level.  While the directives in this section 
affect the lower contexts, many of these aren't <em>inherited</em> because they cannot be overridden in lower levels.</p>

<p>Some common details that are configured in the main context are the 
user and group to run the worker processes as, the number of workers, 
and the file to save the main process's PID.  You can even define things
 like worker CPU affinity and the "niceness" of worker processes.  The 
default error file for the entire application can be set at this level 
(this can be overridden in more specific contexts).</p>

<h3 id="the-events-context">The Events Context</h3>

<p>The "events" context is contained within the "main" context.  It is 
used to set global options that affect how Nginx handles connections at a
 general level.  There can only be a single events context defined 
within the Nginx configuration.</p>

<p>This context will look like this in the configuration file, outside of any other bracketed contexts:</p>
<pre><code langs=""># main context

events {

    # events context
    . . .

}
</code></pre>
<p>Nginx uses an event-based connection processing model, so the 
directives defined within this context determine how worker processes 
should handle connections.  Mainly, directives found here are used to 
either select the connection processing technique to use, or to modify 
the way these methods are implemented.</p>

<p>Usually, the connection processing method is automatically selected 
based on the most efficient choice that the platform has available.  For
 Linux systems, the <code>epoll</code> method is usually the best choice. </p>

<p>Other items that can be configured are the number of connections each
 worker can handle, whether a worker will only take a single connection 
at a time or take all pending connections after being notified about a 
pending connection, and whether workers will take turns responding to 
events.</p>

<h3 id="the-http-context">The HTTP Context</h3>

<p>When configuring Nginx as a web server or reverse proxy, the "http" 
context will hold the majority of the configuration.  This context will 
contain all of the directives and other contexts necessary to define how
 the program will handle HTTP or HTTPS connections.</p>

<p>The http context is a sibling of the events context, so they should 
be listed side-by-side, rather than nested.  They both are children of 
the main context:</p>
<pre><code langs=""># main context

events {
    # events context

    . . .

}

http {
    # main context

    . . .

}
</code></pre>
<p>While lower contexts get more specific about how to handle requests, 
directives at this level control the defaults for every virtual server 
defined within.  A large number of directives are configurable at this 
context and below, depending on how you would like the inheritance to 
function.</p>

<p>Some of the directives that you are likely to encounter control the default locations for access and error logs (<code>access_log</code> and <code>error_log</code>), configure asynchronous I/O for file operations (<code>aio</code>, <code>sendfile</code>, and <code>directio</code>), and configure the server's statuses when errors occur (<code>error_page</code>).  Other directives configure compression (<code>gzip</code> and <code>gzip_disable</code>), fine-tune the TCP keep alive settings (<code>keepalive_disable</code>, <code>keepalive_requests</code>, and <code>keepalive_timeout</code>), and the rules that Nginx will follow to try to optimize packets and system calls (<code>sendfile</code>, <code>tcp_nodelay</code>, and <code>tcp_nopush</code>).  Additional directives configure an application-level document root and index files (<code>root</code> and <code>index</code>) and set up the various hash tables that are used to store different types of data (<code>*_hash_bucket_size</code> and <code>*_hash_max_size</code> for <code>server_names</code>, <code>types</code>, and <code>variables</code>).</p>

<h3 id="the-server-context">The Server Context</h3>

<p>The "server" context is declared <em>within</em> the "http" context. 
 This is our first example of nested, bracketed contexts.  It is also 
the first context that allows for multiple declarations.</p>

<p>The general format for server context may look something like this.  Remember that these reside within the http context:</p>
<pre><code langs=""># main context

http: {

    # http context

    server {

        # first server context

    }

    server {

        # second server context

    }

}
</code></pre>
<p>The reason for allowing multiple declarations of the server context 
is that each instance defines a specific virtual server to handle client
 requests.  You can have as many server blocks as you need, each of 
which can handle a specific subset of connections.</p>

<p>Due to the possibility and likelihood of multiple server blocks, this
 context type is also the first that Nginx must use a selection 
algorithm to make decisions.  Each client request will be handled 
according to the configuration defined in a single server context, so 
Nginx must decide which server context is most appropriate based on 
details of the request.  The directives which decide if a server block 
will be used to answer a request are:</p>

<ul>
<li>
<strong>listen</strong>: The ip address / port combination that this 
server block is designed to respond to.  If a request is made by a 
client that matches these values, this block will potentially be 
selected to handle the connection.</li>
<li>
<strong>server_name</strong>: This directive is the other component used
 to select a server block for processing.  If there are multiple server 
blocks with listen directives of the same specificity that can handle 
the request, Nginx will parse the "Host" header of the request and match
 it against this directive.</li>
</ul>
<p>The directives in this context can override many of the directives 
that may be defined in the http context, including logging, the document
 root, compression, etc.  In addition to the directives that are taken 
from the http context, we also can configure files to try to respond to 
requests (<code>try_files</code>), issue redirects and rewrites (<code>return</code> and <code>rewrite</code>), and set arbitrary variables (<code>set</code>).</p>

<h3 id="the-location-context">The Location Context</h3>

<p>The next context that you will deal with regularly is the location 
context.  Location contexts share many relational qualities with server 
contexts.  For example, multiple location contexts can be defined, each 
location is used to handle a certain type of client request, and each 
location is selected by virtue of matching the location definition 
against the client request through a selection algorithm.</p>

<p>While the directives that determine whether to select a server block 
are defined within the server context itself, the component that decides
 on a location's ability to handle a request is located in the location 
definition itself.</p>

<p>The general syntax looks like this:</p>
<pre><code langs="">location <span class="highlight">match_modifier</span> <span class="highlight">location_match</span> {

    . . .

}
</code></pre>
<p>Location blocks live within server contexts and, unlike server 
blocks, can be nested inside one another.  This can be useful for 
creating a more general location context to catch a certain subset of 
traffic, and then further processing it based on more specific criteria 
with additional contexts inside:</p>
<pre><code langs=""># main context

server {

    # server context

    location <span class="highlight">/match/criteria</span> {

        # first location context

    }

    location <span class="highlight">/other/criteria</span> {

        # second location context

        location <span class="highlight">nested_match</span> {

            # first nested location

        }

        location <span class="highlight">other_nested</span> {

            # second nested location

        }

    }

}
</code></pre>
<p>While server contexts are selected based on the requested IP 
address/port combination and the host name in the "Host" header, 
location blocks further divide up the request handling within a server 
block by looking at the request URI.  The request URI is the portion of 
the request that comes after the domain name or IP address/port 
combination.</p>

<p>So, if a client requests <code>http://www.example.com/blog</code> on port 80, the <code>http</code>, <code>www.example.com</code>, and port 80 would all be used to determine which server block to select.  After a server is selected, the <code>/blog</code>
 portion (the request URI), would be evaluated against the defined 
locations to determine which further context should be used to respond 
to the request.</p>

<p>Many of the directives you are likely to see in a location context 
are also available at the parent levels.  New directives at this level 
allow you to reach locations outside of the document root (<code>alias</code>), mark the location as only internally accessible (<code>internal</code>), and proxy to other servers or locations (using http, fastcgi, scgi, and uwsgi proxying).</p>

<div data-unique="other-contexts" name="other-contexts"></div><h2 id="other-contexts">Other Contexts</h2>

<p>While the above examples represent the essential contexts that you 
will encounter with Nginx, other contexts exist as well.  The contexts 
below were separated out either because they depend on more optional 
modules, they are used only in certain circumstances, or they are used 
for functionality that most people will not be using.</p>

<p>We will <em>not</em> be discussing each of the available contexts though.  The following contexts will not be discussed in any depth:</p>

<ul>
<li>
<strong><code>split_clients</code></strong>: This context is configured 
to split the clients that the server receives into categories by 
labeling them with variables based on a percentage.  These can then be 
used to do A/B testing by providing different content to different 
hosts.</li>
<li>
<strong><code>perl / perl_set</code></strong>: These contexts configures Perl handlers for the location they appear in.  This will only be used for processing with Perl.</li>
<li>
<strong><code>map</code></strong>: This context is used to set the value
 of a variable depending on the value of another variable.  It provides a
 mapping of one variable's values to determine what the second variable 
should be set to.</li>
<li>
<strong><code>geo</code></strong>: Like the above context, this context 
is used to specify a mapping.  However, this mapping is specifically 
used to categorize client IP addresses.  It sets the value of a variable
 depending on the connecting IP address.</li>
<li>
<strong><code>types</code></strong>: This context is again used for 
mapping.  This context is used to map MIME types to the file extensions 
that should be associated with them.  This is usually provided with 
Nginx through a file that is sourced into the main <code>nginx.conf</code> config file.</li>
<li>
<strong><code>charset_map</code></strong>: This is another example of a 
mapping context.  This context is used to map a conversion table from 
one character set to another.  In the context header, both sets are 
listed and in the body, the mapping takes place.</li>
</ul>
<p>The contexts below are not as common as the ones we have discussed so far, but are still very useful to know about.</p>

<h3 id="the-upstream-context">The Upstream Context</h3>

<p>The upstream context is used to define and configure "upstream" 
servers.  Basically, this context defines a named pool of servers that 
Nginx can then proxy requests to.  This context will likely be used when
 you are configuring proxies of various types.</p>

<p>The upstream context should be placed within the http context, 
outside of any specific server contexts.  The general form looks 
something like this:</p>
<pre><code langs=""># main context

http {

    # http context

    upstream <span class="highlight">upstream_name</span> {

        # upstream context

        server <span class="highlight">proxy_server1</span>;
        server <span class="highlight">proxy_server2</span>;

        . . .

    }

    server {

        # server context

    }

}
</code></pre>
<p>The upstream context can then be referenced by name within server or 
location blocks to pass requests of a certain type to the pool of 
servers that have been defined.  The upstream will then use an algorithm
 (round-robin by default) to determine which specific server to hand the
 request to.  This context gives our Nginx the ability to do some load 
balancing when proxying requests.</p>

<h3 id="the-mail-context">The Mail Context</h3>

<p>Although Nginx is most often used as a web or reverse proxy server, 
it can also function as a high performance mail proxy server.  The 
context that is used for directives of this type is called, 
appropriately, "mail".  The mail context is defined within the "main" or
 "global" context (outside of the http context).</p>

<p>The main function of the mail context is to provide an area for 
configuring a mail proxying solution on the server.  Nginx has the 
ability to redirect authentication requests to an external 
authentication server.  It can then provide access to POP3 and IMAP mail
 servers for serving the actual mail data.  The mail context can also be
 configured to connect to an SMTP Relayhost if desired.</p>

<p>In general, a mail context will look something like this:</p>
<pre><code langs=""># main context

events {

    # events context

}

mail {

    # mail context

}
</code></pre>
<h3 id="the-if-context">The If Context</h3>

<p>The "if" context can be established to provide conditional processing
 of directives defined within.  Like an if statement in conventional 
programming, the if directive in Nginx will execute the instructions 
contained if a given test returns "true".</p>

<p>The if context in Nginx is provided by the rewrite module and this is
 the primary intended use of this context.  Since Nginx will test 
conditions of a request with many other purpose-made directives, if 
should <strong>not</strong> be used for most forms of conditional 
execution.  This is such an important note that the Nginx community has 
created a page called <a href="http://wiki.nginx.org/IfIsEvil">if is evil</a>.</p>

<p>The problem is basically that the Nginx processing order can very 
often lead to unexpected results that seem to subvert the meaning of an 
if block.  The only directives that are considered reliably safe to use 
inside of these contexts are the <code>return</code> and <code>rewrite</code>
 directives (the ones this context was created for).  Another thing to 
keep in mind when using an if context is that it renders a <code>try_files</code> directive in the same context useless.</p>

<p>Most often, an if will be used to determine whether a rewrite or 
return is needed.  These will most often exist in location blocks, so 
the common form will look something like this:</p>
<pre><code langs=""># main context

http {

    # http context

    server {

        # server context

        location <span class="highlight">location_match</span> {

            # location context

            if (<span class="highlight">test_condition</span>) {

                # if context

            }

        }

    }

}
</code></pre>
<h3 id="the-limit_except-context">The Limit_except Context</h3>

<p>The <code>limit_except</code> context is used to restrict the use of 
certain HTTP methods within a location context.  For example, if only 
certain clients should have access to POST content, but everyone should 
have the ability to read content, you can use a <code>limit_except</code> block to define this requirement.</p>

<p>The above example would look something like this:</p>
<pre><code langs="">. . .

# server or location context

location /restricted-write {

    # location context

    limit_except GET HEAD {

        # limit_except context

        allow 192.168.1.1/24;
        deny all;
    }
}
</code></pre>
<p>This will apply the directives inside the context (meant to restrict access) when encountering any HTTP methods <strong>except</strong>
 those listed in the context header.  The result of the above example is
 that any client can use the GET and HEAD verbs, but only clients coming
 from the <code>192.168.1.1/24</code> subnet are allowed to use other methods.</p>

<div data-unique="general-rules-to-follow-regarding-contexts" name="general-rules-to-follow-regarding-contexts"></div><h2 id="general-rules-to-follow-regarding-contexts">General Rules to Follow Regarding Contexts</h2>

<p>Now that you have an idea of the common contexts that you are likely 
to encounter when exploring Nginx configurations, we can discuss some 
best practices to use when dealing with Nginx contexts.</p>

<h3 id="apply-directives-in-the-highest-context-available">Apply Directives in the Highest Context Available</h3>

<p>Many directives are valid in more than one context.  For instance, 
there are quite a few directives that can be placed in the http, server,
 or location context.  This gives us flexibility in setting these 
directives.</p>

<p>However, as a general rule, it is usually best to declare directives 
in the highest context to which they are applicable, and overriding them
 in lower contexts as necessary.  This is possible because of the 
inheritance model that Nginx implements.  There are many reasons to use 
this strategy.</p>

<p>First of all, declaring at a high level allows you to avoid 
unnecessary repetition between sibling contexts.  For instance, in the 
example below, each of the locations is declaring the same document 
root:</p>
<pre><code langs="">http {
    server {
        location / {
            root /var/www/html;

            . . .

        }

        location /another {
            root /var/www/html;

            . . .

        }

    }
}
</code></pre>
<p>You could move the root out to the server block, or even to the http block, like this:</p>
<pre><code langs="">http {
    root /var/www/html;
    server {
        location / {

            . . .

        }

        location /another {

            . . .

        }
    }
}
</code></pre>
<p>Most of the time, the server level will be most appropriate, but 
declaring at the higher level has its advantages.  This not only allows 
you to set the directive in fewer places, it also allows you to cascade 
the default value down to all of the child elements, preventing 
situations where you run into an error by forgetting a directive at a 
lower level.  This can be a major issue with long configurations.  
Declaring at higher levels provides you with a sane default.</p>

<h3 id="use-multiple-sibling-contexts-instead-of-if-logic-for-processing">Use Multiple Sibling Contexts Instead of If Logic for Processing</h3>

<p>When you want to handle requests differently depending on some 
information that can be found in the client's request, often users jump 
to the "if" context to try to conditionalize processing.  There are a 
few issues with this that we touched on briefly earlier.</p>

<p>The first is that the "if" directive often return results that do not
 align with the administrator's expectations.  Although the processing 
will always lead to the same result given the same input, the way that 
Nginx interprets the environment can be vastly different than can be 
assumed without heavy testing.</p>

<p>The second reason for this is that there are already optimized, 
purpose-made directives that are used for many of these purposes.  Nginx
 already engages in a well-documented selection algorithm for things 
like selecting server blocks and location blocks. So if it is possible, 
it is best to try to move your different configurations into their own 
blocks so that this algorithm can handle the selection process logic.</p>

<p>For instance, instead of relying on rewrites to get a user supplied 
request into the format that you would like to work with, you should try
 to set up two blocks for the request, one of which represents the 
desired method, and the other that catches messy requests and redirects 
(and possibly rewrites) them to your correct block.</p>

<p>The result is usually easier to read and also has the added benefit 
of being more performant.  Correct requests undergo no additional 
processing and, in many cases, incorrect requests can get by with a 
redirect rather than a rewrite, which should execute with lower 
overhead.</p>

<div data-unique="conclusion" name="conclusion"></div><h2 id="conclusion">Conclusion</h2>

<p>By this point, you should have a good grasp on Nginx's most common 
contexts and the directive that create the blocks that define them.</p>

<p>Always check <a href="http://nginx.org/en/docs/dirindex.html">Nginx's documentation</a>
 for information about which contexts a directive can be placed in and 
to evaluate the most effective location.  Taking care when creating your
 configurations will not only increase maintainability, but will also 
often increase performance.</p>

      <span class="meta-section tags">
        <span class="meta-label">Tagged In: </span>
        <span class="meta-value"><a class="" href="https://www.digitalocean.com/community/tags/miscellaneous?primary_filter=tutorials">Miscellaneous</a>, <a class="" href="https://www.digitalocean.com/community/tags/nginx?primary_filter=tutorials">Nginx</a></span>
      </span>

      <div class="row boxes">
        <div class="half">
          <div class="box author">
            <a href="https://www.digitalocean.com/community/users/jellingwood"><img alt="jellingwood" class="avatar avatar-large" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/60d901f61a6146e14a3e989bc1f4ef11.png" height="80" width="80"></a>
            <div class="info">
              <div class="label">Written By:</div>
              <div class="name"><a href="https://www.digitalocean.com/community/users/jellingwood">Justin Ellingwood</a></div>
            </div>
          </div>
        </div>
        <div class="half">
          <div class="box hearting secondary-tutorial-upvote ">
            <div class="heart">
              <span class="icon-upvote-heart-full upvote-heart" data-original-title="Do you find this post helpful? Heart it! This will count as a point toward the author of this tutorial."></span>
            </div>
            <div class="info">
              <span class="empty">Do you find this post helpful?<br>Show the author by Hearting it!</span>
              <div class="hearted">Thanks!<br>A heart has been given to the author.</div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>


                
        <div class="clear"></div>
      <div class="clear"></div>
    </div>

    <div class="content-primary-actions hidden">
      <a class="share" href="#"><span class="icon-share"></span>Share Tutorial</a>
      <a class="improve" href="#"><span class="icon-edit"></span>Improve Tutorial</a>
      <a class="write" href="#"><span class="icon-edit"></span>Write Tutorial</a>
    </div>

    



      <div class="related">
    <h2>Related Tutorials</h2>

    <ul>
          <li><a class="related-link" href="https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms">Understanding Nginx Server and Location Block Selection Algorithms</a></li>
          <li><a class="related-link" href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-sphinx-on-ubuntu-14-04">How To Install and Configure Sphinx on Ubuntu 14.04</a></li>
          <li><a class="related-link" href="https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-as-a-web-server-and-reverse-proxy-for-apache-on-one-ubuntu-14-04-droplet">How To Configure Nginx as a Web Server and Reverse Proxy for Apache on One Ubuntu 14.04 Droplet</a></li>
          <li><a class="related-link" href="https://www.digitalocean.com/community/tutorials/sftp-ru">Как использовать SFTP для безопасного обмена файлами с удаленным сервером</a></li>
          <li><a class="related-link" href="https://www.digitalocean.com/community/tutorials/apache-vs-nginx-practical-considerations">Apache vs Nginx: Practical Considerations</a></li>
    </ul>
  </div>


    <div class="content-comments">
      <div class="tutorial commentable" id="tutorial_1382">

  <div class="comments-header">
    <h4 class="comments-count"><span>1 Comment</span></h4>
  </div>

  <div class="response no-avatar  response-form">
  <div class="response-user-details">
      <div class="flash notice log-in-notice">You must be logged in to comment. <a href="https://www.digitalocean.com/community/auth/digitalocean">Log In</a></div>
  </div>

  <div class="js-display-on-error flash error hidden"></div>
  <form accept-charset="UTF-8" action="/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts/comments" class="content-form disabled-form" data-remote="true" id="new_comment" method="post"><div style="display:none"><input disabled="disabled" name="utf8" value="✓" type="hidden"></div>
    <div style="height: auto;" class="meltdown_wrap"><div class="meltdown_topmargin"></div><div class="meltdown_bar"><div class="preview-header">Markdown Preview</div><ul class="meltdown_controls meltdown_controls_main"><li data-original-title="Bold" title="" class="meltdown_control-bold meltdown_control meltdown_controlbutton disabled"><span unselectable="on">B</span></li><li data-original-title="Italics" title="" class="meltdown_control-italics meltdown_control meltdown_controlbutton disabled"><span unselectable="on">I</span></li><li data-original-title="Header 1" title="" class="meltdown_control-h1 meltdown_control meltdown_controlbutton disabled"><span unselectable="on">H1</span></li><li data-original-title="Header 2" title="" class="meltdown_control-h2 meltdown_control meltdown_controlbutton disabled"><span unselectable="on">H2</span></li><li data-original-title="Header 3" title="" class="meltdown_control-h3 meltdown_control meltdown_controlbutton disabled"><span unselectable="on">H3</span></li><li data-original-title="Unordered List" title="" class="meltdown_control-ul meltdown_control meltdown_controlbutton disabled"><span unselectable="on">UL</span></li><li data-original-title="Ordered List" title="" class="meltdown_control-ol meltdown_control meltdown_controlbutton disabled"><span unselectable="on">OL</span></li><li data-original-title="Link" title="" class="meltdown_control-link meltdown_control meltdown_controlbutton disabled"><span unselectable="on">Link</span></li><li data-original-title="Code" title="" class="meltdown_control-code meltdown_control meltdown_controlbutton disabled"><span unselectable="on">Code</span></li><li data-original-title="Highlight" title="" class="meltdown_control-highlight meltdown_control meltdown_controlbutton disabled"><span unselectable="on">Highlight</span></li><li data-original-title="Table" title="" class="meltdown_control-table meltdown_control meltdown_controlbutton disabled"><span unselectable="on">Table</span></li></ul><ul class="meltdown_controls meltdown_controls_preview"><li data-original-title="Toggle Preview" title="" class="meltdown_control-preview meltdown_control meltdown_controlbutton disabled"><span>Preview</span></li></ul></div><div class="meltdown_editor-wrap"><div class="meltdown_editor-deco"><textarea style="overflow: hidden; word-wrap: break-word; resize: none; height: 120px;" disabled="disabled" class="js-comment-content tutorial-comment-field meltdown_editor" data-markdown="true" id="comment_content" name="comment[content]" placeholder="Leave a comment..."></textarea></div></div><div class="meltdown_preview-wrap"><div class="meltdown_preview-wrap2"><div class="meltdown_preview-error-message">Could not load preview. <a href="#">Try again</a></div><div class="meltdown_preview-loading-message">Loading preview...</div><div class="meltdown_preview content-body"></div></div></div><div class="meltdown_bottommargin"></div></div>

      <div class="subscribe-to-post">
        <input disabled="disabled" checked="checked" id="comment_subscribe" name="comment[subscribe]" type="checkbox">
        <label for="comment_subscribe">Notify me of replies to my comment</label>
      </div>

    <button disabled="disabled" type="submit" id="submit-comment" data-disable-with="Submitting...">
      Submit Comment
      <span class="icon-arrow-right"></span>
    </button>
</form></div>

  <div class="comments">
    <ul class="response-list">
          <a class="hidden" data-remote="true" href="https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts/comments" rel="nofollow">Load</a>
    <li style="" class="response    " id="comment_28145">
  <div class="moderation-actions small comment-moderation inline">
    <ul id="moderate_28145" class="">
      




    </ul>
  </div>

  <div class="upvotes "><div class="upvote-count hidden">0</div><form accept-charset="UTF-8" action="/community/upvotes/toggle?upvote%5Bupvotable_id%5D=28145&amp;upvote%5Bupvotable_type%5D=Comment" class="upvote-form upvote signed-out-upvote" data-remote="true" data-upvotable-type="comment" data-upvotable="comment_28145" method="post"><div style="display:none"><input name="utf8" value="✓" type="hidden"><input name="_method" value="patch" type="hidden"><input name="authenticity_token" value="OUl7EDh+tS+sptwIHr3GHt+Y9ySuszclXtwwH8DqfLI=" type="hidden"></div>
    <button type="submit" disabled="disabled" data-toggle="modal" data-target="#sign-in-modal"><span class="icon-upvote-heart-small upvote-heart" data-toggle="modal" data-target="#sign-in-modal" data-return-url="https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts?comment=28145" title="Do you find this post helpful? Show the author by Hearting it!"></span></button>

</form></div>


  <div class="response-avatar">
    <a href="https://www.digitalocean.com/community/users/i524176"><img alt="i524176" class="avatar avatar-small" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/18096bdac2cf9eded522e38253acc7c0.png" height="80" width="80"></a>
  </div>

  <div>
    <span class="response-name"><a class="username" href="https://www.digitalocean.com/community/users/i524176">i524176</a></span>
    <span class="response-time"><a class="post-time-link" href="https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts?comment=28145" rel="nofollow">about 1 hour ago</a></span>

    
  </div>

      <div class="response-body content-body "><p>Thanks,i Love nginx.</p></div>

  <div class="spinner spinner-large">
  <div class="bounce1"></div>
  <div class="bounce2"></div>
  <div class="bounce3"></div>
  
</div>


  <div class="content-actions">

  
</div>


  <div class="response-comments">
    <div class="comment commentable" id="comment_28145">

    <div id="form_comment_28145" class="hidden">
      <div class="response no-avatar  response-form">
  <div class="response-user-details">
      <div class="flash notice log-in-notice">You must be logged in to comment. <a href="https://www.digitalocean.com/community/auth/digitalocean">Log In</a></div>
  </div>

  <div class="js-display-on-error flash error hidden"></div>
  <form accept-charset="UTF-8" action="/community/comments/28145/comments" class="content-form disabled-form" data-remote="true" id="new_comment" method="post"><div style="display:none"><input disabled="disabled" name="utf8" value="✓" type="hidden"></div>
    <div style="height: auto;" class="meltdown_wrap"><div class="meltdown_topmargin"></div><div class="meltdown_bar"><div class="preview-header">Markdown Preview</div><ul class="meltdown_controls meltdown_controls_main"><li data-original-title="Bold" title="" class="meltdown_control-bold meltdown_control meltdown_controlbutton"><span unselectable="on">B</span></li><li data-original-title="Italics" title="" class="meltdown_control-italics meltdown_control meltdown_controlbutton"><span unselectable="on">I</span></li><li data-original-title="Header 1" title="" class="meltdown_control-h1 meltdown_control meltdown_controlbutton"><span unselectable="on">H1</span></li><li data-original-title="Header 2" title="" class="meltdown_control-h2 meltdown_control meltdown_controlbutton"><span unselectable="on">H2</span></li><li data-original-title="Header 3" title="" class="meltdown_control-h3 meltdown_control meltdown_controlbutton"><span unselectable="on">H3</span></li><li data-original-title="Unordered List" title="" class="meltdown_control-ul meltdown_control meltdown_controlbutton"><span unselectable="on">UL</span></li><li data-original-title="Ordered List" title="" class="meltdown_control-ol meltdown_control meltdown_controlbutton"><span unselectable="on">OL</span></li><li data-original-title="Link" title="" class="meltdown_control-link meltdown_control meltdown_controlbutton"><span unselectable="on">Link</span></li><li data-original-title="Code" title="" class="meltdown_control-code meltdown_control meltdown_controlbutton"><span unselectable="on">Code</span></li><li data-original-title="Highlight" title="" class="meltdown_control-highlight meltdown_control meltdown_controlbutton"><span unselectable="on">Highlight</span></li><li data-original-title="Table" title="" class="meltdown_control-table meltdown_control meltdown_controlbutton"><span unselectable="on">Table</span></li></ul><ul class="meltdown_controls meltdown_controls_preview"><li data-original-title="Toggle Preview" title="" class="meltdown_control-preview meltdown_control meltdown_controlbutton"><span>Preview</span></li></ul></div><div class="meltdown_editor-wrap"><div class="meltdown_editor-deco"><textarea disabled="disabled" class="js-comment-content comment-comment-field meltdown_editor" data-markdown="true" id="comment_content" name="comment[content]" placeholder="Leave a comment..."></textarea></div></div><div class="meltdown_preview-wrap"><div class="meltdown_preview-wrap2"><div class="meltdown_preview-error-message">Could not load preview. <a href="#">Try again</a></div><div class="meltdown_preview-loading-message">Loading preview...</div><div class="meltdown_preview content-body"></div></div></div><div class="meltdown_bottommargin"></div></div>

      <div class="subscribe-to-post">
        <input disabled="disabled" checked="checked" id="comment_subscribe" name="comment[subscribe]" type="checkbox">
        <label for="comment_subscribe">Notify me of replies to my comment</label>
      </div>

    <button disabled="disabled" type="submit" id="submit-comment" data-disable-with="Submitting...">
      Submit Comment
      <span class="icon-arrow-right"></span>
    </button>
</form></div>
    </div>

  <div class="comments">
    <ul class="response-list">

      
    </ul>
  </div>


      <div id="secondary_form_comment_28145" class="hidden secondary-comment-form">
        <div class="response no-avatar  response-form">
  <div class="response-user-details">
      <div class="flash notice log-in-notice">You must be logged in to comment. <a href="https://www.digitalocean.com/community/auth/digitalocean">Log In</a></div>
  </div>

  <div class="js-display-on-error flash error hidden"></div>
  <form accept-charset="UTF-8" action="/community/comments/28145/comments" class="content-form disabled-form" data-remote="true" id="new_comment" method="post"><div style="display:none"><input disabled="disabled" name="utf8" value="✓" type="hidden"></div>
    <div style="height: auto;" class="meltdown_wrap"><div class="meltdown_topmargin"></div><div class="meltdown_bar"><div class="preview-header">Markdown Preview</div><ul class="meltdown_controls meltdown_controls_main"><li data-original-title="Bold" title="" class="meltdown_control-bold meltdown_control meltdown_controlbutton"><span unselectable="on">B</span></li><li data-original-title="Italics" title="" class="meltdown_control-italics meltdown_control meltdown_controlbutton"><span unselectable="on">I</span></li><li data-original-title="Header 1" title="" class="meltdown_control-h1 meltdown_control meltdown_controlbutton"><span unselectable="on">H1</span></li><li data-original-title="Header 2" title="" class="meltdown_control-h2 meltdown_control meltdown_controlbutton"><span unselectable="on">H2</span></li><li data-original-title="Header 3" title="" class="meltdown_control-h3 meltdown_control meltdown_controlbutton"><span unselectable="on">H3</span></li><li data-original-title="Unordered List" title="" class="meltdown_control-ul meltdown_control meltdown_controlbutton"><span unselectable="on">UL</span></li><li data-original-title="Ordered List" title="" class="meltdown_control-ol meltdown_control meltdown_controlbutton"><span unselectable="on">OL</span></li><li data-original-title="Link" title="" class="meltdown_control-link meltdown_control meltdown_controlbutton"><span unselectable="on">Link</span></li><li data-original-title="Code" title="" class="meltdown_control-code meltdown_control meltdown_controlbutton"><span unselectable="on">Code</span></li><li data-original-title="Highlight" title="" class="meltdown_control-highlight meltdown_control meltdown_controlbutton"><span unselectable="on">Highlight</span></li><li data-original-title="Table" title="" class="meltdown_control-table meltdown_control meltdown_controlbutton"><span unselectable="on">Table</span></li></ul><ul class="meltdown_controls meltdown_controls_preview"><li data-original-title="Toggle Preview" title="" class="meltdown_control-preview meltdown_control meltdown_controlbutton"><span>Preview</span></li></ul></div><div class="meltdown_editor-wrap"><div class="meltdown_editor-deco"><textarea disabled="disabled" class="js-comment-content comment-comment-field meltdown_editor" data-markdown="true" id="comment_content" name="comment[content]" placeholder="Leave a comment..."></textarea></div></div><div class="meltdown_preview-wrap"><div class="meltdown_preview-wrap2"><div class="meltdown_preview-error-message">Could not load preview. <a href="#">Try again</a></div><div class="meltdown_preview-loading-message">Loading preview...</div><div class="meltdown_preview content-body"></div></div></div><div class="meltdown_bottommargin"></div></div>

      <div class="subscribe-to-post">
        <input disabled="disabled" checked="checked" id="comment_subscribe" name="comment[subscribe]" type="checkbox">
        <label for="comment_subscribe">Notify me of replies to my comment</label>
      </div>

    <button disabled="disabled" type="submit" id="submit-comment" data-disable-with="Submitting...">
      Submit Comment
      <span class="icon-arrow-right"></span>
    </button>
</form></div>
      </div>


  <div id="reply_anchor_comment_28145"></div>
</div>
  </div>

  <div class="clear"></div>
</li></ul>

      <div style="display: none;" class="comments-spinner"><div class="spinner spinner-large">
  <div class="bounce1"></div>
  <div class="bounce2"></div>
  <div class="bounce3"></div>
  
</div>
</div>
  </div>


  <div class="load-more-container"></div>
</div>

    </div>

    <div id="creative-commons">
      <a class="creative-commons-image" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" rel="license" src="Understanding%20the%20Nginx%20Configuration%20File%20Structure%20and%20Configuration%20Contexts%20_%20DigitalOcean_files/creativecommons-b4540f6e3875bceed5e8823eb0c597a2.png"></a>
        <br>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
    </div>
  </div>
</div>


          <div class="clearfix"></div>
      	</div>

      	<footer id="footer">
  <div class="wrapper">
    <div id="column-main" class="footer-column">

      <a class="cloud-icon" href="https://www.digitalocean.com/"></a>

      <div id="copyright">

        Copyright © 2014<br>
        DigitalOcean ™ Inc.
      </div>
      <a href="http://nytm.org/made-in-nyc/" id="made-in-ny">Proudly Made in NY</a>

      <div id="privacy">
        <a href="https://www.digitalocean.com/legal/terms/">Terms, Privacy, &amp; Copyright</a>
        <a href="https://www.digitalocean.com/security/">Security</a>
      </div>

    </div>

    <div id="column-product" class="footer-column">
      <h3>Product</h3>
      <ul>
        <li><a href="https://www.digitalocean.com/pricing/">Pricing</a></li>
        <li><a href="https://www.digitalocean.com/features/control-panel/">Features</a></li>
        <li><a href="https://www.digitalocean.com/customers/">Customers</a></li>
        <li><a href="https://www.digitalocean.com/features/one-click-apps/">One-Click Apps</a></li>
        <li><a href="https://developers.digitalocean.com/">API</a></li>
      </ul>
    </div>

    <div id="column-company" class="footer-column">
      <h3>Company</h3>
      <ul>
        <li><a href="https://www.digitalocean.com/company/about/">About Us</a></li>
        <li><a href="https://www.digitalocean.com/company/blog/">Blog</a></li>
        <li><a href="https://www.digitalocean.com/company/careers/">Jobs</a></li>
        <li><a href="https://www.digitalocean.com/company/press/">Press</a></li>
        <li><a href="https://www.digitalocean.com/company/logos-and-badges/">Logos &amp; Badges</a></li>
        <li><a href="https://evangelism.digitalocean.com/#events">Events</a></li>
        <li><a href="https://www.digitalocean.com/company/contact/" target="_blank">Contact</a></li>
      </ul>
    </div>

    <div id="column-help" class="footer-column">
      <h3>Help</h3>
      <ul>
        <li><a href="https://www.digitalocean.com/help/">Knowledgebase</a></li>
        <li><a href="https://www.digitalocean.com/help/getting-started/setting-up-your-server/">Getting Started</a></li>
        <li><a href="https://digitalocean.uservoice.com/forums/136585-digitalocean" target="_blank">Feedback</a></li>
        <li><a href="https://www.digitalocean.com/referral-program/">Referral Program</a></li>
        <li><a href="https://status.digitalocean.com/" target="_blank">Network Status</a></li>
        <li><a href="https://www.digitalocean.com/help/">FAQ</a></li>
      </ul>
    </div>

    <div id="column-community" class="footer-column">
      <h3>Community</h3>
      <ul>
        <li><a href="https://www.digitalocean.com/community">Dashboard</a></li>
        <li><a href="https://www.digitalocean.com/community/tutorials">Tutorials</a></li>
        <li><a href="https://www.digitalocean.com/community/questions">Questions</a></li>
        <li><a href="https://www.digitalocean.com/community/projects">Projects</a></li>
        <li><a href="https://www.digitalocean.com/community/tutorials/digitalocean-community-article-suggestions-and-ideas">Tutorial Suggestions</a></li>
        <li><a href="https://www.digitalocean.com/community/get-paid-to-write">Get Paid to Write</a></li>
      </ul>
    </div>

    <div id="column-connect" class="footer-column">
      <h3>Connect</h3>
      <ul>
        <li class="twitter"><a href="https://twitter.com/digitalocean" target="_blank">Twitter</a></li>
        <li class="facebook"><a href="https://www.facebook.com/DigitalOceanCloudHosting" target="_blank">Facebook</a></li>
        <li class="linkedin"><a href="http://www.linkedin.com/company/digitalocean" target="_blank">LinkedIn</a></li>
        <li class="google"><a href="https://plus.google.com/+Digitalocean/posts" target="_blank">Google+</a></li>
        <li class="instagram"><a href="http://instagram.com/thedigitalocean" target="_blank">Instagram</a></li>
        <li class="meetup"><a href="http://www.meetup.com/DigitalOcean_Community/" target="_blank">Meetup</a></li>
      </ul>
    </div>

    <div id="droplet-count">
      <span class="count">4,197,156</span> Droplets Launched
    </div>

    <div class="clearfix"></div>
  </div>
</footer>

      </div>
    </div>

    <div id="sign-in-modal" class="modal fade" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1>Sign Up</h1>
        <a class="close-button" data-dismiss="modal" href=""><span class="icon icon-close"></span></a>
      </div>
      <div class="modal-body">
        <div class="sign-in-message">Not so fast, you must have an account before you can do that.</div>

        <div class="sign-in-modal-actions">
          <a class="sign-in-link" data-default-url="/community/auth/digitalocean" href="https://www.digitalocean.com/community/auth/digitalocean">Log In</a>
          <a class="sign-up-link" data-default-url="/community/auth/digitalocean?display=sessionless+register" href="https://www.digitalocean.com/community/auth/digitalocean?display=sessionless+register">Create Account</a>
        </div>
      </div>
    </div>
  </div>
</div>
    
  

<textarea id="autosizejs" class="autosizejs" tabindex="-1" style="position: absolute; top: -999px; left: 0px; right: auto; bottom: auto; border: 0px none; padding: 0px; box-sizing: content-box; word-wrap: break-word; height: 0px ! important; min-height: 0px ! important; overflow: hidden; transition: none 0s ease 0s ; font-family: &quot;proxima-nova&quot;,sans-serif; font-size: 16px; font-weight: 400; font-style: normal; letter-spacing: 0px; text-transform: none; word-spacing: 0px; text-indent: 0px; line-height: 20px; width: 713px;">Leave a comment...
</textarea><a style="position: fixed; z-index: 2147483647;" href="#top" id="scrollUp">Scroll to top</a><div style="position: absolute; top: 300px; width: 100%; border-top: 1px dotted rgb(0, 255, 255); z-index: 2147483647;" id="scrollUp-active"></div><script id="" type="text/javascript">adroll_custom_data={user_id:google_tag_manager["GTM-KHWBBT"].macro('gtm1424357296120'),article_tag:google_tag_manager["GTM-KHWBBT"].macro('gtm1424357296121'),tutorial_difficulty:google_tag_manager["GTM-KHWBBT"].macro('gtm1424357296122'),content_type:google_tag_manager["GTM-KHWBBT"].macro('gtm1424357296123'),author:google_tag_manager["GTM-KHWBBT"].macro('gtm1424357296124'),is_community_page:google_tag_manager["GTM-KHWBBT"].macro('gtm1424357296125')};</script>
<script id="" type="text/javascript">var _qevents=_qevents||[];(function(){var a=document.createElement("script");a.src=("https:"==document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js";a.async=!0;a.type="text/javascript";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();_qevents.push({qacct:"p-ezk6DY8pwNxCt",labels:"_fp.event.Community"});</script>
<noscript>
<img src="//pixel.quantserve.com/pixel/p-ezk6DY8pwNxCt.gif?labels=_fp.event.Community" style="display: none;" border="0" height="1" width="1" alt="Quantcast">
</noscript>
</body></html>