/*! $Id: swg-global.source.js,v 1.41 2014/09/02 18:17:44 santelia Exp $ */
(function(b,a){if(typeof jQuery=="function"){if(jQuery("script[src$='v17e/js/ww.js']").length==1||jQuery("script[src$='/resources/ecm/ww.js']").length==1){return}}if(/android(?=(.)*mobile)|blackberry|docomo|fennec|iemobile|ip(hone|od)|^mot-|motsp|^nokia|opera m(ob|in)i|palm( scape|os)|phone|p(ixo|ixi|re)\/|pocket|rim|softbank|symbian|up\.|upsim|upg1|vodafone|wap|windows (ce|phone)/i.test(b)&&(dojo.cookie("swgNoMobile")!="nomo")&&dojo.query("meta[name='IBM.Mobile']").attr("content")[0]!="change:none"){window.location=a}})(navigator.userAgent||navigator.vendor||window.opera,window.location.protocol+"//m.ibm.com/"+window.location.protocol.substring(0,window.location.protocol.length-1)+"/"+window.location.host+window.location.pathname+window.location.search);(function(){dojo.io.script.get({url:"//www.ibm.com/software/main/js/perstagonly.js"});function g(){dojo.query(".swgsc-feature-textover").onclick(function(h){var i=dojo.query(h.currentTarget).children("a")[0].href;window.location.href=i})}var e={isloaded:false,addSwStory:function(){if(dojo.query("#ibm-navigation-trail li").length==0){dojo.query("body").addClass("swg-notnt")}if(dojo.query("#swg-story").length==1){dojo.place("swg-story","ibm-leadspace-body","first");dojo.addClass("swg-story","swg-ready");var h=Math.floor(dojo.position(dojo.query("#swg-story")[0]).h);if(h>65){dojo.style(dojo.query("#swg-story")[0],"width","200px")}}},addSwStoryGear:function(){dojo.place("<div id='swg-story-gear'>&nbsp;</div>","ibm-leadspace-body","first");if(dojo.query("div#swg-story a").attr("href")[0]!=""){dojo.style("swg-story-gear","cursor","pointer");dojo.query("div#swg-story-gear").onclick(function(){window.location=dojo.query("div#swg-story a").attr("href")[0]})}if(dojo.query("#ibm-navigation-trail li").length==0){dojo.query("body").addClass("swg-notnt")}},bvMetricTag:{bvEventCallback:function(i){var h={ibmEV:"Bazaarvoice",ibmEvGroup:i.bvProduct,ibmEvName:i.eType,ibmEvAction:i.eName};if(i.socialMedium){h.ibmEvTarget=i.socialMedium}ibmStats.event(h)}},convertToMoreLessContent:function(){var h=false;dojo.forEach(dojo.query("#swg-more-less-content-start").nextAll(),function(i){if(!h&&dojo.query(i).attr("id")[0]!="swg-more-less-content-end"){dojo.query("#swg-more-less-content-start").append(dojo.query(i))}else{h=true}});dojo.query("#swg-more-less-content-start").addClass("swg-more-less-content").removeAttr("id");dojo.query("#swg-more-less-content-end").remove()},changeCmTactCode:function(h){dojo.query(".ibm-phone-link span",h[0])[1].innerHTML=newCmTc;dojo.query("li a[href!='']",h[0]).forEach(function(k){var j=k.href.indexOf("S_TACT="),i=k.href.indexOf("&",j),l=k.href.substr(j+7,i-j-7);k.href=k.href.replace(l,newCmTc)})},enableMoreLessButton:function(){dojo.query("div.showmoreitems").addClass("swg-more-less-content").removeClass("showmoreitems");if(dojo.query(".swg-more-less-content").length<1){return}var h="ibm-maximize-link",i="ibm-minimize-link";dojo.query("div.swg-more-less-content").hide();dojo.query("div.swg-more-less-content").forEach(function(m){var n=m,j=n.id!=""?n.id:"mlcDiv1",l=dojo.query("p.swg-more-less-control a[href='#"+j+"']").parent(),k;if(n.id==""||l.length==0){l=dojo.query("p.swg-more-less-control a").attr("href","#"+j).parent();dojo.query(n).attr("id",j)}k=dojo.query(n);dojo.place(l[0],k[0],"before");l.showBlock();dojo.query("a",l[0]).onclick(function(q){dojo.stopEvent(q);j=dojo.query(this).attr("href")[0].substr(1);var r=dojo.query(this),p=dojo.hasClass(r[0],i),o={node:dojo.query("div#"+j)[0]};if(!p){ibmStats.event({ibmEV:"widget",ibmEvName:"swgmoreless",ibmEvAction:"clicked more"});r.removeClass(h);r.addClass(i);dojo.query("span.swg-ml-more",r[0]).hide();dojo.query("span.swg-ml-less",r[0]).showInline();dojo.fx.wipeIn(o).play()}else{ibmStats.event({ibmEV:"widget",ibmEvName:"swgmoreless",ibmEvAction:"clicked less"});r.removeClass(i);r.addClass(h);dojo.query("span.swg-ml-more",r[0]).showInline();dojo.query("span.swg-ml-less",r[0]).hide();dojo.fx.wipeOut(o).play()}})})}};window.swgcommon=e;e.isloaded=true;dojo.ready(function(){dojo.io.script.get({url:"//www.ibm.com/software/main/js/interact/uigetdynoffers.js"});if(dojo.query("#swg-more-less-content-start, #swg-more-less-content-end").length==2){e.convertToMoreLessContent()}var h=dojo.query("div#ibm-contact-module ul");h=h.length>0?h:dojo.query("ul.ibm-live-assistance-list");if(typeof(newCmTc)!="undefined"&&h.length>0){e.changeCmTactCode(h)}e.enableMoreLessButton();g()});var c={goPage:function(l){var j=l.href,n=c.gup("code",j),k=c.gup("code",window.location.href),i=window.vevCodeDefault==undefined?"":window.vevCodeDefault,h="",m="";if(n!==""){h=n}else{if(k!==""){h=k}else{if(i!==""){h=i}}}if(h!==""){h="&code="+h}m=j+h;l.href=m;return},gup:function(i,l){l=l||window.location.href;i=i.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h="[\\?&]"+i+"=([^&#]*)",k=new RegExp(h,"i"),j=k.exec(l);if(j===null){return""}return j[1]}};window.vevcp=c;dojo.popupMenu=function(h,i){dojo.forEach(h,function(k){var m={body:"",offsetLeft:0,offsetTop:0,horizAlign:"left",vertAlign:"top"},l=dojo.query(k).addClass("swg-popupTrig-ready"),j={},n;m.body=l.attr("href")[0]!=undefined?l.attr("href")[0].substr(l.attr("href")[0].indexOf("#")+1):"";j=dojo.mixin(m,i);j.body=typeof j.body==="string"?dojo.query("#"+j.body):j.body;n=j.body.addClass("swg-popupMenu");l.onclick(function(o){dojo.stopEvent(o);if(dojo.hasClass(l[0],"swg-popupTrig-ready")){var p=j.horizAlign=="left"?dojo.position(l[0],true).x:dojo.window.getBox().w-dojo.position(l[0],true).x;if(j.horizAlign=="left"){dojo.style(n[0],{left:p+j.offsetLeft+"px"})}else{dojo.style(n[0],{right:p+j.offsetLeft+"px"})}if(j.vertAlign=="top"){dojo.style(n[0],{top:dojo.position(l[0],true).y+j.offsetTop+"px"})}dojo.query(".swg-popupTrig-showing").trigger("click");dojo.style(n[0],{opacity:"0"});n.showBlock();if(j.vertAlign=="bottom"){dojo.style(n[0],{top:dojo.position(l[0],true).y+j.offsetTop-dojo.position(n[0]).h+"px"})}dojo.fadeIn({node:n[0]}).play();l.removeClass("swg-popupTrig-ready").addClass("swg-popupTrig-showing")}else{dojo.fadeOut({node:n[0]}).play();setTimeout(function(){n.hide()},300);l.removeClass("swg-popupTrig-showing").addClass("swg-popupTrig-ready")}});dojo.query("html").onkeypress(function(o){if(!dojo.isHidden(n)&&o.keyCode==dojo.keys.ESCAPE){l.trigger("click")}}).onclick(function(o){if(!dojo.isHidden(n)&&dojo.query(o.target).closest("div.swg-popupMenu").length==0){l.trigger("click")}})})};dojo.isHidden=function(h){return dojo.query(h).style("display")=="none"};dojo.loadCss=function(h){var i=document.createElement("link");i.href=h;i.rel="stylesheet";i.type="text/css";document.getElementsByTagName("head")[0].appendChild(i)};dojo.hide=function(h){dojo.style(h,"display","none")};dojo.NodeList.prototype.hide=dojo.NodeList._adaptAsForEach(dojo.hide);dojo.showBlock=function(h){dojo.style(h,"display","block")};dojo.NodeList.prototype.showBlock=dojo.NodeList._adaptAsForEach(dojo.showBlock);dojo.showInline=function(h){dojo.style(h,"display","inline")};dojo.NodeList.prototype.showInline=dojo.NodeList._adaptAsForEach(dojo.showInline);var a=dojo.isFunction,f=function(j,i){j=dojo.byId(j);i=i&&i.slice(0,2)=="on"?i.slice(2):i;if(dojo.doc.createEvent){var h=dojo.doc.createEvent("HTMLEvents");h.initEvent(i,true,true);j.dispatchEvent(h)}else{if(dojo.doc.createEventObject){j.fireEvent("on"+i)}}},b=function(){return dojo.hitch.apply(d,arguments)()};dojo.trigger=function(i,h){return(a(i)||a(h)||a(i[h]))?b.apply(d,arguments):f(i,h)};dojo.NodeList.prototype.trigger=dojo.NodeList._adaptAsForEach(f);if(dojo._Node&&!dojo._Node.prototype.trigger){dojo.extend(dojo._Node,{trigger:function(h){f(this,h);return this}})}})();