function bindEvts(a){oldTarget=currentTarget,currentTarget=a}function onAppLoad(){sendAnalytics("next app loaded","next app is loaded","triggered event to current captcha to show try again"),_canReload=!0,log("ON APP LOAD!!"),oldTarget&&("canvas"==_type?oldTarget.trigger("nextAppLoaded",{loaded:!0}):oldTarget.NextAppLoad(!0))}function passLoadProgress(a){"canvas"==_type?oldTarget.trigger("loadProgress",{appProgress:a}):oldTarget.LoadProgress(a)}function hideApp(){currentTarget||("canvas"==_type?currentTarget.trigger("hideApp"):currentTarget.hideApp())}function showApp(){currentTarget||("canvas"==_type?currentTarget.trigger("showApp"):currentTarget.showApp())}function showMeta(){switch($(".patent").fadeOut(),_meta_theme){case"2":break;default:$(".audioBtn").fadeIn(),$(".audioBtn").animate({left:"230"}),_show_phone||$(".meta_text").fadeIn(),$(".reloadBtn").fadeIn(),$(".logo").fadeIn(),$(".helpBtn").fadeIn(),$(".starpic").fadeIn(),$(".starCount").fadeIn()}}function displayPhoneOption(){_show_phone||($(".logo-url").hide(),$(".humanText").hide(),$(".phoneBtn").show(),_show_phone=!0,sendAnalytics("phone captcha","display option","displayed phone captcha button"))}function checkPhoneMode(){if(!_show_phone)switch(log("_pl: "+_pl+", _refresh_count: "+_refresh_count),parseInt(_pl)){case 1:_refresh_count>=3&&displayPhoneOption();break;default:_refresh_count>=1&&displayPhoneOption()}}function hideMeta(){switch(_meta_theme){case"2":break;default:$(".meta_text").hide(),$(".reloadBtn").hide(),$(".gameBtn").hide(),$(".logo").hide(),$(".helpBtn").hide(),$(".starpic").hide(),$(".starCount").hide()}}function solveMeta(){switch(sendAnalytics("meta solve","code told to show meta solve","displayed well done in meta footer"),log("SOLVED!"),$(".phoneBtn").hide(),_meta_theme){case"2":$(".audioBtn").fadeOut(),$(".meta_text").fadeOut(),$(".reloadBtn").fadeOut(),$(".gameBtn").fadeOut(),$(".helpBtn").fadeOut(),$(".success").fadeIn();break;default:$(".audioBtn").fadeOut(),$(".meta_text").fadeOut(),$(".reloadBtn").fadeOut(),$(".gameBtn").fadeOut(),$(".logo").fadeOut(),$(".helpBtn").animate({left:"230"}),$(".success").fadeIn()}window.postMessage&&(parent.postMessage("complete","*"),_get_query.col&&(log("Get collected data"),parent.postMessage("get_col_data","*")))}function loadVictoryScreen(a,b,c,d,e){log("html content: "+d);var f=!0;if(_extra_victory_data){if(_extra_victory_data.fc_victory_html){var g=$(_extra_victory_data.fc_victory_html);$("#victoryScreen").empty(),$("#victoryScreen").append(g)}loadedVictoryScreen(),f=!1}else"INJECT"==d&&(log("Injecting html..."),_game_data.customGUI.inject&&(f=!1,window.postMessage&&(sendAnalytics("inject","display injected"),_game_data.customGUI.inject,parent.postMessage(JSON.stringify({msg:"inject",data:_game_data.customGUI.inject}),"*"),setTimeout(function(){parent.postMessage(JSON.stringify({msg:"show_inject"}),"*")},2500),loadedVictoryScreen()),ie_ver&&7>=ie_ver&&(sendAnalytics("inject","inject fallback image"),d=$('<img src="'+_game_data.customGUI.inject.extra.fallback_victory+'" style="z-index:2;position: absolute;" />'),$("#victoryScreen").empty(),$("#victoryScreen").append(d),loadedVictoryScreen())));if(f){c&&(_end_url=c.length>0?c:_end_url),b&&(_end_survey_result=b),log("Load victory screen event!"),log(a);var g=d?$(d):$('<img style="z-index:2;position: absolute;" />');e&&(_extra_data.fc_click_macro=e),$("#victoryScreen").empty(),$("#victoryScreen").append(g),d?loadedVictoryScreen():(g.bind("load",function(){loadedVictoryScreen()}).attr("src",a),setTimeout(function(){$("#victoryScreen").append('<p id="victoryWait" style="position: absolute;left: 100px;bottom: 20px;">Please wait...</p>'),loadedVictoryScreen()},4500)),_end_url&&_end_url.length>0&&$("#victoryScreen").addClass("pointer")}}function loadedVictoryScreen(){log("loaded victory screen"),currentTarget&&("canvas"==_type?currentTarget.trigger("victoryScreenLoaded",{loaded:!0}):currentTarget.victoryScreenLoaded())}function showVictoryScreen(){$(".ctn").fadeOut(),_extra_victory_data&&_extra_victory_data.fc_hide_victory_html&&(showVictoryID=!1),showVictoryID&&$("#victoryScreen").fadeIn()}function RCMetaUpload(){sendAnalytics("meta solve","code told to show recaptcha meta solve","hidden reload and audio buttons"),log("SOLVED!"),solveMeta(),$(".success").hide()}function disableClick(){$(".logo-url").removeAttr("href")}function getSameFC(){_refresh_count++,checkPhoneMode(),log("***Getting same FC***"),setupSameChallenge()}function getFunCaptcha(){function a(a){_firstHidden?(log("Hide new flash"),oldTarget=currentTarget,currentTarget=a.ref,a.ref.style.visibility="hidden"):(_firstHidden=!0,log("No need to hide first swf"),currentTarget=a.ref,$("#ctn-1").addClass("front"))}log("***Getting FC***"),_type&&_challengeURL&&("canvas"==_type?1==_currentFrame?(_currentFrame=2,setiFrameURL("CaptchaFrame","../apps/"+_type+"/"+_challengeURL+"/index.php")):(_currentFrame=1,_showStartupBool=!1,setiFrameURL("CaptchaFrame2","../apps/"+_type+"/"+_challengeURL+"/index.php")):1==_currentFrame?(_currentFrame=2,swfobject.embedSWF("../apps/"+_type+"/"+_challengeURL+"/"+_challengeURL+".swf?c="+_cache,"CaptchaFrame","300","250","9.0.115",null,null,{scale:"showall",menu:"false"},null,a)):(_currentFrame=1,_showStartupBool=!1,swfobject.embedSWF("../apps/"+_type+"/"+_challengeURL+"/"+_challengeURL+".swf?c="+_cache,"CaptchaFrame2","300","250","9.0.115",null,null,{scale:"showall",menu:"false"},null,a)))}function destroyLastCaptcha(){log("***Destroying FC***"),"canvas"==_type||(oldTarget.style.visibility="hidden",currentTarget.style.visibility="visible"),2==_currentFrame?("flash"==_type&&($("#CaptchaFrame1").show(),$("#CaptchaFrame2").hide()),"flash"==_type&&($("#CaptchaFrame1").show(),$("#CaptchaFrame2").hide()),$("#ctn-1").toggleClass("front"),$("#ctn-2").toggleClass("front"),setiFrameURL("CaptchaFrame2",_blank_url)):("flash"==_type&&($("#CaptchaFrame1").hide(),$("#CaptchaFrame2").show()),$("#ctn-1").toggleClass("front"),$("#ctn-2").toggleClass("front"),setiFrameURL("CaptchaFrame",_blank_url))}function setupChallenge(){_default_game?(_challengeURL=_default_game,setupSameChallenge()):(sendAnalytics("get fc","get new captcha"),$.ajax({url:"../gfct/",type:"post",timeout:1e4,data:{token:_session_token,sid:_sid,lang:_lang},headers:{"cache-control":"no-cache"},success:function(a){return'{"error":"DENIED ACCESS"}'===a?(setTimeout(function(){setupChallenge()},3e3),!1):(setupWithData(a),$(".loader-logo").fadeIn(),void 0)},error:function(){setTimeout(function(){setupChallenge()},3e3)}}))}function setupSameChallenge(){sendAnalytics("get fc","get same captcha",_challengeURL),$.ajax({url:"../gfct/",type:"post",timeout:1e4,data:{token:_session_token,sid:_sid,repeat:_challengeURL,lang:_lang},headers:{"cache-control":"no-cache"},success:function(a){return'{"error":"DENIED ACCESS"}'===a?(setTimeout(function(){setupSameChallenge()},3e3),!1):(setupWithData(a),void 0)},error:function(){setTimeout(function(){setupSameChallenge()},3e3)}})}function setupNewChallenge(){_lock_game?setupSameChallenge():(showLoader(),log("***Get diff FC***"),sendAnalytics("get fc","get different captcha",_challengeURL),$.ajax({url:"../gfct/",type:"post",timeout:1e4,data:{token:_session_token,sid:_sid,skip:_challengeURL,lang:_lang},headers:{"cache-control":"no-cache"},success:function(a){return'{"error":"DENIED ACCESS"}'===a?(setTimeout(function(){setupNewChallenge()},3e3),!1):(setupWithData(a),void 0)},error:function(){setTimeout(function(){setupNewChallenge()},3e3)}}))}function setupWithData(a){log("response"),log(a),log("********"),_cdn_backup&&(a=a.replace(new RegExp(_primary_cdn_url,"g"),_backup_cdn_url));var b=jQuery.parseJSON(a);log(b),b.error?timeoutMode():(_session_started=!0,_challengeURL=b.challengeURL,_game_token=b.challengeID,_appvars=b.appvars,_sec_level=parseFloat(b.sec),_end_url=b.end_url,_game_data=b.game_data?b.game_data:{},_lang=_lang?_lang:b.lang,_lang_data=b.lang_data,_game_sid=b.game_sid,_sid=b.sid,setupExtraData(),_game_data.customGUI&&_game_data.customGUI.inject&&(_extra_data=_game_data.customGUI.inject.extra,log("***EXTRA IS***"),log(_extra_data)),_game_data.extra_data=_extra_data,0===_game_data.click_enabled&&disableClick(),getFunCaptcha(),sendAnalytics("setup fc"))}function timeoutMode(){$("#phone_widget").hide(),_htmlVerify&&$("#html-verify").hide(),hideMeta(),$(".audioBtn").fadeOut(),$(".meta_text").fadeOut(),$(".reloadBtn").fadeOut(),$(".gameBtn").fadeOut(),$(".helpBtn").fadeOut(),hideLoader(),sendAnalytics("timeout","session timeout display","show timeout gui"),log("Timeout mode"),$("#ctn-1").hide(),$("#ctn-2").hide(),setiFrameURL("CaptchaFrame",_blank_url),setiFrameURL("CaptchaFrame2",_blank_url),$("#audio").hide(),$("#recaptcha_widget").hide(),$("#timeout_widget").show()}function sendAnalytics(a,b,c,d){if("begin load"==a&&hideLoader(),"user clicked verify"==b&&!c){if(_user_clicked_verify)return;_user_clicked_verify=!0,showMeta()}log("Analytics to upload: "+a+" - "+b+" - "+c+" - "+d),$.ajax({url:"../a/",type:"post",data:{sid:_sid,game_token:_game_token,session_token:_session_token,game_type:_challengeURL,category:a,action:b,label:c,data:d},headers:{"cache-control":"no-cache"},success:function(a){log("analytics response"),log(a),log("********")}})}function hasExtraData(){return _extra_victory_data?1:_extra_data?1:0}function getCDN(){return _cdn_url}function showStartup(){return _showStartupBool}function getSID(){return _sid}function getGameToken(){return _game_token}function getGameData(){return _game_data}function getLang(){return _lang}function getLangData(){return _lang_data}function getGameSid(){return _game_sid}function getSessionToken(){return _session_token}function getDebug(){return _debug}function getVars(){return _appvars}function getSec(){return _sec_level}function getTime(){return _time}function setTime(a){_time=a}function showSpinner(){$(".loader-logo, .load-txt").hide(),$(".loader-ctn").show()}function hideSpinner(){$(".loader-ctn").hide(),$(".loader-logo, .load-txt").show()}function showLoader(){$(".loader-ctn").fadeIn()}function hideLoader(){$(".loader-ctn").fadeOut()}function bake_cookie(a,b){if(window.location){var c=[a,"=",JSON.stringify(b),"; domain=.",window.location.host.toString(),"; path=/;"].join("");document.cookie=c}}function read_cookie(a){var b=document.cookie.match(new RegExp(a+"=([^;]+)"));return b&&(b=JSON.parse(b[1])),b}function metricLoader(a){a&&(-1!=a.indexOf("adurl")&&(a+=_site_url),$("body").append('<img src="'+a+'" height="0" width="0" style="width:0px !important;height 0px !important"></img>'))}function setupExtraData(){_extra_data&&(_end_url=_extra_data.fc_banner_url?_extra_data.fc_banner_url:"",_extra_data.fc_default_game&&""!=_extra_data.fc_default_game&&"auto"!=_extra_data.fc_default_game&&(_default_game=_extra_data.fc_default_game),_extra_data.fc_lock_game&&""!=_extra_data.fc_lock_game&&(_lock_game="Yes"==_extra_data.fc_lock_game?1:0),_extra_data.fc_append_survey&&(_append_survey="Yes"==_extra_data.fc_append_survey?1:0))}function getEndURL(){return sendAnalytics("get url","get app url",_end_url),_end_url?_end_url.length>0?_end_url:null:null}function setStars(a){_currentStars+=a,_currentStars>99&&(_currentStars=99),$(".starCount").html(_currentStars),sendAnalytics("set stars","code told to how stars",a),bake_cookie("_fc_player_stars",_currentStars)}function boostRefresh(){checkPhoneMode(),_refresh_count++}function log(a){if(_debug)try{console.log(a)}catch(b){}}function setiFrameURL(a,b){var c=document.getElementById(a);null!==c&&(c.contentWindow?c.contentWindow.location.replace(b):c.src?c.src=b:$("#"+a).prop("src",b))}function isIE(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1}function crypt(a){return Aes.Ctr.encrypt(a,_session_token,256)}var _debug=!1,_cache=12,_primary_cdn_url="cdn.funcaptcha.net",_backup_cdn_url="static-fc.s3.amazonaws.com",_blank_url="https://funcaptcha.net/fc/gc/blank.html",_cdn_url="",_cdn_backup=!1,_currentFrame=1,_showStartupBool=!0,_session_token,_game_token,_challengeURL,_sid,_canReload=!1,_appvars,_time=0,_type="canvas",_flashEnabled=!0,_mode="fc",_firstHidden=!1,_currentStars=0,_player_token="",_get_query,_htmlVerify=!1,_sec_level,_end_url="",_game_sid,_site_url,_default_game,_lock_game,_game_data,_lang_data,_extra_data,_extra_victory_data,_snippet_data,_end_survey_result,_lang="en",_meta_theme=0,_user_clicked_verify=!1,_session_started=!1,_pl=0,_refresh_count=0,_textCaptchaMade=!1,_show_audio=!1,_lightbox_firefox_loaded=!1,isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1,_android_ver;isAndroid&&(_android_ver=parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8)));var ie_ver=isIE(),_append_survey=!1,_appended_survey=!1,showPhoneMode=function(){};$(document).ready(function(){function a(){b()?(sendAnalytics("not browser support","falling back to image captcha"),showPhoneMode()):Modernizr.canvas?_session_token?setupChallenge():log("Error setting up FC."):(sendAnalytics("flash fallback"),log("***** Falling back to flash support *****"),_type="flash",$("#CaptchaFrame2").hide(),swfobject.hasFlashPlayerVersion("9.0.18")?_session_token?setupChallenge():log("Error setting up FC."):(sendAnalytics("display failure","no flash or html5","displayed warning"),showPhoneMode()))}function b(){var a=!1;return(window.operamini||-1!=navigator.userAgent.indexOf("Opera Tablet")||-1!=navigator.userAgent.indexOf("Opera Mobi"))&&(a=!0,l=!0),-1!=navigator.userAgent.indexOf("Puffin")&&(a=!0),(-1!=navigator.userAgent.indexOf("UCBrowser")||-1!=navigator.userAgent.indexOf("UCWEB"))&&(a=!0),3==_pl&&(a=!0),log("Image fallback: "+a),a}function c(){sendAnalytics("zero credits","display html verify"),$("#ctn-1").hide(),$("#ctn-2").hide(),$("#html-verify").show(),hideLoader()}function d(){showLoader(),showMeta(),_htmlVerify=!1,$("#html-verify").hide(),$("#ctn-1").show(),$("#ctn-2").show(),_showStartupBool=!1,a()}function e(){_htmlVerify?d():_canReload&&(_canReload=!1,_refresh_count++,checkPhoneMode(),"fc"==_mode?(sendAnalytics("reload captcha","user clicked reload"),$("#ctn-1 iframe").replaceWith('<iframe class="wrapper" id="CaptchaFrame" src="'+_blank_url+'" horizontalscrolling="no" verticalscrolling="no" scrolling="no"></iframe>'),$("#ctn-2 iframe").replaceWith('<iframe class="wrapper" id="CaptchaFrame2" src="'+_blank_url+'" horizontalscrolling="no" verticalscrolling="no" scrolling="no"></iframe>'),"flash"==_type&&($("#CaptchaFrame1").show(),$("#CaptchaFrame2").hide()),$("#ctn-1").removeClass("front"),$("#ctn-2").removeClass("front"),$("#ctn-1").addClass("front"),_firstHidden=!1,_currentFrame=1,_showStartupBool=!0,setupNewChallenge()):"phone"==_mode?(r(),_canReload=!0):(Recaptcha.reload(),_canReload=!0))}function f(){var a=$("#recaptcha_response_field").val(),b=$("#recaptcha_challenge_field").val();""!=a?($("#recaptcha_widget").hide(),$("#audio_commit").show(),sendAnalytics("audio captcha","user submited guess"),$.post("../audio/",{r:_sid,session_token:_session_token,response:a,challenge:b},function(a){log("audio response"),log(a),log("********");var b=jQuery.parseJSON(a);"correct"==b.response?(RCMetaUpload(),sendAnalytics("audio captcha","guess confirmed by server"),setStars(3),$("#audio_commit").hide(),$("#audio_solve").show()):(alert("Incorrect, try again"),Recaptcha.reload(),$("#recaptcha_widget").show(),$("#audio_commit").hide())})):(sendAnalytics("audio captcha","user tried to submit blank","error displayed"),alert(lang_obj.audio_alert))}function g(){_user_clicked_verify||(_user_clicked_verify=!0,sendAnalytics("begin app","user clicked verify","triggered from audio")),w(),displayPhoneOption(),showMeta(),_htmlVerify&&($("#html-verify").hide(),_htmlVerify=!1),$(".audioBtn").hide(),$(".gameBtn").show(),_mode="audio",p()}function h(){log("_type: "+_type),"image"!=_type?(_firstHidden=!1,_mode="fc",$(".audioBtn").show(),$(".gameBtn").hide(),$("#audio").hide(),$("#recaptcha_widget").hide(),$("#ctn-1").show(),$("#ctn-2").show(),$("#ctn-1").removeClass("front"),$("#ctn-2").removeClass("front"),$("#ctn-1").addClass("front"),_currentFrame=1,setupChallenge()):Recaptcha.switch_type("image")}function n(){m?Recaptcha.create("6Lc7hvUSAAAAAPx7PpoPuefKklnKgB3qq3cu4m25","audio",{theme:"custom",custom_theme_widget:"recaptcha_widget",callback:o,lang:_lang}):(showLoader(),$.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){hideLoader(),m=!0,n()}))}function o(){"image"!=_type?($("#recaptcha_image img").hide(),$(".recaptcha_only_if_image").hide(),$("#recaptcha_challenge_image").hide()):_canReload=!0,_show_audio&&!_textCaptchaMade&&(_textCaptchaMade=!0,p())}function p(){_textCaptchaMade?(hideLoader(),sendAnalytics("audio captcha","user clicked audio","swapped to audio captcha"),Recaptcha.switch_type("audio"),_session_started=!0,log("Trigger RECAPTCHA"),$("#ctn-1").hide(),$("#ctn-2").hide(),setiFrameURL("CaptchaFrame",_blank_url),setiFrameURL("CaptchaFrame2",_blank_url),$("#audio").show(),$("#recaptcha_widget").show(),Recaptcha.focus_response_field()):(_show_audio=!0,n())}function q(a,b){$("#phone")[0].value?($(".call-me-btn").hide(),a||($(".phone_1").hide(),$(".phone_2").show(),$(".passcode_entry_info").text(lang_obj.code_title_sent.split("&&")[0]+$("#phone")[0].value+" "+lang_obj.code_title_sent.split("&&")[1])),k=2,setTimeout(function(){$("#phone_response_field")[0].value||$(".call-me-btn").show()},2e4),$.ajax({url:"../phone/msg/",type:"post",data:{sid:_sid,session_token:_session_token,phone_number:crypt($("#phone")[0].value),method:b?b:"sms"},headers:{"cache-control":"no-cache"},success:function(a){log("phone send response"),log(a),log("********");var b=jQuery.parseJSON(a);if(0==b.success)if("limited"==b.response)k=5,$(".phone_limit").show(),$(".phone_2").hide();else{r();var c=b.response;"."!=c.slice(-1)&&(c+="."),$("#phone_cant_text").hide(),$("#phone_submit_call").show(),$(".phone_start_intro").text(c+" "+lang_obj.entry_title_error)}}})):$(".phone_start_intro").text(lang_obj.entry_title_default)}function r(){$(".phone_start_intro").text(lang_obj.entry_title_default),$("#phone")[0].value="",$("#phone_response_field")[0].value="",k=1,$(".phone_1").show(),$(".phone_2").hide(),$(".phone_3").hide(),$(".phone_limit").hide(),$(".phone_limit_2").hide()}function s(){$(".phone_start_intro").text(lang_obj.entry_title_notext),$("#phone_cant_text").hide(),$("#phone_submit_call").show()}function t(){$("#phone_response_field")[0].value?($(".phone_2").hide(),k=3,showSpinner(),$.ajax({url:"../phone/v/",type:"post",data:{sid:_sid,session_token:_session_token,passcode:crypt($("#phone_response_field")[0].value)},headers:{"cache-control":"no-cache"},success:function(a){log("phone verify response"),log(a),log("********"),hideSpinner();var b=jQuery.parseJSON(a);1==b.success?(k=4,$(".phone_info").hide(),$(".phone_3").show(),solveMeta()):"limited"==b.response?(k=5,$(".phone_limit").show(),$(".phone_2").hide()):(k=2,$(".passcode_entry_info").text(lang_obj.code_incorrect),$(".phone_2").show())}})):alert(lang_obj.code_not_input)}function v(){$(".phone_limit").hide(),$(".phone_limit_2 .title").text(lang_obj.capped_calling_title.split("&&")[0]+$("#phone")[0].value+" "+lang_obj.capped_calling_title.split("&&")[1]),$(".phone_limit_2").show(),k=6,u||(u=!0,$.ajax({url:"../phone/c/",type:"post",data:{sid:_sid,session_token:_session_token,phone_number:crypt($("#phone")[0].value),site:_site_url},headers:{"cache-control":"no-cache"},success:function(a){log("phone contact response"),log(a),log("********")}}))}function w(){"phone"==_mode&&(_firstHidden=!1,k=0,_mode="fc",$(".phoneBtn").text(lang_obj.footer_phone_mode_on),$("#phone_widget").hide(),$("#ctn-1").show(),$("#ctn-2").show(),$("#ctn-1").removeClass("front"),$("#ctn-2").removeClass("front"),$("#ctn-1").addClass("front"),_currentFrame=1,setupChallenge())}function x(a){a=a.split("+").join(" ");for(var c,b={},d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);return b}function z(){return _get_query.token}function A(){return _get_query.intro}function C(){_currentStars=read_cookie("_fc_player_stars"),null==_currentStars&&(_currentStars=0),$(".starCount").html(_currentStars)}function D(b){if(log("Got a message!"),log(b),b.data)if("lightbox_show"==b.data)(navigator.userAgent.toLowerCase().indexOf("firefox")>-1||navigator.userAgent.toLowerCase().indexOf("crios")>-1)&&(log("Firefox fix for lightbox"),_lightbox_firefox_loaded?($("#ctn-1 iframe").replaceWith('<iframe class="wrapper" id="CaptchaFrame" src="'+_blank_url+'" horizontalscrolling="no" verticalscrolling="no" scrolling="no"></iframe>'),$("#ctn-2 iframe").replaceWith('<iframe class="wrapper" id="CaptchaFrame2" src="'+_blank_url+'" horizontalscrolling="no" verticalscrolling="no" scrolling="no"></iframe>'),$("#ctn-1").removeClass("front"),$("#ctn-2").removeClass("front"),$("#ctn-1").addClass("front"),_firstHidden=!1,_currentFrame=1,setupNewChallenge()):(_lightbox_firefox_loaded=!0,_htmlVerify?c():a()));else if("lightbox_hide"==b.data);else if(Object(b.data)){if(log("msg is object!"),"store_player_data"==b.data.msg&&F(b.data.name,b.data.value),"snip_data"==b.data.msg){_snippet_data=b.data.data;for(var d in _snippet_data){var f=_snippet_data[d];"description"==d?$("head").append('<meta name="description" content="'+f+'">'):"title"==d?$("head").append("<title>"+f+"</title>"):"keywords"==d&&$("head").append('<meta name="keywords" content="'+f+'">')}_extra_victory_data.fc_js_lib&&$.getScript(_extra_victory_data.fc_js_lib)}b.data.fc_extra_data&&(_extra_data=b.data,log("_extra_data!!!"),log(_extra_data),sendAnalytics("extra data","display extra data"),setupExtraData(),2==_currentFrame&&(_canReload=!0,e()))}}function E(){"undefined"==typeof fcExtra?log("Cannot find FCEXTRA"):Object(fcExtra)&&(log("triggering fcExtra"),_extra_data=fcExtra.getExtraData(),log(_extra_data),sendAnalytics("extra data","display extra data"),setupExtraData()),"undefined"==typeof fcExtraVictory||Object(fcExtraVictory)&&(log("triggering fcExtra"),_extra_victory_data=fcExtraVictory.getExtraData(),log(_extra_victory_data),"CHITIKA"==_extra_victory_data.fc_type&&ie_ver&&8>ie_ver&&(_extra_victory_data=null,sendAnalytics("extra victory data","not displaying CHITIKA due to low IE version")),_extra_victory_data.click_macro&&(_extra_data||(_extra_data={}),_extra_data.click_macro=_extra_victory_data.click_macro),_extra_victory_data&&(_extra_victory_data.fc_snips&&window.postMessage&&parent.postMessage("get_snips","*"),sendAnalytics("extra victory data","display extra victory data"),setupExtraData()),_extra_data||(_extra_data={}),_extra_victory_data.fc_background_img&&(_extra_data.fc_background_img=_extra_victory_data.fc_background_img),_extra_victory_data.fc_ball_img&&(_extra_data.fc_ball_img=_extra_victory_data.fc_ball_img),_extra_victory_data.fc_banner_img&&(_extra_data.fc_banner_img=_extra_victory_data.fc_banner_img),_extra_victory_data.fc_ui_color&&(_extra_data.fc_ui_color=_extra_victory_data.fc_ui_color),_extra_victory_data.fc_ui_text_color&&(_extra_data.fc_ui_text_color=_extra_victory_data.fc_ui_text_color))}function F(a,b){$.ajax({url:"../pd/",type:"post",data:{sid:_sid,session_token:_session_token,s_n:crypt(a),s_v:crypt(b)},headers:{"cache-control":"no-cache"},success:function(a){log("pd response"),log(a),log("********")}})}function G(){if(_extra_victory_data&&_extra_victory_data.fc_click_macro&&metricLoader(_extra_victory_data.fc_click_macro),log("_end_url: "+_end_url),_end_url&&_end_url.length>0){if(_append_survey&&!_appended_survey&&(log("_end_survey_result: "+_end_survey_result),_end_survey_result)){var a=_end_url&&-1!==_end_url.indexOf("?"),b=a?"&":"?";_appended_survey=!0,_end_url=_end_url+b+"fcs="+_end_survey_result}sendAnalytics("end url clicked","open end url",_end_url),window.open(_end_url,"_blank")}_extra_data&&_extra_data.fc_click_macro&&""!=_extra_data.fc_click_macro&&metricLoader(_extra_data.fc_click_macro)}function H(){var a=!0;2.4>=_android_ver&&(a=!1),ie_ver&&8>=ie_ver&&(a=!1),a?_cdn_url="https://"+_primary_cdn_url+"/fc":(_cdn_backup=!0,_cdn_url="https://"+_backup_cdn_url+"/fc")}function I(){setTimeout(function(){J()},12e4)}function J(){$.ajax({url:"../misc/refresh/",type:"post",data:{cache_key:_session_token,sid:_sid},headers:{"cache-control":"no-cache"},success:function(a){var b=jQuery.parseJSON(a);b.error?timeoutMode():I()},error:function(){setTimeout(function(){J()},1e4)}})}_get_query=x(document.location.search),_session_token=z(),_htmlVerify=A(),_sid=_get_query.r,_lang=_get_query.lang?_get_query.lang:"en",_meta_theme=_get_query.meta,H(),_get_query.pl&&(_pl=_get_query.pl,2==_pl&&displayPhoneOption()),setTimeout(function(){_session_started||displayPhoneOption()},1e4),I(),isAndroid&&(_default_game="002",("250"==_get_query.size||250==_get_query.size)&&4==_android_ver&&$("body").addClass("android4")),E(),C(),hideMeta(),window.postMessage&&(window.addEventListener?window.addEventListener("message",D,!1):window.attachEvent&&window.attachEvent("onmessage",D)),_site_url=window.location!=window.parent.location?document.referrer:document.location,sendAnalytics("Site URL",_site_url),window.postMessage&&parent.postMessage("check_extra","*"),(navigator.userAgent.toLowerCase().indexOf("firefox")>-1||navigator.userAgent.toLowerCase().indexOf("crios")>-1)&&_get_query.lb||(_htmlVerify?c():a()),$("#html-verify-btn").click(function(){d()}),$("#victoryScreen").click(function(){G()}),$(".reloadBtn").click(function(){e()}),$("#audio_submit").click(function(){f()}),$(".audioBtn").click(function(){g()}),$(".gameBtn").click(function(){h()}),$(".phoneBtn").click(function(){"phone"==_mode?w():showPhoneMode()}),$(".phoneBtn").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&("phone"==_mode?w():showPhoneMode())}),$("#phone_submit").click(function(){q()}),$("#phone_submit").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&q()}),$("#phone_cant_text").click(function(){s()}),$("#phone_cant_text").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&s()}),$("#phone_submit_call").click(function(){$("#phone_sms").hide(),$("#phone_call").text(lang_obj.call_me_again_button),q(null,"call")}),$("#phone_submit_call").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&($("#phone_sms").hide(),$("#phone_call").text(lang_obj.call_me_again_button),q(null,"call"))}),$("#phone_sms").click(function(){q("again","sms")}),$("#phone_sms").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&q("again","sms")}),$("#phone_call").click(function(){q("again","call")}),$("#phone_call").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&q("again","call")}),$("#phone_change").click(function(){r()}),$("#phone_change").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&r()}),$("#phone_passcode_submit").click(function(){t()}),$("#phone_passcode_submit").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&t()}),$("#phone_contact").click(function(){v()}),$("#phone_contact").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&v()}),$("#phone").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&q()}),$("#phone").focus(function(){this.selectionStart=this.selectionEnd=this.value.length}),$("#phone_response_field").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&t()}),$(".reloadBtn").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&e()}),$(".audioBtn").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&g()}),$(".gameBtn").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&h()}),$("#recaptcha_response_field").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&f()});var i=!1,j="",k=0,l=!1;showPhoneMode=function(){if($("#html-verify").hide(),"fc"==_mode?($("#ctn-1").hide(),$("#ctn-2").hide(),setiFrameURL("CaptchaFrame",_blank_url),setiFrameURL("CaptchaFrame2",_blank_url)):("audio"==_mode&&($(".audioBtn").show(),$(".gameBtn").hide()),$("#audio").hide(),$("#recaptcha_widget").hide()),hideSpinner(),_mode="phone",r(),$(".phoneBtn").text(lang_obj.footer_phone_mode_off),sendAnalytics("phone captcha","user clicked phone","swapped to phone captcha"),_user_clicked_verify||(_user_clicked_verify=!0,sendAnalytics("begin app","user clicked verify","triggered from phone")),i){_session_started=!0,$("#phone").intlTelInput({defaultCountry:j,preferredCountries:["us","gb","au"]}),$("#phone_widget").show();var a=!1;ie_ver&&9>ie_ver&&(a=!0,$("#phone").css("padding","3px"),$("#phone").css("height","16px")),(3>=_android_ver||a)&&($(".flag-dropdown").hide(),$("#phone").css("padding-left","5px"),$(".intl-tel-input").css("margin-left","20px"),l=!0),l&&$(".phone_start_intro").text(lang_obj.entry_title_nocountry),setTimeout(function(){$("#phone")[0].value||$("#phone_cant_text").show()},1e4)}else showSpinner(),$.getScript(_cdn_url+"/gc/js/phone.js?cache="+_cache,function(){var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=_cdn_url+"/gc/css/phone.css",document.getElementsByTagName("head")[0].appendChild(a),i=!0,showPhoneMode()}),$.ajax({url:"../misc/iploc/",type:"post",headers:{"cache-control":"no-cache"},success:function(a){if(a){var b=jQuery.parseJSON(a);j=b.country.toLowerCase(),$("#phone").intlTelInput&&$("#phone").intlTelInput("selectCountry",j)}}})};var m=!1,u=!1});var oldTarget,currentTarget,_show_phone=!1,_loaded_victory_screen="",showVictoryID=!0;