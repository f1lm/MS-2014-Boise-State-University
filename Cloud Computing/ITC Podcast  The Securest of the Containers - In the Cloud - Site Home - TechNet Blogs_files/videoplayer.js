/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})})(jQuery);
/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})})(jQuery);
/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
/*! jQuery UI - v1.10.4 - 2014-06-08
* http://jqueryui.com
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,a=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,a,o,r,l,h,c,u,d,p=t(this).data("ui-draggable"),g=p.options,f=g.snapTolerance,m=i.offset.left,_=m+p.helperProportions.width,v=i.offset.top,b=v+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,l=r+p.snapElements[u].width,h=p.snapElements[u].top,c=h+p.snapElements[u].height,r-f>_||m>l+f||h-f>b||v>c+f||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==g.snapMode&&(s=f>=Math.abs(h-b),n=f>=Math.abs(c-v),a=f>=Math.abs(r-_),o=f>=Math.abs(l-m),s&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=s||n||a||o,"outer"!==g.snapMode&&(s=f>=Math.abs(h-v),n=f>=Math.abs(c-b),a=f>=Math.abs(r-m),o=f>=Math.abs(l-_),s&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||a||o||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})})(jQuery);
/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function f(n){return t.raw?n:decodeURIComponent(n)}function e(n){return i(t.json?JSON.stringify(n):String(n))}function o(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(u," ")),t.json?JSON.parse(n):n}catch(i){}}function r(i,r){var u=t.raw?i:o(i);return n.isFunction(r)?r(u):u}var u=/\+/g,t=n.cookie=function(u,o,s){var y,a,h,v,c,p;if(o!==undefined&&!n.isFunction(o))return s=n.extend({},t.defaults,s),typeof s.expires=="number"&&(y=s.expires,a=s.expires=new Date,a.setTime(+a+y*864e5)),document.cookie=[i(u),"=",e(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(h=u?undefined:{},v=document.cookie?document.cookie.split("; "):[],c=0,p=v.length;c<p;c++){var w=v[c].split("="),b=f(w.shift()),l=w.join("=");if(u&&u===b){h=r(l,o);break}u||(l=r(l))===undefined||(h[b]=l)}return h};t.defaults={};n.removeCookie=function(t,i){return n.cookie(t)===undefined?!1:(n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t))}});
/**
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.6
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,targ,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
(function(n){"use strict";var t=ch9.functions;t.ProgressControlConstructor=function(t){var i=this,r;if(this.control=t,i.control.hasClass("circles"))for(r=0;r<6;r++)i.control.append(n("<span>").addClass("circle"));return{show:function(){i.control&&i.control.fadeIn("slow")},hide:function(){i.control&&i.control.fadeOut("fast")}}}})(jQuery);
(function(){var i=ch9.functions;i.userAgent={};var f,t={Name:"Unknown",Major:0,Type:"Unknown"},n={Name:"Unknown",Major:0,Minor:0,Type:"Unknown"},e=function(n){if(f)return f;try{var t;t=n?n:window.navigator.userAgent;f=t}catch(i){}return f},u=function(){var n=e(),i;return t.Name!="Unknown"?t:(n.toLowerCase().indexOf("iphone")>=0||n.toLowerCase().indexOf("ipod")>=0?(i=n.split("Version/")[1].split("."),t.Name="iPhone",t.Major=parseInt(i[0])):n.toLowerCase().indexOf("android")>=0?(t.Name="Android",i=n.indexOf("Version/")>-1?n.split("Version/")[1].split("."):n.split("Android")[1].split("."),t.Major=parseInt(i[0])):n.toLowerCase().indexOf("iemobile")>=0?(i=n.toLowerCase().split("iemobile/")[1].split("."),t.Name="WindowsPhone",t.Major=parseInt(i[0])):n.toLowerCase().indexOf("windows nt")>=0||n.toLowerCase().indexOf("mozilla/4.0 (compatible; msie 6.0)")>=0?(t.Name="Windows",n.toLowerCase().indexOf("windows nt 5.0")>=0&&(t.Type="Win2k"),n.toLowerCase().indexOf("win64")>=0&&(t.Type="Win64")):n.toLowerCase().indexOf("ppc mac os x")>=0?(t.Name="Mac",t.Type="PPC"):n.toLowerCase().indexOf("intel mac os x")>=0?(t.Name="Mac",t.Type="Intel"):n.toLowerCase().indexOf("linux")>=0&&(t.Name="Linux"),t)},r=function(){var t=e(),i,r;return n.Name!="Unknown"?n:(t.indexOf("Firefox")>=0?(i=t.split("Firefox/")[1].split("."),n.Name="Firefox",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Chrome")>=0?(i=t.split("Chrome/")[1].split("."),n.Name="Chrome",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Safari")>=0?(i=t.split("Version/")[1].split("."),n.Name="Safari",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Opera")>=0?(i=t.split("Version/")[1].split("."),n.Name="Opera",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1].substring(0,1))):t.indexOf("Minefield")>=0?(i=t.split("Minefield/")[1].split("."),n.Name="Minefield",n.Major=parseInt(i[0]),n.Minor=parseInt(i[1])):t.indexOf("Gecko/")>=0?(r=t.split("Gecko/")[1].substring(0,6),n.Name="Gecko",n.Major=parseInt(r)):t.indexOf("MSIE")>=0?(n.Name="IE",n.Major=parseInt(t.split("MSIE")[1])):t.indexOf("Trident/")>-1&&t.indexOf("Windows NT 6.3")>-1&&(n.Name="IE",n.Major=parseInt(t.split("rv:")[1])),n)},o=function(){var t=u(),n=r();return t.Name=="WindowsPhone"&&(t.Major<7||t.Major==7&&t.Minor<5)||t.Name=="Android"&&t.Major>0&&(t.Major<2||t.Major==2&&t.Minor<3)||t.Name=="iPhone"&&t.Major<3||n.Name=="IE"&&n.Major<9||n.Name=="Firefox"&&(n.Major<3||n.Major==3&&n.Minor<5)||n.Name=="Chrome"&&n.Major<5||n.Name=="Safari"&&n.Major<3||n.Name=="Opera"&&(n.Major<10||n.Major==10&&n.Minor<5)?!1:!0},s=function(){var n=u();return n.Name=="WindowsPhone"||n.Name=="iPhone"||n.Name=="Android"&&n.Major<3?!1:!0},h=function(){var t=u(),n=r();return t.Name=="WindowsPhone"||t.Name=="Android"||t.Name=="iPhone"||t.Name=="Windows"&&(n.Name=="IE"&&n.Major<6||n.Name=="Safari"&&(n.Major<3||n.Major==5)||n.Name=="Firefox"&&n.Major<3||n.Name=="Minefield"&&n.Major<3||n.Name=="Gecko"&&n.Major<200805)||t.Name=="Mac"&&(n.Name=="IE"||n.Name=="Opera"||n.Name=="Safari"&&(n.Major<3||n.Major==5)||n.Name=="Firefox"&&n.Major<2||n.Name=="Minefield"&&n.Major<2)?!1:!0},c=function(){var n=r();return n.Name=="Firefox"&&n.Major==3&&n.Minor<7};i.userAgent.html5playerSupported=function(){return o()};i.userAgent.flashPlayerSupported=function(){return s()};i.userAgent.silverlightPossible=function(){return h()};i.userAgent.isMetro=function(){var n=r();return n.Name=="IE"&&n.Type=="Metro"};i.userAgent.isIE11Plus=function(){var n=r();return n.Name=="IE"&&n.Major>10};i.userAgent.isLt37Firefox=function(){return c()};i.userAgent.isIOS=function(){var n=e();return n.match(/iPhone/i)||n.match(/iPod/i)||n.match(/iPad/i)?!0:!1};i.userAgent.isIE10=function(){var t=u(),n=r();return t.Name=="Windows"&&n.Name=="IE"&&n.Major==10};i.userAgent.isIE9=function(){var t=u(),n=r();return t.Name=="Windows"&&n.Name=="IE"&&n.Major==9}})();
(function(n){"use strict";var t=ch9.functions;Date.prototype.toISOString||(Date.prototype.toISOString=function(){function n(n){return n<10?"0"+n:n}return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+n(this.getUTCMilliseconds())+"Z"});t.helpers={debug:!1,Key:{enter:13,pause:19,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105},isEntryPage:function(){var t=n("body");return t.hasClass("entry")||t.hasClass("session-page")||t.hasClass("hasVideo")},hasPlayerPage:function(){return this.isEntryPage()||n("body").hasClass("homepage")},basePageUrl:function(){var t=n('link[rel="canonical"]').attr("href");return t&&t.length>0?t:"http://"+window.location.host+window.location.pathname},months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],languages:{bg:"Bulgarian",cs:"Cezch","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",da:"Danish",nl:"Dutch",en:"English",fi:"Finnish",fr:"French",de:"German",el:"Greek",he:"Hebrew",hi:"Hindi",hu:"Hungarian",id:"Indonesian",it:"Italian",ja:"Japanese",ko:"Korean",nb:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",vi:"Vietnamese"},getDateFromJson:function(n){n=n||new Date(3001,0,1,0,0,0).toISOString();var t=n.indexOf("Date")>0?new Date(parseInt(n.substr(6))):new Date(n),i=this.getDayString(t),r=this.getMonthString(t)+" "+t.getDate()+", "+t.getFullYear(),u=this.getTimeString(t);return{date:t.toISOString(),day:t.getDay(),monthstring:this.getMonthString(t),datestring:r,daystring:i,longdatestring:i+", "+r,timestring:u,hourstring:this.getHourString(t),minutestring:this.getMinuteString(t),period:this.getTimePeriod(t),yearstring:this.getYearString(t),relativedatestring:this.getRelativeDateString(t)}},getRelativeDateString:function(n){var t=this.getTimeSpan(new Date,n);return t.totalDays>7?this.getMonthString(n)+" "+this.getDateString(n)+", "+this.getYearString(n):t.totalHours>24?t.totalDays+" day"+this.getPlural(t.totalDays)+" ago":t.totalMinutes>60?t.totalHours+" hour"+this.getPlural(t.totalHours)+" ago":t.totalSeconds>60?t.totalMinutes+" minute"+this.getPlural(t.totalMinutes)+" ago":t.totalSeconds>10?t.totalSeconds+" second"+this.getPlural(t.totalSeconds)+" ago":"a moment ago"},getTimeSpan:function(n,t){var i=n.getTime()-t.getTime();return{totalDays:Math.floor(i/864e5),totalHours:Math.floor(i/36e5),totalMinutes:Math.floor(i/6e4),totalSeconds:Math.floor(i/1e3)}},getPlural:function(n){return n==1?"":"s"},getDayString:function(n){return n?this.days[n.getDay()]:""},getDateString:function(n){return n?n.getDate():""},getMonthString:function(n){return n?this.months[n.getMonth()]:""},getYearString:function(n){return n?n.getFullYear().toString():"1900"},getTimeString:function(n){if(!n)return"";var t=this.getHourString(n),i=this.getMinuteString(n),r=this.getTimePeriod(n);return t+":"+i+" "+r},getTimePeriod:function(n){if(!n)return"";var t="pm",i=n.getHours();return i<12&&(t="am"),t},getHourString:function(n){if(!n)return"";var t=n.getHours();return t==0&&(t=12),t>12&&(t=t-12),t.toString()},getMinuteString:function(n){if(!n)return"";var t=n.getMinutes();return t<10&&(t="0"+t),t},getSeconds:function(n){var u;try{if(u=/(?:([\d]{0,2})h)?(?:([\d]{0,2})m)?(?:([\d]{0,2})s)?/i,u.test(n)){var f=n.match(u),t=parseInt(f[1]),i=parseInt(f[2]),r=parseInt(f[3]);return t=isNaN(t)?0:t*3600,i=isNaN(i)?0:i*60,r=isNaN(r)?0:r,t+i+r}}catch(e){this.debug&&console.log("error getting seconds from time string: "+n+" error: "+e)}return 0},getMinutes:function(n){if(isNaN(n))return"";try{var t=new Date(n*1e3),i=t.getUTCHours(),r=t.getUTCMinutes(),u=t.getUTCSeconds();return i+"h"+r+"m"+u+"s"}catch(f){this.debug&&console.log("error getting minutes from time string: "+n+" error: "+f)}return""},getDuration:function(n){var i,t;if(n.toString().indexOf(":")<0)return n;try{t=n.split(":").reverse();this.debug&&console.log("durationData: "+n+", timePieces: "+t);i=0;t[0]&&(i+=t[0]*1);t[1]&&(i+=t[1]*60);t[2]&&(i+=t[2]*3600)}catch(r){this.debug&&console.log("error formatting video duration: "+n+" error: "+r);i=n}return i},getTimePieces:function(n){function i(n){return n<10?"0"+n:n}if(isNaN(n))return"0:00:00";try{var t=new Date(n*1e3);return t.getUTCHours()+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())}catch(r){this.debug&&console.log("error getting time pieces from seconds: "+n+" error: "+r)}return""},getTimeCodeFromPosition:function(){var n;if(!t.VideoPlayer||!t.VideoPlayer.isReady()||(n=t.VideoPlayer.getPosition(),n==0))return"";var r=t.VideoPlayer.isPaused(),i=this.getMinutes(n),u=r?i+":paused":i;return"#time="+u},getStartTimeObjFromUrl:function(){var n={source:"url",seconds:0,paused:!1},t,i,r;return this.isEntryPage()?(t=location.hash.substring(1),t.indexOf("time=")==-1)?n:(i=t.substring(t.indexOf("time=")+5),i.indexOf(":paused")>=0&&(n.paused=!0),r=i.split(":paused")[0],n.seconds=this.getSeconds(r),n):n},getAutoPlayFromUrl:function(){if(!this.isEntryPage())return!1;var n=location.hash.substring(1).toLowerCase(),t=n.substring(n.indexOf("time=")+5);return t=="0h0m0s"||t=="0m0s"||t=="0s"||n.indexOf("autoplay")>-1},getScrollToVideoFromUrl:function(){if(!this.isEntryPage())return!1;var n=location.hash.substring(1).toLowerCase();return n.indexOf("scrolltovideo")>-1},updateProgressDb:function(i,r){var u,f,o;if(!t.playerPresenter||!t.VideoPlayer||!this.hasPlayerPage()||(r=r||!1,u=t.playerPresenter.getProgressApi(),f=n("body").data("username"),!u||!f))return null;try{var s=t.VideoPlayer.getPosition(),h=t.VideoPlayer.isPaused(),e=s/60;return i==Math.floor(e)&&!r?null:(i=Math.floor(e),o=new Image,o.src=u+"?username="+f+"&progress="+e+"&paused="+h,i)}catch(c){this.debug&&console.log("error creating progress image to update in the db: "+c)}return null},updateProgressCookie:function(i){if(t.VideoPlayer&&this.hasPlayerPage())try{var u=this.getProgressCookie(),e=location.pathname,r=t.VideoPlayer.getPosition(),o=t.VideoPlayer.isPaused(),f=null;(!r||i-r<=10&&i!=0)&&(f=-1,this.debug&&console.log("deleting progress cookie."));u[e]=o?r+":paused":r;n.cookie("currentPosition",this.quickStringify(u),{path:"/",expires:f});this.debug&&console.log("progress cookie value: "+this.quickStringify(u))}catch(s){this.debug&&console.log("error updating progress cookie: "+s)}},getProgressCookie:function(){var t=n.cookie("currentPosition");t||(t="{}");try{return n.parseJSON(t)}catch(i){return this.debug&&console.log("error parsing cookie: "+i),{}}},getStartTimeObjFromCookie:function(){var i={source:"cookie",seconds:0,paused:!1},r,t,n;if(!this.isEntryPage())return i;try{r=this.getProgressCookie();t=location.pathname;this.debug&&console.log("progress cookie path: "+t);r[t]?(this.debug&&console.log("progress found in cookie: "+r[t]),n=r[t],n.indexOf(":paused")>-1&&(i.paused=!0),n=n.split(":paused")[0],(n.indexOf("h")>-1||n.indexOf("m")>-1||n.indexOf("s")>-1)&&(n=this.getSeconds(n)),i.seconds=n):this.debug&&console.log("progress cookie with supplied path not found")}catch(u){this.debug&&console.log("error checking cookie for start time: "+u)}return i},getCaptionLanguageFromUrl:function(){var n,t;return this.isEntryPage()?(n=location.hash.substring(1).toLowerCase(),n.indexOf("cclang=")==-1)?null:(t=n.substring(n.indexOf("cclang=")+7),this.languages[t]?t:"en"):null},contains:function(n,t){if(!t)return!1;for(var i=n.length;i--;)if(typeof n[i]=="object"&&n[i].id===t||n[i]===t)return!0;return!1},quickStringify:function(n){var t=[],r,i;t.push("{");r=!0;for(i in n)n.hasOwnProperty(i)&&(r||t.push(","),t.push('"',i,'":"',n[i],'"'),r=!1);return t.push("}"),t.join("")},scrollToVideo:function(){typeof n.scrollTo!="undefined"&&n(".playerContainer:first").length&&n(window).scrollTo(".playerContainer:first")},scrollToVideoTitle:function(){typeof n.scrollTo!="undefined"&&n("h1:first").length&&n(window).scrollTo("h1:first")},sortVideosBy:function(n){return function(t,i){var r=t.type,u=i.type;return r===u?0:n[r].order<n[u].order?-1:1}},cleanHtmlTags:function(n){var t=n.match(/<[^<>]*>/gi);return t?n.replace(/<[^<>]*>/gi,""):n},ellipsize:function(n,t){var r,i;return!n||n.length<=0?"":t?(r="&#8230;",++t,t<1||n.length<=t)?n:(i=n.substring(0,t).split(" "),i.slice(0,i.length-1).join(" ")+r):n},widowControl:function(n){if(!n||n.length<=0)return"";var t=n.trim(),i=t.lastIndexOf(" ");return i>0&&i<n.length&&(t=t.substring(0,i)+"&#160;"+t.substring(i+1)),t},ellipsizeAndWidowControl:function(n,t){var u;if(!n||n.length<=0)return"";if(!t)return n;var i="&#8230;",f=!1,r=this.ellipsize(n,t),e=r;return r.indexOf(i)>0&&(f=!0,e=r.replace(i,"")),u=this.widowControl(e),f&&(u+=i),u},getParamByName:function(n,t){var i=new RegExp("[\\?&$]"+n+"=([^&#]*)").exec(t?t:window.location.href);return i?i[1]:0},addQueryStringParam:function(n,t){return n+(n.indexOf("?")==-1?"?":"&")+t}}})(jQuery);
(function(n){"use strict";var t=ch9.functions,i=t.helpers&&t.helpers.debug,r="en";t.Resources={getResourceFile:function(u){u=u||r;var f=ch9.value.CDNRoot+"scripts/strings/"+u+"/resources.json?v="+ch9.value.rnd,e=n.ajax({crossDomain:!0,cache:!0,jsonpCallback:"ch9LanguageCodeCallback",dataType:"jsonp",type:"GET",url:f,data:null,timeout:1e4});return n.when(e).then(function(n){n&&(t.Resources.strings=n)},function(n){i&&console.log("error getting resource file: "+JSON.stringify(n))})},getString:function(n){if(t.Resources.strings){var i=t.Resources.strings[n];if(i)return i}return""}}})(jQuery);
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.CaptionDataModel=function(t){this.kind="subtitles";this.label=n.helpers.languages[t.Language];this.src=t.Url;this.srclang=t.Language}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.EpisodeDataModel=function(t){var i=t.Event!==undefined,r;this.contentId=t.ID;this.contentType=i?n.ContentType.session:t.Area!==undefined?n.ContentType.entry:n.ContentType.oneoff;this.description=i&&t.Description!==null?t.Description:t.Body!==null?t.Body:"";this.releaseDate=n.helpers.getDateFromJson(t.PublishedDate);this.images={playerPreview:t.VideoPlayerPreviewImage||(i?t.FeaturedImage:t.LargeThumbnail),large:i?t.FeaturedImage||t.VideoPlayerPreviewImage:t.LargeThumbnail||t.VideoPlayerPreviewImage,medium:i?t.Thumbnail:t.MediumThumbnail||t.SmallThumbnail,small:i?t.Thumbnail:t.SmallThumbnail||t.MediumThumbnail};this.videos=[{type:"mp4high",src:t.VideoMP4High},{type:"mp4medium",src:t.VideoMP4Medium},{type:"mp4low",src:t.VideoMP4Low},{type:"wmvhigh",src:t.VideoWMVHQ},{type:"wmvmedium",src:t.VideoWMV},{type:"smooth",src:t.VideoSmooth}];this.isLive=!1;this.length=t.MediaLengthInSeconds!==undefined?t.MediaLengthInSeconds:0;this.title=t.Title!==undefined?t.Title:"";this.series=i?new n.Models.SeriesDataModel(t.Event):t.Area!==undefined?new n.Models.SeriesDataModel(t.Area):new n.Models.SeriesDataModel({Description:"One-off blog posts.",DisplayName:"Posts"});this.api=i?"/Sessions(guid'"+t.ID+"')/":"/Entries(guid'"+t.ID+"')/";this.relatedApi="/Related?id="+t.ID;this.tags=t.Tags!==undefined&&typeof t.Tags.map=="function"?t.Tags.map(function(t){return new n.Models.TagDataModel(t,i)}):[];r=i?t.Speakers:t.Authors;this.niners=r!==undefined&&typeof r.map=="function"?r.map(function(t){return new n.Models.NinerDataModel(t,i)}):[];this.captions=t.Captions!==undefined&&typeof t.Captions.map=="function"?t.Captions.map(function(t){return new n.Models.CaptionDataModel(t)}).sort(function(n,t){return n.label===t.label?0:n.label<t.label?-1:1}):[];this.averageRating=t.Rating;this.permalink=t.Permalink;this.inQueue=t.InQueue;this.progress=t.LastViewedPosition;this.userRating=t.CurrentRating}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.NinerDataModel=function(t,i){this.contentId=t.ID;this.contentType=i?n.ContentType.speaker:n.ContentType.author;this.uniqueName=t.Name;this.title=t.DisplayName||t.FullName||t.Name||t.UrlSafeName;this.images={avatar:t.Avatar||t.Photo,wideTile:t.Avatar||t.Photo,smallTile:t.Avatar||t.Photo};this.languages=t.Languages||[];this.profileUri="http://channel9.msdn.com/niners/"+t.Name;this.api=i?"/Speakers(guid'"+t.ID+"')/Sessions?$expand=Event,Speakers":"/Users(guid'"+t.ID+"')/Entries?$expand=Area,Tags,Authors"}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.SeriesDataModel=function(t){var i=t.EventGroup!==undefined;this.contentId=t.ID;this.contentType=i?n.ContentType.event:n.ContentType.area;this.description=t.Description!=null?t.Description:"";this.releaseDate=n.helpers.getDateFromJson(i?t.Starts:t.MostRecentEntry);this.images={banner:t.BannerImage,wideTile:t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage,smallTile:t.ThumbnailImage||t.SmallThumbnailImage,large:t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage,medium:t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage,small:t.SmallThumbnailImage||t.WideScreenThumbnailImage||t.ThumbnailImage};this.title=t.DisplayName!==undefined?t.DisplayName:"";this.api=i?"/Events(guid'"+t.ID+"')/Sessions?$expand=Event,Speakers&$orderby=Track%20desc":t.ID?"/Areas(guid'"+t.ID+"')/Entries?$expand=Area,Authors,Tags":"";this.seasonsApi=i?"/Events(guid'"+t.ID+"')/Sessions/Groups?groupby=track":t.ID?"/Areas(guid'"+t.ID+"')/Entries/Groups?groupby=year":"";this.permalink=t.Permalink}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.TagDataModel=function(t,i){this.contentId=t.ID;this.contentType=i?n.ContentType.eventTag:n.ContentType.tag;this.uniqueName=t.Name;this.title=t.DisplayName!==undefined?t.DisplayName:t.Title!==undefined?t.Title:"";this.api="/Tags(guid'"+t.ID+"')"+(i?"/Sessions?$expand=Event,Speakers":"/Entries?$expand=Area,Tags,Authors")}})();
(function(){"use strict";var n=ch9.functions,r=n.helpers,t=r.debug,i="http://"+window.location.host+"/odata",u=function(n){var t=[];return n.value!==undefined?n.value.forEach(function(n){t.push(n)}):n.documents!==undefined?n.documents.forEach(function(n){t.push(n.data)}):t.push(n),t};n.ContentType={entry:"entry",session:"session",oneoff:"oneoff",area:"area",event:"event",speaker:"speaker",author:"author",tag:"tag",eventTag:"eventTag"};n.Services={Series:{getData:function(t,i,r){t=t||n.ContentType.SeriesFilter.shows;var f="series"+t,u="/Areas?$filter=Type%20eq%20'"+t+"'&$orderby=MostRecentEntry%20desc";return t==n.ContentType.SeriesFilter.events&&(u="/Events?$orderby=Starts%20desc"),i=i||25,n.Services.Channel9DataSource({cacheName:f,source:u,count:i,skipCache:r}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.SeriesDataModel(t)}).slice(0,i)})},getSeries:function(t,i){if(t&&t!="undefined"){i=i||n.ContentType.area;var u="series"+i+t,r="/Areas(guid'"+t+"')";return i==n.ContentType.event&&(r="/Events(guid'"+t+"')"),n.Services.Channel9DataSource({cacheName:u,source:r}).then(function(t){if(t.message!==undefined)return null;var i=t.map(function(t){return new n.Models.SeriesDataModel(t)});return i[0]})}return $.when(null)}},Episodes:{getFeaturedData:function(t,i){return n.Services.Channel9DataSource({cacheName:"featured",source:"/Featured?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,Channel9.ODataModel.Entry/Authors",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getNewReleaseData:function(t,i){return t=t||25,n.Services.Channel9DataSource({cacheName:"newreleases",source:"/Entries?$expand=Area,Authors,Tags&$filter=Freshness%20ne%20null&$orderby=Freshness%20desc",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getPopularData:function(t,i){return t=t||25,n.Services.Channel9DataSource({cacheName:"popular",source:"/Entries?$expand=Area,Authors,Tags&$orderby=ViewsThisWeek%20desc",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getQueueData:function(t){return t=t||25,n.Services.Channel9DataSource({source:"/Queue?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,Channel9.ODataModel.Entry/Authors,Channel9.ODataModel.Entry/Tags",count:t,useAuth:!0}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).sort(function(n,t){return t.releaseDate.date===n.releaseDate.date?0:n.releaseDate.date>t.releaseDate.date?-1:1}).slice(0,t)})},getData:function(t,i,r,u){if(t){var f="episodes"+t.contentId,e=t.episodesApi;return r=r||25,n.Services.Channel9DataSource({cacheName:f,source:e,count:r,skipCache:u}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}return $.when([])},getRelatedData:function(t,i,r){if(t){var u="relatedepisodes"+t.contentId,f=t.relatedApi;return i=i||25,n.Services.Channel9DataSource({cacheName:u,source:f,count:i,skipCache:r}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}return $.when([])},getRelatedEpisodes:function(t,i){return t?n.Services.Channel9DataSource({source:t}).then(function(t){if(t.message!==undefined)return[];var r=t.map(function(t){return new n.Models.EpisodeDataModel(t)});return r.slice(0,i)}):$.when([])},getEpisode:function(t,i){if(t){var u=t.contentType||n.ContentType.session,f="episode"+t.contentId+i,r="/Entries(guid'"+t.contentId+"')?$expand=Area,Tags,Authors";return u==n.ContentType.session&&(r="/Sessions(guid'"+t.contentId+"')?$expand=Event,Speakers"),n.Services.Channel9DataSource({cacheName:f,source:r,useAuth:i}).then(function(t){if(t.message!==undefined)return null;var i=t.map(function(t){return new n.Models.EpisodeDataModel(t)});return i[0]})}return $.when(null)},search:function(t,i){if(t.searchTerm===undefined||t.searchTerm=="")return $.when([]);var r="episodessearch"+t.searchTerm,u=t.searchTerm.indexOf("undefined")>-1?t.searchTerm.replace("undefined",""):t.searchTerm,f="/Search?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,&query="+u;return i=i||25,n.Services.Channel9DataSource({cacheName:r,source:f,count:i}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}},Niners:{getNiner:function(t,i){if(t){i=i||n.ContentType.author;var u="niner"+i,r="/Users(guid'"+t+"')";return i==n.ContentType.speaker&&(r="/Speakers(guid'"+t+"')"),n.Services.Channel9DataSource({cacheName:u,source:r}).then(function(t){if(t.message!==undefined)return null;var r=t.map(function(t){return new n.Models.NinerDataModel(t,i==n.ContentType.speaker)});return r[0]})}return $.when(null)},getAuthenticatedNiner:function(){return n.Services.Channel9DataSource({cacheName:"user",source:"/Users/Me",count:1,useAuth:!0}).then(function(t){if(t&&t.message===undefined){var i=t.map(function(t){return new n.Models.NinerDataModel(t)});return i[0]}return null})}},Tags:{getTag:function(t,i){if(t){i=i||n.ContentType.tag;var r=i+t,u="/Tags(guid'"+t+"')";return n.Services.Channel9DataSource({cacheName:r,source:u}).then(function(t){if(t.message!==undefined)return null;var r=t.map(function(t){return new n.Models.TagDataModel(t,i==n.ContentType.eventTag)});return r[0]})}return $.when(null)}},addToQueue:function(t){var i=t.api.split("?")[0]+"AddToQueue";return n.Services.Channel9PostData(i,null)},removeFromQueue:function(t){var i=t.api.split("?")[0]+"RemoveFromQueue";return n.Services.Channel9PostData(i,null)},isInQueue:function(t){return n.Services.Episodes.getQueueData().then(function(n){for(var i=0;i<n.length;i++)if(n[i].contentId===t.contentId)return $.when(!0);return $.when(!1)})},Rating:{getRatingData:function(){return $.when([])}},addRating:function(t,i){var r=t.api.split("?")[0]+"Rate",u=JSON.stringify({Rating:i});return n.Services.Channel9PostData(r,u)},addVideoProgress:function(i,r,u){var e,f,o,s;i&&r&&r.isLoggedIn&&n.VideoPlayer&&((e=n.VideoPlayer.getPosition(),f=e/60,(i.progress==Math.floor(f)||e<1)&&!u)||(i.progress=Math.floor(f),o=i.api.split("?")[0]+"UpdateVideoProgress",s=JSON.stringify({Device:"Channel 9 Website",Progress:f.toString()}),n.Services.Channel9PostData(o,s).then(function(n){n.status=="200"||n.value==!0?t&&console.log("new progress update to db: "+f.toString()):t&&console.log("unsuccessful updating progress in db: "+n.status)},function(n){t&&console.log("error sending progress update to db: "+n.responseText)})))},sendAnalytics:function(t,i){if(t&&t.length!=0&&n.VideoPlayer&&dcsMultiTrack&&typeof dcsMultiTrack=="function"){var e=n.VideoPlayer.getPosition(),r=e/t.length,u="",f=Math.floor(r/.05)*.05>=.95;if(r=Math.floor(r/.25)*.25,!(r<t.percentage)&&(t.percentage!=r||f)&&(t.percentage!=.95||!f)&&!(e<1)&&!isNaN(r)){t.percentage=f?.95:r;switch(t.percentage){case 0:u="Play";break;case.25:u="25";break;case.5:u="50";break;case.75:u="75";break;case.95:u="Complete"}dcsMultiTrack("WT.clip_n",t.contentId,"WT.clip_ev",u,"WT.dl",7,"WT.z_vidType",i)}}},Channel9DataSource:function(r){var s;if(!r.source)return $.when([]);var e=r.count||0,o=r.skip||0,f=r.source;return f.indexOf("http://")<0&&(f=i+f),o>0&&(f=n.helpers.addQueryStringParam(f,"$skip="+o)),e>0&&(f=n.helpers.addQueryStringParam(f,"$top="+e)),t&&console.log("Making request: "+f),s=$.ajax({type:"GET",url:f,data:null,timeout:1e4}),$.when(s).then(function(n){if(!n)return[];try{return u(n)}catch(i){return t&&console.log("error: "+JSON.stringify(i)),[]}},function(n){return t&&console.log("error: "+JSON.stringify(n)),[]})},Channel9PostData:function(n,r){if(!n)return $.when([]);t&&console.log("Post data request: "+i+n+" "+r);var u=$.ajax({type:"POST",url:i+n,headers:{"Content-type":"application/json"},data:r,timeout:1e4});return $.when(u)}}})();
(function(){"use strict";if(ch9&&typeof ch9!="undefined"&&ch9.functions&&typeof ch9.functions!="undefined"){var r=ch9.functions,n=!1,u={customerId:"c3.Microsoft-DPE",isLive:!1,playerName:"unknown",serviceUrl:"http://livepass.conviva.com"},i=!1,t=!1;r.Ch9ConvivaConstructor=function(r,f){if(!f)return null;self.options=$.extend(u,r);self.streamer=f;self.session=null;var o=function(t){t.code==0?n&&console.log("Conviva LivePass inititalized successfully"):Conviva.LivePass.ready?n&&console.log("Conviva LivePass post-initialization feedback.\n \tCode: "+t.code+";\n \tMessage: "+t.message):n&&console.log("Conviva LivePass failed to initialize!\n \tConviva metrics will not be captured! \tCode: "+t.code+"; \tMessage: "+t.message)},s=function(){if(Conviva&&Conviva.LivePass&&typeof Conviva.LivePass.init=="function"&&!t)try{Conviva.LivePass.init(self.options.serviceUrl,self.options.customerId,o);t=!0;Conviva.LivePass.toggleTraces&&typeof Conviva.LivePass.toggleTraces=="function"&&Conviva.LivePass.toggleTraces(n)}catch(i){n&&console.log(i)}},e=function(){if(Conviva&&Conviva.LivePass&&Conviva.ConvivaContentInfo&&Conviva.ConvivaContentInfo.createInfoForLightSession&&typeof Conviva.ConvivaContentInfo.createInfoForLightSession=="function"&&t)try{Conviva.LivePass.cleanupMonitoringSession&&typeof Conviva.LivePass.cleanupMonitoringSession=="function"&&self.streamer&&Conviva.LivePass.cleanupMonitoringSession(self.streamer);var i=Conviva.ConvivaContentInfo.createInfoForLightSession(self.options.assetName);i.cdnName=Conviva.ConvivaContentInfo.CDN_NAME_MICROSOFT;i.isLive=self.options.isLive;i.playerName=self.options.playerName;i.streamUrl=self.options.source;i.viewerId=self.options.c9Id;i.tags={pageUrl:document.location.hostname+document.location.pathname,pageDomain:document.location.hostname,query:document.location.search};document.referrer&&(i.tags.pageReferrer=document.referrer);Conviva.LivePass.createSession&&typeof Conviva.LivePass.createSession=="function"&&(self.session=Conviva.LivePass.createSession(self.streamer,i),self.session.setContentLength(self.options.duration))}catch(r){n&&console.log(r)}};return i?e():setTimeout(function(){var n=document.createElement("script"),t;n.src="/scripts/conviva/2.82.0.19066/LivePass.js";n.type="text/javascript";n.async=!0;t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t);n.addEventListener("load",function(){i=!0;s();e()},!1)},1),{remove:function(){if(Conviva&&Conviva.LivePass&&Conviva.LivePass.cleanupMonitoringSession&&typeof Conviva.LivePass.cleanupMonitoringSession=="function"&&self.session)try{Conviva.LivePass.cleanupMonitoringSession(self.session)}catch(t){n&&console.log(t)}}}}}})();
(function(n){var t=ch9.functions,l=t.helpers,f=[],e=function(){if(t.playerPresenter||typeof t.playerPresenter=="undefined"){try{t.VideoPlayer&&typeof t.VideoPlayer!="undefined"&&t.VideoPlayer.pause()}catch(i){}var n=t.playerPresenter.getContainer();n.hide();self.overlayEl.detach().insertAfter(n).show().children("div").show()}},o=function(){if(t.playerPresenter||typeof t.playerPresenter=="undefined"){var n=t.playerPresenter.getContainer();n.show();self.overlayEl.detach().appendTo(self.videoOptionsEl).hide()}},a=function(){var r;if(self.queueLoginEl&&!self.queueLoginEl.hasClass("loggedIn")){self.queueLoginEl.show();self.queueLinkEl.hasClass("selected")||(self.queueLinkEl.addClass("selected"),self.queueLoginEl.show());return}var i=n("form#manage-queue",self.videoOptionsEl),t=n(".inqueue",self.queueLinkEl).length>0,u=t?i.data("removefromqueueurl"):i.data("addtoqueueurl"),e=n(".working",self.videoOptionsEl).length>0;e||(n("span",self.queueLinkEl).remove(),n('<span class="working icon" />').html("&nbsp;").prependTo(self.queueLinkEl));r=n.ajax({type:"POST",url:u,data:i.serialize(),success:function(n){return n.success?!t:(s(n.message,n.tryAgain),t)},error:function(){return s(null,!0),t},dataType:"json",timeout:1e4});f.push(r);n.when(r).then(function(n){v(n)})},v=function(t){n("span",self.queueLinkEl).remove();t?n('<span class="inqueue icon" />').html("&nbsp;").prependTo(self.queueLinkEl):n('<span class="add icon" />').html("&#43;").prependTo(self.queueLinkEl);self.queueLinkEl.removeClass("selected");self.queueLinkEl.blur()},s=function(t){var i=n(".error",self.videoOptionsEl);i.html(t);i.show()},y=function(){c();u();e();self.embedLinkEl.addClass("selected");self.overlayContentEl.html("<h2>Embed code for this video<\/h2>");t.playerPresenter&&t.playerPresenter.getDefaultVideoUrl()&&i("auto");t.html5Presenter&&t.html5Presenter.haveVideo&&i("html5");t.silverlightPresenter&&(t.silverlightPresenter.haveSmoothVideo?i("smooth"):t.silverlightPresenter.haveProgressiveVideo&&i("progressive"));t.flashPresenter&&t.flashPresenter.haveVideo&&i("flash");n("textarea.embed-code",self.overlayContentEl).off("click").on("click",function(){n(this).data("selected")||(this.select(),n(this).data("selected","true"))})},i=function(n){if(t.playerPresenter){var i=t.playerPresenter.getEmbedCode(n),r=self.overlayContentEl.html(),u=["<h3>"+{auto:"Auto",html5:"HTML5",smooth:"Silverlight",progressive:"Silverlight",flash:"Flash"}[n]+"<\/h3>",'<textarea class="embed-code">'+i+"<\/textarea>"].join("");self.overlayContentEl.html(r+u)}},h=function(){self.embedLinkEl.removeClass("selected");self.embedLinkEl.blur();o()},p=function(){h();u();e();self.formatsLinkEl.addClass("selected");self.overlayContentEl.html('<h2>Available formats for this video<\/h2><div class="formats-note"><p>Option selected may change based on video formats available and browser capability.<\/p><\/div><ul class="format-types"><\/ul>');t.playerPresenter&&t.playerPresenter.getDefaultVideoUrl()&&r("auto");t.html5Presenter&&t.html5Presenter.haveVideo&&t.html5Presenter.isPlayPossible&&r("html5");t.silverlightPresenter&&t.silverlightPresenter.isPlayPossible&&(t.silverlightPresenter.haveSmoothVideo&&r("smooth"),t.silverlightPresenter.haveProgressiveVideo&&r("progressive"));t.flashPresenter&&t.flashPresenter.haveVideo&&t.flashPresenter.isPlayPossible&&r("flash")},r=function(i){if(t.playerPresenter){var r=self.formatsLinkEl.data("selectedformat"),u={auto:{label:"Auto",description:"Use our suggested format for this video.",selected:r=="auto"},html5:{label:"HTML5",description:'For browsers that support H.264 MP4 or WebM video playback such as:<br /><a href="http://www.beautyoftheweb.com/" title="Install Internet Explorer">IE9+<\/a>, <a href="http://www.mozilla.org/en-US/firefox/new/" title="Install Firefox">Firefox 4+<\/a>, <a href="http://www.google.com/chrome/intl/en/landing_chrome.html" title="Install Chrome">Chrome 5+<\/a>, or <a href="http://www.apple.com/safari/" title="Install Safari">Safari 4+<\/a>.',selected:r=="html5"},smooth:{label:"Smooth Streaming",description:"Adaptive bitrate streaming - little buffering but lower video quality at times of low bandwidth. <a href=\"javascript:Silverlight.getSilverlight('"+t.silverlightPresenter.currentVersion+'\');" title="Install Microsoft Silverlight">Silverlight '+t.silverlightPresenter.currentVersion.split(".")[0]+"<\/a> required.",selected:r=="smooth"},progressive:{label:"Progressive",description:"Traditional buffered video format. <a href=\"javascript:Silverlight.getSilverlight('"+t.silverlightPresenter.currentVersion+'\');" title="Install Microsoft Silverlight">Silverlight '+t.silverlightPresenter.currentVersion.split(".")[0]+"<\/a> required.",selected:r=="progressive"},flash:{label:"Flash",description:'For browsers that have the <a href="http://get.adobe.com/flashplayer/" title="Install Adobe Flash Player">Adobe Flash Player<\/a> plugin installed.',selected:r=="flash"}},f=n(".format-types",self.overlayContentEl).html(),e=["<li>",'<a title="Switch to '+u[i].label+' format"href="'+l.basePageUrl()+"?format="+i+'" class="'+(u[i].selected?"selected":"")+'">','<span class="icon">'+(u[i].selected?">":"")+"<\/span>",u[i].label,"<\/a>","<p>"+u[i].description+"<\/p>","<\/li>"].join("");n(".format-types",self.overlayContentEl).html(f+e)}},c=function(){self.formatsLinkEl.removeClass("selected");self.formatsLinkEl.blur();o()},u=function(){self.queueLinkEl.removeClass("selected");self.queueLinkEl.blur();self.queueCloseLinkEl.parent("div").hide()},w=function(){var i,t;for(n(window).off("beforeunload.videoOptions"),self.overlayEl&&n(".close",self.overlayEl).off("click"),self.embedLinkEl&&self.embedLinkEl.off("click"),self.formatsLinkEl&&self.formatsLinkEl.off("click"),self.queueLinkEl&&self.queueLinkEl.off("click"),self.queueCloseLinkEl&&self.queueCloseLinkEl.off("click"),i=f,t=0;t<i.length;t++)i[t]&&i[t].fail()};t.videoOptions={refresh:function(){if(self.videoOptionsEl=n(".video-options"),!(self.videoOptionsEl.length<1)){self.overlayEl=n(".overlay",self.videoOptionsEl);self.overlayContentEl=n(".overlay-content",self.overlayEl);self.embedLinkEl=n("a.embed",self.videoOptionsEl);self.formatsLinkEl=n("a.formats",self.videoOptionsEl);self.queueLinkEl=n("a.queue",self.videoOptionsEl);self.queueLoginEl=n(".queue-login",self.videoOptionsEl);self.queueCloseLinkEl=n(".queue-form .close",self.videoOptionsEl);n(window).on("beforeunload.videoOptions",w);n(".close",self.overlayEl).off("click").on("click",function(){return h(),c(),!1});self.embedLinkEl.off("click").on("click",function(){return y(),!1});self.formatsLinkEl.off("click").on("click",function(){return p(),!1});self.queueLinkEl.off("click").on("click",function(){return a(),!1});self.queueCloseLinkEl.off("click").on("click",function(){return u(),!1})}}}})(jQuery);
(function(n){"use strict";var t=ch9.functions,i=t.helpers,f={background:"#333",height:"540",width:"960",isEmbed:window.location.href.indexOf("/player")>-1},e={webvtt:"WebVTT"},r={smooth:"smooth",progressive:"progressive",flash:"flash",html5:"html5"},u=t.userAgent&&t.userAgent.isIOS()?"pagehide":"beforeunload",o=function(){var o=this,h=function(){var n=c();switch(o.player.playerPreference){case r.flash:return t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),t.flashPresenter.isPlayPossible&&(n=t.flashPresenter.create(n)),s(n),!1;case r.progressive:case r.smooth:return t.flashPresenter.isPlayPossible&&(n=t.flashPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),s(n),!1;case r.html5:case r.auto:return t.flashPresenter.isPlayPossible&&(n=t.flashPresenter.create(n)),t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),s(n),!1}return s(n),!0},s=function(i){i&&i!=""&&o.playButton&&o.playerGoesHere&&(t.rotator&&t.rotator.hardStop(),o.playButton.off("click.player").hide(),t.userAgent.isIOS()||(o.playerContainer.append(n("<div>").addClass("progress large circles")),t.Spinner=new t.ProgressControlConstructor(n(".progress",o.playerContainer)),t.Spinner.show()),o.playerGoesHere.css("display","block").html(i))},c=function(){var n='<p><a href="'+o.defaultVideoUrl+'">Click to play video<\/a><\/p><p><a href="http://channel9.msdn.com/Blogs/Help/How-to-watch-videos" target="_blank">Why can\'t I play this video on the page?<\/a><\/p>';return o.player.width>600&&(n+=t.html5Presenter?t.html5Presenter.getErrorMessage():"",n+=t.silverlightPresenter?t.silverlightPresenter.getErrorMessage():"",n+=t.flashPresenter?t.flashPresenter.getErrorMessage():""),'<div class="error">'+n+"<\/div>"},l=function(){f.isEmbed&&parent.postMessage("play button clicked","*")};return{isVideoPlaying:function(){return t.VideoPlayer&&t.VideoPlayer.isReady()},remove:function(){n(window).off(u+".player").off("hashchange.player");t.Ch9Conviva&&typeof t.Ch9Conviva!="undefined"&&(t.Ch9Conviva.remove(),delete t.Ch9Conviva);t.VideoPlayer&&typeof t.VideoPlayer!="undefined"&&(i.updateProgressCookie(o.episode.length),t.Services&&t.Services.addVideoProgress(o.episode,o.user,!0),t.VideoPlayer.remove(),delete t.VideoPlayer);t.Channel9Html5Player&&typeof t.Channel9Html5Player!="undefined"&&(t.Channel9Html5Player.remove(),delete t.Channel9Html5Player);n(".Player",o.playerContainer).empty().remove();o.playButton&&o.playButton.off("click.player")},refresh:function(){var a,c,s;if((this.remove(),o.playerContainer=n(".featured li.active").length>0?n(".featured li.active .playerContainer"):n(".playerContainer"),!(o.playerContainer.length<1))&&(o.playerGoesHere=n(".playerGoesHere",o.playerContainer),o.playButton=n("a.video",o.playerContainer),!(o.playButton.length<1))&&(a=o.playButton.css("background-image").substring(4,o.playButton.css("background-image").length-1).replace(/"/g,"")||"",c=n("ul.mediacaptions a",o.playerContainer).map(function(){var t=n(this);return{url:t.attr("href"),format:t.attr("rel"),language:t.data("language"),label:t.data("label"),isdefault:!1}}).get(),c=n.grep(c,function(n){return typeof e[n.format]!="undefined"}).sort(function(n,t){return n.language.toLowerCase().localeCompare(t.language.toLowerCase())}),s=o.playButton.data("player"),s.defaultVideoUrl=o.playButton.attr("href"),s.container=o.playerContainer,s.height=o.playerContainer.height(),s.width=o.playerContainer.width(),s.playerPreference=r[s.playerPreference]||r.html5,s.language=i.languages[s.language]?s.language:"",o.player=n.extend({},f,s),o.player)&&(o.episode=o.playButton.data("episode"),o.episode)){o.episode.captions=c;o.episode.contentId=o.episode.contentId.replace(/-/g,"");o.episode.images={playerPreview:a};o.episode.length=i.getDuration(o.episode.length);o.episode.isMVA=o.episode.isMVA&&o.episode.isMVA.toString().toLowerCase()=="true";o.user=o.playButton.data("user");o.user.isLoggedIn=o.user&&o.user.isLoggedIn&&o.user.isLoggedIn.toString().toLowerCase()=="true";o.user.name=n("body").data("username");o.user||(o.user={isLoggedIn:!1,name:""});t.html5Presenter=new t.Html5PresenterConstructor(o.player,o.episode,o.user);t.silverlightPresenter=new t.SilverlightPresenterConstructor(o.player,o.episode,o.user);t.flashPresenter=new t.FlashPresenterConstructor(o.player,o.episode,o.user);t.videoOptions&&typeof t.videoOptions!="undefined"&&t.videoOptions.refresh();o.playButton.show().off("click.player").on("click.player",function(){return l(),h()});n(window).off(u+".player").on(u+".player",this.remove).off("hashchange.player").on("hashchange.player",this.checkToStartPlayer)}},checkToStartPlayer:function(){var f=i.getAutoPlayFromUrl(),e=i.getScrollToVideoFromUrl(),u=i.getStartTimeObjFromUrl(),s=i.getStartTimeObjFromCookie(),c=i.getCaptionLanguageFromUrl(),r;(o.episode&&o.episode.captions&&(r=n.grep(o.episode.captions,function(n){return n.language==c})[0],r&&(r.isdefault=!0)),o.startTime=u.seconds>0?u:s,f||o.startTime&&o.startTime.seconds&&!(o.startTime.seconds<=0))&&(t.VideoPlayer?t.VideoPlayer.seek(o.startTime):h(),e?i.scrollToVideo():i.scrollToVideoTitle())},getEmbedCode:function(n){var u=i.basePageUrl().replace(/http:\/\//g,"//"),t=["<iframe",' src="'+u+"/player?h="+o.player.height+"&w="+o.player.width+'{FORMAT}"',' style="height:'+o.player.height+"px;width:"+o.player.width+'px;"'," allowFullScreen",' frameBorder="0"',' scrolling="no"',"><\/iframe>"].join("");switch(n){case r.smooth:case r.progressive:case r.flash:case r.html5:return t.replace("{FORMAT}","&format="+n);case"auto":default:return t.replace("{FORMAT}","")}},getContainer:function(){return o.playerContainer},getDefaultVideoUrl:function(){return o.player.defaultVideoUrl},getStartTime:function(){return o.startTime}}};n(function(){i&&i.hasPlayerPage()&&(t.playerPresenter=new o,t.playerPresenter.refresh(),t.playerPresenter.checkToStartPlayer())})})(jQuery);
(function(){"use strict";var t=ch9.functions,i=t.helpers,n=i.debug;t.VideoPlayerConstructor=function(t,i){this.type=t;this.target=i;var r,u=function(){clearTimeout(r)};return{target:this.target,play:function(){this.targetPlay&&typeof this.targetPlay=="function"&&this.targetPlay()},pause:function(){this.targetPause&&typeof this.targetPause=="function"&&this.targetPause()},stop:function(){this.targetStop&&typeof this.targetStop=="function"&&this.targetStop()},getPosition:function(){try{return this.targetGetPosition&&typeof this.targetGetPosition=="function"?this.targetGetPosition():0}catch(t){return n&&console.log("error getting video position: "+t),0}},seek:function(t){if(!t||!t.seconds){n&&console.log("seek has no time");return}var i=this,e=10,u=0,f=function(){if(u>e){clearTimeout(r);return}u++;try{i.targetCanSeek&&typeof i.targetCanSeek=="function"&&i.targetCanSeek(t.seconds)?(n&&console.log("video ready, setting SeekToPosition or currentTime: "+t.seconds),i.targetSeek&&typeof i.targetSeek=="function"&&i.targetSeek(t.seconds),t.paused&&i.targetPause&&typeof i.targetPause=="function"&&i.targetPause()):(r=setTimeout(f,1e3),n&&console.log("video not ready, trying again"))}catch(o){n&&console.log("error occurred while seeking: "+o)}};f()},isPaused:function(){return this.targetIsPaused&&typeof this.targetIsPaused=="function"?this.targetIsPaused():!1},isReady:function(){return this.targetIsReady&&typeof this.targetIsReady=="function"?this.targetIsReady():!1},remove:function(){u();this.targetRemove&&typeof this.targetRemove=="function"&&this.targetRemove()}}}})();
var swfobject=function(){function v(){var i,r,n;if(!c){try{i=t.getElementsByTagName("body")[0].appendChild(h("span"));i.parentNode.removeChild(i)}catch(u){return}for(c=!0,r=w.length,n=0;n<r;n++)w[n]()}}function yt(n){c?n():w[w.length]=n}function pt(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)ui(r,"onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u();n()}}else r.onload=n}function gt(){lt?ni():it()}function ni(){var o=t.getElementsByTagName("body")[0],u=h(f),r,e;u.setAttribute("type",p);r=o.appendChild(u);r?(e=0,function(){if(typeof r.GetVariable!=i){var t=r.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),n.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(e<10){e++;setTimeout(arguments.callee,10);return}o.removeChild(u);r=null;it()}()):it()}function it(){var y=s.length,r,t,h,c,v;if(y>0)for(r=0;r<y;r++){var f=s[r].id,e=s[r].callbackFn,o={success:!1,id:f};if(n.pv[0]>0){if(t=u(f),t)if(!g(s[r].swfVersion)||n.wk&&n.wk<312)if(s[r].expressInstall&&ut()){h={};h.data=s[r].expressInstall;h.width=t.getAttribute("width")||"0";h.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(h.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(h.align=t.getAttribute("align"));var p={},a=t.getElementsByTagName("param"),w=a.length;for(c=0;c<w;c++)a[c].getAttribute("name").toLowerCase()!="movie"&&(p[a[c].getAttribute("name")]=a[c].getAttribute("value"));ft(h,p,f,e)}else ti(t),e&&e(o);else l(f,!0),e&&(o.success=!0,o.ref=rt(f),e(o))}else l(f,!0),e&&(v=rt(f),v&&typeof v.SetVariable!=i&&(o.success=!0,o.ref=v),e(o))}}function rt(n){var r=null,t=u(n),e;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=i?r=t:(e=t.getElementsByTagName(f)[0],e&&(r=e))),r}function ut(){return!d&&g("6.0.65")&&(n.win||n.mac)&&!(n.wk&&n.wk<312)}function ft(f,e,o,s){var c,v,l,a;d=!0;nt=s||null;at={success:!1,id:o};c=u(o);c&&(c.nodeName=="OBJECT"?(y=et(c),k=null):(y=c,k=o),f.id=ht,(typeof f.width==i||!/%$/.test(f.width)&&parseInt(f.width,10)<310)&&(f.width="310"),(typeof f.height==i||!/%$/.test(f.height)&&parseInt(f.height,10)<137)&&(f.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation",v=n.ie&&n.win?"ActiveX":"PlugIn",l="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+t.title,typeof e.flashvars!=i?e.flashvars+="&"+l:e.flashvars=l,n.ie&&n.win&&c.readyState!=4&&(a=h("div"),o+="SWFObjectNew",a.setAttribute("id",o),c.parentNode.insertBefore(a,c),c.style.display="none",function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()),ot(f,e,o))}function ti(t){if(n.ie&&n.win&&t.readyState!=4){var i=h("div");t.parentNode.insertBefore(i,t);i.parentNode.replaceChild(et(t),i);t.style.display="none",function(){t.readyState==4?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(et(t),t)}function et(t){var u=h("div"),e,i,o,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function ot(t,r,e){var v,y=u(e),w,o,k,a,c,s,l;if(n.wk&&n.wk<312)return v;if(y)if(typeof t.id==i&&(t.id=e),n.ie&&n.win){w="";for(o in t)t[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?r.movie=t[o]:o.toLowerCase()=="styleclass"?w+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(w+=" "+o+'="'+t[o]+'"'));k="";for(a in r)r[a]!=Object.prototype[a]&&(k+='<param name="'+a+'" value="'+r[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+w+">"+k+"<\/object>";b[b.length]=t.id;v=u(t.id)}else{c=h(f);c.setAttribute("type",p);for(s in t)t[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?c.setAttribute("class",t[s]):s.toLowerCase()!="classid"&&c.setAttribute(s,t[s]));for(l in r)r[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ii(c,l,r[l]);y.parentNode.replaceChild(c,y);v=c}return v}function ii(n,t,i){var r=h("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function wt(t){var i=u(t);i&&i.nodeName=="OBJECT"&&(n.ie&&n.win?(i.style.display="none",function(){i.readyState==4?ri(t):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ri(n){var t=u(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function u(n){var i=null;try{i=t.getElementById(n)}catch(r){}return i}function h(n){return t.createElement(n)}function ui(n,t,i){n.attachEvent(t,i);a[a.length]=[n,t,i]}function g(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function bt(r,u,o,s){var a,c,l;n.ie&&n.mac||(a=t.getElementsByTagName("head")[0],a)&&(c=o&&typeof o=="string"?o:"screen",s&&(e=null,tt=null),e&&tt==c||(l=h("style"),l.setAttribute("type","text/css"),l.setAttribute("media",c),e=a.appendChild(l),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(e=t.styleSheets[t.styleSheets.length-1]),tt=c),n.ie&&n.win?e&&typeof e.addRule==f&&e.addRule(r,u):e&&typeof t.createTextNode!=i&&e.appendChild(t.createTextNode(r+" {"+u+"}")))}function l(n,t){if(vt){var i=t?"visible":"hidden";c&&u(n)?u(n).style.visibility=i:bt("#"+n,"visibility:"+i)}}function kt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=i?encodeURIComponent(n):n}var i="undefined",f="object",st="Shockwave Flash",dt="ShockwaveFlash.ShockwaveFlash",p="application/x-shockwave-flash",ht="SWFObjectExprInst",ct="onreadystatechange",r=window,t=document,o=navigator,lt=!1,w=[gt],s=[],b=[],a=[],y,k,nt,at,c=!1,d=!1,e,tt,vt=!0,n=function(){var l=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i,e=o.userAgent.toLowerCase(),s=o.platform.toLowerCase(),a=s?/win/.test(s):/win/.test(e),v=s?/mac/.test(s):/mac/.test(e),y=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",u=[0,0,0],n=null,c;if(typeof o.plugins!=i&&typeof o.plugins[st]==f)n=o.plugins[st].description,!n||typeof o.mimeTypes!=i&&o.mimeTypes[p]&&!o.mimeTypes[p].enabledPlugin||(lt=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i)try{c=new ActiveXObject(dt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(w){}return{w3:l,pv:u,wk:y,ie:h,win:a,mac:v}}(),fi=function(){n.w3&&((typeof t.readyState!=i&&t.readyState=="complete"||typeof t.readyState==i&&(t.getElementsByTagName("body")[0]||t.body))&&v(),c||(typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",v,!1),n.ie&&n.win&&(t.attachEvent(ct,function(){t.readyState=="complete"&&(t.detachEvent(ct,arguments.callee),v())}),r==top&&function(){if(!c){try{t.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}v()}}()),n.wk&&function(){if(!c){if(!/loaded|complete/.test(t.readyState)){setTimeout(arguments.callee,0);return}v()}}(),pt(v)))}(),ei=function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var r,i,u,f,e=a.length,t=0;t<e;t++)a[t][0].detachEvent(a[t][1],a[t][2]);for(r=b.length,i=0;i<r;i++)wt(b[i]);for(u in n)n[u]=null;n=null;for(f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(t,i,r,u){if(n.w3&&t&&i){var f={};f.id=t;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;s[s.length]=f;l(t,!1)}else u&&u({success:!1,id:t})},getObjectById:function(t){if(n.w3)return rt(t)},embedSWF:function(t,r,u,e,o,s,h,c,a,v){var y={success:!1,id:r};n.w3&&!(n.wk&&n.wk<312)&&t&&r&&u&&e&&o?(l(r,!1),yt(function(){var n,b,p,k,w,d;if(u+="",e+="",n={},a&&typeof a===f)for(b in a)n[b]=a[b];if(n.data=t,n.width=u,n.height=e,p={},c&&typeof c===f)for(k in c)p[k]=c[k];if(h&&typeof h===f)for(w in h)typeof p.flashvars!=i?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(g(o))d=ot(n,p,r),n.id==r&&l(r,!0),y.success=!0,y.ref=d;else{if(s&&ut()){n.data=s;ft(n,p,r,v);return}l(r,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){vt=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,i,r){return n.w3?ot(t,i,r):undefined},showExpressInstall:function(t,i,r,u){n.w3&&ut()&&ft(t,i,r,u)},removeSWF:function(t){n.w3&&wt(t)},createCSS:function(t,i,r,u){n.w3&&bt(t,i,r,u)},addDomLoadEvent:yt,addLoadEvent:pt,getQueryParamValue:function(n){var r=t.location.search||t.location.hash,u,i;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return kt(r);for(u=r.split("&"),i=0;i<u.length;i++)if(u[i].substring(0,u[i].indexOf("="))==n)return kt(u[i].substring(u[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(d){var t=u(ht);t&&y&&(t.parentNode.replaceChild(y,t),k&&(l(k,!0),n.ie&&n.win&&(y.style.display="block")),nt&&nt(at));d=!1}}}}();
(function(n){"use strict";var t=ch9.functions,i=t.helpers,r=i&&i.debug,u={movie:"/scripts/smp/StrobeMediaPlayback.swf",version:"10.1.0"},f={Mp4High:"mp4",Mp4Med:"mp4",Mp4:"mp4"},e={Mp4High:{order:0},Mp4Med:{order:1},Mp4:{order:2}};t.FlashPresenterConstructor=function(o,s,h){var c=this,l=t.playerPresenter,a;return this.player=n.extend({},u,o),this.episode=s,this.user=h,this.videos=n("ul.flash a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),this.haveDoneSeek=!1,a=function(n){var t=[],i,r;if(t.push('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),t.push(">"),n.movie!=null&&t.push('<param name="movie" value="'+n.movie+'"/>'),i="",n.flashvars!=null&&typeof n.flashvars=="object"){for(r in n.flashvars)i+=(i!=""?"&":"")+r+"="+n.flashvars[r];t.push('<param name="flashvars" value="'+i+'"/>')}return t.push("<!--[if !IE]>-->"),t.push('<object type="application/x-shockwave-flash"'),n.movie!=null&&t.push(' data="'+n.movie+'"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),t.push(">"),i!=""&&t.push('<param name="flashvars" value="'+i+'"/>'),t.push("<!--<![endif]-->"),n.dofallback&&n.src!=null&&t.push('<p><a href="'+n.src+'">Click to play video<\/a><\/p>'),t.push("<!--[if !IE]>-->"),t.push("<\/object>"),t.push("<!--<![endif]-->"),t.push("<\/object>"),t.join("")},{playerId:"flashPlayer",haveVideo:c.videos.length>0,isPlayPossible:!t.userAgent||t.userAgent.flashPlayerSupported(),getErrorMessage:function(){var n="",t="<h3>Flash<\/h3>";return!this.isPlayPossible&&this.haveVideo?n+=t+"<p>We have a Flash version but your browser doesn't seem to support the Flash plugin.<\/p>":this.isPlayPossible&&!this.haveVideo?n+=t+'<p>We don\'t have a Flash version of this video yet.<br />Want to let us know? Please <a href="/ContactUs">Contact Us<\/a>, so we can try to provide one.<\/p>':this.isPlayPossible&&this.haveVideo&&(n+=t+'<p>We have a Flash version but your browser doesn\'t seem to have Flash or it may be disabled.<br />Want to <a href="http://get.adobe.com/flashplayer/">Get the Adobe Flash Player plugin<\/a>?<\/p>'),n},create:function(t){var u=n.grep(c.videos,function(n){return f[n.type]}),h,l;u=u.sort(i.sortVideosBy(e));var o=u&&u.length>0?u[0]:{url:""},s={attributes:{allowfullscreen:!0,allowscriptaccess:"always","class":"Player"},flashvars:{poster:c.episode.images.playerPreview,src:o.url,autoPlay:!0,javascriptCallbackFunction:"ch9.functions.flashPresenter.flashLoaded"},dofallback:!0,playerId:this.playerId,fallback:t},r={};return!o||!o.url?t:(c.episode.captions&&c.episode.captions.length>0&&(s.tracks=c.episode.captions),n.extend(r,c.player,s),c.episode.plyCaptionStreamId&&(h={verbose:!0,controlBarAutoHide:!0,src_namespace:"http://www.akamai.com/advancedstreamingplugin/1.0",plugin_AkamaiAdvancedStreamingPlugin:"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.0/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",plugin_plymedialive:"http://static.plymedia.com/players/default/plymedialivepluginaaspv3.swf",plymedialive_namespace:"http://www.plymedia.com/ns/livesyncplugin",plymedialive_autocreate:!0,src_namespace_plymedialive:"http://www.plymedia.com/ns/livesyncplugin",src_plymedialive_videoid:c.episode.plyCaptionStreamId},n.extend(r.flashvars,h),r.attributes.name="strobeMediaPlayback"),l=swfobject&&r.version?swfobject.hasFlashPlayerVersion(r.version):!0,!l)?r.fallback:(ch9.functions.flashPresenter.loadShim=function(){function i(){swfobject.embedSWF(r.movie,r.playerId,r.width,r.height,r.version,null,r.flashvars,null,r.attributes,null);n("#flashLoader",c.player.container).remove()}var t=document.createElement("img");t.onload=i;t.src="/styles/images/1998/shim.gif";t.style.display="block"},'<div id="'+this.playerId+'"><\/div><div id="flashLoader"><script type="text/javascript">ch9.functions.flashPresenter.loadShim();<\/script><\/div>')},setPlayer:function(i){t.VideoPlayer=new t.VideoPlayerConstructor("flash",i);var u=t.VideoPlayer,f={targetPlay:function(){this.target&&this.target.play2&&typeof this.target.play2=="function"&&this.target.play2()},targetPause:function(){this.target&&this.target.pause&&typeof this.target.pause=="function"&&this.target.pause()},targetStop:function(){this.target&&this.target.stop2&&typeof this.target.stop2=="function"&&this.target.stop2()},targetGetPosition:function(){return this.target?this.target.getCurrentTime():null},targetIsPaused:function(){return this.target?this.target.getPaused():!1},targetIsReady:function(){return this.target?this.target.getState()!="ready":!1},targetSeek:function(n){this.target&&this.target.seek(n)},targetCanSeek:function(n){return this.target?this.target.canSeekTo&&typeof this.target.canSeekTo=="function"?this.targetIsReady()&&this.target.canSeekTo(n):!1:!1}};n.extend(u,f);try{u.target.addEventListener("currentTimeChange","ch9.functions.flashPresenter.onCurrentTimeChange");u.target.addEventListener("mediaPlayerStateChange","ch9.functions.flashPresenter.onMediaPlayerStateChange")}catch(e){r&&console.log("error attaching events to flash player: "+e)}t.Spinner&&t.Spinner.hide()},onCurrentTimeChange:function(){if(!c.haveDoneSeek){var n=l.getStartTime();n.seconds>0&&(r&&console.log("seeking to start time: "+n.seconds),t.VideoPlayer.seek(n));c.haveDoneSeek=!0}t.Services&&t.VideoPlayer&&(t.Services.addVideoProgress(c.episode,c.user),t.Services.sendAnalytics(c.episode,"flash"))},onMediaPlayerStateChange:function(n){t.Services&&t.VideoPlayer&&n=="paused"&&t.Services.addVideoProgress(c.episode,c.user)},flashLoaded:function(){if(!t||!t.VideoPlayer)try{var n=document.getElementById(this.playerId);this.setPlayer(n)}catch(i){r&&console.log("error loading flash player: "+i)}}}}})(jQuery);
(function(n){"use strict";var t=ch9.functions,i=t.helpers,r=i&&i.debug,e={autoplay:!0,controls:!1,useCh9CustomPlayer:!0},u={Mp4Med:"mp4",Mp4High:"mp4",Mp4:"mp4",WebM:"webm"},o={Mp4Med:{order:0},WebM:{order:1},Mp4High:{order:2},Mp4:{order:3}},f={Mp4:"Low",Mp4Med:"Medium",Mp4High:"High",WebM:"Medium"};t.Html5PresenterConstructor=function(s,h,c){var l=this,v=t.playerPresenter,a;return this.player=n.extend({},e,s),this.episode=h,this.user=c,this.videos=n("ul.html5 a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),t.userAgent&&(t.userAgent.isIOS()&&(this.player.controls=!0),t.userAgent.isIE10()&&this.player.isEmbed&&(this.player.useCh9CustomPlayer=!1,this.player.controls=!0)),a=function(n,t){var i=[],r,s,o;if(i.push("<video"),t.id!=null&&i.push(' id="'+t.id+'"'),t["class"]!=null&&i.push(' class="'+t["class"]+'"'),t.poster!=null&&i.push(' poster="'+t.poster+'"'),t.width!=null&&i.push(' width="'+t.width+'"'),t.height!=null&&i.push(' height="'+t.height+'"'),t.controls!=null&&t.controls==!0&&i.push(" controls"),t.preload!=null&&t.preload==!0&&i.push(" preload"),t.autoplay!=null&&t.autoplay==!0&&i.push(" autoplay"),t.loop!=null&&t.loop==!0&&i.push(" loop"),t.dofallback!=null&&t.dofallback==!0&&i.push(' onerror="ch9.functions.html5Presenter.fallback(this);"'),t.oncanplay!=null&&i.push(' oncanplay="'+t.oncanplay+'"'),i.push(">"),n&&n.length>0)for(r=0;r<n.length;r++){var e=n[r],h=typeof u[e.type]!="undefined"?u[e.type]:e.type,c=typeof f[e.type]!="undefined"?f[e.type]:e.type;i.push('<source src="'+e.url+'" type="video/'+h+'" data-quality="'+c+'"');t.dofallback!=null&&t.dofallback==!0&&i.push(' onerror="ch9.functions.html5Presenter.fallbackSource(this);"');i.push(" />")}if(t.useCh9CustomPlayer!=null&&t.useCh9CustomPlayer==!1&&t.tracks&&t.tracks.length>0)for(s=t.tracks,r=0;r<s.length;r++)o=s[r],i.push('<track label="'+o.label+'" src="'+o.url+'" kind="subtitles" srclang="'+o.language+'"'),o.isdefault&&i.push(" default"),i.push("/>");return ch9.functions.html5Presenter.fallbackHtml=t.fallbackHtml!=null?t.fallbackHtml:'<div class="error"><p><a href="'+n[0].url+'">Click to play video<\/a><\/p><\/div>',i.push("<\/video>"),i.join("")},{haveVideo:l.videos.length>0,isPlayPossible:!t.userAgent||t.userAgent.html5playerSupported(),fallbackHtml:'<div class="error">Error attempting to play video.<\/div>',getErrorMessage:function(){var n="",t="<h3>HTML5<\/h3>";return this.isPlayPossible&&!this.haveVideo?n+=t+'<p>We don\'t have an HTML5 version of this video yet.<br />Want to let us know? Please <a href="/ContactUs">Contact Us<\/a>, so we can try to provide one.<\/p>':!this.isPlayPossible&&this.haveVideo&&(n+=t+'<p>We have an HTML5 version but your browser doesn\'t seem to support it.<br />Do you want to upgrade to a browser that supports h264 MP4 HTML5 video playback?<br /><a href="http://windows.microsoft.com/en-US/internet-explorer/download-ie">IE9+<\/a>, <a href="http://www.google.com/chrome/">Chrome 5+<\/a>, or <a href="http://www.apple.com/safari/">Safari 4+<\/a><\/p>'),n},create:function(t){var r=n.grep(l.videos,function(n){return u[n.type]}),e,f;return(r=r.sort(i.sortVideosBy(o)),!r||r.length==0)?t:(e={"class":"Player",poster:l.episode.images.playerPreview,dofallback:!0,fallbackHtml:t,oncanplay:"ch9.functions.html5Presenter.html5Loaded(this);"},f={},n.extend(f,l.player,e),l.episode.captions&&l.episode.captions.length>0&&(f.tracks=l.episode.captions),a(r,f))},setPlayer:function(i){var u,e,f;t.VideoPlayer=new t.VideoPlayerConstructor("html5",i);u=t.VideoPlayer;e={targetPlay:function(){this.target&&this.target.play()},targetPause:function(){this.target&&this.target.pause()},targetStop:function(){this.target&&this.target.stop()},targetGetPosition:function(){return this.target?this.target.currentTime:null},targetIsPaused:function(){return this.target?this.target.paused:!1},targetIsReady:function(){return this.target?this.target.readyState>=3:!1},targetCanSeek:function(){return this.targetIsReady()},targetSeek:function(n){this.target&&(this.target.play(),this.target.currentTime=n)},targetRemove:function(){this.target&&(this.target.pause(),this.target.src="",this.target.ontimeupdate=null,this.target.onpause=null,this.target.onerror=null)}};n.extend(u,e);try{l.player.useCh9CustomPlayer&&t.Channel9Html5PlayerConstructor&&(u.target.controls=!1,t.Channel9Html5Player=new t.Channel9Html5PlayerConstructor(l.player,l.episode,l.user),u=n.extend(u,t.Channel9Html5Player));t.Ch9ConvivaConstructor&&(t.Ch9Conviva=new t.Ch9ConvivaConstructor({assetName:l.episode.contentId,duration:l.episode.length,isLive:!1,playerName:"html5 website player",source:u.target.currentSrc,c9Id:l.user.c9Id},i));f=v.getStartTime();f.seconds>0&&(r&&console.log("seeking to start time: "+f.seconds),u.seek(f));n(u.target).on("timeupdate",function(){t.Services&&t.VideoPlayer?(t.Services.sendAnalytics(l.episode,"html5"),t.Services.addVideoProgress(l.episode,l.user)):n(u.target).off("timeupdate")});n(u.target).on("pause",function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(l.episode,l.user):n(u.target).off("pause")})}catch(o){r&&console.log("error attaching events to html5 player: "+o)}t.Spinner&&t.Spinner.hide()},fallback:function(t){if(t&&t.hasChildNodes()){while(t.hasChildNodes())if(t.firstChild){var i=n(t.firstChild);i.is("source")&&t.removeChild(t.firstChild)}t.networkState&&t.networkState==t.NETWORK_NO_SOURCE&&(n(t).parent().append(this.fallbackHtml),n(t).remove())}},fallbackSource:function(t){if(t&&n(t).is("source")){var i=n(t).parent().get(0);i&&i.firstChild&&(i.removeChild(i.firstChild),i.networkState&&i.networkState==i.NETWORK_NO_SOURCE&&(n(i).parent().append(this.fallbackHtml),n(i).remove()))}},html5Loaded:function(n){if(!t||!t.VideoPlayer)try{this.setPlayer(n)}catch(i){r&&console.log("error loading html5 player: "+i)}}}}})(jQuery);
(function(n){"use strict";var i=ch9.functions,t=i.Resources,r=i.helpers.debug;i.Channel9Html5PlayerConstructor=function(u,f,e){r&&console.log("starting channel9Html5Player");var o=this,s=i.helpers.Key,w={High:{order:0},Medium:{order:1},Low:{order:2}};if(this.player=u,this.episode=f,this.user=e,this.pagePromises=[],this.videoPlayer=i.VideoPlayer,this.videoElement=this.videoPlayer.target,this.playerGoesHere=n(".playerGoesHere",this.player.container),this.episode.length=this.videoElement.duration,this.tracks=this.episode.captions,this.language="en",this.showCaptions=!1,this.captionsClosedByScript=!1,this.markers=null,this.tracks.length){var b=n.grep(this.tracks,function(n){return n.isdefault==!0})[0],at=n.grep(this.tracks,function(n){return n.language=="en"})[0],k=this.tracks[0];typeof b!="undefined"?(this.showCaptions=!0,this.language=b.language):typeof at=="undefined"&&typeof k!="undefined"&&(this.language=k.language)}this.source=n("video source[src='"+this.videoElement.currentSrc+"']",this.playerGoesHere);this.qualities=n("video source:not([type='video/webm'])",this.playerGoesHere).map(function(){return{label:n(this).data("quality"),src:n(this).attr("src")}}).get().sort(function(n,t){return(n=n.label,t=t.label,n===t)?0:w[n].order<w[t].order?-1:1});this.quality=this.source.data("quality");this.controlsTimer=null;this.volumeSliderTimer=null;this.detailsTimer=null;this.seekWidth=120;this.addedEndOfVideo=!1;this.currentTime=0;var vt=function(n){var t=n?n.keyCode:null;t&&t!=s.enter&&t!=s.space||(Math.floor(o.videoElement.currentTime)>=o.episode.length?o.videoElement.currentTime=0:o.videoElement.paused?o.videoPlayer.play():o.videoPlayer.pause())},yt=function(){var t=n(".controls .seek.control",o.playerGoesHere);t.data("dragging",!0)},pt=function(t){var i=n(".controls .seek.control",o.playerGoesHere);i.data("dragging")==!0&&d(t);t&&t.stopPropagation()},wt=function(){var t=n(".controls .seek.control",o.playerGoesHere);t.data("dragging")==!0&&t.data("dragging",!1)},d=function(t){var r=t?t.keyCode:null,i=o.videoElement.currentTime,f=n(".controls .seek.control",o.playerGoesHere),u,e;if(r)switch(r){case s.leftArrow:case s.downArrow:i=o.videoElement.currentTime--;break;case s.rightArrow:case s.upArrow:i=o.videoElement.currentTime++;break;case s.pageDown:i=o.videoElement.currentTime-30;break;case s.pageUp:i=o.videoElement.currentTime+30;break;case s.home:i=1;break;case s.end:i=o.episode.length;break;default:u=0;r>=s.num0&&r<=s.num9?u=s.num0:r>=s.numPad0&&r<=s.numPad9&&(u=s.numPad0);u>0&&(i=o.episode.length*((r-u)/10))}else e=t.pageX-f.offset().left,i=o.episode.length*(e/f.width());i=Math.max(1,Math.min(o.episode.length,i));o.videoElement.currentTime=i;t&&t.stopPropagation()},bt=function(){var t,i;ht();t=n(".captionRegion",o.playerGoesHere);o.showCaptions&&o.markers&&o.markers.length?(i=n.grep(o.markers,function(n){return n.begin<=o.videoElement.currentTime&&n.end>=o.videoElement.currentTime})[0],i&&(t.is(":hidden")&&t.show(),n(".captions",t).html(i.content))):t.hide()},kt=function(n){var t=n?n.keyCode:null,i;t&&t!=s.enter&&t!=s.space||(i=o.videoElement.currentTime-30,o.videoPlayer.seek({seconds:Math.max(Math.min(o.episode.length,i),1)}))},dt=function(){n(this).addClass("override").text("-30s")},gt=function(){n(this).removeClass("override").text(i.helpers.getTimePieces(Math.floor(o.videoElement.currentTime)))},ni=function(n){var t=n?n.keyCode:null,i;t&&t!=s.enter&&t!=s.space||(i=o.videoElement.currentTime+30,o.videoPlayer.seek({seconds:Math.max(Math.min(o.episode.length,i),1)}))},ti=function(){n(this).addClass("override").text("+30s")},ii=function(){n(this).removeClass("override").text(i.helpers.getTimePieces(Math.floor(o.episode.length-Math.min(o.episode.length,o.videoElement.currentTime))))},ri=function(t){var i=t?t.keyCode:null,h=n(".controls .volume.control"),e=n(".volumeSlider",h),u=o.videoElement.volume,r,f;if(i&&i!=s.enter&&i!=s.space||(o.videoElement.muted?(o.videoElement.muted=!1,e.fadeIn("fast")):e.is(":hidden")?e.fadeIn("fast"):(o.videoElement.muted=!0,e.fadeOut("slow"),h.data("active",!1),o.volumeSliderTimer&&clearTimeout(o.volumeSliderTimer))),i&&i!=s.enter&&i!=s.space){r=u;switch(i){case s.leftArrow:case s.downArrow:r=u-.05;break;case s.rightArrow:case s.upArrow:r=u+.05;break;case s.pageDown:r=u-.1;break;case s.pageUp:r=u+.1;break;case s.home:r=1;break;case s.end:r=0;break;default:f=0;i>=s.num0&&i<=s.num9?f=s.num0:i>=s.numPad0&&i<=s.numPad9&&(f=s.numPad0);f>0&&(r=(i-f)/10)}o.videoElement.volume=Math.max(0,Math.min(1,r))}},g=function(){n(this).data("active",!0)},nt=function(){n(this).data("active")==!0&&(n(this).data("active",!1),ui())},ui=function(){o.volumeSliderTimer&&clearTimeout(o.volumeSliderTimer);o.volumeSliderTimer=setTimeout(fi,3e3)},fi=function(){var t=n(".controls .volume.control",o.playerGoesHere),i=n(".volumeSlider",t);t.data("active")||i.is(":hidden")||(t.data("dragging",!1),i.fadeOut("slow"))},ei=function(){var t=n(".controls .volume.control",o.playerGoesHere);t.data("dragging",!0)},oi=function(t){var i=n(".controls .volume.control",o.playerGoesHere);if(i.data("dragging")==!0){var r=n(".volumeSlider",i),u=n(".handle",r),f=u.offset().top-r.offset().top,e=(100-f)/100;o.videoElement.volume=e}t&&t.stopPropagation()},si=function(){var t=n(".controls .volume.control",o.playerGoesHere);t.data("dragging")==!0&&t.data("dragging",!1)},hi=function(t){if(t){var r=n(".controls .volume.control .volumeSlider",o.playerGoesHere),u=t.pageY-r.offset().top,i=(100-u)/100;i=Math.max(0,Math.min(1,i));o.videoElement.volume=i;t.stopPropagation()}},ci=function(){var i=n(".controls .volume.control",o.playerGoesHere),f=n(".volumeSlider",i),e=n(".handle",f),r=f.height()-e.height(),u=Math.floor(r-r*o.videoElement.volume);u=Math.max(Math.min(u,r),0);e.css({top:u+"px"});o.videoElement.muted?i.addClass("muted").attr({title:t.getString("volumeButtonMutedLabel"),"aria-valuenow":"0","aria-valuetext":"0%"}):i.removeClass("muted").attr({title:t.getString("volumeButtonLabel"),"aria-valuenow":o.videoElement.volume,"aria-valuetext":Math.round(o.videoElement.volume*100)+"%"})},tt=function(t){var i=t?t.keyCode:null,r=n("details",n(this));i&&i!=s.enter&&i!=s.space||(r.is(":hidden")?li(r):it(r));t&&t.stopPropagation()},li=function(t){t&&t.is(":hidden")&&(n("a.button",t).each(function(t,i){n(i).attr("tabIndex","0")}),t.attr("open","open"),t.fadeIn("fast"),t.parent(".control.button").data("active",!1))},it=function(t){t&&(t.is(":hidden")||(rt(n(".selector",t)),n("a.button",t).each(function(t,i){n(i).attr("tabIndex","-1")}),t.removeAttr("open"),t.fadeOut("slow"),t.parent(".control.button").data("active",!1),o.detailsTimer&&clearTimeout(o.detailsTimer)))},ai=function(t){t&&(t.addClass("active"),n(".dropdown a.button",t).each(function(t,i){n(i).attr("tabIndex","0")}))},rt=function(t){t&&(t.removeClass("active"),n(".dropdown a.button",t).each(function(t,i){n(i).attr("tabIndex","-1")}))},ut=function(){n(this).parent(".control.button").data("active",!0)},ft=function(){var t=n(this);t.parent(".control.button").data("active")==!0&&(t.parent(".control.button").data("active",!1),vi(t))},vi=function(n){o.detailsTimer&&clearTimeout(o.detailsTimer);o.detailsTimer=setTimeout(it.bind(this,n),3e3)},et=function(n){var t=n?n.keyCode:null;t&&t!=s.enter&&t!=s.space||(o.showCaptions=!0,a(),n&&n.stopPropagation())},yi=function(n){var t=n?n.keyCode:null;t&&t!=s.enter&&t!=s.space||(o.showCaptions=!1,a(),n&&n.stopPropagation())},pi=function(t){var u=t?t.keyCode:null,f=n(".controls .closedCaptions.button",o.playerGoesHere),i,r;u&&(u==s.leftArrow||u==s.rightArrow)?f.focus():(i=n("details .selector",f),i.hasClass("active")?(rt(i),r=n(this).attr("lang"),r&&r!=o.language&&(o.showCaptions=!0,o.language=r,a())):ai(i));t&&t.stopPropagation()},a=function(){var u=n(".controls .closedCaptions.control",o.playerGoesHere),e=n(".cc a.off.button",u),s=n(".cc a.on.button",u),c=n("details .selector .dropdown",u),h,t,f;if(o.showCaptions&&o.language){if(h=n("a."+o.language+".button",c),t=n.grep(o.tracks,function(n){return n.language==o.language})[0],!t||!t.url)return;f=i.Services.Channel9DataSource({source:t.url});o.pagePromises.push(f);n.when(f).then(function(n){if(n){var t=new i.WebVTTMarkerParser;o.markers=t.parseMarkerCollection(n[0])}},function(n){r&&console.log("error getting caption file: "+JSON.stringify(n))});h.addClass("selected").attr("aria-pressed","true").siblings("a.button").removeClass("selected").attr("aria-pressed","false");s.addClass("selected").attr("aria-pressed","true");e.removeClass("selected").attr("aria-pressed","false")}else s.removeClass("selected").attr("aria-pressed","false"),e.addClass("selected").attr("aria-pressed","true")},wi=function(t){var i=t?t.keyCode:null,r;if(!i||i==s.enter||i==s.space){if(r=n(this).data("src"),r!=o.source.attr("src")){var u=n(this).data("quality"),f=n(".controls .settings.control .quality",o.playerGoesHere),e=o.videoElement.currentTime;o.source.attr("src",r);o.videoElement.load();o.videoPlayer.seek({seconds:e});n("a."+u+".button",f).addClass("selected").attr("aria-pressed","true").siblings("a.button").removeClass("selected").attr("aria-pressed","false")}t&&t.stopPropagation()}},v=function(t){var r=t?t.keyCode:null,u;r&&r!=s.enter&&r!=s.space||(u=i.helpers.addQueryStringParam(n(this).attr("href"),"wt.mc_id=player"),o.player.isEmbed?window.open(u):window.location.href=u,t&&t.preventDefault())},c=function(){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return n!=null||o.playerGoesHere.hasClass("fullscreen")},bi=function(){var n=o.playerGoesHere.get(0);return n.requestFullscreen&&typeof n.requestFullscreen=="function"||n.msRequestFullscreen&&typeof n.msRequestFullscreen=="function"||n.mozRequestFullScreen&&typeof n.mozRequestFullScreen=="function"||n.webkitRequestFullscreen&&typeof n.webkitRequestFullscreen=="function"||o.videoElement.webkitEnterFullscreen&&typeof o.videoElement.webkitEnterFullscreen=="function"?!0:!1},ot=function(n){var i=n?n.keyCode:null,t;i&&i!=s.enter&&i!=s.space||(c()?document.exitFullscreen&&typeof document.exitFullscreen=="function"?document.exitFullscreen():document.msExitFullscreen&&typeof document.msExitFullscreen=="function"?document.msExitFullscreen():document.mozCancelFullScreen&&typeof document.mozCancelFullScreen=="function"?document.mozCancelFullScreen():document.webkitExitFullscreen&&typeof document.webkitExitFullscreen=="function"?document.webkitExitFullscreen():(o.playerGoesHere.removeClass("fullscreen"),l()):(t=o.playerGoesHere.get(0),t.requestFullscreen&&typeof t.requestFullscreen=="function"?t.requestFullscreen():t.msRequestFullscreen&&typeof t.msRequestFullscreen=="function"?t.msRequestFullscreen():t.mozRequestFullScreen&&typeof t.mozRequestFullScreen=="function"?t.mozRequestFullScreen():t.webkitRequestFullscreen&&typeof t.webkitRequestFullscreen=="function"?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):o.videoElement.webkitEnterFullscreen&&typeof o.videoElement.webkitEnterFullscreen=="function"?o.videoElement.webkitEnterFullscreen():(o.playerGoesHere.addClass("fullscreen"),l())))},l=function(){var i=n(".controls .fullscreen",o.playerGoesHere);c()?i.addClass("restore").attr({title:t.getString("fullscreenRestoreLabel"),"aria-pressed":"true"}):i.removeClass("restore").attr({title:t.getString("fullscreenLabel"),"aria-pressed":"false"});ct()},ur=function(n){n&&n.preventDefault()},ki=function(t){var i=t?t.keyCode:null;i&&i==s.escape&&c()&&ot();n(".controls",o.playerGoesHere).fadeIn("fast");y();p();t&&t.preventDefault()},y=function(){n(".controls",o.playerGoesHere).data("active",!0)},p=function(){var t=n(".controls",o.playerGoesHere);t.data("active")==!0&&(t.data("active",!1),gi())},di=function(){var t=n(".controls"),i=n.grep(n(".control",t),function(t){return n(t).data("active")==!0});i.length||t.data("active")||t.is(":hidden")||(t.fadeOut("slow"),clearTimeout(o.controlsTimer))},gi=function(){o.controlsTimer&&clearTimeout(o.controlsTimer);o.controlsTimer=setTimeout(di,3e3)},st=function(i,r){i.append(n("<article>").css({backgroundImage:"url("+r.images.large+")"}).append(n("<a>").attr({href:r.permalink,tabIndex:"0",title:r.title}).addClass("playRelated").text(t.getString("playButtonLabel")).on("click keydown",v)).append(n("<header>").append(n("<h1>").text(r.title))))},nr=function(){o.player.isEmbed&&n(".endOfVideo .channel9Link",o.playerGoesHere).show();var u=n.when([]),f=i.Services.Episodes.getRelatedEpisodes(o.episode.relatedApi,9),e=!1;(o.episode.isMVA||!o.episode.relatedApi||o.episode.relatedApi.trim()=="")&&(f=i.Services.Episodes.getFeaturedData(9),e=!0);o.pagePromises.push(f);!o.player.isEmbed&&o.user.isLoggedIn&&(u=i.Services.Episodes.getQueueData(5));o.pagePromises.push(u);n.when(u,f).then(function(i,r){if(i&&(n(".endOfVideo .sections section.queue h1").text(t.getString("watchQueuedVideosLabel")),n.grep(i,function(n){return n.contentId.replace(/-/g,"")!=o.episode.contentId}).slice(0,4).forEach(function(t){st(n(".endOfVideo .sections section.queue .abstracts",o.playerGoesHere),t)})),r){n(".endOfVideo .sections section.related h1").text(e?t.getString("watchFeaturedLabel"):t.getString("watchRelatedLabel"));var u=9;i&&i.length&&(u=u-i.length);n.grep(r,function(n){return n.contentId.replace(/-/g,"")!=o.contentId}).slice(0,u).forEach(function(t){st(n(".endOfVideo .sections section.related .abstracts",o.playerGoesHere),t)})}ir()},function(n){r&&console.log("error getting related videos: "+JSON.stringify(n.responseText))})},tr=function(){if(o.currentTime!=o.videoElement.currentTime){o.currentTime=o.videoElement.currentTime;var r=n(".controls .play.control",o.playerGoesHere),f=n(".controls .skipBack.control",o.playerGoesHere),e=n(".controls .skipAhead.control",o.playerGoesHere),u=n(".endOfVideo",o.playerGoesHere),s=o.currentTime,h=Math.floor(o.episode.length-o.currentTime);!o.addedEndOfVideo&&o.episode.length-o.currentTime<=60&&(o.addedEndOfVideo=!0,nr());o.currentTime>=o.episode.length?(r.removeClass("pause").addClass("replay").attr({title:t.getString("replayButtonLabel")}),s=o.episode.length,h=0,u.show(),o.showCaptions&&(o.showCaptions=!1,o.captionsClosedByScript=!0)):o.videoElement.paused?(r.removeClass("replay").removeClass("pause").attr({title:t.getString("playButtonLabel")}),u.hide(),o.captionsClosedByScript&&(o.showCaptions=!0,o.captionsClosedByScript=!1)):(r.removeClass("replay").addClass("pause").attr({title:t.getString("pauseButtonLabel")}),u.hide(),o.captionsClosedByScript&&(o.showCaptions=!0,o.captionsClosedByScript=!1));f.hasClass("override")||f.text(i.helpers.getTimePieces(s));e.hasClass("override")||e.text(i.helpers.getTimePieces(h))}},ht=function(){var t=n(".controls .seek.control",o.playerGoesHere),r=n(".handle",t),u=o.seekWidth-r.width(),f=o.videoElement.currentTime/o.episode.length,e=Math.floor(u*f);r.css({left:Math.max(Math.min(e,u),0)+"px"});t.attr({"aria-valuenow":o.videoElement.currentTime,"aria-valuetext":i.helpers.getTimePieces(o.videoElement.currentTime)})},h=function(){var t=0;return n(".controls .control:not(.hidden)",o.playerGoesHere).each(function(i,r){t+=n(r).outerWidth(!0)}),t},ct=function(){var t=c()?screen.width:o.playerGoesHere.width(),s=c()?screen.height:o.playerGoesHere.height(),r=n(".controls",o.playerGoesHere),y=n(".control.play",r),p=n(".control.volume",r),f=n(".control.seek",r),e=n(".handle",f),l=n(".control.channel9Link",r),w=n(".control.fullscreen",r),b=n(".control.closedCaptions",r),k=n(".control.settings",r),d=n(".control.skipAhead",r),g=n(".control.skipBack",r),nt=n(".control.queue",r),a=n(".control.spacer",r),v,u;o.seekWidth=f.outerWidth(!0);n(".control",r).addClass("hidden");h()+60<=t&&y.removeClass("hidden");i.userAgent&&!i.userAgent.isIOS()&&h()+60<=t&&p.removeClass("hidden");(!o.player.isEmbed||o.player.isEmbed&&bi())&&h()+60<=t&&w.removeClass("hidden");h()+70<=t&&d.removeClass("hidden");o.tracks.length&&h()+60<=t&&s>=190?b.removeClass("hidden"):o.showCaptions=!1;h()+60<=t&&s>=190&&k.removeClass("hidden");h()+200<=t&&g.removeClass("hidden");o.player.isEmbed&&h()+190<=t&&l.removeClass("hidden");h()+100<=t?(o.seekWidth=t-h()-30,i.userAgent&&i.userAgent.isIE9()&&f.css({width:o.seekWidth}),f.removeClass("hidden"),e.css({borderLeftWidth:o.seekWidth-e.width()+"px",marginLeft:"-"+(o.seekWidth-e.width())+"px"}),ht()):(o.player.isEmbed&&h()+60<=t&&l.removeClass("hidden"),h()<t&&(v=t-h(),a.removeClass("hidden"),a.width(v)));u=n(".captionRegion",o.playerGoesHere);u.css({fontSize:"16px"});t>=500&&u.css({fontSize:"18px"});t>=700&&u.css({fontSize:"24px"});t>=960&&u.css({fontSize:"26px"});t>=1280&&u.css({fontSize:"32px"})},ir=function(){var i=c()?screen.width:o.playerGoesHere.width(),r=n(".endOfVideo",o.playerGoesHere),t=n(".abstracts article",r),e=n(".sections section.queue",r),u=n(".sections > section > header > h1",r),f=n(".sections > section article > header > h1",r);t.addClass("hidden").css({width:"48%"});t.slice(0,2).removeClass("hidden");u.css({fontSize:"16px"});f.css({fontSize:"14px"});i>=500&&u.css({fontSize:"26px"});i>=700&&t.css({width:"31%"}).slice(2,6).removeClass("hidden");i>=960&&(u.css({fontSize:"26px"}),t.css({width:"23%"}).slice(6,8).removeClass("hidden"),!o.player.isEmbed&&o.user.isLoggedIn&&(e.show(),t.css({width:"48%"})));i>=1280&&(u.css({fontSize:"32px"}),f.css({fontSize:"18px"}))},rr=function(){n(".ch9p",o.playerGoesHere).empty().remove();n(o.playerGoesHere).attr("tabIndex","0").on("focus keydown mouseenter mousemove",ki).append(n("<div>").addClass("ch9p").append(n("<section>").addClass("endOfVideo").hide().append(n("<a>").addClass("channel9Link").attr({href:"http://channel9.msdn.com/",tabIndex:"0"}).text(t.getString("channel9LinkLabel")).on("click keydown",v).hide()).append(n("<div>").addClass("sections").append(n("<section>").addClass("related").append(n("<header>").append(n("<h1>"))).append(n("<div>").addClass("abstracts"))).append(n("<section>").addClass("queue").hide().append(n("<header>").append(n("<h1>"))).append(n("<div>").addClass("abstracts"))))).append(n("<div>").addClass("captionRegion").hide().append(n("<div>").addClass("captions").attr({"aria-label":t.getString("closedCaptionsLabel"),"aria-live":"assertive","aria-atomic":"true"}))).append(n('<div role="application">').addClass("controls").data("active",!0).on("focus keydown mouseenter",y).on("blur mouseleave",p).append(n("<a>").addClass("play control button").attr({title:t.getString("playButtonLabel"),tabIndex:"0"}).on("click keydown",vt)).append(n("<a>").addClass("volume control button").attr({title:t.getString("volumeButtonLabel"),"aria-role":"slider","aria-readonly":"false","aria-valuemin":"0","aria-valuemax":"1","aria-valuenow":o.videoElement.volume,tabIndex:"0"}).on("click keydown",ri).on("focus mouseenter",g).on("blur mouseleave",nt).append(n("<div>").addClass("volumeSlider").hide().on("click",hi).on("mouseenter",g).on("mouseleave",nt).append(n("<div>").addClass("handle").draggable({axis:"y",containment:"parent",start:ei,drag:oi,stop:si})))).append(n("<div>").addClass("spacer control")).append(n("<a>").addClass("skipBack control label").attr({title:t.getString("skipBackLabel"),role:"timer",tabIndex:"0"}).text(i.helpers.getTimePieces(0)).on("focus mouseenter",dt).on("blur mouseleave",gt).on("click keydown",kt)).append(n("<div>").addClass("seek control").attr({title:t.getString("seekLabel"),"aria-label":t.getString("seekLabel"),"aria-role":"progress","aria-readonly":"false","aria-valuemin":"0","aria-valuemax":o.episode.length,"aria-valuenow":o.videoElement.currentTime,tabIndex:"0"}).on("click keydown",d).append(n("<div>").addClass("handle").draggable({axis:"x",containment:"parent",start:yt,drag:pt,stop:wt}))).append(n("<a>").addClass("skipAhead control label").attr({title:t.getString("skipAheadLabel"),role:"timer",tabIndex:"0"}).text(i.helpers.getTimePieces(0)).on("focus mouseenter",ti).on("blur mouseleave",ii).on("click keydown",ni)).append(n("<a>").addClass("closedCaptions control button").attr({title:t.getString("closedCaptionsLabel"),tabIndex:"0"}).on("click keydown",tt).append(n("<details>").attr("open","open").hide().on("focus mouseenter",ut).on("blur mouseleave",ft).append(n("<summary>").text(t.getString("closedCaptionsLabel"))).ifThen(o.tracks.length,function(){this.append(n("<section>").addClass("cc").append(n("<header>").append(n("<h2>").text(t.getString("closedCaptionsLabel")))).append(n("<a>").addClass("off button selected").attr({title:t.getString("captionsOffLabel"),"aria-pressed":"true"}).text(t.getString("captionsOffShortLabel")).on("click keydown",yi)).append(n("<a>").addClass("on button").attr({title:t.getString("captionsOnLabel"),"aria-pressed":"false"}).text(t.getString("captionsOnShortLabel")).on("click keydown",et)).append(n("<div>").addClass("selector").append(n("<div>").addClass("dropdown").ifThen(o.tracks.length,function(){for(var t,r,i=0;i<o.tracks.length;i++)t=o.tracks[i],r=t.language==o.language,n(this).append(n("<a>").addClass(t.language+" button"+(r?" selected":"")).attr({tabIndex:"0",lang:t.language,"aria-pressed":r?"true":"false"}).text(t.label).on("click keydown",pi))}))))}))).append(n("<a>").addClass("settings control button").attr({title:t.getString("settingsLabel"),tabIndex:"0"}).on("click keydown",tt).append(n("<details>").attr("open","open").hide().on("focus mouseenter",ut).on("blur mouseleave",ft).append(n("<summary>").text(t.getString("settingsLabel"))).append(n("<section>").addClass("quality").append(n("<header>").append(n("<h2>").text(t.getString("videoQualityLabel")))).ifThen(o.qualities.length,function(){for(var i,r=0;r<o.qualities.length;r++)i=o.qualities[r],this.append(n("<a>").addClass(i.label+" button").attr({"aria-pressed":"false"}).data("quality",i.label).data("src",i.src).text(t.getString("videoQuality"+i.label+"Label")).on("click keydown",wi).ifThen(o.quality==i.label,function(){this.addClass("selected");this.attr("aria-pressed","true")}))})))).append(n("<a>").addClass("channel9Link control button").attr({href:"http://channel9.msdn.com",title:t.getString("channel9LinkLabel"),tabIndex:"0"}).on("click keydown",v)).append(n("<a>").addClass("fullscreen control button").attr({title:t.getString("fullscreenLabel"),tabIndex:"0"}).on("click keydown",ot))))};try{n(o.videoElement).on("volumechange",ci);n(o.videoElement).on("play pause timeupdate",tr);n(o.videoElement).on("timeupdate",bt)}catch(lt){r&&console.log("error attaching events to html5 video player: "+JSON.stringify(lt))}try{document.addEventListener("fullscreenchange",l);document.addEventListener("webkitfullscreenchange",l);document.addEventListener("mozfullscreenchange",l);document.addEventListener("MSFullscreenChange",l)}catch(lt){r&&console.log("error attaching events to document: "+JSON.stringify(lt))}return n(function(){var u=o.player.language||o.language,t=i.Resources.getResourceFile,r=function(){rr();ct();y();p();o.language&&o.showCaptions&&et()};n.when(t(u)).then(r,function(){n.when(t()).then(r,function(){o.videoElement.controls=!0})})}),{remove:function(){if(o.videoElement.src="",n(".ch9p",o.playerGoesHere).empty().remove(),o.pagePromises)for(var t=0;t<o.pagePromises.length;t++)o.pagePromises[t].fail()}}}})(jQuery);
(function(){"use strict";var n=ch9.functions,t=n.helpers,i=t.debug;n.WebVTTMarkerParser=function(){var u=function(){var n=this;return this.cues=[],{getCues:function(){return n.cues},addCue:function(t){n.cues.push(t)}}},i=function(){var n=this;return this.begin=null,this.end=null,this.content="",{getBegin:function(){return n.begin},setBegin:function(t){n.begin=t},getEnd:function(){return n.end},setEnd:function(t){n.end=t},getContent:function(){return n.content},setContent:function(t){n.content=t}}},r=/ \-\-\> /,f=function(f){for(var w=new u,y=[],o=new i,p=null,v=f.replace(/\r\n/,"\n").split(/\n/),h,a,b,l,k,c,e,v=$.grep(v,function(n){return n?n.trim()!="":!1}),s=0;s<v.length;s++)if(h=v[s],!/^WEBVTT/.test(h)&&!/^WEBVTT FILE/.test(h)&&!/^NOTE/.test(h))if(r.test(h)){o.getContent()!=null&&y.push(o);o=new i;a=h.split(r);a=$.grep(a,function(n){return n?n.trim()!="":!1});b=a[0];l=a[1].split(" ");l=$.grep(l,function(n){return n?n.trim()!="":!1});k=l[0];l.shift(0);var tt=l,d=new n.TimeExpression,g=d.parse(b||0),nt=d.parse(k||0);o.setBegin(g);o.setEnd(nt);o.setContent("")}else c=o.getContent().trim(),c!=""&&(c+="\n"),c+=unescape(h),c=t.widowControl(c).replace(/\n/,"<br>").replace(/\r/,"<br>"),o.setContent(c);for(s=0;s<y.length;s++)(e=y[s],e.getContent().trim()!="")&&(p!=null&&e.begin<p.begin||e.end<e.begin||(w.addCue({begin:e.getBegin(),end:e.getEnd(),content:e.getContent()}),p=e));return w};return{parseMarkerCollection:function(n){var t=f(n);return t.getCues()}}};n.TimeExpression=function(){var n=/(\d{2}):(\d{2}):(\d{2})\.(\d+)/,t=/(\d{2}):(\d{2})\.(\d+)/;return{parse:function(r){var e,o,s,h=0,f=r.trim(),c=n.test(f),u=n.exec(f);if(!c)if(i&&console.log("Invalid time expression: "+r),t.test(f))u=t.exec(f),u.splice(2,0,"00");else return null;return e=parseFloat(u[1]*36e5),o=parseInt(u[2]*6e4),s=parseInt(u[3]*1e3),u[4]!=""&&(h=parseFloat(u[4])),(e+o+s+h)/1e3}}}})();
window.Silverlight||(window.Silverlight={});Silverlight._silverlightCount=0;Silverlight.__onSilverlightInstalledCalled=!1;Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=";Silverlight.__installationEventFired=!1;Silverlight.onGetSilverlight=null;Silverlight.onSilverlightInstalled=function(){window.location.reload(!1)};Silverlight.isInstalled=function(n,t){var i,l,s,h,e,r,u,o,c,f;if(!t)return!1;n==undefined&&(n=null);i=!1;try{s=!1;try{l=new ActiveXObject("AgControl.AgControl");n===null?i=!0:l.IsVersionSupported(n)&&(i=!0)}catch(a){s=!0}if(!s)return i;if(h=navigator.plugins["Silverlight Plug-In"],h)if(n===null)i=!0;else{for(e=h.description,e==="1.0.30226.2"&&(e="2.0.30226.2"),r=e.split(".");r.length>3;)r.pop();while(r.length<4)r.push(0);for(u=n.split(".");u.length>4;)u.pop();f=0;do o=parseInt(u[f]),c=parseInt(r[f]),f++;while(f<u.length&&o===c);o<=c&&!isNaN(o)&&(i=!0)}}catch(a){i=!1}return i};Silverlight.WaitForInstallCompletion=function(){};Silverlight.__startup=function(){if(navigator.plugins.refresh(),Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null),Silverlight.isBrowserRestartRequired){if(window.navigator.mimeTypes){var n=navigator.mimeTypes["application/x-silverlight-2"],i=navigator.mimeTypes["application/x-silverlight-2-b2"],r=navigator.mimeTypes["application/x-silverlight-2-b1"],t=r;i&&(t=i);!n&&(r||i)?Silverlight.__installationEventFired||(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0):n&&t&&n.enabledPlugin&&t.enabledPlugin&&n.enabledPlugin.description!=t.enabledPlugin.description&&(Silverlight.__installationEventFired||(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0))}}else Silverlight.WaitForInstallCompletion(),Silverlight.__installationEventFired||(Silverlight.onInstallRequired(),Silverlight.__installationEventFired=!0);Silverlight.disableAutoStartup||window.removeEventListener};Silverlight.disableAutoStartup||(window.addEventListener?window.addEventListener("load",Silverlight.__startup,!1):window.attachEvent("onload",Silverlight.__startup));Silverlight.createObject=function(n,t,i,r,u,f,e,o){var c=u,s=r,l,h,v,a;if(s.source=n,l={version:s.version,alt:s.alt,autoupgrade:s.autoupgrade,upgradeMessage:s.upgradeMessage},f&&(s.initParams=f),s.isWindowless&&!s.windowless&&(s.windowless=s.isWindowless),s.framerate&&!s.maxFramerate&&(s.maxFramerate=s.framerate),i&&!s.id&&(s.id=i),delete s.ignoreBrowserVer,delete s.inplaceInstallPrompt,delete s.version,delete s.isWindowless,delete s.framerate,delete s.data,delete s.src,delete s.alt,delete s.autoupgrade,delete s.upgradeMessage,Silverlight.isInstalled(l.version,o)){for(h in c)if(c[h])if(h=="onLoad"&&typeof c[h]=="function"&&c[h].length!=1&&(v=c[h],c[h]=function(n){return v(document.getElementById(i),e,n)}),a=Silverlight.__getHandlerName(c[h]),a!=null)s[h]=a,c[h]=null;else throw"typeof events."+h+" must be 'function' or 'string'";slPluginHTML=Silverlight.buildHTML(s)}else slPluginHTML=Silverlight.buildPromptHTML(l);return t&&(t.innerHTML=slPluginHTML),slPluginHTML};Silverlight.buildHTML=function(n){var t=[],i;t.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"');n.id!=null&&t.push(' id="'+Silverlight.HtmlAttributeEncode(n.id)+'"');n.width!=null&&t.push(' width="'+n.width+'"');n.height!=null&&t.push(' height="'+n.height+'"');n["class"]!=null&&t.push(' class="'+n["class"]+'"');t.push(" >");delete n.id;delete n.width;delete n.height;delete n["class"];for(i in n)n[i]&&t.push('<param name="'+Silverlight.HtmlAttributeEncode(i)+'" value="'+Silverlight.HtmlAttributeEncode(n[i])+'" />');return t.push("<\/object>"),t.join("")};Silverlight.createObjectEx=function(n){var t=n,i=Silverlight.createObject(t.source,t.parentElement,t.id,t.properties,t.events,t.initParams,t.context);if(t.parentElement==null)return i};Silverlight.buildPromptHTML=function(n){var t="",r=Silverlight.fwlinkRoot,i=n.version;return Silverlight.isInstalled(null)&&n.autoupgrade&&n.upgradeMessage?t=n.upgradeMessage:n.alt?t=n.alt:(i||(i=""),t="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/><\/a>",t=t.replace("{1}",i),t=t.replace("{2}",r+"161376")),t};Silverlight.getSilverlight=function(n){var i,t,r,u;Silverlight.onGetSilverlight&&Silverlight.onGetSilverlight();i="";t=String(n).split(".");t.length>1&&(r=parseInt(t[0]),i=isNaN(r)||r<2?"1.0":t[0]+"."+t[1]);u="";i.match(/^\d+\056\d+$/)&&(u="&v="+i);Silverlight.followFWLink("149156"+u)};Silverlight.followFWLink=function(n){top.location=Silverlight.fwlinkRoot+String(n)};Silverlight.HtmlAttributeEncode=function(n){var t,i="",r;if(n==null)return null;for(r=0;r<n.length;r++)t=n.charCodeAt(r),i=t>96&&t<123||t>64&&t<91||t>43&&t<58&&t!=47||t==95?i+String.fromCharCode(t):i+"&#"+t+";";return i};Silverlight.default_error_handler=function(n,t){var r=t.ErrorType,u=t.ErrorCode,i="\nSilverlight error message     \n";i+="ErrorCode: "+u+"\n";i+="ErrorType: "+r+"       \n";i+="Message: "+t.ErrorMessage+"     \n";r=="ParserError"?(i+="XamlFile: "+t.xamlFile+"     \n",i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"):r=="RuntimeError"&&(t.lineNumber!=0&&(i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"),i+="MethodName: "+t.methodName+"     \n");alert(i)};Silverlight.__cleanup=function(){for(var n=Silverlight._silverlightCount-1;n>=0;n--)window["__slEvent"+n]=null;Silverlight._silverlightCount=0;window.removeEventListener?window.removeEventListener("unload",Silverlight.__cleanup,!1):window.detachEvent("onunload",Silverlight.__cleanup)};Silverlight.__getHandlerName=function(n){var t="",i;return typeof n=="string"?t=n:typeof n=="function"?(Silverlight._silverlightCount==0&&(window.addEventListener?window.addEventListener("unload",Silverlight.__cleanup,!1):window.attachEvent("onunload",Silverlight.__cleanup)),i=Silverlight._silverlightCount++,t="__slEvent"+i,window[t]=n):t=null,t};Silverlight.onRequiredVersionAvailable=function(){};Silverlight.onRestartRequired=function(){};Silverlight.onUpgradeRequired=function(){};Silverlight.onInstallRequired=function(){};Silverlight.IsVersionAvailableOnError=function(n,t){var i=!1;try{t.ErrorCode!=8001||Silverlight.__installationEventFired?t.ErrorCode!=8002||Silverlight.__installationEventFired?t.ErrorCode==5014||t.ErrorCode==2106?Silverlight.__verifySilverlight2UpgradeSuccess(t.getHost())&&(i=!0):i=!0:(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0):(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0)}catch(r){}return i};Silverlight.IsVersionAvailableOnLoad=function(n){var t=!1;try{Silverlight.__verifySilverlight2UpgradeSuccess(n.getHost())&&(t=!0)}catch(i){}return t};Silverlight.__verifySilverlight2UpgradeSuccess=function(n){var i=!1,r="5.0.61118.0",t=null;try{n.IsVersionSupported(r+".99")?(t=Silverlight.onRequiredVersionAvailable,i=!0):t=n.IsVersionSupported(r+".0")?Silverlight.onRestartRequired:Silverlight.onUpgradeRequired;t&&!Silverlight.__installationEventFired&&(t(),Silverlight.__installationEventFired=!0)}catch(u){}return i};
function silverlightLoaded(n){if(!ch9.functions.VideoPlayer)try{ch9.functions.silverlightPresenter.setPlayer(n.getHost().content.Player)}catch(t){console.log("error loading silverlight player: "+t)}}(function(n){"use strict";var t=ch9.functions,r=t.helpers,i=r&&r.debug,u={source:"/scripts/Channel9.xap?v=1.74",version:"5.0.61118.0"};t.SilverlightPresenterConstructor=function(r,f,e){var o=this,h=t.playerPresenter,c,s;return this.player=n.extend({},u,r),this.episode=f,this.user=e,this.videos={smooth:n("ul.smooth a:first",this.player.container).length?n("ul.smooth a:first",this.player.container).attr("href"):"",progressive:n("ul.progressive a:first",this.player.container).length?n("ul.progressive a:first",this.player.container).attr("href"):"",defaultUrl:this.player.defaultVideoUrl},this.deliveryMethod=!this.videos.progressive&&!this.videos.smooth?{delivery:"",video:this.videos.defaultUrl}:!this.videos.smooth||this.player.playerPreference=="progressive"?{delivery:"progressivedownload",video:this.videos.progressive}:{delivery:"adaptivestreaming",video:this.videos.smooth},c=function(n,t,i){var r=[],u,f;if(r.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"'),n.id!=null&&r.push(' id="'+n.id+'"'),n["class"]!=null&&r.push(' class="'+n["class"]+'"'),n.width!=null&&r.push(' width="'+n.width+'"'),n.height!=null&&r.push(' height="'+n.height+'"'),r.push(">"),n.allowfullscreen!=null&&n.allowfullscreen==!0&&r.push('<param name="allowfullscreen" value="'+n.allowfullscreen+'"/>'),n.allowscriptaccess!=null&&r.push('<param name="allowscriptaccess" value="'+n.allowscriptaccess+'"/>'),n.autoupgrade!=null&&r.push('<param name="autoUpgrade" value="'+n.autoupgrade+'"/>'),n.background!=null&&r.push('<param name="background" value="'+n.background+'"/>'),n.minversion!=null&&r.push('<param name="minRuntimeVersion" value="'+n.minversion+'"/>'),n.source!=null&&r.push('<param name="source" value="'+n.source+'"/>'),n.windowless!=null&&r.push('<param name="windowless" value="'+n.windowless+'"/>'),n.onload!=null&&r.push('<param name="onload" value="'+n.onload+'"/>'),t){r.push('<param name="initParams" value="');u="";for(f in t)u!=""&&(u+=","),u+=f+"="+t[f];r.push(u+'"/>')}return i!=null&&r.push(i),r.push("<\/object>"),r.join("")},s=function(){for(var i,n,u=t.VideoPlayer.target.CreatePlaylist(),f=t.VideoPlayer.target.GetPlaylistItem(),r=0;r<o.episode.captions.length;r++)i=o.episode.captions[r],n=t.VideoPlayer.target.CreateMarkerResource(),n.Label=i.label,n.Language=i.language,n.Format=i.format.replace("webvtt","WebVTT"),n.Source=i.url,n.IsDefault=i.isdefault,f.AddMarkerResource(n);u.AddPlaylistItem(f);t.VideoPlayer.target.SetPlaylist(u)},{haveVideo:o.videos.smooth!=undefined||o.videos.progressive!=undefined,haveSmoothVideo:o.videos.smooth!=undefined,haveProgressiveVideo:o.videos.progressive!=undefined,isPlayPossible:!t.userAgent||t.userAgent.silverlightPossible(),currentVersion:o.player.version,getErrorMessage:function(){var n="<h3>Silverlight<\/h3>";return""+(t.userAgent&&t.userAgent.isMetro()?n+"<p>The Silverlight plugin is not supported in IE App mode or on RT devices.<br />Unless you are using an RT device, you can try switching to IE Desktop mode.<\/p>":!this.haveVideo&&this.isPlayPossible?n+'<p>We don\'t have a Silverlight version of this video yet.<br />Want to let us know? Please <a href="/ContactUs">Contact Us<\/a>, so we can try to provide one.<\/p>':n+"<p>We have a Silverlight version but your browser doesn't have the right plugin or it might be disabled.<br />Want to <a href=\"http://go.microsoft.com/fwlink/?LinkID=149156&v="+o.player.version+'">Install the Silverlight 5 plugin<\/a>?<\/p>')},create:function(t){var r;if(!o.deliveryMethod.video)return t;var f={alt:t||"",autostart:"true",autoupgrade:"true",windowless:"true","class":"Player"},i={width:o.player.width,height:o.player.height};return n.extend(i,u,f),r="scriptablename="+i["class"]+",autostart="+i.autostart+",deliverymethod="+o.deliveryMethod.delivery+",mediaurl="+o.deliveryMethod.video+",thumbnail="+o.episode.images.playerPreview+",entryid="+o.episode.contentId,o.episode.plyCaptionStreamId&&(r+=",subplystreamid="+o.episode.plyCaptionStreamId),Silverlight.createObject(i.source,null,null,i,{onLoad:"silverlightLoaded"},r,"",!0)},setPlayer:function(r){var u,e;t.VideoPlayer=new t.VideoPlayerConstructor("silverlight",r);u=t.VideoPlayer;e={targetPlay:function(){this.target&&this.target.Play()},targetPause:function(){this.target&&this.target.Pause()},targetStop:function(){this.target&&this.target.Stop()},targetGetPosition:function(){return this.target?this.target.PlaybackPositionSeconds:null},targetIsPaused:function(){return this.target?this.target.IsPaused:!1},targetIsReady:function(){return this.target?this.target.IsMediaReady:!1},targetCanSeek:function(){return this.targetIsReady()},targetSeek:function(n){this.target&&this.target.SeekToPosition(n)}};n.extend(u,e);try{var f=h.getStartTime(),c=!1,l=!1;u.target.PlayStateChanged=function(){u.isReady()&&(i&&console.log("silverlight PlayStateChanged event fired && IsMediaReady"),!l&&o.episode.captions.length&&(i&&console.log("setting caption files."),s(u),l=!0),!c&&f.seconds>0&&(c=!0,i&&console.log("seeking to start time: "+f.seconds),u.seek(f)),u.target.IsPaused&&t.Services&&t.VideoPlayer&&t.Services.addVideoProgress(o.episode,o.user))};u.target.PlaybackPositionChanged=function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(o.episode,o.user):u.target.PlaybackPositionChanged=null}}catch(a){i&&console.log("error attaching events to silverlight player: "+a)}t.Spinner&&t.Spinner.hide()}}}})(jQuery);