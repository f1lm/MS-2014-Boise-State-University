// server injected code
/* Debug info: {"server":"WEB515","utc_time":"2014-10-30 21:30:47.361","src_ip":"199.239.182.214","method":"HTTP/GET","api_key":"3_-nyARdBkjmlUMxTHtP-heKGbxD2CqIJzvL5ZXfUAIxni0gViJ8LQz3WXVld1-VLA","site_found":true} */
if (typeof gigya == 'undefined' || !gigya.isGigya) { gigya = { isGigya: true } };
if (!gigya.__initialized) {
gigya.__initialized = true;
gigya.env='prod';
gigya.gaeDomain='chat.gigya.com';
gigya.build={version:'5.2',time:'Sun 10/26/2014 12:25:58.18'};
if (typeof gigya.partnerSettings == 'undefined') {
    gigya.partnerSettings={"authMode":"cookie","baseDomains":"cfoworld.com,cio.com,citeworld.com,computerworld.com,vcsoonline.com,greenbot.com,infoworld.com,vitnews.com,itworld.com,javaworld.com,networkworld.com,idganswers.com","ssoLogoutUrl":"http://infoworld.com/user/logout","ssoKey":"3_5mtw7UT2ZitNph7qG7J9o0LGGCm9CW8iT9kcikVLIov6Xni8_qvc6Na6USMaNCKL"};
    gigya.partnerSettings.plugins={"apiDomain":"US1.gigya.com"};
}
gigya.providersConfig = {};
gigya.abTesting = null;
//end server injected code
// API adapters
var gigya;
(function(c){(function(g){(function(g){(function(e){(function(e){function d(a,d){d=c.utils.object.clone(d);if(c.partnerSettings.ssoKey){var k=b();d||(d={});var e=d.callback;d.callback=function(b){c.log.addLog("SSO: About to invoke callback for "+a+" with this response",b);e&&e(b)};d.m=a;d.d=m;d.lid=c.utils.xd._flashListenerID;c.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=c.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(d.lid=c.thisScript.globalConf.legacyCrossSiteMethod+":"+
c.utils.xd._flashListenerID);"function"==typeof d.callback&&(d.callbackID="gig_sso_cb"+(new Date).getTime(),c.utils.xd.addMessageListener(d.callbackID,{},!1,d.callback),delete d.callback);d.sAPIKey=c.thisScript.APIKey;var g=c.utils.keyValue.serialize(d);k.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+c.partnerSettings.ssoKey+"&version=1";var l=function(){k.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+c.partnerSettings.ssoKey+"&version=1#"+(new Date).getTime()+"&"+g;c.utils.DOM.removeEventListener(k,
"load",l)};c.utils.DOM.addEventListener(k,"load",l);c.log.addLog("SSO: Calling "+a,{SSOKey:c.partnerSettings.ssoKey,params:d});document.body?c.utils.DOM.appendToBody(k):c.utils.functions.invokeOnPageLoad(function(){c.utils.DOM.appendToBody(k)})}else d&&d.callback&&d.callback()}function b(){var a=document.getElementById("gig_sso");a||(a=document.createElement("iframe"),c.localInfo.isIOS||c.localInfo.isIOSChrome||c.localInfo.isAndroid?(a.style.width="0px",a.style.height="0px",a.style.display="none"):
(a.style.width="30px",a.style.height="10px",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px"),a.id="gig_sso");return a}function a(a){d("setToken",a)}var m=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];e.getGroupToken=function(a){d("getToken",a)};e.setGroupTokenFromResponse=function(c,b,m){c.sessionInfo&&(c=c.sessionInfo);var d=c.expires_in,d=null==d||""===d||isNaN(d)?47304E7:0==d?null:1E3*d,e=new Date;e.setTime(e.getTime()+
d);a({lt:c.login_token,expiration:null==d?0:e.getTime(),legacyCrossSiteMethod:m,callback:b})};e.setGroupToken=a;e.logout=function(a){d("logout",a)};e.removeGroupToken=function(a){d("removeToken",a)}})(e.sso||(e.sso={}))})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));
(function(c){(function(g){(function(g){(function(e){var g=function(){function d(c,a,m,f,d,e){"undefined"===typeof e&&(e={});this.id=c;this.baseUrl=a;this.methodName=m;this.params=f;this.callback=d;this.settings=e}d.prototype.getUrl=function(){return this.baseUrl+"/"+this.methodName};d.prototype.send=function(c){};d.prototype.getAuthParams=function(){var b={};if(this.params.oauth_token)this.params.authMode="token";else if(!this.params.noAuth){var a=c._.apiAdapters.web.tokenStore.get(this.params.APIKey);
if(a){this.sentLoginToken=a;var m=c.utils.cookie.get("gltexp_"+this.params.APIKey);null!=m&&(b.loginTokenExp=m);b.login_token=a}b.authMode="cookie"}delete this.params.noAuth;return b};return d}();e.BaseRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));var __extends=this.__extends||function(c,g){function n(){this.constructor=c}for(var e in g)g.hasOwnProperty(e)&&(c[e]=g[e]);n.prototype=g.prototype;c.prototype=new n};
(function(c){(function(g){(function(g){(function(e){e.callback=function(d,b){!b&&d&&(b=d.context);if(b){var a=c._.apiAdapters.web.pendingRequests[b];a&&a.handleResponse(d)}};var g=function(d){function b(){d.apply(this,arguments);this.ifrName="gigyaPostIframe_"+(new Date).getTime();this.retry=0}__extends(b,d);b.prototype.addDefaultParams=function(){this.params.format="jsonp";this.params.callback=b.callbackName;this.params.context=this.id;var a=this.getAuthParams();this.paramsLoginToken=this.params.login_token;
c.utils.object.add(this.params,a,!0);this.sentLoginToken=this.params.login_token};b.prototype.getCacheKey=function(){return this.methodName+"_"+c.utils.keyValue.serialize(this.params)};b.prototype.send=function(a){var b=this;if(!this.inProgress){c._.apiAdapters.web.pendingRequests[this.id]=this;this.inProgress=!0;this.params.sdk="js_"+c.build.version;this.addDefaultParams();var f=c.utils.keyValue.serialize(this.params);if(!a&&this.settings.cacheTimeout)f=this.getCacheKey(),c.utils.sessionCache.get(f,
this.settings.cacheTimeout,function(a){a?(delete b.settings.cacheTimeout,c._.apiAdapters.web.callback(a,b.id)):(b.inProgress=!1,b.send(!0))});else{a=0;c.localInfo.isIE&&(a=2048);var d=this.getUrl();c.events.global.dispatch({eventName:"jsonp-beforeRequest",url:d,params:this.params,level:9});4096>=d.length+1+f.length+a&&!this.settings.forcePost?c.utils.script.load(d+"?"+f,function(){c._.apiAdapters.web.callback({context:b.id,errorCode:500026,errorMessage:"Network_error"})}):c.utils.functions.invokeOnPageLoad(function(){var a=
document.getElementById("gigyaRequestForms");null==a&&(a=document.createElement("span"),a.id="gigyaRequestForms",a.style.display="none",c.utils.DOM.appendToBody(a));var f=b.getPostContainer();a.appendChild(f)})}}};b.prototype.createParamFormElements=function(){var a=[],b="";for(b in this.params)a=a.concat(['<textarea name="',b,'">']),"object"==typeof this.params[b]?a.push(c.utils.URL.URLEncode(c.utils.JSON.serialize(this.params[b]))):a.push(this.params[b]),a.push("</textarea>");return a.join("")};
b.prototype.getPostContainer=function(){var a=this;if(!this.postContainer){var b=document.createElement("span"),f=this.ifrName+"form",d=this.id;b.innerHTML=['<form accept-charset="UTF-8" id="',f,'" method="post" action="',this.getUrl(),"?context="+this.id+"&saveResponseID="+this.id+'" target="',this.ifrName,'">',this.createParamFormElements(),'<input name="utf8" type="hidden" value="&#x2713;" /><input type="submit" value="" /></form>'].join("");var e,g=c.utils.DOM.createElement("iframe",this.ifrName);
g.setAttribute("id",this.ifrName);c.utils.DOM.addEventListener(g,"load",function(){e?a.getSavedFormResponse(d):(window.setTimeout(function(){var a=document.getElementById(f);a&&a.submit()},10),e=!0)});b.appendChild(g);this.postContainer=b}return b};b.prototype.getSavedFormResponse=function(a){var c=this;(new b(a,this.baseUrl,"socialize.getSavedResponse",{APIKey:this.params.APIKey,saveResponseID:this.id,ucid:this.params.ucid,noAuth:!0},function(a){c.handleResponse(a)})).send()};b.prototype.getDataPendingTimeout=
function(a){return 4>=a?500:8>=a?1E3:21>=a?2E3:39>=a?5E3:-1};b.prototype.handleResponse=function(a){var b=this;this.settings.cacheTimeout&&c.utils.sessionCache.set(this.getCacheKey(),0==a.errorCode?a:null);null!=this.retryTimerID&&window.clearTimeout(this.retryTimerID);this.loaded=!0;this.inProgress=!1;100001==a.errorCode?(a=this.getDataPendingTimeout(this.retry++),0<a&&window.setTimeout(function(){b.send()},a)):(this.dispose(),this.callback(a))};b.prototype.dispose=function(){delete c._.apiAdapters.web.pendingRequests[this.id];
this.postContainer&&c.utils.DOM.removeElement(this.postContainer);delete this.postContainer};b.callbackName="gigya._.apiAdapters.web.callback";return b}(c._.apiAdapters.web.BaseRequest);e.JsonpRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));
(function(c){(function(g){(function(g){(function(e){var g=function(d){function b(a,c,b,e,g,l){"undefined"===typeof l&&(l={});d.call(this,a,c,b,e,g,l);this.windowName=this.methodName.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime();this.requestID=this.windowName+(new Date).getTime()}__extends(b,d);b.prototype.beforeRequest=function(){};b.prototype.afterResponse=function(a){a.dontClose&&"false"!=a.dontClose||c.utils.win.close(this.windowName);this.callback(a)};b.prototype.getAuthFlow=function(){return this.params.authFlow?
this.params.authFlow:"popup"};b.prototype.getStateString=function(){var a=c.utils.xd._flashListenerID;if(c.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=c.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()||c.localInfo.isIE&&window.navigator.msDoNotTrack)a=c.thisScript.globalConf.legacyCrossSiteMethod+":"+c.utils.xd._flashListenerID;var b=this.getAuthFlow(),a={domain:document.location.href.split("?")[0].split("#")[0],id:this.requestID,lid:a,messaging:c.localInfo.messagingMethod};
if("redirect"==b||c.localInfo.isWindowsPhone)a.sourceURL=window.top.document.location.href,this.params.redirectURL?(a.redirectURL=c.utils.URL.addParamsToURL(this.params.redirectURL,{gig_events:c.events.global.getEventsForOperation(this.methodName)}),a.addUserInfo=!0,this.params.redirectMethod&&(a.redirectMethod=this.params.redirectMethod)):a.sourceURL=c.utils.URL.addParamsToURL(a.sourceURL,{gig_events:c.events.global.getEventsForOperation(this.methodName)});this.params.provider&&"facebook"==this.params.provider.toLowerCase()&&
(a.invite=this.params.invite);(b=c.external.backplane.getChannelId())&&(a.bp_channel_url=b);return c.utils.keyValue.serialize(a)};b.prototype.getServerParamsString=function(){var a={},b;for(b in this.params)0!=b.indexOf("x_")&&null!=this.params[b]&&(a["x_"+b]=this.params[b],delete a[b]);a.x_APIKey&&(a.client_id=a.x_APIKey,delete a.x_APIKey);a.x_oauth_token&&(a.oauth_token=a.x_oauth_token,delete a.x_oauth_token);a.redirect_uri="/GS/AfterLogin.aspx";a.response_type=this.params.authCodeOnly?"code":"server_token";
a.format="jsonp";a.x_sdk="js_"+c.build.version;(b=c.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=b);(b=c.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=b);a.state=this.getStateString();c.utils.object.add(a,this.getAuthParams());c._.apiAdapters.web.useAPIProxy&&c._.apiAdapters.web.gmidTicket&&(a.gmidTicket=c._.apiAdapters.web.gmidTicket);delete a.redirectURL;this.sentLoginToken=a.login_token;return c.utils.keyValue.serialize(a)};b.prototype.send=function(){var a=
this;this.beforeRequest();var b=this.getServerParamsString(),f;this.params.provider&&(f=c.socialize._getProviderByName(this.params.provider.toLowerCase()));var d=null;null!=f&&(d=(this.params.enablePopupLocation?"location=1,toolbar=1":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+f.width+",height="+f.height);var e=this.methodName.split(".");c.reports.report(e[e.length-1],this.params.APIKey,this.params.cid,this.params.source,this.params.sourceData,{sn:f?f.toString():null});b=this.getUrl()+
"?"+b;"redirect"==this.getAuthFlow()?window.top.document.location.href=b:(c.utils.xd.addMessageListener(this.requestID,this.params,!0,function(c){a.afterResponse(c)}),c.utils.win.open(b,this.windowName,d))};return b}(c._.apiAdapters.web.BaseRequest);e.OauthRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));
(function(c){(function(g){(function(g){(function(e){var g=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.send=function(a){var b=this;if(c._.apiAdapters.web.proxyState.ready){var f=function(a){(a=c.utils.JSON.deserialize(a.data))&&a.id==b.id&&(c.utils.DOM.removeEventListener(window,"message",f),b.callback(a.response))};c.utils.DOM.addEventListener(window,"message",f);c.utils.object.add(this.params,this.getAuthParams());c._.apiAdapters.web.ifrAPIProxy.contentWindow.postMessage(this.json(),
"https://cdns.gigya.com")}else c._.apiAdapters.web.proxyState.error&&this.callback({context:this.id,errorCode:500026,errorMessage:"APIProxy error: "+c._.apiAdapters.web.proxyState.error})};b.prototype.json=function(){return c.utils.JSON.serialize({id:this.id,methodName:this.methodName,params:this.params,settings:this.settings})};return b}(c._.apiAdapters.web.BaseRequest);e.APIProxyRequest=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));
(function(c){(function(g){(function(g){(function(e){(function(e){function d(a){a||(a=c.thisScript.APIKey);return a?"glt_"+a:"_gig_lt"}var b={};e.activeNamespaces={};e.get=function(a){return(a=c.utils.cookie.get(d(a)))?a.split("|")[0]:null};e.set=function(a,b,f,d){c.utils.localStorage.removeItem("gigyaSettings");a||(a=c.thisScript.APIKey);a?(c.utils.cookie.set("glt_"+a,b,f),c.utils.cookie.remove("gac_"+a)):c.utils.cookie.set("_gig_lt",b,f)};e.setFromGAC=function(a,d){if(c.thisScript.APIKey){var f=
c.utils.cookie.get("gac_"+c.thisScript.APIKey);f&&!a.neverTryGAC?('"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substring(1,f.length-1)),b[f]?d():(b[f]=!0,c.socialize.notifyLogin({ignoreApiQueue:!0,neverTryGAC:!0,authCode:f,APIKey:c.thisScript.APIKey,client_id:c.thisScript.APIKey},{callback:function(){c.utils.cookie.remove("gac_"+c.thisScript.APIKey);d();c.socialize.refreshUI({neverTryGAC:!0})}}))):d()}else d()};e.setFromSsoResponse=function(a,b){"undefined"===typeof b&&(b=c.thisScript.APIKey);
0==a.errorCode&&(e.set(b,a.login_token,a.expires_in),c.events.global.dispatchWhenHandlerAdded({eventName:"socialize.login"},null,function(a,b){c.socialize.getUserInfo({signIDs:!0,callback:function(d){a||(a={});0==d.errorCode?(a=c._.addUserInfoToEvent(d,{eventName:"login"},!0),c.external.backplane.executeOnInit(function(){c.external.backplane.getChannelId()&&c.socialize.notifySSOLogin({bp_channel_url:c.external.backplane.getChannelId()})})):a.cancel=!0;b(a)}})}),c.events.global.dispatchWhenHandlerAdded({eventName:"accounts.login"},
null,function(a,b){c.accounts.getAccountInfo({include:"profile,data",includeUserInfo:!1,callback:function(d){a||(a={});0==d.errorCode?(a.eventName="accounts.login",c.utils.object.extractProperties(d,a,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data")):a.cancel=!0;b(a)}})}))};e.remove=function(a){c._.apiAdapters.web.sso.removeGroupToken();a||(a=c.thisScript.APIKey);c.utils.cookie.remove("glt_"+a);c.utils.cookie.remove("_gig_lt")};e.migrateExisting=function(){var a=c.utils.cookie.get("_gig_lt");
a&&c.thisScript.APIKey&&!e.get()&&(c.utils.cookie.remove("_gig_lt"),e.set(null,a))};e.getTokenParam=function(a,b){var f=c.utils.cookie.get(d(a));if(f)return f=f.split("|"),1<f.length?c.utils.keyValue.deserialize(f[1])[b]:null}})(e.tokenStore||(e.tokenStore={}))})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));gigya.isGigya||(gigya.isGigya=!0);
(function(c){(function(g){(function(g){(function(e){var g=function(){return function(){}}();e.APIProxyState=g;e.useAPIProxy;e.ifrAPIProxy;e.proxyState;e.gmidTicket;e.callbacks={};e.pendingRequests={};g=function(){function d(){this.name="Web"}d.prototype.init=function(b){var a=this;this.initAPIProxy(function(){c.utils.functions.createAlias("gigya.auth.loginToken.get",c._.apiAdapters.web.tokenStore.get);a.checkReturnFromURL();a.isSessionValid(void 0,function(a){a?b():c._.apiAdapters.web.sso.getGroupToken({callback:function(a){a&&
c._.apiAdapters.web.tokenStore.setFromSsoResponse(a);b()}})})})};d.prototype.initAPIProxy=function(b){var a=this;if(this.shouldBypass3pc()&&"1"!=c.utils.localStorage.getItem("_gig_3pc_enabled")){var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],f=c.utils.DOM.createHiddenIframe(("https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com")+"/gs/3PCTest.html#domain="+encodeURIComponent(d)),g=function(d){(d=c.utils.keyValue.deserialize(d.data))&&
"3pcTestResult"==d.id&&(c.utils.DOM.removeEventListener(window,"message",g),"true"==d.enabled?(c.utils.localStorage.setItem("_gig_3pc_enabled","1"),e.useAPIProxy=!1,e.gmidTicket=null,b()):(e.useAPIProxy=!0,a.loadAPIProxy(b)),f.parentElement.removeChild(f))};c.utils.DOM.addEventListener(window,"message",g)}else e.useAPIProxy=!1,b()};d.prototype.shouldBypass3pc=function(){var b=c.thisScript.globalConf.bypassCookiePolicy||"whenBlockedByDefault";return("whenBlockedByDefault"==b&&c.localInfo.isSafari||
"always"==b)&&!window._isAPIProxy&&window.postMessage&&!c.partnerSettings.customAPIDomainPrefix};d.prototype.loadAPIProxy=function(b){var a=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];e.gmidTicket=c.utils.localStorage.getItem("_gig_gmidt");var a="https://cdns.gigya.com/gs/APIProxy.html#apiKey="+encodeURIComponent(c.thisScript.APIKey)+"&domain="+encodeURIComponent(a)+"&scriptUrl="+encodeURIComponent(c.thisScript.scriptElement.src)+"&hasTicket="+
(e.gmidTicket?"true":"false"),d=function(a){(a=c.utils.JSON.deserialize(a.data))&&a.apiKey==c.thisScript.APIKey&&(e.proxyState=a,e.proxyState.gmidTicket&&(e.gmidTicket=e.proxyState.gmidTicket,c.utils.localStorage.setItem("_gig_gmidt",e.gmidTicket,86400)),c.utils.DOM.removeEventListener(window,"message",d),b())};c.utils.DOM.addEventListener(window,"message",d);e.ifrAPIProxy=c.utils.DOM.createHiddenIframe(a)};d.prototype.isSessionValid=function(b,a){"undefined"===typeof b&&(b={});c._.apiAdapters.web.tokenStore.setFromGAC(b,
function(){if(a){var d=null!=c._.apiAdapters.web.tokenStore.get(b.APIKey)||null!=b.oauth_token;a(d)}})};d.prototype.registerForNamespaceEvents=function(b){};d.prototype.onPluginEvent=function(b){};d.prototype.getGmidTicket=function(b){b&&b(e.useAPIProxy?e.gmidTicket:null)};d.prototype.sendRequest=function(b,a,d,f){"undefined"===typeof f&&(f={});var g=this;this.beforeRequest(b,a,f);var k=this.getBaseUrl(b,a,f),h=f.jsSdkRequestId||this.getRequestId(k,b,a,f.disableCache);e.callbacks[h]=e.callbacks[h]||
[];e.callbacks[h].push(d);if(!e.pendingRequests[h]){var l;d=function(a){g.afterResponse(l,a,function(a){g.dispatchCallbacks(h,a)})};l=e.useAPIProxy&&0!=k.indexOf("http://")?new c._.apiAdapters.web.APIProxyRequest(h,k,b,a,d,f):new c._.apiAdapters.web.JsonpRequest(h,k,b,a,d,f);l.send();c._.logoutMethods[b]&&c._.apiAdapters.web.tokenStore.remove(a.APIKey)}};d.prototype.sendOauthRequest=function(b,a,d,f){var e=this;this.beforeRequest(b,a,f);var g=this.getBaseUrl(b,a,f),h=new c._.apiAdapters.web.OauthRequest("",
g,b,a,function(a){e.afterResponse(h,a,function(a){d(a)})},f);h.send()};d.prototype.getBaseUrl=function(b,a,d){b=b.split(".");b=c.partnerSettings.customAPIDomainPrefix?c.partnerSettings.customAPIDomainPrefix+"."+c.partnerSettings.baseDomain:c.utils.stringUtils.format("{0}.{1}",b[0],a.apiDomain?a.apiDomain:c.partnerSettings.plugins.apiDomain);return((c._.apiAdapters.web.tokenStore.get()||a.regToken||a.oauth_token)&&!a.noAuth||d.forceHttps||"https"==c.thisScript.protocol?"https://":"http://")+b};d.prototype.beforeRequest=
function(b,a,d){"undefined"===typeof d&&(d={});(d.clearSession||d.clearSessionCondition&&d.clearSessionCondition(a))&&c._.apiAdapters.web.tokenStore.remove(a.APIKey)};d.prototype.afterResponse=function(b,a,c){var d=this;this.handleTokenResponse(b,a,function(){d.logoutSsoIfNeeded(b,a,function(){c(a)})})};d.prototype.onSDKEvent=function(b){};d.prototype.getTokenParam=function(b,a){return c._.apiAdapters.web.tokenStore.getTokenParam(b,a)};d.prototype.checkReturnFromURL=function(){var b=c.utils.URL.getParamsFromURL(document.location.href);
b.gig_events&&0==b.errorCode&&null!=c._.apiAdapters.web.tokenStore.get()&&c._.apiAdapters.web.sso.setGroupTokenFromResponse({errorCode:0,login_token:c._.apiAdapters.web.tokenStore.get(),expires_in:b.expires_in},function(){var a=b.gig_events.split(",");-1!=c.utils.array.indexOf(a,"accounts.login")?c.accounts.getAccountInfo({include:"profile,data,userinfo",callback:function(b){var d={errorCode:0,eventName:"accounts.login"};c.utils.object.extractProperties(b,d,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");
c.events.global.dispatchWhenHandlerAdded(d);-1!=c.utils.array.indexOf(a,"socialize.login")&&(b=c._.addUserInfoToEvent(b,{errorCode:0,eventName:"socialize.login"},!0),c.events.global.dispatchWhenHandlerAdded(b))}}):c.socialize.getUserInfo({signIDs:!0,callback:function(b){for(var d=0;d<a.length;d++){var e=c._.addUserInfoToEvent(b,{errorCode:0,eventName:a[d]},!0);c.events.global.dispatchWhenHandlerAdded(e)}}})},c.thisScript.globalConf.legacyCrossSiteMethod)};d.prototype.setNewLoginTokenFromResponse=
function(b,a,d){var f=a.sessionInfo?a.sessionInfo.login_token:a.login_token;f?(c._.apiAdapters.web.tokenStore.set(b.params.APIKey,f,null!=a.sessionInfo?a.sessionInfo.expires_in:a.expires_in,c.thisScript.globalConf.legacyCrossSiteMethod),c._.apiAdapters.web.sso.setGroupTokenFromResponse(a,d,c.thisScript.globalConf.legacyCrossSiteMethod)):d()};d.prototype.onInvalidTokenResponse=function(b,a){b.paramsLoginToken?a():c._.apiAdapters.web.sso.getGroupToken({callback:function(d){d&&d.login_token&&d.login_token.split("|")[0]!=
b.sentLoginToken?(c._.apiAdapters.web.tokenStore.setFromSsoResponse(d,b.params.APIKey),b.send()):(c._.apiAdapters.web.tokenStore.remove(b.params.APIKey),b.settings.requiresSession?a():(delete b.params.login_token,delete b.sentLoginToken,b.send()))}})};d.prototype.handleTokenResponse=function(b,a,d){var f=this;a=c.utils.object.clone(a);if(403030==a.errorCode){if(this.shouldWaitForService(b,a))return}else 409012==a.errorCode&&(e.gmidTicket=null,c.utils.localStorage.removeItem("_gig_gmidt"));b.sentLoginToken&&
c._.logoutMethods[b.methodName]&&0==a.errorCode&&c._.apiAdapters.web.tokenStore.remove(b.params.APIKey);this.setNewLoginTokenFromResponse(b,a,function(){if(b.sentLoginToken&&403005==a.errorCode)f.onInvalidTokenResponse(b,d);else d()})};d.prototype.logoutSsoIfNeeded=function(b,a,d){var f=this;c.partnerSettings.ssoKey&&c._.logoutMethods[b.methodName]&&0==a.errorCode?document.location.href!=c.partnerSettings.ssoLogoutUrl?c._.apiAdapters.web.sso.logout({callback:function(b){f.loadLogoutUrls(b.logoutURLs.split(","),
d,{UID:a.UID,UIDSignature:a.UIDSignature,signatureTimestamp:a.signatureTimestamp})}}):d():d()};d.prototype.loadLogoutUrls=function(b,a,d){for(var f=0,e=function(){f++;f>=b.length&&a()},g=0;g<b.length;g++)if(b[g]){var h=c.utils.URL.addParamsToURL(b[g],d);this.loadLogoutUrl(h,e)}else e()};d.prototype.loadLogoutUrl=function(b,a,d){"undefined"===typeof d&&(d=5E3);var f=document.createElement("iframe");f.src=b;f.style.position="absolute";f.style.top="-1000px";f.style.left="-1000px";var e=!1;window.setTimeout(function(){e||
(e=!0,f.parentElement.removeChild(f),a())},d);f.onload=f.onreadystatechange=function(){e||f.readyState&&"complete"!=f.readyState||(e=!0,f.parentElement.removeChild(f),a())};c.utils.DOM.appendToBody(f)};d.prototype.shouldWaitForService=function(b,a){return!0==b.params.retryPossible?(b.params.retryPossible=!1,c.external.facebook.runWhenLoaded(function(){b.send()}),!0):!1};d.prototype.dispatchCallbacks=function(b,a){var d=e.callbacks[b];if(d)for(var f=0;f<d.length;f++)if("function"==typeof d[f])d[f](c.utils.object.clone(a,
!0));delete e.callbacks[b]};d.prototype.getRequestId=function(b,a,d,f){var e=-1!=navigator.userAgent.toLowerCase().indexOf("safari/534");if(f||e)b="R"+(new Date).getTime()+"_"+Math.random();else{d=c.utils.object.clone(d);for(var g in d)0!=g.indexOf("fb_")&&"source"!=g&&"sourceData"!=g||delete d[g];b="R"+c.utils.object.getMurmurHash(b+a+c.utils.object.getHash(d))}return b};return d}();e.WebAdapter=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));
(function(c){(function(g){(function(g){(function(e){var g=function(){function d(){this.flashStorageLoaded=!1;this.swfStorage=null;var b=document.location.href.split("#")[1];this.apiKey=decodeURIComponent(b.split("apiKey=")[1].split("&")[0]);this.originDomain=decodeURIComponent(b.split("domain=")[1].split("&")[0]);this.hasTicket="true"===decodeURIComponent(b.split("hasTicket=")[1].split("&")[0]);this.urlScheme=0==document.location.href.indexOf("https:")?"https":"http"}d.init=function(){d.instance=
new d;d.instance.init()};d.prototype.init=function(){var b=this;this.isOriginDomainValid()?this.loadIDs(function(a){a?b.postState({ready:!1,error:a}):(b.gmid&&b.ucid?b.hasTicket?b.postState({ready:!0}):b.getGmidTicketFromServer(function(a){b.postState({ready:!0,gmidTicket:a})}):b.getIDsFromServer(function(a,c,d){b.gmid=a;b.ucid=d;b.storeIDs(function(){b.postState({ready:!0,gmidTicket:c})})}),c.utils.DOM.addEventListener(window,"message",function(a){return b.onRequest(a)}))}):this.postState({ready:!1,
error:"domain_mismatch"})};d.prototype.onRequest=function(b){var a=this;b=c.utils.JSON.deserialize(b.data);var d=b.methodName,f=b.id;if(b&&d&&b.params){var e=c.utils.object.clone(b.params,!0,!0);e.gmid=this.gmid;e.ucid=this.ucid;(new c._.apiAdapters.web.JsonpRequest(f,this.getAPIBaseUrl(d),d,e,function(b){window.parent.postMessage(c.utils.JSON.serialize({id:f,response:b}),a.originDomain)},b.settings)).send()}};d.prototype.isOriginDomainValid=function(){for(var b=c.partnerSettings.baseDomains.split(","),
a=0;a<b.length;a++){var d=b[a];if(this.originDomain.indexOf(d)==this.originDomain.length-d.length)return!0}return!1};d.prototype.getIDsFromServer=function(b){var a={APIKey:this.apiKey,includeTicket:!0,ticketExpires:86400};(new c._.apiAdapters.web.JsonpRequest("idsRequest",this.getAPIBaseUrl("socialize.getIDs"),"socialize.getIDs",a,function(a){b(a.gcid,a.gmidTicket,a.ucid)})).send()};d.prototype.getGmidTicketFromServer=function(b){var a={gmid:this.gmid,APIKey:this.apiKey,expires:86400};(new c._.apiAdapters.web.JsonpRequest("gmidTicketRequest",
this.getAPIBaseUrl("socialize.getGmidTicket"),"socialize.getGmidTicket",a,function(a){b(a.gmidTicket)})).send()};d.prototype.getAPIBaseUrl=function(b){b=b.split(".");return"https://"+c.utils.stringUtils.format("{0}.{1}",b[0],c.partnerSettings.plugins.apiDomain)};d.prototype.postState=function(b){b||(b={});b.apiKey=this.apiKey;window.parent.postMessage(c.utils.JSON.serialize(b),this.originDomain)};d.prototype.loadIDs=function(b){var a=this;this.getIDsFromStorage(function(c,d,e){a.gmid=c;a.ucid=d;b(e)})};
d.prototype.getIDsFromStorage=function(b){var a=this,e,f;try{e=localStorage.getItem(d.GMID_STORAGE_KEY),f=localStorage.getItem(d.UCID_STORAGE_EKY),b(e,f)}catch(g){c.localInfo.isMobile?b(null,null,"no_supported_cookie_storage"):this.loadFlashStorageJS(function(c){if(c)var e=a.swfStorage.get(d.GMID_STORAGE_KEY),f=a.swfStorage.get(d.UCID_STORAGE_EKY);else var g="no_supported_cookie_storage";b(e,f,g)})}};d.prototype.storeIDs=function(b){var a=this;try{localStorage.setItem(d.GMID_STORAGE_KEY,this.gmid),
localStorage.setItem(d.UCID_STORAGE_EKY,this.ucid),b()}catch(c){this.loadFlashStorageJS(function(c){c&&(a.swfStorage.set(d.GMID_STORAGE_KEY,a.gmid),a.swfStorage.set(d.UCID_STORAGE_EKY,a.ucid));b()})}};d.prototype.loadFlashStorageJS=function(b){var a=this,d=function(b){a.flashStorageLoaded=!0;try{a.swfStorage?b(!0):a.swfStorage=new SwfStore({namespace:"gigIDs",swf_url:"https://cdns.gigya.com/gs/swf/swfstore.swf",onready:function(){b(!0)},onerror:function(){console&&console.log("Failed loading swfstore.swf");
b(!1)}})}catch(c){b(!1)}};this.flashStorageLoaded?d(b):c.utils.script.load("https://cdns.gigya.com/gs/js/swfstore.min.js",null,function(){d(b)})};d.GMID_STORAGE_KEY="gig_gmid";d.UCID_STORAGE_EKY="gig_ucid";return d}();e.APIProxy=g})(g.web||(g.web={}))})(g.apiAdapters||(g.apiAdapters={}))})(c._||(c._={}))})(gigya||(gigya={}));
var gigya;
(function(f){(function(d){(function(d){(function(d){d.mobileCallbacks={};d.showPlugin=function(b,a){var c,e=b.split(".");1<e.length?(b=e.splice(e.length-1,1)[0],e=e.join(".")):e="socialize";"commentsUI"==b&&(e="comments");c||(c="show"+f.utils.stringUtils.capitalize(b));eval("gigya."+e+"."+c)(a)};var l=function(){function b(){this.name="Mobile"}b.prototype.init=function(a){var c=this;f.events.addMap({defaultMethod:function(a){c.onPluginEvent(a)},eventMap:[{events:"*",args:["$event"]}]});this.sendToMobile("get_ids",
null,function(e){c.ucid=e.ucid;c.gcid=e.gcid;for(var b in f.events.global._activeNamespaces)c.registerForNamespaceEvents(b);a()})};b.prototype.getTokenParam=function(a,c){return""};b.prototype.onPluginEvent=function(a){a.isGlobal||this.sendToMobile("on_plugin_event",a)};b.prototype.onCustomEvent=function(a){this.sendToMobile("on_custom_event",a)};b.prototype.registerForNamespaceEvents=function(a){this.sendToMobile("register_for_namespace_events",{namespace:a})};b.prototype.getGmidTicket=function(a){a&&
this.sendToMobile("send_request/socialize.getGmidTicket",{expires:30},function(c){a(c.gmidTicket)},{forceHttps:!0})};b.prototype.isSessionValid=function(a,c){this.sendToMobile("is_session_valid",{},c)};b.prototype.sendRequest=function(a,c,b,d){this.sendToMobile("send_request/"+a,c,b,d)};b.prototype.sendOauthRequest=function(a,c,b,d){this.sendToMobile("send_oauth_request/"+a,c,b,d)};b.prototype.sendToMobile=function(a,b,e,k){var g=document.createElement("iframe");g.style.display="none";b&&delete b.APIKey;
if(e){var h=(new Date).getTime()+"_"+Math.random();d.mobileCallbacks[h]=function(a){e(a);document.documentElement.removeChild(g);delete d.mobileCallbacks[h]}}a="gsapi://"+a+"?callbackID="+(h||"")+"&params="+(b?encodeURIComponent(f.utils.keyValue.serialize(b)):"")+"&settings="+(k?encodeURIComponent(f.utils.keyValue.serialize(k)):"");g.src=a;window.setTimeout(function(){return document.documentElement.appendChild(g)},0)};b.prototype.onSDKEvent=function(a){a&&a.user&&f._.convertIdentitiesArrayToObject(a.user);
f.events.global.dispatch(a)};return b}();d.MobileAdapter=l})(d.mobile||(d.mobile={}))})(d.apiAdapters||(d.apiAdapters={}))})(f._||(f._={}))})(gigya||(gigya={}));

// end API adapters
var gigya;
(function(a){var f=navigator.userAgent.toLowerCase(),b=new Date,l=document.location.href.split("?")[0].split("#")[0].split("/")[2].split(":")[0],e=-1!=f.indexOf("win"),d=-1!=f.indexOf("msie")||-1!=f.indexOf("mozilla")&&-1!=f.indexOf("trident"),c=-1!=f.indexOf("msie 6."),h=-1!=f.indexOf("msie 7."),g=-1!=f.indexOf("msie 8."),k=-1!=f.indexOf("msie 9."),r=-1!=f.indexOf("mozilla")&&-1!=f.indexOf("trident/7.0"),n=-1!=f.indexOf("iphone")||-1!=f.indexOf("ipad")||-1!=f.indexOf("ipod"),m;m=-1!=f.indexOf("applewebkit")&&-1!=
f.indexOf("version/")?parseInt(f.split("version/")[1].split(" ")[0]):0;var t=-1!=f.indexOf("android"),q;q=-1!=f.indexOf("android")?parseFloat(f.slice(f.indexOf("android")+8)):0;var s=-1!=f.indexOf("chrome"),p=-1!=f.indexOf("firefox"),v=-1!=f.indexOf("opera"),u=navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&-1==navigator.appVersion.toLowerCase().indexOf("chrome")&&-1==f.indexOf("android"),x=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),w=
-1!=f.indexOf("crios"),y=navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac")?!0:!1,A=-1!=f.indexOf("windows phone"),B=null!=window.postMessage&&(-1==f.indexOf("msie")||-1!=f.indexOf("iemobile")),z;try{z=null!=window.localStorage}catch(C){z=!1}a.localInfo={initTime:b,version:0,pageDomain:l,userAgent:f,isWin:e,isIE:d,isIE6:c,isIE7:h,isIE8:g,isIE9:k,isIE11:r,isIOS:n,iosVersion:m,isAndroid:t,androidVersion:q,isChrome:s,isFF:p,isOpera:v,isSafari:u,isIOSWebView:x,isIOSChrome:w,isMAC:y,
isWindowsPhone:A,supportsPostMessage:B,supportsLocalStorage:z,quirksMode:"BackCompat"==document.compatMode&&-1!=f.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var a="(iphone;android;midp;240x320;blackberry;netfront;nokia;panasonic;portalmmm;sharp;sie-;sonyericsson;symbian;windows ce;benq;mda;mot-;opera mini;philips;pocket pc;sagem;samsung;htc".split(";"),c;for(c in a)if(-1!=f.indexOf(a[c]))return!0;return!1}(),isTouch:function(){if("ontouchstart"in window)return!0;
if("onmsgesturechange"in window)try{new ActiveXObject("htmlfile")}catch(a){return!0}return!1}(),messagingMethod:0}})(gigya||(gigya={}));
(function(a){var f=navigator.userAgent.toLowerCase();(function(b){(function(a){a.indexOf=function(a,c){for(var h=0;h<a.length;h++)if(a[h]==c)return h;return-1};a.clone=function(a){for(var c=[],h=0;h<a.length;h++)c[h]=a[h];return c};a.removeByValue=function(a,c){if(a)for(var h=a.length-1;0<=h;h--)a[h]==c&&a.splice(h,1)};a.removeByProperty=function(a,c,h){if(a)for(var g=a.length-1;0<=g;g--)a[g][c]==h&&a.splice(g,1)};a.getArrayFromString=function(a,c,h){if(!a||"string"!=typeof a)return[];h&&(a=a.toLowerCase());
return(a=a.replace(/[ ]/g,"").replace(/,,/g,","))?a.split(c):[]}})(b.array||(b.array={}));(function(a){a.create=function(a,c){return function(){return c.apply(a,arguments)}}})(b.delegate||(b.delegate={}));(function(b){b.fill=function(d,c){"function"==typeof d&&(d=d(c));d instanceof Array&&(d=d.join(""));var h=/(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;h.lastIndex=0;for(var g=d,k=h.exec(g),b;null!=k;){b="$"==k[1]?0:4;var e="!"==k[2+b],m=k[3+b];b=k[4+
b];null==b&&(b="");"."==m.substring(0,1)&&(m=m.substring(1));"DBG"==m.substring(0,3)&&(m=m.substring(3));var l="";for(b=m+b;b!=l;){var l=b,q=h.lastIndex;b=a.utils.templates.fill(l,c);h.lastIndex=q}l="";q=0;if(null!=c[m.split(".")[0]])try{l=(new Function("o","p",'return eval("o." + p)'))(c,b)}catch(f){}else l="$"+(e?"!":"")+b,q=1;g=e?g.replace(k[0],""):g.substr(0,k.index)+l+g.substr(k.index+k[0].length);h.lastIndex=k.index+q;k=h.exec(g)}return g}})(b.templates||(b.templates={}));(function(b){b.callFunction=
function(a,c){var h=eval(a),g=a.split(".");g.splice(g.length-1,1);g=eval(g.join("."));h.apply(g,c)};b.invokeOnPageLoad=function(d,c){if(!document.readyState&&document.body||"loaded"==document.readyState||"complete"==document.readyState||!c&&"interactive"==document.readyState&&document.body)d();else{var h=!1,g=function(){h||(h=!0,d())};window.setTimeout(g,2E4);a.utils.DOM.addEventListener(window,"load",g);a.utils.DOM.addEventListener(document,"DOMContentLoaded",g)}};b.createAlias=function(a,c){for(var h=
a.split("."),g=window,k=0;k<h.length-1;k++){var b=h[k];g[b]||(g[b]={});g=g[b]}g[h[h.length-1]]=c}})(b.functions||(b.functions={}));(function(b){var d={};b.open=function(c,h,g){if(a.localInfo.isIE&&2048<c.length||4096<c.length)a.utils.redirect(c.split("?")[0],[a.utils.URL.getParamsFromURL(c)],"POST","_blank");else{g||(g="menubar=0,toolbar=0,resizable=1,scrollbars=1,width=960,height=680");var k=g;try{var b=parseInt(g.split("width=")[1].split(",")[0]),e=parseInt(g.split("height=")[1].split(",")[0]),
m=(screen.width-b)/2,l=(screen.height-e)/2;0>m&&(m=0);0>l&&(l=0);k+=",top="+l+",left="+m}catch(q){}(c=window.open(c,h,k))&&c.focus&&c.focus();d[h]=c}return null!=d[h]};b.close=function(c){if(null!=d[c]){var h=function(){try{null!=d[c]&&d[c].close(),delete d[c]}catch(a){}};6<=a.localInfo.iosVersion?h():window.setTimeout(h,10)}}})(b.win||(b.win={}));(function(a){a.isExplicitTrue=function(a){a=(""+a).toLowerCase();return"true"==a||"1"==a};a.isExplicitFalse=function(a){a=(""+a).toLowerCase();return"false"==
a||"0"==a}})(b.validation||(b.validation={}));(function(b){function d(a,c,h){if(!c)return a;c=c.split(".");for(var b=0;b<c.length;b++){var d=c[b];h&&!a[d]&&(a[d]={});if(a[d])a=a[d];else return null}return a}function c(a,h,b,d,e,l){e||(e=0);if("undefined"==typeof a||null==a||"function"==typeof a&&b)return null;if(a.constructor==Array){for(var q=[],f=0;f<a.length;f++)b&&"function"==typeof a[f]||(q[f]=h?c(a[f],h,b,d,e+1,l):a[f]);return q}if("object"==typeof a){q={};for(f in a)l&&"context"==f||b&&"function"==
typeof a[f]||(q[f]=h?c(a[f],h,b,d,e+1,l):a[f]);return q}return a}function h(c,b,d){if(null!=c){null==b&&(b={});if(c.constructor==Array)for(var e=0;e<c.length;e++)h(c[e],b,d);else if(d){d=d.split("|");var e={},m;for(m in c)e[m.toLowerCase()]=1;for(m=0;m<d.length;m++){var l=d[m];e[l.toLowerCase()]&&(b[l]=c[l])}}else b=a.utils.object.clone(c,!1);return b}}b.removeUndefined=function(a){var c={},h;for(h in a)null!=a[h]&&void 0!=a[h]&&(c[h]=a[h]);return c};b.getPropertyBySerializedName=d;b.setPropertyBySerializedName=
function(a,c,h){c=c.split(".");var b=c.pop();d(a,c.join("."),!0)[b]=h};b.add=function(a,c,h){for(var b in c)h&&"undefined"!=typeof a[b]||(a[b]=c[b])};b.getHash=function(c){var h=[],b;for(b in c){var d;"object"==typeof c[b]?d=a.utils.JSON.serialize(c[b],!1):c[b]&&(d=c[b].toString());h.push(b+"="+d)}return h.sort().join("&")};b.getMurmurHash=function(a,c){c||(c=0);var h,b,d,e,l;h=a.length&3;b=a.length-h;d=c;for(l=0;l<b;)e=a.charCodeAt(l)&255|(a.charCodeAt(++l)&255)<<8|(a.charCodeAt(++l)&255)<<16|(a.charCodeAt(++l)&
255)<<24,++l,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,e=461845907*(e&65535)+((461845907*(e>>>16)&65535)<<16)&4294967295,d^=e,d=d<<13|d>>>19,d=5*(d&65535)+((5*(d>>>16)&65535)<<16)&4294967295,d=(d&65535)+27492+(((d>>>16)+58964&65535)<<16);e=0;switch(h){case 3:e^=(a.charCodeAt(l+2)&255)<<16;case 2:e^=(a.charCodeAt(l+1)&255)<<8;case 1:e^=a.charCodeAt(l)&255,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,d^=461845907*(e&65535)+
((461845907*(e>>>16)&65535)<<16)&4294967295}d^=a.length;d^=d>>>16;d=2246822507*(d&65535)+((2246822507*(d>>>16)&65535)<<16)&4294967295;d^=d>>>13;d=3266489909*(d&65535)+((3266489909*(d>>>16)&65535)<<16)&4294967295;return(d^d>>>16)>>>0};b.clone=c;b.merge=function(a){for(var c={},h=0;h<a.length;h++)if(a[h]&&a[h].length)for(var d=0;d<a[h].length;d++)for(var b in a[h][d])c[b]=a[h][d][b];else for(b in a[h])c[b]=a[h][b];return c};b.extractProperties=h;b.extractProperty=function(a,c){return h(a,void 0,c)[c]}})(b.object||
(b.object={}));(function(b){function d(c,h,g,d,r){var l=a.localInfo.pageDomain,m=a.partnerSettings.baseDomain;null==d&&(d=0<m.length&&l.length>=m.length&&l.lastIndexOf(m)==l.length-m.length?m:l);g=null==g||""===g||isNaN(g)?47304E7:0==g?null:1E3*g;m=new Date;m.setTime(m.getTime()+g);d=c+"="+escape(h)+(r?"":"; path=/")+(null==g?"":"; expires="+m.toUTCString())+(d&&""!=d&&-1!=d.indexOf(".")?"; domain="+d:"");document.cookie=d;g&&!(0<g)||b.get(c)||(d=c+"="+escape(h)+(r?"":"; path=/")+(null==g?"":"; expires="+
m.toUTCString())+(l&&""!=l&&-1!=l.indexOf(".")?"; domain="+l:""),document.cookie=d)}b.get=function(a){a=a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");return(a=document.cookie.match(RegExp("(?:^|;)\\s?"+a+"=(.*?)(?:;|$)")))&&unescape(a[1])};b.set=d;b.remove=function(c){var h=a.localInfo.pageDomain,g=a.partnerSettings.baseDomain;0<g.length&&h.length>=g.length&&h.lastIndexOf(g)==h.length-g.length&&(d(c,"",-1,g),d(c,"",-1,g,!0));d(c,"",-1,a.localInfo.pageDomain);d(c,"",
-1,a.localInfo.pageDomain,!0);d(c,"",-1,"");d(c,"",-1,"",!0)}})(b.cookie||(b.cookie={}));(function(a){a.sanitizeHTML=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/'/g,"&#39;").replace(/&#38;#173;/g,"&#173;")};a.sanitizeAttribute=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;")}})(b.sanitize||
(b.sanitize={}));(function(a){function b(a,h,g,k){k||(k=0);if(10<k)return"[Too deep]";var e="",l="",m="";if(g)for(var m="\t",l="\n",f=0;f<k+1;f++)e+=m;var q=typeof a;if("function"==q)return q.toString();if("object"!=q||null===a)return"string"==q&&(a='"'+a.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"'),String(a);var s,p,v=[],u=a&&a.constructor==Array;if(u)for(f=0;f<a.length;f++)p=a[f],q=typeof p,null==p||"undefined"==q?p="":"string"==q?p='"'+p.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,
"\\n")+'"':"function"==q?p=h?"[Function]":"":p.parentNode&&p.innerHTML?p="[HTML Element]":p.constructor==Date?p="":"object"==q&&null!==p&&(p=b(p,h,g,k+1)),""!=String(p)&&v.push(e+m+String(p));else for(s in a)p=a[s],q=typeof p,null==p||"undefined"==q?p=String(p):"string"==q?p='"'+p.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==q?p=h?"[Function]":"":p.parentNode&&p.innerHTML?p="[HTML Element]":p.constructor==Date?p="":"object"==q&&null!==p&&(p=l+b(p,h,g,k+1)),""!=String(p)&&
v.push(e+m+'"'+s.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'":'+String(p));return l+e+(u?"[":"{")+l+v.join(","+l)+l+e+(u?"]":"}")}a.serialize=b;a.deserialize=function(a){""===a&&(a='""');eval("var o");try{eval("o="+a)}catch(h){}return eval("o")}})(b.JSON||(b.JSON={}));(function(a){function b(){var a=0,c=0;"number"==typeof window.pageYOffset?(c=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(c=document.body.scrollTop,a=document.body.scrollLeft):
document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(c=document.documentElement.scrollTop,a=document.documentElement.scrollLeft);return{left:a,top:c}}function c(){var a,c;c=document.documentElement;var b=document.body;window.innerHeight?(a=window.innerHeight,c=window.innerWidth):(a=c.clientHeight,0==a&&(a=b.clientHeight),c=c.clientWidth,0==c&&(c=b.clientWidth));return{w:c,h:a}}a.getScroll=b;a.getFullSize=function(){var a=document.documentElement,c=
document.body,b=a.clientHeight;0==b&&(b=c.clientHeight);a=a.clientWidth;0==a&&(a=c.clientWidth);return{w:a,h:b}};a.getInnerSize=c;a.getMiddleCenter=function(){var a=b(),g=c();return{top:a.top+Math.floor(g.h/2),left:a.left+Math.floor(g.w/2)}};a.isRectHorizontallyVisible=function(a){var g=b(),k=c();return a.left>=g.left&&a.right<=g.left+k.w};a.isRectFullyVisible=function(a){var g=b(),k=c();return a.top>=g.top&&a.bottom<=g.top+k.h&&a.left>=g.left&&a.right<=g.left+k.w}})(b.viewport||(b.viewport={}));
var l=b.viewport;(function(a){a.getPosition=function(){var a=0,c=0;if(document.body){var h=null,h={clientX:0,clientY:0};if(h.pageX||h.pageY)a=h.pageX,c=h.pageY;else if(h.clientX||h.clientY)a=h.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=h.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:c}}}})(b.mouse||(b.mouse={}));(function(b){function d(a,h,b){"undefined"!==typeof b&&(b=(new Date).getTime()+1E3*b,h=h+"|exp="+b);c(a,h)}var c=function(a,c){},
h=function(a){return null},g=function(a){};if(a.localInfo.supportsLocalStorage)c=function(a,c){try{window.localStorage[a]=c}catch(h){}},h=function(a){return window.localStorage[a]},g=function(a){window.localStorage.removeItem(a)};else if(a.localInfo.isIE6||a.localInfo.isIE7)var k,r=function(){k||(k=document.createElement("div"),k.addBehavior("#default#userData"),a.utils.DOM.appendToBody(k))},l=function(){try{r(),k.save("gigya_ud")}catch(a){}},m=function(){try{r(),k.load("gigya_ud")}catch(a){}},c=
function(a,c){m();k.setAttribute(encodeURIComponent(a).replace(/\%/g,""),c);l()},h=function(a){m();return k.getAttribute(encodeURIComponent(a).replace(/\%/g,""))},g=function(a){m();k.removeAttribute(encodeURIComponent(a).replace(/\%/g,""));l()};else if(a.localInfo.isFF)var f=window.globalStorage,c=function(a,c){try{f[location.hostname][a]=c}catch(h){}},h=function(a){return f[location.hostname][a]},g=function(a){delete f[location.hostname][a]};b.getItem=function(a){var c=h(a);if(c&&c.split){var b=
c.split("|exp=");if(1<b.length){var d=parseInt(b[1]);if((new Date).getTime()<d)return b[0];g(a)}}return c};b.setItem=d;b.removeItem=function(a){g(a)};b.setObject=function(c,h){d(c,a.utils.JSON.serialize(h))};b.getObject=function(c){c=this.getItem(c);try{c=a.utils.JSON.deserialize(c)}catch(h){}return c}})(b.localStorage||(b.localStorage={}));(function(b){b.URLEncode=function(a){return encodeURIComponent(a)};b.URLDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};b.getParamsFromURL=
function(b,c){return-1==b.indexOf("?")?{}:a.utils.keyValue.deserialize(b.split("#")[0].split("?")[1],"&",c)};b.getParamValueFromURL=function(a,c,h){if(null==c||""==c)return h;var b=c.indexOf("?");if(-1==b)return h;b="&"+c.substr(b+1);c=b.toLowerCase().indexOf("&"+a.toLowerCase()+"=");if(-1==c)return h;a=b.substr(c+(1+a.length+1))+"&";c=a.indexOf("&");return a.substr(0,c)};b.addParamsToURL=function(b,c){var h=a.utils.URL.getParamsFromURL(b);a.utils.object.add(h,c);var g=b.split("#"),h=g[0].split("?")[0]+
"?"+a.utils.keyValue.serialize(h,"&");1<g.length&&(h+="#"+g[1]);return h}})(b.URL||(b.URL={}));(function(b){b.serialize=function(b,c){var h=[];c||(c="&");for(var g in b)switch(typeof b[g]){case "function":break;case "array":case "object":null!=b[g]&&h.push(g+"="+a.utils.URL.URLEncode(a.utils.JSON.serialize(b[g])));break;case "undefined":break;default:h.push(g+"="+a.utils.URL.URLEncode(b[g]))}return h.join(c)};b.deserialize=function(b,c,h,g){var k={};if(!b)return k;c||(c="&");b=b.split(c);for(c=0;c<
b.length;c++){var e=b[c],l=e.indexOf("=");if(-1==l){var m=h?e.toLowerCase():e;k[m]="1"}else{m=e.substr(0,l);h&&(m=m.toLowerCase());e=e.substr(l+1).replace(/\+/g," ");try{k[m]=g?unescape(e):a.utils.URL.URLDecode(e)}catch(f){k[m]=unescape(e)}}}return k}})(b.keyValue||(b.keyValue={}));(function(b){b._nextZIndex=999999999;b._popupContainers=[];b._pseudoContainers=[];var d=null;b.addEventListener=function(a,h,b){a&&b&&(a.addEventListener?a.addEventListener(h,b,!0):a.attachEvent("on"+h,b))};b.removeEventListener=
function(a,h,b){b&&(a.removeEventListener?a.removeEventListener(h,b,!0):a.detachEvent("on"+h,b))};b.disableDefaultEventHandling=function(a){a.preventDefault?a.preventDefault():window.event&&(window.event.returnValue=!1)};b.addDialogBackListener=function(c){a.utils.DOM._removeDialogBackListener();d=function(h){h&&h.newURL&&-1==h.newURL.indexOf("|gigyaMobileDialog")&&(c(h),a.utils.DOM._removeDialogBackListener())};window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&
(window.location.hash+="|gigyaMobileDialog");a.utils.DOM.addEventListener(window,"hashchange",d)},50)};b._removeDialogBackListener=function(){d&&(a.utils.DOM.removeEventListener(window,"hashchange",d),d=null,window.location.hash=window.location.hash.replace("|gigyaMobileDialog",""))};b.appendToBody=function(a){document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a))};b.removeElement=function(a){a&&a.parentElement&&
a.parentElement.removeChild(a)};b.isChildOf=function(a,h){for(var b=a.parentNode;b;){if(h==b)return!0;b=b.parentNode}return!1};b.isVisible=function(c){if(!c||!c.parentNode||c.style&&"none"==c.style.display)return!1;if(c.parentNode)return a.utils.DOM.isVisible(c.parentNode)};b.getCenteredDivID=function(c){return"gig_"+a.localInfo.initTime.getTime().toString()+"_"+c};b.createTopLevelDiv=function(c){var h;h=document.createElement("iframe");h.id="gigya_ifr_"+c;h.frameborder="0";h.frameBorder="0";h.allowtransparency=
!0;h.style.position="absolute";h.style.width=a.localInfo.isChrome?"30px":"1px";h.style.height="1px";null!=h.style.zIndex&&(h.style.zIndex=a.utils.DOM._nextZIndex++);a.localInfo.isIE6&&(h.src=a._.getCdnResource("/gs/blank.htm"));var b=document.createElement("div");b.style.position="absolute";null!=b.style.zIndex&&(b.style.zIndex=""+a.utils.DOM._nextZIndex++);b.innerHTML="";c&&(b.id=c);document.body&&document.body.insertBefore&&(document.body.firstChild?(null!=h&&document.body.insertBefore(h,document.body.firstChild),
document.body.insertBefore(b,document.body.firstChild)):document.body.appendChild&&(null!=h&&document.body.appendChild(h),document.body.appendChild(b)));return b};b.hideByID=function(a){if(a=document.getElementById(a))a.style.display="none"};b.showByID=function(c){if(c=document.getElementById(c))c.style.display=a.localInfo.isIE6?"TD"==c.tagName?"table-cell":"TR"==c.tagName?"":"TABLE"==c.tagName?"":"block":""};b.clearByID=function(a){try{var h=document.getElementById(a);null!=h&&(h.innerHTML="")}catch(b){}};
b.getHTMLSize=function(a,h){var b=document.createElement("div");b.style.position="absolute";b.style.left="-1000px";b.innerHTML=a;h.appendChild(b);var d=b.offsetWidth,e=b.offsetHeight;b.parentNode.removeChild(b);return{w:d,h:e}};b.getElementsByClass=function(a,h){if(!a)return[];for(var b=[],d=a.getElementsByTagName("*"),e=0;e<d.length;e++){var l=d[e].className;if(l)for(var l=l.split(" "),m=0;m<l.length;m++)l[m]==h&&b.push(d[e])}return b||[]};b.getElementsByAttribute=function(a,b,g,d){var e=[];a=a.getElementsByTagName(b);
for(b=0;b<a.length;b++)a[b].getAttribute(g)==d&&e.push(a[b]);return e};b.getElementPosition=function(c){if(!c)return{left:0,top:0,bottom:0,right:0};c=c.getBoundingClientRect();var b=a.utils.viewport.getScroll(),g=c.left+b.left,b=c.top+b.top;return{left:g,top:b,right:g+c.width,bottom:b+c.height}};b.addClassToElement=function(a,b){if(a){for(var g=!1,d=a.className.split(" "),e=0;e<d.length;e++)if(d[e]==b){g=!0;break}g||(d.push(b),a.className=d.join(" "))}};b.removeClassFromElement=function(a,b){if(a){for(var g=
a.className.split(" "),d=g.length-1;0<=d;d--)g[d]==b&&g.splice(d,1);a.className=g.join(" ")}};b.isElementClass=function(a,b){if(a){for(var g=!1,d=a.className.split(" "),e=0;e<d.length;e++)if(d[e]==b){g=!0;break}return g}};b.cancelEvent=function(a){a&&("cancelable"in a?a.preventDefault():a.returnValue=!1)};b.createElement=function(a,b){var g=document.createElement("div");b=b||"";g.innerHTML="<"+a+' name="'+b+'" id="'+b+'"></'+a+">";return g.firstChild};b.setSize=function(c,b,g,d){if(null!=c&&null!=
c.style){var e=""+(0<(""+b).indexOf("%")?b:b+"px"),f=""+(0<(""+b).indexOf("%")?g:g+"px");if(c.style.width!=e||c.style.height!=f)void 0==b||isNaN(b)||(c.style.width=e),void 0==g||isNaN(g)||(c.style.height=f);if(d&&b&&g){if(null==c.style.zIndex||d)c.style.zIndex=(this._nextZIndex++).toString();d=l.getInnerSize();e=a.utils.viewport.getScroll();f=e.left;c.style.top=""+Math.max(0,e.top+Math.floor((d.h-g)/2))+"px";c.style.left=""+Math.max(0,f+Math.floor((d.w-b)/2))+"px";c.style.visibility=""}}};b.createHiddenIframe=
function(c){var b=document.createElement("iframe");b.src=c;b.style.width="30px";b.style.height="10px";b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";document.body?a.utils.DOM.appendToBody(b):a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(b)});return b}})(b.DOM||(b.DOM={}));(function(b){function d(c){c=a.utils.object.clone(c);var b=function(){var b=c.data.split("="),d=g[b[0]];if(null!=d){if("function"==typeof d.callback){var e=unescape(b[1]),e=a.utils.keyValue.deserialize(e,
null,null,!0);d.callback(e,d.context)}h(b[0]);(b=document.getElementById(b[0]))&&b.parentElement&&b.parentElement.removeChild(b)}};c&&c.data&&c.data.split&&(6<=a.localInfo.iosVersion?b():window.setTimeout(b,100))}function c(c){var b=document.createElement("iframe");b.style.width="30px";b.style.height="10px";b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.id=c;b.src="https://cdns.gigya.com/gs/LocalStorageListener.htm?mode=receive&id="+encodeURIComponent(c);a.utils.DOM.appendToBody(b);
return b}function h(a){delete g[a]}var g={};b._flashListenerID="flid"+(new Date).getTime();var k=!1,l={};b._onFlashMessage=function(c){c=a.utils.keyValue.deserialize(c,null,null,!0);var b=c.id,d=g[b];null!=d&&("function"==typeof d.callback&&d.callback(c,d.context),h(b))};b.addMessageListener=function(h,f,t,q){g[h]={callback:q,context:f,t:(new Date).getTime()};f=a.localInfo.messagingMethod;if(0==f||1==f)0==f&&t&&c(h),k||(h=function(a){var c=a.data.split("=")[0];g[c]&&d(a)},window.addEventListener?
window.addEventListener("message",h,!1):window.attachEvent&&window.attachEvent("onmessage",h),k=!0);else{var s="localstorage";a.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=a.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(s=a.thisScript.globalConf.legacyCrossSiteMethod);l[s]||window.setTimeout(function(){var c=document.createElement("div");c.style.width="1px";c.style.height="1px";c.style.overflow="hidden";c.style.position="absolute";c.style.left="-1000px";var h=b._flashListenerID;
"localstorage"!=s&&(h=s+":"+b._flashListenerID);var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],g=(new Date).getTime(),k=document.createElement("object");k.setAttribute("id","eventsBroadcaster"+g);k.setAttribute("codebase","https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0");k.setAttribute("width","50");k.setAttribute("height","50");k.setAttribute("src","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");
g=document.createElement("param");g.name="movie";g.setAttribute("value","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");k.appendChild(g);g=document.createElement("param");g.setAttribute("name","allowScriptAccess");g.setAttribute("value","always");k.appendChild(g);g=document.createElement("param");g.setAttribute("name","FlashVars");g.setAttribute("value","action=listen&id="+h+"&eventName=loginComplete&callback=gigya.utils.xd._onFlashMessage&domain="+d);k.appendChild(g);c.appendChild(k);a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(c);
k.setAttribute("type","application/x-shockwave-flash");k.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")});l[s]=!0},500)}};b.removeMessageListener=h})(b.xd||(b.xd={}));(function(b){var d={};b.load=function(c,b,g,k){var e;if(k){k=c.replace(/^http(s?):\/\/cdn(s?)[0-9]*.gigya.com\//,"http$1://cdn$2.gigya.com/");if(d[k]){d[k].loaded?g&&g():(d[k].onLoad.push(g),d[k].onError.push(b));return}e=d[k]={loaded:!1,onLoad:[g],onError:[b]}}else e={loaded:!1,onLoad:[g],onError:[b]};b=function(){var b=
document.createElement("script");b.async=!0;b.type="text/javascript";b.charset="UTF-8";var h=!1,g=function(){if(!h){for(var a=0;a<e.onLoad.length;a++)if("function"==typeof e.onLoad[a])e.onLoad[a]();e.loaded=!0;e.onError=e.onLoad=null;h=!0;setTimeout(function(){b.parentNode&&b.parentNode.removeChild(b)},5E3)}};b.onload=g;b.onreadystatechange=function(){"loaded"==this.readyState&&g()};b.onerror=function(){for(var a=0;a<e.onError.length;a++)if("function"==typeof e.onError[a])e.onError[a]();delete d[c]};
var k=document.getElementsByTagName("head");k&&0<k.length&&k[0].appendChild(b);k=function(){b.src=c};6<=a.localInfo.iosVersion?k():setTimeout(k,1)};a.localInfo.isIE?a.utils.functions.invokeOnPageLoad(b):b()}})(b.script||(b.script={}));(function(b){b.set=function(b,c){if(window.sessionStorage){var h;try{(h=a.utils.JSON.deserialize(window.sessionStorage.getItem("gigyaCache")))||(h={}),null==c&&h[b]?delete h[b]:h[b]={response:c,time:(new Date).getTime()},window.sessionStorage.setItem("gigyaCache",a.utils.JSON.serialize(h))}catch(g){}a.utils.queue.release("cache",
"cache_"+b)}};b.get=function(b,c,h){if(window.sessionStorage)try{if(!a.utils.queue.isActive("cache_"+b)){var g=window.sessionStorage.getItem("gigyaCache"),k=a.utils.JSON.deserialize(g),e=k?k[b]:null;if(e){if(c&&c+e.time>(new Date).getTime()){h(e.response);return}a.utils.sessionCache.remove(b);e=null}if(!e){a.utils.queue.hold("cache","cache_"+b);h(null);return}}a.utils.queue.isActive("cache_"+b)&&a.utils.queue.waitFor("cache_"+b,a.utils.sessionCache.get,arguments)}catch(l){h(null)}else"function"==
typeof h&&h(null)};b.remove=function(b){a.utils.sessionCache.set(b,null)}})(b.sessionCache||(b.sessionCache={}));(function(a){a.trim=function(a){return a.replace(/^\s*(\S*(.*\S)?)\s*$/,"$1")};a.format=function(a){for(var c=0;c<arguments.length-1;c++);for(c=0;c<arguments.length-1;c++)null!=arguments[c+1]&&(a=a.split("{"+c+"}").join(arguments[c+1]));return a};a.capitalize=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}})(b.stringUtils||(b.stringUtils={}));(function(b){var d=null;b.isModern=
function(){return a.localInfo.isChrome||a.localInfo.isFF||a.localInfo.isOpera||a.localInfo.isIOSWebView||a.localInfo.isIE&&9<=a.utils.browser.getVersion()||a.localInfo.isSafari&&4<=a.utils.browser.getVersion()};b.getVersion=function(){if(d)return d;try{var a=f.match(/(opera|chrome|safari|firefox|msie|trident.*rv:)\/?\s*(\.?\d+(\.\d+)*)/i);if(a[2]){var b=a[2].split(".")[0];if(!isNaN(parseInt(b)))return d=parseInt(b)}}catch(g){}return 0}})(b.browser||(b.browser={}));(function(b){function d(a){if(!c[a])return!1;
var b=0,d;for(d in c[a].ids)b++;return 0<b}var c={};b.isActive=d;b.release=function(a,b){if(c[b]&&(delete c[b].ids[a],!d(b))){var k=c[b].q;for(c[b].q=[];0<k.length;){var e=k.splice(0,1)[0];try{e.func.apply(this,e.args)}catch(l){console&&console.log("Gigya: Exception while invoking queued method ("+b+": "+a+")")}if(d(b)){c[b].q=k;break}}}};b.hold=function(a,b){c[b]||(c[b]={q:[],ids:{}});c[b].ids[a]=!0};b.waitFor=function(a,b,d){c[a]||(c[a]={q:[],ids:{}});c[a].q.push({func:b,args:d})};b.queueForExecution=
function(c,b,d){d=d||[];a.utils.queue.isActive(c)?a.utils.queue.waitFor(c,b,d):b.apply(this,d)}})(b.queue||(b.queue={}));b.redirect=function(b,d,c,h){if(c&&"post"==c.toLowerCase()){c=document.createElement("form");var g=[];c.setAttribute("accept-charset","UTF-8");c.setAttribute("method","POST");c.setAttribute("action",b);h&&c.setAttribute("target",h);b=a.utils.object.merge(d);for(var k in b)"boolean"!=typeof b[k]&&"string"!=typeof b[k]||"eventName"==k||g.push('<textarea name="'+encodeURIComponent(k)+
'">'+b[k].toString().replace(/\&/g,"&amp;")+"</textarea>");c.innerHTML=g.join("");c.style.display="none";a.utils.DOM.appendToBody(c);c.submit()}else{c=b.split("?");b=c[0];h={};if(1<c.length)for(c=c[1].split("&"),g=0;g<c.length;g++){var l=c[g].split("=");h[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}for(c=0;c<d.length;c++)for(k in g=d[c],g)"boolean"!=typeof g[k]&&"string"!=typeof g[k]||"eventName"==k||(h[k]=g[k]);d=[];for(k in h)d.push(k+"="+encodeURIComponent(h[k]));document.location.href=
b+"?"+d.join("&")}}})(a.utils||(a.utils={}))})(gigya||(gigya={}));(function(a){a.socialize={};a.gcs={};a.gm={};a.comments={};a.accounts={};a.chat={};a.gscounters={}})(gigya||(gigya={}));
(function(a){(function(f){var b={},l=0,e={http:["cdn.gigya.com","cdn1.gigya.com","cdn2.gigya.com","cdn3.gigya.com"],https:["cdns.gigya.com","cdns1.gigya.com","cdns2.gigya.com","cdns3.gigya.com"]};f.getApi=function(a){return b[a]};f.getCdnResource=function(c){var b,d="https:"===document.location.protocol?"https":"http";"cdn.gigya.com"==a.thisScript.base||"cdns.gigya.com"==a.thisScript.base?b=a.thisScript.base:(b=e[d],l>=b.length&&(l=0),b=b[l++]);return d+"://"+b+(c?c:"")};var d=function(){function c(a,
c){this.methodName=a;this.settings=c;this.addAlias();b[a]=this}c.prototype.run=function(a){};c.prototype.preprocessRequest=function(a,c){this.settings.preprocessor?this.settings.preprocessor(a,c):c()};c.prototype.addAlias=function(){var c=this;a.utils.functions.createAlias("gigya."+this.methodName,function(){var b=function(){var b=a.utils.object.merge([a.thisScript.globalConf,d]);c.run(b)},d=a.utils.object.merge([arguments]);a.thisScript&&a.thisScript.globalConf?b():a.utils.queue.queueForExecution("API",
b)})};return c}();f.BaseApi=d})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a.defaultEventMaps=a.defaultEventMaps||[]})(gigya||(gigya={}));
(function(a){(function(f){(function(b){function l(c,b,d,k){var e=function(c){var d=0;c.cancel||(d=a.events.global.dispatch(c,b));k&&k(d)};d?d(c,e):e(c)}var e={},d={};b._activeNamespaces={};b.add=function(c,b,g,k,f){f||(f="socialize");c=f+"_"+c;g||(g="other");e[c]||(e[c]=[]);e[c].push({handler:b,type:g,context:k});!this._activeNamespaces[f]&&a._.apiAdapter&&a._.apiAdapter.registerForNamespaceEvents(f);this._activeNamespaces[f]=1;if((b=d[c])&&"other"==g)for(d[c]=[],g=0;g<b.length;g++)k=b[g],l(k.eventObj,
k.params,k.preProcess)};b.remove=function(a,b){};b.dispatch=function(c,b){var d=0,k=c.isInternal,l=c.eventName.split(",");a.log.addLog('Dispatching global event "'+c.eventName+'" with this event object',c);for(var f=0;f<l.length;f++){var m=l[f].split("."),t=1<m.length?m.shift():"socialize",q=m[0],m="on"+q.substring(0,1).toUpperCase()+q.substring(1),s=a.utils.object.clone(e[t+"_"+m]);s||(s=[]);m=a.utils.object.clone(c);m.isGlobal=!0;m.eventName=q;b&&b.source&&(m.source=b.source);b&&b.sourceData&&(m.sourceData=
b.sourceData);q=["component"];k||q.push("other");for(var p=0;p<q.length;p++)for(var v=q[p],u=0;u<s.length;u++){var x=s[u];if(x.type==v){var w=a.utils.object.clone(m);null==w.context&&null!=x.context&&(w.context=x.context);null==w.context&&delete w.context;"component"!=v&&(d++,a._.handleSpecialFields(w));try{x.handler(w)}catch(y){a.log.addLog('Error while trying to invoke "'+c.eventName+'" global event handler',y)}}}k||a.events._dispatchFromMaps(m,!0);s=window.GenesisExchange_Gigya;q=window.gigya_omniture_conf;
p=window.myOmnitureIntegrationFunc;k||"undefined"==typeof s||"undefined"==typeof q||"socialize"!=t||((new s(q)).processAction(m),"undefined"!=typeof p&&p(q,m))}return d};b.dispatchWhenHandlerAdded=function(a,b,g){"undefined"===typeof b&&(b={});var k=a.eventName.split("."),e=1<k.length?k.shift():"socialize",f=k[0];l(a,b,g,function(k){0==k&&(k="on"+f.substring(0,1).toUpperCase()+f.substring(1),k=e+"_"+k,d[k]||(d[k]=[]),d[k].push({eventObj:a,params:b,preProcess:g}))})};b.getEventsForOperation=function(a){var b=
[];-1!=a.toLowerCase().indexOf("login")?(this._activeNamespaces.socialize&&b.push("socialize.login"),this._activeNamespaces.accounts&&b.push("accounts.login")):-1!=a.toLowerCase().indexOf("addconnection")&&this._activeNamespaces.socialize&&b.push("socialize.connectionAdded");return b.join(",")}})(f.global||(f.global={}));f.addMap=function(b){a.defaultEventMaps.splice(0,0,b)};f.dispatchErrorFromResponse=function(b,l,e){l||(l={});var d=l;d.response&&(d=d.response);l={eventName:"error",status:d.status?
d.status:"FAIL",statusMessage:d.statusMessage?d.statusMessage:"General Server Error",errorMessage:d.errorMessage?d.errorMessage:"General Server Error",errorDetails:d.errorDetails?d.errorDetails:"",errorCode:d.errorCode?d.errorCode:500001,response:l};a.utils.object.add(l,e);a.events.dispatchForWidget(l,b)};f.dispatchInvalidParamError=function(a,l){var e={eventName:"error"};"undefined"==typeof a[l]||null==a[l]?(e.errorCode=400002,e.errorMessage="Missing_required_parameter ("+l+")"):(e.errorCode=400006,
e.errorMessage="Invalid_parameter_value ("+l+")");e.status=e.errorCode;e.statusMessage=e.errorMessage;this.dispatchForWidget(e,a)};f.dispatchForWidget=function(b,l){if(b&&b.eventName){var e=b.eventName;a.log.addLog('Dispatching widget event "'+e+'" for '+l.lastSource+" with this event object",b);var d="on"+e.substring(0,1).toUpperCase()+e.substring(1);a._.handleSpecialFields(b);for(var c=b.eventName.split(","),h,g=0;g<c.length;g++){e=c[g];d="on"+e.substring(0,1).toUpperCase()+e.substring(1);l.context&&
(b.context=l.context);l&&l.source&&(b.source=l.source);l&&l.sourceData&&(b.sourceData=l.sourceData);l&&l.containerID&&(b.sourceContainerID=l.containerID);try{"function"==typeof l[d]&&(h=l[d](b))}catch(k){}if(-1==e.indexOf("login")&&-1==e.indexOf("logout")&&"connectionRemoved"!=e&&"connectionAdded"!=e){this._dispatchFromMaps(b);var e=window.GenesisExchange_Gigya,d=window.gigya_omniture_conf,f=window.myOmnitureIntegrationFunc;"undefined"!=typeof e&&"undefined"!=typeof d&&((new e(d)).processAction(b),
"undefined"!=typeof f&&f(d,b))}}if(null!=h)return h}};f._dispatchFromMaps=function(b,l){for(var e=[],d=!1,c=0;c<a.defaultEventMaps.length;c++){for(var h=a.defaultEventMaps[c].eventMap,g=a.defaultEventMaps[c].defaultMethod,k=0;k<h.length;k++){var f=h[k],n=[];f.args||(f.args=[]);for(var m=0;m<f.args.length;m++)"$event"==f.args[m]?n.push(b):n.push(a.utils.templates.fill(f.args[m],b));f.events.split(",");m=","+f.events.toLowerCase()+",";-1==m.indexOf(",*,")&&(-1==m.indexOf(",on"+b.eventName.toLowerCase()+
",")&&-1==m.indexOf(","+b.eventName.toLowerCase()+",")||(b.source||f.sources)&&f.sources&&-1==f.sources.indexOf(b.source))||(e.push(f),(f.method?f.method:g).apply(this,n),f.override&&(d=!0))}if(d)break}}})(a.events||(a.events={}))})(gigya||(gigya={}));var __extends=this.__extends||function(a,f){function b(){this.constructor=a}for(var l in f)f.hasOwnProperty(l)&&(a[l]=f[l]);b.prototype=f.prototype;a.prototype=new b};
(function(a){(function(f){f.apiAdapter;var b=function(b){function e(a,c,h,g,k,e){"undefined"===typeof g&&(g={});"undefined"===typeof k&&(k={});b.call(this,a,g);this.schema=c;this.requiresSession=h;this.settings=g;this.adapterSettings=k;this.altSessionParams=e;k.requiresSession=h}__extends(e,b);e.prototype.run=function(d){var c=this,h=function(){b.prototype.run.call(c,d);(new a._.ServerApiRequest(c,d)).start()};d.ignoreApiQueue?h():a.utils.queue.queueForExecution("API",function(){h()})};return e}(a._.BaseApi);
f.ServerApi=b})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){function b(){return a.utils.object.clone({status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:""})}var l;a.events.global.add("onFBCRefreshed",function(){l=!1},"component");var e=function(){function d(c,b){this.api=c;this.params=a.utils.object.merge([a.utils.object.clone(b),c.settings.defaultParams]);this.originalParams=a.utils.object.clone(b);this.callback=b.callback}d.prototype.start=function(){var c=this;a._.apiAdapter.isSessionValid(this.params,
function(b){!c.api.adapterSettings.requiresSession||b||c.doesHaveAltSessionParam()?c.sendRequest(b):c.afterServerApiResponse(a.utils.object.clone({status:"FAIL",errorMessage:"Unauthorized user",statusMessage:"Unauthorized user",errorCode:403005}),!1)})};d.prototype.sendRequest=function(c){var b=this,d=a.utils.object.merge([this.api.adapterSettings,{cacheTimeout:this.params.cacheTimeout}]);this.beforeRequest(c,function(k){k?b.afterServerApiResponse(k,c):(a.events.global.dispatch({eventName:"beforeRequest",
methodName:b.api.methodName,rawParams:b.originalParams,params:b.params},b.originalParams),b.api.settings.oauth?a._.apiAdapter.sendOauthRequest(b.api.methodName,b.params,function(a){b.afterServerApiResponse(a,c)},d):a._.apiAdapter.sendRequest(b.api.methodName,b.params,function(a){b.afterServerApiResponse(a,c)},d))})};d.prototype.beforeRequest=function(c,h){var d=this;a.external.backplane.isLoaded()&&!a.external.backplane._ready&&a._.loginMethods[this.api.methodName]?a.external.backplane.executeOnInit(function(){d.beforeRequest(c,
h)}):(-1!=this.api.methodName.indexOf(".logout")&&(!c&&!this.params.regToken||a.partnerSettings.ssoLogoutUrl&&document.location.href==a.partnerSettings.ssoLogoutUrl)&&h(b()),this.handleDeprecatedParams(),this.handleCollections(),this.handleConnectWithoutLoginBehavior(c),this.params.extraPermissions=this.params[this.params.provider+"ExtraPermissions"]||this.params.permissions,this.api.preprocessRequest(this.params,function(){d.setOverridableParams(function(){d.setNonOverridableParams(c,function(){d.filterParams(d.params);
a.log.logCall(d.api.methodName,d.originalParams,d.originalParams.lastSource);h()})})}))};d.prototype.setOverridableParams=function(c){a.utils.object.merge([{},this.params]);c()};d.prototype.doesHaveAltSessionParam=function(){if(this.api.altSessionParams){for(var a=this.api.altSessionParams.split("|"),b=0;b<a.length;b++)if(this.params[a[b]])return!0;return!1}};d.prototype.setNonOverridableParams=function(c,b){if(null!=this.params.APIKey){var d=a.utils.cookie.get("gltexp_"+this.params.APIKey);null!=
d&&(this.params.loginTokenExp=d)}(d=a.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(c||a._.loginMethods[this.api.methodName])&&(this.params.refUID=d);if(a.providersConfig.facebook&&!l){var d=a.external.facebook.getParams(),k;for(k in d)this.params[k]=d[k];l=!0}0==this.api.methodName.indexOf("accounts.")&&(a.events.global._activeNamespaces.socialize&&null==this.params.includeUserInfo&&(this.params.includeUserInfo=!0),this.params.include=this.params.include?this.params.include+",":"profile,data");
"accounts.getSchema"==this.api.methodName&&(this.params.includeDynamicSchema="clientOnly");(k=a.external.backplane.getChannelId())&&(this.params.bp_channel_url=k);this.params.targetEnv="jssdk";b()};d.prototype.handleDeprecatedParams=function(){this.params.pendingRegistration?this.params.pending_registration=this.params.pendingRegistration:this.params.newUsersPendingRegistration&&(this.params.pending_registration=this.params.newUsersPendingRegistration);!0==this.params.alwaysForceAuthentication&&(this.params.forceAuthentication=
!0);this.params.timestamp&&(this.params.UIDTimestamp=this.params.timestamp,delete this.params.timestamp);this.params.signature&&0==this.api.methodName.indexOf("socialize.")&&(this.params.UIDSig=this.params.signature,delete this.params.signature);this.params.nonce&&(this.params.UIDNonce=this.params.nonce,delete this.params.nonce);this.params.format&&!this.params.dataFormat&&(this.params.dataFormat=this.params.format,delete this.params.format)};d.prototype.handleCollections=function(){this.params.recipients&&
(this.params.recipients=this.extractListOfGIGUIDs(this.params.recipients));if(this.params.friends){var a=this.extractListOfGIGUIDs(this.params.friends);0<this.params.UIDs.length&&(this.params.UIDs+=",");this.params.UIDs+=a}};d.prototype.extractListOfGIGUIDs=function(c){var b=this;switch(typeof c){case "string":return c;case "object":if("undefined"!=typeof c.UID)return c.UID;if(c instanceof a.socialize.Collection){var d=[];c.each(function(a,c){var e=b.extractListOfGIGUIDs(a);null!=e&&""!=e&&d.push(e)});
return d.join(",")}}};d.prototype.handleConnectWithoutLoginBehavior=function(b){if("socialize.addConnection"==this.api.methodName){var d=this.params.connectWithoutLoginBehavior;d&&(d=d.toLowerCase());"loginexistinguser"==d&&(this.params.loginIfExists=!0);b||(this.api=a._.getApi("socialize.login"),"alwayslogin"!=d&&(this.params.temporary_account=!0))}};d.prototype.filterParams=function(b){this.params=a.utils.object.extractProperties(b,{},this.getFullSchema())};d.prototype.getFullSchema=function(){if(null==
this.api.schema)return"";for(var b=(this.api.schema+"|"+a._.defaultApiSchema).split("|"),d=0;d<b.length;d++){var g=b[d];if(-1!=g.toLowerCase().indexOf("[providercapability=")){for(var k=g.toLowerCase().split("=")[1].split("]")[0],g=g.split("]")[1],k=a.socialize.getProvidersForRequiredCapabilities(a.socialize.getProvidersByName("*"),[k]),e=[],l=0;l<k.length;l++)e.push(k[l].name+g);b[d]=e.join("|")}}return b.join("|")};d.prototype.preprocessServerResponse=function(b){b.userInfo&&0!=this.api.methodName.indexOf("accounts.")&&
("string"==typeof b.userInfo&&(b.userInfo=a.utils.JSON.deserialize(b.userInfo)),b.userInfo&&(b=a.utils.object.merge([b.userInfo,b]),b.errorCode=b.userInfo.errorCode,delete b.userInfo));b.accountInfo&&"string"==typeof b.accountInfo&&(b.accountInfo=a.utils.JSON.deserialize(b.accountInfo),b.accountInfo&&(b=a.utils.object.merge([b.accountInfo,b]),delete b.accountInfo));try{b.settings&&"string"==typeof b.settings&&(b.settings=a.utils.JSON.deserialize(b.settings))}catch(d){}return b};d.prototype.onAfterLogoutMethod=
function(){a.external.backplane.resetChannel()};d.prototype.getExpiredSessionResponse=function(c){switch(this.api.methodName){case "socialize.setUserSettings":this.originalParams.disableLocalSettings||(a._.setGigyaSettings(this.params.group,this.params.settings),c=b());break;case "socialize.delUserSettings":this.originalParams.disableLocalSettings||(a._.delGigyaSettings(this.params.group,this.params.settings),c=b());break;case "socialize.getUserSettings":if(!this.originalParams.disableLocalSettings){var d=
a._.getGigyaSettings(this.params.group);c=b();c.settings=d}break;case "socialize.getUserInfo":c.status="OK";c.statusMessage="";c.errorCode=0;c.statusCode=0;c.errorMessage="";c.errorDetails="";c.statusReason="";break;case "accounts.logout":case "socialize.logout":c=b()}return c};d.prototype.afterServerApiResponse=function(b,d){var g=this;a._.checkCompleteRegistration(b,this.originalParams,function(k,e,l){b=k;b=g.preprocessServerResponse(b);if(a._.logoutMethods[g.api.methodName]&&0==b.errorCode)g.onAfterLogoutMethod();
403005==b.errorCode&&(b=g.getExpiredSessionResponse(b));0==b.errorCode&&(d||a._.loginMethods[g.api.methodName])&&a.utils.cookie.remove("_gigRefUid_"+g.originalParams.APIKey);g.handleMethodResponse(b,function(k){b=k;g.addDefaultResponseProperties(b);a._.handleSpecialFields(b);g.logoutFromProvidersIfNeeded(b,function(){e||g.generateEventsFromResponse(b,d);l?g.sendRequest(d):(a.events.global.dispatch({eventName:"afterResponse",methodName:g.api.methodName,filteredParams:g.params,response:b},g.originalParams),
"function"==typeof g.callback&&(a.log.addLog("Calling callback for "+g.api.methodName+" with this response object",b),g.callback(b)),g.api.settings.postprocessor&&g.api.settings.postprocessor(g.originalParams,b))})})})};d.prototype.addDefaultResponseProperties=function(a){delete a.statusCode;delete a.statusReason;a.errorCode=a.errorCode||0;a.status=a.status||(0==a.errorCode?"OK":"FAIL");a.errorMessage=a.errorMessage||"";a.statusMessage=a.statusMessage||a.errorMessage;a.requestParams=this.originalParams;
a.requestParams.password&&delete a.requestParams.password;a.context=this.originalParams.context;var b=this.api.methodName.split(".")[0];a.operation="socialize"==b?this.api.methodName.split(".")[1]:"/"+this.api.methodName};d.prototype.handleMethodResponse=function(b,d){if(0==b.errorCode)switch(this.api.methodName){case "socialize.postComment":if(b.comment)try{b.comment=a.utils.JSON.deserialize(b.comment)}catch(g){}break;case "gm.getTopUsers":if(a.localInfo.isIE)for(var k=0;k<b.users.length;k++){var e=
b.users[k];e.photoURL&&-1!=e.photoURL.indexOf("apis.live.net")&&(e.photoURL=e.photoURL.replace("https://apis.live.net",document.location.protocol+"//msnproxy.gigya.com"))}break;case "accounts.socialLogin":case "socialize.login":b.newUser=b.x_newUser?!0:!1,delete b.x_newUser;case "socialize.notifyLogin":case "socialize.addConnection":case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "socialize.getUserInfo":delete b.login_token;delete b.expires_in;
delete b.id;b.code&&(b.authCode=b.code,delete b.code);b.authCode||"socialize.notifyLogin"==this.api.methodName&&this.params.authCode||(k=b,b.userInfo&&(k=b.userInfo,delete b.userInfo),-1==this.api.methodName.indexOf("accounts.")?(b={user:k},a.utils.object.extractProperties(k,b,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|settings|context|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|newUser"),b.user.hasOwnProperty("UIDSig")&&(b.signature=b.user.UIDSig),k.profile&&
delete k.profile,k.data&&delete k.data,delete k.status,delete k.statusMessage,delete k.callId,delete k.errorCode,delete k.errorMessage,delete k.errorDetails,delete k.settings,delete k.context):b!=k&&(b.user=k),""==k.age||isNaN(parseInt(k.age))||(k.age=parseInt(k.age)),k.suppressEvents&&(b.suppressEvents=!0),"string"==typeof k.capabilities&&((e=k.capabilities)||(e=""),"object"!=typeof k.capabilities&&(k.capabilities={}),e=e.toLowerCase(),k.capabilities={actions:-1<e.indexOf("actions"),friends:-1<e.indexOf("friends"),
login:-1<e.indexOf("login"),status:-1<e.indexOf("status"),notifications:-1<e.indexOf("notifications"),contacts:-1<e.indexOf("contacts"),photos:-1<e.indexOf("photos")}),a._.convertIdentitiesArrayToObject(k),"string"==typeof k.providers&&(k.providers=k.providers.split(",")),this.params.group&&!b.settings&&(k=a._.getGigyaSettings(this.params.group),b.settings=k));break;case "socialize.getAvailableProviders":e={};for(k=0;k<b.availableProviders.length;k++)e[b.availableProviders[k].name]=b.availableProviders[k];
b.availableProviders=e}"socialize.removeConnection"==this.api.methodName&&0==b.errorCode?a.socialize.getUserInfo(this.originalParams,{callback:function(a){d(a)}}):d(b)};d.prototype.logoutFromProvidersIfNeeded=function(b,d){var g;b.connectedProviders?g=b.connectedProviders.toLowerCase():b.provider&&(g=b.provider.toLowerCase());if(a._.logoutMethods[this.api.methodName]&&g&&!a.utils.validation.isExplicitFalse(this.originalParams.forceProvidersLogout)){var e=g.split(","),l=0,f=!1,m=function(){f||d();
f=!0};window.setTimeout(m,5E3);for(g=0;g<e.length;g++)this.logoutFromProvider(e[g],function(){l++;l==e.length&&m()})}else d()};d.prototype.logoutFromProvider=function(b,d){var g="",e=!1,l=!0;switch(b){case "facebook":if(a.providersConfig.facebook){a.socialize.waitForService({service:"facebook",callback:function(){a.external.facebook.isLoggedIn&&FB.logout?FB.logout(function(){a.external.facebook.refreshSession();d()}):d()}});return}break;case "yahoo":g="https://login.yahoo.com/config/login?.src=fpctx&amp;logout=1&r=";
break;case "google":g="https"==a.thisScript.protocol?"https://google.com/accounts/Logout?r=1":"https://www.google.com/accounts/Logout?r=",e=!0}0==b.indexOf("saml-")&&(g=b.substring(5),g="https://"+(a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:"fidm."+a.partnerSettings.plugins.apiDomain)+"/saml/v2.0/"+this.params.APIKey+"/sp/jsslo?name="+encodeURIComponent(g),e=!0,l=!1);if(g){l&&(g+=(new Date).getTime());var f;if(e){var m=document.createElement("iframe");
m.style.width="30px";m.style.height="10px";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";f=function(a){var b;b=a&&a.srcElement?a.srcElement:a&&a.target?a.target:this;!b.loaded&&b.parentNode&&(b.loaded=!0,d(),window.setTimeout(function(){try{document.body.removeChild(b)}catch(a){}},5E3))};m.addEventListener?(m.addEventListener("load",f,!1),m.addEventListener("error",f,!1)):m.attachEvent&&(m.attachEvent("onload",f),m.attachEvent("onerror",f),m.onerror=m.onload=m.onreadystatechange=
function(a){m.readyState&&"loaded"!=m.readyState&&"complete"!=m.readyState||f(a)},m.onerror=f);m.src=g;a.utils.DOM.appendToBody(m)}else e=new Image,f=function(){this.loaded||(this.loaded=!0,d())},e.onload=f,e.onerror=f,e.src=g}else d()};d.prototype.generateEventsFromResponse=function(b,d){var g=this,e;if(0==b.errorCode)switch(this.api.methodName){case "accounts.logout":case "socialize.logout":case "socialize.unlinkAccounts":case "socialize.deleteAccount":e={eventName:"logout,accounts.logout"};break;
case "socialize.linkAccounts":case "socialize.setUID":a._.addUserInfoToEvent(b,e,!0);break;case "socialize.removeConnection":e={eventName:"connectionRemoved,disconnect",provider:this.params.provider||""};a._.addUserInfoToEvent(b,e);break;case "socialize.addConnection":!d&&b.user.isLoggedIn?(e={eventName:"login",provider:this.params.provider},a._.addUserInfoToEvent(b,e,!0)):(e={eventName:"connectionAdded,connect",provider:this.params.provider},a._.addUserInfoToEvent(b,e));break;case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "accounts.socialLogin":this.dispatchAccountsLoginEvent(b);
case "socialize.finalizeRegistration":case "socialize.register":case "socialize.login":if(!b.user&&!b.authCode)break;e={eventName:"login"};var l=this.params.provider;if(!l&&b.providerSessions)for(var f in b.providerSessions){l=f;break}e.provider=l||"site";e.loginMode=this.originalParams.loginMode||"standard";b.authCode&&(e.authCode=b.authCode);a._.addUserInfoToEvent(b,e,!0);b.user&&l&&(l=l.toLowerCase(),a.utils.cookie.set("_gig_llp",l),a.utils.cookie.set("_gig_llu",b.user.firstName||""));break;case "socialize.notifyLogin":this.params.authCode||
(e||(e={eventName:"login"}),e.provider="site",a._.addUserInfoToEvent(b,e,!0));break;case "gm.notifyAction":a.events.global.dispatch({eventName:"actionNotified",isInternal:!0})}a._.loginMethods[this.api.methodName]&&this.originalParams.redirectURL&&e&&e.user&&0==b.errorCode&&a.utils.redirect(this.originalParams.redirectURL,[e,e.user],this.originalParams.redirectMethod);0==b.errorCode&&e&&"login"==e.eventName&&!b.profile&&a.events.global._activeNamespaces.accounts&&-1==this.api.methodName.indexOf("accounts")&&
a.accounts.getAccountInfo(this.originalParams,{include:"profile,data",includeUserInfo:!1,callback:function(a){g.dispatchAccountsLoginEvent(a)}});null!=e&&(e.context=this.originalParams.context,a.events.global.dispatch(e,this.originalParams))};d.prototype.dispatchAccountsLoginEvent=function(b){var d={eventName:"accounts.login",remember:a.utils.validation.isExplicitTrue(this.originalParams.remember),provider:this.originalParams.provider?this.originalParams.provider.toLowerCase():""};a.utils.object.extractProperties(b,
d,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");a.events.global.dispatch(d,this.originalParams)};return d}();f.ServerApiRequest=e})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){f.__pluginsCoreLoaded=!1;var b={showReactionsBarUI:["barID"],showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID","chatID"]},l=function(e){function d(a,b,d,k,l,f){"undefined"===typeof d&&(d={});"undefined"===typeof k&&(k={});"undefined"===typeof l&&(l="");"undefined"===typeof f&&(f={});e.call(this,f.apiName||b.split(".")[0]+"."+a,f);this.methodName=a;this.jsName=b;this.settings=f;f.defaultParams=d||{};f.defaultPopupParams=k||{};
f.requiredParams=l||""}__extends(d,e);d.createApi=function(a,b,e,l,f,n){f||(f={});f.useBasePlugin=!0;a=new d(a,l,null,null,null,f);a.namespace=b;a.className=e;a.instanceMethods=n||[];a.addInstanceMethodAliases();return a};d.prototype.addInstanceMethodAliases=function(){for(var b=this,d=0;d<this.instanceMethods.length;d++){var e=this.instanceMethods[d];a.utils.functions.createAlias("gigya."+this.namespace+"."+e,function(d,h){if(b.injectionInfo&&b.injectionInfo.instanceMethods[e]){var l=a._.plugins.getPluginInstance(d,
b.injectionInfo.methodName);if(l instanceof b.pluginType)b.injectionInfo.instanceMethods[e](l,h)}})}};d.prototype.preprocessRequest=function(a,b){var d=this;e.prototype.preprocessRequest.call(this,a,function(){a.source||d.setSourceData(a);b&&b()})};d.prototype.run=function(b){var d=this;!this.settings.waitForAPIQueue||b.ignoreApiQueue?this.startUI(b):a.utils.queue.queueForExecution("API",function(){d.startUI(b)})};d.prototype.startUI=function(b){var d=this;e.prototype.run.call(this,b);b=a.utils.object.clone(b);
this.prepareParameters(b);this.preprocessRequest(b,function(){d.settings.useBasePlugin?d.loadPluginJS(b,function(e){a.utils.queue.queueForExecution("UI",function(){e&&d.className&&(d.pluginType=eval("gigya._.plugins."+d.className),d.injectionInfo=d.pluginType.injectionInfo());var l=function(){d.startPlugin(b)};!1==b.waitForDebug?l():a.utils.queue.queueForExecution("debug",l)})}):d.legacyStartUI(b)})};d.prototype.startPlugin=function(b){a.events.global.dispatch({eventName:"beforePluginRequest",methodName:this.methodName,
params:b},b);a.log.logCall(this.methodName,b);a.reports.reportLoad(this.methodName,b);if(this.pluginType){if(b){var d=a._.plugins.getPluginInstance(b.containerID,this.injectionInfo.methodName);d&&d.dispose&&d.dispose()}b=new this.pluginType(b);a._.plugins.setPluginInstance(b.containerID,b)}else a.utils.functions.callFunction("gigya."+this.jsName+"."+this.methodName,[b,b,b])};d.prototype.loadPluginJS=function(b,d){if(this.wasPluginJSLoaded(b))d&&d(!1);else{var e=a._.getCdnResource("/js/"),l=!1,r="gigya.services."+
this.jsName;f.__pluginsCoreLoaded?e+=r+".min.js"+(b.lang?"?lang="+b.lang:""):(e+="gigya.services.plugins.base.min.js?services="+r+(b.lang?"&lang="+b.lang:""),l=f.__pluginsCoreLoaded=!0,a.utils.queue.hold("pluginsJS","UI"));a.utils.script.load(e,null,function(){l&&a.utils.queue.release("pluginsJS","UI");d&&d(!0)},!0)}};d.prototype.wasPluginJSLoaded=function(b){var d="gigya."+this.jsName+"."+this.methodName,e="gigya.services."+this.jsName+".js";try{var l=eval(d),f=a.i18n[e][b.lang]}catch(n){return!1}return"undefined"!=
typeof l&&"undefined"!=typeof f};d.prototype.setSourceData=function(a){a.source="socialize.showSimpleShareUI"==this.methodName?"socialize.showShareUI":this.methodName;if(!a.sourceData&&b[this.methodName]){for(var d={},e,l=0;l<b[this.methodName].length;l++){var f=b[this.methodName][l];null!=a[f]&&(e=!0,d[f]=a[f])}e&&(a.sourceData=d)}a.pluginsStack||(a.pluginsStack=[]);a.pluginsStack.push({source:this.methodName});a.lastSource=this.methodName};d.prototype.validateRequiredParams=function(b){for(var d=
this.settings.requiredParams.split("|"),e=0;e<d.length;e++){var l=d[e];if(""!=l&&(null==b[l]||""==b[l]))return a.events.dispatchInvalidParamError(b,l),!1}return!0};d.prototype.setDefaultParams=function(a){var b=!a.containerID||a.isPopup,d;for(d in this.settings.defaultParams)null==a[d]&&(a[d]=b&&this.settings.defaultPopupParams[d]?this.settings.defaultPopupParams[d]:this.settings.defaultParams[d]);if(b)for(d in this.settings.defaultPopupParams)a[d]||(a[d]=this.settings.defaultParams[d])};d.prototype.prepareParameters=
function(b){for(var d in b)-1!=d.toLowerCase().indexOf("provider")&&"string"==typeof b[d]&&(b[d]=a._.providers.replaceProviderAliases(b[d]));b.lang||(b.lang=a.thisScript.lang.langCode)};d.prototype.legacyStartUI=function(b){var d=this,e=b.containerID;if(this.settings.ignoreContainerId)e=b.containerID="";else if(null==b.containerID&&!this.settings.allowPopup||b.containerID&&!document.getElementById(b.containerID)){a.events.dispatchInvalidParamError(b,"containerID");return}b.source?b.isPopup=!1:this.setSourceData(b);
var l=this.settings.allowPopup&&(!e||b.isPopup);l&&this.settings.useNewModal&&(b.useNewModal=!0);this.setDefaultParams(b);this.settings.allowPopup||l||a.utils.DOM.clearByID(e);this.validateRequiredParams(b)&&this.loadPluginJS(b,function(){var e=function(){d.prepareContainer(b,l,function(){d.startPlugin(b)})};a.utils.queue.queueForExecution("UI",function(){!1==b.waitForDebug?e():a.utils.queue.queueForExecution("debug",e)})})};d.prototype.prepareContainer=function(b,d,e){var l=this;if(document.body){var f=
b.containerID;d&&(f=a.utils.DOM.getCenteredDivID(this.methodName),b.newModal&&(f+=(new Date).getTime()),b.containerID=f,b.isPopup=!0,document.getElementById(f)||a.utils.DOM.createTopLevelDiv(f));var n=document.getElementById(f);if(n){var m=n.Reqs?n.Reqs:n.Reqs=[],t=m.length+"@0@"+f;b.rid=t;m[m.length]={rid:t,container:n,method:this.methodName,context:b.context,c:b,p:b,i:b,operation:this.methodName,isHTML:!0};if(n&&n.style){n.style.display="";n.style.visibility="";if(f=document.getElementById("gigya_ifr_"+
f))f.style.display="",f.style.visibility="";null!=f&&(a.utils.DOM.setSize(f,b.width,b.height,d),f.style.visibility="visible");a.utils.DOM.setSize(n,b.width,b.height,d)}f=this.methodName.split(".").pop();n.setAttribute&&n.setAttribute("gigid",(b.source&&b.source!=f?b.source+"_":"")+f)}else a.events.dispatchInvalidParamError(b,"containerID");e()}else window.setTimeout(function(){l.prepareContainer(b,d,e)},200)};return d}(a._.BaseApi);f.UiApi=l})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.instances={};a.getPluginInstance=function(l,e){return a.instances[l||"gigya-modal-plugin-container-"+e]};a.setPluginInstance=function(l,e){a.instances[l]=e};a.removePluginInstance=function(l){delete a.instances[l]}})(a.plugins||(a.plugins={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(b){b.registerPlugin=function(b){a.utils.queue.queueForExecution("UI",b)};b.attachPlugin=function(b,e,d,c){e||(e="socialize");a[e]||(a[e]={});a[e].plugins||(a[e].plugins={});a[e].plugins[d]||(a[e].plugins[d]={instances:[]});var h=a[e].plugins[d];h[c]||(h[c]=function(a){a=new b(a,"gigya."+e+".plugins."+d+".instances["+h.instances.length+"]");h.instances.push(a)});if(b.StaticApi)for(var g in b.StaticApi)a.utils.functions.createAlias("gigya."+e+".plugins."+d+"."+g,
b[b.StaticApi[g]])}})(f.UI||(f.UI={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){a.socialize.addEventHandlers=function(){for(var b=0;b<arguments.length-0;b++);var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),c=b.namespace?b.namespace:"socialize",e;for(e in b)0==e.indexOf("on")&&a.events.global.add(e,b[e],b.listenerType,b.context,c);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:b.context})};a.accounts.addEventHandlers=function(){for(var b=0;b<arguments.length-
0;b++);b=a.utils.object.merge([arguments,{namespace:"accounts"}]);a.socialize.addEventHandlers(b)};a.socialize.isLoggedIn=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.socialize.getUserInfo(b,{callback:function(c){var e=c.user,e={loggedIn:e?a.utils.validation.isExplicitTrue(e.isLoggedIn):!1};a.utils.object.extractProperties(c,e,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|context");b.callback&&b.callback(e)}})};a.socialize.waitForService=function(){var b=
a.utils.object.merge([a.thisScript.globalConf,arguments]),c=b.service;if(c){var c=c.toLowerCase(),e=b.callback;if("fbconnect"==c||"facebook"==c)a.external.facebook.isLoaded()?e({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onFacebookLoaded:e,context:b.context});"googleplus"==c&&(a.external.googlePlus.isLoaded()?e({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onGooglePlusLoaded:e,context:b.context}))}};var b={facebook:{w:640,h:370},twitter:{w:880,
h:585},messenger:{w:710,h:905},linkedin:{w:560,h:500},yahoobookmarks:{w:840,h:975},digg:{w:1010,h:1045},delicious:{w:890,h:905},googlebookmarks:{w:710,h:905},mixi:{w:640,h:470},googleplus:{w:496,h:420}};a.socialize.postBookmark=function(){var d=a.utils.object.merge([a.thisScript.globalConf,arguments]);d.APIKey||(d.APIKey=a.thisScript.APIKey);var c={};a.utils.object.extractProperties([d],c,a._.postBookmarkSchema);c.sdk="js_"+a.build.version;if(!c.URL&&!c.url&&c.userAction&&!c.userAction.linkBack)for(var e=
document.getElementsByTagName("meta"),g=0;g<e.length;g++)if("og:url"==e[g].getAttribute("property")&&e[g].getAttribute("content")){c.URL=e[g].getAttribute("content");break}c.URL||c.url||!c.userAction||c.userAction.linkBack||(c.URL=document.location.href);delete c.context;c.provider||(c.provider="");c.providerKey||"facebook"==c.provider.toLowerCase()&&(c.providerKey=a.external.opengraph.getMetaTag("fb:app_id"));a._.apiAdapter.getGmidTicket(function(e){e&&(c.gmidTicket=e);e=a.utils.keyValue.serialize(c);
var h=b[c.provider.toLowerCase()],g=d.enablePopupLocation?"location=1,toolbar=1":null;h&&h.w&&h.h&&(g=(d.enablePopupLocation?"location=1,toolbar=1,":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+h.w+",height="+h.h);a.log.logCall("postBookmark",c);a.utils.win.open(a.utils.stringUtils.format("https://socialize.{0}/gs/bookmark.aspx?{1}",a.partnerSettings.plugins.apiDomain,e),"gs_bookmark_"+c.provider,g)})};a.socialize.refreshUI=function(){var b=a.utils.object.merge([a.thisScript.globalConf,
arguments]),c=b.callback;a.socialize.getUserInfo(b,{callback:function(e){var g={eventName:"login",isInternal:!0};b.provider&&(g.provider=b.provider);a._.addUserInfoToEvent(e,g,!0);b.context&&(g.context=b.context);a.events.global.dispatch(g);"function"==typeof c&&c(e)}})};var l={"digg.com":"digg","stumbleupon.com":"stumbleupon","delicious.com":"delicious","technorati.com":"technorati","t.co":"twitter","plus.url.google.com":"googlePlus","facebook.com":"facebook","linkedin.com":"linkedIn","pinterest.com":"pinterest",
"mixi.jp":"mixi","b.hatena.ne.jp":"hatena","line.me":"line"},e;a.socialize.trackReferrals=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),c={eventName:"linkback",CID:b.cid},h={},g={};-1!=document.location.href.indexOf("#")&&(g=a.utils.keyValue.deserialize(document.location.href.split("#")[1]));-1!=document.location.href.indexOf("?")&&(h=a.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0]));g.guid&&"_"!=g.guid&&a.utils.cookie.set("_gigRefUid_"+
b.APIKey,g.guid);var f=g._giguuid||h._giguuid;f&&a.utils.cookie.set("_gigRefUid_"+b.APIKey,f);if(f=null!=g._gus||null!=h._gus)c.CID=g._gucid||h._gucid,c.shortCode=g._gsc||h._gsc,c.provider=g._gup||h._gup;if(!e){var r,g={url:document.location.href,ref:document.referrer};h.fb_ref?(r=a.utils.keyValue.deserialize(h.fb_ref,":"),g.uuid=r.uu,g.sn=r.p,r=r.s):document.referrer&&-1!=document.referrer.indexOf("://")&&(h=document.referrer.split("://")[1].split("/")[0],0==h.indexOf("www.")&&(h=h.split("www.")[1]),
l[h]&&(c.provider=g.sn=l[h]));g.sn||document.referrer&&(-1!=document.referrer.indexOf("http://soc.li")||-1!=document.referrer.indexOf("https://shr.gs"))||(h=document.location.href.split("#guid="),1<h.length&&(h=h[1].split("#")[0].split("&")[0],h!=a._.apiAdapter.getTokenParam(b.APIKey,"UUID")&&(g.sn="AddressBarShares",g.uuid=h,"_"==h&&delete g.uuid,document.location.replace("#"),a.reports.trackAddressBarShares(),g.url=document.location.href.split("#")[0])));g.uuid&&a.utils.cookie.set("_gigRefUid_"+
b.APIKey,g.uuid);g.sn&&!f&&a.reports.report("linkback",b.APIKey,b.cid,r,null,g);(g.sn||f)&&a.events.global.dispatch(a.utils.object.removeUndefined(c));e=!0}"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",operation:"trackReferrals",context:b.context,errorMessage:"",errorCode:0})};a.socialize.hideUI=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",operation:"hideUI",context:b.context,
errorMessage:"",errorCode:0})};a.gcs.submitUserForm=function(){var b={},c=a.utils.object.merge([a.thisScript.globalConf,arguments]),e=document.getElementById(c.form);if(!e){var g=document.getElementsByName(c.form);g&&0<g.length&&(c.form=g[0])}for(g=0;g<e.elements.length;g++){var f=e.elements[g];if(f.name){for(var l=f.name.split("."),n=b,m=0;m<l.length-1;m++){var t=l[m];n[t]||(n[t]={});n=n[t]}n[l[l.length-1]]=f.value}}c.data=b;a.gcs.setUserData(c)};a.socialize.getProviderShareCounts=function(){var b=
a.utils.object.merge([a.thisScript.globalConf,arguments]);a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.shareCounts.min.js"),null,function(){a.socialize.plugins.shareCounts.getProviderShareCounts(b)},!0)}})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){f.defaultApiSchema="ctag|APIKey|cid|oauth_token|source|sourceData|usePost|refUID|fb_UID|fb_at|fb_exp";f.defaultOauthSchema="ctag|temporary_account|authFlow|connectWithoutLogin|provider|redirectMethod|redirect_uri|pendingRegistration|lang|regSource|extraPermissions|sessionExpiration|forceAuthentication|includeiRank|includeAllIdentities|extraFields|enabledProviders|disabledProviders|signIDs|openIDUsername|openIDURL|openIDProviderLogo|openIDProviderName|finalizeRegistration|include|actionAttributes|profileAttributes|googlePlayAppID|bp_channel_url|loginIfExists|includeUserInfo|redirectURL|authCodeOnly|enablePopupLocation|invite|regToken|loginMode|apiDomain|conflictHandling";f.postBookmarkSchema=
"provider|URL|url|title|description|target|cid|APIKey|shortURLs|source|sourceData|providerKey|thumbnailURL|tags|userAction|[providerCapability=actions]UserAction|actionAttributes|facebookDialogType";f.loginMethods={"socialize.login":1,"socialize.addConnection":1,"socialize.notifyLogin":1,"socialize.linkAccounts":1,"accounts.login":1,"accounts.socialLogin":1,"accounts.linkAccounts":1,"accounts.register":1,"accounts.finalizeRegistration":1};f.logoutMethods={"socialize.logout":1,"accounts.logout":1,
"socialize.deleteAccount":1,"socialize.unlinkAccounts":1};f.arApiList=[new a._.ServerApi("socialize.login",f.defaultOauthSchema,!1,{oauth:!0,defaultParams:{conflictHandling:"saveProfileAndFail"}},{clearSessionCondition:function(a){return"link"!==a.loginMode&&"reAuth"!==a.loginMode},forceHttps:!0}),new a._.ServerApi("socialize.addConnection",f.defaultOauthSchema,!1,{oauth:!0,defaultParams:{conflictHandling:"saveProfileAndFail"}},{forceHttps:!0}),new a._.ServerApi("socialize.requestPermissions",f.defaultOauthSchema,
!1,{oauth:!0},{requiresSession:!0}),new a._.ServerApi("accounts.socialLogin",f.defaultOauthSchema,!1,{oauth:!0,defaultParams:{conflictHandling:"saveProfileAndFail"}},{clearSessionCondition:function(a){return"link"!==a.loginMode&&"reAuth"!==a.loginMode},forceHttps:!0}),new a._.UiApi("showDebugUI","socialize.plugins.debug",{},{},"",{allowPopup:!0}),a._.UiApi.createApi("showRatingUI","comments","rating.RatingPlugin","comments.plugins.rating"),new a._.UiApi("showCommentsUI","comments.plugins.comments",
{width:500},{},"",{preprocessor:function(b,f){2!=b.version&&(b.ctag="comments_v1");2==b.version&&a.utils.browser.isModern()?a.comments.showCommentsUI2(b):f()}}),new a._.UiApi("showCommentsUI","comments.plugins.comments2",{width:500},{},"",{apiName:"comments.showCommentsUI2"}),new a._.UiApi("showShareUI","socialize.plugins.share",{width:520,height:320},{width:595,height:324},"userAction",{allowPopup:!0,preprocessor:function(b,f){var e=b.operationMode;e&&(e=e.toLowerCase().replace(/ /g,""));b.containerID||
(delete b.width,delete b.height);a._.apiAdapter.isSessionValid(b,function(d){"simpleshare"==e||"autodetect"==e&&!d?a.socialize.showSimpleShareUI(b):f()})}}),new a._.UiApi("showLoginUI","socialize.plugins.login",{width:120,height:110},{width:280,height:220},"",{allowPopup:!0}),new a._.UiApi("showLoginUI2","socialize.plugins.login2",{width:120,height:110,UIMode:"login"},{width:280,height:220,UIMode:"login"},"",{allowPopup:!0,useNewModal:!0}),new a._.UiApi("showAddConnectionsUI","socialize.plugins.login",
{width:110,height:65},{width:250,height:200},"",{allowPopup:!0}),new a._.UiApi("showAddConnectionsUI2","socialize.plugins.login2",{width:110,height:65,UIMode:"addConnection"},{width:250,height:200,UIMode:"addConnection"},"",{allowPopup:!0,useNewModal:!0}),new a._.UiApi("showFriendSelectorUI","socialize.plugins.friendSelector",{width:400,height:360},{},"",{allowPopup:!0}),new a._.UiApi("showFeedUI","socialize.plugins.newsfeed",{width:304,height:265}),new a._.UiApi("showChatUI","chat.plugins.chat",
{width:300,height:450},{},"",{preprocessor:function(a,f){a.site&&(a.categoryID=a.site);a.stream&&(a.streamID=a.stream);a.skin&&(a.skinID=a.skin);a.streamID=a.streamID||0;f()}}),new a._.UiApi("showEditConnectionsUI","socialize.plugins.edit",{width:310,height:250},{width:310,height:310},"",{allowPopup:!0}),a._.UiApi.createApi("showEditConnectionsUI2","socialize","editConnections.EditConnectionPlugin","socialize.plugins.editConnections2"),new a._.UiApi("showShareBarUI","socialize.plugins.reactions",
{shareCountCacheTimeout:3E5},{},"userAction|shareButtons"),new a._.UiApi("showReactionsBarUI","socialize.plugins.reactions",{},{},"userAction|barID|reactions",{preprocessor:function(a,f){a.barID||(a.barID=a.itemID);f()}}),new a._.UiApi("showMiniShareUI","socialize.plugins.minishare",{width:320,height:153},{},"",{allowPopup:!0}),new a._.UiApi("showFollowBarUI","socialize.plugins.followbar",{},{},"buttons"),new a._.UiApi("showBookmarkUI","socialize.plugins.bookmark",{width:310,height:250},{width:310,
height:310}),new a._.UiApi("showSimpleShareUI","socialize.plugins.simpleShare",{width:280,height:175},{},"userAction",{allowPopup:!0,dontLoadPluginsCore:!0,waitForAPIQueue:!0}),new a._.UiApi("showShareMobileUI","socialize.plugins.shareMobile",{},{},"userAction",{allowPopup:!0}),new a._.UiApi("showUserStatusUI","gm.plugins.userStatus",{width:300,hidePoints:!1,hideActions:!1},{},"",{requireSession:!0}),new a._.UiApi("showAchievementsUI","gm.plugins.achievements",{width:300,height:100,excludeChallenges:"_default"}),
new a._.UiApi("showChallengeStatusUI","gm.plugins.achievements",{width:300,height:100,challenge:"_default"}),new a._.UiApi("showLeaderboardUI","gm.plugins.leaderboard",{width:300},{},"",{preprocessor:function(a,f){a&&a.height&&(a.height=null);f()}}),new a._.UiApi("showNotifications","gm.plugins.notifications",{},{},"",{preprocessor:function(b,f){var e=a.utils.localStorage.getObject("gmSettings");e&&e.disableNotifications||(b.containerID="gigNotifications",document.getElementById(b.containerID)||(e=
document.createElement("div"),e.id=b.containerID,e.style.position="absolute",e.style.left="-1000px",a.utils.DOM.appendToBody(e)),f())}}),new a._.UiApi("showTfaUI","accounts.plugins.tfa",{width:325}),new a._.UiApi("showScreenSet","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a._.UiApi("hideScreenSet","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a._.UiApi("switchScreen","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new a._.ServerApi("socialize.getAvailableProviders",
"enabledProviders|disabledProviders|requiredCapabilities"),new a._.ServerApi("socialize.notifyLogin","siteUID|UIDTimestamp|UIDSig|UIDNonce|provider|authToken|tokenSecret|regSource|tokenExpiration|sessionHandle|sessionHandleExpiration|userInfo|providerSessions|sessionExpiration|authCode|includeAllIdentitiesincludeiRank|group|settings|extraFields|signIDs|newUser|actionAttributes|profileAttributes|bp_channel_url",!1,void 0,{forceHttps:!0,clearSession:!0}),new a._.ServerApi("socialize.shortenURL","URL"),
new a._.ServerApi("socialize.convertAction","userAction|[providerCapability=actions]UserAction|provider"),new a._.ServerApi("socialize.getReactionsCount","barID|buttonIDs|reportLoad"),new a._.ServerApi("socialize.incrementReactionsCount","barID|buttonID|count|actionAttributes|profileAttributes"),new a._.ServerApi("socialize.deleteAccount",void 0,!0),new a._.ServerApi("socialize.delUserSettings","group|settings",!0),new a._.ServerApi("socialize.getAlbums","type|enabledProviders|disabledProviders",
!0),new a._.ServerApi("socialize.getContacts","enabledProviders|disabledProviders",!0),new a._.ServerApi("socialize.getFriendsInfo","enabledProviders|disabledProviders|detailLevel|UIDs|siteUsersOnly|requiredCapabilities|signIDs",!0),new a._.ServerApi("socialize.getPhotos","enabledProviders|disabledProviders|albumIDs|tags",!0),new a._.ServerApi("socialize.getRawData","provider|UID|fields|dataFormat",!0),new a._.ServerApi("socialize.getSessionInfo","provider|paddingMode|encrypt|signIDs|encryptAll",
!0),new a._.ServerApi("socialize.getUserInfo","enabledProviders|disabledProviders|signIDs|includeiRank|includeAllIdentities|extraFields|group|settings|includeOpenidUID",!0),new a._.ServerApi("socialize.getUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new a._.ServerApi("socialize.getPlaces","enabledProviders|disabledProviders|latitude|longitude|query|radius|unifyResults",!0),new a._.ServerApi("socialize.checkin","enabledProviders|disabledProviders|placeID|comment|latitude|longitude|actionAttributes|profileAttributes",
!0),new a._.ServerApi("socialize.logout","signIDs",!0,{preprocessor:function(b,f){a.partnerSettings.ssoKey&&(b.signIDs=!0);f()}}),new a._.ServerApi("socialize.notifyRegistration","siteUID|UIDTimestamp|UIDSig",!0),new a._.ServerApi("socialize.publishUserAction","userAction|[providerCapability=actions]UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID|userLocation|tags|actionAttributes|profileAttributes",!0),new a._.ServerApi("socialize.removeConnection","provider|lastIdentityHandling|removeLoginID",
!0),new a._.ServerApi("socialize.sendNotification","recipients|body|subject|shortURLs|actionAttributes|profileAttributes",!0),new a._.ServerApi("socialize.setStatus","shortURLs|status|[providerCapability=status]Status|enabledProviders|disabledProviders|userLocation|actionAttributes|profileAttributes",!0),new a._.ServerApi("socialize.setUID","siteUID|UIDTimestamp|UIDSig",!0),new a._.ServerApi("socialize.setUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new a._.ServerApi("socialize.unlinkAccounts",
void 0,!0),new a._.ServerApi("socialize.getFeed","feedID|startTS|endTS|groups|limit|includeUID"),new a._.ServerApi("socialize.sendEmail","dontSendEmail|companyName|lang|emails|emailSubject|emailBody|linkBack|senderEmail|senderName|userMsg|shortURLs|userAction|[providerCapability=actions]UserAction|actionAttributes|profileAttributes|captchaTicket",!1,void 0,{forceHttps:!0}),new a._.ServerApi("socialize.facebookGraphOperation","graphPath|graphParams|authRequired|method|authType"),new a._.ServerApi("socialize.getTopShares",
"age|tag|limit"),new a._.ServerApi("socialize.notifySSOLogin","bp_channel_url"),new a._.ServerApi("gm.getChallengeStatus","UID|includeChallenges|excludeChallenges|details|lang|actionAttributes|profileAttributes"),new a._.ServerApi("gm.resetLevelStatus","challenges|actionAttributes|profileAttributes",!0),new a._.ServerApi("gm.getTopUsers","challenge|totalCount|friendsCount|includeSelf|period|lang|actionAttributes|profileAttributes"),new a._.ServerApi("gm.getChallengeConfig","UID|includeChallenges|excludeChallenges|lang|actionAttributes|profileAttributes|expandActions"),
new a._.ServerApi("gm.notifyAction","action|operation|challengeIDs|actionAttributes|profileAttributes",!0),new a._.ServerApi("comments.postComment","categoryID|streamID|parentID|guestName|guestEmail|commentText|anonymous|mediaItems|privacy|feedID|userAction|[providerCapability=actions]UserAction|scope|enabledProviders|disabledProviders|shortURLs|commentTitle|ratings|tags|taggedUsers|streamTags|actionAttributes|profileAttributes"),new a._.ServerApi("comments.getComments","categoryID|streamID|includeSettings|start|startTS|threadLimit|sort|threaded|threadDepth|includeStreamInfo|includeOpenidUID|includeUID|includeReplies|tags|dataFormat|markupType|includeUserOptions|includeUserComments|includeRatingsDims|includeUserHighlighting"),
new a._.ServerApi("comments.setStreamInfo","categoryID|streamID|streamTitle|streamURL|streamInfoSig|streamTags"),new a._.ServerApi("comments.getTopStreams","categoryID|limit|maxStreamAge|includeLastComment|streamTag|minRatingsCount"),new a._.ServerApi("comments.getTopRatedStreams","categoryID|limit|maxStreamAge|ratingClass|minRatingsCount|streamTag"),new a._.ServerApi("comments.getStreamInfo","categoryID|streamID|streamIDs|includeLastComment|includeRatingsDims|includeRatingDetails"),new a._.ServerApi("comments.flagComment",
"categoryID|streamID|commentID|actionAttributes|profileAttributes"),new a._.ServerApi("comments.vote","categoryID|streamID|commentID|vote|actionAttributes|profileAttributes",!0),new a._.ServerApi("comments.getUserVotes","categoryID|streamID",!0),new a._.ServerApi("comments.getUserComments","categoryID|streamID|tag|senderUID|start|limit|sort|includeReplies|includeStreamInfo|includeUserHighlighting",!0),new a._.ServerApi("comments.getFriendsComments","categoryID|streamID|start|limit|includeUID|sort|includeReplies|includeStreamInfo",
!0),new a._.ServerApi("comments.getThread","categoryID|streamID|commentID|start|includeUID|limit|threadDepth|sort"),new a._.ServerApi("comments.deleteComment","categoryID|streamID|commentID",!0),new a._.ServerApi("comments.getRelatedUsers","categoryID|streamID|parentCommentID|usernamePrefix|limit"),new a._.ServerApi("comments.analyzeMediaItem","categoryID|urls"),new a._.ServerApi("comments.subscribe","categoryID|streamID|email|lang"),new a._.ServerApi("comments.unsubscribe","categoryID|streamID|unsubscribeToken"),
new a._.ServerApi("comments.setUserOptions","replyNotifications|notificationsEmail|notificationsLanguage",!0),new a._.ServerApi("comments.getUserOptions","ServerApiKey",!0),new a._.ServerApi("gcs.getUserData","type|fields",!0),new a._.ServerApi("gcs.setUserData","data|type|updateBehavior",!0),new a._.ServerApi("gcs.search","expTime|querySig|query"),new a._.ServerApi("gcs.getSchema","schemaType"),new a._.ServerApi("chat.getSettings","categoryID|streamID|skinID"),new a._.ServerApi("chat.getMessages",
"categoryID|streamID|start|includeSettings|chatSignature"),new a._.ServerApi("chat.postMessage","categoryID|streamID|messageText|isPrivate|actionAttributes|profileAttributes",!0),new a._.ServerApi("chat.resetChat","categoryID|streamID|timestamp|chatSignature"),new a._.ServerApi("chat.blockUser","categoryID|streamID|UID|chatSignature"),new a._.ServerApi("chat.blockIP","categoryID|streamID|ip|chatSignature"),new a._.ServerApi("chat.deleteMessage","categoryID|streamID|messageId|chatSignature"),new a._.ServerApi("accounts.login",
"loginID|password|sessionExpiration|targetEnv|regToken|include|actionAttributes|profileAttributes|includeUserInfo|includeDynamicSchema|bp_channel_url|captchaToken|captchaText|loginMode",!1,void 0,{clearSessionCondition:function(a){return"link"!==a.loginMode&&"reAuth"!==a.loginMode},forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.linkAccounts","loginID|password|sessionExpiration|targetEnv|include|regToken|includeUserInfo|bp_channel_url",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.initRegistration",
"sdk",!1,void 0,{clearSession:!0}),new a._.ServerApi("accounts.register","username|email|password|UID|regToken|siteUID|secretQuestion|secretAnswer|regSource|profile|data|captchaText|captchaToken|lang|hashedPassword|pwHashAlgorithm|skipVerification|finalizeRegistration|targetEnv|sessionExpiration|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.finalizeRegistration","regToken|targetEnv|include|includeUserInfo|bp_channel_url|allowAccountsLinking"),
new a._.ServerApi("accounts.captchaImage","regToken"),new a._.ServerApi("accounts.importProfilePhoto","regToken|URL|publish"),new a._.ServerApi("accounts.setProfilePhoto","regToken|publish|photoBytes"),new a._.ServerApi("accounts.resetPassword","lang|loginID|passwordResetToken|secretAnswer|securityFields|newPassword|email",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("accounts.isAvailableLoginID","loginID"),new a._.ServerApi("accounts.resendVerificationCode","regToken|email"),new a._.ServerApi("accounts.getCaptcha",
""),new a._.ServerApi("accounts.getPolicies","sections"),new a._.ServerApi("accounts.getSchema","sections|schemaType"),new a._.ServerApi("accounts.getAccountInfo","include|extraProfileFields|regToken",!0,{},{},"regToken"),new a._.ServerApi("accounts.setAccountInfo","profile|data|regToken|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange|conflictHandling",!1,void 0,{forceHttps:!0,forcePost:!0},"regToken"),new a._.ServerApi("accounts.logout",
"signIDs",!0,{preprocessor:function(b,f){a.partnerSettings.ssoKey&&(b.signIDs=!0);f()}}),new a._.ServerApi("accounts.search","expTime|querySig|query"),new a._.ServerApi("accounts.getScreenSets","screenSetIDs|include"),new a._.ServerApi("accounts.getConflictingAccount","regToken|loginID"),new a._.ServerApi("accounts.incrementCounters","counters",!0,{preprocessor:function(a,f){var e=a.actionCounterPath,d=a.counters;if(e&&d)for(var c=0;c<d.length;c++){var h=d[c];"object"!=typeof h||h.path||(h.path=e)}f()}}),
new a._.ServerApi("accounts.getCounters","counters",!0),new a._.ServerApi("accounts.tfa.getProviders","regToken",!0,{},{},"regToken"),new a._.ServerApi("accounts.tfa.initTFA","provider|mode|regToken",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.finalizeTFA","gigyaAssertion|providerAssertion|tempDevice|regToken",!0,{},{},"regToken"),new a._.ServerApi("accounts.tfa.deactivateProvider","provider",!0),new a._.ServerApi("accounts.tfa.unregisterDevice","allDevices",!0),new a._.ServerApi("accounts.tfa.phone.getRegisteredPhoneNumbers",
"gigyaAssertion",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.phone.removePhone","gigyaAssertion|phoneId",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.phone.sendVerificationCode","gigyaAssertion|lang|phoneID|phone|method",!1,{},{forceHttps:!0}),new a._.ServerApi("accounts.tfa.phone.completeVerification","gigyaAssertion|phvToken|code",!1,{},{forceHttps:!0}),new a._.ServerApi("ds.store","type|data|oid|updateBehavior"),new a._.ServerApi("ds.get","type|data|oid|fields"),new a._.ServerApi("ds.search",
"expTime|querySig|query"),new a._.ServerApi("ds.getSchema",""),new a._.ServerApi("ds.delete","type|oid|fields"),new a._.ServerApi("ids.getAccountInfo","include|extraProfileFields",!0),new a._.ServerApi("ids.setAccountInfo","profile|data|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange",!1,void 0,{forceHttps:!0,forcePost:!0}),new a._.ServerApi("ids.search","expTime|querySig|query"),new a._.ServerApi("gscounters.sendReport",
"reports|noAuth")];a.utils.functions.createAlias("gigya.socialize.showChatUI",a.chat.showChatUI);a.utils.functions.createAlias("gigya.socialize.showCommentsUI",a.comments.showCommentsUI);a.utils.functions.createAlias("gigya.socialize.showRatingUI",a.comments.showRatingUI);a.utils.functions.createAlias("gigya.services.socialize",a.socialize);a.utils.functions.createAlias("gigya.services.gcs",a.gcs);a.utils.functions.createAlias("gigya.services.gm",a.gm);a.utils.functions.createAlias("gigya.services.comments",
a.comments);a.utils.functions.createAlias("gigya.services.accounts",a.accounts);a.utils.functions.createAlias("gigya.socialize.connect",a.socialize.addConnection);a.utils.functions.createAlias("gigya.socialize.disconnect",a.socialize.removeConnection);a.utils.functions.createAlias("gigya.socialize.linkAccounts",a.socialize.setUID);a.utils.functions.createAlias("gigya.socialize.showConnectUI",a.socialize.showAddConnectionsUI);a.utils.functions.createAlias("gigya.socialize.showNewsfeedUI",a.socialize.showFeedUI);
a.utils.functions.createAlias("gigya.showDebugUI",a.socialize.showDebugUI)})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a=a._||(a._={});a=a.apiAdapters||(a.apiAdapters={});a.a})(gigya||(gigya={}));
(function(a){(function(f){(function(b){function f(){if("undefined"!=typeof FB){var c=function(c){b.initializedTime=new Date;b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;a.events.global.dispatch({eventName:"FBCRefreshed"})};a.providersConfig.facebook.appID&&FB&&FB.getLoginStatus&&FB.getLoginStatus(c,!0)}}function e(){for(var a=d,b=0;b<a.length;b++)a[b]();d=[]}var d=[];b.initializedTime;b.isLoggedIn=!1;b.isConnected=!1;b.isLoaded=function(){return null!=b.initializedTime};b.load=
function(c){if(!b.initializedTime){b.initializedTime=null;window.setInterval(function(){a.external.facebook.refreshSession()},27E5);window.fbAsyncInit=function(){var d=a.utils.object.clone(a.thisScript.globalConf.facebookInitParams);d||(d={});a.providersConfig.facebook&&(d.appId=a.providersConfig.facebook.appID);d.status=!1;d.cookie=!0;d.xfbml=!0;d.oauth=!0;FB.init(d);!0!=c?FB.getLoginStatus(function(c){b.initializedTime=new Date;b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;
a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected});a.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){f()},onConnect:function(){f()},onLogout:function(){f()}})},!0):(b.initializedTime=new Date,a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected}))};var d=document.createElement("div");d.id="fb-root";a.utils.DOM.appendToBody(d);
a.utils.script.load(document.location.protocol+"//connect.facebook.net/"+a.thisScript.lang.full.replace("-","_")+"/all.js",null,function(){"none"==document.documentElement.style.display&&(document.documentElement.style.display="")},!0)}};b.refreshSession=f;b.retryPending=e;b.runWhenLoaded=function(a){d.push(a)};b.getParams=function(){var a={};if("undefined"!=typeof FB&&FB.getAuthResponse)try{var b=FB.getAuthResponse();b&&(null!=b.userID&&(a.fb_UID=b.userID),null!=b.accessToken&&(a.fb_at=b.accessToken),
null!=b.expiresIn&&(a.fb_exp=b.expiresIn))}catch(d){}return a};b.autoLogin=function(){a.socialize.waitForService({service:"facebook",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){var d=a.external.facebook.getParams();!b&&d&&d.fb_at&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{facebook:{authToken:d.fb_at,tokenExpiresIn:d.fb_exp}}}))})}})};a.events.global.add("facebookLoaded",e,"component");a.events.global.add("onFBCRefreshed",
e,"component")})(f.facebook||(f.facebook={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(b){b.initializedTime;b.isLoaded=function(){return null!=b.initializedTime};b.load=function(){var f=this;if(!b.initializedTime&&a.providersConfig.googlePlus){b.initializedTime=null;var e=document.createElement("script");e.type="text/javascript";e.async=!0;window.__gigya_handleClientLoad=function(){return f.handleClientLoad()};e.src="https://apis.google.com/js/client.js?onload=__gigya_handleClientLoad";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(e,
d)}};b.handleClientLoad=function(){delete window.__gigya_handleClientLoad;b.initializedTime=new Date;a.events.global.dispatch({eventName:"googlePlusLoaded"})};b.refreshSession=function(){};b.autoLogin=function(){a.socialize.waitForService({service:"googlePlus",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){b||gapi.auth.authorize({client_id:a.providersConfig.googlePlus.clientId,scope:a.providersConfig.googlePlus.scopes,immediate:!0,response_type:"code"},function(b){b&&
b.code&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{googlePlus:{code:b.code}}}))})})}})}})(f.googlePlus||(f.googlePlus={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(b){b._ready=null;b.executeOnInit=function(b,e){b&&(e||(e=2E3),a.external.backplane.isLoaded()?a.external.backplane.getChannelId()||a.external.backplane._ready?(a.external.backplane._ready=!0,b()):(window.setTimeout(function(){a.external.backplane._ready||(a.external.backplane._ready=!0,b())},e),Backplane(function(){a.external.backplane._ready=!0;b()})):b())};b.isLoaded=function(){return"undefined"!=typeof Backplane};b.getChannelId=function(){if(a.external.backplane.isLoaded())return Backplane.getChannelID()};
b.resetChannel=function(){a.external.backplane.isLoaded()&&Backplane.resetCookieChannel()};a.events.global.add("logout",a.external.backplane.resetChannel)})(f.backplane||(f.backplane={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.getMetaTag=function(a){for(var b=document.getElementsByTagName("meta"),d=0;d<b.length;d++)if(b[d].getAttribute("property")==a&&b[d].getAttribute("content"))return b[d].getAttribute("content")}})(a.opengraph||(a.opengraph={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(f){(function(a){a[a.LocalStorageListener=0]="LocalStorageListener";a[a.PostMessage=1]="PostMessage";a[a.Flash=2]="Flash"})(f.MessagingMethod||(f.MessagingMethod={}));f.checkCompleteRegistration=function(b,f,e){var d,c;if(!f.dontHandleScreenSet&&(206001==b.errorCode||200010==b.errorCode||206002==b.errorCode||206003==b.errorCode||403101==b.errorCode||403102==b.errorCode||403110==b.errorCode||403100==b.errorCode)){var h;403110==b.errorCode&&(h=c=!0);f.defaultMobileRegScreenSet&&
a.localInfo.isMobile?d=f.defaultMobileRegScreenSet:f.defaultRegScreenSet&&(d=f.defaultRegScreenSet)}d?a.accounts.showScreenSet({newModal:h,initialResponse:b,screenSet:d,onHide:function(a){"finished"===a.reason&&a.user?e({errorCode:0,userInfo:a.user},!0,c):e(b)}}):e(b)};f.getGigyaSettings=function(b){var f=a.utils.localStorage.getItem("gigyaSettings");try{f=a.utils.JSON.deserialize(f)}catch(e){f={}}f||(f={});return a.utils.JSON.serialize(f[b])};f.setGigyaSettings=function(b,f){var e=a.utils.localStorage.getItem("gigyaSettings");
try{e=a.utils.JSON.deserialize(e)}catch(d){e={}}e||(e={});e[b]||(e[b]={});for(var c in f)e[b][c]=f[c];a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(e))};f.delGigyaSettings=function(b,f){if(b){var e=a.utils.localStorage.getItem("gigyaSettings");e&&(e=a.utils.JSON.deserialize(e),delete e[b],a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(e)))}else a.utils.localStorage.removeItem("gigyaSettings")};f.handleSpecialFields=function(b){var f=a.socialize.Collection,
e=function(b,c){for(var d=[],e=0,f=b[e];f;)d.push(new c(f)),d[e].identities&&a._.convertIdentitiesArrayToObject(d[e]),f=b[++e];return d};b.photos&&(b.photos=new f(b.photos,"photoID"));b.albums&&(b.albums=new f(b.albums,"albumID"));b.contacts&&(b.contacts=new f(e(b.contacts,a.socialize.Contact),"email"));b.friend&&(b.friend=new f(e(b.friend,a.socialize.Friend),"UID"));b.user&&(b.user=new a.socialize.User(b.user));if(b.friends&&b.friends instanceof Array){for(var d=[],c=0;c<b.friends.length;c++)d.push(b.friends[c].UID);
b.UIDs=d.join(",");b.friends=new f(e(b.friends,a.socialize.Friend),"UID")}};f.convertIdentitiesArrayToObject=function(b){if(null==b.identities)b.identities={};else if(b.identities.constructor==Array){var f=b.identities;b.identities={};for(var e=0;e<f.length;e++)b.identities[f[e].provider]=new a.socialize.Identity(f[e])}};f.addUserInfoToEvent=function(b,f,e,d){d=b.user||b.userInfo;null==f&&(f={});null!=d&&(f.user=a.utils.object.clone(d),null!=b.isLoggedIn&&(f.user.isLoggedIn=b.isLoggedIn),null!=b.isSiteUID&&
(f.user.isSiteUID=b.isSiteUID),null!=b.iRank&&(f.user.iRank=b.iRank));e&&(a.utils.object.extractProperties(b,f,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID"),null!=f.user&&(f.UID=d.UID,f.isSiteUID=d.isSiteUID));return f};f.sendEmailNative=function(b){var f=b.userAction||{};document.location.href="mailto:?to=&subject="+(f.title||"")+"&body="+(f.linkBack||"");a.socialize.sendEmail(b,{dontSendEmail:!0})}})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){function b(){a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){a.log.showConfig()},!0)}f._log=[];f._isEnabled=function(){return"1"==a.utils.cookie.get("_gig_dbgConsole_log")};f.addLog=function(b,e){if(a.log._isEnabled()){e=a.utils.object.clone(e,!0,!1,4,null,!0);var d=b;null!=e&&(d+=":"+("object"==typeof e?"\n":"")+a.utils.JSON.serialize(e,!0,!0));f._log.push(d);"object"==typeof console&&console.log(d);null!=document.getElementById("gigya_log")&&
a.log.show&&a.log.show()}};f.logCall=function(b,e,d){d||(d=e.lastSource);a.log.addLog("Calling "+b+(d&&d!=b?" for "+d:"")+(e.source&&d!=e.source?" initiated from "+e.source:"")+" with these params",e)};f.debug=b;f.showLog=function(){a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){a.log.show()},!0)};f.show=function(){};f.showConfig=function(){};a.utils.functions.createAlias("gigya.debug",b)})(a.log||(a.log={}))})(gigya||(gigya={}));
var defaultObjects={},defaultObjectsDef={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",
person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false",UserAction:"actorUID,actorNickname,actionName,date|new Date(),targets|[],images|[],actionData1,actionData2,iconURL,title,linkBack,userMessage,description,actionLinks|[],mediaItems|[],subtitle"},createDefaultObject=function(a){var f={};a=defaultObjectsDef[a];-1!=a.indexOf("+")&&(f=createDefaultObject(a.split("+")[0]),
a=a.split("+")[1]);a=a.split(",");for(var b=0;b<a.length;b++){var l="",e=a[b].split("|");if(1<e.length)try{l=gigya.utils.JSON.deserialize(e[1])}catch(d){}f[e[0]]=l||""}return f},_createConstructor=function(a){return function(f){var b=defaultObjects[a],l;for(l in b)this[l]=gigya.utils.object.clone(b[l]);if("object"==typeof f)for(l in f)"function"!=typeof f[l]&&(this[l]=gigya.utils.object.clone(f[l]))}},def;
for(def in defaultObjectsDef)defaultObjects[def]=createDefaultObject(def),gigya.socialize[def]=_createConstructor(def);gigya.socialize.Collection=function(a,f){this.arr=a;this._key=f?f:""};
gigya.socialize.Collection.prototype={asArray:function(){return this.arr},each:function(a){for(var f=0,b=this.arr[f];b;)a(b,f),f++,b=this.arr[f]},getById:function(a){"undefined"==typeof this._hash&&this._buildHash();return(this._hash?this._hash:this.arr)[a]},getSize:function(){return this.arr.length},_buildHash:function(){var a=this._hash={},f=this._key;this.each(function(b,l){a["function"==typeof b[f]?b[f]():b[f]]=b})}};
gigya.socialize.UserAction.prototype={clone:function(){return new gigya.socialize.UserAction(gigya.utils.object.clone(this,!0,!0))},getTemplate:function(){return this.titleTemplate},setTemplate:function(a){this.titleTemplate=a},getActor:function(a){return{UID:this.actorUID,nickname:this.actorNickname}},setActionName:function(a){this.actionName=a;return this},getActionName:function(a){return this.actionName},getTemplateFields:function(){var a=[],f;for(f in this.templateFields)a.push(this.templateFields[f]);
return new gigya.socialize.Collection(a,"fieldName")},setTemplateField:function(a,f,b){this.templateFields[a]={fieldName:a,text:f,href:b};return this},getTemplateField:function(a){return this.templateFields[a]?this.templateFields[a]:null},addTarget:function(a){if("object"==typeof a)return this.targets.push({UID:a.UID,nickname:a.nickname?a.nickname:""}),this;if("string"==typeof a)return this.targets.push({UID:a,nickname:""}),this},addActionLink:function(a,f){this.actionLinks.push({text:a,href:f?f:
""});return this},addMediaItem:function(a){this.mediaItems.push(a);return this},setTitle:function(a){a&&(this.title=a);return this},setLinkBack:function(a){a&&a.toString&&(a=a.toString());a&&(this.linkBack=a);return this},setUserMessage:function(a){this.userMessage=a?a:"";return this},setDescription:function(a){this.description=a?a:"";return this},addImage:function(a,f){this.addMediaItem({type:"image",src:a,href:f})},getImages:function(){return new gigya.socialize.Collection(this.images,"")},getTargets:function(){return new gigya.socialize.Collection(this.targets,
"UID")},setIconURL:function(a){this.iconURL=a;return this},getIconURL:function(){return this.iconURL},getDate:function(){return this.date},setActionData1:function(a){this.actionData1=a;return this},getActionData1:function(a){return this.actionData1},setActionData2:function(a){this.actionData2=a;return this},getActionData2:function(a){return this.actionData2},setSubtitle:function(a){this.subtitle=a;return this},getSubtitle:function(){return this.subtitle}};
(function(a){(function(f){(function(b){function f(a,d){"undefined"===typeof d&&(d=b.arProviders);for(var c=0;c<d.length;c++)if(d[c].name.toLowerCase()==a.toLowerCase())return d[c]}function e(b){if(b){b=b.split(",");for(var d=0;d<b.length;d++){var c=b[d].replace(/^\s+|\s+$/g,"");a._.providers._aliases[c]&&(b[d]=a._.providers._aliases[c])}return b.join(",")}}function d(a,d){"undefined"===typeof d&&(d=b.arProviders);for(var c=0;c<d.length;c++)if(d[c].ID==a)return d[c]}function c(a,b,d){"undefined"===
typeof b&&(b="");"undefined"===typeof d&&(d=a.arProviders);b=b.toLowerCase();b=b.split(" ").join("").split(".").join("").toLowerCase().split(",");b=r(b,d);for(d=0;d<b.length;d++)for(var c=0;c<a.length;c++){var e=a[c];(e=e.name||e.toString())&&(e=e.toLowerCase());e==b[d]&&a.splice(c,1)}return a}function h(a,b){null==b&&(b=[]);for(var d=[],c=0;c<a.length;c++){for(var e=a[c],f=!0,g=0;g<b.length;g++){for(var h=!1,k=0;k<e.arDefaultCapabilities.length;k++)if(e.arDefaultCapabilities[k].toLowerCase()==b[g].toLowerCase()){h=
!0;break}if(!h){f=!1;break}}f&&d.push(e)}return d}function g(){return b.arProviders.concat()}function k(b,d){"undefined"===typeof d&&(d=b.arProviders);b=(""+b).split(" ").join("").split(".").join("").toLowerCase();b=e(b);for(var c=(""+b).split(","),c=r(c,d),g=[],h=0;h<c.length;h++){var k=f(c[h],d);null!=k&&-1==a.utils.array.indexOf(g,k)&&g.push(k)}return g}function r(a,d){d||(d=b.arProviders);for(var c=[],e=0;e<a.length;e++)if("*"==a[e])for(var f=0;f<d.length;f++){for(var g=!1,h=0;h<a.length;h++)a[h].toLowerCase()==
d[f].name.toLowerCase()&&(g=!0);g||d[f].explicitOnly||c.push(d[f].name)}else c.push(a[e]);return c}b._aliases={};var n=function(){function a(d,c,e,f,g,h,k){this.ID=d;this.displayName=c;this.width=e;this.height=f;this.explicitOnly=h;this.aliases=k;this.windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+e+",height="+f;this.arDefaultCapabilities=g.split(",");this.name=c.toLowerCase().split(" ").join("").split("!").join("").split(".").join("").split("+").join("plus");if(k)for(b._aliases||
(b._aliases={}),d=k.split("|"),c=0;c<d.length;c++)b._aliases[d[c]]=this.name;"messenger"==this.name&&(this.displayName="Microsoft");"customopenid"==this.name&&(this.displayName="OpenID")}a.prototype.toString=function(){return this.name};return a}();b.Provider=n;b.arProviders=[new n(64,"Facebook",650,400,"login,friends,places,status,actions,photos,offlineaccess,proxiedemail,checkins,facebookactions"),new n(9012,"Twitter",800,440,"login,friends,notifications,actions,status,places,checkins"),new n(72,
"Google+",560,600,"login,friends,contacts",!1,"google|googleplus"),new n(9042,"LinkedIn",865,450,"login,friends,status,actions,notifications"),new n(9803,"Yahoo",500,567,"login,friends,contacts,notifications"),new n(1047,"Messenger",380,540,"login,contacts",!1,"messenger|microsoft"),new n(9832,"Instagram",440,420,"login,photos"),new n(9222,"Odnoklassniki",888,425,"login"),new n(9003,"Digg",730,590,"login",!0),new n(9007,"FourSquare",1E3,650,"login,friends,places,checkins"),new n(8191,"Renren",450,
350,"login,friends,status,actions"),new n(8203,"QQ",570,460,"login"),new n(9821,"Sina",640,380,"login,status,actions"),new n(4228,"Mixi",1E3,720,"login,friends,actions,photos",!0),new n(9830,"Yahoo! JAPAN",980,700,"login",!0),new n(8205,"Spiceworks",640,380,"login",!0),new n(8190,"Kaixin",610,510,"login,friends"),new n(9041,"VKontakte",610,510,"login,friends,photos,status,actions"),new n(9800,"AOL",530,720,"login"),new n(4096,"WordPress",700,540,"login"),new n(256,"Blogger",760,400,"login"),new n(16,
"LiveJournal",670,360,"login"),new n(1043,"VeriSign",940,500,"login"),new n(1024,"Typepad",730,590,"login"),new n(4120,"OpenID",730,590,"login"),new n(4218,"Netlog",730,590,"login",!0),new n(4222,"SignOn",870,900,"login",!0),new n(4224,"Orange France",730,590,"login",!0),new n(5002,"Livedoor",970,700,"login",!0),new n(8202,"VZnet",610,510,"login"),new n(9216,"Skyrock",610,510,"login,friends,status",!0),new n(5004,"Fox News",730,590,"login",!0),new n(1051,"PayPal",400,550,"login",!0),new n(9058,"Amazon",
785,510,"login",!0),new n(9219,"Xing",785,510,"login,friends",!0),new n(4121,"Custom OpenID",730,590,"login",!0),new n(4122,"Custom SAML",730,590,"login",!0),new n(6002,"Site",730,590,"",!0)];b.getProviderByName=f;b.replaceProviderAliases=e;b.getProviderById=d;b.hideProvidersByName=c;b.getProvidersForRequiredCapabilities=h;b.getAllProviders=g;b.getProvidersByName=k;b.replaceWildcard=r;a.utils.functions.createAlias("gigya.socialize.getAllProviders",g);a.utils.functions.createAlias("gigya.socialize.replaceProviderAliases",
e);a.utils.functions.createAlias("gigya.socialize.getProvidersByName",k);a.utils.functions.createAlias("gigya.socialize._getProviderByName",f);a.utils.functions.createAlias("gigya.socialize.hideProvidersByName",c);a.utils.functions.createAlias("gigya.socialize._getProviderByID",d);a.utils.functions.createAlias("gigya.socialize.getProvidersForRequiredCapabilities",h)})(f.providers||(f.providers={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(f){function b(){for(;f.queue&&0<f.queue.length;){var b=a.utils.object.clone(f.queue.splice(0,5),!0,!0);a.gscounters.sendReport({reports:b,noAuth:!l(b)})}}function l(a){for(var b=0;b<a.length;b++){var c=a[b];if("loadc"!==c.name&&"load"!==c.name||"loadc"===c.name&&c.reportData&&c.reportData.actionCounterPath)return!0}return!1}f.queue;f.trackAddressBarShares=function(){if(a.thisScript.globalConf.trackAddressBarShares){var b=a._.apiAdapter.getTokenParam(a.thisScript.APIKey,"UUID"),
d=document.location.href.split("#");1!=d.length&&""!=d[1]||document.location.replace("#guid="+(b?b:"_"))}};f.report=function(b,d,c,h,g,k,r){"undefined"===typeof k&&(k={});"undefined"===typeof r&&(r=!1);b=a.utils.object.removeUndefined({name:b,time:(new Date).getTime().toString(),source:h,sourceData:g,reportData:k,cid:c});r?(r=[b],a.gscounters.sendReport({reports:r,noAuth:!l(r)})):(f.queue||(f.queue=[]),f.queue.push(b))};f.init=function(){setInterval(b,5E3)};f.reportLoad=function(a,b){if(!b._reportedLoad&&
b.containerID){b._reportedLoad=!0;var c="load";"gigya.socialize.plugins.reactions.showReactionsBarUI"!=a&&("gigya.socialize.plugins.simpleshare.showSimpleShareUI"==a&&(c="loadSimple"),this.report(c,b.APIKey,b.cid,b.source,b.sourceData))}}})(a.reports||(a.reports={}))})(gigya||(gigya={}));
(function(a){a.build||(a.build={version:"",time:""});a.providersConfig||(a.providersConfig={});a.isGigya||(a.isGigya=!0);a.partnerSettings||(a.partnerSettings={authMode:"cookie",baseDomains:"",plugins:{apiDomain:"us1.gigya.com"}});a.thisScript;(function(a){a.autoLoginInProgress})(a._||(a._={}));var f;(function(b){function f(){if(a.abTesting)for(var b in a.abTesting)if("optimizely"===b){var c=a.abTesting[b];if(c.serviceParams&&c.serviceParams.hasOwnProperty("apiKey")){var d=window.location.pathname,
e=!1;if(c.disabledPaths)for(var g=0;g<c.disabledPaths.length;g++)if(-1<c.disabledPaths[g].indexOf(d)){e=!0;break}if(!e)for(g=0;g<c.enabledPaths.length;g++)-1<d.indexOf(c.enabledPaths[g])&&a.utils.script.load("//cdn.optimizely.com/js/"+c.serviceParams.apiKey+".js")}}}function e(b){"1"==a.utils.cookie.get("gig_debug")?a.socialize.showDebugUI({ignoreApiQueue:!0,waitForDebug:!1,onLoad:b}):b()}function d(){a.utils.functions.invokeOnPageLoad(function(){"undefined"!=typeof window.gigya_omniture_conf&&a.utils.script.load(a._.getCdnResource("/js/GenesisExchange_Gigya.min.js"))})}
function c(){var b=a.partnerSettings.baseDomains;if(b)for(var b=b.split(","),c=0;c<b.length;c++){var d=b[c],e=a.localInfo.pageDomain.indexOf(d);if(0<=e&&e==a.localInfo.pageDomain.length-d.length&&(0==e||"."==a.localInfo.pageDomain.charAt(e-1)))return d}return document.location.href.split("://")[1].split("/")[0]}function h(a){a||(a="en-US");a=a.replace("_","-").toLowerCase();var b=a.split("-"),c=b[0],b=1<b.length?b[1]:c,b=b.toUpperCase();switch(a){case "es-mx":case "pt-br":case "zh-cn":case "zh-hk":case "zh-tw":case "te-st":case "fr-inf":case "de-inf":case "es-inf":case "nl-inf":break;
default:a=c}return{full:c+"-"+b,langCode:a,countryCode:b}}function g(b){for(var c=document.getElementsByTagName("script"),d,e=c.length-1;0<=e;e--){var f=c[e],k=f.src.toLowerCase();if(""!=k&&(-1<k.indexOf("//cdn.gigya.com")||-1<k.indexOf("//cdns.gigya.com")||-1<k.indexOf("?apikey="))&&(-1<k.indexOf("gigya.js")||-1<k.indexOf("socialize.js")||-1<k.indexOf("socialize2.js")||-1<k.indexOf("gsjssdk.js"))){d=f;break}}if(d&&!window.__gig_hidescript){var c=d.src.split("/"),e=a.utils.URL.getParamsFromURL(d.src,
!0)||{},l;if(""!=d.innerHTML.replace(/^\s+|\s+$/g,""))try{l=a.utils.JSON.deserialize(d.innerHTML),"object"!=typeof l&&(l={})}catch(m){alert("Gigya global configuration object parse error")}a.thisScript={scriptElement:d,protocol:0==d.src.toLowerCase().indexOf("https")?"https":"http",base:c[0]+"//"+c[2],APIKey:e.apikey,lang:h(e.lang||(l?l.lang:null)),globalConf:a.utils.object.merge([a.partnerSettings.plugins||{},l||{},window.__gigyaConf||{}]),URLParams:e};!a.thisScript.APIKey&&"object"==typeof console&&
console.warn?console.warn("**** WARNING - Loading socialize.js without an APIKey parameter is unsupported and may result in an unexpected behavior.  ****"):a.thisScript.globalConf.APIKey=a.thisScript.APIKey;a.thisScript.globalConf.lang=a.thisScript.lang.langCode;b()}else 10>t?(t++,window.setTimeout(function(){g(b)},200)):(a.thisScript={scriptElement:null,protocol:"http:"==document.location.protocol?"http":"https",base:"https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com",
APIKey:"",lang:h(""),globalConf:{},URLParams:{}},b())}function k(b){var c=window.__gigAPIAdapterSettings;c&&"mobile"==c.getAdapterName()&&c.getAPIKey()==a.thisScript.APIKey?a._.apiAdapter=new a._.apiAdapters.mobile.MobileAdapter:a._.apiAdapter=new a._.apiAdapters.web.WebAdapter;a.utils.functions.createAlias("gigya.auth.loginToken.getTokenParam",a._.apiAdapter.getTokenParam);e(function(){a._.apiAdapter.init(function(){b()})})}function r(){var b=a.utils.URL.getParamsFromURL(document.location.href);
b.errorCode&&b.regToken&&a._.checkCompleteRegistration(b,a.thisScript.globalConf,function(){})}function n(){var b=a.localInfo;b.messagingMethod=b.isIE11||b.isIOSChrome?0:b.supportsPostMessage?1:2}function m(){a.utils.queue.queueForExecution("API",function(){a.utils.functions.invokeOnPageLoad(function(){a.providersConfig.facebook&&a.external.facebook.load(!1);a.providersConfig.googlePlus&&a.external.googlePlus.load()})})}var t=0;(function(){if(window._isAPIProxy)a._.apiAdapters.web.APIProxy.init();
else{a.utils.queue.hold("bootstrap","API");a.partnerSettings.baseDomain=c();var b=a.partnerSettings.plugins,e;e=a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:a.partnerSettings.plugins.apiDomain;b.apiDomain=e;a.reports.init();g(function(){n();a.thisScript.globalConf.customEventMap&&a.events.addMap(a.thisScript.globalConf.customEventMap);k(function(){a.utils.queue.release("bootstrap","API");m();a.thisScript.globalConf.autoLogin&&(a.external.facebook.autoLogin(),
a.external.googlePlus.autoLogin());r();a.reports.trackAddressBarShares();a.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){a.socialize.trackReferrals()},1E3)})});d();f();"function"==typeof onGigyaServiceReady&&onGigyaServiceReady("socialize");var b={sref:document.referrer};a.thisScript.globalConf.actionCounterPath&&(b.actionCounterPath=a.thisScript.globalConf.actionCounterPath);a.reports.report("loadc",a.thisScript.APIKey,null,null,null,b)})}})()})(f||(f={}))})(gigya||(gigya=
{}));


} else if (typeof console == 'object' && console.warn) {
console.warn('**** Socialize.js loaded twice ****');
}
