//     Underscore.js 1.4.4
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

// Copyright 2013 Dataminr

// http://opensource.org/licenses/MIT

// Copyright 2013 Twitter, Inc

// Backbone.Wreqr (Backbone.Marionette)
// ----------------------------------
// v1.3.1
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.wreqr

// Backbone.BabySitter
// -------------------
// v0.1.4
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v1.8.8
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

//
// backbone.stickit - v0.6.3
// The MIT License
// Copyright (c) 2012 The New York Times, CMS Group, Matthew DeLambo <delambo@gmail.com> 
//

// Backbone.Validation v0.8.0
//
// Copyright (c) 2011-2013 Thomas Pedersen
// Distributed under MIT License
//
// Documentation and full license available at:
// http://thedersen.com/projects/backbone-validation

/*!
 * jQuery UI 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */

/*!
 * jQuery UI Widget 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */

/*!
 * jQuery UI Position 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */

/*!
 * jQuery UI Autocomplete 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */

/*
 * jQuery UI Menu (not officially released)
 * 
 * This widget isn't yet finished and the API is subject to change. We plan to finish
 * it for the next release. You're welcome to give it a try anyway and give us feedback,
 * as long as you're okay with migrating your code later on. We can help with that, too.
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Menu
 *
 * Depends:
 *	jquery.ui.core.js
 *  jquery.ui.widget.js
 */

/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery BBQ: Back Button & Query Library
//
// *Version: 1.2.1, Last updated: 2/17/2010*
// 
// Project Home - http://benalman.com/projects/jquery-bbq-plugin/
// GitHub       - http://github.com/cowboy/jquery-bbq/
// Source       - http://github.com/cowboy/jquery-bbq/raw/master/jquery.ba-bbq.js
// (Minified)   - http://github.com/cowboy/jquery-bbq/raw/master/jquery.ba-bbq.min.js (4.0kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Basic AJAX     - http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/
// Advanced AJAX  - http://benalman.com/code/projects/jquery-bbq/examples/fragment-advanced/
// jQuery UI Tabs - http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/
// Deparam        - http://benalman.com/code/projects/jquery-bbq/examples/deparam/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4,
//                   Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-bbq/unit/
// 
// About: Release History
// 
// 1.2.1 - (2/17/2010) Actually fixed the stale window.location Safari bug from
//         <jQuery hashchange event> in BBQ, which was the main reason for the
//         previous release!
// 1.2   - (2/16/2010) Integrated <jQuery hashchange event> v1.2, which fixes a
//         Safari bug, the event can now be bound before DOM ready, and IE6/7
//         page should no longer scroll when the event is first bound. Also
//         added the <jQuery.param.fragment.noEscape> method, and reworked the
//         <hashchange event (BBQ)> internal "add" method to be compatible with
//         changes made to the jQuery 1.4.2 special events API.
// 1.1.1 - (1/22/2010) Integrated <jQuery hashchange event> v1.1, which fixes an
//         obscure IE8 EmulateIE7 meta tag compatibility mode bug.
// 1.1   - (1/9/2010) Broke out the jQuery BBQ event.special <hashchange event>
//         functionality into a separate plugin for users who want just the
//         basic event & back button support, without all the extra awesomeness
//         that BBQ provides. This plugin will be included as part of jQuery BBQ,
//         but also be available separately. See <jQuery hashchange event>
//         plugin for more information. Also added the <jQuery.bbq.removeState>
//         method and added additional <jQuery.deparam> examples.
// 1.0.3 - (12/2/2009) Fixed an issue in IE 6 where location.search and
//         location.hash would report incorrectly if the hash contained the ?
//         character. Also <jQuery.param.querystring> and <jQuery.param.fragment>
//         will no longer parse params out of a URL that doesn't contain ? or #,
//         respectively.
// 1.0.2 - (10/10/2009) Fixed an issue in IE 6/7 where the hidden IFRAME caused
//         a "This page contains both secure and nonsecure items." warning when
//         used on an https:// page.
// 1.0.1 - (10/7/2009) Fixed an issue in IE 8. Since both "IE7" and "IE8
//         Compatibility View" modes erroneously report that the browser
//         supports the native window.onhashchange event, a slightly more
//         robust test needed to be added.
// 1.0   - (10/2/2009) Initial release

/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery hashchange event
//
// *Version: 1.2, Last updated: 2/11/2010*
// 
// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/
// GitHub       - http://github.com/cowboy/jquery-hashchange/
// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js
// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (1.1kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// This working example, complete with fully commented code, illustrate one way
// in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and robust,
// there are a few unfortunate browser bugs surrounding expected hashchange
// event-based behaviors, independent of any JavaScript window.onhashchange
// abstraction. See the following examples for more information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// About: Release History
// 
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.

/*!
	jQuery.kinetic v1.5
	Dave Taylor http://the-taylors.org/jquery.kinetic

	The MIT License (MIT)
	Copyright (c) <2011> <Dave Taylor http://the-taylors.org>
*/

/*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */

/*
 * jQuery SmoothDivScroll 1.3
 *
 * Copyright (c) 2012 Thomas Kahn
 * Licensed under the GPL license.
 *
 * http://www.smoothdivscroll.com/
 *
 * Depends:
 * jquery-1.8.x.min.js
   Please use https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js
   ...or later

 * jquery.ui.widget.js
 * jquery.ui.effects.min.js
   Make your own custom download at http://jqueryui.com/download.
   First deselect all components. Then check just "Widget" and "Effects Core".
   Download the file and put it in your javascript folder.

 * jquery.mousewheel.min.js
   Used for mousewheel functionality.
   Download the latest version at http://brandonaaron.net/code/mousewheel/demos
 *

 * jquery.kinetic.js
   Used for scrolling by dragging, mainly used on touch devices.
   Download the latest version at https://github.com/davetayls/jquery.kinetic
 *
 */

// Snap.svg 0.2.0
//
// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
// build: 2013-12-23
// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
// ┌────────────────────────────────────────────────────────────┐ \\
// │ Eve 0.4.2 - JavaScript Events Library                      │ \\
// ├────────────────────────────────────────────────────────────┤ \\
// │ Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) │ \\
// └────────────────────────────────────────────────────────────┘ \\

// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*! rangeslider.js - v0.2.3 | (c) 2014 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

/**
 * @license
 * Copyright 2014 Eventbrite
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*! dorsal - v0.4.0 - 2014-07-11 */

require.config({paths:{text:"vendor/require-text",hb:"../../node_modules/requirejs-handlebars/hb",backbone_advice:"vendor/backbone.advice-1.0.0",backbone_stickit:"vendor/backbone.stickit-0.6.3",backbone_validation:"vendor/backbone-validation-0.8.0",backbone_babysitter:"../../node_modules/backbone.babysitter/lib/backbone.babysitter",backbone_wreqr:"../../node_modules/backbone.wreqr/lib/backbone.wreqr",underscore:"vendor/underscore-1.4.4",marionette:"../../node_modules/backbone.marionette/lib/backbone.marionette","marionette-1.1":"vendor/backbone.marionette-1.1.0",recaptcha:"recaptcha/recaptcha_ajax","jquery-placeholder":"vendor/jquery.placeholder-2.0.7",jquery_ui:"jqueryui/1.8.14/jquery-ui.min",jquery_autocomplete:"jqueryui/1.8.21/jquery-ui-1.8.21.autocomplete-only",q:"../../node_modules/q/q",dotdotdot:"../../node_modules/dotdotdot/src/js/jquery.dotdotdot",scribe:"vendor/scribe/scribe","scribe-plugin-toolbar":"vendor/scribe/scribe-plugin-toolbar","scribe-plugin-smart-lists":"vendor/scribe/scribe-plugin-smart-lists","scribe-plugin-keyboard-shortcuts":"vendor/scribe/scribe-plugin-keyboard-shortcuts","scribe-plugin-formatter-plain-text-convert-new-lines-to-html":"vendor/scribe/scribe-plugin-formatter-plain-text-convert-new-lines-to-html",dorsal:"../../node_modules/dorsal/dist/dorsal",zeroclipboard:"vendor/ZeroClipboard-1.1.7","zeroclipboard-media":"vendor/zeroclipboard_media",rangeslider:"../../node_modules/rangeslider.js/dist/rangeslider","bootstrap-tooltip":"../../node_modules/eb-styleguide/js/vendor/bootstrap/bootstrap-tooltip-amd",snap:"vendor/snap-0.2.0","magnific-popup":"../../node_modules/magnific-popup/src/js/core","magnific-popup-inline":"../../node_modules/magnific-popup/src/js/inline","magnific-popup-image":"../../node_modules/magnific-popup/src/js/image","magnific-popup-iframe":"../../node_modules/magnific-popup/src/js/iframe",lucidum:"../../node_modules/lucidum/dist/lucidum","kss-search":"../../node_modules/kss-search/dist/index",lunr:"../../node_modules/kss-search/node_modules/lunr/lunr.min",moment:"vendor/moment-2.4.0-with-langs-custom",amcharts:"amcharts/amcharts-2.8.3",eventbrite:"eb/_shims/eb",jquery:"eb/_shims/jquery",backbone:"eb/_shims/backbone",jquery_cookie:"eb/_shims/jquery_cookie",instafeed:"eb/instafeed",gettext:"eb/_shims/gettext"},shim:{backbone_wreqr:{exports:"Backbone.Wreqr"},backbone_babysitter:{exports:"Backbone.BabySitter"},marionette:{deps:["backbone_advice","backbone_wreqr","backbone_babysitter"],exports:"Backbone.Marionette"},"marionette-1.1":{deps:["backbone_advice","backbone_wreqr","backbone_babysitter"],exports:"Backbone.Marionette"},backbone_advice:{exports:"Backbone.Advice"},backbone_validation:{exports:"Backbone.Validation",init:function(){EB.Backbone.Validation=Backbone.Validation}},recaptcha:{exports:"Recaptcha"},underscore:{exports:"_"},"magnific-popup":{deps:["jquery"]},"magnific-popup-inline":{deps:["magnific-popup"]},"magnific-popup-image":{deps:["magnific-popup"]},"magnific-popup-iframe":{deps:["magnific-popup"]},dotdotdot:{deps:["jquery"]},amcharts:{deps:["jquery"],exports:"AmCharts"},instafeed:{exports:"Instafeed"}},map:{"*":{"handlebars.runtime":"handlebars/handlebars"}},packages:[{name:"handlebars",location:"../../node_modules/handlebars/dist/amd",main:"./handlebars"},{name:"templates",location:"../templates"},{name:"eb-styleguide",location:"../../node_modules/eb-styleguide"}],config:{text:{useXhr:function(){return!0}}}}),define("eb/require_base_config",function(){}),function(){var e=this,t=e._,i={},n=Array.prototype,s=Object.prototype,o=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=s.toString,h=s.hasOwnProperty,u=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,b=n.indexOf,_=n.lastIndexOf,y=Array.isArray,w=Object.keys,x=o.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.4.4";var C=k.each=k.forEach=function(e,t,n){if(null!=e)if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var s=0,o=e.length;o>s;s++)if(t.call(n,e[s],s,e)===i)return}else for(var r in e)if(k.has(e,r)&&t.call(n,e[r],r,e)===i)return};k.map=k.collect=function(e,t,i){var n=[];return null==e?n:d&&e.map===d?e.map(t,i):(C(e,function(e,s,o){n[n.length]=t.call(i,e,s,o)}),n)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=k.bind(t,n)),s?e.reduce(t,i):e.reduce(t);if(C(e,function(e,o,r){s?i=t.call(n,i,e,o,r):(i=e,s=!0)}),!s)throw new TypeError(S);return i},k.reduceRight=k.foldr=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=k.bind(t,n)),s?e.reduceRight(t,i):e.reduceRight(t);var o=e.length;if(o!==+o){var r=k.keys(e);o=r.length}if(C(e,function(a,l,c){l=r?r[--o]:--o,s?i=t.call(n,i,e[l],l,c):(i=e[l],s=!0)}),!s)throw new TypeError(S);return i},k.find=k.detect=function(e,t,i){var n;return E(e,function(e,s,o){return t.call(i,e,s,o)?(n=e,!0):void 0}),n},k.filter=k.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(C(e,function(e,s,o){t.call(i,e,s,o)&&(n[n.length]=e)}),n)},k.reject=function(e,t,i){return k.filter(e,function(e,n,s){return!t.call(i,e,n,s)},i)},k.every=k.all=function(e,t,n){t||(t=k.identity);var s=!0;return null==e?s:g&&e.every===g?e.every(t,n):(C(e,function(e,o,r){return(s=s&&t.call(n,e,o,r))?void 0:i}),!!s)};var E=k.some=k.any=function(e,t,n){t||(t=k.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,n):(C(e,function(e,o,r){return s||(s=t.call(n,e,o,r))?i:void 0}),!!s)};k.contains=k.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):E(e,function(e){return e===t})},k.invoke=function(e,t){var i=a.call(arguments,2),n=k.isFunction(t);return k.map(e,function(e){return(n?t:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,i){return k.isEmpty(t)?i?null:[]:k[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return C(e,function(e,s,o){var r=t?t.call(i,e,s,o):e;r>=n.computed&&(n={value:e,computed:r})}),n.value},k.min=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return C(e,function(e,s,o){var r=t?t.call(i,e,s,o):e;r<n.computed&&(n={value:e,computed:r})}),n.value},k.shuffle=function(e){var t,i=0,n=[];return C(e,function(e){t=k.random(i++),n[i-1]=n[t],n[t]=e}),n};var I=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,i){var n=I(t);return k.pluck(k.map(e,function(e,t,s){return{value:e,index:t,criteria:n.call(i,e,t,s)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var D=function(e,t,i,n){var s={},o=I(t||k.identity);return C(e,function(t,r){var a=o.call(i,t,r,e);n(s,a,t)}),s};k.groupBy=function(e,t,i){return D(e,t,i,function(e,t,i){(k.has(e,t)?e[t]:e[t]=[]).push(i)})},k.countBy=function(e,t,i){return D(e,t,i,function(e,t){k.has(e,t)||(e[t]=0),e[t]++})},k.sortedIndex=function(e,t,i,n){i=null==i?k.identity:I(i);for(var s=i.call(n,t),o=0,r=e.length;r>o;){var a=o+r>>>1;i.call(n,e[a])<s?o=a+1:r=a}return o},k.toArray=function(e){return e?k.isArray(e)?a.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:a.call(e,0,t)},k.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var M=function(e,t,i){return C(e,function(e){k.isArray(e)?t?r.apply(i,e):M(e,t,i):i.push(e)}),i};k.flatten=function(e,t){return M(e,t,[])},k.without=function(e){return k.difference(e,a.call(arguments,1))},k.uniq=k.unique=function(e,t,i,n){k.isFunction(t)&&(n=i,i=t,t=!1);var s=i?k.map(e,i,n):e,o=[],r=[];return C(s,function(i,n){(t?n&&r[r.length-1]===i:k.contains(r,i))||(r.push(i),o.push(e[n]))}),o},k.union=function(){return k.uniq(l.apply(n,arguments))},k.intersection=function(e){var t=a.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(n,a.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=a.call(arguments),t=k.max(k.pluck(e,"length")),i=new Array(t),n=0;t>n;n++)i[n]=k.pluck(e,""+n);return i},k.object=function(e,t){if(null==e)return{};for(var i={},n=0,s=e.length;s>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n=0,s=e.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,s+i):i}if(b&&e.indexOf===b)return e.indexOf(t,i);for(;s>n;n++)if(e[n]===t)return n;return-1},k.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(_&&e.lastIndexOf===_)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var s=n?i:e.length;s--;)if(e[s]===t)return s;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=0,o=new Array(n);n>s;)o[s++]=e,e+=i;return o},k.bind=function(e,t){if(e.bind===x&&x)return x.apply(e,a.call(arguments,1));var i=a.call(arguments,2);return function(){return e.apply(t,i.concat(a.call(arguments)))}},k.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},k.bindAll=function(e){var t=a.call(arguments,1);return 0===t.length&&(t=k.functions(e)),C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var i={};return t||(t=k.identity),function(){var n=t.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},k.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(a.call(arguments,1)))},k.throttle=function(e,t){var i,n,s,o,r=0,a=function(){r=new Date,s=null,o=e.apply(i,n)};return function(){var l=new Date,c=t-(l-r);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,r=l,o=e.apply(i,n)):s||(s=setTimeout(a,c)),o}},k.debounce=function(e,t,i){var n,s;return function(){var o=this,r=arguments,a=function(){n=null,i||(s=e.apply(o,r))},l=i&&!n;return clearTimeout(n),n=setTimeout(a,t),l&&(s=e.apply(o,r)),s}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var i=[e];return r.apply(i,arguments),t.apply(this,i)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},k.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)k.has(e,i)&&(t[t.length]=i);return t},k.values=function(e){var t=[];for(var i in e)k.has(e,i)&&t.push(e[i]);return t},k.pairs=function(e){var t=[];for(var i in e)k.has(e,i)&&t.push([i,e[i]]);return t},k.invert=function(e){var t={};for(var i in e)k.has(e,i)&&(t[e[i]]=i);return t},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},k.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in e&&(t[i]=e[i])}),t},k.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var s in e)k.contains(i,s)||(t[s]=e[s]);return t},k.defaults=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)null==e[i]&&(e[i]=t[i])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var A=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var s=c.call(e);if(s!=c.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return n[o]==t;i.push(e),n.push(t);var r=0,a=!0;if("[object Array]"==s){if(r=e.length,a=r==t.length)for(;r--&&(a=A(e[r],t[r],i,n)););}else{var l=e.constructor,h=t.constructor;if(l!==h&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(h)&&h instanceof h))return!1;for(var u in e)if(k.has(e,u)&&(r++,!(a=k.has(t,u)&&A(e[u],t[u],i,n))))break;if(a){for(u in t)if(k.has(t,u)&&!r--)break;a=!r}}return i.pop(),n.pop(),a};k.isEqual=function(e,t){return A(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=y||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return h.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,i){for(var n=Array(e),s=0;e>s;s++)n[s]=t.call(i,s);return n},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};T.unescape=k.invert(T.escape);var P={escape:new RegExp("["+k.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(T.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return T[e][t]})}}),k.result=function(e,t){if(null==e)return null;var i=e[t];return k.isFunction(i)?i.call(e):i},k.mixin=function(e){C(k.functions(e),function(t){var i=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),R.call(this,i.apply(k,e))}})};var F=0;k.uniqueId=function(e){var t=++F+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,i){var n;i=k.defaults({},i,k.templateSettings);var s=new RegExp([(i.escape||N).source,(i.interpolate||N).source,(i.evaluate||N).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(s,function(t,i,n,s,a){return r+=e.slice(o,a).replace(H,function(e){return"\\"+O[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(r+="';\n"+s+"\n__p+='"),o=a+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(t)return n(t,k);var l=function(e){return n.call(this,e,k)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},k.chain=function(e){return k(e).chain()};var R=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];k.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],R.call(this,i)}}),C(["concat","join","slice"],function(e){var t=n[e];k.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this)),define("backbone",["require"],function(){return window.EB.Backbone}),Backbone.Advice={around:function(e,t){return function(){var i=[].slice.call(arguments,0);return t.apply(this,[_.bind(e,this)].concat(i))}},before:function(e,t){return this.around(e,function(){var e,i=[].slice.call(arguments,0),n=i.shift();return e="function"==typeof t?t:t.obj[t.fnName],e.apply(this,i),n.apply(this,i)})},after:function(e,t){return this.around(e,function(){var e,i=[].slice.call(arguments,0),n=i.shift(),s=(n.unbound||n).apply(this,i);return e="function"==typeof t?t:t.obj[t.fnName],e.apply(this,i),s})},clobber:function(e,t){var i=this;if("function"==typeof i&&(i=this.prototype),_.isString(e)){var n=e;e={},e[n]=t}return _.extend(i,e),this},addToObj:function(e){var t=this;return"function"==typeof t&&(t=this.prototype),_.each(e,function(e,i){t[i]=_.extend(_.clone(Backbone.Advice.findVal(t,i))||{},e)}),this},setDefaults:function(e){var t=this;return"function"==typeof t&&(t=this.prototype),_.each(e,function(e,i){Backbone.Advice.findVal(t,i)||(t[i]=e)}),this},findVal:function(e,t){for(;!e[t]&&e.prototype;)e=e.prototype;return e[t]},mixin:function(e,t){return this.mixedIn=_.clone(this.mixedIn)||[],this.__super__&&this.mixedOptions!=this.__super__.constructor.mixedOptions||(this.mixedOptions=_.clone(this.mixedOptions)||{}),_.extend(this.mixedOptions,t),_.isArray(e)||(e=[e]),e=_(e).map(function(e){return _.isFunction(e)?!_.contains(this.mixedIn,e)&&(this.mixedIn.push(e),e)?e.call(this,this.mixedOptions):void 0:e},this),_(e).each(function(e){e&&(e=_.clone(e),_(["mixin","around","after","before","clobber","addToObj","setDefaults"]).each(function(t){e[t]&&("mixin"==t?this[t](e[t],this.mixedOptions):this[t](e[t]),delete e[t])},this),_.each(_.keys(e),function(t){if(_.isFunction(e[t]))this.after(t,e[t]);else if(_.isObject(e[t])&&!_.isArray(e[t])){var i={};i[t]=e[t],this.addToObj(i)}else this.clobber(t,e[t])},this))},this),this},hasMixin:function(e){var t=this.mixedIn||this.constructor.mixedIn;return _.contains(t,e)},addMixin:function(e){["before","after","around"].forEach(function(t){e[t]=function(e,i){if("object"==typeof e)return _.each(_.keys(e),function(i){this[t](i,e[i])},this),this;var n=this;"function"==typeof n&&(n=this.prototype);var s=Backbone.Advice.findVal(n,e);return"function"!=typeof s&&(s=_.identity),n[e]=Backbone.Advice[t](s,i),this}}),e.mixin=Backbone.Advice.mixin,e.addToObj=Backbone.Advice.addToObj,e.setDefaults=Backbone.Advice.setDefaults,e.findVal=Backbone.Advice.findVal,e.clobber=Backbone.Advice.clobber,e.prototype.hasMixin=e.hasMixin=Backbone.Advice.hasMixin}},Backbone.Advice.addMixin(Backbone.View),Backbone.Advice.addMixin(Backbone.Model),Backbone.Advice.addMixin(Backbone.Collection),define("backbone_advice",function(e){return function(){var t;return t||e.Backbone.Advice}}(this)),function(e,t){if("function"==typeof define&&define.amd)define("backbone_wreqr",["backbone","underscore"],function(e,i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(i,n)}else t(e.Backbone,e._)}(this,function(e,t){var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),i}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,i,n){var s=this.storage.getCommands(e);t.each(s.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(){var i=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var s="vent"===e?"on":"setHandler";t.each(i,function(i,o){this[e][s](o,t.bind(i,n))},this)}}}),i}(n),n.radio=function(e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(n[e],function(t){this[e][t]=s(this,e,t)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},s=function(e,t,i){return function(n){var s=e._getChannel(n)[t],o=Array.prototype.slice.call(arguments,1);return s[i].apply(s,o)}};return new i}(n),e.Wreqr}),function(e,t){if("function"==typeof define&&define.amd)define("backbone_babysitter",["backbone","underscore"],function(e,i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(i,n)}else t(e.Backbone,e._)}(this,function(e,t){var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer});var Marionette=function(e,t,i){function n(e,t){var i=new Error(e);throw i.name=t||"Error",i}!function(e,t){var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer}(t,i),function(e,t){var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),i}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,i,n){var s=this.storage.getCommands(e);t.each(s.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(){var i=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var s="vent"===e?"on":"setHandler";t.each(i,function(i,o){this[e][s](o,t.bind(i,n))},this)}}}),i}(n),n.radio=function(e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(n[e],function(t){this[e][t]=s(this,e,t)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},s=function(e,t,i){return function(n){var s=e._getChannel(n)[t],o=Array.prototype.slice.call(arguments,1);return s[i].apply(s,o)}};return new i}(n),e.Wreqr}(t,i);var s={};t.Marionette=s,s.$=t.$;var o=Array.prototype.slice;return s.extend=t.Model.extend,s.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},s.normalizeMethods=function(e){var t,n={};return i.each(e,function(e,s){t=e,i.isFunction(t)||(t=this[t]),t&&(n[s]=t)
},this),n},s.normalizeUIKeys=function(e,t){return"undefined"!=typeof e?(i.each(i.keys(e),function(i){var n=/@ui.[a-zA-Z_$0-9]*/g;i.match(n)&&(e[i.replace(n,function(e){return t[e.slice(4)]})]=e[i],delete e[i])}),e):void 0},s.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),s=[e].concat(i.toArray(arguments));return i[n].apply(i,s)}})},s.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,n=function(n){var s="on"+n.replace(t,e),o=this[s];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(o)?o.apply(this,i.tail(arguments)):void 0};return n}(),s.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,s(e)}function n(e){e._isRendered=!0,s(e)}function s(e){e._isShown&&e._isRendered&&o(e)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function o(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){n(e)})}}(document.documentElement),function(e){function t(e,t,s,o){var r=o.split(/\s+/);i.each(r,function(i){var o=e[i];o||n("Method '"+i+"' was configured as an event handler, but does not exist."),e.listenTo(t,s,o)})}function s(e,t,i,n){e.listenTo(t,i,n)}function o(e,t,n,s){var o=s.split(/\s+/);i.each(o,function(i){var s=e[i];e.stopListening(t,n,s)})}function r(e,t,i,n){e.stopListening(t,i,n)}function a(e,t,n,s,o){t&&n&&(i.isFunction(n)&&(n=n.call(e)),i.each(n,function(n,r){i.isFunction(n)?s(e,t,r,n):o(e,t,r,n)}))}e.bindEntityEvents=function(e,i,n){a(e,i,n,s,t)},e.unbindEntityEvents=function(e,t,i){a(e,t,i,r,o)}}(s),s.Callbacks=function(){this._deferred=s.$.Deferred(),this._callbacks=[]},i.extend(s.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,n){t&&(i=t),e.call(i,n)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=s.$.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),s.Controller=function(e){this.triggerMethod=s.triggerMethod,this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},s.Controller.extend=s.extend,i.extend(s.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e)),this.off()}}),s.Region=function(e){if(this.options=e||{},this.el=s.getOption(this,"el"),this.el||n("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},i.extend(s.Region,{buildRegion:function(e,t){var s=i.isString(e),o=i.isString(e.selector),r=i.isUndefined(e.regionType),a=i.isFunction(e);a||s||o||n("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;s&&(l=e),e.selector&&(l=e.selector,delete e.selector),a&&(c=e),!a&&r&&(c=t),e.regionType&&(c=e.regionType,delete e.regionType),(s||a)&&(e={}),e.el=l;var h=new c(e);return e.parentEl&&(h.getEl=function(t){var n=e.parentEl;return i.isFunction(n)&&(n=n()),n.find(t)}),h}}),i.extend(s.Region.prototype,t.Events,{show:function(e,t){this.ensureEl();var n=t||{},o=e.isClosed||i.isUndefined(e.$el),r=e!==this.currentView,a=!!n.preventClose,l=!a&&r;return l&&this.close(),e.render(),s.triggerMethod.call(this,"before:show",e),i.isFunction(e.triggerMethod)?e.triggerMethod("before:show"):s.triggerMethod.call(e,"before:show"),(r||o)&&this.open(e),this.currentView=e,s.triggerMethod.call(this,"show",e),i.isFunction(e.triggerMethod)?e.triggerMethod("show"):s.triggerMethod.call(e,"show"),this},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return s.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),s.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),s.Region.extend=s.extend,s.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var n={};return i.each(e,function(e,s){i.isString(e)&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var o=this.addRegion(s,e);n[s]=o},this),n},addRegion:function(t,n){var s,o=i.isObject(n),r=i.isString(n),a=!!n.selector;return s=r||o&&a?e.Region.buildRegion(n,e.Region):i.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,s),this.triggerMethod("region:add",t,s),s},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){i.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){i.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),t.stopListening(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=i.size(this._regions)}});return e.actAsCollection(t.prototype,"_regions"),t}(s),s.TemplateCache=function(e){this.templateId=e},i.extend(s.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new s.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=o.call(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(s.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=s.$(e).html();return t&&0!==t.length||n("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return i.template(e)}}),s.Renderer={render:function(e,t){e||n("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof e?e:s.TemplateCache.get(e))(t)}},s.View=t.View.extend({constructor:function(e){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(i.result(this,"events")),i.isObject(this.behaviors)&&new s.Behaviors(this),t.View.prototype.constructor.apply(this,arguments),s.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:s.triggerMethod,normalizeMethods:s.normalizeMethods,getTemplate:function(){return s.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=s.getOption(this,"templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"ui");return s.normalizeUIKeys(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,function(t,n){var s=i.isObject(t),o=s?t.event:t;e[n]=function(e){if(e){var i=e.preventDefault,n=e.stopPropagation,r=s?t.preventDefault:i,a=s?t.stopPropagation:n;r&&i&&i.apply(e),a&&n&&n.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),s.bindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.bindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,i.isFunction(e)&&(e=e.call(this));var n={},s=i.result(this,"behaviorEvents")||{},o=this.configureTriggers();i.extend(n,s,e,o),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),s.unbindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.unbindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=Array.prototype.slice.call(arguments),t=this.triggerMethod.apply(this,["before:close"].concat(e));t!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(e)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),s.ItemView=s.View.extend({constructor:function(){s.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=s.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),s.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),s.CollectionView=s.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),s.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(e){i.isFunction(e.triggerMethod)?e.triggerMethod("show"):s.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,t,i)},onShowCalled:function(){this.children.each(function(e){i.isFunction(e.triggerMethod)?e.triggerMethod("show"):s.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return s.getOption(this,"emptyView")},getItemView:function(){var e=s.getOption(this,"itemView");return e||n("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,n){var o=s.getOption(this,"itemViewOptions");i.isFunction(o)&&(o=o.call(this,e,n));var r=this.buildItemView(e,t,o);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,n),this._isShown&&!this.isBuffering&&(i.isFunction(r.triggerMethod)?r.triggerMethod("show"):s.triggerMethod.call(r,"show")),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(e){var t=s.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=o.call(arguments),r=n[0],a=this.normalizeMethods(this.getItemEvents());n[0]=t+":"+r,n.splice(1,0,e),"undefined"!=typeof a&&i.isFunction(a[r])&&a[r].apply(this,n),s.triggerMethod.apply(this,n)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,n){var s=i.extend({model:e},n);return new t(s)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(e.close?e.close():e.remove&&e.remove(),this.stopListening(e),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),s.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),s.CompositeView=s.CollectionView.extend({constructor:function(){s.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(){var e=s.getOption(this,"itemView")||this.constructor;return e||n("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),s.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return s.Renderer.render(t,e)},appendBuffer:function(e,t){var i=this.getItemViewContainer(e);i.append(t)},appendHtml:function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var i=this.getItemViewContainer(e);i.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,o=s.getOption(e,"itemViewContainer");if(o){var r=i.isFunction(o)?o.call(e):o;t="@"===r.charAt(0)&&e.ui?e.ui[r.substr(4)]:e.$(r),t.length<=0&&n("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),s.Layout=s.ItemView.extend({regionType:s.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),s.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),s.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),s.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},_buildRegions:function(e){var t=this,i={regionType:s.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new s.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),s.Behavior=function(e,t){function i(t,i){this.view=i,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(i.prototype,t.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:s.triggerMethod}),i.extend=s.extend,i}(i,t),s.Behaviors=function(e,t){function i(e){this.behaviors=i.parseBehaviors(e,t.result(e,"behaviors")),i.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","behaviorEvents","triggerMethod","setElement","close"])}var n={setElement:function(e,i){e.apply(this,t.tail(arguments,2)),t.each(i,function(e){e.$el=this.$el},this)},close:function(e,i){var n=t.tail(arguments,2);e.apply(this,n),t.invoke(i,"close",n)},bindUIElements:function(e,i){e.apply(this),t.invoke(i,e)},unbindUIElements:function(e,i){e.apply(this),t.invoke(i,e)},triggerMethod:function(e,i){var n=t.tail(arguments,2);e.apply(this,n),t.each(i,function(t){e.apply(t,n)})},delegateEvents:function(i,n){var s=t.tail(arguments,2);i.apply(this,s),t.each(n,function(t){e.bindEntityEvents(t,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(i,n){var s=t.tail(arguments,2);i.apply(this,s),t.each(n,function(t){e.unbindEntityEvents(t,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(i,n){var s={},o=t.result(this,"ui");return t.each(n,function(i,n){var r={},a=t.clone(t.result(i,"events"))||{},l=t.result(i,"ui"),c=t.extend({},o,l);a=e.normalizeUIKeys(a,c),t.each(t.keys(a),function(e){var s=new Array(n+2).join(" "),o=e+s,l=t.isFunction(a[e])?a[e]:i[a[e]];r[o]=t.bind(l,i)}),s=t.extend(s,r)}),s}};return t.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(e,n){return t.map(n,function(t,n){var s=i.getBehaviorClass(t,n);return new s(t,e)})},wrap:function(e,i,s){t.each(s,function(s){e[s]=t.partial(n[s],e[s],i)})}}),i}(s,i),s.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var i=s.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){var n=i.invert(this.appRoutes)[e];i.isFunction(this.onRoute)&&this.onRoute(e,n,t)},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return s.getOption(this,"controller")},_addAppRoute:function(e,t,s){var o=e[s];o||n("Method '"+s+"' was not found on the controller"),this.route(t,s,i.bind(o,e))}}),s.Application=function(e){this._initRegionManager(),this._initCallbacks=new s.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},i.extend(this,e),this.triggerMethod=s.triggerMethod},i.extend(s.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=s.Module.getClass(t),n=o.call(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new s.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),s.Application.extend=s.extend,s.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=s.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,e,t)},s.Module.extend=s.extend,i.extend(s.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,s.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),s.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var o=i.flatten([this,this.app,t,s,s.$,i,n]);e.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks}}),i.extend(s.Module,{create:function(e,t,n){var s=e,r=o.call(arguments);r.splice(0,3),t=t.split(".");var a=t.length,l=[];return l[a-1]=n,i.each(t,function(t,i){var o=s;s=this._getModule(o,t,e,n),this._addModuleDefinition(o,s,l[i],r)},this),s},_getModule:function(e,t,n,s){var o=i.extend({},s),r=this.getClass(s),a=e[t];return a||(a=new r(t,n,o),e[t]=a,e.submodules[t]=a),a},getClass:function(e){var t=s.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var s=this._getDefine(i),o=this._getStartWithParent(i,t);s&&t.addDefinition(s,n),this._addStartWithParent(e,t,o)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof s.Module?(n=t.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(e)?(n=e.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof s.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),s}(this,Backbone,_);define("marionette",["backbone_advice","backbone_wreqr","backbone_babysitter"],function(e){return function(){var t;return t||e.Backbone.Marionette}}(this)),define("handlebars/handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e["default"]=t}),define("handlebars/handlebars/utils",["./safe-string","exports"],function(e,t){function i(e){return a[e]||"&amp;"}function n(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}function s(e){return e instanceof r?e.toString():e||0===e?(e=""+e,c.test(e)?e.replace(l,i):e):""}function o(e){return e||0===e?d(e)&&0===e.length?!0:!1:!0}var r=e["default"],a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;t.extend=n;var h=Object.prototype.toString;t.toString=h;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var u;t.isFunction=u;var d=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};t.isArray=d,t.escapeExpression=s,t.isEmpty=o}),define("handlebars/handlebars/exception",["exports"],function(e){function t(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<i.length;t++)this[i[t]]=e[i[t]]}var i=["description","fileName","lineNumber","message","name","number","stack"];t.prototype=new Error,e["default"]=t}),define("handlebars/handlebars/base",["./utils","./exception","exports"],function(e,t,i){function n(e,t){this.helpers=e||{},this.partials=t||{},s(this)}function s(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var n=i.inverse||function(){},s=i.fn;return d(t)&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?n(this):u(t)?t.length>0?e.helpers.each(t,i):n(this):s(t)}),e.registerHelper("each",function(e,t){var i,n=t.fn,s=t.inverse,o=0,r="";if(d(e)&&(e=e.call(this)),t.data&&(i=g(t.data)),e&&"object"==typeof e)if(u(e))for(var a=e.length;a>o;o++)i&&(i.index=o,i.first=0===o,i.last=o===e.length-1),r+=n(e[o],{data:i});else for(var l in e)e.hasOwnProperty(l)&&(i&&(i.key=l),r+=n(e[l],{data:i}),o++);return 0===o&&(r=s(this)),r}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),e.registerHelper("with",function(e,t){return d(e)&&(e=e.call(this)),r.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(n,t)})}function o(e,t){m.log(e,t)}var r=e,a=t["default"],l="1.1.2";i.VERSION=l;var c=4;i.COMPILER_REVISION=c;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};i.REVISION_CHANGES=h;var u=r.isArray,d=r.isFunction,p=r.toString,f="[object Object]";i.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:o,registerHelper:function(e,t,i){if(p.call(e)===f){if(i||t)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else i&&(t.not=i),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===f?r.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var i=m.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)}}};i.logger=m,i.log=o;var g=function(e){var t={};return r.extend(t,e),t};i.createFrame=g}),define("handlebars/handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,i,n){function s(e){var t=e&&e[0]||1,i=d;if(t!==i){if(i>t){var n=p[i],s=p[t];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new Error("No environment passed to template");var i;i=t.compile?function(e,i,n,s,o,r){var a=l.apply(this,arguments);if(a)return a;var c={helpers:s,partials:o,data:r};return o[i]=t.compile(e,{data:void 0!==r},t),o[i](n,c)}:function(e,t){var i=l.apply(this,arguments);if(i)return i;throw new u("The partial "+t+" could not be compiled when running in runtime-only mode")};var n={escapeExpression:h.escapeExpression,invokePartial:i,programs:[],program:function(e,t,i){var n=this.programs[e];return i?n=a(e,t,i):n||(n=this.programs[e]=a(e,t)),n},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i={},h.extend(i,t),h.extend(i,e)),i},programWithDepth:r,noop:c,compilerInfo:null};return function(i,o){o=o||{};var r,a,l=o.partial?o:t;o.partial||(r=o.helpers,a=o.partials);var c=e.call(n,l,i,r,a,o.data);return o.partial||s(n.compilerInfo),c}}function r(e,t,i){var n=Array.prototype.slice.call(arguments,3),s=function(e,s){return s=s||{},t.apply(this,[e,s.data||i].concat(n))};return s.program=e,s.depth=n.length,s}function a(e,t,i){var n=function(e,n){return n=n||{},t(e,n.data||i)};return n.program=e,n.depth=0,n}function l(e,t,i,n,s,o){var r={partial:!0,helpers:n,partials:s,data:o};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(i,r):void 0}function c(){return""}var h=e,u=t["default"],d=i.COMPILER_REVISION,p=i.REVISION_CHANGES;n.template=o,n.programWithDepth=r,n.program=a,n.invokePartial=l,n.noop=c}),define("handlebars/handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,i,n,s,o){var r=e,a=t["default"],l=i["default"],c=n,h=s,u=function(){var e=new r.HandlebarsEnvironment;return c.extend(e,r),e.SafeString=a,e.Exception=l,e.Utils=c,e.VM=h,e.template=function(t){return h.template(t,e)},e},d=u();d.create=u,o["default"]=d}),define("handlebars/handlebars/compiler/ast",["../exception","exports"],function(e,t){function i(e,t,n){this.type="program",this.statements=e,this.strip={},n?(this.inverse=new i(n,t),this.strip.right=t.left):t&&(this.strip.left=t.right)}function n(e,t,i,n){this.type="mustache",this.hash=t,this.strip=n;var s=i[3]||i[2];this.escaped="{"!==s&&"&"!==s;var o=this.id=e[0],r=this.params=e.slice(1),a=this.eligibleHelper=o.isSimple;this.isHelper=a&&(r.length||t)}function s(e,t,i){this.type="partial",this.partialName=e,this.context=t,this.strip=i}function o(e,t,i,n){if(e.id.original!==n.path.original)throw new m(e.id.original+" doesn't match "+n.path.original);this.type="block",this.mustache=e,this.program=t,this.inverse=i,this.strip={left:e.strip.left,right:n.strip.right},(t||i).strip.left=e.strip.right,(i||t).strip.right=n.strip.left,i&&!t&&(this.isInverse=!0)}function r(e){this.type="content",this.string=e}function a(e){this.type="hash",this.pairs=e}function l(e){this.type="ID";for(var t="",i=[],n=0,s=0,o=e.length;o>s;s++){var r=e[s].part;if(t+=(e[s].separator||"")+r,".."===r||"."===r||"this"===r){if(i.length>0)throw new m("Invalid path: "+t);".."===r?n++:this.isScoped=!0}else i.push(r)}this.original=t,this.parts=i,this.string=i.join("."),this.depth=n,this.isSimple=1===e.length&&!this.isScoped&&0===n,this.stringModeValue=this.string
}function c(e){this.type="PARTIAL_NAME",this.name=e.original}function h(e){this.type="DATA",this.id=e}function u(e){this.type="STRING",this.original=this.string=this.stringModeValue=e}function d(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)}function p(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e}function f(e){this.type="comment",this.comment=e}var m=e["default"];t.ProgramNode=i,t.MustacheNode=n,t.PartialNode=s,t.BlockNode=o,t.ContentNode=r,t.HashNode=a,t.IdNode=l,t.PartialNameNode=c,t.DataNode=h,t.StringNode=u,t.IntegerNode=d,t.BooleanNode=p,t.CommentNode=f}),define("handlebars/handlebars/compiler/parser",["exports"],function(e){var t=function(){function e(e,t){return{left:"~"===e[2],right:"~"===t[0]||"~"===t[1]}}function t(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(t,i,n,s,o,r){var a=r.length-1;switch(o){case 1:return new s.ProgramNode(r[a-1]);case 2:return new s.ProgramNode([]);case 3:this.$=new s.ProgramNode([],r[a-1],r[a]);break;case 4:this.$=new s.ProgramNode(r[a-2],r[a-1],r[a]);break;case 5:this.$=new s.ProgramNode(r[a-1],r[a],[]);break;case 6:this.$=new s.ProgramNode(r[a]);break;case 7:this.$=new s.ProgramNode([]);break;case 8:this.$=new s.ProgramNode([]);break;case 9:this.$=[r[a]];break;case 10:r[a-1].push(r[a]),this.$=r[a-1];break;case 11:this.$=new s.BlockNode(r[a-2],r[a-1].inverse,r[a-1],r[a]);break;case 12:this.$=new s.BlockNode(r[a-2],r[a-1],r[a-1].inverse,r[a]);break;case 13:this.$=r[a];break;case 14:this.$=r[a];break;case 15:this.$=new s.ContentNode(r[a]);break;case 16:this.$=new s.CommentNode(r[a]);break;case 17:this.$=new s.MustacheNode(r[a-1][0],r[a-1][1],r[a-2],e(r[a-2],r[a]));break;case 18:this.$=new s.MustacheNode(r[a-1][0],r[a-1][1],r[a-2],e(r[a-2],r[a]));break;case 19:this.$={path:r[a-1],strip:e(r[a-2],r[a])};break;case 20:this.$=new s.MustacheNode(r[a-1][0],r[a-1][1],r[a-2],e(r[a-2],r[a]));break;case 21:this.$=new s.MustacheNode(r[a-1][0],r[a-1][1],r[a-2],e(r[a-2],r[a]));break;case 22:this.$=new s.PartialNode(r[a-2],r[a-1],e(r[a-3],r[a]));break;case 23:this.$=e(r[a-1],r[a]);break;case 24:this.$=[[r[a-2]].concat(r[a-1]),r[a]];break;case 25:this.$=[[r[a]],null];break;case 26:this.$=r[a];break;case 27:this.$=new s.StringNode(r[a]);break;case 28:this.$=new s.IntegerNode(r[a]);break;case 29:this.$=new s.BooleanNode(r[a]);break;case 30:this.$=r[a];break;case 31:this.$=new s.HashNode(r[a]);break;case 32:this.$=[r[a-2],r[a]];break;case 33:this.$=new s.PartialNameNode(r[a]);break;case 34:this.$=new s.PartialNameNode(new s.StringNode(r[a]));break;case 35:this.$=new s.PartialNameNode(new s.IntegerNode(r[a]));break;case 36:this.$=new s.DataNode(r[a]);break;case 37:this.$=new s.IdNode(r[a]);break;case 38:r[a-2].push({part:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 39:this.$=[{part:r[a]}];break;case 42:this.$=[];break;case 43:r[a-1].push(r[a]);break;case 46:this.$=[r[a]];break;case 47:r[a-1].push(r[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,n=[0],s=[null],o=[],r=this.table,a="",l=0,c=0,h=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;o.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,b,_,y,w,x={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=t()),g=r[m]&&r[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!h){w=[];for(b in r[m])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,h>0&&h--);break;case 2:if(_=this.productions_[g[1]][1],x.$=s[s.length-_],x._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},d&&(x._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(x,a,c,l,this.yy,g[1],s,o),"undefined"!=typeof v)return v;_&&(n=n.slice(0,-1*_*2),s=s.slice(0,-1*_),o=o.slice(0,-1*_)),n.push(this.productions_[g[1]][0]),s.push(x.$),o.push(x._$),y=r[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,n,s;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(i=this._input.match(this.rules[o[r]]),!i||t&&!(i[0].length>t[0].length)||(t=i,n=r,this.options.flex));r++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i,n){function s(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&s(0,1),14;case 3:return s(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return s(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return t.yytext=s(1,2).replace(/\\"/g,'"'),32;case 22:return t.yytext=s(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return t.yytext=s(1,2),38;case 29:return"INVALID";case 30:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}},e}();return i.lexer=n,t.prototype=i,i.Parser=t,new t}();e["default"]=t}),define("handlebars/handlebars/compiler/base",["./parser","./ast","exports"],function(e,t,i){function n(e){return e.constructor===o.ProgramNode?e:(s.yy=o,s.parse(e))}var s=e["default"],o=t;i.parser=s,i.parse=n}),define("handlebars/handlebars/compiler/javascript-compiler",["../base","exports"],function(e,t){function i(e){this.value=e}function n(){}var s=e.COMPILER_REVISION,o=e.REVISION_CHANGES,r=e.log;n.prototype={nameLookup:function(e,t){var i,s;return 0===e.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",i?"("+e+" && "+s+")":s},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,i,n){this.environment=e,this.options=t||{},r("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var s,o=e.opcodes;this.i=0;for(var a=o.length;this.i<a;this.i++)s=o[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(n)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,i="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(i+=" data = data || {};"),e.push(i)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,l=this.environment.depths.list.length;l>a;a++)n.push("depth"+this.environment.depths.list[a]);var c=this.mergeSource();if(!this.isChild){var h=s,u=o[h];c="this.compilerInfo = ["+h+",'"+u+"'];\n"+c}if(e)return n.push(c),Function.apply(this,n);var d="function "+(this.name||"")+"("+n.join(",")+") {\n  "+c+"}";return r("debug",d+"\n\n"),d},mergeSource:function(){for(var e,t="",i=0,n=this.source.length;n>i;i++){var s=this.source[i];s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=s+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(e,t,!0),n=this.nameLookup("depth"+this.lastContext,t,"context");this.push(i.name+" || "+n),this.replaceStack(function(e){return e+" ? "+e+".call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var i=this.setupHelper(0,e,t),n=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();this.pushSource("if ("+o+" = "+n+") { "+o+" = "+o+".call("+i.callParams+"); }"),this.pushSource("else { "+o+" = "+s+"; "+o+" = typeof "+o+" === functionType ? "+o+".call("+i.callParams+") : "+o+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push("'"+e+"': "+t),i&&s.types.push("'"+e+"': "+i),s.values.push("'"+e+"': ("+n+")")},compiler:n,compileChildren:function(e,t){for(var i,n,s=e.children,o=0,r=s.length;r>o;o++){i=s[o],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,t,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;i>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,i=this.environment.children[e],n=i.depths.list,s=[i.index,i.name,"data"],o=0,r=n.length;r>o;o++)t=n[o],s.push(1===t?"depth0":"depth"+(t-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new i(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,n="",s=this.isInline();if(s){var o=this.popStack(!0);if(o instanceof i)t=o.value;else{var r=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(r)+" = "+o+"),",t=this.topStack()}}else t=this.topStack();var a=e.call(this,t);return s?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+a+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+n+a+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var s=e[t];s instanceof i?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof i?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof i?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,i){var n=[];this.setupParams(e,n,i);var s=this.nameLookup("helpers",t,"helper");return{params:n,name:s,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(n).join(", ")}},setupParams:function(e,t,i){var n,s,o,r=[],a=[],l=[];r.push("hash:"+this.popStack()),s=this.popStack(),o=this.popStack(),(o||s)&&(o||(this.context.aliases.self="this",o="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),r.push("inverse:"+s),r.push("fn:"+o));for(var c=0;e>c;c++)n=this.popStack(),t.push(n),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+a.join(",")+"]"),r.push("types:["+l.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",i?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=n.RESERVED_WORDS={},c=0,h=a.length;h>c;c++)l[a[c]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},t["default"]=n}),define("handlebars/handlebars/compiler/compiler",["../exception","./base","./javascript-compiler","./ast","exports"],function(e,t,i,n,s){function o(){}function r(e,t){if(null==e||"string"!=typeof e&&e.constructor!==u.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=c(e),n=(new o).compile(i,t);return(new h).compile(n,t)}function a(e,t,i){function n(){var n=c(e),s=(new o).compile(n,t),r=(new h).compile(s,t,void 0,!0);return i.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==u.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var s;return function(e,t){return s||(s=n()),s.call(this,e,t)}}var l=e["default"],c=t.parse,h=i["default"],u=n;s.Compiler=o,o.prototype={compiler:o,disassemble:function(){for(var e,t,i,n=this.opcodes,s=[],o=0,r=n.length;r>o;o++)if(e=n[o],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var a=0;a<e.args.length;a++)i=e.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),t.push(i);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;t>i;i++){var n=this.opcodes[i],s=e.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var o=0;o<n.args.length;o++)if(n.args[o]!==s.args[o])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(i=0;t>i;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(e)},accept:function(e){var t,i=e.strip||{};return i.left&&this.opcode("strip"),t=this[e.type](e),i.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,i=0,n=t.length;n>i;i++)this.accept(t[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,i=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,o=i.depths.list.length;o>s;s++)t=i.depths.list[s],2>t||this.addDepth(t-1);return n},block:function(e){var t=e.mustache,i=e.program,n=e.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=this.classifyMustache(t);"helper"===s?this.helperMustache(t,i,n):"simple"===s?(this.simpleMustache(t),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,i,n=e.pairs;this.opcode("pushHash");for(var s=0,o=n.length;o>s;s++)t=n[s],i=t[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type)):this.accept(i),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,i=this.classifyMustache(e);"simple"===i?this.simpleMustache(e):"helper"===i?this.helperMustache(e):this.ambiguousMustache(e),this.opcode(e.escaped&&!t.noEscape?"appendEscaped":"append")},ambiguousMustache:function(e,t,i){var n=e.id,s=n.parts[0],o=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,o)},simpleMustache:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,i){var n=this.setupFullMustacheParams(e,t,i),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",n.length,s)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");
for(var i=1,n=e.parts.length;n>i;i++)this.opcode("lookup",e.parts[i])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new l("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var t=e.id.parts,i=0,n=t.length;n>i;i++)this.opcode("lookup",t[i])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifyMustache:function(e){var t=e.isHelper,i=e.eligibleHelper,n=this.options;if(i&&!t){var s=e.id.parts[0];n.knownHelpers[s]?t=!0:n.knownHelpersOnly&&(i=!1)}return t?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t,i=e.length;i--;)t=e[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,i){var n=e.params;return this.pushParams(n),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.hash(e.hash):this.opcode("emptyHash"),n}},s.precompile=r,s.compile=a}),define("handlebars/handlebars",["./handlebars.runtime","./handlebars/compiler/ast","./handlebars/compiler/base","./handlebars/compiler/compiler","./handlebars/compiler/javascript-compiler","exports"],function(e,t,i,n,s,o){var r=e["default"],a=t,l=i.parser,c=i.parse,h=n.Compiler,u=n.compile,d=n.precompile,p=s["default"],f=r.create,m=function(){var e=f();return e.compile=function(t,i){return u(t,i,e)},e.precompile=d,e.AST=a,e.Compiler=h,e.JavaScriptCompiler=p,e.Parser=l,e.parse=c,e};r=m(),r.create=m,o["default"]=r}),define("handlebars",["handlebars/handlebars"],function(e){return e}),define("require/core/sandbox",["require","underscore","backbone","marionette","handlebars"],function(e){var t,i,n=e("underscore"),s=e("backbone"),o=e("marionette"),r=e("handlebars");return i=r["default"]?r["default"]:r,t=new o.Application,{applicationCore:t,util:{_:n},template:i,mvc:n.extend({},o,{Model:s.Model,Collection:s.Collection,View:s.View,Events:s.Events,Router:s.Router}),eventBus:t.vent,reqRes:t.reqres}}),define("eb-styleguide/js/template_helpers/amd/chain_helper",["require","underscore","handlebars"],function(e){function t(){var e=i.first(arguments).replace(/\s+/," ").split(" "),t=i.rest(arguments);return i(e).each(function(e){return"string"!=typeof e?!1:(t[0]=n["default"]?n["default"].helpers[e].apply(null,t):n.helpers[e].apply(null,t),!1)}),t[0]}var i=e("underscore"),n=e("handlebars");n["default"]?n["default"].registerHelper("chain",t):n.registerHelper("chain",t)}),define("eb-styleguide/js/template_helpers/amd/i18n_helper",["require","handlebars"],function(e){function t(e,t){return"undefined"!=typeof window.gettext&&(e=window.gettext(e)),"undefined"!=typeof window.interpolate&&(e="object"==typeof t?window.interpolate(e,t.hash,!0):window.interpolate(e,Array.prototype.slice.call(arguments,1),!1)),e}var i=e("handlebars");i["default"]?i["default"].registerHelper("_",t):i.registerHelper("_",t)}),define("eb-styleguide/js/template_helpers/amd/mark_safe_helper",["require","handlebars"],function(e){function t(e){return i["default"]?new i["default"].SafeString(e):new i.SafeString(e)}var i=e("handlebars");i["default"]?i["default"].registerHelper("markSafe",t):i.registerHelper("markSafe",t)}),define("eb-styleguide/js/template_helpers/amd/widont",["require","jquery","handlebars"],function(e){function t(e){var t=i.trim(e).split(" "),o=t.pop(),r=0;if(0===t.length)return o;for(r=0;r<t.length;r++)t[r]=n["default"]?n["default"].Utils.escapeExpression(t[r]):n.Utils.escapeExpression(t[r]);return o=n["default"]?n["default"].Utils.escapeExpression(o):n.Utils.escapeExpression(o),t.push(t.pop()+s+o),t.join(" ")}var i=e("jquery"),n=e("handlebars"),s="&nbsp;";return t}),define("eb-styleguide/js/template_helpers/amd/widont_helper",["require","handlebars","./widont"],function(e){function t(e){return i["default"]?new i["default"].SafeString(n(e)):new i.SafeString(n(e))}var i=e("handlebars"),n=e("./widont");i["default"]?i["default"].registerHelper("widont",t):i.registerHelper("widont",t)}),define("require/core/bootstrap",["require","./sandbox","eb-styleguide/js/template_helpers/amd/chain_helper","eb-styleguide/js/template_helpers/amd/i18n_helper","eb-styleguide/js/template_helpers/amd/mark_safe_helper","eb-styleguide/js/template_helpers/amd/widont_helper"],function(e){define("jquery",[],function(){return jQuery}),e("./sandbox"),e("eb-styleguide/js/template_helpers/amd/chain_helper"),e("eb-styleguide/js/template_helpers/amd/i18n_helper"),e("eb-styleguide/js/template_helpers/amd/mark_safe_helper"),e("eb-styleguide/js/template_helpers/amd/widont_helper")}),define("eb/advanced_teams/constants",{TeamSearchView:{FIELD_ERROR_SELECTOR:".form__field-error",SEARCH_INPUT_CLASS:".js-team-search-input",TEAM_SELECTED_EVENT:"select",AUTOCOMPLETE_DELAY:200}}),function(e,t,i){i.namespace("AdvancedTeams"),i.AdvancedTeams.TeamModel=i.Backbone.Model.extend({defaults:{id:0,name:""},url:function(){return"/teams/"+this.get("id")+"/update/team/"},checkPassword:function(t){return e.post("/teams/"+this.get("id")+"/check_password/",{password:t},"json")}}),define("eb/advanced_teams/team_model",[],function(){return i.AdvancedTeams.TeamModel})}(window.jQuery,window._,window.EB),function(){EB.namespace("AdvancedTeams"),EB.AdvancedTeams.TeamCollection=EB.Backbone.Collection.extend({model:EB.AdvancedTeams.TeamModel,initialize:function(e,t){if("object"!=typeof t||"undefined"==typeof t.eventID)throw"AdvancedTeams.TeamSearchView requires an event_id";this.url="/event/"+t.eventID+"/teams/search"},findByName:function(e){return e=e.toLowerCase(),this.find(function(t){return t.get("name").toLowerCase()===e})}}),define("eb/advanced_teams/team_collection",["eb/advanced_teams/team_model"],function(){return EB.AdvancedTeams.TeamCollection})}(),function(e){Backbone.Stickit={_handlers:[],addHandler:function(e){e=_.map(_.flatten([e]),function(e){return _.extend({updateModel:!0,updateView:!0,updateMethod:"text"},e)}),this._handlers=this._handlers.concat(e)}},_.extend(Backbone.View.prototype,{_modelBindings:null,unstickit:function(e){_.each(this._modelBindings,_.bind(function(t,i){return e&&t.model!==e?!1:(t.model.off(t.event,t.fn),void delete this._modelBindings[i])},this)),this._modelBindings=_.compact(this._modelBindings),this.$el.off(".stickit"+(e?"."+e.cid:""))},stickit:function(e,t){var n=this,d=e||this.model,p=".stickit."+d.cid,f=t||this.bindings||{};this._modelBindings||(this._modelBindings=[]),this.unstickit(d),_.each(_.keys(f),function(e){var t,m,g,v,b=f[e]||{},y=_.uniqueId();":el"!=e?t=n.$(e):(t=n.$el,e=""),t.length&&(_.isString(b)&&(b={observe:b}),v=l(t,b),g=v.observe,m=_.extend({bindKey:y},v.setOptions||{}),c(n,t,v,d,g),h(n,t,v,d,g),g&&(_.each(v.events||[],function(i){var o=i+p,a=function(e){var i=v.getVal.call(n,t,e,v);s(n,v.updateModel,i,v)&&r(d,g,i,m,n,v)};""===e?n.$el.on(o,a):n.$el.on(o,e,a)}),_.each(_.flatten([g]),function(e){o(d,n,"change:"+e,function(e,i,s){(null==s||s.bindKey!=y)&&u(n,t,v,a(e,g,v,n),e)})}),u(n,t,v,a(d,g,v,n),d,!0)),i(n,v.initialize,t,d,v))}),this.remove=_.wrap(this.remove,function(e){n.unstickit(),e&&e.call(n)})}});var t=function(e,t){var i=(t||"").split("."),n=_.reduce(i,function(e,t){return e[t]},e);return null==n?e:n},i=function(e,t){return t?(_.isString(t)?e[t]:t).apply(e,_.toArray(arguments).slice(2)):void 0},n=function(e){return e.find("option").not(function(){return!this.selected})},s=function(e,t){return _.isBoolean(t)?t:_.isFunction(t)||_.isString(t)?i.apply(this,_.toArray(arguments)):!1},o=function(e,t,i,n){e.on(i,n,t),t._modelBindings.push({model:e,event:i,fn:n})},r=function(e,t,n,s,o,r){r.onSet&&(n=i(o,r.onSet,n,r)),e.set(t,n,s)},a=function(e,t,n,s){var o,r=function(t){var i=n.escape?e.escape(t):e.get(t);return _.isUndefined(i)?"":i};return o=_.isArray(t)?_.map(t,r):r(t),n.onGet?i(s,n.onGet,o,n):o},l=function(e,t){var i=[{updateModel:!1,updateView:!0,updateMethod:"text",update:function(e,t,i,n){e[n.updateMethod](t)},getVal:function(e,t,i){return e[i.updateMethod]()}}];_.each(Backbone.Stickit._handlers,function(t){e.is(t.selector)&&i.push(t)}),i.push(t);var n=_.extend.apply(_,i);return delete n.selector,n},c=function(e,t,i,n,s){var r=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","loop","multiple","open","readonly","required","scoped","selected"];_.each(i.attributes||[],function(i){var l="",c=i.observe||(i.observe=s),h=function(){var s=_.indexOf(r,i.name,!0)>-1?"prop":"attr",o=a(n,c,i,e);"class"==i.name?(t.removeClass(l).addClass(o),l=o):t[s](i.name,o)};_.each(_.flatten([c]),function(t){o(n,e,"change:"+t,h)}),h()})},h=function(e,t,n,s,r){if(null!=n.visible){var l=function(){var o=n.visible,l=n.visibleFn,c=a(s,r,n,e),h=!!c;(_.isFunction(o)||_.isString(o))&&(h=i(e,o,c,n)),l?i(e,l,t,h,n):h?t.show():t.hide()};_.each(_.flatten([r]),function(t){o(s,e,"change:"+t,l)}),l()}},u=function(e,t,n,o,r,a){s(e,n.updateView,o,n)&&(n.update.call(e,t,o,r,n),a||i(e,n.afterUpdate,t,o,n))};Backbone.Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["keyup","change","paste","cut"]},{selector:"input",events:["keyup","change","paste","cut"],update:function(e,t){e.val(t)},getVal:function(e){var t=e.val();return e.is('[type="number"]')?null==t?t:Number(t):t}},{selector:"textarea",events:["keyup","change","paste","cut"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:'input[type="radio"]',events:["change"],update:function(e,t){e.filter('[value="'+t+'"]').prop("checked",!0)},getVal:function(e){return e.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(t,i){t.length>1?(i||(i=[]),_.each(t,function(t){_.indexOf(i,e(t).val())>-1?e(t).prop("checked",!0):e(t).prop("checked",!1)})):_.isBoolean(i)?t.prop("checked",i):t.prop("checked",i==t.val())},getVal:function(t){var i;if(t.length>1)i=_.reduce(t,function(t,i){return e(i).prop("checked")&&t.push(e(i).val()),t},[]);else{i=t.prop("checked");var n=t.val();"on"!=n&&null!=n&&(i=i?t.val():null)}return i}},{selector:"select",events:["change"],update:function(n,s,o,r){var a,l=r.selectOptions,c=l&&l.collection||void 0,h=n.prop("multiple");if(!l){l={};var u=function(e){return e.find("option").map(function(){return{value:this.value,label:this.text}}).get()};n.find("optgroup").length?(c={opt_labels:[]},_.each(n.find("optgroup"),function(t){var i=e(t).attr("label");c.opt_labels.push(i),c[i]=u(e(t))})):c=u(n)}l.valuePath=l.valuePath||"value",l.labelPath=l.labelPath||"label";var d=function(i,n,s){l.defaultOption&&(i=_.clone(i),i.unshift("__default__")),_.each(i,function(i){var o=e("<option/>"),r=i,a=function(e,t){o.text(e),r=t,o.data("stickit_bind_val",r),_.isArray(r)||_.isObject(r)||o.val(r)};"__default__"===i?a(l.defaultOption.label,l.defaultOption.value):a(t(i,l.labelPath),t(i,l.valuePath)),!h&&null!=r&&null!=s&&r==s||_.isObject(s)&&_.isEqual(r,s)?o.prop("selected",!0):h&&_.isArray(s)&&_.each(s,function(e){_.isObject(e)&&(e=t(e,l.valuePath)),(e==r||_.isObject(e)&&_.isEqual(r,e))&&o.prop("selected",!0)}),n.append(o)})};n.html("");var p=function(e,i){var n=window;return 0===i.indexOf("this.")&&(n=e),i=i.replace(/^[a-z]*\.(.+)$/,"$1"),t(n,i)};a=_.isString(c)?p(this,c):_.isFunction(c)?i(this,c,n,r):c,a instanceof Backbone.Collection&&(a=a.toJSON()),_.isArray(a)?d(a,n,s):_.each(a.opt_labels,function(t){var i=e("<optgroup/>").attr("label",t);d(a[t],i,s),n.append(i)})},getVal:function(t){var i;return i=t.prop("multiple")?e(n(t).map(function(){return e(this).data("stickit_bind_val")})).get():n(t).data("stickit_bind_val")}}])}(window.jQuery||window.Zepto),define("backbone_stickit",function(){}),Backbone.Validation=function(e){var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(e,i){return l[t.labelFormatter](e,i)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},n=function(t,i,s){return i=i||{},s=s||"",e.each(t,function(e,o){t.hasOwnProperty(o)&&(e&&"object"==typeof e&&!(e instanceof Date||e instanceof RegExp||e instanceof Backbone.Model||e instanceof Backbone.Collection)?n(e,i,s+o+"."):i[s+o]=e)}),i},s=function(){var s=function(t){return e.reduce(e.keys(t.validation||{}),function(e,t){return e[t]=void 0,e},{})},r=function(t,i){var n=t.validation?t.validation[i]||{}:{};return(e.isFunction(n)||e.isString(n))&&(n={fn:n}),e.isArray(n)||(n=[n]),e.reduce(n,function(t,i){return e.each(e.without(e.keys(i),"msg"),function(e){t.push({fn:c[e],val:i[e],msg:i.msg})}),t},[])},a=function(t,n,s,o){return e.reduce(r(t,n),function(r,a){var l=e.extend({},i,c),h=a.fn.call(l,s,n,a.val,t,o);return h===!1||r===!1?!1:h&&!r?a.msg||h:r},"")},l=function(t,i){var s,o={},r=!0,l=e.clone(i),c=n(i);return e.each(c,function(e,i){s=a(t,i,e,l),s&&(o[i]=s,r=!1)}),{invalidAttrs:o,isValid:r}},h=function(t,i){return{preValidate:function(t,i){return a(this,t,i,e.extend({},this.attributes))},isValid:function(t){var i=n(this.attributes);return e.isString(t)?!a(this,t,i[t],e.extend({},this.attributes)):e.isArray(t)?e.reduce(t,function(t,n){return t&&!a(this,n,i[n],e.extend({},this.attributes))},!0,this):(t===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(o,r){var a=this,c=!o,h=e.extend({},i,r),u=s(a),d=e.extend({},u,a.attributes,o),p=n(o||d),f=l(a,d);return a._isValid=f.isValid,e.each(u,function(e,i){var n=f.invalidAttrs.hasOwnProperty(i);n||h.valid(t,i,h.selector)}),e.each(u,function(e,i){var n=f.invalidAttrs.hasOwnProperty(i),s=p.hasOwnProperty(i);n&&(s||c)&&h.invalid(t,i,f.invalidAttrs[i],h.selector)}),e.defer(function(){a.trigger("validated",a._isValid,a,f.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,f.invalidAttrs)}),!h.forceUpdate&&e.intersection(e.keys(f.invalidAttrs),e.keys(p)).length>0?f.invalidAttrs:void 0}}},u=function(t,i,n){e.extend(i,h(t,n))},d=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){u(this.view,e,this.options)},f=function(e){d(e)};return{version:"0.8.0",configure:function(i){e.extend(t,i)},bind:function(i,n){var s=i.model,r=i.collection;if(n=e.extend({},t,o,n),"undefined"==typeof s&&"undefined"==typeof r)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";s?u(i,s,n):r&&(r.each(function(e){u(i,e,n)}),r.bind("add",p,{view:i,options:n}),r.bind("remove",f))},unbind:function(e){var t=e.model,i=e.collection;t&&d(e.model),i&&(i.each(function(e){d(e)}),i.unbind("add",p),i.unbind("remove",f))},mixin:h(null,t)}}(),o=s.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},r=s.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},a=s.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",pattern:"{0} must be a valid {1}"},l=s.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace("_"," ")},label:function(e,t){return t.labels&&t.labels[e]||l.sentenceCase(e,t)}},c=s.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(t){return e.isNumber(t)||e.isString(t)&&t.match(r.number)},n=function(i){return!(e.isNull(i)||e.isUndefined(i)||e.isString(i)&&""===t(i))};return{fn:function(t,i,n,s,o){return e.isString(n)&&(n=s[n]),n.call(s,t,i,o)},required:function(t,i,s,o,r){var l=e.isFunction(s)?s.call(o,t,i,r):s;return l||n(t)?l&&!n(t)?this.format(a.required,this.formatLabel(i,o)):void 0:!1},acceptance:function(t,i,n,s){return"true"===t||e.isBoolean(t)&&t!==!1?void 0:this.format(a.acceptance,this.formatLabel(i,s))},min:function(e,t,n,s){return!i(e)||n>e?this.format(a.min,this.formatLabel(t,s),n):void 0},max:function(e,t,n,s){return!i(e)||e>n?this.format(a.max,this.formatLabel(t,s),n):void 0},range:function(e,t,n,s){return!i(e)||e<n[0]||e>n[1]?this.format(a.range,this.formatLabel(t,s),n[0],n[1]):void 0},length:function(e,i,s,o){return n(e)&&t(e).length===s?void 0:this.format(a.length,this.formatLabel(i,o),s)},minLength:function(e,i,s,o){return!n(e)||t(e).length<s?this.format(a.minLength,this.formatLabel(i,o),s):void 0},maxLength:function(e,i,s,o){return!n(e)||t(e).length>s?this.format(a.maxLength,this.formatLabel(i,o),s):void 0},rangeLength:function(e,i,s,o){return!n(e)||t(e).length<s[0]||t(e).length>s[1]?this.format(a.rangeLength,this.formatLabel(i,o),s[0],s[1]):void 0},oneOf:function(t,i,n,s){return e.include(n,t)?void 0:this.format(a.oneOf,this.formatLabel(i,s),n.join(", "))},equalTo:function(e,t,i,n,s){return e!==s[i]?this.format(a.equalTo,this.formatLabel(t,n),this.formatLabel(i,n)):void 0},pattern:function(e,t,i,s){return n(e)&&e.toString().match(r[i]||i)?void 0:this.format(a.pattern,this.formatLabel(t,s),i)}}}();return s}(_),define("backbone_validation",function(e){return function(){var t,i;return i=function(){EB.Backbone.Validation=Backbone.Validation},t=i.apply(e,arguments),t||e.Backbone.Validation}}(this)),function(e,t,i,n,s){i.namespace("Backbone.Mixins");var o=function(e,t){"object"==typeof e&&"function"!=typeof t.View.mixin&&(e.addMixin(t.View),e.addMixin(t.Model),e.addMixin(t.Collection))};o(s.Advice,i.Backbone),o(s.Advice,s),i.Backbone.Mixins.enforceDependencies=function(e){this.around("initialize",function(i,n,s){var o="undefined"==typeof this.attributes&&"undefined"==typeof this.fetch;if(o&&(s=n),"undefined"==typeof s)throw new Error("Missing options");var r=this.requiredOptions||e.dependencies;if(!r)throw new Error("Missing list of dependencies");t.each(r,function(e){if("undefined"==typeof s[e])throw new Error("Missing required dependency: "+e);this[e]=s[e]},this),i(s)})},i.Backbone.Mixins.rejectWithServerErrors=function(t){this.setDefaults({rejectWithServerErrors:function(){return e.Deferred().reject({__all__:t.serverErrorMessage||window.gettext("Whoops! Someone must have pulled a plug somewhere... try again.")})}})},i.Backbone.Mixins.rejectIfServerValidationErrors=function(){this.setDefaults({rejectIfServerValidationErrors:function(t){return t.success?t:e.Deferred().reject(this.processServerValidationErrors(t))},processServerValidationErrors:function(e){return e.errors}}),this.after("initialize",function(){t.bindAll(this,"rejectIfServerValidationErrors","processServerValidationErrors")})},i.Backbone.Mixins.withTemplate=function(e){this.after("initialize",function(){if(!e.template&&!e.templateName&&!this.getTemplateName)throw new Error("Missing templateName or getTemplateName function");this.template="function"==typeof e.template?e.template:n.templates[e.templateName||this.getTemplateName()]}),this.around("render",function(e){return this.$el.html(this.template(this.getContextData(),this.getTemplateOptions())),e(),this}),this.setDefaults({getContextData:function(){return this.model?this.model.toJSON():{}},getTemplateOptions:function(){return e.templateOptions||{}}})};var r=function(e){var i={events:["blur","cut","paste","change"],onSet:"onSet"};this.after("initialize",function(){var n=e&&e.bindings||this.bindings;if(!n)throw new Error("Bindings missing");t.each(t.keys(n),function(e){var s=n[e];t.isString(s)&&(s=t.extend({observe:s},i),n[e]=s)}),this.bindings=n}),this.setDefaults({onSet:function(e){return e}})};i.Backbone.Mixins.withStickit=function(e){this.mixin(r,e),this.after("render",function(){this.stickit()})},i.Backbone.Mixins.withStickitForMarionette=function(e){this.mixin(r,e),this.before("onRender",function(){this.stickit()}),this.after("onShow",function(){this.stickit()})},i.Backbone.Mixins.withInputValidation=function(){this.after("initialize",function(){if(!this.model)throw new Error("Missing model");i.Backbone.Validation.bind(this,{forceUpdate:!0}),t.bindAll(this,"displayValidationErrors","handleFormLevelError","resetValidationErrors","bindValidationToEvent"),this.errors={}}),this.around("onSet",function(e,t,i){t=e(t,i);var n=this.model.preValidate(i.observe,t);return!n||!t&&this.ignoreEmptyValues()?this.hideFieldValidationError(i.observe):this.showFieldValidationError(i.observe,n),t}),this.setDefaults({ignoreEmptyValues:function(){return!0},handleFormLevelError:function(e){s.Events.trigger("pageNotification",{type:"error",messages:[e]})},getSelectorForAttr:function(e){return t.find(t.keys(this.bindings),function(t){return this.bindings[t].observe===e?t:void 0},this)},get$InputForAttr:function(e){return this.$(this.getSelectorForAttr(e))},get$ErrorMessageForAttr:function(e){return this.$(".js-error-for-"+e)},showFieldValidationError:function(e,t){this.get$InputForAttr(e).addClass("has-form-input-error"),this.get$ErrorMessageForAttr(e).removeClass("is-hidden").html(t),this.errors[e]=t},hideFieldValidationError:function(e){this.get$InputForAttr(e).removeClass("has-form-input-error"),this.get$ErrorMessageForAttr(e).addClass("is-hidden").html(""),this.errors[e]&&delete this.errors[e]},displayValidationErrors:function(e){this.errors=e,t.each(e,function(i,n){if(e.hasOwnProperty(n)){if(t.isArray(i)&&i.length>0&&(i=i[0]),"__all__"===n)return void this.handleFormLevelError(i);this.showFieldValidationError(n,i),this.model.once("change:"+n,t.bind(function(){this.hideFieldValidationError(n)},this))}},this),t.isEmpty(e)||this.postDisplayValidationErrorsHook(e)},resetValidationErrors:function(){t.isEmpty(this.errors)||(t.each(this.errors,function(e,t){this.errors.hasOwnProperty(t)&&this.hideFieldValidationError(t)},this),this.errors={})},validateView:function(){var e=this.model.validate(void 0,{forceUpdate:!1});return e?(this.displayValidationErrors(e),this.$(".form__field-error").not(":empty").length>0&&this.trigger("validationFail",e),!0):(this.trigger("validationSuccess"),!1)},bindValidationToEvent:function(e,t,i){this.listenTo(e,t,function(){this.onSet(e.get(i),{observe:i})})},postDisplayValidationErrorsHook:function(){}})},i.Backbone.Mixins.collectionView=function(i){if(!i.containerSelector)throw new Error("Missing container selector");if(!i.viewClass)throw new Error("Missing View Class");this.setDefaults({handleModelAdded:function(e){var i,n;n=this.viewParameters||{},n.model=e,i=new this.viewClass(n),i.$el.data("cid",e.cid),this.modelCIDViewMap[e.cid]=i,this.container.append(i.render().el),1===t.size(this.modelCIDViewMap)&&this.handleFirstViewAdded(i),this.handleViewAdded(i,e)},handleModelDeleted:function(e){var t=this.modelCIDViewMap[e.cid];delete this.modelCIDViewMap[e.cid],this.collection.length<1&&this.handleNoViews(),this.handleViewRemoved(t)},renderView:function(e){var t=this.modelCIDViewMap[e.cid];this.container.append(t.render().el)},handleFirstViewAdded:function(){},handleNoViews:function(){},handleViewAdded:function(){},handleViewRemoved:function(){}}),this.after("initialize",function(){if(t.bindAll(this,"handleModelAdded","handleModelDeleted","renderView","handleFirstViewAdded","handleNoViews","handleViewAdded","handleViewRemoved"),this.modelCIDViewMap={},this.viewClass=i.viewClass,!this.collection||!i.collectionClass)throw new Error("Missing collection");this.collection=this.collection||i.collectionClass({}),this.listenTo(this.collection,"add",this.handleModelAdded),this.listenTo(this.collection,"remove",this.handleModelDeleted)}),this.after("render",function(){this.container=e("<div>"),this.collection.each(this.handleModelAdded),this.$(i.containerSelector).append(this.container),this.trigger("collection:rendered")})},i.Backbone.Mixins.sortableCollectionView=function(n){if(!n.handle)throw new Error("Missing handle");this.mixin([i.Backbone.Mixins.collectionView],{containerSelector:n.containerSelector,viewClass:n.viewClass,collectionClass:n.collectionClass}),this.setDefaults({handleViewMoved:function(){this.container.children().each(this.setModelIndex),this.collection.sort()},setModelIndex:function(t,i){var n=e(i).data("cid");this.collection.get(n).set("index",t)}}),this.after("initialize",function(){t.bindAll(this,"handleViewMoved","setModelIndex")}),this.after("render",function(){this.container.on("sortstop",this.handleViewMoved),this.container.sortable({axis:"y",containment:"parent",handle:n.handle,tolerance:"pointer",zIndex:6,cursor:"pointer"})})},i.Backbone.Mixins.withDynamicFormPost=function(){this.setDefaults({dynamicFormPost:function(t,i){var n,s=e('<form action="'+t+'" method="POST"></form>');for(n in i)i.hasOwnProperty(n)&&s.append(e('<input type="hidden" name="'+n+'" value="'+i[n]+'"/>'));s.appendTo(this.$el).trigger("submit")}}),this.after("initialize",function(){t.bindAll(this,"dynamicFormPost")})},i.Backbone.Mixins.disabledInputs=function(){this.setDefaults({disableInputs:function(){this.$("btn").addClass("btn--disabled"),this.$("input").prop("disabled",!0),this.$("textarea").prop("disabled",!0),this.$("select").prop("disabled",!0)}}),this.after("initialize",function(){t.bindAll(this,"disableInputs")})},i.Backbone.Mixins.sortableByIndex=function(){this.setDefaults({comparator:function(e){return e.get("index")},handleModelAdd:function(e){this.maxIndex+=1,e.set("index",this.maxIndex)},handleModelRemove:function(){this.maxIndex-=1,this.setIndexes()},setIndexes:function(){this.each(function(e,t){e.set("index",t)})}}),this.after("initialize",function(){t.bindAll(this,"handleModelAdd","handleModelRemove","setIndexes"),this.maxIndex=-1,this.on("add",this.handleModelAdd),this.on("remove",this.handleModelRemove)}),this.after("reset",function(){this.setIndexes(),this.maxIndex=this.length-1})},i.Backbone.Mixins.autocompleteHelpers=function(){this.setDefaults({_highlightText:function(t,i){var n=new RegExp("("+e.ui.autocomplete.escapeRegex(i)+")","ig");return t.replace(n,'<span class="text-body--significant">$1</span>')},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").html(i.label)).appendTo(t)},_populateAutocomplete:function(){e(this).autocomplete("search")}})},"function"==typeof define&&define("eb/backbone/mixins",["backbone_advice","backbone_stickit","backbone_validation"],function(e){return o(e,i.Backbone),o(e,s),i.Backbone.Mixins})}(window.jQuery,window._,window.EB,window.Handlebars,window.Backbone),function(e,t){function i(t,i){var s=t.nodeName.toLowerCase();if("area"===s){var o,r=t.parentNode,a=r.name;return t.href&&a&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1}return(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"==s?t.href||i:i)&&n(t)}function n(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position",1))&&/(auto|scroll)/.test(e.css(this,"overflow",1)+e.css(this,"overflow-y",1)+e.css(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow",1)+e.css(this,"overflow-y",1)+e.css(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this,!0))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width",!0))||0),s&&(i-=parseFloat(e.css(t,"margin"+this,!0))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};
e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s=e.ui[t].prototype;for(var o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var s=0;s<n.length;s++)e.options[n[s][0]]&&n[s][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,s,o,r){return e.ui.isOverAxis(t,n,o)&&e.ui.isOverAxis(i,s,r)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var n,s=0;null!=(n=t[s]);s++)try{e(n).triggerHandler("remove")}catch(o){}i(t)}}else{var n=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),n.call(e(this),t,i)})}}e.widget=function(t,i,n){var s,o=t.split(".")[0];t=t.split(".")[1],s=o+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s]=function(i){return!!e.data(i,t)},e[o]=e[o]||{},e[o][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var r=new i;r.options=e.extend(!0,{},r.options),e[o][t].prototype=e.extend(!0,r,{namespace:o,widgetName:t,widgetEventPrefix:e[o][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},n),e.widget.bridge(t,e[o][t])},e.widget.bridge=function(i,n){e.fn[i]=function(s){var o="string"==typeof s,r=Array.prototype.slice.call(arguments,1),a=this;return s=!o&&r.length?e.extend.apply(null,[!0,s].concat(r)):s,o&&"_"===s.charAt(0)?a:(this.each(o?function(){var n=e.data(this,i),o=n&&e.isFunction(n[s])?n[s].apply(n,r):n;return o!==n&&o!==t?(a=o,!1):void 0}:function(){var t=e.data(this,i);t?t.option(s||{})._init():e.data(this,i,new n(s,this))}),a)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var s=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(n===t)return this.options[i];s={},s[i]=n}return this._setOptions(s),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var s,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,n="center",s={},o=e.fn.position,r=e.fn.offset;e.fn.position=function(r){if(!r||!r.of)return o.apply(this,arguments);r=e.extend({},r);var a,l,c,h=e(r.of),u=h[0],d=(r.collision||"flip").split(" "),p=r.offset?r.offset.split(" "):[0,0];return 9===u.nodeType?(a=h.width(),l=h.height(),c={top:0,left:0}):u.setTimeout?(a=h.width(),l=h.height(),c={top:h.scrollTop(),left:h.scrollLeft()}):u.preventDefault?(r.at="left top",a=l=0,c={top:r.of.pageY,left:r.of.pageX}):(a=h.outerWidth(),l=h.outerHeight(),c=h.offset()),e.each(["my","at"],function(){var e=(r[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat([n]):i.test(e[0])?[n].concat(e):[n,n]),e[0]=t.test(e[0])?e[0]:n,e[1]=i.test(e[1])?e[1]:n,r[this]=e}),1===d.length&&(d[1]=d[0]),p[0]=parseInt(p[0],10)||0,1===p.length&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,"right"===r.at[0]?c.left+=a:r.at[0]===n&&(c.left+=a/2),"bottom"===r.at[1]?c.top+=l:r.at[1]===n&&(c.top+=l/2),c.left+=p[0],c.top+=p[1],this.each(function(){var t,i=e(this),o=i.outerWidth(),h=i.outerHeight(),u=parseInt(e.css(this,"marginLeft",!0))||0,f=parseInt(e.css(this,"marginTop",!0))||0,m=o+u+(parseInt(e.css(this,"marginRight",!0))||0),g=h+f+(parseInt(e.css(this,"marginBottom",!0))||0),v=e.extend({},c);"right"===r.my[0]?v.left-=o:r.my[0]===n&&(v.left-=o/2),"bottom"===r.my[1]?v.top-=h:r.my[1]===n&&(v.top-=h/2),s.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),t={left:v.left-u,top:v.top-f},e.each(["left","top"],function(i,n){e.ui.position[d[i]]&&e.ui.position[d[i]][n](v,{targetWidth:a,targetHeight:l,elemWidth:o,elemHeight:h,collisionPosition:t,collisionWidth:m,collisionHeight:g,offset:p,my:r.my,at:r.at})}),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(v,{using:r.using}))})},e.ui.position={fit:{left:function(t,i){var n=e(window),s=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft();t.left=s>0?t.left-s:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var n=e(window),s=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop();t.top=s>0?t.top-s:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if(i.at[0]!==n){var s=e(window),o=i.collisionPosition.left+i.collisionWidth-s.width()-s.scrollLeft(),r="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,a="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];t.left+=i.collisionPosition.left<0?r+a+l:o>0?r+a+l:0}},top:function(t,i){if(i.at[1]!==n){var s=e(window),o=i.collisionPosition.top+i.collisionHeight-s.height()-s.scrollTop(),r="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,a="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];t.top+=i.collisionPosition.top<0?r+a+l:o>0?r+a+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.css(t,"position"))&&(t.style.position="relative");var n=e(t),s=n.offset(),o=parseInt(e.css(t,"top",!0),10)||0,r=parseInt(e.css(t,"left",!0),10)||0,a={top:i.top-s.top+o,left:i.left-s.left+r};"using"in i?i.using.call(t,a):n.css(a)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each(e.isFunction(t)?function(i){e(this).offset(t.call(this,i,e(this).offset()))}:function(){e.offset.setOffset(this,t)}):r.call(this):null}),function(){var t,i,n,o,r,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in n)t.style[c]=n[c];t.appendChild(l),i=a||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",o=e(l).offset(function(e,t){return t}).offset(),t.innerHTML="",i.removeChild(t),r=o.top+o.left+(a?2e3:0),s.fractions=r>21&&22>r}()}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,n=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!i.options.disabled&&!i.element.propAttr("readOnly")){t=!1;var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:i._move("previousPage",n);break;case s.PAGE_DOWN:i._move("nextPage",n);break;case s.UP:i._keyEvent("previous",n);break;case s.DOWN:i._keyEvent("next",n);break;case s.ENTER:case s.NUMPAD_ENTER:i.menu.active&&(t=!0,n.preventDefault());case s.TAB:if(!i.menu.active)return;i.menu.select(n);break;case s.ESCAPE:i.element.val(i.term),i.close(n);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,n))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(t){var n=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target===i.element[0]||t.target===n||e.ui.contains(n,t.target)||i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var n=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:n})&&/^key/.test(e.originalEvent.type)&&i.element.val(n.value)},selected:function(e,t){var s=t.item.data("item.autocomplete"),o=i.previous;i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=o,setTimeout(function(){i.previous=o,i.selectedItem=s},1)),!1!==i._trigger("select",e,{item:s})&&i.element.val(s.value),i.term=i.element.val(),i.close(e),i.selectedItem=s},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")},e(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,n=this.element.scrollTop(),s=this.element.height();0>i?this.element.scrollTop(n+i):i>=s&&this.element.scrollTop(n+i-s+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(!this.active)return void this.activate(i,this.element.children(t));var n=this.active[e+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(t,this.element.children(".ui-menu-item:first"));var i=this.active.offset().top,n=this.element.height(),s=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-n+e(this).height();return 10>t&&t>-10});s.length||(s=this.element.children(".ui-menu-item:last")),this.activate(t,s)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(t,this.element.children(".ui-menu-item:last"));var i=this.active.offset().top,n=this.element.height(),s=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+n-e(this).height();return 10>t&&t>-10});s.length||(s=this.element.children(".ui-menu-item:first")),this.activate(t,s)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),define("jquery_autocomplete",function(){}),define("eb/components/teams/search/team_search_view",["require","jquery","eb/advanced_teams/constants","eb/advanced_teams/team_model","eb/advanced_teams/team_collection","eb/backbone/mixins","jquery_autocomplete"],function(e){var t=e("jquery"),i=e("eb/advanced_teams/constants"),n=e("eb/advanced_teams/team_model"),s=e("eb/advanced_teams/team_collection"),o=e("eb/backbone/mixins");return e("jquery_autocomplete"),EB.Backbone.View.extend({events:{"click .js-change-team":"handleChangeTeamClick","click .js-team-password-button":"handleTeamPasswordCheckClick","keyup .js-team-password-input":"handlePasswordKeyup","keydown .js-team-password-input":"handlePasswordKeydown","submit .js-team-search-form":"handleFormSubmit"},initialize:function(e){var i=this;if("object"!=typeof e||!(e.collection instanceof s))throw"AdvancedTeams.TeamSearchView requires an AdvancedTeams.TeamCollection";_.bindAll(this,"assignTeam","handlePasswordKeyup","findTeams","selectTeam","_checkPasswordResponse"),t(function(){i.render(),i.$teamPasswordInput=i.$(".js-team-password-input"),i.initializeAutocomplete()}),e.teamID&&this.collection.fetch({data:t.param({team_id:e.teamID})}).done(function(e){e.length>0?i.selectTeam(void 0,{item:e[0]}):i.$(".js-team-not-found").removeClass("is-hidden")})},initializeAutocomplete:function(){this.$(i.TeamSearchView.SEARCH_INPUT_CLASS).autocomplete({minLength:2,select:this.selectTeam,source:this.findTeams,delay:i.TeamSearchView.AUTOCOMPLETE_DELAY}).data("autocomplete")._renderItem=this._renderItem},findTeams:function(e,i){var n=e.term;this.$(".js-team-not-found").addClass("is-hidden"),this.$(".js-team-search-input").removeClass("has-form-input-error").siblings(".form__field-error").addClass("is-hidden"),this.teamFetchDeferred=this.collection.fetch({data:t.param({term:n})}).done(this._parseTeams(n,i))},selectTeam:function(e,s){return this.currentlySelectedTeam=new n(s.item),this.$(i.TeamSearchView.SEARCH_INPUT_CLASS).autocomplete("close"),s.item.is_full?void this.$(".js-team-search-input").addClass("has-form-input-error").siblings(".form__field-error").removeClass("is-hidden").html(gettext("Bummer! This team is full. Please join a different team.")):void(s.item.has_password?(this.authorizationDfd=t.Deferred(),this._showPasswordRequiredInput(s.item),this.authorizationDfd.done(this.assignTeam)):this.assignTeam())},assignTeam:function(){this.trigger(i.TeamSearchView.TEAM_SELECTED_EVENT,this.currentlySelectedTeam)},render:function(){return this.$el.html(this.options.template()),this},handleFormSubmit:function(e){var t=this,n=this.$(".js-team-search-input").val();e.preventDefault(),n.length<1||("undefined"==typeof this.teamFetchDeferred&&this.findTeams({term:n},function(){}),window.setTimeout(function(){t.teamFetchDeferred.done(function(e){e.length>0?t.selectTeam(void 0,{item:e[0]}):t.$(".js-team-not-found").removeClass("is-hidden")})},i.TeamSearchView.AUTOCOMPLETE_DELAY))},handleChangeTeamClick:function(e){e.preventDefault(),this.$(".js-team-search-input").val(""),this.$(".js-team-search-row").removeClass("is-hidden"),this.$(".js-team-info").addClass("is-hidden"),this.$(".js-team-password-row").addClass("is-hidden")},handleTeamPasswordCheckClick:function(e){e.preventDefault(),this._submitPassword()},handlePasswordKeydown:function(e){13===e.which&&e.preventDefault()},handlePasswordKeyup:function(e){e.preventDefault(),13===e.which&&this._submitPassword()},_showPasswordRequiredInput:function(e){var t=window.gettext('Looks like this team requires a password to join, or <a href="#" class="js-change-team">find another team.</a>');this.$(".js-team-search-row").addClass("is-hidden"),this.$(".js-team-info").html(this.options.teamInfoTemplate({teamName:e.name,teamLogo:e.logo,changeTeamPrompt:t})).removeClass("is-hidden"),this.$(".js-team-password-row").removeClass("is-hidden")},_submitPassword:function(){var e=this.$teamPasswordInput.val(),t=this.currentlySelectedTeam.checkPassword(e);t.done(this._checkPasswordResponse)},_checkPasswordResponse:function(e){e.token?(this.currentlySelectedTeam.set("token",e.token),this.authorizationDfd.resolve()):(this.$teamPasswordInput.addClass("has-form-input-error").siblings(i.TeamSearchView.FIELD_ERROR_SELECTOR).removeClass("is-hidden"),this.$teamPasswordInput.one("click keyup",function(){t(this).removeClass("has-form-input-error").siblings(i.TeamSearchView.FIELD_ERROR_SELECTOR).addClass("is-hidden")}))},_parseTeams:function(e,t){var i=this;return function(n){var s=_(n).map(function(t){var n=i._highlightText(escapeHTML(t.name),e);return t.is_full&&(n=interpolate(gettext("%(team_name)s (Full)"),{team_name:n},!0)),t.label=n,t.value=t.name,t});t(s)}}}).mixin([o.autocompleteHelpers])}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.team_search=Handlebars.template(function(e,t,i,n,s){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var o,r,a="",l=i.helperMissing,c=this.escapeExpression;return a+='<form class="js-team-search-form form form--tall form--labels-medium">\n    <div class="js-team-search-row form__row has-centered-inline-content">\n        <input type="text" class="js-team-search-input form__input--long" placeholder="',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Search for a team",r):l.call(t,"_","Search for a team",r)))+'" />\n        <input type="submit" class="btn" value="',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Join",r):l.call(t,"_","Join",r)))+'">\n        <div class="is-hidden form__field-error"></div>\n    </div>\n\n    <div class="js-team-not-found is-hidden l-block-3 pod pod--alert form__row">\n        <div class="l-padded-v-3 l-padded-h-2 has-centered-inline-content">\n            <p class="text-heading-secondary">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Whoops! We couldn't find the team name you entered.",r):l.call(t,"_","Whoops! We couldn't find the team name you entered.",r)))+"</p>\n            <p>",r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Check the spelling of your team name and try again.",r):l.call(t,"_","Check the spelling of your team name and try again.",r)))+'</p>\n        </div>\n    </div>\n\n    <div class="js-team-info is-hidden l-block-3 form__row"></div>\n\n    <div class="js-team-password-row is-hidden l-block-3 form__row form__row--label-column has-centered-inline-content">\n        <label class="form__label--column">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Enter Team Password",r):l.call(t,"_","Enter Team Password",r)))+'</label>\n        <input type="password" class="js-team-password-input form__input--medium" />\n        <button class="js-team-password-button btn">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Join",r):l.call(t,"_","Join",r)))+'</button>\n        <aside class="form__field-error is-hidden">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Sorry, that password is incorrect.",r):l.call(t,"_","Sorry, that password is incorrect.",r)))+"</aside>\n    </div>\n</form>\n"}),this.Handlebars.templates.team_info=Handlebars.template(function(e,t,i,n,s){function o(e,t){var n,s="";return s+='\n                <div class="image-container image-container--square image--small">\n                    <img src="',(n=i.teamLogo)?n=n.call(e,{hash:{},data:t}):(n=e.teamLogo,n=typeof n===h?n.apply(e):n),s+=u(n)+'" />\n                </div>\n    '}function r(){return'\n                <i class="ico-box ico--color-subtle ico-team-created ico--medium"></i>\n    '}function a(e,t){var n,s,o="";return o+='\n            <div>\n                <span class="text-heading-primary">',(n=i.teamName)?n=n.call(e,{hash:{},data:t}):(n=e.teamName,n=typeof n===h?n.apply(e):n),o+=u(n)+'</span>\n                <div class="text-body-small">',s={hash:{},data:t},o+=u((n=i.markSafe||e.markSafe,n?n.call(e,e.changeTeamPrompt,s):d.call(e,"markSafe",e.changeTeamPrompt,s)))+"</div>\n            </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var l,c="",h="function",u=this.escapeExpression,d=i.helperMissing,p=this;return c+='<div class="pod pod--primary">\n    <div class="l-padded-v-5 l-padded-h-4 layout-padded--list-item l-media-v-center">\n        <div class="l-media-v-center__row">\n            <div>\n    ',l=i["if"].call(t,t.teamLogo,{hash:{},inverse:p.program(3,r,s),fn:p.program(1,o,s),data:s}),(l||0===l)&&(c+=l),c+="\n            </div>\n    ",l=i["if"].call(t,t.teamName,{hash:{},inverse:p.noop,fn:p.program(5,a,s),data:s}),(l||0===l)&&(c+=l),c+="\n        </div>\n    </div>\n</div>\n"}),define("templates/build/team_search",function(){}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.mobile_team_search=Handlebars.template(function(e,t,i,n,s){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var o,r,a="",l=i.helperMissing,c=this.escapeExpression;return a+='<header class="pod__header js-team-info">\n    <h2 class="text-heading-primary has-centered-inline-content">\n        ',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Join a Team",r):l.call(t,"_","Join a Team",r)))+'\n    </h2>\n</header>\n\n<form class="form form--stacked form--tall js-team-search-form">\n\n    <div class="js-team-search-row form__row layout-padded--mobile">\n        <label class="form__row" for="team-search-input" >\n            <span class="text-body--medium text-body--understated">\n                ',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Find Your Team",r):l.call(t,"_","Find Your Team",r)))+'\n            </span>\n        </label>\n        <div class="form__row form__row--mobile l-media-flexible">\n            <div class="l-media-flexible__fluid">\n                <input type="text" class="js-team-search-input l-media-flexible__fluid__object" placeholder="',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Team Name",r):l.call(t,"_","Team Name",r)))+'" id="team-search-input" />\n                <div class="is-hidden form__field-error"></div>\n            </div>\n            <div class="l-media-flexible__fixed has-centered-inline-content">\n                <input type="submit" class="btn" value="',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Join",r):l.call(t,"_","Join",r)))+'">\n            </div>\n        </div>\n    </div>\n\n    <div class="js-team-not-found is-hidden l-block-3 l-padded-v-5 l-padded-h-4 pod pod--alert form__row">\n        <div class="l-padded-v-3 l-padded-h-2 has-centered-inline-content">\n            <p class="text-heading-secondary">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Whoops! We couldn't find the team name you entered.",r):l.call(t,"_","Whoops! We couldn't find the team name you entered.",r)))+"</p>\n            <p>",r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Check the spelling of your team name and try again.",r):l.call(t,"_","Check the spelling of your team name and try again.",r)))+'</p>\n        </div>\n    </div>\n\n    <div class="layout-padded--mobile  js-team-password-row is-hidden">\n        <div class="form__row">\n            <label class="text-default text-body--faint" for="team-password">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Enter Team Password",r):l.call(t,"_","Enter Team Password",r)))+':</label>\n        </div>\n        <div class="l-block-3 form__row">\n            <input type="password" class="js-team-password-input form__input--full-width" id="team-password" />\n            <aside class="form__field-error is-hidden">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Sorry, that password is incorrect.",r):l.call(t,"_","Sorry, that password is incorrect.",r)))+'</aside>\n        </div>\n        <div class="l-block-3 form__row">\n            <a class="js-team-password-button btn btn--block">',r={hash:{},data:s},a+=c((o=i._||t._,o?o.call(t,"Join",r):l.call(t,"_","Join",r)))+"</a>\n        </div>\n    </div>\n\n</form>\n"}),this.Handlebars.templates.mobile_team_info=Handlebars.template(function(e,t,i,n,s){function o(e,t){var n,s,o="";return o+="\n        ",s={hash:{},data:t},o+=h((n=i._||e._,n?n.call(e,"Join Team %s",e.teamName,s):c.call(e,"_","Join Team %s",e.teamName,s)))+"\n    "}function r(e,t){var n,s,o="";return o+="\n        ",s={hash:{},data:t},o+=h((n=i._||e._,n?n.call(e,"Join a Team",s):c.call(e,"_","Join a Team",s)))+"\n    "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var a,l="",c=i.helperMissing,h=this.escapeExpression,u=this;return l+='<h2 class="text-heading-primary has-centered-inline-content">\n    ',a=i["if"].call(t,t.teamName,{hash:{},inverse:u.program(3,r,s),fn:u.program(1,o,s),data:s}),(a||0===a)&&(l+=a),l+="\n</h2>\n"}),define("templates/build/mobile_team_search",function(){}),define("eb/components/teams/search/app",["require","eb/advanced_teams/team_model","eb/advanced_teams/team_collection","eb/components/teams/search/team_search_view","templates/build/team_search","templates/build/mobile_team_search"],function(e){var t,i=e("eb/advanced_teams/team_model"),n=e("eb/advanced_teams/team_collection"),s=e("eb/components/teams/search/team_search_view");return e("templates/build/team_search"),e("templates/build/mobile_team_search"),t={create:function(e){var t=new n([],{eventID:e.eventID,model:i});return e.collection=e.collection||t,new s(e)},desktop:function(e){return e.template=Handlebars.templates.team_search,e.teamInfoTemplate=Handlebars.templates.team_info,t.create(e)},mobile:function(e){return e.template=Handlebars.templates.mobile_team_search,e.teamInfoTemplate=Handlebars.templates.mobile_team_info,t.create(e)}}}),function(e,t){t(document).ajaxSend(function(e,i,n){function s(e){var i=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),s=0;s<n.length;s++){var o=t.trim(n[s]);if(o.substring(0,e.length+1)===e+"="){i=decodeURIComponent(o.substring(e.length+1));break}}return i}function o(e){var t=document.location.host,i=document.location.protocol,n="//"+t,s=i+n;return e===s||e.slice(0,s.length+1)===s+"/"||e===n||e.slice(0,n.length+1)===n+"/"||!/^(\/\/|http:|https:).*/.test(e)}function r(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}!r(n.type)&&o(n.url)&&i.setRequestHeader("X-CSRFToken",s("csrftoken"))})}(window.EB=window.EB||{},jQuery),define("eb/csrfcookie",function(){}),define("eventbrite",["require","eb/csrfcookie"],function(e){return e("eb/csrfcookie"),window.EB}),function(e){e.namespace("Models"),e.Models.EventModel=e.Backbone.Model.extend({defaults:{is_free:!0,is_live:!1,is_repeating:!1,repeating:"never",is_atd:!0,capacity:0,is_series:!1},validation:{capacity:[{fn:function(e){return!$.isNumeric(e)||parseInt(e,10)<0?window.gettext("Please enter a number"):e&&e.indexOf(".")>-1?window.gettext("Please enter a whole number"):void 0}}]},initialize:function(){this.on("change:repeating",this.setIsRepeating),this.setIsRepeating()
},setDefaultCapacity:function(e){0===this.get("capacity")&&this.set("capacity",e.sumQuantity())},setIsRepeating:function(){var e=this.get("repeating");"never"===e||_.isEmpty(e)?this.set("is_repeating",!1):this.set("is_repeating",!0)},isPossiblyCCP:function(){return this.get("currency").isCCP()&&(!this.get("has_payment_type")||this.get("accept_eventbrite"))}}),e.Models.EventModel.EVENT_DELETED=80,"function"==typeof define&&define("require/entities/event_model",[],function(){return e.Models.EventModel})}(window.EB),define("require/entities/related_event_collection",["require","eventbrite","require/entities/event_model"],function(e){var t=e("eventbrite"),i=e("require/entities/event_model");return t.Backbone.Collection.extend({model:i,initialize:function(e,t){this.publicID=t.publicID},url:function(){return"/ajax/event/"+this.publicID+"/related/"}})}),define("eb/components/related_events/constants",{RENDER_COMPLETE_EVENT:"renderComplete",USER_FEEDBACK_EVENT:"userFeedback",ORGANIZER_STORE:"RelatedEventsByOrganizerStore",ANIMATION_SPEED:400,SCROLL_STEP:50,EVENT_TILE_WIDTH:480,MAX_EVENT_TITLE_LENGTH:72,MINIMUM_EVENT_LIST_LENGTH:2,AFFILIATE_CODE_SIMILAR:"erelexpsim",AFFILIATE_CODE_ORGANIZER:"erelexporg"}),function(e,t,i,n){e("eb/components/related_events/analytics",["eb/components/related_events/constants"],function(e){return i.Backbone.View.extend({events:{"click .js-close-related":"handleCloseClick","mouseenter .js-scroll-control":"handleScrollMouseenter","mousemove .js-scroll-control":"handleScrollMousemove","mouseleave .js-scroll-control":"handleScrollMouseleave"},initialize:function(){n.bindAll(this,"handleRenderComplete","handleUserFeedback","addEventImpression"),window.Backbone.Events.on(e.RENDER_COMPLETE_EVENT,this.handleRenderComplete),window.Backbone.Events.on(e.USER_FEEDBACK_EVENT,this.handleUserFeedback)},handleCloseClick:function(){this.recordClose()},handleScrollMouseenter:function(){this.setupImpressions()},handleScrollMousemove:function(){this.collectImpressions()},handleScrollMouseleave:function(){this.recordImpressions()},handleRenderComplete:function(){this.recordInitialImpressions()},handleUserFeedback:function(e){this.recordUserFeedback(e)},recordClose:function(){var e=[];this.$(".js-event-item").each(function(t,i){e.push(i.id)}),i.Analytics.analyticsAction("RelatedEventsCloseAction",{event_id:this.options.bigEventID,correlation_id:this.options.correlationID,session_id:this.options.sessionID,user_id:this.options.EBUserID,event_ids:e},{})},recordUserFeedback:function(e){i.Analytics.analyticsAction("RelatedEventsFeedbackAction",{event_id:e.eventID,source_event_id:this.options.bigEventID,user_id:this.options.EBUserID,type:e.type,feedback:e.feedback,notes:e.notes,similarity_score:e.similarityScore},{})},setupImpressions:function(){this.windowXOffset=window.pageXOffset,this.viewport=this.windowXOffset+window.innerWidth,this.impressions=[],this.impressionRankMap=[]},collectImpressions:function(){this.$(".js-event-item").each(this.addEventImpression)},addEventImpression:function(e,i){-1===n.indexOf(this.impressions,i.id)&&this.isFullyVisible(i)&&(this.impressions.push(i.id),this.impressionRankMap.push(t(i).data("rank")))},isFullyVisible:function(e){var i=t(e).offset().left,n=e.offsetWidth;return i>=this.windowXOffset&&i+n<=this.viewport},recordImpressions:function(e){i.Analytics.analyticsAction("RelatedEventsImpressionsAction",{event_id:this.options.bigEventID,correlation_id:this.options.correlationID,session_id:this.options.sessionID,user_id:this.options.EBUserID,is_initial_load:e,impression_ids:this.impressions,impression_rank_map:this.impressionRankMap},{}),this.impressions=[],this.impressionRankMap=[]},recordInitialImpressions:function(){this.setupImpressions(),this.collectImpressions(),this.recordImpressions(!0)}})})}(window.define,window.jQuery,window.EB,window._),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.related_events=Handlebars.template(function(e,t,i,n,s){function o(e,t){var n,s,o="";return o+="\n    ",s={hash:{},data:t},o+=m((n=i._||e._,n?n.call(e,"Check out other upcoming events",s):f.call(e,"_","Check out other upcoming events",s)))+"\n"}function r(e,t){var n,s,o="";return o+="\n    ",s={hash:{},data:t},o+=m((n=i._||e._,n?n.call(e,"Check out these upcoming events",s):f.call(e,"_","Check out these upcoming events",s)))+"\n"}function a(){return"is-not-scrollable"}function l(){return'\n    <nav class="js-scroll-control js-scroll-control-left scroll-control scroll-control-left">\n        <i class="ico-arrow-left ico--xlarge ico--color-brand-white"></i>\n    </nav>\n    <nav class="js-scroll-control js-scroll-control-right scroll-control scroll-control-right">\n        <i class="ico-arrow-right ico--xlarge ico--color-brand-white"></i>\n    </nav>\n'}function c(e,t){var n,s,o,r="";return r+='\n    <article class="scroll-item cta-item cta-discover">\n        <p>',o={hash:{},data:t},r+=m((n=i._||e._,n?n.call(e,"Find events in your area this weekend",o):f.call(e,"_","Find events in your area this weekend",o)))+'</p>\n        <a href="',(s=i.discoverLink)?s=s.call(e,{hash:{},data:t}):(s=e.discoverLink,s=typeof s===g?s.apply(e):s),r+=m(s)+'" class="btn btn--large">',o={hash:{},data:t},r+=m((n=i._||e._,n?n.call(e,"Check out events",o):f.call(e,"_","Check out events",o)))+"</a>\n    </article>\n"}function h(e,t){var n,s,o,r="";return r+='\n    <article class="js-cta-friends scroll-item cta-item cta-friends">\n        <p>',o={hash:{},data:t},r+=m((n=i._||e._,n?n.call(e,"See where your friends are going",o):f.call(e,"_","See where your friends are going",o)))+'</p>\n        <div class="facepile">\n            ',o={hash:{},inverse:v.noop,fn:v.program(12,u,t),data:t},(s=i.iframe)?s=s.call(e,o):(s=e.iframe,s=typeof s===g?s.apply(e):s),i.iframe||(s=b.call(e,s,o)),(s||0===s)&&(r+=s),r+='\n        </div>\n        <a href="',(s=i.friendsLink)?s=s.call(e,{hash:{},data:t}):(s=e.friendsLink,s=typeof s===g?s.apply(e):s),r+=m(s)+'" class="js-connect-facebook btn btn--large btn--facebook btn--ico">\n            <i class="ico-facebook-badge ico--large"></i>\n            <span>',o={hash:{},data:t},r+=m((n=i._||e._,n?n.call(e,"Connect with Facebook",o):f.call(e,"_","Connect with Facebook",o)))+"</span>\n        </a>\n    </article>\n"}function u(e,t){var n,s="";return s+='\n                src="https://www.facebook.com/plugins/facepile.php?app_id=',(n=i.FBAppID)?n=n.call(e,{hash:{},data:t}):(n=e.FBAppID,n=typeof n===g?n.apply(e):n),s+=m(n)+'&colorscheme=dark" scrolling="no" frameborder="0" allowTransparency="true"\n            '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var d,p="",f=i.helperMissing,m=this.escapeExpression,g="function",v=this,b=i.blockHelperMissing;return p+='<h3 class="js-related-events-heading related-events-heading text-heading-primary text-body--understated">\n',d=i["if"].call(t,t.showCTAOnly,{hash:{},inverse:v.program(3,r,s),fn:v.program(1,o,s),data:s}),(d||0===d)&&(p+=d),p+='\n    <i class="js-close-related close-related ico-cross ico--color-understated"></i>\n</h3>\n\n<section class="js-event-list event-list ',d=i.unless.call(t,t.isScrollable,{hash:{},inverse:v.noop,fn:v.program(5,a,s),data:s}),(d||0===d)&&(p+=d),p+='">\n\n',d=i["if"].call(t,t.isScrollable,{hash:{},inverse:v.noop,fn:v.program(7,l,s),data:s}),(d||0===d)&&(p+=d),p+="\n\n",d=i["if"].call(t,t.showDiscoverCTA,{hash:{},inverse:v.noop,fn:v.program(9,c,s),data:s}),(d||0===d)&&(p+=d),p+='\n\n\n    <article class="js-event-item-render-hook is-hidden"></article>\n\n',d=i["if"].call(t,t.showFriendsCTA,{hash:{},inverse:v.noop,fn:v.program(11,h,s),data:s}),(d||0===d)&&(p+=d),p+="\n\n</section>"}),this.Handlebars.templates.event_view=Handlebars.template(function(e,t,i,n,s){function o(){return'\n    <i class="js-feedback-button ico-settings ico--color-understated ico--medium"></i>\n    <i class="js-feedback-complete ico-checkmark ico--color-brand-dark-green ico--medium is-hidden"></i>\n'}function r(e,t){var n,s,o="";return o+="\n            <p>",(n=i.nextDate)?n=n.call(e,{hash:{},data:t}):(n=e.nextDate,n=typeof n===f?n.apply(e):n),o+=m(n)+" (",s={hash:{},data:t},o+=m((n=i._||e._,n?n.call(e,"Multiple Dates Available",s):g.call(e,"_","Multiple Dates Available",s)))+")</p>\n"}function a(e,t){var n,s="";return s+="\n            <p>",(n=i.startDate)?n=n.call(e,{hash:{},data:t}):(n=e.startDate,n=typeof n===f?n.apply(e):n),s+=m(n)+"</p>\n"}function l(e,t){var n,s="";return s+="\n    ",n=i["if"].call(e,e.organizerName,{hash:{},inverse:v.program(10,h,t),fn:v.program(8,c,t),data:t}),(n||0===n)&&(s+=n),s+="\n"}function c(e,t){var n,s,o="";return o+="\n        ",s={hash:{organizer:e.organizerName},data:t},o+=m((n=i._||e._,n?n.call(e,"Also by %(organizer)s",s):g.call(e,"_","Also by %(organizer)s",s)))+"\n    "}function h(e,t){var n,s,o="";return o+="\n        ",s={hash:{},data:t},o+=m((n=i._||e._,n?n.call(e,"Also by this organizer",s):g.call(e,"_","Also by this organizer",s)))+"\n    "}function u(e,t){var n,s,o="";return o+="\n        ",s={hash:{},data:t},o+=m((n=i._||e._,n?n.call(e,"Similar to this event",s):g.call(e,"_","Similar to this event",s)))+"\n"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var d,p="",f="function",m=this.escapeExpression,g=i.helperMissing,v=this;return p+='<a id="',(d=i.bigEventID)?d=d.call(t,{hash:{},data:s}):(d=t.bigEventID,d=typeof d===f?d.apply(t):d),p+=m(d)+'" class="js-event-item event-item" data-rank="',(d=i.rank)?d=d.call(t,{hash:{},data:s}):(d=t.rank,d=typeof d===f?d.apply(t):d),p+=m(d)+'" href="',(d=i.eventURL)?d=d.call(t,{hash:{},data:s}):(d=t.eventURL,d=typeof d===f?d.apply(t):d),p+=m(d)+'" target="_blank">\n\n',d=i["if"].call(t,t.showFeedback,{hash:{},inverse:v.noop,fn:v.program(1,o,s),data:s}),(d||0===d)&&(p+=d),p+='\n\n    <div class="event-background"></div>\n    <figure class="event-details">\n        <span class="event-logo"></span>\n        <figcaption>\n            <h4>',(d=i.eventName)?d=d.call(t,{hash:{},data:s}):(d=t.eventName,d=typeof d===f?d.apply(t):d),p+=m(d)+"</h4>\n",d=i["if"].call(t,t.isRepeating,{hash:{},inverse:v.program(5,a,s),fn:v.program(3,r,s),data:s}),(d||0===d)&&(p+=d),p+="\n        </figcaption>\n    </figure>\n    <aside>\n",d=i["if"].call(t,t.isOrganizerEvent,{hash:{},inverse:v.program(12,u,s),fn:v.program(7,l,s),data:s}),(d||0===d)&&(p+=d),p+="\n    </aside>\n</a>"}),this.Handlebars.templates.event_feedback=Handlebars.template(function(e,t,i,n,s){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var o,r="",a="function",l=this.escapeExpression;return r+='\n\n<h4 class="text-heading-secondary">\n    Does this recommendation make sense?\n</h4>\n\n<div class="grid__row">\n    <div class="feedback_group grid__col--1of3">\n        <div class="form__row">\n            <input type="radio" name="',(o=i.prefix)?o=o.call(t,{hash:{},data:s}):(o=t.prefix,o=typeof o===a?o.apply(t):o),r+=l(o)+'-feedback" value="Yes" checked />\n            <label>Yes</label>\n        </div>\n        <div class="form__row">\n            <input type="radio" name="',(o=i.prefix)?o=o.call(t,{hash:{},data:s}):(o=t.prefix,o=typeof o===a?o.apply(t):o),r+=l(o)+'-feedback" value="No" />\n            <label>No</label>\n        </div>\n        <div class="form__row">\n            <input type="radio" name="',(o=i.prefix)?o=o.call(t,{hash:{},data:s}):(o=t.prefix,o=typeof o===a?o.apply(t):o),r+=l(o)+'-feedback" value="Inappropriate" />\n            <label>Inappropriate</label>\n        </div>\n        <div class="form__row">\n            <input type="radio" name="',(o=i.prefix)?o=o.call(t,{hash:{},data:s}):(o=t.prefix,o=typeof o===a?o.apply(t):o),r+=l(o)+'-feedback" value="Other" />\n            <label>Other</label>\n        </div>\n    </div>\n    <div class="grid__col--2of3 grid__col--last">\n        <textarea name="',(o=i.prefix)?o=o.call(t,{hash:{},data:s}):(o=t.prefix,o=typeof o===a?o.apply(t):o),r+=l(o)+'-feedback-notes" class="form__input--short form__input--vertical-short" placeholder="Notes(Optional)"></textarea>\n    </div>\n</div>\n\n<button class="cancel_btn btn btn--small btn--secondary">Cancel</button>\n<button class="submit_btn btn btn--small">Submit</button>'}),define("templates/build/related_events",function(){}),function(e,t,i){e("eb/components/related_events/event_feedback_view",["eb/components/related_events/constants","eb/backbone/mixins","templates/build/related_events"],function(e,n){return i.Backbone.View.extend({tagName:"section",className:"event-item-feedback js-event-feedback form",events:{"click input[type=radio]":"handleRadioBtnClick","click .cancel_btn":"handleCancelClick","click .submit_btn":"handleSubmitClick"},getContextData:function(){return{prefix:this.model.get("public_id")}},handleRadioBtnClick:function(e){this.feedback=t(e.currentTarget).val()},handleCancelClick:function(){this.trigger("closeFeedback",{reviewed:!1})},handleSubmitClick:function(){window.Backbone.Events.trigger(e.USER_FEEDBACK_EVENT,{eventID:this.model.get("public_id"),type:"expired",feedback:this.feedback||"Yes",notes:this.$("textarea").val(),similarityScore:0}),this.trigger("closeFeedback",{reviewed:!0})}}).mixin(n.withTemplate,{templateName:"event_feedback"})})}(window.define,window.jQuery,window.EB),function(e,t){"$:nomunge";function i(e){return"string"==typeof e}function n(e){var t=v.call(arguments,1);return function(){return e.apply(this,t.concat(v.call(arguments)))}}function s(e){return e.replace(/^[^#]*#?(.*)$/,"$1")}function o(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function r(n,s,o,r,a){var l,h,d,p,f;return r!==c?(d=o.match(n?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),f=d[3]||"",2===a&&i(r)?h=r.replace(n?A:M,""):(p=u(d[2]),r=i(r)?u[n?C:k](r):r,h=2===a?r:1===a?e.extend({},r,p):e.extend({},p,r),h=_(h),n&&(h=h.replace(g,b))),l=d[1]+(n?"#":h||!d[1]?"?":"")+h+f):l=s(o!==c?o:t[E][I]),l}function a(e,t,n){return t===c||"boolean"==typeof t?(n=t,t=_[e?C:k]()):t=i(t)?t.replace(e?A:M,""):t,u(t,n)}function l(t,n,s,o){return i(s)||"object"==typeof s||(o=s,s=n,n=c),this.each(function(){var i=e(this),r=n||m()[(this.nodeName||"").toLowerCase()]||"",a=r&&i.attr(r)||"";i.attr(r,_[t](a,s,o))})}var c,h,u,d,p,f,m,g,v=Array.prototype.slice,b=decodeURIComponent,_=e.param,y=e.bbq=e.bbq||{},w=e.event.special,x="hashchange",k="querystring",C="fragment",S="elemUrlAttr",E="location",I="href",D="src",M=/^.*\?|#.*$/g,A=/^.*\#/,T={};_[k]=n(r,0,o),_[C]=h=n(r,1,s),h.noEscape=function(t){t=t||"";var i=e.map(t.split(""),encodeURIComponent);g=new RegExp(i.join("|"),"g")},h.noEscape(",/"),e.deparam=u=function(t,i){var n={},s={"true":!0,"false":!1,"null":null};return e.each(t.replace(/\+/g," ").split("&"),function(t,o){var r,a=o.split("="),l=b(a[0]),h=n,u=0,d=l.split("]["),p=d.length-1;if(/\[/.test(d[0])&&/\]$/.test(d[p])?(d[p]=d[p].replace(/\]$/,""),d=d.shift().split("[").concat(d),p=d.length-1):p=0,2===a.length)if(r=b(a[1]),i&&(r=r&&!isNaN(r)?+r:"undefined"===r?c:s[r]!==c?s[r]:r),p)for(;p>=u;u++)l=""===d[u]?h.length:d[u],h=h[l]=p>u?h[l]||(d[u+1]&&isNaN(d[u+1])?{}:[]):r;else e.isArray(n[l])?n[l].push(r):n[l]=n[l]!==c?[n[l],r]:r;else l&&(n[l]=i?c:"")}),n},u[k]=n(a,0),u[C]=d=n(a,1),e[S]||(e[S]=function(t){return e.extend(T,t)})({a:I,base:I,iframe:D,img:D,input:D,form:"action",link:I,script:D}),m=e[S],e.fn[k]=n(l,k),e.fn[C]=n(l,C),y.pushState=p=function(e,n){i(e)&&/^#/.test(e)&&n===c&&(n=2);var s=e!==c,o=h(t[E][I],s?e:{},s?n:2);t[E][I]=o+(/#/.test(o)?"":"#")},y.getState=f=function(e,t){return e===c||"boolean"==typeof e?d(e):d(t)[e]},y.removeState=function(t){var i={};t!==c&&(i=f(),e.each(e.isArray(t)?t:arguments,function(e,t){delete i[t]})),p(i,2)},w[x]=e.extend(w[x],{add:function(t){function i(e){var t=e[C]=h();e.getState=function(e,i){return e===c||"boolean"==typeof e?u(t,e):u(t,i)[e]},n.apply(this,arguments)}var n;return e.isFunction(t)?(n=t,i):(n=t.handler,void(t.handler=i))}})}(jQuery,this),function(e,t,i){"$:nomunge";function n(e){return e=e||t[r][l],e.replace(/^[^#]*#?(.*)$/,"$1")}var s,o=e.event.special,r="location",a="hashchange",l="href",c=e.browser,h=document.documentMode,u=c.msie&&(h===i||8>h),d="on"+a in t&&!u;e[a+"Delay"]=100,o[a]=e.extend(o[a],{setup:function(){return d?!1:void e(s.start)},teardown:function(){return d?!1:void e(s.stop)}}),s=function(){function i(){c=h=function(e){return e},u&&(o=e('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,h=function(){return n(o.document[r][l])},(c=function(e,t){if(e!==t){var i=o.document;i.open().close(),i[r].hash="#"+e}})(n()))}var s,o,c,h,d={};return d.start=function(){if(!s){var o=n();c||i(),function u(){var i=n(),d=h(o);i!==o?(c(o=i,d),e(t).trigger(a)):d!==o&&(t[r][l]=t[r][l].replace(/#.*/,"")+"#"+d),s=setTimeout(u,e[a+"Delay"])}()}},d.stop=function(){o||(s&&clearTimeout(s),s=0)},d}()}(jQuery,this),define("jquery.ba-bbq.1.2.1",function(){}),function(e,t,i){e("eb/components/related_events/event_view",["eb/components/related_events/constants","eb/components/related_events/event_feedback_view","eb/backbone/mixins","jquery.ba-bbq.1.2.1","templates/build/related_events"],function(e,n,s){return i.Backbone.View.extend({tagName:"article",className:"scroll-item event-item-wrapper",events:{"click .js-feedback-button":"handleFeedbackClick"},getTruncatedTitle:function(t){return"string"==typeof t&&t.length>e.MAX_EVENT_TITLE_LENGTH?t.slice(0,e.MAX_EVENT_TITLE_LENGTH-3)+"...":t},getEventTrackingURL:function(){return t.param.querystring(i.getEBServer()+"/event-redirect",{id:this.model.get("public_id"),shortname:this.model.get("shortname"),rank:this.model.collection.indexOf(this.model),affiliate:this.model.get("source")===e.ORGANIZER_STORE&&e.AFFILIATE_CODE_ORGANIZER||e.AFFILIATE_CODE_SIMILAR})},getContextData:function(){var t=this.model.get("source")===e.ORGANIZER_STORE;return{bigEventID:this.model.get("public_id"),eventName:this.getTruncatedTitle(this.model.get("title")),eventURL:this.getEventTrackingURL(),isOrganizerEvent:t,isRepeating:this.model.get("is_repeating"),nextDate:this.model.get("next_date_formatted"),organizerName:this.model.get("organizer_name"),rank:this.model.collection.indexOf(this.model),showFeedback:this.options.showFeedback&&!t,startDate:this.model.get("start_date_formatted")}},handleFeedbackClick:function(e){e.preventDefault(),this.$(".js-event-item").addClass("is-hidden"),this.feedbackView=new n({model:this.model}),this.$el.prepend(this.feedbackView.render().el),this.listenTo(this.feedbackView,"closeFeedback",this.closeFeedback)},closeFeedback:function(e){this.feedbackView&&this.feedbackView.remove(),this.$(".js-event-item").removeClass("is-hidden"),this.stopListening(),e.reviewed&&(this.$(".js-feedback-button").remove(),this.$(".js-feedback-complete").removeClass("is-hidden"))},render:function(){return this.$(".event-logo, .event-background").css({"background-image":"url("+this.model.get("logo")+")"}),this}}).mixin(s.withTemplate,{templateName:"event_view"})})}(window.define,window.jQuery,window.EB),function(e,t){function i(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}function n(t,n){var s=t.nodeName.toLowerCase();if("area"===s){var o,r=t.parentNode,a=r.name;return t.href&&a&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&i(o)):!1}return(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"==s?t.href||n:n)&&i(t)}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,n&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),s&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(t,!s)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s=e.ui[t].prototype;for(var o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var s=0;s<n.length;s++)e.options[n[s][0]]&&n[s][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,s,o,r){return e.ui.isOverAxis(t,n,o)&&e.ui.isOverAxis(i,s,r)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var n,s=0;null!=(n=t[s]);s++)try{e(n).triggerHandler("remove")}catch(o){}i(t)}}else{var n=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),n.call(e(this),t,i)})}}e.widget=function(t,i,n){var s,o=t.split(".")[0];t=t.split(".")[1],s=o+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s]=function(i){return!!e.data(i,t)},e[o]=e[o]||{},e[o][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var r=new i;r.options=e.extend(!0,{},r.options),e[o][t].prototype=e.extend(!0,r,{namespace:o,widgetName:t,widgetEventPrefix:e[o][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},n),e.widget.bridge(t,e[o][t])},e.widget.bridge=function(i,n){e.fn[i]=function(s){var o="string"==typeof s,r=Array.prototype.slice.call(arguments,1),a=this;return s=!o&&r.length?e.extend.apply(null,[!0,s].concat(r)):s,o&&"_"===s.charAt(0)?a:(this.each(o?function(){var n=e.data(this,i),o=n&&e.isFunction(n[s])?n[s].apply(n,r):n;return o!==n&&o!==t?(a=o,!1):void 0}:function(){var t=e.data(this,i);t?t.option(s||{})._init():e.data(this,i,new n(s,this))}),a)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var s=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(n===t)return this.options[i];s={},s[i]=n}return this._setOptions(s),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var s,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent,o)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1==i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(i.iframeFix&&e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;if(e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var n=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()
})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!=this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;var s=(i.offset(),"hidden"!=e(n).css("overflow"));this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(s?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName),o=t.pageX,r=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(o=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(r=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(o=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(r=a[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;r=a&&(c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3])?c-this.offset.click.top<a[1]?c+i.grid[1]:c-i.grid[1]:c;var h=i.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;o=a&&(h-this.offset.click.left<a[0]||h-this.offset.click.left>a[2])?h-this.offset.click.left<a[0]?h+i.grid[0]:h-i.grid[0]:h}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.18"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("draggable"),s=this;e.each(n.sortables,function(){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),n=i.options,s=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),s=n.options,o=s.snapTolerance,r=i.offset.left,a=r+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,h=n.snapElements.length-1;h>=0;h--){var u=n.snapElements[h].left,d=u+n.snapElements[h].width,p=n.snapElements[h].top,f=p+n.snapElements[h].height;if(r>u-o&&d+o>r&&l>p-o&&f+o>l||r>u-o&&d+o>r&&c>p-o&&f+o>c||a>u-o&&d+o>a&&l>p-o&&f+o>l||a>u-o&&d+o>a&&c>p-o&&f+o>c){if("inner"!=s.snapMode){var m=Math.abs(p-c)<=o,g=Math.abs(f-l)<=o,v=Math.abs(u-a)<=o,b=Math.abs(d-r)<=o;m&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left)}var _=m||g||v||b;if("outer"!=s.snapMode){var m=Math.abs(p-l)<=o,g=Math.abs(f-c)<=o,v=Math.abs(u-r)<=o,b=Math.abs(d-a)<=o;m&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[h].snapping&&(m||g||v||b||_)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=m||g||v||b||_}else n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,i=e.makeArray(e(t.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;!!i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;!!i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var s=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.18"}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var s=(t.positionAbs||t.position.absolute).left,o=s+t.helperProportions.width,r=(t.positionAbs||t.position.absolute).top,a=r+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,h=i.offset.top,u=h+i.proportions.height;switch(n){case"fit":return s>=l&&c>=o&&r>=h&&u>=a;case"intersect":return l<s+t.helperProportions.width/2&&o-t.helperProportions.width/2<c&&h<r+t.helperProportions.height/2&&a-t.helperProportions.height/2<u;case"pointer":var d=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(p,d,h,l,i.proportions.height,i.proportions.width);return f;case"touch":return(r>=h&&u>=r||a>=h&&u>=a||h>r&&a>u)&&(s>=l&&c>=s||o>=l&&c>=o||l>s&&o>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,o=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var r=0;r<n.length;r++)if(!(n[r].options.disabled||t&&!n[r].accept.call(n[r].element[0],t.currentItem||t.element))){for(var a=0;a<o.length;a++)if(o[a]==n[r].element[0]){n[r].proportions.height=0;continue e}n[r].visible="none"!=n[r].element.css("display"),n[r].visible&&("mousedown"==s&&n[r]._activate.call(n[r],i),n[r].offset=n[r].element.offset(),n[r].proportions={width:n[r].element[0].offsetWidth,height:n[r].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){!this.options||(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),s=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(!s)return;var o;if(this.options.greedy){var r=this.element.parents(":data(droppable):eq(0)");r.length&&(o=e.data(r[0],"droppable"),o.greedyChild="isover"==s?1:0)}o&&"isover"==s&&(o.isover=0,o.isout=1,o._out.call(o,i)),this[s]=1,this["isout"==s?"isover":"isout"]=0,this["isover"==s?"_over":"_out"].call(this,i),o&&"isout"==s&&(o.isout=0,o.isover=1,o._over.call(o,i))}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var s=0;s<n.length;s++){var o=e.trim(n[s]),r="ui-resizable-"+o,a=e('<div class="ui-resizable-handle '+r+'"></div>');/sw|se|ne|nw/.test(o)&&a.css({zIndex:++i.zIndex}),"se"==o&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(a)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=e(this.handles[i],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(o,s),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var n=this.options,s=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy();var r=t(this.helper.css("left")),a=t(this.helper.css("top"));n.containment&&(r+=e(n.containment).scrollLeft()||0,a+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:a},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:r,top:a},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),o.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i=this.helper,n=(this.options,this.originalMousePosition),s=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,a=this._change[s];if(!a)return!1;{var l=a.apply(this,[t,o,r]);e.browser.msie&&e.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var s=this._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&e.ui.hasScroll(s[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.helper.width()-a,height:n.helper.height()-r},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,h=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:h,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,s,o,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),s>r.minHeight&&(r.minHeight=s),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.options;this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),n=this.size,s=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==s&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"==s&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e,t){var n=(this.helper,this._vBoundaries),s=(this._aspectRatio||t.shiftKey,this.axis),o=i(e.width)&&n.maxWidth&&n.maxWidth<e.width,r=i(e.height)&&n.maxHeight&&n.maxHeight<e.height,a=i(e.width)&&n.minWidth&&n.minWidth>e.width,l=i(e.height)&&n.minHeight&&n.minHeight>e.height;a&&(e.width=n.minWidth),l&&(e.height=n.minHeight),o&&(e.width=n.maxWidth),r&&(e.height=n.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,u=/sw|nw|w/.test(s),d=/nw|ne|n/.test(s);a&&u&&(e.left=c-n.minWidth),o&&u&&(e.left=c-n.maxWidth),l&&d&&(e.top=h-n.minHeight),r&&d&&(e.top=h-n.maxHeight);var p=!e.width&&!e.height;return p&&!e.left&&e.top?e.top=null:p&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var s=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],o=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var i=parseInt(e,10)||0,n=parseInt(o[t],10)||0;return i+n})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.browser.msie&&e.browser.version<7,s=n?1:0,o=n?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-s+"px",top:this.elementOffset.top-s+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.18"}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("resizable"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("resizable-alsoresize"),o={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];
e.each(r,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,h&&c?{top:h,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),n=i.options,s=i.element,o=n.containment,r=o instanceof e?o.get(0):/parent/.test(o)?s.parent().get(0):o;if(r)if(i.containerElement=e(r),/document/.test(o)||o==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var a=e(r),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){l[e]=t(a.css("padding"+i))}),i.containerOffset=a.offset(),i.containerPosition=a.position(),i.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,u=i.containerSize.width,d=e.ui.hasScroll(r,"left")?r.scrollWidth:u,p=e.ui.hasScroll(r)?r.scrollHeight:h;i.parentData={element:r,left:c.left,top:c.top,width:d,height:p}}},resize:function(t){var i=e(this).data("resizable"),n=i.options,s=(i.containerSize,i.containerOffset),o=(i.size,i.position),r=i._aspectRatio||t.shiftKey,a={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=s),o.left<(i._helper?s.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-s.left:i.position.left-a.left),r&&(i.size.height=i.size.width/n.aspectRatio),i.position.left=n.helper?s.left:0),o.top<(i._helper?s.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-s.top:i.position.top),r&&(i.size.width=i.size.height*n.aspectRatio),i.position.top=i._helper?s.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var c=Math.abs((i._helper?i.offset.left-a.left:i.offset.left-a.left)+i.sizeDiff.width),h=Math.abs((i._helper?i.offset.top-a.top:i.offset.top-s.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));u&&d&&(c-=i.parentData.left),c+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-c,r&&(i.size.height=i.size.width/i.aspectRatio)),h+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-h,r&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,n=(t.position,t.containerOffset),s=t.containerPosition,o=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){{var t=e(this).data("resizable");t.options}t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){{var t=e(this).data("resizable");t.options}t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){{var i=e(this).data("resizable"),n=i.options,s=i.size,o=i.originalSize,r=i.originalPosition,a=i.axis;n._aspectRatio||t.shiftKey}n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var l=Math.round((s.width-o.width)/(n.grid[0]||1))*(n.grid[0]||1),c=Math.round((s.height-o.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(a)?(i.size.width=o.width+l,i.size.height=o.height+c):/^(ne)$/.test(a)?(i.size.width=o.width+l,i.size.height=o.height+c,i.position.top=r.top-c):/^(sw)$/.test(a)?(i.size.width=o.width+l,i.size.height=o.height+c,i.position.left=r.left-l):(i.size.width=o.width+l,i.size.height=o.height+c,i.position.top=r.top-c,i.position.left=r.left-l)}});var t=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().andSelf().each(function(){var n=e.data(this,"selectable-item");if(n){var s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,s=this.opos[0],o=this.opos[1],r=t.pageX,a=t.pageY;if(s>r){var l=r;r=s,s=l}if(o>a){var l=a;a=o,o=l}return this.helper.css({left:s,top:o,width:r-s,height:a-o}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>r||l.right<s||l.top>a||l.bottom<o):"fit"==n.tolerance&&(c=l.left>s&&l.right<r&&l.top>o&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&!t.metaKey&&!t.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element})))}}),!1}},_mouseStop:function(t){var i=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.18"})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);{var s=null,o=this;e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==o?(s=e(this),!1):void 0})}if(e.data(t.target,n.widgetName+"-item")==o&&(s=e(t.target)),!s)return!1;if(this.options.handle&&!i){var r=!1;if(e(this.options.handle,s).find("*").andSelf().each(function(){this==t.target&&(r=!0)}),!r)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var s=this.options,o=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,o._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var s=this.items.length-1;s>=0;s--){var o=this.items[s],r=o.item[0],a=this._intersectsWithPointer(o);if(a&&r!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=r&&!e.ui.contains(this.placeholder[0],r)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],r):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=n.placeholder.offset();n.reverting=!0,e(this.helper).animate({left:s.left-this.offset.parent.left-n.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:s.top-this.offset.parent.top-n.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,t._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,t._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=e.left,r=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,h=this.offset.click.left,u=n+c>a&&l>n+c&&t+h>o&&r>t+h;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=i&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"==r||"down"==o?2:1:o&&("down"==o?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&n||"left"==o&&!n:s&&("down"==s&&i||"up"==s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--)for(var r=e(s[o]),a=r.length-1;a>=0;a--){var l=e.data(r[a],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=n.length-1;o>=0;o--)n[o][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var o=s.length-1;o>=0;o--)for(var r=e(s[o]),a=r.length-1;a>=0;a--){var l=e.data(r[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var o=n.length-1;o>=0;o--)for(var c=n[o][1],h=n[o][0],a=0,u=h.length;u>a;a++){var d=e(h[a]);d.data(this.widgetName+"-item",c),i.push({item:d,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=s.outerWidth(),n.height=s.outerHeight());var o=s.offset();n.left=o.left,n.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var o=this.containers[i].element.offset();this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=t||this,n=i.options;if(!n.placeholder||n.placeholder.constructor==String){var s=n.placeholder;n.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(s||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return s||(t.style.visibility="hidden"),t},update:function(e,t){(!s||n.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,n=null,s=this.containers.length-1;s>=0;s--)if(!e.ui.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(i&&e.ui.contains(this.containers[s].element[0],i.element[0]))continue;i=this.containers[s],n=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else if(this.currentContainer!=this.containers[n]){for(var o=1e4,r=null,a=this.positionAbs[this.containers[n].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[n].element[0],this.items[l].item[0])){var c=this.items[l][this.containers[n].floating?"left":"top"];Math.abs(c-a)<o&&(o=Math.abs(c-a),r=this.items[l])}if(!r&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),s="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var o=t.pageX,r=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1];r=this.containment&&(a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3])?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this,o=this.counter;window.setTimeout(function(){o==s.counter&&s.refreshPositions(!n)},0)},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)("auto"==this._storedCSS[s]||"static"==this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&n.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){i||n.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!i&&(n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<n.length;s++)n[s].call(this,t);
this._trigger("stop",t,this._uiHash())}return!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.18"})}(jQuery),jQuery.effects||function(e,t){function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects[t]?!1:!0}function n(t,i,n,s){return"object"==typeof t&&(s=i,n=null,i=t,t=i.effect),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i=i||{},n=n||i.duration,n=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,s=s||i.complete,[t,i,n,s]}function s(e,t){var i,n={_:0};for(i in t)e[i]!=t[i]&&(n[i]=t[i]);return n}function o(t){var i,n;for(i in t)n=t[i],(null==n||e.isFunction(n)||i in u||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(n)))&&delete t[i];return t}function r(){var e,t,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(var s=i.length;s--;)e=i[s],"string"==typeof i[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n[t]=i[e]);else for(e in i)"string"==typeof i[e]&&(n[e]=i[e]);return n}function a(t,i){var n;do{if(n=e.curCSS(t,i),""!=n&&"transparent"!=n||e.nodeName(t,"body"))break;i="backgroundColor"}while(t=t.parentNode);return l(n)}function l(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(t))?c.transparent:c[e.trim(t).toLowerCase()]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.colorInit||(e.start=a(e.elem,i),e.end=l(e.end),e.colorInit=!0),e.elem.style[i]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},h=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,i,n,a){return e.isFunction(n)&&(a=n,n=null),this.queue(function(){var l,c=e(this),u=c.attr("style")||" ",d=o(r.call(this)),p=c.attr("class");e.each(h,function(e,i){t[i]&&c[i+"Class"](t[i])}),l=o(r.call(this)),c.attr("class",p),c.animate(s(d,l),{queue:!1,duration:i,easing:n,complete:function(){e.each(h,function(e,i){t[i]&&c[i+"Class"](t[i])}),"object"==typeof c.attr("style")?(c.attr("style").cssText="",c.attr("style").cssText=u):c.attr("style",u),a&&a.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,s){return i?e.effects.animateClass.apply(this,[{add:t},i,n,s]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,s){return i?e.effects.animateClass.apply(this,[{remove:t},i,n,s]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,s,o,r){return"boolean"==typeof n||n===t?s?e.effects.animateClass.apply(this,[n?{add:i}:{remove:i},s,o,r]):this._toggleClass(i,n):e.effects.animateClass.apply(this,[{toggle:i},n,s,o])},switchClass:function(t,i,n,s,o){return e.effects.animateClass.apply(this,[{add:i,remove:t},n,s,o])}}),e.extend(e.effects,{version:"1.8.18",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s=document.activeElement;return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),n=t.parent(),"static"==t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(i).show()},removeWrapper:function(t){var i,n=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(i=t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),i):t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){unit=t.cssUnit(i),unit[0]>0&&(s[i]=unit[0]*n+unit[1])}),s}}),e.fn.extend({effect:function(t){var i=n.apply(this,arguments),s={options:i[1],duration:i[2],callback:i[3]},o=s.options.mode,r=e.effects[t];return e.fx.off||!r?o?this[o](s.duration,s.callback):this.each(function(){s.callback&&s.callback.call(this)}):r.call(this,s)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=n.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=n.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var s=n.apply(this,arguments);return s[1].mode="toggle",this.effect.apply(this,s)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,i,n,s,o){return e.easing[e.easing.def](t,i,n,s,o)},easeInQuad:function(e,t,i,n,s){return n*(t/=s)*t+i},easeOutQuad:function(e,t,i,n,s){return-n*(t/=s)*(t-2)+i},easeInOutQuad:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,s){return n*(t/=s)*t*t+i},easeOutCubic:function(e,t,i,n,s){return n*((t=t/s-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,s){return n*(t/=s)*t*t*t+i},easeOutQuart:function(e,t,i,n,s){return-n*((t=t/s-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,s){return n*(t/=s)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,s){return n*((t=t/s-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,s){return-n*Math.cos(t/s*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,s){return n*Math.sin(t/s*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,s){return-n/2*(Math.cos(Math.PI*t/s)-1)+i},easeInExpo:function(e,t,i,n,s){return 0==t?i:n*Math.pow(2,10*(t/s-1))+i},easeOutExpo:function(e,t,i,n,s){return t==s?i+n:n*(-Math.pow(2,-10*t/s)+1)+i},easeInOutExpo:function(e,t,i,n,s){return 0==t?i:t==s?i+n:(t/=s/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,n,s){return-n*(Math.sqrt(1-(t/=s)*t)-1)+i},easeOutCirc:function(e,t,i,n,s){return n*Math.sqrt(1-(t=t/s-1)*t)+i},easeInOutCirc:function(e,t,i,n,s){return(t/=s/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,s){var o=1.70158,r=0,a=n;if(0==t)return i;if(1==(t/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-o)*Math.PI/r))+i},easeOutElastic:function(e,t,i,n,s){var o=1.70158,r=0,a=n;if(0==t)return i;if(1==(t/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*t)*Math.sin(2*(t*s-o)*Math.PI/r)+n+i},easeInOutElastic:function(e,t,i,n,s){var o=1.70158,r=0,a=n;if(0==t)return i;if(2==(t/=s/2))return i+n;if(r||(r=.3*s*1.5),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-o)*Math.PI/r)+i:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*s-o)*Math.PI/r)*.5+n+i},easeInBack:function(e,i,n,s,o,r){return r==t&&(r=1.70158),s*(i/=o)*i*((r+1)*i-r)+n},easeOutBack:function(e,i,n,s,o,r){return r==t&&(r=1.70158),s*((i=i/o-1)*i*((r+1)*i+r)+1)+n},easeInOutBack:function(e,i,n,s,o,r){return r==t&&(r=1.70158),(i/=o/2)<1?s/2*i*i*(((r*=1.525)+1)*i-r)+n:s/2*((i-=2)*i*(((r*=1.525)+1)*i+r)+2)+n},easeInBounce:function(t,i,n,s,o){return s-e.easing.easeOutBounce(t,o-i,0,s,o)+n},easeOutBounce:function(e,t,i,n,s){return(t/=s)<1/2.75?7.5625*n*t*t+i:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(t,i,n,s,o){return o/2>i?.5*e.easing.easeInBounce(t,2*i,0,s,o)+n:.5*e.easing.easeOutBounce(t,2*i-o,0,s,o)+.5*s+n}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],s=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.direction||"vertical";e.effects.save(i,n),i.show();var r=e.effects.createWrapper(i).css({overflow:"hidden"}),a="vertical"==o?"height":"width",l="vertical"==o?r.height():r.width();"show"==s&&r.css(a,0);var c={};c[a]="show"==s?l:0,r.animate(c,t.duration,t.options.easing,function(){"hide"==s&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],s=e.effects.setMode(i,t.options.mode||"effect"),o=t.options.direction||"up",r=t.options.distance||20,a=t.options.times||5,l=t.duration||250;/show|hide/.test(s)&&n.push("opacity"),e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var c="up"==o||"down"==o?"top":"left",h="up"==o||"left"==o?"pos":"neg",r=t.options.distance||("top"==c?i.outerHeight({margin:!0})/3:i.outerWidth({margin:!0})/3);if("show"==s&&i.css("opacity",0).css(c,"pos"==h?-r:r),"hide"==s&&(r/=2*a),"hide"!=s&&a--,"show"==s){var u={opacity:1};u[c]=("pos"==h?"+=":"-=")+r,i.animate(u,l/2,t.options.easing),r/=2,a--}for(var d=0;a>d;d++){var p={},f={};p[c]=("pos"==h?"-=":"+=")+r,f[c]=("pos"==h?"+=":"-=")+r,i.animate(p,l/2,t.options.easing).animate(f,l/2,t.options.easing),r="hide"==s?2*r:r/2}if("hide"==s){var u={opacity:0};u[c]=("pos"==h?"-=":"+=")+r,i.animate(u,l/2,t.options.easing,function(){i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}else{var p={},f={};p[c]=("pos"==h?"-=":"+=")+r,f[c]=("pos"==h?"+=":"-=")+r,i.animate(p,l/2,t.options.easing).animate(f,l/2,t.options.easing,function(){e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e){e.effects.clip=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.direction||"vertical";e.effects.save(i,n),i.show();var r=e.effects.createWrapper(i).css({overflow:"hidden"}),a="IMG"==i[0].tagName?r:i,l={size:"vertical"==o?"height":"width",position:"vertical"==o?"top":"left"},c="vertical"==o?a.height():a.width();"show"==s&&(a.css(l.size,0),a.css(l.position,c/2));var h={};h[l.size]="show"==s?c:0,h[l.position]="show"==s?0:c/2,a.animate(h,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==s&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.drop=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","opacity"],s=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.direction||"left";e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var r="up"==o||"down"==o?"top":"left",a="up"==o||"left"==o?"pos":"neg",l=t.options.distance||("top"==r?i.outerHeight({margin:!0})/2:i.outerWidth({margin:!0})/2);"show"==s&&i.css("opacity",0).css(r,"pos"==a?-l:l);var c={opacity:"show"==s?1:0};c[r]=("show"==s?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,i.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==s&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.explode=function(t){return this.queue(function(){var i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var s=e(this).show().css("visibility","hidden"),o=s.offset();o.top-=parseInt(s.css("marginTop"),10)||0,o.left-=parseInt(s.css("marginLeft"),10)||0;for(var r=s.outerWidth(!0),a=s.outerHeight(!0),l=0;i>l;l++)for(var c=0;n>c;c++)s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-c*(r/n),top:-l*(a/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r/n,height:a/i,left:o.left+c*(r/n)+("show"==t.options.mode?(c-Math.floor(n/2))*(r/n):0),top:o.top+l*(a/i)+("show"==t.options.mode?(l-Math.floor(i/2))*(a/i):0),opacity:"show"==t.options.mode?0:1}).animate({left:o.left+c*(r/n)+("show"==t.options.mode?0:(c-Math.floor(n/2))*(r/n)),top:o.top+l*(a/i)+("show"==t.options.mode?0:(l-Math.floor(i/2))*(a/i)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout(function(){"show"==t.options.mode?s.css({visibility:"visible"}):s.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(s[0]),s.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e){e.effects.fade=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.fold=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],s=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.size||15,r=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(i,n),i.show();var l=e.effects.createWrapper(i).css({overflow:"hidden"}),c="show"==s!=r,h=c?["width","height"]:["height","width"],u=c?[l.width(),l.height()]:[l.height(),l.width()],d=/([0-9]+)%/.exec(o);d&&(o=parseInt(d[1],10)/100*u["hide"==s?0:1]),"show"==s&&l.css(r?{height:0,width:o}:{height:o,width:0});var p={},f={};p[h[0]]="show"==s?u[0]:o,f[h[1]]="show"==s?u[1]:0,l.animate(p,a,t.options.easing).animate(f,a,t.options.easing,function(){"hide"==s&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue(function(){var i=e(this),n=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(i,t.options.mode||"show"),o={backgroundColor:i.css("backgroundColor")};"hide"==s&&(o.opacity=0),e.effects.save(i,n),i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==s&&i.hide(),e.effects.restore(i,n),"show"==s&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"show");times=2*(t.options.times||5)-1,duration=t.duration?t.duration/2:e.fx.speeds._default/2,isVisible=i.is(":visible"),animateTo=0,isVisible||(i.css("opacity",0).show(),animateTo=1),("hide"==n&&isVisible||"show"==n&&!isVisible)&&times--;for(var s=0;times>s;s++)i.animate({opacity:animateTo},duration,t.options.easing),animateTo=(animateTo+1)%2;i.animate({opacity:animateTo},duration,t.options.easing,function(){0==animateTo&&i.hide(),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(e){e.effects.puff=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"hide"),s=parseInt(t.options.percent,10)||150,o=s/100,r={height:i.height(),width:i.width()};e.extend(t.options,{fade:!0,mode:n,percent:"hide"==n?s:100,from:"hide"==n?r:{height:r.height*o,width:r.width*o}}),i.effect("scale",t.options,t.duration,t.callback),i.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var i=e(this),n=e.extend(!0,{},t.options),s=e.effects.setMode(i,t.options.mode||"effect"),o=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==s?0:100),r=t.options.direction||"both",a=t.options.origin;"effect"!=s&&(n.origin=a||["middle","center"],n.restore=!0);var l={height:i.height(),width:i.width()};i.from=t.options.from||("show"==s?{height:0,width:0}:l);var c={y:"horizontal"!=r?o/100:1,x:"vertical"!=r?o/100:1};i.to={height:l.height*c.y,width:l.width*c.x},t.options.fade&&("show"==s&&(i.from.opacity=0,i.to.opacity=1),"hide"==s&&(i.from.opacity=1,i.to.opacity=0)),n.from=i.from,n.to=i.to,n.mode=s,i.effect("size",n,t.duration,t.callback),i.dequeue()})},e.effects.size=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","width","height","overflow","opacity"],s=["position","top","bottom","left","right","overflow","opacity"],o=["width","height","overflow"],r=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.effects.setMode(i,t.options.mode||"effect"),h=t.options.restore||!1,u=t.options.scale||"both",d=t.options.origin,p={height:i.height(),width:i.width()};if(i.from=t.options.from||p,i.to=t.options.to||p,d){var f=e.effects.getBaseline(d,p);i.from.top=(p.height-i.from.height)*f.y,i.from.left=(p.width-i.from.width)*f.x,i.to.top=(p.height-i.to.height)*f.y,i.to.left=(p.width-i.to.width)*f.x}var m={from:{y:i.from.height/p.height,x:i.from.width/p.width},to:{y:i.to.height/p.height,x:i.to.width/p.width}};("box"==u||"both"==u)&&(m.from.y!=m.to.y&&(n=n.concat(a),i.from=e.effects.setTransition(i,a,m.from.y,i.from),i.to=e.effects.setTransition(i,a,m.to.y,i.to)),m.from.x!=m.to.x&&(n=n.concat(l),i.from=e.effects.setTransition(i,l,m.from.x,i.from),i.to=e.effects.setTransition(i,l,m.to.x,i.to))),("content"==u||"both"==u)&&m.from.y!=m.to.y&&(n=n.concat(r),i.from=e.effects.setTransition(i,r,m.from.y,i.from),i.to=e.effects.setTransition(i,r,m.to.y,i.to)),e.effects.save(i,h?n:s),i.show(),e.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),("content"==u||"both"==u)&&(a=a.concat(["marginTop","marginBottom"]).concat(r),l=l.concat(["marginLeft","marginRight"]),o=n.concat(a).concat(l),i.find("*[width]").each(function(){child=e(this),h&&e.effects.save(child,o);var i={height:child.height(),width:child.width()};child.from={height:i.height*m.from.y,width:i.width*m.from.x},child.to={height:i.height*m.to.y,width:i.width*m.to.x},m.from.y!=m.to.y&&(child.from=e.effects.setTransition(child,a,m.from.y,child.from),child.to=e.effects.setTransition(child,a,m.to.y,child.to)),m.from.x!=m.to.x&&(child.from=e.effects.setTransition(child,l,m.from.x,child.from),child.to=e.effects.setTransition(child,l,m.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,function(){h&&e.effects.restore(child,o)})})),i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==c&&i.hide(),e.effects.restore(i,h?n:s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.shake=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],s=(e.effects.setMode(i,t.options.mode||"effect"),t.options.direction||"left"),o=t.options.distance||20,r=t.options.times||3,a=t.duration||t.options.duration||140;e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var l="up"==s||"down"==s?"top":"left",c="up"==s||"left"==s?"pos":"neg",h={},u={},d={};h[l]=("pos"==c?"-=":"+=")+o,u[l]=("pos"==c?"+=":"-=")+2*o,d[l]=("pos"==c?"-=":"+=")+2*o,i.animate(h,a,t.options.easing);for(var p=1;r>p;p++)i.animate(u,a,t.options.easing).animate(d,a,t.options.easing);i.animate(u,a,t.options.easing).animate(h,a/2,t.options.easing,function(){e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e){e.effects.slide=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],s=e.effects.setMode(i,t.options.mode||"show"),o=t.options.direction||"left";e.effects.save(i,n),i.show(),e.effects.createWrapper(i).css({overflow:"hidden"});var r="up"==o||"down"==o?"top":"left",a="up"==o||"left"==o?"pos":"neg",l=t.options.distance||("top"==r?i.outerHeight({margin:!0}):i.outerWidth({margin:!0}));"show"==s&&i.css(r,"pos"==a?isNaN(l)?"-"+l:-l:l);var c={};c[r]=("show"==s?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,i.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==s&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue(function(){var i=e(this),n=e(t.options.to),s=n.offset(),o={top:s.top,left:s.left,height:n.innerHeight(),width:n.innerWidth()},r=i.offset(),a=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:r.top,left:r.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(o,t.duration,t.options.easing,function(){a.remove(),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var n=t.element.find("a").filter(i.navigationFilter).eq(0);if(n.length){var s=n.closest(".ui-accordion-header");t.active=s.length?s:n.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&i.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(i),"icons"==t&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return o?(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),!1):!0}},resize:function(){var t,i=this.options;if(i.fillSpace){if(e.browser.msie){var n=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var n=this.options;if(!n.disabled){if(!t.target){if(!n.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),this.active.next().addClass("ui-accordion-content-active");var s=this.active.next(),o={options:n,newHeader:e([]),oldHeader:n.active,newContent:e([]),oldContent:s},r=this.active=e([]);return void this._toggle(r,s,o)}var a=e(t.currentTarget||i),l=a[0]===this.active[0];if(n.active=n.collapsible&&l?!1:this.headers.index(a),this.running||!n.collapsible&&l)return;var c=this.active,r=a.next(),s=this.active.next(),o={options:n,newHeader:l&&n.collapsible?e([]):a,oldHeader:this.active,newContent:l&&n.collapsible?e([]):r,oldContent:s},h=this.headers.index(this.active[0])>this.headers.index(a[0]);return this.active=l?e([]):a,this._toggle(r,s,o,l,h),c.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),l||(a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(n.icons.header).addClass(n.icons.headerSelected),a.next().addClass("ui-accordion-content-active")),void 0}},_toggle:function(t,i,n,s,o){var r=this,a=r.options;r.toShow=t,r.toHide=i,r.data=n;var l=function(){return r?r._completed.apply(r,arguments):void 0};if(r._trigger("changestart",null,r.data),r.running=0===i.size()?t.size():i.size(),a.animated){var c={};c=a.collapsible&&s?{toShow:e([]),toHide:i,complete:l,down:o,autoHeight:a.autoHeight||a.fillSpace}:{toShow:t,toHide:i,complete:l,down:o,autoHeight:a.autoHeight||a.fillSpace},a.proxied||(a.proxied=a.animated),a.proxiedDuration||(a.proxiedDuration=a.duration),a.animated=e.isFunction(a.proxied)?a.proxied(c):a.proxied,a.duration=e.isFunction(a.proxiedDuration)?a.proxiedDuration(c):a.proxiedDuration;var h=e.ui.accordion.animations,u=a.duration,d=a.animated;d&&!h[d]&&!e.easing[d]&&(d="slide"),h[d]||(h[d]=function(e){this.slide(e,{easing:d,duration:u||700})}),h[d](c)}else a.collapsible&&s?t.toggle():(i.hide(),t.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))
}}),e.extend(e.ui.accordion,{version:"1.8.18",animations:{slide:function(t,i){if(t=e.extend({easing:"swing",duration:300},t,i),t.toHide.size()){if(!t.toShow.size())return void t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);var n,s=t.toShow.css("overflow"),o=0,r={},a={},l=["height","paddingTop","paddingBottom"],c=t.toShow;n=c[0].style.width,c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0)),e.each(l,function(i,n){a[n]="hide";var s=(""+e.css(t.toShow[0],n)).match(/^([\d+-.]+)(.*)$/);r[n]={value:s[1],unit:s[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(a,{step:function(e,i){"height"==i.prop&&(o=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=o*r[i.prop].value+r[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:n,overflow:s}),t.complete()}})}else t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t)},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,n=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!i.options.disabled&&!i.element.propAttr("readOnly")){t=!1;var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:i._move("previousPage",n);break;case s.PAGE_DOWN:i._move("nextPage",n);break;case s.UP:i._move("previous",n),n.preventDefault();break;case s.DOWN:i._move("next",n),n.preventDefault();break;case s.ENTER:case s.NUMPAD_ENTER:i.menu.active&&(t=!0,n.preventDefault());case s.TAB:if(!i.menu.active)return;i.menu.select(n);break;case s.ESCAPE:i.element.val(i.term),i.close(n);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,n))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(t){var n=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target!==i.element[0]&&t.target!==n&&!e.ui.contains(n,t.target)&&i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var n=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:n})&&/^key/.test(e.originalEvent.type)&&i.element.val(n.value)},selected:function(e,t){var s=t.item.data("item.autocomplete"),o=i.previous;i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=o,setTimeout(function(){i.previous=o,i.selectedItem=s},1)),!1!==i._trigger("select",e,{item:s})&&i.element.val(s.value),i.term=i.element.val(),i.close(e),i.selectedItem=s},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")},e(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var i,n,s=this;e.isArray(this.options.source)?(i=this.options.source,this.source=function(t,n){n(e.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(i,o){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:n,data:i,dataType:"json",context:{autocompleteRequest:++t},success:function(e){this.autocompleteRequest===t&&o(e)},error:function(){this.autocompleteRequest===t&&o([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e))return this.element.val(this.term),void this.menu.deactivate();this.menu[e](t)}else this.search(null,t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){!e(i.target).closest(".ui-menu-item a").length||(i.preventDefault(),t.select(i))}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,n=this.element.scrollTop(),s=this.element.height();0>i?this.element.scrollTop(n+i):i>=s&&this.element.scrollTop(n+i-s+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){!this.active||(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(this.active){var n=this.active[e+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(t))}else this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(t,this.element.children(".ui-menu-item:first"));var i=this.active.offset().top,n=this.element.height(),s=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-n+e(this).height();return 10>t&&t>-10});s.length||(s=this.element.children(".ui-menu-item:last")),this.activate(t,s)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(t,this.element.children(".ui-menu-item:last"));var i=this.active.offset().top,n=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+n-e(this).height();return 10>t&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e){var t,i,n,s,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var i=t.name,n=t.form,s=e([]);return i&&(s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,a=this.options,h="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(h?"":" ui-state-active"),d="ui-state-focus";null===a.label&&(a.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){a.disabled||(e(this).addClass("ui-state-hover"),this===t&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){a.disabled||e(this).removeClass(u)}).bind("click.button",function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){r.buttonElement.addClass(d)}).bind("blur.button",function(){r.buttonElement.removeClass(d)}),h&&(this.element.bind("change.button",function(){s||r.refresh()}),this.buttonElement.bind("mousedown.button",function(e){a.disabled||(s=!1,i=e.pageX,n=e.pageY)}).bind("mouseup.button",function(e){!a.disabled&&(i!==e.pageX||n!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return a.disabled||s?!1:(e(this).toggleClass("ui-state-active"),void r.buttonElement.attr("aria-pressed",r.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(a.disabled||s)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var t=r.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,e(document).one("mouseup",function(){t=null}),void 0)}).bind("mouseup.button",function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){return a.disabled?!1:void((t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+r+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?i?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",i))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,i){"disabled"===t&&this.buttons.button("option",t,i),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var i=$(e.target).closest(t);!i.length||i.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){var n=$(i.target).closest(t);!$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])&&!!n.length&&(n.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n.addClass("ui-state-hover"),n.hasClass("ui-datepicker-prev")&&n.addClass("ui-datepicker-prev-hover"),n.hasClass("ui-datepicker-next")&&n.addClass("ui-datepicker-next-hover"))})}function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend($.ui,{datepicker:{version:"1.8.18"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var s=this._get(t,"showOn");if(("focus"==s||"both"==s)&&e.focus(this._showDatepicker),"button"==s||"both"==s){var o=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?o:$("<img/>").attr({src:r,alt:o,title:o}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,s){var o=this._dialogInst;if(!o){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(o,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+h]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var s=t.children("."+this._inlineClass);s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var s=t.children("."+this._inlineClass);s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var s=t||{};if("string"==typeof t&&(s={},s[t]=i),n){this._curInst==n&&this._hideDatepicker();var o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max");extendRemove(n.settings,s),null!==r&&s.dateFormat!==undefined&&s.minDate===undefined&&(n.settings.minDate=this._formatDate(n,r)),null!==a&&s.dateFormat!==undefined&&s.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,a)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,o),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var s=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);s[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,s[0]);var o=$.datepicker._get(t,"onSelect");if(o){var r=$.datepicker._formatDate(t);o.apply(t.input?t.input[0]:null,[r,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n===!1)return;extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var s=!1;$(e).parents().each(function(){return s|="fixed"==$(this).css("position"),!s}),s&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var o={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),o=$.datepicker._checkOffset(t,o,s),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),!t.inline){var r=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[r]?t.dpDiv.show(r,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[r||"show"](r?a:null,l),(!r||!a)&&l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}},_updateDatepicker:function(e){var t=this;
t.maxRows=4;var i=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e));var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var s=this._getNumberOfMonths(e),o=s[1],r=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),e.dpDiv[(1!=s[0]||1!=s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout(function(){a===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),a=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+$(document).scrollLeft(),l=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?n-o:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>a&&a>n?Math.abs(t.left+n-a):0),t.top-=Math.min(t.top,t.top+s>l&&l>s?Math.abs(s+r):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),s=this,o=function(){$.datepicker._tidyDialog(t),s._curInst=null};$.effects&&$.effects[i]?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,o):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),s=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(s,t+("M"==i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),s=this._getInst(n[0]);s["selected"+("M"==i?"Month":"Year")]=s["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(n)},_selectDay:function(e,t,i,n){var s=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(s[0])){var o=this._getInst(s[0]);o.selectedDay=o.currentDay=$("a",n).html(),o.selectedMonth=o.currentMonth=t,o.selectedYear=o.currentYear=i,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(e){{var t=$(e);this._getInst(t[0])}this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var s=this._get(n,"onSelect");s?s.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(s)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,h=-1,u=-1,d=!1,p=function(t){var i=b+1<e.length&&e.charAt(b+1)==t;return i&&b++,i},f=function(e){var i=p(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,s=new RegExp("^\\d{1,"+n+"}"),o=t.substring(v).match(s);if(!o)throw"Missing number at position "+v;return v+=o[0].length,parseInt(o[0],10)},m=function(e,i,n){var s=$.map(p(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),o=-1;if($.each(s,function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(o=i[0],v+=n.length,!1):void 0}),-1!=o)return o+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<e.length;b++)if(d)"'"!=e.charAt(b)||p("'")?g():d=!1;else switch(e.charAt(b)){case"d":h=f("d");break;case"D":m("D",s,o);break;case"o":u=f("o");break;case"m":c=f("m");break;case"M":c=m("M",r,a);break;case"y":l=f("y");break;case"@":var _=new Date(f("@"));l=_.getFullYear(),c=_.getMonth()+1,h=_.getDate();break;case"!":var _=new Date((f("!")-this._ticksTo1970)/1e4);l=_.getFullYear(),c=_.getMonth()+1,h=_.getDate();break;case"'":p("'")?g():d=!0;break;default:g()}if(v<t.length)throw"Extra/unparsed characters found in date: "+t.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),u>-1)for(c=1,h=u;;){var y=this._getDaysInMonth(l,c-1);if(y>=h)break;c++,h-=y}var _=this._daylightSavingAdjust(new Date(l,c-1,h));if(_.getFullYear()!=l||_.getMonth()+1!=c||_.getDate()!=h)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,a=function(t){var i=d+1<e.length&&e.charAt(d+1)==t;return i&&d++,i},l=function(e,t,i){var n=""+t;if(a(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return a(e)?n[t]:i[t]},h="",u=!1;if(t)for(var d=0;d<e.length;d++)if(u)"'"!=e.charAt(d)||a("'")?h+=e.charAt(d):u=!1;else switch(e.charAt(d)){case"d":h+=l("d",t.getDate(),2);break;case"D":h+=c("D",t.getDay(),n,s);break;case"o":h+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=l("m",t.getMonth()+1,2);break;case"M":h+=c("M",t.getMonth(),o,r);break;case"y":h+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?h+="'":u=!0;break;default:h+=e.charAt(d)}return h},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=s+1<e.length&&e.charAt(s+1)==t;return i&&s++,i},s=0;s<e.length;s++)if(i)"'"!=e.charAt(s)||n("'")?t+=e.charAt(s):i=!1;else switch(e.charAt(s)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(s)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,s=this._get(e,"dateFormat"),o=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{i=this.parseDate(s,o,r)||n}catch(a){this.log(a),o=t?"":o}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=o?i.getDate():0,e.currentMonth=o?i.getMonth():0,e.currentYear=o?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,s=n.getFullYear(),o=n.getMonth(),r=n.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(t);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(s,o))}l=a.exec(t)}return new Date(s,o,r)},o=null==t||""===t?i:"string"==typeof t?s(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return o=o&&"Invalid Date"==o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),(s!=e.selectedMonth||o!=e.selectedYear)&&!i&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),s=this._get(e,"hideIfNoPrevNext"),o=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=r[0]||1!=r[1],h=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),d=this._getMinMaxDate(e,"max"),p=e.drawMonth-a,f=e.drawYear;if(0>p&&(p+=12,f--),d){var m=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-r[0]*r[1]+1,d.getDate()));for(m=u&&u>m?u:m;this._daylightSavingAdjust(new Date(f,p,1))>m;)p--,0>p&&(p=11,f--)}e.drawMonth=p,e.drawYear=f;var g=this._get(e,"prevText");g=o?this.formatDate(g,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', -"+l+", 'M');\" title=\""+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");b=o?this.formatDate(b,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(e)):b;var _=this._canAdjustMonth(e,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', +"+l+", 'M');\" title=\""+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",y=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?h:t;y=o?this.formatDate(y,w,this._getFormatConfig(e)):y;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",k=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+e.id+"');\">"+y+"</button>":"")+(i?"":x)+"</div>":"",C=parseInt(this._get(e,"firstDay"),10);C=isNaN(C)?0:C;for(var S=this._get(e,"showWeek"),E=this._get(e,"dayNames"),I=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),D=this._get(e,"monthNames"),M=this._get(e,"monthNamesShort"),A=this._get(e,"beforeShowDay"),T=this._get(e,"showOtherMonths"),P=this._get(e,"selectOtherMonths"),F=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),N="",O=0;O<r[0];O++){var H="";this.maxRows=4;for(var R=0;R<r[1];R++){var L=this._daylightSavingAdjust(new Date(f,p,e.selectedDay)),z=" ui-corner-all",j="";if(c){if(j+='<div class="ui-datepicker-group',r[1]>1)switch(R){case 0:j+=" ui-datepicker-group-first",z=" ui-corner-"+(i?"right":"left");break;case r[1]-1:j+=" ui-datepicker-group-last",z=" ui-corner-"+(i?"left":"right");break;default:j+=" ui-datepicker-group-middle",z=""}j+='">'}j+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+z+'">'+(/all|left/.test(z)&&0==O?i?_:v:"")+(/all|right/.test(z)&&0==O?i?v:_:"")+this._generateMonthYearHeader(e,p,f,u,d,O>0||R>0,D,M)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var B=S?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",V=0;7>V;V++){var W=(V+C)%7;B+="<th"+((V+C+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+E[W]+'">'+I[W]+"</span></th>"}j+=B+"</tr></thead><tbody>";var q=this._getDaysInMonth(f,p);f==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,q));var U=(this._getFirstDayOfMonth(f,p)-C+7)%7,Y=Math.ceil((U+q)/7),X=c&&this.maxRows>Y?this.maxRows:Y;this.maxRows=X;for(var G=this._daylightSavingAdjust(new Date(f,p,1-U)),K=0;X>K;K++){j+="<tr>";for(var Q=S?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"",V=0;7>V;V++){var Z=A?A.apply(e.input?e.input[0]:null,[G]):[!0,""],J=G.getMonth()!=p,et=J&&!P||!Z[0]||u&&u>G||d&&G>d;Q+='<td class="'+((V+C+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(G.getTime()==L.getTime()&&p==e.selectedMonth&&e._keyEvent||F.getTime()==G.getTime()&&F.getTime()==L.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!T?"":" "+Z[1]+(G.getTime()==h.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(J&&!T||!Z[2]?"":' title="'+Z[2]+'"')+(et?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+e.id+"',"+G.getMonth()+","+G.getFullYear()+', this);return false;"')+">"+(J&&!T?"&#xa0;":et?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==h.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}j+=Q+"</tr>"}p++,p>11&&(p=0,f++),j+="</tbody></table>"+(c?"</div>"+(r[0]>0&&R==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),H+=j}N+=H}return N+=k+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,N},_generateMonthYearHeader:function(e,t,i,n,s,o,r,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),h=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',d="";if(o||!l)d+='<span class="ui-datepicker-month">'+r[t]+"</span>";else{var p=n&&n.getFullYear()==i,f=s&&s.getFullYear()==i;d+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" >";for(var m=0;12>m;m++)(!p||m>=n.getMonth())&&(!f||m<=s.getMonth())&&(d+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");d+="</select>"}if(h||(u+=d+(!o&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!c)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},_=b(g[0]),y=Math.max(_,b(g[1]||""));for(_=n?Math.max(_,n.getFullYear()):_,y=s?Math.min(y,s.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" >";y>=_;_++)e.yearshtml+='<option value="'+_+'"'+(_==i?' selected="selected"':"")+">"+_+"</option>";e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),h&&(u+=(!o&&l&&c?"":"&#xa0;")+d),u+="</div>",u},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),s=e.drawMonth+("M"==i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"==i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return s=n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.18",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},o=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var t=this,n=t.options,s=n.title||"&#160;",o=e.ui.dialog.getTitleId(t.element),r=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(i+n.dialogClass).css({zIndex:n.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){n.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(e){t.moveToTop(!1,e)}),a=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(r),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(r)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(n.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",o).html(s).prependTo(a)}e.isFunction(n.beforeclose)&&!e.isFunction(n.beforeClose)&&(n.beforeClose=n.beforeclose),a.find("*").add(a).disableSelection(),n.draggable&&e.fn.draggable&&t._makeDraggable(),n.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(n.buttons),t._isOpen=!1,e.fn.bgiframe&&r.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var i,n,s=this;return!1!==s._trigger("beforeClose",t)?(s.overlay&&s.overlay.destroy(),s.uiDialog.unbind("keypress.ui-dialog"),s._isOpen=!1,s.options.hide?s.uiDialog.hide(s.options.hide,function(){s._trigger("close",t)}):(s.uiDialog.hide(),s._trigger("close",t)),e.ui.dialog.overlay.resize(),s.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==s.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),e.ui.dialog.maxZ=i),s):void 0},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,s=this,o=s.options;return o.modal&&!t||!o.stack&&!o.modal?s._trigger("focus",i):(o.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=o.zIndex),s.overlay&&(e.ui.dialog.maxZ+=1,s.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),n={scrollTop:s.element.scrollTop(),scrollLeft:s.element.scrollLeft()},e.ui.dialog.maxZ+=1,s.uiDialog.css("z-index",e.ui.dialog.maxZ),s.element.attr(n),s._trigger("focus",i),s)},open:function(){if(!this._isOpen){var t=this,i=t.options,n=t.uiDialog;return t.overlay=i.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(i.position),n.show(i.show),t.moveToTop(!0),i.modal&&n.bind("keydown.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",this),n=i.filter(":first"),s=i.filter(":last");if(t.target===s[0]&&!t.shiftKey)return n.focus(1),!1;if(t.target===n[0]&&t.shiftKey)return s.focus(1),!1}}),e(t.element.find(":tabbable").get().concat(n.find(".ui-dialog-buttonpane :tabbable").get().concat(n.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,n=!1,s=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),r=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(s);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(n=!0)}),n&&(e.each(t,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;var s=e('<button type="button"></button>').click(function(){n.click.apply(i.element[0],arguments)}).appendTo(r);e.each(n,function(e,t){"click"!==e&&(e in o?s[e](t):s.attr(e,t))}),e.fn.button&&s.button()}),s.appendTo(i.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i,n=this,s=n.options,o=e(document);n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(o,r){i="auto"===s.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",o,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,a){s.position=[a.position.left-o.scrollLeft(),a.position.top-o.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),n._trigger("dragStop",r,t(a)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var s=this,o=s.options,r=s.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";s.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:s.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:s._minHeight(),handles:a,start:function(t,i){e(this).addClass("ui-dialog-resizing"),s._trigger("resizeStart",t,n(i))},resize:function(e,t){s._trigger("resize",e,n(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),o.height=e(this).height(),o.width=e(this).width(),s._trigger("resizeStop",t,n(i)),e.ui.dialog.overlay.resize()}}).css("position",r).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],s=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:s.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,o={},r=!1;e.each(t,function(e,t){i._setOption(e,t),e in n&&(r=!0),e in s&&(o[e]=t)}),r&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,n){var s=this,o=s.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":s._createButtons(n);break;case"closeText":s.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":o.removeClass(s.options.dialogClass).addClass(i+n);break;case"disabled":n?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":var r=o.is(":data(draggable)");r&&!n&&o.draggable("destroy"),!r&&n&&s._makeDraggable();break;case"position":s._position(n);break;case"resizable":var a=o.is(":data(resizable)");a&&!n&&o.resizable("destroy"),a&&"string"==typeof n&&o.resizable("option","handles",n),!a&&n!==!1&&s._makeResizable(n);break;case"title":e(".ui-dialog-title",s.uiDialogTitlebar).html(""+(n||"&#160;"))}e.Widget.prototype._setOption.apply(s,arguments)},_size:function(){var t,i,n=this.options,s=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).height(),i=Math.max(0,n.minHeight-t),"auto"===n.height)if(e.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var o=this.element.css("height","auto").height();s||this.uiDialog.hide(),this.element.height(Math.max(o,i))}else this.element.height(Math.max(n.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.18",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var n=0;e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var t,i;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?e(window).height()+"px":t+"px"):e(document).height()+"px"
},width:function(){var t,i;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,n="center",s={},o=e.fn.position,r=e.fn.offset;e.fn.position=function(r){if(!r||!r.of)return o.apply(this,arguments);r=e.extend({},r);var a,l,c,h=e(r.of),u=h[0],d=(r.collision||"flip").split(" "),p=r.offset?r.offset.split(" "):[0,0];return 9===u.nodeType?(a=h.width(),l=h.height(),c={top:0,left:0}):u.setTimeout?(a=h.width(),l=h.height(),c={top:h.scrollTop(),left:h.scrollLeft()}):u.preventDefault?(r.at="left top",a=l=0,c={top:r.of.pageY,left:r.of.pageX}):(a=h.outerWidth(),l=h.outerHeight(),c=h.offset()),e.each(["my","at"],function(){var e=(r[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat([n]):i.test(e[0])?[n].concat(e):[n,n]),e[0]=t.test(e[0])?e[0]:n,e[1]=i.test(e[1])?e[1]:n,r[this]=e}),1===d.length&&(d[1]=d[0]),p[0]=parseInt(p[0],10)||0,1===p.length&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,"right"===r.at[0]?c.left+=a:r.at[0]===n&&(c.left+=a/2),"bottom"===r.at[1]?c.top+=l:r.at[1]===n&&(c.top+=l/2),c.left+=p[0],c.top+=p[1],this.each(function(){var t,i=e(this),o=i.outerWidth(),h=i.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,f=parseInt(e.curCSS(this,"marginTop",!0))||0,m=o+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),g=h+f+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},c);"right"===r.my[0]?v.left-=o:r.my[0]===n&&(v.left-=o/2),"bottom"===r.my[1]?v.top-=h:r.my[1]===n&&(v.top-=h/2),s.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),t={left:v.left-u,top:v.top-f},e.each(["left","top"],function(i,n){e.ui.position[d[i]]&&e.ui.position[d[i]][n](v,{targetWidth:a,targetHeight:l,elemWidth:o,elemHeight:h,collisionPosition:t,collisionWidth:m,collisionHeight:g,offset:p,my:r.my,at:r.at})}),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(v,{using:r.using}))})},e.ui.position={fit:{left:function(t,i){var n=e(window),s=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft();t.left=s>0?t.left-s:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var n=e(window),s=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop();t.top=s>0?t.top-s:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if(i.at[0]!==n){var s=e(window),o=i.collisionPosition.left+i.collisionWidth-s.width()-s.scrollLeft(),r="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,a="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];t.left+=i.collisionPosition.left<0?r+a+l:o>0?r+a+l:0}},top:function(t,i){if(i.at[1]!==n){var s=e(window),o=i.collisionPosition.top+i.collisionHeight-s.height()-s.scrollTop(),r="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,a="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];t.top+=i.collisionPosition.top<0?r+a+l:o>0?r+a+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var n=e(t),s=n.offset(),o=parseInt(e.curCSS(t,"top",!0),10)||0,r=parseInt(e.curCSS(t,"left",!0),10)||0,a={top:i.top-s.top+o,left:i.left-s.left+r};"using"in i?i.using.call(t,a):n.css(a)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each(function(){e.offset.setOffset(this,t)}):r.call(this):null}),function(){var t,i,n,o,r,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in n)t.style[c]=n[c];t.appendChild(l),i=a||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",o=e(l).offset(function(e,t){return t}).offset(),t.innerHTML="",i.removeChild(t),r=o.top+o.left+(a?2e3:0),s.fractions=r>21&&22>r}()}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,i){"value"===t&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.18"})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i=this,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=n.values&&n.values.length||1,a=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(n.range===!0&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:"")));for(var l=s.length;r>l;l+=1)a.push(o);this.handles=s.add(e(a.join("")).appendTo(i.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var s,o,r,a,l=e(this).data("index.ui-slider-handle");if(!i.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!i._keySliding&&(i._keySliding=!0,e(this).addClass("ui-state-active"),s=i._start(n,l),s===!1))return}switch(a=i.options.step,o=r=i.options.values&&i.options.values.length?i.values(l):i.value(),n.keyCode){case e.ui.keyCode.HOME:r=i._valueMin();break;case e.ui.keyCode.END:r=i._valueMax();break;case e.ui.keyCode.PAGE_UP:r=i._trimAlignValue(o+(i._valueMax()-i._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:r=i._trimAlignValue(o-(i._valueMax()-i._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===i._valueMax())return;r=i._trimAlignValue(o+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===i._valueMin())return;r=i._trimAlignValue(o-a)}i._slide(n,l,r)}}).keyup(function(t){var n=e(this).data("index.ui-slider-handle");i._keySliding&&(i._keySliding=!1,i._stop(t,n),i._change(t,n),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,n,s,o,r,a,l,c,h,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,r=this,this.handles.each(function(t){var i=Math.abs(n-r.values(t));s>i&&(s=i,o=e(this),a=t)}),u.range===!0&&this.values(1)===u.min&&(a+=1,o=e(this.handles[a])),l=this._start(t,a),l===!1?!1:(this._mouseSliding=!0,r._handleIndex=a,o.addClass("ui-state-active").focus(),c=o.offset(),h=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:t.pageX-c.left-o.width()/2,top:t.pageY-c.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()}},_setOption:function(t,i){var n,s=0;switch(e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(n){t=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](h,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:a.animate}))),i=t}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),t=o!==s?(n-s)/(o-s)*100:0,h["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](h,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"1.8.18"})}(jQuery),function(e,i){function n(){return++r}function s(){return++o}var o=0,r=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+s()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+n());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function n(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var s=this,o=this.options,r=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,i){var n,a=e(i).attr("href"),l=a.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(n=e("base")[0])&&l===n.href)&&(a=i.hash,i.href=a),r.test(a))s.panels=s.panels.add(s.element.find(s._sanitizeSelector(a)));else if(a&&"#"!==a){e.data(i,"href.tabs",a),e.data(i,"load.tabs",a.replace(/#.*$/,""));var c=s._tabId(i);i.href="#"+c;var h=s.element.find("#"+c);h.length||(h=e(o.panelTemplate).attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(s.panels[t-1]||s.list),h.data("destroy.tabs",!0)),s.panels=s.panels.add(h)}else o.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),o.selected===i?(location.hash&&this.anchors.each(function(e,t){return t.hash==location.hash?(o.selected=e,!1):void 0}),"number"!=typeof o.selected&&o.cookie&&(o.selected=parseInt(s._cookie(),10)),"number"!=typeof o.selected&&this.lis.filter(".ui-tabs-selected").length&&(o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),o.selected=o.selected||(this.lis.length?0:-1)):null===o.selected&&(o.selected=-1),o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0,o.disabled=e.unique(o.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e){return s.lis.index(e)}))).sort(),-1!=e.inArray(o.selected,o.disabled)&&o.disabled.splice(e.inArray(o.selected,o.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),o.selected>=0&&this.anchors.length&&(s.element.find(s._sanitizeSelector(s.anchors[o.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active"),s.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[o.selected],s.element.find(s._sanitizeSelector(s.anchors[o.selected].hash))[0]))}),this.load(o.selected)),e(window).bind("unload",function(){s.lis.add(s.anchors).unbind(".tabs"),s.lis=s.anchors=s.panels=null})):o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),o.cookie&&this._cookie(o.selected,o.cookie);for(var a,l=0;a=this.lis[l];l++)e(a)[-1==e.inArray(l,o.disabled)||e(a).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(o.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==o.event){var c=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},h=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){c("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){h("hover",e(this))}),this.anchors.bind("focus.tabs",function(){c("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){h("focus",e(this).closest("li"))})}var u,d;o.fx&&(e.isArray(o.fx)?(u=o.fx[0],d=o.fx[1]):u=d=o.fx);var p=d?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(d,d.duration||"normal",function(){n(i,d),s._trigger("show",null,s._ui(t,i[0]))})}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),s._trigger("show",null,s._ui(t,i[0]))},f=u?function(e,t){t.animate(u,u.duration||"normal",function(){s.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),n(t,u),s.element.dequeue("tabs")})}:function(e,t){s.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),s.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var t=this,i=e(t).closest("li"),n=s.panels.filter(":not(.ui-tabs-hide)"),r=s.element.find(s._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!o.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||s.panels.filter(":animated").length||s._trigger("select",null,s._ui(this,r[0]))===!1)return this.blur(),!1;if(o.selected=s.anchors.index(this),s.abort(),o.collapsible){if(i.hasClass("ui-tabs-selected"))return o.selected=-1,o.cookie&&s._cookie(o.selected,o.cookie),s.element.queue("tabs",function(){f(t,n)}).dequeue("tabs"),this.blur(),!1;if(!n.length)return o.cookie&&s._cookie(o.selected,o.cookie),s.element.queue("tabs",function(){p(t,r)}),s.load(s.anchors.index(this)),this.blur(),!1}if(o.cookie&&s._cookie(o.selected,o.cookie),!r.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";n.length&&s.element.queue("tabs",function(){f(t,n)}),s.element.queue("tabs",function(){p(t,r)}),s.load(s.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$="+e+"]"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){i.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,n,s){s===i&&(s=this.anchors.length);var o=this,r=this.options,a=e(r.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,n)),l=t.indexOf("#")?this._tabId(e("a",a)[0]):t.replace("#","");a.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var c=o.element.find("#"+l);return c.length||(c=e(r.panelTemplate).attr("id",l).data("destroy.tabs",!0)),c.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),s>=this.lis.length?(a.appendTo(this.list),c.appendTo(this.list[0].parentNode)):(a.insertBefore(this.lis[s]),c.insertBefore(this.panels[s])),r.disabled=e.map(r.disabled,function(e){return e>=s?++e:e}),this._tabify(),1==this.anchors.length&&(r.selected=0,a.addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[0],o.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[s],this.panels[s])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.lis.eq(t).remove(),s=this.panels.eq(t).remove();return n.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!=t}),function(e){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(n.find("a")[0],s[0])),this},enable:function(t){t=this._getIndex(t);var i=this.options;return-1!=e.inArray(t,i.disabled)?(this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,function(e){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this):void 0},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),-1==e){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var i=this,n=this.options,s=this.anchors.eq(t)[0],o=e.data(s,"load.tabs");if(this.abort(),o&&(0===this.element.queue("tabs").length||!e.data(s,"cache.tabs"))){if(this.lis.eq(t).addClass("ui-state-processing"),n.spinner){var r=e("span",s);r.data("label.tabs",r.html()).html(n.spinner)}return this.xhr=e.ajax(e.extend({},n.ajaxOptions,{url:o,success:function(o,r){i.element.find(i._sanitizeSelector(s.hash)).html(o),i._cleanup(),n.cache&&e.data(s,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{n.ajaxOptions.success(o,r)}catch(a){}},error:function(e,o){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{n.ajaxOptions.error(e,o,t,s)}catch(r){}}})),i.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.18"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,i){var n=this,s=this.options,o=n._rotate||(n._rotate=function(t){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var e=s.selected;n.select(++e<n.anchors.length?e:0)},e),t&&t.stopPropagation()}),r=n._unrotate||(n._unrotate=i?function(){t=s.selected,o()}:function(e){e.clientX&&n.rotate(null)});return e?(this.element.bind("tabsshow",o),this.anchors.bind(s.event+".tabs",r),o()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",o),this.anchors.unbind(s.event+".tabs",r),delete this._rotate,delete this._unrotate),this}})}(jQuery),define("vendor/jquery-ui-1.8.18",function(){}),function(e){var t={decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},i="kinetic-settings",n="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()),e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in document});var s=function(){return!1},o=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},r=function(e,t){var i=e;return e>0?e>t&&(i=t):0-t>e&&(i=0-t),i},a=function(e,t){this.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right),e.velocity>0&&this.addClass(t.right),e.velocity<0&&this.addClass(t.left),e.velocityY>0&&this.addClass(t.down),e.velocityY<0&&this.addClass(t.up)},l=function(e,t){"function"==typeof t.stopped&&t.stopped.call(e,t)},c=function(e,t){var i=e[0];t.x&&i.scrollWidth>0?(i.scrollLeft=t.scrollLeft=i.scrollLeft+t.velocity,Math.abs(t.velocity)>0&&(t.velocity=t.decelerate?o(t.velocity,t.slowdown):t.velocity)):t.velocity=0,t.y&&i.scrollHeight>0?(i.scrollTop=t.scrollTop=i.scrollTop+t.velocityY,Math.abs(t.velocityY)>0&&(t.velocityY=t.decelerate?o(t.velocityY,t.slowdown):t.velocityY)):t.velocityY=0,a.call(e,t,t.deceleratingClass),"function"==typeof t.moved&&t.moved.call(e,t),Math.abs(t.velocity)>0||Math.abs(t.velocityY)>0?window.requestAnimationFrame(function(){c(e,t)}):l(e,t)},h=function(t){var n=e.kinetic.callMethods[t],s=Array.prototype.slice.call(arguments);n&&this.each(function(){var t=s.slice(1),o=e(this).data(i);t.unshift(o),n.apply(this,t)})},u=function(t,i){var n=t[0];e.support.touch?(n.addEventListener("touchstart",i.events.touchStart,!1),n.addEventListener("touchend",i.events.inputEnd,!1),n.addEventListener("touchmove",i.events.touchMove,!1)):t.mousedown(i.events.inputDown).mouseup(i.events.inputEnd).mousemove(i.events.inputMove),t.click(i.events.inputClick).bind("selectstart",s),t.bind("dragstart",i.events.dragStart)},d=function(t,i){var n=t[0];e.support.touch?(n.removeEventListener("touchstart",i.events.touchStart,!1),n.removeEventListener("touchend",i.events.inputEnd,!1),n.removeEventListener("touchmove",i.events.touchMove,!1)):t.unbind("mousedown",i.events.inputDown).unbind("mouseup",i.events.inputEnd).unbind("mousemove",i.events.inputMove),t.unbind("click",i.events.inputClick).unbind("selectstart",s),t.unbind("dragstart",i.events.dragStart)},p=function(s){this.addClass(n).each(function(){var n,o,l,h,d=e.extend({},t,s),p=this,f=e(this),m=!1,g=!1,v=!1,b=1e3/d.throttleFPS;d.velocity=0,d.velocityY=0;var _=function(){n=!1,o=!1,v=!1};e(document).mouseup(_).click(_);var y=function(){d.velocity=r(m-n,d.maxvelocity),d.velocityY=r(g-o,d.maxvelocity)},w=function(t){return e.isFunction(d.filterTarget)?d.filterTarget.call(p,t)!==!1:!0},x=function(e,t){v=!0,d.velocity=m=0,d.velocityY=g=0,n=e,o=t},k=function(){n&&m&&d.decelerate===!1&&(d.decelerate=!0,y(),n=m=v=!1,c(f,d))},C=function(t,i){(!l||new Date>new Date(l.getTime()+b))&&(l=new Date,v&&(n||o)&&(h&&(e(h).blur(),h=null,f.focus()),d.decelerate=!1,d.velocity=d.velocityY=0,f[0].scrollLeft=d.scrollLeft=d.x?f[0].scrollLeft-(t-n):f[0].scrollLeft,f[0].scrollTop=d.scrollTop=d.y?f[0].scrollTop-(i-o):f[0].scrollTop,m=n,g=o,n=t,o=i,y(),a.call(f,d,d.movingClass),"function"==typeof d.moved&&d.moved.call(f,d)))};d.events={touchStart:function(e){w(e.target)&&(x(e.touches[0].clientX,e.touches[0].clientY),e.stopPropagation())},touchMove:function(e){v&&(C(e.touches[0].clientX,e.touches[0].clientY),e.preventDefault&&e.preventDefault())},inputDown:function(e){w(e.target)&&(x(e.clientX,e.clientY),h=e.target,"IMG"===e.target.nodeName&&e.preventDefault(),e.stopPropagation())},inputEnd:function(e){k(),h=null,e.preventDefault&&e.preventDefault()},inputMove:function(e){v&&(C(e.clientX,e.clientY),e.preventDefault&&e.preventDefault())},inputClick:function(e){return Math.abs(d.velocity)>0?(e.preventDefault(),!1):void 0},dragStart:function(){return h?!1:void 0}},u(f,d),f.data(i,d).css("cursor","move"),d.triggerHardware&&f.css("-webkit-transform","translate3d(0,0,0)")})};e.kinetic={settingsKey:i,callMethods:{start:function(t,i){var n=e(this);t=e.extend(t,i),t&&(t.decelerate=!1,c(n,t))},end:function(t){e(this);t&&(t.decelerate=!0)},stop:function(e){e.velocity=0,e.velocityY=0,e.decelerate=!0},detach:function(t){var i=e(this);d(i,t),i.removeClass(n).css("cursor","")},attach:function(t){var i=e(this);u(i,t),i.addClass(n).css("cursor","move")}}},e.fn.kinetic=function(e){return"string"==typeof e?h.apply(this,arguments):p.call(this,e),this
}}(window.jQuery||window.Zepto),define("jquery.kinetic",function(){}),function(e){e(jQuery)}(function(e){function t(t){var s,o=t||window.event,r=[].slice.call(arguments,1),a=0,l=0,c=0,h=0,u=0;return t=e.event.fix(o),t.type="mousewheel",o.wheelDelta&&(a=o.wheelDelta),o.detail&&(a=-1*o.detail),o.deltaY&&(c=-1*o.deltaY,a=c),o.deltaX&&(l=o.deltaX,a=-1*l),void 0!==o.wheelDeltaY&&(c=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(l=-1*o.wheelDeltaX),h=Math.abs(a),(!i||i>h)&&(i=h),u=Math.max(Math.abs(c),Math.abs(l)),(!n||n>u)&&(n=u),s=a>0?"floor":"ceil",a=Math[s](a/i),l=Math[s](l/n),c=Math[s](c/n),r.unshift(t,a,l,c),(e.event.dispatch||e.event.handle).apply(this,r)}var i,n,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var r=s.length;r;)e.event.fixHooks[s[--r]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("jquery.mousewheel",function(){}),function(e){e.widget("thomaskahn.smoothDivScroll",{options:{scrollingHotSpotLeftClass:"scrollingHotSpotLeft",scrollingHotSpotRightClass:"scrollingHotSpotRight",scrollableAreaClass:"scrollableArea",scrollWrapperClass:"scrollWrapper",hiddenOnStart:!1,getContentOnLoad:{},countOnlyClass:"",startAtElementId:"",hotSpotScrolling:!0,hotSpotScrollingStep:15,hotSpotScrollingInterval:10,hotSpotMouseDownSpeedBooster:3,visibleHotSpotBackgrounds:"hover",hotSpotsVisibleTime:5e3,easingAfterHotSpotScrolling:!0,easingAfterHotSpotScrollingDistance:10,easingAfterHotSpotScrollingDuration:300,easingAfterHotSpotScrollingFunction:"easeOutQuart",mousewheelScrolling:"",mousewheelScrollingStep:70,easingAfterMouseWheelScrolling:!0,easingAfterMouseWheelScrollingDuration:300,easingAfterMouseWheelScrollingFunction:"easeOutQuart",manualContinuousScrolling:!1,autoScrollingMode:"",autoScrollingDirection:"endlessLoopRight",autoScrollingStep:1,autoScrollingInterval:10,touchScrolling:!1,scrollToAnimationDuration:1e3,scrollToEasingFunction:"easeOutQuart"},_create:function(){var t=this,i=this.options,n=this.element;n.data("scrollWrapper",n.find("."+i.scrollWrapperClass)),n.data("scrollingHotSpotRight",n.find("."+i.scrollingHotSpotRightClass)),n.data("scrollingHotSpotLeft",n.find("."+i.scrollingHotSpotLeftClass)),n.data("scrollableArea",n.find("."+i.scrollableAreaClass)),n.data("scrollingHotSpotRight").length>0&&n.data("scrollingHotSpotRight").detach(),n.data("scrollingHotSpotLeft").length>0&&n.data("scrollingHotSpotLeft").detach(),0===n.data("scrollableArea").length&&0===n.data("scrollWrapper").length?(n.wrapInner("<div class='"+i.scrollableAreaClass+"'>").wrapInner("<div class='"+i.scrollWrapperClass+"'>"),n.data("scrollWrapper",n.find("."+i.scrollWrapperClass)),n.data("scrollableArea",n.find("."+i.scrollableAreaClass))):0===n.data("scrollWrapper").length?(n.wrapInner("<div class='"+i.scrollWrapperClass+"'>"),n.data("scrollWrapper",n.find("."+i.scrollWrapperClass))):0===n.data("scrollableArea").length&&(n.data("scrollWrapper").wrapInner("<div class='"+i.scrollableAreaClass+"'>"),n.data("scrollableArea",n.find("."+i.scrollableAreaClass))),0===n.data("scrollingHotSpotRight").length?(n.prepend("<div class='"+i.scrollingHotSpotRightClass+"'></div>"),n.data("scrollingHotSpotRight",n.find("."+i.scrollingHotSpotRightClass))):n.prepend(n.data("scrollingHotSpotRight")),0===n.data("scrollingHotSpotLeft").length?(n.prepend("<div class='"+i.scrollingHotSpotLeftClass+"'></div>"),n.data("scrollingHotSpotLeft",n.find("."+i.scrollingHotSpotLeftClass))):n.prepend(n.data("scrollingHotSpotLeft")),n.data("speedBooster",1),n.data("scrollXPos",0),n.data("hotSpotWidth",n.data("scrollingHotSpotLeft").innerWidth()),n.data("scrollableAreaWidth",0),n.data("startingPosition",0),n.data("rightScrollingInterval",null),n.data("leftScrollingInterval",null),n.data("autoScrollingInterval",null),n.data("hideHotSpotBackgroundsInterval",null),n.data("previousScrollLeft",0),n.data("pingPongDirection","right"),n.data("getNextElementWidth",!0),n.data("swapAt",null),n.data("startAtElementHasNotPassed",!0),n.data("swappedElement",null),n.data("originalElements",n.data("scrollableArea").children(i.countOnlyClass)),n.data("visible",!0),n.data("enabled",!0),n.data("scrollableAreaHeight",n.data("scrollableArea").height()),n.data("scrollerOffset",n.offset()),i.touchScrolling&&n.data("enabled")&&n.data("scrollWrapper").kinetic({y:!1,moved:function(){i.manualContinuousScrolling&&(n.data("scrollWrapper").scrollLeft()<=0?t._checkContinuousSwapLeft():t._checkContinuousSwapRight())},stopped:function(){n.data("scrollWrapper").stop(!0,!1),t.stopAutoScrolling()}}),n.data("scrollingHotSpotRight").bind("mousemove",function(e){if(i.hotSpotScrolling){var t=e.pageX-(this.offsetLeft+n.data("scrollerOffset").left);n.data("scrollXPos",Math.round(t/n.data("hotSpotWidth")*i.hotSpotScrollingStep)),(1/0===n.data("scrollXPos")||n.data("scrollXPos")<1)&&n.data("scrollXPos",1)}}),n.data("scrollingHotSpotRight").bind("mouseover",function(){i.hotSpotScrolling&&(n.data("scrollWrapper").stop(!0,!1),t.stopAutoScrolling(),n.data("rightScrollingInterval",setInterval(function(){n.data("scrollXPos")>0&&n.data("enabled")&&(n.data("scrollWrapper").scrollLeft(n.data("scrollWrapper").scrollLeft()+n.data("scrollXPos")*n.data("speedBooster")),i.manualContinuousScrolling&&t._checkContinuousSwapRight(),t._showHideHotSpots())},i.hotSpotScrollingInterval)),t._trigger("mouseOverRightHotSpot"))}),n.data("scrollingHotSpotRight").bind("mouseout",function(){i.hotSpotScrolling&&(clearInterval(n.data("rightScrollingInterval")),n.data("scrollXPos",0),i.easingAfterHotSpotScrolling&&n.data("enabled")&&n.data("scrollWrapper").animate({scrollLeft:n.data("scrollWrapper").scrollLeft()+i.easingAfterHotSpotScrollingDistance},{duration:i.easingAfterHotSpotScrollingDuration,easing:i.easingAfterHotSpotScrollingFunction}))}),n.data("scrollingHotSpotRight").bind("mousedown",function(){n.data("speedBooster",i.hotSpotMouseDownSpeedBooster)}),e("body").bind("mouseup",function(){n.data("speedBooster",1)}),n.data("scrollingHotSpotLeft").bind("mousemove",function(e){if(i.hotSpotScrolling){var t=this.offsetLeft+n.data("scrollerOffset").left+n.data("hotSpotWidth")-e.pageX;n.data("scrollXPos",Math.round(t/n.data("hotSpotWidth")*i.hotSpotScrollingStep)),(1/0===n.data("scrollXPos")||n.data("scrollXPos")<1)&&n.data("scrollXPos",1)}}),n.data("scrollingHotSpotLeft").bind("mouseover",function(){i.hotSpotScrolling&&(n.data("scrollWrapper").stop(!0,!1),t.stopAutoScrolling(),n.data("leftScrollingInterval",setInterval(function(){n.data("scrollXPos")>0&&n.data("enabled")&&(n.data("scrollWrapper").scrollLeft(n.data("scrollWrapper").scrollLeft()-n.data("scrollXPos")*n.data("speedBooster")),i.manualContinuousScrolling&&t._checkContinuousSwapLeft(),t._showHideHotSpots())},i.hotSpotScrollingInterval)),t._trigger("mouseOverLeftHotSpot"))}),n.data("scrollingHotSpotLeft").bind("mouseout",function(){i.hotSpotScrolling&&(clearInterval(n.data("leftScrollingInterval")),n.data("scrollXPos",0),i.easingAfterHotSpotScrolling&&n.data("enabled")&&n.data("scrollWrapper").animate({scrollLeft:n.data("scrollWrapper").scrollLeft()-i.easingAfterHotSpotScrollingDistance},{duration:i.easingAfterHotSpotScrollingDuration,easing:i.easingAfterHotSpotScrollingFunction}))}),n.data("scrollingHotSpotLeft").bind("mousedown",function(){n.data("speedBooster",i.hotSpotMouseDownSpeedBooster)}),n.data("scrollableArea").mousewheel(function(e,s,o,r){if(n.data("enabled")&&i.mousewheelScrolling.length>0){var a;"vertical"===i.mousewheelScrolling&&0!==r?(t.stopAutoScrolling(),e.preventDefault(),a=Math.round(i.mousewheelScrollingStep*r*-1),t.move(a)):"horizontal"===i.mousewheelScrolling&&0!==o?(t.stopAutoScrolling(),e.preventDefault(),a=Math.round(i.mousewheelScrollingStep*o*-1),t.move(a)):"allDirections"===i.mousewheelScrolling&&(t.stopAutoScrolling(),e.preventDefault(),a=Math.round(i.mousewheelScrollingStep*s*-1),t.move(a))}}),i.mousewheelScrolling&&n.data("scrollingHotSpotLeft").add(n.data("scrollingHotSpotRight")).mousewheel(function(e){e.preventDefault()}),e(window).bind("resize",function(){t._showHideHotSpots(),t._trigger("windowResized")}),jQuery.isEmptyObject(i.getContentOnLoad)||t[i.getContentOnLoad.method](i.getContentOnLoad.content,i.getContentOnLoad.manipulationMethod,i.getContentOnLoad.addWhere,i.getContentOnLoad.filterTag),i.hiddenOnStart&&t.hide(),e(window).load(function(){if(i.hiddenOnStart||t.recalculateScrollableArea(),i.autoScrollingMode.length>0&&!i.hiddenOnStart&&t.startAutoScrolling(),"always"!==i.autoScrollingMode)switch(i.visibleHotSpotBackgrounds){case"always":t.showHotSpotBackgrounds();break;case"onStart":t.showHotSpotBackgrounds(),n.data("hideHotSpotBackgroundsInterval",setTimeout(function(){t.hideHotSpotBackgrounds(250)},i.hotSpotsVisibleTime));break;case"hover":n.mouseenter(function(e){i.hotSpotScrolling&&(e.stopPropagation(),t.showHotSpotBackgrounds(250))}).mouseleave(function(e){i.hotSpotScrolling&&(e.stopPropagation(),t.hideHotSpotBackgrounds(250))})}t._showHideHotSpots(),t._trigger("setupComplete")})},_setOption:function(e,t){var i=this,n=this.options,s=this.element;n[e]=t,"hotSpotScrolling"===e?t===!0?i._showHideHotSpots():(s.data("scrollingHotSpotLeft").hide(),s.data("scrollingHotSpotRight").hide()):"autoScrollingStep"===e||"easingAfterHotSpotScrollingDistance"===e||"easingAfterHotSpotScrollingDuration"===e||"easingAfterMouseWheelScrollingDuration"===e?n[e]=parseInt(t,10):"autoScrollingInterval"===e&&(n[e]=parseInt(t,10),i.startAutoScrolling())},showHotSpotBackgrounds:function(e){{var t=this,i=this.element;this.option}void 0!==e?(i.data("scrollingHotSpotLeft").addClass("scrollingHotSpotLeftVisible"),i.data("scrollingHotSpotRight").addClass("scrollingHotSpotRightVisible"),i.data("scrollingHotSpotLeft").add(i.data("scrollingHotSpotRight")).fadeTo(e,.35)):(i.data("scrollingHotSpotLeft").addClass("scrollingHotSpotLeftVisible"),i.data("scrollingHotSpotLeft").removeAttr("style"),i.data("scrollingHotSpotRight").addClass("scrollingHotSpotRightVisible"),i.data("scrollingHotSpotRight").removeAttr("style")),t._showHideHotSpots()},hideHotSpotBackgrounds:function(e){{var t=this.element;this.option}void 0!==e?(t.data("scrollingHotSpotLeft").fadeTo(e,0,function(){t.data("scrollingHotSpotLeft").removeClass("scrollingHotSpotLeftVisible")}),t.data("scrollingHotSpotRight").fadeTo(e,0,function(){t.data("scrollingHotSpotRight").removeClass("scrollingHotSpotRightVisible")})):(t.data("scrollingHotSpotLeft").removeClass("scrollingHotSpotLeftVisible").removeAttr("style"),t.data("scrollingHotSpotRight").removeClass("scrollingHotSpotRightVisible").removeAttr("style"))},_showHideHotSpots:function(){var e=this,t=this.element,i=this.options;i.hotSpotScrolling?i.manualContinuousScrolling&&i.hotSpotScrolling&&"always"!==i.autoScrollingMode?(t.data("scrollingHotSpotLeft").show(),t.data("scrollingHotSpotRight").show()):"always"!==i.autoScrollingMode&&i.hotSpotScrolling?t.data("scrollableAreaWidth")<=t.data("scrollWrapper").innerWidth()?(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").hide()):0===t.data("scrollWrapper").scrollLeft()?(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").show(),e._trigger("scrollerLeftLimitReached"),clearInterval(t.data("leftScrollingInterval")),t.data("leftScrollingInterval",null)):t.data("scrollableAreaWidth")<=t.data("scrollWrapper").innerWidth()+t.data("scrollWrapper").scrollLeft()?(t.data("scrollingHotSpotLeft").show(),t.data("scrollingHotSpotRight").hide(),e._trigger("scrollerRightLimitReached"),clearInterval(t.data("rightScrollingInterval")),t.data("rightScrollingInterval",null)):(t.data("scrollingHotSpotLeft").show(),t.data("scrollingHotSpotRight").show()):(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").hide()):(t.data("scrollingHotSpotLeft").hide(),t.data("scrollingHotSpotRight").hide())},_setElementScrollPosition:function(t,i){var n=this.element,s=this.options,o=0;switch(t){case"first":return n.data("scrollXPos",0),!0;case"start":return""!==s.startAtElementId&&n.data("scrollableArea").has("#"+s.startAtElementId)?(o=e("#"+s.startAtElementId).position().left,n.data("scrollXPos",o),!0):!1;case"last":return n.data("scrollXPos",n.data("scrollableAreaWidth")-n.data("scrollWrapper").innerWidth()),!0;case"number":return isNaN(i)?!1:(o=n.data("scrollableArea").children(s.countOnlyClass).eq(i-1).position().left,n.data("scrollXPos",o),!0);case"id":return i.length>0&&n.data("scrollableArea").has("#"+i)?(o=e("#"+i).position().left,n.data("scrollXPos",o),!0):!1;default:return!1}},jumpToElement:function(e,t){var i=this,n=this.element;if(n.data("enabled")&&i._setElementScrollPosition(e,t))switch(n.data("scrollWrapper").scrollLeft(n.data("scrollXPos")),i._showHideHotSpots(),e){case"first":i._trigger("jumpedToFirstElement");break;case"start":i._trigger("jumpedToStartElement");break;case"last":i._trigger("jumpedToLastElement");break;case"number":i._trigger("jumpedToElementNumber",null,{elementNumber:t});break;case"id":i._trigger("jumpedToElementId",null,{elementId:t})}},scrollToElement:function(e,t){var i=this,n=this.element,s=this.options,o=!1;n.data("enabled")&&i._setElementScrollPosition(e,t)&&(null!==n.data("autoScrollingInterval")&&(i.stopAutoScrolling(),o=!0),n.data("scrollWrapper").stop(!0,!1),n.data("scrollWrapper").animate({scrollLeft:n.data("scrollXPos")},{duration:s.scrollToAnimationDuration,easing:s.scrollToEasingFunction,complete:function(){switch(o&&i.startAutoScrolling(),i._showHideHotSpots(),e){case"first":i._trigger("scrolledToFirstElement");break;case"start":i._trigger("scrolledToStartElement");break;case"last":i._trigger("scrolledToLastElement");break;case"number":i._trigger("scrolledToElementNumber",null,{elementNumber:t});break;case"id":i._trigger("scrolledToElementId",null,{elementId:t})}}}))},move:function(e){var t=this,i=this.element,n=this.options;i.data("scrollWrapper").stop(!0,!0),(0>e&&i.data("scrollWrapper").scrollLeft()>0||e>0&&i.data("scrollableAreaWidth")>i.data("scrollWrapper").innerWidth()+i.data("scrollWrapper").scrollLeft())&&(n.easingAfterMouseWheelScrolling?i.data("scrollWrapper").animate({scrollLeft:i.data("scrollWrapper").scrollLeft()+e},{duration:n.easingAfterMouseWheelScrollingDuration,easing:n.easingAfterMouseWheelFunction,complete:function(){t._showHideHotSpots(),n.manualContinuousScrolling&&(e>0?t._checkContinuousSwapRight():t._checkContinuousSwapLeft())}}):(i.data("scrollWrapper").scrollLeft(i.data("scrollWrapper").scrollLeft()+e),t._showHideHotSpots(),n.manualContinuousScrolling&&(e>0?t._checkContinuousSwapRight():t._checkContinuousSwapLeft())))},getFlickrContent:function(t,i){var n=this,s=this.element;e.getJSON(t,function(t){function o(t,a){var p=t.media.m,f=p.replace("_m",l[a].letter),m=e("<img />").attr("src",f);m.load(function(){if(this.height<s.data("scrollableAreaHeight")&&a+1<l.length?o(t,a+1):r(this),d===u){switch(i){case"addFirst":s.data("scrollableArea").children(":first").before(c);break;case"addLast":s.data("scrollableArea").children(":last").after(c);break;default:s.data("scrollableArea").html(c)}n.recalculateScrollableArea(),n._showHideHotSpots(),n._trigger("addedFlickrContent",null,{addedElementIds:h})}})}function r(t){var i=s.data("scrollableAreaHeight")/t.height,n=Math.round(t.width*i),o=e(t).attr("src").split("/"),r=o.length-1;o=o[r].split("."),e(t).attr("id",o[0]),e(t).css({height:s.data("scrollableAreaHeight"),width:n}),h.push(o[0]),c.push(t),d++}var a,l=[{size:"small square",pixels:75,letter:"_s"},{size:"thumbnail",pixels:100,letter:"_t"},{size:"small",pixels:240,letter:"_m"},{size:"medium",pixels:500,letter:""},{size:"medium 640",pixels:640,letter:"_z"},{size:"large",pixels:1024,letter:"_b"}],c=[],h=[],u=t.items.length,d=0;a=s.data("scrollableAreaHeight")<=75?0:s.data("scrollableAreaHeight")<=100?1:s.data("scrollableAreaHeight")<=240?2:s.data("scrollableAreaHeight")<=500?3:s.data("scrollableAreaHeight")<=640?4:5,e.each(t.items,function(e,t){o(t,a)})})},getAjaxContent:function(t,i,n){var s=this,o=this.element;e.ajaxSetup({cache:!1}),e.get(t,function(r){var a;switch(a=void 0!==n?n.length>0?e("<div>").html(r).find(n):t:r,i){case"addFirst":o.data("scrollableArea").children(":first").before(a);break;case"addLast":o.data("scrollableArea").children(":last").after(a);break;default:o.data("scrollableArea").html(a)}s.recalculateScrollableArea(),s._showHideHotSpots(),s._trigger("addedAjaxContent")})},getHtmlContent:function(t,i,n){var s,o=this,r=this.element;switch(s=void 0!==n&&n.length>0?e("<div>").html(t).find(n):t,i){case"addFirst":r.data("scrollableArea").children(":first").before(s);break;case"addLast":r.data("scrollableArea").children(":last").after(s);break;default:r.data("scrollableArea").html(s)}o.recalculateScrollableArea(),o._showHideHotSpots(),o._trigger("addedHtmlContent")},recalculateScrollableArea:function(){var t=0,i=!1,n=this.options,s=this.element;s.data("scrollableArea").children(n.countOnlyClass).each(function(){n.startAtElementId.length>0&&e(this).attr("id")===n.startAtElementId&&(s.data("startingPosition",t),i=!0),t+=e(this).outerWidth(!0)}),i||s.data("startAtElementId",""),s.data("scrollableAreaWidth",t),s.data("scrollableArea").width(s.data("scrollableAreaWidth")),s.data("scrollWrapper").scrollLeft(s.data("startingPosition")),s.data("scrollXPos",s.data("startingPosition"))},getScrollerOffset:function(){var e=this.element;return e.data("scrollWrapper").scrollLeft()},stopAutoScrolling:function(){var e=this,t=this.element;null!==t.data("autoScrollingInterval")&&(clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._showHideHotSpots(),e._trigger("autoScrollingStopped"))},startAutoScrolling:function(){var e=this,t=this.element,i=this.options;t.data("enabled")&&(e._showHideHotSpots(),clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._trigger("autoScrollingStarted"),t.data("autoScrollingInterval",setInterval(function(){if(!t.data("visible")||t.data("scrollableAreaWidth")<=t.data("scrollWrapper").innerWidth())clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null);else switch(t.data("previousScrollLeft",t.data("scrollWrapper").scrollLeft()),i.autoScrollingDirection){case"right":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+i.autoScrollingStep),t.data("previousScrollLeft")===t.data("scrollWrapper").scrollLeft()&&(e._trigger("autoScrollingRightLimitReached"),clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._trigger("autoScrollingIntervalStopped"));break;case"left":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()-i.autoScrollingStep),t.data("previousScrollLeft")===t.data("scrollWrapper").scrollLeft()&&(e._trigger("autoScrollingLeftLimitReached"),clearInterval(t.data("autoScrollingInterval")),t.data("autoScrollingInterval",null),e._trigger("autoScrollingIntervalStopped"));break;case"backAndForth":t.data("scrollWrapper").scrollLeft("right"===t.data("pingPongDirection")?t.data("scrollWrapper").scrollLeft()+i.autoScrollingStep:t.data("scrollWrapper").scrollLeft()-i.autoScrollingStep),t.data("previousScrollLeft")===t.data("scrollWrapper").scrollLeft()&&("right"===t.data("pingPongDirection")?(t.data("pingPongDirection","left"),e._trigger("autoScrollingRightLimitReached")):(t.data("pingPongDirection","right"),e._trigger("autoScrollingLeftLimitReached")));break;case"endlessLoopRight":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+i.autoScrollingStep),e._checkContinuousSwapRight();break;case"endlessLoopLeft":t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()-i.autoScrollingStep),e._checkContinuousSwapLeft()}},i.autoScrollingInterval)))},_checkContinuousSwapRight:function(){var t=this.element,i=this.options;if(t.data("getNextElementWidth")&&(i.startAtElementId.length>0&&t.data("startAtElementHasNotPassed")?(t.data("swapAt",e("#"+i.startAtElementId).outerWidth(!0)),t.data("startAtElementHasNotPassed",!1)):t.data("swapAt",t.data("scrollableArea").children(":first").outerWidth(!0)),t.data("getNextElementWidth",!1)),t.data("swapAt")<=t.data("scrollWrapper").scrollLeft()){t.data("swappedElement",t.data("scrollableArea").children(":first").detach()),t.data("scrollableArea").append(t.data("swappedElement"));var n=t.data("scrollWrapper").scrollLeft();t.data("scrollWrapper").scrollLeft(n-t.data("swappedElement").outerWidth(!0)),t.data("getNextElementWidth",!0)}},_checkContinuousSwapLeft:function(){var t=this.element,i=this.options;t.data("getNextElementWidth")&&(i.startAtElementId.length>0&&t.data("startAtElementHasNotPassed")?(t.data("swapAt",e("#"+i.startAtElementId).outerWidth(!0)),t.data("startAtElementHasNotPassed",!1)):t.data("swapAt",t.data("scrollableArea").children(":first").outerWidth(!0)),t.data("getNextElementWidth",!1)),0===t.data("scrollWrapper").scrollLeft()&&(t.data("swappedElement",t.data("scrollableArea").children(":last").detach()),t.data("scrollableArea").prepend(t.data("swappedElement")),t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+t.data("swappedElement").outerWidth(!0)),t.data("getNextElementWidth",!0))},restoreOriginalElements:function(){var e=this,t=this.element;t.data("scrollableArea").html(t.data("originalElements")),e.recalculateScrollableArea(),e.jumpToElement("first")},show:function(){var e=this.element;e.data("visible",!0),e.show()},hide:function(){var e=this.element;e.data("visible",!1),e.hide()},enable:function(){var e=this.element;this.options.touchScrolling&&e.data("scrollWrapper").kinetic("attach"),e.data("enabled",!0)},disable:function(){var e=this,t=this.element;e.stopAutoScrolling(),clearInterval(t.data("rightScrollingInterval")),clearInterval(t.data("leftScrollingInterval")),clearInterval(t.data("hideHotSpotBackgroundsInterval")),this.options.touchScrolling&&t.data("scrollWrapper").kinetic("detach"),t.data("enabled",!1)},destroy:function(){var t=this,i=this.element;t.stopAutoScrolling(),clearInterval(i.data("rightScrollingInterval")),clearInterval(i.data("leftScrollingInterval")),clearInterval(i.data("hideHotSpotBackgroundsInterval")),i.data("scrollingHotSpotRight").unbind("mouseover"),i.data("scrollingHotSpotRight").unbind("mouseout"),i.data("scrollingHotSpotRight").unbind("mousedown"),i.data("scrollingHotSpotLeft").unbind("mouseover"),i.data("scrollingHotSpotLeft").unbind("mouseout"),i.data("scrollingHotSpotLeft").unbind("mousedown"),i.unbind("mousenter"),i.unbind("mouseleave"),i.data("scrollingHotSpotRight").remove(),i.data("scrollingHotSpotLeft").remove(),i.data("scrollableArea").remove(),i.data("scrollWrapper").remove(),i.html(i.data("originalElements")),e.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery),define("jquery.smoothdivscroll-1.3",function(){}),function(e,t,i,n){e("eb/components/related_events/view",["eb/components/related_events/constants","eb/components/related_events/event_view","eb/backbone/mixins","templates/build/related_events","vendor/jquery-ui-1.8.18","jquery.kinetic","jquery.mousewheel","jquery.smoothdivscroll-1.3"],function(e,t,s){return i.Backbone.View.extend({tagName:"div",className:"js-related-events related-events",events:{"click .js-close-related":"handleCloseClick"},initialize:function(){n.bindAll(this,"handleCollectionResponse","renderEventView"),this.collection.on("sync error",this.handleCollectionResponse)},handleCloseClick:function(){this.hide()},handleCollectionResponse:function(){this.render()},hide:function(){this.$el.slideUp(e.ANIMATION_SPEED)},getContextData:function(){var t=this.collection.length,n=t!==e.MINIMUM_EVENT_LIST_LENGTH;return{isScrollable:t>e.MINIMUM_EVENT_LIST_LENGTH,showFriendsCTA:!1,showDiscoverCTA:n&&1!==t,FBAppID:this.options.FBAppID,friendsLink:i.getEBServer()+"/directory/?tab=fb",discoverLink:i.getEBServer()+"/directory/?date=weekend"}},render:function(){var t=this;return i.Facebook.ready(function(){i.Facebook.getLoginStatus(function(e){t.$(".js-cta-friends").toggleClass("has-facepile","connected"===e.status)})}),this.$el.slideDown(e.ANIMATION_SPEED),n(this.collection.models).each(this.renderEventView),this.collection.length>e.MINIMUM_EVENT_LIST_LENGTH&&this.renderScrollable(),this.$(".js-event-list").delay(e.ANIMATION_SPEED).css({opacity:0,visibility:"visible"}).animate({opacity:1},e.ANIMATION_SPEED),window.Backbone.Events.trigger(e.RENDER_COMPLETE_EVENT),this},renderEventView:function(e){var i=new t({model:e,showFeedback:this.options.showFeedback});this.$(".js-event-item-render-hook").before(i.render().el)},renderScrollable:function(){var t=this.$(".js-related-events-heading").offset().left;this.$(".js-event-list").smoothDivScroll({manualContinuousScrolling:!0,hotSpotScrollingStep:e.SCROLL_STEP,scrollingHotSpotLeftClass:"js-scroll-control-left",scrollingHotSpotRightClass:"js-scroll-control-right",scrollableAreaClass:"scrollable-area",scrollWrapperClass:"scroll-wrapper"}).smoothDivScroll("recalculateScrollableArea").smoothDivScroll("move",e.EVENT_TILE_WIDTH-t)}}).mixin(s.withTemplate,{templateName:"related_events"})})}(window.define,window.jQuery,window.EB,window._),define("eb/components/seatmap/model",[],function(){return EB.Backbone.Model.extend({defaults:{image_stale:"1",image_png:null},url:function(){return"/ajax/event/"+this.get("bigEventID")+"/seatmap-image/"}})}),function(e){var t,i,n="0.4.2",s="hasOwnProperty",o=/[\.\/]/,r="*",a=function(){},l=function(e,t){return e-t},c={n:{}},h=function(e,n){e=String(e);var s,o=i,r=Array.prototype.slice.call(arguments,2),a=h.listeners(e),c=0,u=[],d={},p=[],f=t;t=e,i=0;for(var m=0,g=a.length;g>m;m++)"zIndex"in a[m]&&(u.push(a[m].zIndex),a[m].zIndex<0&&(d[a[m].zIndex]=a[m]));for(u.sort(l);u[c]<0;)if(s=d[u[c++]],p.push(s.apply(n,r)),i)return i=o,p;for(m=0;g>m;m++)if(s=a[m],"zIndex"in s)if(s.zIndex==u[c]){if(p.push(s.apply(n,r)),i)break;do if(c++,s=d[u[c]],s&&p.push(s.apply(n,r)),i)break;while(s)}else d[s.zIndex]=s;else if(p.push(s.apply(n,r)),i)break;return i=o,t=f,p.length?p:null};h._events=c,h.listeners=function(e){var t,i,n,s,a,l,h,u,d=e.split(o),p=c,f=[p],m=[];for(s=0,a=d.length;a>s;s++){for(u=[],l=0,h=f.length;h>l;l++)for(p=f[l].n,i=[p[d[s]],p[r]],n=2;n--;)t=i[n],t&&(u.push(t),m=m.concat(t.f||[]));f=u}return m},h.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var i=e.split(o),n=c,s=0,r=i.length;r>s;s++)n=n.n,n=n.hasOwnProperty(i[s])&&n[i[s]]||(n[i[s]]={n:{}});for(n.f=n.f||[],s=0,r=n.f.length;r>s;s++)if(n.f[s]==t)return a;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},h.f=function(e){var t=[].slice.call(arguments,1);return function(){h.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},h.stop=function(){i=1},h.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},h.nts=function(){return t.split(o)},h.off=h.unbind=function(e,t){if(!e)return void(h._events=c={n:{}});var i,n,a,l,u,d,p,f=e.split(o),m=[c];for(l=0,u=f.length;u>l;l++)for(d=0;d<m.length;d+=a.length-2){if(a=[d,1],i=m[d].n,f[l]!=r)i[f[l]]&&a.push(i[f[l]]);else for(n in i)i[s](n)&&a.push(i[n]);m.splice.apply(m,a)}for(l=0,u=m.length;u>l;l++)for(i=m[l];i.n;){if(t){if(i.f){for(d=0,p=i.f.length;p>d;d++)if(i.f[d]==t){i.f.splice(d,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[s](n)&&i.n[n].f){var g=i.n[n].f;for(d=0,p=g.length;p>d;d++)if(g[d]==t){g.splice(d,1);break}!g.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[s](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},h.once=function(e,t){var i=function(){return h.unbind(e,i),t.apply(this,arguments)};return h.on(e,i)},h.version=n,h.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=h:"undefined"!=typeof define?define("eve",[],function(){return h}):e.eve=h}(this),function(e,t){"function"==typeof define&&define.amd?define("snap",["eve"],function(i){return t(e,i)}):t(e,e.eve)}(this,function(e,t){var i=function(t){var i={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},s=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},o=0,r="M"+(+new Date).toString(36),a=function(){return r+(o++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var i=t.s-e;t.b+=t.dur*i,t.B+=t.dur*i,t.s=e},h=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},u=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete i[e.id],t("mina.stop."+e.id,e)},p=function(){var e=this;e.pdif||(delete i[e.id],e.pdif=e.get()-e.b)},f=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,i[e.id]=e)},m=function(){var e=0;for(var o in i)if(i.hasOwnProperty(o)){var r,a=i[o],l=a.get();if(e++,a.s=(l-a.b)/(a.dur/a.spd),a.s>=1&&(delete i[o],a.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(a)),s(a.start)){r=[];for(var c=0,h=a.start.length;h>c;c++)r[c]=+a.start[c]+(a.end[c]-a.start[c])*a.easing(a.s)}else r=+a.start+(a.end-a.start)*a.easing(a.s);a.set(r)}e&&n(m)},g=function(e,t,s,o,r,l,v){var b={id:a(),start:e,end:t,b:s,s:0,dur:o-s,spd:1,get:r,set:l,easing:v||g.linear,status:c,speed:h,duration:u,stop:d,pause:p,resume:f};i[b.id]=b;var _,y=0;for(_ in i)if(i.hasOwnProperty(_)&&(y++,2==y))break;return 1==y&&n(m),b};return g.time=l,g.getById=function(e){return i[e]||null},g.linear=function(e){return e},g.easeout=function(e){return Math.pow(e,1.7)},g.easein=function(e){return Math.pow(e,.48)},g.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,i=Math.sqrt(.1734+t*t),n=i-t,s=Math.pow(Math.abs(n),1/3)*(0>n?-1:1),o=-i-t,r=Math.pow(Math.abs(o),1/3)*(0>o?-1:1),a=s+r+.5;return 3*(1-a)*a*a+a*a*a},g.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},g.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},g.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},g.bounce=function(e){var t,i=7.5625,n=2.75;return 1/n>e?t=i*e*e:2/n>e?(e-=1.5/n,t=i*e*e+.75):2.5/n>e?(e-=2.25/n,t=i*e*e+.9375):(e-=2.625/n,t=i*e*e+.984375),t},e.mina=g,g}("undefined"==typeof t?function(){}:t),n=function(){function n(e,t){if(e){if(e.tagName)return S(e);if(e instanceof y)return e;if(null==t)return e=N.doc.querySelector(e),S(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new C(e,t)}function s(e,t){if(t){if("string"==typeof e&&(e=s(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(ot,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(rt,t.substring(4)):e.getAttribute(t);for(var i in t)if(t[O](i)){var n=H(t[i]);n?"xlink:"==i.substring(0,6)?e.setAttributeNS(ot,i.substring(6),n):"xml:"==i.substring(0,4)?e.setAttributeNS(rt,i.substring(4),n):e.setAttribute(i,n):e.removeAttribute(i)}}else e=N.doc.createElementNS(rt,e);return e}function o(e,t){return t=H.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):"array"==t&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||U.call(e).slice(8,-1).toLowerCase()==t}function r(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[O](i)&&(t[i]=r(e[i]));return t}function a(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function l(e,t,i){function n(){var s=Array.prototype.slice.call(arguments,0),o=s.join("␀"),r=n.cache=n.cache||{},l=n.count=n.count||[];return r[O](o)?(a(l,o),i?i(r[o]):r[o]):(l.length>=1e3&&delete r[l.shift()],l.push(o),r[o]=e.apply(t,s),i?i(r[o]):r[o])
}return n}function c(e,t,i,n,s,o){if(null==s){var r=e-i,a=t-n;return r||a?(180+180*z.atan2(-a,-r)/V+360)%360:0}return c(e,t,s,o)-c(i,n,s,o)}function h(e){return e%360*V/180}function u(e){return 180*e/V%360}function d(e,t,i,n,s,o){return null==t&&"[object SVGMatrix]"==U.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+i,this.d=+n,this.e=+s,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}function p(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,i,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==i&&1==n.length&&n.push(0,0),"scale"==i&&(2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),t.push("skewX"==i?["m",1,0,z.tan(h(n[0])),1,0,0]:"skewY"==i?["m",1,z.tan(h(n[0])),0,1,0,0]:[i.charAt(0)].concat(n)),e}),t}function f(e,t){var i=gt(e),n=new d;if(i)for(var s=0,o=i.length;o>s;s++){var r,a,l,c,h,u=i[s],p=u.length,f=H(u[0]).toLowerCase(),m=u[0]!=f,g=m?n.invert():0;"t"==f&&2==p?n.translate(u[1],0):"t"==f&&3==p?m?(r=g.x(0,0),a=g.y(0,0),l=g.x(u[1],u[2]),c=g.y(u[1],u[2]),n.translate(l-r,c-a)):n.translate(u[1],u[2]):"r"==f?2==p?(h=h||t,n.rotate(u[1],h.x+h.width/2,h.y+h.height/2)):4==p&&(m?(l=g.x(u[2],u[3]),c=g.y(u[2],u[3]),n.rotate(u[1],l,c)):n.rotate(u[1],u[2],u[3])):"s"==f?2==p||3==p?(h=h||t,n.scale(u[1],u[p-1],h.x+h.width/2,h.y+h.height/2)):4==p?m?(l=g.x(u[2],u[3]),c=g.y(u[2],u[3]),n.scale(u[1],u[1],l,c)):n.scale(u[1],u[1],u[2],u[3]):5==p&&(m?(l=g.x(u[3],u[4]),c=g.y(u[3],u[4]),n.scale(u[1],u[2],l,c)):n.scale(u[1],u[2],u[3],u[4])):"m"==f&&7==p&&n.add(u[1],u[2],u[3],u[4],u[5],u[6])}return n}function m(e,t){if(null==t){var i=!0;if(t=e.node.getAttribute("linearGradient"==e.type||"radialGradient"==e.type?"gradientTransform":"pattern"==e.type?"patternTransform":"transform"),!t)return new d;t=p(t)}else t=n._.rgTransform.test(t)?H(t).replace(/\.{3}|\u2026/g,e._.transform||W):p(t),o(t,"array")&&(t=n.path?n.path.toString.call(t):H(t)),e._.transform=t;var s=f(t,e.getBBox(1));return i?s:void(e.matrix=s)}function v(e){var t=n._.someDefs;if(t&&vt(t.ownerDocument.documentElement,t))return t;var i=e.node.ownerSVGElement&&S(e.node.ownerSVGElement)||e.node.parentNode&&S(e.node.parentNode)||n.select("svg")||n(0,0),s=i.select("defs"),o=null==s?!1:s.node;return o||(o=k("defs",i.node).node),n._.someDefs=o,o}function b(e,t,i){function n(e){return null==e?W:e==+e?e:(s(c,{width:e}),c.getBBox().width)}function o(e){return null==e?W:e==+e?e:(s(c,{height:e}),c.getBBox().height)}function r(n,s){null==t?l[n]=s(e.attr(n)):n==t&&(l=s(null==i?e.attr(n):i))}var a=v(e),l={},c=a.querySelector(".svg---mgr");switch(c||(c=s("rect"),s(c,{width:10,height:10,"class":"svg---mgr"}),a.appendChild(c)),e.type){case"rect":r("rx",n),r("ry",o);case"image":r("width",n),r("height",o);case"text":r("x",n),r("y",o);break;case"circle":r("cx",n),r("cy",o),r("r",n);break;case"ellipse":r("cx",n),r("cy",o),r("rx",n),r("ry",o);break;case"line":r("x1",n),r("x2",n),r("y1",o),r("y2",o);break;case"marker":r("refX",n),r("markerWidth",n),r("refY",o),r("markerHeight",o);break;case"radialGradient":r("fx",n),r("fy",o);break;case"tspan":r("dx",n),r("dy",o);break;default:r(t,n)}return l}function _(e){o(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,i=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var s=n.childNodes;for(t=0;t<s.length;t++)this[i++]=S(s[t]);return this}function y(e){if(e.snap in at)return at[e.snap];var t,i=this.id=st();try{t=e.ownerSVGElement}catch(n){}if(this.node=e,t&&(this.paper=new C(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=i,at[i]=this,"g"==this.type){this.add=_;for(var s in C.prototype)C.prototype[O](s)&&(this[s]=C.prototype[s])}}function w(e){for(var t,i=0,n=e.length;n>i;i++)if(t=t||e[i])return t}function x(e){this.node=e}function k(e,t){var i=s(e);t.appendChild(i);var n=S(i);return n.type=e,n}function C(e,t){var i,n,o,r=C.prototype;if(e&&"svg"==e.tagName){if(e.snap in at)return at[e.snap];i=new y(e),n=e.getElementsByTagName("desc")[0],o=e.getElementsByTagName("defs")[0],n||(n=s("desc"),n.appendChild(N.doc.createTextNode("Created with Snap")),i.node.appendChild(n)),o||(o=s("defs"),i.node.appendChild(o)),i.defs=o;for(var a in r)r[O](a)&&(i[a]=r[a]);i.paper=i.root=i}else i=k("svg",N.doc.body),s(i.node,{height:t,version:1.1,width:e,xmlns:rt});return i}function S(e){return e?e instanceof y||e instanceof x?e:"svg"==e.tagName?new C(e):new y(e):e}function E(){return this.selectAll("stop")}function I(e,t){var i=s("stop"),o={offset:+t+"%"};return e=n.color(e),o["stop-color"]=e.hex,e.opacity<1&&(o["stop-opacity"]=e.opacity),s(i,o),this.node.appendChild(i),this}function D(){if("linearGradient"==this.type){var e=s(this.node,"x1")||0,t=s(this.node,"x2")||1,i=s(this.node,"y1")||0,o=s(this.node,"y2")||0;return n._.box(e,i,z.abs(t-e),z.abs(o-i))}var r=this.node.cx||.5,a=this.node.cy||.5,l=this.node.r||0;return n._.box(r-l,a-l,2*l,2*l)}function M(e,i){function n(e,t){for(var i=(t-c)/(e-h),n=h;e>n;n++)a[n].offset=+(+c+i*(n-h)).toFixed(2);h=e,c=t}var o,r=w(t("snap.util.grad.parse",null,i));if(!r)return null;r.params.unshift(e),o="l"==r.type.toLowerCase()?A.apply(0,r.params):T.apply(0,r.params),r.type!=r.type.toLowerCase()&&s(o.node,{gradientUnits:"userSpaceOnUse"});var a=r.stops,l=a.length,c=0,h=0;l--;for(var u=0;l>u;u++)"offset"in a[u]&&n(u,a[u].offset);for(a[l].offset=a[l].offset||100,n(l,a[l].offset),u=0;l>=u;u++){var d=a[u];o.addStop(d.color,d.offset)}return o}function A(e,t,i,n,o){var r=k("linearGradient",e);return r.stops=E,r.addStop=I,r.getBBox=D,null!=t&&s(r.node,{x1:t,y1:i,x2:n,y2:o}),r}function T(e,t,i,n,o,r){var a=k("radialGradient",e);return a.stops=E,a.addStop=I,a.getBBox=D,null!=t&&s(a.node,{cx:t,cy:i,r:n}),null!=o&&null!=r&&s(a.node,{fx:o,fy:r}),a}function P(e){return function(i){if(t.stop(),i instanceof x&&1==i.node.childNodes.length&&("radialGradient"==i.node.firstChild.tagName||"linearGradient"==i.node.firstChild.tagName||"pattern"==i.node.firstChild.tagName)&&(i=i.node.firstChild,v(this).appendChild(i),i=S(i)),i instanceof y)if("radialGradient"==i.type||"linearGradient"==i.type||"pattern"==i.type){i.node.id||s(i.node,{id:i.id});var o=lt(i.node.id)}else o=i.attr(e);else if(o=n.color(i),o.error){var r=M(v(this),i);r?(r.node.id||s(r.node,{id:r.id}),o=lt(r.node.id)):o=i}else o=H(o);var a={};a[e]=o,s(this.node,a),this.node.style[e]=W}}function F(e){for(var t=[],i=e.childNodes,n=0,s=i.length;s>n;n++){var o=i[n];3==o.nodeType&&t.push(o.nodeValue),"tspan"==o.tagName&&t.push(1==o.childNodes.length&&3==o.firstChild.nodeType?o.firstChild.nodeValue:F(o))}return t}n.version="0.2.0",n.toString=function(){return"Snap v"+this.version},n._={};var N={win:e,doc:e.document};n._.glob=N;var O="hasOwnProperty",H=String,R=parseFloat,L=parseInt,z=Math,j=z.max,$=z.min,B=z.abs,V=(z.pow,z.PI),W=(z.round,""),q=" ",U=Object.prototype.toString,Y=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,X=/^url\(#?([^)]+)\)$/,G="	\n\f\r   ᠎             　\u2028\u2029",K=new RegExp("[,"+G+"]+"),Q=(new RegExp("["+G+"]","g"),new RegExp("["+G+"]*,["+G+"]*")),Z={hs:1,rg:1},J=new RegExp("([a-z])["+G+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+G+"]*,?["+G+"]*)+)","ig"),et=new RegExp("([rstm])["+G+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+G+"]*,?["+G+"]*)+)","ig"),tt=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+G+"]*,?["+G+"]*","ig"),it=0,nt="S"+(+new Date).toString(36),st=function(){return nt+(it++).toString(36)},ot="http://www.w3.org/1999/xlink",rt="http://www.w3.org/2000/svg",at={},lt=n.url=function(e){return"url('#"+e+"')"};n._.$=s,n._.id=st,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(e,i,n){var s=n;return i.replace(t,function(e,t,i,n,o){t=t||n,s&&(t in s&&(s=s[t]),"function"==typeof s&&o&&(s=s()))}),s=(null==s||s==n?e:s)+""};return function(t,n){return H(t).replace(e,function(e,t){return i(e,t,n)})}}();var ct=function(){function e(){this.parentNode.removeChild(this)}return function(t,i){var n=N.doc.createElement("img"),s=N.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){i.call(n),n.onload=n.onerror=null,s.removeChild(n)},n.onerror=e,s.appendChild(n),n.src=t}}();n._.clone=r,n._.cacher=l,n.rad=h,n.deg=u,n.angle=c,n.is=o,n.snapTo=function(e,t,i){if(i=o(i,"finite")?i:10,o(e,"array")){for(var n=e.length;n--;)if(B(e[n]-t)<=i)return e[n]}else{e=+e;var s=t%e;if(i>s)return t-s;if(s>e-i)return t-s+e}return t},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function i(e){var i=z.sqrt(t(e));e[0]&&(e[0]/=i),e[1]&&(e[1]/=i)}e.add=function(e,t,i,n,s,o){var r,a,l,c,h=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],p=[[e,i,s],[t,n,o],[0,0,1]];for(e&&e instanceof d&&(p=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),r=0;3>r;r++)for(a=0;3>a;a++){for(c=0,l=0;3>l;l++)c+=u[r][l]*p[l][a];h[r][a]=c}return this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2],this},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new d(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new d(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){return this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,n){return null==t&&(t=e),(i||n)&&this.add(1,0,0,1,i,n),this.add(e,0,0,t,0,0),(i||n)&&this.add(1,0,0,1,-i,-n),this},e.rotate=function(e,t,i){e=h(e),t=t||0,i=i||0;var n=+z.cos(e).toFixed(9),s=+z.sin(e).toFixed(9);return this.add(n,s,-s,n,t,i),this.add(1,0,0,1,-t,-i)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[H.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=z.sqrt(t(n[0])),i(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=z.sqrt(t(n[1])),i(n[1]),e.shear/=e.scaley;var s=-n[0][1],o=n[1][1];return 0>o?(e.rotate=u(z.acos(o)),0>s&&(e.rotate=360-e.rotate)):e.rotate=u(z.asin(s)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this.split();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:W)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:W)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:W)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(d.prototype),n.Matrix=d,n.getRGB=l(function(e){if(!e||(e=H(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:pt};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:pt};if(!(Z[O](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=ht(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:pt};var t,i,s,r,a,l,c=e.match(Y);return c?(c[2]&&(s=L(c[2].substring(5),16),i=L(c[2].substring(3,5),16),t=L(c[2].substring(1,3),16)),c[3]&&(s=L((a=c[3].charAt(3))+a,16),i=L((a=c[3].charAt(2))+a,16),t=L((a=c[3].charAt(1))+a,16)),c[4]&&(l=c[4].split(Q),t=R(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),i=R(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),s=R(l[2]),"%"==l[2].slice(-1)&&(s*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(r=R(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100)),c[5]?(l=c[5].split(Q),t=R(l[0]),"%"==l[0].slice(-1)&&(t/=100),i=R(l[1]),"%"==l[1].slice(-1)&&(i/=100),s=R(l[2]),"%"==l[2].slice(-1)&&(s/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(r=R(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100),n.hsb2rgb(t,i,s,r)):c[6]?(l=c[6].split(Q),t=R(l[0]),"%"==l[0].slice(-1)&&(t/=100),i=R(l[1]),"%"==l[1].slice(-1)&&(i/=100),s=R(l[2]),"%"==l[2].slice(-1)&&(s/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(r=R(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100),n.hsl2rgb(t,i,s,r)):(t=$(z.round(t),255),i=$(z.round(i),255),s=$(z.round(s),255),r=$(j(r,0),1),c={r:t,g:i,b:s,toString:pt},c.hex="#"+(16777216|s|i<<8|t<<16).toString(16).slice(1),c.opacity=o(r,"finite")?r:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:pt}},n),n.hsb=l(function(e,t,i){return n.hsb2rgb(e,t,i).hex}),n.hsl=l(function(e,t,i){return n.hsl2rgb(e,t,i).hex}),n.rgb=l(function(e,t,i,n){if(o(n,"finite")){var s=z.round;return"rgba("+[s(e),s(t),s(i),+n.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)});var ht=function(e){var t=N.doc.getElementsByTagName("head")[0],i="rgb(255, 0, 0)";return(ht=l(function(e){if("red"==e.toLowerCase())return i;t.style.color=i,t.style.color=e;var n=N.doc.defaultView.getComputedStyle(t,W).getPropertyValue("color");return n==i?null:n}))(e)},ut=function(){return"hsb("+[this.h,this.s,this.b]+")"},dt=function(){return"hsl("+[this.h,this.s,this.l]+")"},pt=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},ft=function(e,t,i){if(null==t&&o(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,t=e.g,e=e.r),null==t&&o(e,string)){var s=n.getRGB(e);e=s.r,t=s.g,i=s.b}return(e>1||t>1||i>1)&&(e/=255,t/=255,i/=255),[e,t,i]},mt=function(e,t,i,s){e=z.round(255*e),t=z.round(255*t),i=z.round(255*i);var r={r:e,g:t,b:i,opacity:o(s,"finite")?s:1,hex:n.rgb(e,t,i),toString:pt};return o(s,"finite")&&(r.opacity=s),r};n.color=function(e){var t;return o(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):o(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(o(e,"string")&&(e=n.getRGB(e)),o(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=pt,e},n.hsb2rgb=function(e,t,i,n){o(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,e=e.h,n=e.o),e*=360;var s,r,a,l,c;return e=e%360/60,c=i*t,l=c*(1-B(e%2-1)),s=r=a=i-c,e=~~e,s+=[c,l,0,0,l,c][e],r+=[l,c,c,l,0,0][e],a+=[0,0,l,c,c,l][e],mt(s,r,a,n)},n.hsl2rgb=function(e,t,i,n){o(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e*=360;var s,r,a,l,c;return e=e%360/60,c=2*t*(.5>i?i:1-i),l=c*(1-B(e%2-1)),s=r=a=i-c/2,e=~~e,s+=[c,l,0,0,l,c][e],r+=[l,c,c,l,0,0][e],a+=[0,0,l,c,c,l][e],mt(s,r,a,n)},n.rgb2hsb=function(e,t,i){i=ft(e,t,i),e=i[0],t=i[1],i=i[2];var n,s,o,r;return o=j(e,t,i),r=o-$(e,t,i),n=0==r?null:o==e?(t-i)/r:o==t?(i-e)/r+2:(e-t)/r+4,n=(n+360)%6*60/360,s=0==r?0:r/o,{h:n,s:s,b:o,toString:ut}},n.rgb2hsl=function(e,t,i){i=ft(e,t,i),e=i[0],t=i[1],i=i[2];var n,s,o,r,a,l;return r=j(e,t,i),a=$(e,t,i),l=r-a,n=0==l?null:r==e?(t-i)/l:r==t?(i-e)/l+2:(e-t)/l+4,n=(n+360)%6*60/360,o=(r+a)/2,s=0==l?0:.5>o?l/(2*o):l/(2-2*o),{h:n,s:s,l:o,toString:dt}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[];return o(e,"array")&&o(e[0],"array")&&(s=n.path.clone(e)),s.length||H(e).replace(J,function(e,t,n){var o=[],r=t.toLowerCase();if(n.replace(tt,function(e,t){t&&o.push(+t)}),"m"==r&&o.length>2&&(s.push([t].concat(o.splice(0,2))),r="l",t="m"==t?"l":"L"),"o"==r&&1==o.length&&s.push([t,o[0]]),"r"==r)s.push([t].concat(o));else for(;o.length>=i[r]&&(s.push([t].concat(o.splice(0,i[r]))),i[r]););}),s.toString=n.path.toString,t.arr=n.path.clone(s),s};var gt=n.parseTransformString=function(e){if(!e)return null;var t=[];return o(e,"array")&&o(e[0],"array")&&(t=n.path.clone(e)),t.length||H(e).replace(et,function(e,i,n){{var s=[];i.toLowerCase()}n.replace(tt,function(e,t){t&&s.push(+t)}),t.push([i].concat(s))}),t.toString=n.path.toString,t};n._.svgTransform2string=p,n._.rgTransform=new RegExp("^[a-z]["+G+"]*-?\\.?\\d","i"),n._.transform2matrix=f,n._unit2px=b;var vt=N.doc.contains||N.doc.compareDocumentPosition?function(e,t){var i=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};n._.getSomeDefs=v,n.select=function(e){return S(N.doc.querySelector(e))},n.selectAll=function(e){for(var t=N.doc.querySelectorAll(e),i=(n.set||Array)(),s=0;s<t.length;s++)i.push(S(t[s]));return i},function(e){function r(e){function t(e,t){var i=s(e.node,t);i=i&&i.match(r),i=i&&i[2],i&&"#"==i.charAt()&&(i=i.substring(1),i&&(l[i]=(l[i]||[]).concat(function(i){var n={};n[t]=lt(i),s(e.node,n)})))}function i(e){var t=s(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var n,o=e.selectAll("*"),r=/^\s*url\(("|'|)(.*)\1\)\s*$/,a=[],l={},c=0,h=o.length;h>c;c++){n=o[c],t(n,"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),i(n);var u=s(n.node,"id");u&&(s(n.node,{id:n.id}),a.push({old:u,id:n.id}))}for(c=0,h=a.length;h>c;c++){var d=l[a[c].old];if(d)for(var p=0,f=d.length;f>p;p++)d[p](a[c].id)}}function a(e,t,i){return function(n){var s=n.slice(e,t);return 1==s.length&&(s=s[0]),i?i(s):s}}function l(e){return function(){var t=e?"<"+this.type:"",i=this.node.attributes,n=this.node.childNodes;if(e)for(var s=0,o=i.length;o>s;s++)t+=" "+i[s].name+'="'+i[s].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),s=0,o=n.length;o>s;s++)3==n[s].nodeType?t+=n[s].nodeValue:1==n[s].nodeType&&(t+=S(n[s]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,i){{var n=this;n.node}if(!e)return n;if(o(e,"string")){if(!(arguments.length>1))return w(t("snap.util.getattr."+e,n));var s={};s[e]=i,e=s}for(var r in e)e[O](r)&&t("snap.util.attr."+r,n,e[r]);return n},e.getBBox=function(e){var t=this;if("use"==t.type&&(t=t.original),t.removed)return{};var i=t._;return e?(i.bboxwt=n.path.get[t.type]?n.path.getBBox(t.realPath=n.path.get[t.type](t)):n._.box(t.node.getBBox()),n._.box(i.bboxwt)):(t.realPath=(n.path.get[t.type]||n.path.get.deflt)(t),i.bbox=n.path.getBBox(n.path.map(t.realPath,t.matrix)),n._.box(i.bbox))};var c=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){var i=new d(this.node.getCTM()),n=m(this),o=n.toTransformString(),r=H(n)==H(this.matrix)?t.transform:o;return{string:r,globalMatrix:i,localMatrix:n,diffMatrix:i.clone().add(n.invert()),global:i.toTransformString(),local:o,toString:c}}return e instanceof d&&(e=e.toTransformString()),m(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?s(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?s(this.node,{patternTransform:this.matrix}):s(this.node,{transform:this.matrix})),this},e.parent=function(){return S(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=S(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=S(e),e.append(this)),this},e.prepend=function(e){if(e){e=S(e);var t=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),t&&t.add()}return this},e.prependTo=function(e){return e=S(e),e.prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var i=e.parent();t.node.parentNode.insertBefore(e.node,t.node),i&&i.add()}),this.parent().add(),this}e=S(e);var i=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),i&&i.add(),e.paper=this.paper,this},e.after=function(e){e=S(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=S(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=S(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return S(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),i=(n.set||Array)(),s=0;s<t.length;s++)i.push(S(t[s]));return i},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+b(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,s(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?k(this.type,this.node.parentNode):k("use",this.node.parentNode),s(e.node,{"xlink:href":"#"+t}),e.original=this,e},e.clone=function(){var e=S(this.node.cloneNode(!0));return s(e.node,"id")&&s(e.node,{id:e.id}),r(e),e.insertAfter(this),e},e.toDefs=function(){var e=v(this);return e.appendChild(this.node),this},e.pattern=function(e,t,i,n){var r=k("pattern",v(this));return null==e&&(e=this.getBBox()),o(e,"object")&&"x"in e&&(t=e.y,i=e.width,n=e.height,e=e.x),s(r.node,{x:e,y:t,width:i,height:n,patternUnits:"userSpaceOnUse",id:r.id,viewBox:[e,t,i,n].join(" ")}),r.node.appendChild(this.node),r},e.marker=function(e,t,i,n,r,a){var l=k("marker",v(this));return null==e&&(e=this.getBBox()),o(e,"object")&&"x"in e&&(t=e.y,i=e.width,n=e.height,r=e.refX||e.cx,a=e.refY||e.cy,e=e.x),s(l.node,{viewBox:[e,t,i,n].join(q),markerWidth:i,markerHeight:n,orient:"auto",refX:r||0,refY:a||0,id:l.id}),l.node.appendChild(this.node),l};var h=function(e,t,n,s){"function"!=typeof n||n.length||(s=n,n=i.linear),this.attr=e,this.dur=t,n&&(this.easing=n),s&&(this.callback=s)};n.animation=function(e,t,i,n){return new h(e,t,i,n)},e.inAnim=function(){var e=this,t=[];for(var i in e.anims)e.anims[O](i)&&!function(e){t.push({anim:new h(e._attrs,e.dur,e.easing,e._callback),curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[i]);return t},n.animate=function(e,n,s,o,r,a){"function"!=typeof r||r.length||(a=r,r=i.linear);var l=i.time(),c=i(e,n,l,l+o,i.time,s,r);return a&&t.once("mina.finish."+c.id,a),c},e.stop=function(){for(var e=this.inAnim(),t=0,i=e.length;i>t;t++)e[t].stop();return this},e.animate=function(e,n,s,r){"function"!=typeof s||s.length||(r=s,s=i.linear),e instanceof h&&(r=e.callback,s=e.easing,n=s.dur,e=e.attr);var l,c,u,d,p=[],f=[],m={},g=this;for(var v in e)if(e[O](v)){g.equal?(d=g.equal(v,H(e[v])),l=d.from,c=d.to,u=d.f):(l=+g.attr(v),c=+e[v]);var b=o(l,"array")?l.length:1;m[v]=a(p.length,p.length+b,u),p=p.concat(l),f=f.concat(c)}var _=i.time(),y=i(p,f,_,_+n,i.time,function(e){var t={};for(var i in m)m[O](i)&&(t[i]=m[i](e));g.attr(t)},s);return g.anims[y.id]=y,y._attrs=e,y._callback=r,t.once("mina.finish."+y.id,function(){delete g.anims[y.id],r&&r.call(g)}),t.once("mina.stop."+y.id,function(){delete g.anims[y.id]}),g};var u={};e.data=function(e,i){var s=u[this.id]=u[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,s,null),s;if(1==arguments.length){if(n.is(e,"object")){for(var o in e)e[O](o)&&this.data(o,e[o]);return this}return t("snap.data.get."+this.id,this,s[e],e),s[e]}return s[e]=i,t("snap.data.set."+this.id,this,i,e),this},e.removeData=function(e){return null==e?u[this.id]={}:u[this.id]&&delete u[this.id][e],this},e.outerSVG=e.toString=l(1),e.innerSVG=l()}(y.prototype),n.parse=function(e){var t=N.doc.createDocumentFragment(),i=!0,n=N.doc.createElement("div");if(e=H(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",i=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(i)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return n.innerHTML=W,new x(t)},x.prototype.select=y.prototype.select,x.prototype.selectAll=y.prototype.selectAll,n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=N.doc.createDocumentFragment(),i=0,s=e.length;s>i;i++){var o=e[i];o.node&&o.node.nodeType&&t.appendChild(o.node),o.nodeType&&t.appendChild(o),"string"==typeof o&&t.appendChild(n.parse(o).node)}return new x(t)},function(e){e.el=function(e,t){return k(e,this.node).attr(t)},e.rect=function(e,t,i,n,s,r){var a;return null==r&&(r=s),o(e,"object")&&"x"in e?a=e:null!=e&&(a={x:e,y:t,width:i,height:n},null!=s&&(a.rx=s,a.ry=r)),this.el("rect",a)},e.circle=function(e,t,i){var n;return o(e,"object")&&"cx"in e?n=e:null!=e&&(n={cx:e,cy:t,r:i}),this.el("circle",n)},e.image=function(e,t,i,n,r){var a=k("image",this.node);if(o(e,"object")&&"src"in e)a.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=i&&(l.x=t,l.y=i),null!=n&&null!=r?(l.width=n,l.height=r):ct(e,function(){s(a.node,{width:this.offsetWidth,height:this.offsetHeight})}),s(a.node,l)}return a},e.ellipse=function(e,t,i,n){var s=k("ellipse",this.node);return o(e,"object")&&"cx"in e?s.attr(e):null!=e&&s.attr({cx:e,cy:t,rx:i,ry:n}),s},e.path=function(e){var t=k("path",this.node);return o(e,"object")&&!o(e,"array")?t.attr(e):e&&t.attr({d:e}),t},e.group=e.g=function(t){var i=k("g",this.node);i.add=_;for(var n in e)e[O](n)&&(i[n]=e[n]);return 1==arguments.length&&t&&!t.type?i.attr(t):arguments.length&&i.add(Array.prototype.slice.call(arguments,0)),i},e.text=function(e,t,i){var n=k("text",this.node);return o(e,"object")?n.attr(e):null!=e&&n.attr({x:e,y:t,text:i||""}),n},e.line=function(e,t,i,n){var s=k("line",this.node);return o(e,"object")?s.attr(e):null!=e&&s.attr({x1:e,x2:i,y1:t,y2:n}),s},e.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=k("polyline",this.node);return o(e,"object")&&!o(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=k("polygon",this.node);return o(e,"object")&&!o(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},function(){e.gradient=function(e){return M(this.defs,e)},e.gradientLinear=function(e,t,i,n){return A(this.defs,e,t,i,n)},e.gradientRadial=function(e,t,i,n,s){return T(this.defs,e,t,i,n,s)},e.toString=function(){var e,t=N.doc.createDocumentFragment(),i=N.doc.createElement("div"),n=this.node.cloneNode(!0);return t.appendChild(i),i.appendChild(n),s(n,{xmlns:rt}),e=i.innerHTML,t.removeChild(t.firstChild),e},e.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName&&t.parentNode.removeChild(t),t=e}}()}(C.prototype),n.ajax=function(e,i,n,s){var r=new XMLHttpRequest,a=st();if(r){if(o(i,"function"))s=n,n=i,i=null;else if(o(i,"object")){var l=[];for(var c in i)i.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(i[c]));i=l.join("&")}return r.open(i?"POST":"GET",e,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),i&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n&&(t.once("snap.ajax."+a+".0",n),t.once("snap.ajax."+a+".200",n),t.once("snap.ajax."+a+".304",n)),r.onreadystatechange=function(){4==r.readyState&&t("snap.ajax."+a+"."+r.status,s,r)},4==r.readyState?r:(r.send(i),r)}},n.load=function(e,t,i){n.ajax(e,function(e){var s=n.parse(e.responseText);i?t.call(i,s):t(s)})},t.on("snap.util.attr.mask",function(e){if(e instanceof y||e instanceof x){if(t.stop(),e instanceof x&&1==e.node.childNodes.length&&(e=e.node.firstChild,v(this).appendChild(e),e=S(e)),"mask"==e.type)var i=e;else i=k("mask",v(this)),i.node.appendChild(e.node),!i.node.id&&s(i.node,{id:i.id});s(this.node,{mask:lt(i.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof y||e instanceof x){if(t.stop(),"clipPath"==e.type)var i=e;else i=k("clipPath",v(this)),i.node.appendChild(e.node),!i.node.id&&s(i.node,{id:i.id});s(this.node,{"clip-path":lt(i.id)})}}),t.on("snap.util.attr.fill",P("fill")),t.on("snap.util.attr.stroke",P("stroke"));var bt=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=H(e);var t=e.match(bt);if(!t)return null;var i=t[1],n=t[2],s=t[3];return n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==n.length&&0==n[0]&&(n=[]),s=s.split("-"),s=s.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=e[1]),t}),{type:i,params:n,stops:s}}),t.on("snap.util.attr.d",function(e){t.stop(),o(e,"array")&&o(e[0],"array")&&(e=n.path.toString.call(e)),e=H(e),e.match(/[ruo]/i)&&(e=n.path.toAbsolute(e)),s(this.node,{d:e})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=H(e);for(var i=N.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(i)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.viewBox",function(e){var i;i=o(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):o(e,"array")?e.join(" "):e,s(this.node,{viewBox:i}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),s(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var i,n,r;if(!e&&this.textPath){for(n=this.textPath;n.node.firstChild;)this.node.appendChild(n.node.firstChild);return n.remove(),void delete this.textPath}if(o(e,"string")){var a=v(this),l=S(a.parentNode).path(e);a.appendChild(l.node),i=l.id,l.attr({id:i})}else e=S(e),e instanceof y&&(i=e.attr("id"),i||(i=e.id,e.attr({id:i})));if(i)if(n=this.textPath,r=this.node,n)n.attr({"xlink:href":"#"+i});else{for(n=s("textPath",{"xlink:href":"#"+i});r.firstChild;)n.appendChild(r.firstChild);r.appendChild(n),this.textPath=S(n)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var i=this.node,n=function(e){var t=s("tspan");if(o(e,"array"))for(var i=0;i<e.length;i++)t.appendChild(n(e[i]));else t.appendChild(N.doc.createTextNode(e));return t.normalize&&t.normalize(),t};i.firstChild;)i.removeChild(i.firstChild);for(var r=n(e);r.firstChild;)i.appendChild(r.firstChild)}t.stop()})(-1);var _t={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var i=t.nt(),n={};i=i.substring(i.lastIndexOf(".")+1),n[i]=e;var o=i.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),r=i.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});_t[O](r)?this.node.style[o]=null==e?W:e:s(this.node,n)
}),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function e(e){return function(){t.stop();var i=N.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==i?i:n(N.doc.getElementById(i.match(X)[1]))}}function i(e){return function(i){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==i||!i)return void(this.node.style[n]="none");if("marker"==i.type){var o=i.node.id;return o||s(i.node,{id:i.id}),void(this.node.style[n]=lt(o))}}}t.on("snap.util.getattr.marker-end",e("end"))(-1),t.on("snap.util.getattr.markerEnd",e("end"))(-1),t.on("snap.util.getattr.marker-start",e("start"))(-1),t.on("snap.util.getattr.markerStart",e("start"))(-1),t.on("snap.util.getattr.marker-mid",e("mid"))(-1),t.on("snap.util.getattr.markerMid",e("mid"))(-1),t.on("snap.util.attr.marker-end",i("end"))(-1),t.on("snap.util.attr.markerEnd",i("end"))(-1),t.on("snap.util.attr.marker-start",i("start"))(-1),t.on("snap.util.attr.markerStart",i("start"))(-1),t.on("snap.util.attr.marker-mid",i("mid"))(-1),t.on("snap.util.attr.markerMid",i("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&s(this.node,"rx")==s(this.node,"ry")?(t.stop(),s(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=F(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var e=s(this.node,"viewBox").split(K);return n._.box(+e[0],+e[1],+e[2],+e[3])})(-1),t.on("snap.util.getattr.points",function(){var e=s(this.node,"points");return t.stop(),e.split(K)}),t.on("snap.util.getattr.path",function(){var e=s(this.node,"d");return t.stop(),e}),t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var i=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return _t[O](i)?N.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue(i):s(this.node,e)});var yt=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,s=i.documentElement,o=s.clientTop||n.clientTop||0,r=s.clientLeft||n.clientLeft||0,a=t.top+(g.win.pageYOffset||s.scrollTop||n.scrollTop)-o,l=t.left+(g.win.pageXOffset||s.scrollLeft||n.scrollLeft)-r;return{y:a,x:l}};return n.getElementByPoint=function(e,t){var i=this,n=(i.canvas,N.doc.elementFromPoint(e,t));if(N.win.opera&&"svg"==n.tagName){var s=yt(n),o=n.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var r=n.getIntersectionList(o,null);r.length&&(n=r[r.length-1])}return n?S(n):null},n.plugin=function(e){e(n,y,C,N)},N.win.Snap=n,n}();return n.plugin(function(e,t){function i(e){var t=i.ps=i.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)t[R](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[e]}function n(e,t,i,n){return null==e&&(e=t=i=n=0),null==t&&(t=e.y,i=e.width,n=e.height,e=e.x),{x:e,y:t,width:i,w:i,height:n,h:n,x2:e+i,y2:t+n,cx:e+i/2,cy:t+n/2,r1:j.min(i,n)/2,r2:j.max(i,n)/2,r0:j.sqrt(i*i+n*n)/2,path:x(e,t,i,n),vb:[e,t,i,n].join(" ")}}function s(){return this.join(",").replace(L,"$1")}function o(e){var t=H(e);return t.toString=s,t}function r(e,t,i,n,s,o,r,a,c){return null==c?p(e,t,i,n,s,o,r,a):l(e,t,i,n,s,o,r,a,f(e,t,i,n,s,o,r,a,c))}function a(i,n){function s(e){return+(+e).toFixed(3)}return e._.cacher(function(e,o,a){e instanceof t&&(e=e.attr("d")),e=T(e);for(var c,h,u,d,p,f="",m={},g=0,v=0,b=e.length;b>v;v++){if(u=e[v],"M"==u[0])c=+u[1],h=+u[2];else{if(d=r(c,h,u[1],u[2],u[3],u[4],u[5],u[6]),g+d>o){if(n&&!m.start){if(p=r(c,h,u[1],u[2],u[3],u[4],u[5],u[6],o-g),f+=["C"+s(p.start.x),s(p.start.y),s(p.m.x),s(p.m.y),s(p.x),s(p.y)],a)return f;m.start=f,f=["M"+s(p.x),s(p.y)+"C"+s(p.n.x),s(p.n.y),s(p.end.x),s(p.end.y),s(u[5]),s(u[6])].join(),g+=d,c=+u[5],h=+u[6];continue}if(!i&&!n)return p=r(c,h,u[1],u[2],u[3],u[4],u[5],u[6],o-g)}g+=d,c=+u[5],h=+u[6]}f+=u.shift()+u}return m.end=f,p=i?g:n?m:l(c,h,u[0],u[1],u[2],u[3],u[4],u[5],1)},null,e._.clone)}function l(e,t,i,n,s,o,r,a,l){var c=1-l,h=W(c,3),u=W(c,2),d=l*l,p=d*l,f=h*e+3*u*l*i+3*c*l*l*s+p*r,m=h*t+3*u*l*n+3*c*l*l*o+p*a,g=e+2*l*(i-e)+d*(s-2*i+e),v=t+2*l*(n-t)+d*(o-2*n+t),b=i+2*l*(s-i)+d*(r-2*s+i),_=n+2*l*(o-n)+d*(a-2*o+n),y=c*e+l*i,w=c*t+l*n,x=c*s+l*r,k=c*o+l*a,C=90-180*j.atan2(g-b,v-_)/$;return{x:f,y:m,m:{x:g,y:v},n:{x:b,y:_},start:{x:y,y:w},end:{x:x,y:k},alpha:C}}function c(t,i,s,o,r,a,l,c){e.is(t,"array")||(t=[t,i,s,o,r,a,l,c]);var h=A.apply(null,t);return n(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y)}function h(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function u(e,t){return e=n(e),t=n(t),h(t,e.x,e.y)||h(t,e.x2,e.y)||h(t,e.x,e.y2)||h(t,e.x2,e.y2)||h(e,t.x,t.y)||h(e,t.x2,t.y)||h(e,t.x,t.y2)||h(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function d(e,t,i,n,s){var o=-3*t+9*i-9*n+3*s,r=e*o+6*t-12*i+6*n;return e*r-3*t+3*i}function p(e,t,i,n,s,o,r,a,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,h=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;h>m;m++){var g=c*u[m]+c,v=d(g,e,i,s,r),b=d(g,t,n,o,a),_=v*v+b*b;f+=p[m]*j.sqrt(_)}return c*f}function f(e,t,i,n,s,o,r,a,l){if(!(0>l||p(e,t,i,n,s,o,r,a)<l)){var c,h=1,u=h/2,d=h-u,f=.01;for(c=p(e,t,i,n,s,o,r,a,d);q(c-l)>f;)u/=2,d+=(l>c?1:-1)*u,c=p(e,t,i,n,s,o,r,a,d);return d}}function m(e,t,i,n,s,o,r,a){if(!(V(e,i)<B(s,r)||B(e,i)>V(s,r)||V(t,n)<B(o,a)||B(t,n)>V(o,a))){var l=(e*n-t*i)*(s-r)-(e-i)*(s*a-o*r),c=(e*n-t*i)*(o-a)-(t-n)*(s*a-o*r),h=(e-i)*(o-a)-(t-n)*(s-r);if(h){var u=l/h,d=c/h,p=+u.toFixed(2),f=+d.toFixed(2);if(!(p<+B(e,i).toFixed(2)||p>+V(e,i).toFixed(2)||p<+B(s,r).toFixed(2)||p>+V(s,r).toFixed(2)||f<+B(t,n).toFixed(2)||f>+V(t,n).toFixed(2)||f<+B(o,a).toFixed(2)||f>+V(o,a).toFixed(2)))return{x:u,y:d}}}}function g(e,t,i){var n=c(e),s=c(t);if(!u(n,s))return i?0:[];for(var o=p.apply(0,e),r=p.apply(0,t),a=~~(o/5),h=~~(r/5),d=[],f=[],g={},v=i?0:[],b=0;a+1>b;b++){var _=l.apply(0,e.concat(b/a));d.push({x:_.x,y:_.y,t:b/a})}for(b=0;h+1>b;b++)_=l.apply(0,t.concat(b/h)),f.push({x:_.x,y:_.y,t:b/h});for(b=0;a>b;b++)for(var y=0;h>y;y++){var w=d[b],x=d[b+1],k=f[y],C=f[y+1],S=q(x.x-w.x)<.001?"y":"x",E=q(C.x-k.x)<.001?"y":"x",I=m(w.x,w.y,x.x,x.y,k.x,k.y,C.x,C.y);if(I){if(g[I.x.toFixed(4)]==I.y.toFixed(4))continue;g[I.x.toFixed(4)]=I.y.toFixed(4);var D=w.t+q((I[S]-w[S])/(x[S]-w[S]))*(x.t-w.t),M=k.t+q((I[E]-k[E])/(C[E]-k[E]))*(C.t-k.t);D>=0&&1>=D&&M>=0&&1>=M&&(i?v++:v.push({x:I.x,y:I.y,t1:D,t2:M}))}}return v}function v(e,t){return _(e,t)}function b(e,t){return _(e,t,1)}function _(e,t,i){e=T(e),t=T(t);for(var n,s,o,r,a,l,c,h,u,d,p=i?0:[],f=0,m=e.length;m>f;f++){var v=e[f];if("M"==v[0])n=a=v[1],s=l=v[2];else{"C"==v[0]?(u=[n,s].concat(v.slice(1)),n=u[6],s=u[7]):(u=[n,s,n,s,a,l,a,l],n=a,s=l);for(var b=0,_=t.length;_>b;b++){var y=t[b];if("M"==y[0])o=c=y[1],r=h=y[2];else{"C"==y[0]?(d=[o,r].concat(y.slice(1)),o=d[6],r=d[7]):(d=[o,r,o,r,c,h,c,h],o=c,r=h);var w=g(u,d,i);if(i)p+=w;else{for(var x=0,k=w.length;k>x;x++)w[x].segment1=f,w[x].segment2=b,w[x].bez1=u,w[x].bez2=d;p=p.concat(w)}}}}}return p}function y(e,t,i){var n=w(e);return h(n,t,i)&&_(e,[["M",t,i],["H",n.x2+10]],1)%2==1}function w(e){var t=i(e);if(t.bbox)return H(t.bbox);if(!e)return n();e=T(e);for(var s,o=0,r=0,a=[],l=[],c=0,h=e.length;h>c;c++)if(s=e[c],"M"==s[0])o=s[1],r=s[2],a.push(o),l.push(r);else{var u=A(o,r,s[1],s[2],s[3],s[4],s[5],s[6]);a=a.concat(u.min.x,u.max.x),l=l.concat(u.min.y,u.max.y),o=s[5],r=s[6]}var d=B.apply(0,a),p=B.apply(0,l),f=V.apply(0,a),m=V.apply(0,l),g=n(d,p,f-d,m-p);return t.bbox=H(g),g}function x(e,t,i,n,o){if(o)return[["M",e+o,t],["l",i-2*o,0],["a",o,o,0,0,1,o,o],["l",0,n-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-i,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-n],["a",o,o,0,0,1,o,-o],["z"]];var r=[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]];return r.toString=s,r}function k(e,t,i,n,o){if(null==o&&null==n&&(n=i),null!=o)var r=Math.PI/180,a=e+i*Math.cos(-n*r),l=e+i*Math.cos(-o*r),c=t+i*Math.sin(-n*r),h=t+i*Math.sin(-o*r),u=[["M",a,c],["A",i,i,0,+(o-n>180),0,l,h]];else u=[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]];return u.toString=s,u}function C(t){var n=i(t),r=String.prototype.toLowerCase;if(n.rel)return o(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var a=[],l=0,c=0,h=0,u=0,d=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],h=l,u=c,d++,a.push(["M",l,c]));for(var p=d,f=t.length;f>p;p++){var m=a[p]=[],g=t[p];if(g[0]!=r.call(g[0]))switch(m[0]=r.call(g[0]),m[0]){case"a":m[1]=g[1],m[2]=g[2],m[3]=g[3],m[4]=g[4],m[5]=g[5],m[6]=+(g[6]-l).toFixed(3),m[7]=+(g[7]-c).toFixed(3);break;case"v":m[1]=+(g[1]-c).toFixed(3);break;case"m":h=g[1],u=g[2];default:for(var v=1,b=g.length;b>v;v++)m[v]=+(g[v]-(v%2?l:c)).toFixed(3)}else{m=a[p]=[],"m"==g[0]&&(h=g[1]+l,u=g[2]+c);for(var _=0,y=g.length;y>_;_++)a[p][_]=g[_]}var w=a[p].length;switch(a[p][0]){case"z":l=h,c=u;break;case"h":l+=+a[p][w-1];break;case"v":c+=+a[p][w-1];break;default:l+=+a[p][w-2],c+=+a[p][w-1]}}return a.toString=s,n.rel=o(a),a}function S(t){var n=i(t);if(n.abs)return o(n.abs);if(O(t,"array")&&O(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r,a=[],l=0,c=0,h=0,u=0,d=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],h=l,u=c,d++,a[0]=["M",l,c]);for(var p,f,m=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=d,v=t.length;v>g;g++){if(a.push(p=[]),f=t[g],r=f[0],r!=r.toUpperCase())switch(p[0]=r.toUpperCase(),p[0]){case"A":p[1]=f[1],p[2]=f[2],p[3]=f[3],p[4]=f[4],p[5]=f[5],p[6]=+(f[6]+l),p[7]=+(f[7]+c);break;case"V":p[1]=+f[1]+c;break;case"H":p[1]=+f[1]+l;break;case"R":for(var b=[l,c].concat(f.slice(1)),_=2,y=b.length;y>_;_++)b[_]=+b[_]+l,b[++_]=+b[_]+c;a.pop(),a=a.concat(F(b,m));break;case"O":a.pop(),b=k(l,c,f[1],f[2]),b.push(b[0]),a=a.concat(b);break;case"U":a.pop(),a=a.concat(k(l,c,f[1],f[2],f[3])),p=["U"].concat(a[a.length-1].slice(-2));break;case"M":h=+f[1]+l,u=+f[2]+c;default:for(_=1,y=f.length;y>_;_++)p[_]=+f[_]+(_%2?l:c)}else if("R"==r)b=[l,c].concat(f.slice(1)),a.pop(),a=a.concat(F(b,m)),p=["R"].concat(f.slice(-2));else if("O"==r)a.pop(),b=k(l,c,f[1],f[2]),b.push(b[0]),a=a.concat(b);else if("U"==r)a.pop(),a=a.concat(k(l,c,f[1],f[2],f[3])),p=["U"].concat(a[a.length-1].slice(-2));else for(var w=0,x=f.length;x>w;w++)p[w]=f[w];if(r=r.toUpperCase(),"O"!=r)switch(p[0]){case"Z":l=h,c=u;break;case"H":l=p[1];break;case"V":c=p[1];break;case"M":h=p[p.length-2],u=p[p.length-1];default:l=p[p.length-2],c=p[p.length-1]}}return a.toString=s,n.abs=o(a),a}function E(e,t,i,n){return[e,t,i,n,i,n]}function I(e,t,i,n,s,o){var r=1/3,a=2/3;return[r*e+a*i,r*t+a*n,r*s+a*i,r*o+a*n,s,o]}function D(t,i,n,s,o,r,a,l,c,h){var u,d=120*$/180,p=$/180*(+o||0),f=[],m=e._.cacher(function(e,t,i){var n=e*j.cos(i)-t*j.sin(i),s=e*j.sin(i)+t*j.cos(i);return{x:n,y:s}});if(h)C=h[0],S=h[1],x=h[2],k=h[3];else{u=m(t,i,-p),t=u.x,i=u.y,u=m(l,c,-p),l=u.x,c=u.y;var g=(j.cos($/180*o),j.sin($/180*o),(t-l)/2),v=(i-c)/2,b=g*g/(n*n)+v*v/(s*s);b>1&&(b=j.sqrt(b),n=b*n,s=b*s);var _=n*n,y=s*s,w=(r==a?-1:1)*j.sqrt(q((_*y-_*v*v-y*g*g)/(_*v*v+y*g*g))),x=w*n*v/s+(t+l)/2,k=w*-s*g/n+(i+c)/2,C=j.asin(((i-k)/s).toFixed(9)),S=j.asin(((c-k)/s).toFixed(9));C=x>t?$-C:C,S=x>l?$-S:S,0>C&&(C=2*$+C),0>S&&(S=2*$+S),a&&C>S&&(C-=2*$),!a&&S>C&&(S-=2*$)}var E=S-C;if(q(E)>d){var I=S,M=l,A=c;S=C+d*(a&&S>C?1:-1),l=x+n*j.cos(S),c=k+s*j.sin(S),f=D(l,c,n,s,o,0,a,M,A,[S,I,x,k])}E=S-C;var T=j.cos(C),P=j.sin(C),F=j.cos(S),N=j.sin(S),O=j.tan(E/4),H=4/3*n*O,R=4/3*s*O,L=[t,i],z=[t+H*P,i-R*T],B=[l+H*N,c-R*F],V=[l,c];if(z[0]=2*L[0]-z[0],z[1]=2*L[1]-z[1],h)return[z,B,V].concat(f);f=[z,B,V].concat(f).join().split(",");for(var W=[],U=0,Y=f.length;Y>U;U++)W[U]=U%2?m(f[U-1],f[U],p).y:m(f[U],f[U+1],p).x;return W}function M(e,t,i,n,s,o,r,a,l){var c=1-l;return{x:W(c,3)*e+3*W(c,2)*l*i+3*c*l*l*s+W(l,3)*r,y:W(c,3)*t+3*W(c,2)*l*n+3*c*l*l*o+W(l,3)*a}}function A(e,t,i,n,s,o,r,a){var l,c=s-2*i+e-(r-2*s+i),h=2*(i-e)-2*(s-i),u=e-i,d=(-h+j.sqrt(h*h-4*c*u))/2/c,p=(-h-j.sqrt(h*h-4*c*u))/2/c,f=[t,a],m=[e,r];return q(d)>"1e12"&&(d=.5),q(p)>"1e12"&&(p=.5),d>0&&1>d&&(l=M(e,t,i,n,s,o,r,a,d),m.push(l.x),f.push(l.y)),p>0&&1>p&&(l=M(e,t,i,n,s,o,r,a,p),m.push(l.x),f.push(l.y)),c=o-2*n+t-(a-2*o+n),h=2*(n-t)-2*(o-n),u=t-n,d=(-h+j.sqrt(h*h-4*c*u))/2/c,p=(-h-j.sqrt(h*h-4*c*u))/2/c,q(d)>"1e12"&&(d=.5),q(p)>"1e12"&&(p=.5),d>0&&1>d&&(l=M(e,t,i,n,s,o,r,a,d),m.push(l.x),f.push(l.y)),p>0&&1>p&&(l=M(e,t,i,n,s,o,r,a,p),m.push(l.x),f.push(l.y)),{min:{x:B.apply(0,m),y:B.apply(0,f)},max:{x:V.apply(0,m),y:V.apply(0,f)}}}function T(e,t){var n=!t&&i(e);if(!t&&n.curve)return o(n.curve);for(var s=S(e),r=t&&S(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t){var i,n;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(D.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":i=t.x+(t.x-(t.bx||t.x)),n=t.y+(t.y-(t.by||t.y)),e=["C",i,n].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(I(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(I(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(E(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(E(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(E(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(E(t.x,t.y,t.X,t.Y))}return e}),h=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),p=V(s.length,r&&r.length||0)}},u=function(e,t,i,n,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",n.x,n.y]),i.bx=0,i.by=0,i.x=e[o][1],i.y=e[o][2],p=V(s.length,r&&r.length||0))},d=0,p=V(s.length,r&&r.length||0);p>d;d++){s[d]=c(s[d],a),h(s,d),r&&(r[d]=c(r[d],l)),r&&h(r,d),u(s,r,a,l,d),u(r,s,l,a,d);var f=s[d],m=r&&r[d],g=f.length,v=r&&m.length;a.x=f[g-2],a.y=f[g-1],a.bx=z(f[g-4])||a.x,a.by=z(f[g-3])||a.y,l.bx=r&&(z(m[v-4])||l.x),l.by=r&&(z(m[v-3])||l.y),l.x=r&&m[v-2],l.y=r&&m[v-1]}return r||(n.curve=o(s)),r?[s,r]:s}function P(e,t){if(!t)return e;var i,n,s,o,r,a,l;for(e=T(e),s=0,r=e.length;r>s;s++)for(l=e[s],o=1,a=l.length;a>o;o+=2)i=t.x(l[o],l[o+1]),n=t.y(l[o],l[o+1]),l[o]=i,l[o+1]=n;return e}function F(e,t){for(var i=[],n=0,s=e.length;s-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?s-4==n?o[3]={x:+e[0],y:+e[1]}:s-2==n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[s-2],y:+e[s-1]}:s-4==n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}var N=t.prototype,O=e.is,H=e._.clone,R="hasOwnProperty",L=/,?([a-z]),?/gi,z=parseFloat,j=Math,$=j.PI,B=j.min,V=j.max,W=j.pow,q=j.abs,U=a(1),Y=a(),X=a(0,1),G=e._unit2px,K={path:function(e){return e.attr("path")},circle:function(e){var t=G(e);return k(t.cx,t.cy,t.r)},ellipse:function(e){var t=G(e);return k(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=G(e);return x(t.x,t.y,t.width,t.height,t.rx,t.ry)},image:function(e){var t=G(e);return x(t.x,t.y,t.width,t.height)},text:function(e){var t=e.node.getBBox();return x(t.x,t.y,t.width,t.height)},g:function(e){var t=e.node.getBBox();return x(t.x,t.y,t.width,t.height)},symbol:function(e){var t=e.getBBox();return x(t.x,t.y,t.width,t.height)},line:function(e){return"M"+[e.attr("x1"),e.attr("y1"),e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},svg:function(e){var t=e.node.getBBox();return x(t.x,t.y,t.width,t.height)},deflt:function(e){var t=e.node.getBBox();return x(t.x,t.y,t.width,t.height)}};e.path=i,e.path.getTotalLength=U,e.path.getPointAtLength=Y,e.path.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return X(e,t).end;var n=X(e,i,1);return t?X(n,t).end:n},N.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},N.getPointAtLength=function(e){return Y(this.attr("d"),e)},N.getSubpath=function(t,i){return e.path.getSubpath(this.attr("d"),t,i)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=h,e.path.isBBoxIntersect=u,e.path.intersection=v,e.path.intersectionNumber=b,e.path.isPointInside=y,e.path.getBBox=w,e.path.get=K,e.path.toRelative=C,e.path.toAbsolute=S,e.path.toCubic=T,e.path.map=P,e.path.toString=s,e.path.clone=o}),n.plugin(function(e){var t=Math.max,i=Math.min,n=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,i=e.length;i>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},s=n.prototype;s.push=function(){for(var e,t,i=0,n=arguments.length;n>i;i++)e=arguments[i],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},s.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},s.forEach=function(e,t){for(var i=0,n=this.items.length;n>i;i++)if(e.call(t,this.items[i],i)===!1)return this;return this},s.remove=function(){for(;this.length;)this.pop().remove();return this},s.attr=function(e){for(var t=0,i=this.items.length;i>t;t++)this.items[t].attr(e);return this},s.clear=function(){for(;this.length;)this.pop()},s.splice=function(e,s){e=0>e?t(this.length+e,0):e,s=t(0,i(this.length-e,s));var o,r=[],a=[],l=[];for(o=2;o<arguments.length;o++)l.push(arguments[o]);for(o=0;s>o;o++)a.push(this[e+o]);for(;o<this.length-e;o++)r.push(this[e+o]);var c=l.length;for(o=0;o<c+r.length;o++)this.items[e+o]=this[e+o]=c>o?l[o]:r[o-c];for(o=this.items.length=this.length-=s-c;this[o];)delete this[o++];return new n(a)},s.exclude=function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},s.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},s.getBBox=function(){for(var e=[],n=[],s=[],o=[],r=this.items.length;r--;)if(!this.items[r].removed){var a=this.items[r].getBBox();e.push(a.x),n.push(a.y),s.push(a.x+a.width),o.push(a.y+a.height)}return e=i.apply(0,e),n=i.apply(0,n),s=t.apply(0,s),o=t.apply(0,o),{x:e,y:n,x2:s,y2:o,width:s-e,height:o-n,cx:e+(s-e)/2,cy:n+(o-n)/2}},s.clone=function(e){e=new n;for(var t=0,i=this.items.length;i>t;t++)e.push(this.items[t].clone());return e},s.toString=function(){return"Snap‘s set"},s.type="set",e.set=function(){var e=new n;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,t){function i(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function n(t,n,s){n=u(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var o,r,c,h,d=Math.max(t.length,n.length),p=[],f=[],m=0;d>m;m++){if(c=t[m]||i(n[m]),h=n[m]||i(c),c[0]!=h[0]||"r"==c[0].toLowerCase()&&(c[2]!=h[2]||c[3]!=h[3])||"s"==c[0].toLowerCase()&&(c[3]!=h[3]||c[4]!=h[4])){t=e._.transform2matrix(t,s()),n=e._.transform2matrix(n,s()),p=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],f=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(p[m]=[],f[m]=[],o=0,r=Math.max(c.length,h.length);r>o;o++)o in c&&(p[m][o]=c[o]),o in h&&(f[m][o]=h[o])}return{from:l(p),to:l(f),f:a(p)}}function s(e){return e}function o(e){return function(t){return+t.toFixed(3)+e}}function r(t){return e.rgb(t[0],t[1],t[2])}function a(e){var t,i,n,s,o,r,a=0,l=[];for(t=0,i=e.length;i>t;t++){for(o="[",r=['"'+e[t][0]+'"'],n=1,s=e[t].length;s>n;n++)r[n]="val["+a++ +"]";o+=r+"]",l[t]=o}return Function("val","return Snap.path.toString.call(["+l+"])")}function l(e){for(var t=[],i=0,n=e.length;n>i;i++)for(var s=1,o=e[i].length;o>s;s++)t.push(e[i][s]);return t}var c={},h=/[a-z]+$/i,u=String;c.stroke=c.fill="colour",t.prototype.equal=function(t,i){var d,p,f=u(this.attr(t)||""),m=this;if(f==+f&&i==+i)return{from:+f,to:+i,f:s};if("colour"==c[t])return d=e.color(f),p=e.color(i),{from:[d.r,d.g,d.b,d.opacity],to:[p.r,p.g,p.b,p.opacity],f:r};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return i instanceof e.Matrix&&(i=i.toTransformString()),e._.rgTransform.test(i)||(i=e._.svgTransform2string(i)),n(f,i,function(){return m.getBBox(1)});if("d"==t||"path"==t)return d=e.path.toCubic(f,i),{from:l(d[0]),to:l(d[1]),f:a(d[0])};if("points"==t)return d=u(f).split(","),p=u(i).split(","),{from:d,to:p,f:function(e){return e}};var g=f.match(h),v=u(i).match(h);return g&&g==v?{from:parseFloat(f),to:parseFloat(i),f:o(g)}:{from:this.asPX(t),to:this.asPX(t,i),f:s}}}),n.plugin(function(e,i,n,s){for(var o=i.prototype,r="hasOwnProperty",a=("createTouch"in s.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},h=function(e){var t="y"==e?"scrollTop":"scrollLeft";return s.doc.documentElement[t]||s.doc.body[t]},u=function(){this.returnValue=!1},d=function(){return this.originalEvent.preventDefault()},p=function(){this.cancelBubble=!0},f=function(){return this.originalEvent.stopPropagation()},m=function(){return s.doc.addEventListener?function(e,t,i,n){var s=a&&c[t]?c[t]:t,o=function(s){var o=h("y"),l=h("x");if(a&&c[r](t))for(var u=0,p=s.targetTouches&&s.targetTouches.length;p>u;u++)if(s.targetTouches[u].target==e||e.contains(s.targetTouches[u].target)){var m=s;s=s.targetTouches[u],s.originalEvent=m,s.preventDefault=d,s.stopPropagation=f;break}var g=s.clientX+l,v=s.clientY+o;return i.call(n,s,g,v)};return t!==s&&e.addEventListener(t,o,!1),e.addEventListener(s,o,!1),function(){return t!==s&&e.removeEventListener(t,o,!1),e.removeEventListener(s,o,!1),!0}}:s.doc.attachEvent?function(e,t,i,n){var o=function(e){e=e||s.win.event;var t=h("y"),o=h("x"),r=e.clientX+o,a=e.clientY+t;return e.preventDefault=e.preventDefault||u,e.stopPropagation=e.stopPropagation||p,i.call(n,e,r,a)};e.attachEvent("on"+t,o);var r=function(){return e.detachEvent("on"+t,o),!0};return r}:void 0}(),g=[],v=function(i){for(var n,s=i.clientX,o=i.clientY,r=h("y"),l=h("x"),c=g.length;c--;){if(n=g[c],a){for(var u,d=i.touches&&i.touches.length;d--;)if(u=i.touches[d],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){s=u.clientX,o=u.clientY,(i.originalEvent?i.originalEvent:i).preventDefault();break}}else i.preventDefault();{var p=n.el.node;e._.glob,p.nextSibling,p.parentNode,p.style.display}s+=l,o+=r,t("snap.drag.move."+n.el.id,n.move_scope||n.el,s-n.el._drag.x,o-n.el._drag.y,s,o,i)}},b=function(i){e.unmousemove(v).unmouseup(b);for(var n,s=g.length;s--;)n=g[s],n.el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,i);g=[]},_=l.length;_--;)!function(t){e[t]=o[t]=function(i,n){return e.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:m(this.shape||this.node||s.doc,t,i,n||this)})),this},e["un"+t]=o["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==t&&(i[n].f==e||!e))return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}}(l[_]);o.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)},o.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var y=[];o.drag=function(i,n,s,o,r,a){function l(l,c,h){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=h,this._drag.id=l.identifier,!g.length&&e.mousemove(v).mouseup(b),g.push({el:this,move_scope:o,start_scope:r,end_scope:a}),n&&t.on("snap.drag.start."+this.id,n),i&&t.on("snap.drag.move."+this.id,i),s&&t.on("snap.drag.end."+this.id,s),t("snap.drag.start."+this.id,r||o||this,c,h,l)}if(!arguments.length){var c;return this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})}return this._drag={},y.push({el:this,start:l}),this.mousedown(l),this},o.undrag=function(){for(var i=y.length;i--;)y[i].el==this&&(this.unmousedown(y[i].start),y.splice(i,1),t.unbind("snap.drag.*."+this.id));return!y.length&&e.unmousemove(v).unmouseup(b),this}}),n.plugin(function(e,i,n){var s=(i.prototype,n.prototype),o=/^\s*url\((.+)\)/,r=String,a=e._.$;e.filter={},s.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var s=e.parse(r(t)),o=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,a("filter"));return a(l,{id:o,filterUnits:"userSpaceOnUse"}),l.appendChild(s.node),n.defs.appendChild(l),new i(l)},t.on("snap.util.getattr.filter",function(){t.stop();var i=a(this.node,"filter");if(i){var n=r(i).match(o);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof i&&"filter"==n.type){t.stop();var s=n.node.id;s||(a(n.node,{id:n.id}),s=n.id),a(this.node,{filter:e.url(s)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,i){null==t&&(t=2);var n=null==i?t:[t,i];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,i,n,s){return s=s||"#000",null==n&&(n=4),"string"==typeof n&&(s=n,n=4),null==t&&(t=0,i=2),null==i&&(i=t),s=e.color(s),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:s,dx:t,dy:i,blur:n})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n}),define("eb/../../../node_modules/reserved_seating/src/components/camera/camera_view",["require","jquery.mousewheel","underscore","jquery","backbone"],function(e){e("jquery.mousewheel");var t,i=e("underscore"),n=e("jquery"),s=e("backbone");return t=s.View.extend({scales:[.1,.15,.24,.39,.63,1,1.6,2.5],defaultScale:5,panAmount:10,mouseWheelZoomIncrement:.1,touchZoomIncrement:.05,currentZoomScale:5,currentZoomLevel:1,hasPannableCanvas:!1,panEnabled:!1,lastMousePosition:{x:0,y:0},events:{mousewheel:"handleMouseWheel",mousedown:"handleMouseDragStart",touchstart:"handleMouseDragStart",mouseup:"handleMouseDragEnd",touchend:"handleMouseDragEnd",touchcancel:"handleMouseDragEnd",touchleave:"handleMouseDragEnd",mousemove:"handleMouseDrag",touchmove:"handleTouchMove"},initialize:function(e){if(i.bindAll(this,"handleMouseWheel","handleTouchMove","handleMouseDragStart","handleMouseDragEnd","handleMouseDrag","handleScreenResize","zoomIn","zoomOut","panUp","panDown","panLeft","panRight"),this.app=e.app,this.app.reqres.setHandler("camera:panning",function(){return this.panEnabled}.bind(this)),this.renderer=this.app.request("renderer"),e.isRenderer)this.viewPort={x:this.renderer.paper.attr("viewBox").x,y:this.renderer.paper.attr("viewBox").y,w:this.renderer.paper.attr("viewBox").width,h:this.renderer.paper.attr("viewBox").height,zoom:0},this.currentZoomLevel=this.app.request("el").width()/this.viewPort.w,this.currentZoomScale=this.convertZoomLevelToZoomScale(this.currentZoomLevel);else{var t=this.app.request("el").width(),s=this.app.request("el").height();this.viewPort={x:0-t/2,y:0-s/2,w:t,h:s,zoom:0}}n(window).on("resize",this.handleScreenResize),this.updateRendererViewBox(),this.box=e.box||window,e.isRenderer&&(this.$el.addClass("is-grabbable"),this.panEnabled=!0)},handleScreenResize:function(){this.viewPort.w=n(this.box).width()/this.currentZoomLevel,this.viewPort.h=n(this.box).height()/this.currentZoomLevel,this.updateRendererViewBox(),this.app.vent.trigger("reorient")},computeMouseMoveDelta:function(e,t){return{x:this.lastMousePosition.x-e,y:this.lastMousePosition.y-t}},computeZoomScale:function(){var e=n(this.box).width(),t=n(this.box).height();return{width:this.viewPort.w/e,height:this.viewPort.h/t}},findBestZoomScale:function(e,t){var s=this.maxZoomOutBound,o=(n(this.box).width()+.1)/(e||1),r=(n(this.box).height()+.1)/(t||1);return i.each(this.scales,function(e){o>=e&&r>=e&&(s=e)}),s},handleMouseWheel:function(e,t,i,s,o){var r=this.mouseWheelZoomIncrement;(this.options.isRenderer||n(e.target).is("svg")||n(e.target).parents("svg").length||o)&&(e.preventDefault(),o&&(r=this.touchZoomIncrement),this.app.vent.trigger("reorient"),this.zoomToLevel(s>0?this.currentZoomLevel+r:this.currentZoomLevel-r))},computeFingerDistance:function(e){if(e.length<2)return 0;var t="clientX",i="clientY";return e[0][t]||(t="x",i="y"),(e[0][t]-e[1][t])*(e[0][t]-e[1][t])+(e[0][i]-e[1][i])*(e[0][i]-e[1][i])},handleTouchMove:function(){arguments[0].preventDefault();var e=arguments[0].originalEvent&&arguments[0].originalEvent.touches,t=0;return e&&1!==e.length?(t=this.computeFingerDistance(e),void(t-this.currentFingerDistance!==0&&(this.handleMouseWheel(arguments[0],0,0,t-this.currentFingerDistance,!0),this.currentFingerDistance=t))):void this.handleMouseDrag(arguments[0])},handleMouseDrag:function(e){var t=e.clientX,i=e.clientY;if(e.originalEvent&&e.originalEvent.touches&&(t=e.originalEvent.touches[0].clientX||e.originalEvent.touches[0].x,i=e.originalEvent.touches[0].clientY||e.originalEvent.touches[0].y,t-=this.app.request("el").offset().left,i-=this.app.request("el").offset().top),this.hasPannableCanvas&&this.panEnabled){this.options.isRenderer||this.$el.removeClass("is-grabbable"),this.$el.addClass("is-grabbed"),this.app.vent.trigger("reorient");var n=this.computeMouseMoveDelta(t,i),s=this.computeZoomScale();this.viewPort.x+=n.x*s.width,this.viewPort.y+=n.y*s.height,this.updateRendererViewBox()}this.lastMousePosition={x:t,y:i}},handleMouseDragStart:function(e){if(this.app.request("selection:enabled")!==!0){this.options.isRenderer||(this.$el.addClass("is-grabbable"),this.$el.removeClass("is-grabbed"),this.panEnabled=!0),navigator.userAgent.match(/Android/i)&&e.preventDefault();
var t=e.clientX,i=e.clientY;e.originalEvent&&e.originalEvent.touches&&(t=e.originalEvent.touches[0].clientX||e.originalEvent.touches[0].x,i=e.originalEvent.touches[0].clientY||e.originalEvent.touches[0].y,t-=this.app.request("el").offset().left,i-=this.app.request("el").offset().top,this.currentFingerDistance=this.computeFingerDistance(e.originalEvent.touches)),this.lastMousePosition={x:t,y:i},this.$el.addClass("is-grabbable"),this.hasPannableCanvas=!0,this.trigger("panning:start")}},handleMouseDragEnd:function(){this.options.isRenderer||(this.panEnabled=!1),this.hasPannableCanvas=!1,this.$el.removeClass("is-grabbable").removeClass("is-grabbed"),this.trigger("panning:end")},zoomIn:function(){this.zoomToScale(this.currentZoomScale+1)},zoomOut:function(){this.zoomToScale(this.currentZoomScale-1)},convertZoomLevelToZoomScale:function(e){var t=0,i=0;if(this.currentZoomLevel<e)for(t=0;t<this.scales.length&&(i=t,!(e<=this.scales[t]));t++);else for(t=this.scales.length-1;t>=0&&(i=t,!(e>=this.scales[t]));t--);return i},zoomToLevel:function(e,t){e<=i(this.scales).first()&&(e=i(this.scales).first()),e>=i(this.scales).last()&&(e=i(this.scales).last());var s=i.clone(this.viewPort),o={w:n(this.box).width()/e,h:n(this.box).height()/e},r={x:(o.w-s.w)/2,y:(o.h-s.h)/2};this.viewPort.w=o.w,this.viewPort.h=o.h,this.viewPort.x-=r.x,this.viewPort.y-=r.y,this.updateRendererViewBox(),this.currentZoomScale=this.convertZoomLevelToZoomScale(e),this.currentZoomLevel=e,this.viewPort.zoom=e,this.app.vent.trigger("reorient"),t||this.trigger("zoomed",{scale:this.currentZoomScale,level:this.currentZoomLevel})},zoomToScale:function(e,t){0>e&&(e=0),e>=this.scales.length&&(e=this.scales.length-1),e!==this.currentZoomScale&&this.zoomToLevel(this.scales[e],t)},panUp:function(){this.app.vent.trigger("reorient"),this.viewPort.y-=this.panAmount,this.updateRendererViewBox()},panDown:function(){this.app.vent.trigger("reorient"),this.viewPort.y+=this.panAmount,this.updateRendererViewBox()},panLeft:function(){this.app.vent.trigger("reorient"),this.viewPort.x-=this.panAmount,this.updateRendererViewBox()},panRight:function(){this.app.vent.trigger("reorient"),this.viewPort.x+=this.panAmount,this.updateRendererViewBox()},updateRendererViewBox:function(){isNaN(this.viewPort.x)||isNaN(this.viewPort.y)||isNaN(this.viewPort.w)||isNaN(this.viewPort.y)||(this.renderer.paper.setViewBox?this.renderer.paper.setViewBox(this.viewPort.x,this.viewPort.y,this.viewPort.w,this.viewPort.h,!0):this.renderer.paper.attr({viewBox:[this.viewPort.x,this.viewPort.y,this.viewPort.w,this.viewPort.h]}))},screenToCameraCoords:function(e){var t=this.computeZoomScale();return{x:e.x*t.width+this.viewPort.x,y:e.y*t.height+this.viewPort.y}},cameraToScreenCoords:function(e){var t=this.computeZoomScale();return{x:(e.x-this.viewPort.x)/t.width,y:(e.y-this.viewPort.y)/t.height}},isCameraCoordOnScreen:function(e){return e?e.x<this.viewPort.x||e.y<this.viewPort.y||e.x>this.viewPort.x+this.viewPort.w||e.y>this.viewPort.y+this.viewPort.h?!1:!0:!1},animateViewBox:function(e){var t,i,s,o,r,a,l,c,h,u,d,p,f,m,g=this.app.request("RenderingEngine"),v=this.viewPort.x,b=this.viewPort.y,_=this.viewPort.w,y=this.viewPort.h,w=g.easing_formulas["<>"],x=25,k=0;return this.previousX=v,this.previousY=b,this.previousW=_,this.previousH=y,r=this.findBestZoomScale(e.w||_,e.h||y),s=n(this.box).width()/r,o=n(this.box).height()/r,t=void 0!==e.cx?e.cx-s/2:void 0!==e.x?e.x:v,i=void 0!==e.cy?e.cy-o/2:void 0!==e.y?e.y:b,a=t-v,l=i-b,c=s-_,h=o-y,u=t+s-(v+_),d=i+o-(b+y),p=50*Math.ceil(10*Math.max(Math.min(Math.abs(a/_),Math.abs(a/(_+c))),Math.min(Math.abs(u/_),Math.abs(u/(_+c))),Math.min(Math.abs(l/y),Math.abs(l/(y+h))),Math.min(Math.abs(d/y),Math.abs(d/(y+h))))),0===p?void(e.callback&&e.callback()):(f=p/x,void(m=setInterval(function(){var n=w(k/f);this.renderer.paper.setViewBox(v+a*n,b+l*n,_+c*n,y+h*n,!1),k++>=f&&(this.currentZoomLevel=r,this.viewPort.x=t,this.viewPort.y=i,this.viewPort.w=s,this.viewPort.h=o,clearInterval(m),e.callback&&e.callback(),this.trigger("zoomed",this.scales.indexOf(this.currentZoomLevel)))}.bind(this),25)))},restorePreviousViewBox:function(e){this.previousW&&this.previousY&&(e=i.extend({},e),e.cx=this.previousX+this.previousW/2,e.cy=this.previousY+this.previousH/2,e.w=this.previousW,e.h=this.previousH,this.animateViewBox(e))}}),{create:function(e,i,n,s){return window.camera=new t({el:e,app:i,box:n,isRenderer:s}),window.camera},update:function(e){return e.renderer=e.app.request("renderer"),e.undelegateEvents(),e.$el=n(e.renderer.paper.canvas),e.delegateEvents(),e.updateRendererViewBox(),e}}}),define("eb/../../../node_modules/reserved_seating/src/core/constants",{MODE_SEATS:1,MODE_SELLING_ORDER:2,MODE_TICKETS:3,MODE_FINAL_REVIEW:4,MODE_FOCUS:5,MODE_PREVIEW:6,MODE_STATUS_ACTIVE:"active",MODE_STATUS_INACTIVE:"inactive",MODE_STATUS_VALIDATED:"validated",MODE_STATUS_DISABLED:"disabled",MAX_UNITS:3e3,MAX_OBJECTS:500,SEATS_MUST_BE_DEFINED:101,SEATS_MUST_HAVE_LABEL:102,SEATS_LABEL_MUST_BE_UNIQUE:103,SCORE_MUST_BE_ASSIGNED:201,TICKETS_MUST_BE_DEFINED:301,ALL_SEATS_MUST_HAVE_TICKET:302,ALL_TICKETS_MUST_HAVE_SEAT:303,SELLING_ORDER_MODE:"selling_order_mode",SELLING_ORDER_BASIC:0,SELLING_ORDER_ADVANCED:1,UNIT_NUMERIC_SEQUENTIAL:1,UNIT_NUMERIC_ALTERNATING:2,UNIT_ALPHABETICAL:3,UNIT_AVAILABLE:"A",UNIT_HELD:"P",UNIT_LOCKED:"L",UNIT_SOLD:"R",GROUP_NUMERIC_SEQUENTIAL:1,GROUP_NUMERIC_ALTERNATING:2,GROUP_ALPHABETICAL:3,MAX_GROUP_LABEL_LENGTH:50,MAX_UNIT_LABEL_LENGTH:5,ATTRIBUTE_CLASS_TICKET:"ticket",ATTRIBUTE_CLASS_TITLE:"title",TABLE_MAX_CHAIRS:40,SECTION_MAX_ROWS:30,SECTION_MAX_SEATS:50}),define("text",["module"],function(e){var t,i,n,s,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,h=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,d=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=r[t];try{e=new ActiveXObject(i)}catch(n){}if(e){r=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,o=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),i=e.substring(o+1,e.length)):t=e,n=i||t,o=n.indexOf("!"),-1!==o&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,s){var o,r,a,l=t.xdRegExp.exec(e);return l?(o=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==s)):!0},finishLoad:function(e,i,n,s){n=i?t.strip(n):n,f.isBuild&&(p[e]=n),s(n)},load:function(e,i,n,s){if(s.isBuild&&!s.inlineText)return void n();f.isBuild=s.isBuild;var o=t.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),a=i.toUrl(r),l=f.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void n():void(!c||l(a,h,u,d)?t.get(a,function(i){t.finishLoad(e,o.strip,i,n)},function(e){n.error&&n.error(e)}):i([r],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,i,n){if(p.hasOwnProperty(i)){var s=t.jsEscape(p[i]);n.asModule(e+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,i,n,s,o){var r=t.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";t.load(l,n,function(){var i=function(e){return s(c,e)};i.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,l,i,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var s=i.readFileSync(e,"utf8");0===s.indexOf("﻿")&&(s=s.substring(1)),t(s)}catch(o){n(o)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,i,n,s){var o,r=t.createXhr();if(r.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=r,n(s)):i(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,s="utf-8",o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,r,a,l={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),define("hb",["text","handlebars","module"],function(e,t,i){var n,s=i.config(),o=t.hasOwnProperty("default"),r=o?t["default"]:t,a={},l=o?'define("{{pluginName}}!{{moduleName}}", ["handlebars.runtime"], function(hr) {return hr["default"].template({{{fn}}})});':'define("{{pluginName}}!{{moduleName}}", ["handlebars"], function(handlebars) {return handlebars.template({{{fn}}})});',c=function(e,t,i,n){i.isBuild?(a[e]=n,t()):t(r.compile(n))},h=function(t,i,n,o){var r,a=c.bind(null,t,n,o),l=s&&"function"==typeof s.preProcess;l&&(r=s.preProcess.bind(null,a,{moduleName:t,parentRequire:i,config:o,pluginConfig:s})),e.load(t,i,l?r:a,o)},u=function(e,t,i){if(!r.precompile&&require.nodeRequire)try{r=require.nodeRequire("handlebars")}catch(s){process.stdout.write("\nLooks like the runtime version of Handlebars is used.\n"),process.stderr.write("Install handlebars with npm to precompile templates: npm install handlebars --save-dev\n\n")}t in a&&(n||(n=r.compile(l)),i(n({pluginName:e,moduleName:t,fn:r.precompile(a[t])})))};return{load:h,write:u}}),define("hb!eb/../../../node_modules/reserved_seating/src/components/camera/camera_control.handlebars",["handlebars.runtime"],function(e){return e["default"].template(function(e,t,i,n,s){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var o,r="",a="function",l=this.escapeExpression;return r+='<nav class="camera-controls">\n    <div class="js-camera__pan camera-controls__group camera-controls__pan">\n        <i class="js-pan-up ico-omnes-arrow-up"></i>\n        <i class="js-pan-right ico-omnes-arrow-right"></i>\n        <i class="js-pan-left ico-omnes-arrow-left"></i>\n        <i class="js-pan-down ico-omnes-arrow-down"></i>\n    </div>\n    <div class="camera-controls__group camera-controls__zoom">\n        <div class="js-zoom-in"><span class="ico-plus"></span></div>\n        <input type="range" value="',(o=i.value)?o=o.call(t,{hash:{},data:s}):(o=t&&t.value,o=typeof o===a?o.call(t,{hash:{},data:s}):o),r+=l(o)+'" max="',(o=i.max)?o=o.call(t,{hash:{},data:s}):(o=t&&t.max,o=typeof o===a?o.call(t,{hash:{},data:s}):o),r+=l(o)+'" min="',(o=i.min)?o=o.call(t,{hash:{},data:s}):(o=t&&t.min,o=typeof o===a?o.call(t,{hash:{},data:s}):o),r+=l(o)+'" step="',(o=i.step)?o=o.call(t,{hash:{},data:s}):(o=t&&t.step,o=typeof o===a?o.call(t,{hash:{},data:s}):o),r+=l(o)+'" class="js-zoom-level form__range form__range--vertical" />\n        <div class="js-zoom-out camera-controls__zoom__out"><span class="ico-minus"></span></div>\n    </div>\n</nav>\n'})}),define("eb/../../../node_modules/reserved_seating/src/components/camera/exceptions",{MissingCameraViewException:{name:"MissingCameraViewException",message:"This object requires a CameraView object to be passed in",toString:function(){return this.name+": "+this.message}}}),function(e){"function"==typeof define&&define.amd?define("rangeslider",["jquery"],e):e(jQuery)}(function(e){function t(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}function i(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}function n(e,t){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)}function s(e,t){return t=t||100,function(){if(!e.debouncing){var i=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,i),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function o(t,i){if(this.$window=e(window),this.$document=e(document),this.$element=e(t),this.options=e.extend({},c,i),this._defaults=c,this._name=r,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&l)return!1;this.identifier="js-"+r+"-"+ +new Date,this.value=parseInt(this.$element[0].value)||0,this.min=parseInt(this.$element[0].getAttribute("min"))||0,this.max=parseInt(this.$element[0].getAttribute("max"))||0,this.step=parseInt(this.$element[0].getAttribute("step"))||1,this.$range=e('<div class="'+this.options.rangeClass+'" />'),this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$base=e('<div class="'+this.options.baseClass+'" id="'+this.identifier+'" />').insertBefore(this.$element).prepend(this.$range,this.$fill,this.$handle,this.$element),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",visibility:"hidden"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var o=this;this.$window.on("resize."+r,s(function(){n(function(){o.update()},300)},20)),this.$document.on(this.options.startEvent,"#"+this.identifier,this.handleDown)}var r="rangeslider",a=i(),l=t(),c={polyfill:!0,orientation:"horizontal",baseClass:"rangeslider",rangeClass:"rangeslider__range",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:(a?"touchstart":"mousedown")+"."+r,moveEvent:(a?"touchmove":"mousemove")+"."+r,endEvent:(a?"touchend":"mouseup")+"."+r};o.prototype.init=function(){this.update(),this.onInit&&"function"==typeof this.onInit&&this.onInit()},o.prototype.update=function(){this.handleWidth=this.$handle.width(),this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.setPosition(this.position)},o.prototype.handleDown=function(e){e.preventDefault(),this.$document.on(this.options.moveEvent,this.handleMove),this.$document.on(this.options.endEvent,this.handleEnd);var t=this.getRelativePosition(this.$base[0],e),i=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$base[0]);this.setPosition("horizontal"===this.options.orientation?t-this.grabX:this.grabX-t),t>=i&&t<i+this.handleWidth&&(this.grabX=t-i)},o.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(this.$base[0],e);this.setPosition("horizontal"===this.options.orientation?t-this.grabX:this.grabX-t)},o.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.options.moveEvent,this.handleMove),this.$document.off(this.options.endEvent,this.handleEnd);var t=this.getRelativePosition(this.$base[0],e);this.onSlideEnd&&"function"==typeof this.onSlideEnd&&("horizontal"===this.options.orientation?this.onSlideEnd(t-this.grabX,this.value):this.onSlideEnd(this.grabX-t,this.value))},o.prototype.cap=function(e,t,i){return t>e?t:e>i?i:e},o.prototype.setPosition=function(e){var t,i;t=this.cap(e,0,this.maxHandleX),i=this.getValueFromPosition(t),this.step>1&&(i=Math.ceil(i/this.step)*this.step,t=this.getPositionFromValue(i)),t=Math.ceil(t),this.$fill[0].style.width=t+this.handleWidth+"px",this.$handle[0].style.left=t+"px",this.setValue(i),this.position=t,this.value=i,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(t,i)},o.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+="horizontal"===this.options.orientation?e.offsetLeft:e.offsetTop,e=e.offsetParent;return t},o.prototype.getRelativePosition=function(e,t){var i=t.pageX||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0].pageX;return"vertical"===this.options.orientation&&(i=t.pageY||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0].pageY),(i||0)-this.getPositionFromNode(e)},o.prototype.getPositionFromValue=function(e){var t,i;return t=(e-this.min)/(this.max-this.min)*100,i=t/100*this.maxHandleX},o.prototype.getValueFromPosition=function(e){var t,i;return t=e/this.maxHandleX*100,i=Math.ceil(t/100*(this.max-this.min)+this.min)},o.prototype.setValue=function(e){this.$element.val(e).trigger("change")},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new o(this,t))})}}),define("bootstrap-tooltip",["jquery"],function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var s,o,r,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,n=e.fn[this.type].defaults,s={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(s[e]=t)},this),i=e(t.currentTarget)[this.type](s).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var t,i,n,s,o,r,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(r,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,s,o,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),i=r[0].offsetWidth,n=r[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,o=!0),"bottom"==t||"top"==t?(s=0,e.left<0&&(s=-2*e.left,e.left=0,r.offset(e),i=r[0].offsetWidth,n=r[0].offsetHeight),this.replaceArrow(s-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&r.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;return e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this},t}),define("eb/../../../node_modules/reserved_seating/src/components/camera/camera_control_view",["require","jquery","underscore","backbone","../../core/constants","hb!./camera_control.handlebars","./exceptions","rangeslider","bootstrap-tooltip"],function(e){var t,i=e("jquery"),n=e("underscore"),s=e("backbone"),o=e("../../core/constants"),r=e("hb!./camera_control.handlebars"),a=e("./exceptions");return e("rangeslider"),e("bootstrap-tooltip"),t=s.View.extend({repeatInterval:200,events:{"mousedown .js-zoom-in":"handleZoomIn","mousedown .js-zoom-out":"handleZoomOut","mousedown .js-pan-up":"handlePanUp","mousedown .js-pan-down":"handlePanDown","mousedown .js-pan-left":"handlePanLeft","mousedown .js-pan-right":"handlePanRight","mouseup .js-pan-right":"handlePanOut","mouseup .js-pan-left":"handlePanOut","mouseup .js-pan-up":"handlePanOut","mouseup .js-pan-down":"handlePanOut",mouseup:"handleMouseDone",mouseout:"handleMouseDone",mouseleave:"handleMouseDone","change .js-zoom-level":"handleZoomChange","mouseenter .js-zoom-level":"recalculateTooltipPosition","input .js-zoom-level":"recalculateTooltipPosition","mouseenter .js-zoom-in":"toggleZoomLevelTooltip","mouseenter .js-zoom-out":"toggleZoomLevelTooltip","mouseleave .js-camera__pan":"toggleZoomLevelTooltip","mouseleave .js-zoom-in":"toggleZoomLevelTooltip","mouseleave .js-zoom-out":"toggleZoomLevelTooltip"},initialize:function(e){n.bindAll(this,"updateZoomValue","repeatAction","show","hide","adjustWindowSize","isOverlayMode","handleModeChange"),this.app=e.app,this.cameraView=e.cameraView,this.listenTo(this.cameraView,"zoomed",this.updateZoomValue),this.app.on("mode:set",this.handleModeChange),this.app.on("mode:change",this.adjustWindowSize),this.app.on("dock:ready",this.handleModeChange),this.registerHotkeys(),i(window).resize(function(){this.adjustWindowSize()}.bind(this))},registerHotkeys:function(){this.listenTo(this.app,"keydown:plus",this.cameraView.zoomIn),this.listenTo(this.app,"keydown:minus",this.cameraView.zoomOut),this.listenTo(this.app,"keydown:equal",this.handleEqualHotkey),this.listenTo(this.app,"keydown:dash",this.handleDashHotkey),this.listenTo(this.app,"keydown:leftArrow ",this.handleLeftArrow),this.listenTo(this.app,"keydown:rightArrow",this.handleRightArrow),this.listenTo(this.app,"keydown:upArrow",this.handleUpArrow),this.listenTo(this.app,"keydown:downArrow",this.handleDownArrow)},isAllowedToPan:function(){return 0===this.app.request("selection:shapes").length},handleLeftArrow:function(){this.isAllowedToPan()&&this.cameraView.panRight()},handleRightArrow:function(){this.isAllowedToPan()&&this.cameraView.panLeft()},handleUpArrow:function(){this.isAllowedToPan()&&this.cameraView.panDown()},handleDownArrow:function(){this.isAllowedToPan()&&this.cameraView.panUp()},handleEqualHotkey:function(e){e.shiftKey&&this.cameraView.zoomIn()},handleDashHotkey:function(e){e.shiftKey||this.cameraView.zoomOut()},render:function(){return this.$el.empty().append(r({min:1,max:this.cameraView.scales.length-1,step:1,value:this.cameraView.defaultScale})),n.defer(function(e){var t=e.getZoomLevelPercentValue(e.cameraView.defaultScale);e.$(".js-zoom-level").tooltip({title:t+"%",template:'<div class="tooltip tooltip__zoom-level js-zoom-level-tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',placement:"right"}).trigger("input")},this),this},renderRangeslider:function(){this.$('input[type="range"]').rangeslider({orientation:"vertical",polyfill:!1,baseClass:"form__range--rangeslider",rangeClass:"form__range--rangeslider__range",fillClass:"form__range--rangeslider__fill",handleClass:"form__range--rangeslider__handle"}),this.$(".form__range--rangeslider").addClass("form__range--vertical")},repeatAction:function(e){this.actionIntervalId=setInterval(this.cameraView[e],this.repeatInterval)},updateZoomValue:function(e){this.$(".js-zoom-level").val(e.level)},handleZoomIn:function(){this.cameraView.zoomIn(),this.repeatAction("zoomIn")},handleZoomOut:function(){this.cameraView.zoomOut(),this.repeatAction("zoomOut")},handleZoomChange:function(e){this.cameraView.zoomToScale(parseInt(i(e.currentTarget).val(),10),!0),this.recalculateTooltipPosition()},handlePanUp:function(e){e.preventDefault(),this.cameraView.panUp(),this.$(".js-camera__pan").addClass("camera-controls__pan-up"),this.repeatAction("panUp")},handlePanDown:function(e){e.preventDefault(),this.cameraView.panDown(),this.$(".js-camera__pan").addClass("camera-controls__pan-down"),this.repeatAction("panDown")},handlePanLeft:function(e){e.preventDefault(),this.cameraView.panLeft(),this.$(".js-camera__pan").addClass("camera-controls__pan-left"),this.repeatAction("panLeft")},handlePanRight:function(e){e.preventDefault(),this.cameraView.panRight(),this.$(".js-camera__pan").addClass("camera-controls__pan-right"),this.repeatAction("panRight")},handlePanOut:function(){this.$(".js-camera__pan").removeClass("camera-controls__pan-right camera-controls__pan-left camera-controls__pan-down camera-controls__pan-up")},handleMouseDone:function(e){this.actionIntervalId&&(e.preventDefault(),clearInterval(this.actionIntervalId),this.actionIntervalId=void 0,this.$(".js-zoom-level").trigger("input").trigger("mouseenter"))},show:function(){this.$el.show()},hide:function(){this.$el.hide()},isOverlayMode:function(e){return e===o.MODE_FINAL_REVIEW||this.app.request("summaryModel").get("introOverlayOpen")===!0},handleModeChange:function(e){this.isOverlayMode(e)?this.hide():this.show()},adjustWindowSize:function(){var e=this.$el,t=i(window).height(),n=i(window).width();e.closest("#seat-map-renderer").height(t),e.closest("#seat-map-renderer").width(n),656>t&&e.parents().find("#dock-renderer").length?e.find("nav.camera-controls").css("left","90px"):e.find("nav.camera-controls").css("left","20px")},recalculateTooltipPosition:function(){var e=this.$(".js-zoom-level"),t=e.width(),i=t/this.cameraView.scales.length-1,n=e.val(),s=t-i*n,o=this.getZoomLevelPercentValue(n);e.data("tooltip").options.title=o+"%",this.$(".js-zoom-level-tooltip").css({top:s,left:i}).children(".tooltip-inner").html(o+"%"),this.adjustWindowSize()},getZoomLevelPercentValue:function(e){var t=this.cameraView.defaultScale,i=20,n=100;return e>t?n=100+i*(e-t):t>e&&(n=100-i*(t-e)),n},toggleZoomLevelTooltip:function(e){this.$(".js-zoom-level").trigger(e.type)}}),{create:function(e){if("object"!=typeof e||!e.cameraView)throw a.MissingCameraViewException;return new t(e)}}}),define("eb/components/seatmap/camera/app",["require","snap","../../../../../../node_modules/reserved_seating/src/components/camera/camera_view","../../../../../../node_modules/reserved_seating/src/components/camera/camera_control_view","require/core/bootstrap","rangeslider"],function(e){var t=jQuery,i=e("snap"),n=e("../../../../../../node_modules/reserved_seating/src/components/camera/camera_view"),s=e("../../../../../../node_modules/reserved_seating/src/components/camera/camera_control_view");return e("require/core/bootstrap"),e("rangeslider"),{initSandbox:function(e){var n=t(e),s=i(e);return{el:n,renderer:{paper:s},request:function(e){return this[e]},reqres:{setHandler:function(e,t){this[e]=t}},vent:{trigger:function(){}},on:function(){}}},setupMobileCamera:function(e){var i=this.initSandbox(e),s=n.create(t(e),i,e,!0);s.zoomToLevel(s.currentZoomLevel-.1)},setupCamera:function(e){var i,o=t(e),r=this.initSandbox(e),a=n.create(o,r,e,!0);a.zoomToLevel(a.currentZoomLevel-.1),i=s.create({cameraView:a,app:r}),o.parent().append(i.render().$el),i.show(),navigator.userAgent.toLowerCase().indexOf("msie")>-1&&i.renderRangeSlider()}}}),function(){function e(i,s){if(i=i?i:"",s=s||{},"object"==typeof i&&i.hasOwnProperty("_tc_id"))return i;var r=t(i),l=r.r,u=r.g,d=r.b,p=r.a,f=x(100*p)/100,g=s.format||r.format;return 1>l&&(l=x(l)),1>u&&(u=x(u)),1>d&&(d=x(d)),{ok:r.ok,format:g,_tc_id:y++,alpha:p,getAlpha:function(){return p},setAlpha:function(e){p=c(e),f=x(100*p)/100},toHsv:function(){var e=o(l,u,d);return{h:360*e.h,s:e.s,v:e.v,a:p}},toHsvString:function(){var e=o(l,u,d),t=x(360*e.h),i=x(100*e.s),n=x(100*e.v);return 1==p?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+f+")"},toHsl:function(){var e=n(l,u,d);return{h:360*e.h,s:e.s,l:e.l,a:p}},toHslString:function(){var e=n(l,u,d),t=x(360*e.h),i=x(100*e.s),s=x(100*e.l);return 1==p?"hsl("+t+", "+i+"%, "+s+"%)":"hsla("+t+", "+i+"%, "+s+"%, "+f+")"},toHex:function(e){return a(l,u,d,e)},toHexString:function(e){return"#"+a(l,u,d,e)},toRgb:function(){return{r:x(l),g:x(u),b:x(d),a:p}},toRgbString:function(){return 1==p?"rgb("+x(l)+", "+x(u)+", "+x(d)+")":"rgba("+x(l)+", "+x(u)+", "+x(d)+", "+f+")"},toPercentageRgb:function(){return{r:x(100*h(l,255))+"%",g:x(100*h(u,255))+"%",b:x(100*h(d,255))+"%",a:p}},toPercentageRgbString:function(){return 1==p?"rgb("+x(100*h(l,255))+"%, "+x(100*h(u,255))+"%, "+x(100*h(d,255))+"%)":"rgba("+x(100*h(l,255))+"%, "+x(100*h(u,255))+"%, "+x(100*h(d,255))+"%, "+f+")"},toName:function(){return 0===p?"transparent":I[a(l,u,d,!0)]||!1},toFilter:function(t){var i=a(l,u,d),n=i,o=Math.round(255*parseFloat(p)).toString(16),r=o,c=s&&s.gradientType?"GradientType = 1, ":"";
if(t){var h=e(t);n=h.toHex(),r=Math.round(255*parseFloat(h.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+c+"startColorstr=#"+m(o)+i+",endColorstr=#"+m(r)+n+")"},toString:function(e){var t=!!e;e=e||this.format;var i=!1,n=!t&&1>p&&p>0,s=n&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return"rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),s?this.toRgbString():i||this.toHexString()}}}function t(e){var t={r:0,g:0,b:0},n=1,o=!1,a=!1;return"string"==typeof e&&(e=v(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=i(e.r,e.g,e.b),o=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=g(e.s),e.v=g(e.v),t=r(e.h,e.s,e.v),o=!0,a="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=g(e.s),e.l=g(e.l),t=s(e.h,e.s,e.l),o=!0,a="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=c(n),{ok:o,format:e.format||a,r:k(255,C(t.r,0)),g:k(255,C(t.g,0)),b:k(255,C(t.b,0)),a:n}}function i(e,t,i){return{r:255*h(e,255),g:255*h(t,255),b:255*h(i,255)}}function n(e,t,i){e=h(e,255),t=h(t,255),i=h(i,255);var n,s,o=C(e,t,i),r=k(e,t,i),a=(o+r)/2;if(o==r)n=s=0;else{var l=o-r;switch(s=a>.5?l/(2-o-r):l/(o+r),o){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:s,l:a}}function s(e,t,i){function n(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+(t-e)*(2/3-i)*6:e}var s,o,r;if(e=h(e,360),t=h(t,100),i=h(i,100),0===t)s=o=r=i;else{var a=.5>i?i*(1+t):i+t-i*t,l=2*i-a;s=n(l,a,e+1/3),o=n(l,a,e),r=n(l,a,e-1/3)}return{r:255*s,g:255*o,b:255*r}}function o(e,t,i){e=h(e,255),t=h(t,255),i=h(i,255);var n,s,o=C(e,t,i),r=k(e,t,i),a=o,l=o-r;if(s=0===o?0:l/o,o==r)n=0;else{switch(o){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:s,v:a}}function r(e,t,i){e=6*h(e,360),t=h(t,100),i=h(i,100);var n=w.floor(e),s=e-n,o=i*(1-t),r=i*(1-s*t),a=i*(1-(1-s)*t),l=n%6,c=[i,r,o,o,a,i][l],u=[a,i,i,r,o,o][l],d=[o,o,a,i,i,r][l];return{r:255*c,g:255*u,b:255*d}}function a(e,t,i,n){var s=[m(x(e).toString(16)),m(x(t).toString(16)),m(x(i).toString(16))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function l(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function c(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function h(e,t){p(e)&&(e="100%");var i=f(e);return e=k(t,C(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),w.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function u(e){return k(1,C(0,e))}function d(e){return parseInt(e,16)}function p(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function f(e){return"string"==typeof e&&-1!=e.indexOf("%")}function m(e){return 1==e.length?"0"+e:""+e}function g(e){return 1>=e&&(e=100*e+"%"),e}function v(e){e=e.replace(b,"").replace(_,"").toLowerCase();var t=!1;if(E[e])e=E[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=D.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=D.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=D.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=D.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=D.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=D.hex6.exec(e))?{r:d(i[1]),g:d(i[2]),b:d(i[3]),format:t?"name":"hex"}:(i=D.hex3.exec(e))?{r:d(i[1]+""+i[1]),g:d(i[2]+""+i[2]),b:d(i[3]+""+i[3]),format:t?"name":"hex"}:!1}var b=/^[\s,#]+/,_=/\s+$/,y=0,w=Math,x=w.round,k=w.min,C=w.max,S=w.random;e.fromRatio=function(t,i){if("object"==typeof t){var n={};for(var s in t)t.hasOwnProperty(s)&&(n[s]="a"===s?t[s]:g(t[s]));t=n}return e(t,i)},e.equals=function(t,i){return t&&i?e(t).toRgbString()==e(i).toRgbString():!1},e.random=function(){return e.fromRatio({r:S(),g:S(),b:S()})},e.desaturate=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.s-=i/100,n.s=u(n.s),e(n)},e.saturate=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.s+=i/100,n.s=u(n.s),e(n)},e.greyscale=function(t){return e.desaturate(t,100)},e.lighten=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.l+=i/100,n.l=u(n.l),e(n)},e.darken=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.l-=i/100,n.l=u(n.l),e(n)},e.complement=function(t){var i=e(t).toHsl();return i.h=(i.h+180)%360,e(i)},e.triad=function(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+120)%360,s:i.s,l:i.l}),e({h:(n+240)%360,s:i.s,l:i.l})]},e.tetrad=function(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+90)%360,s:i.s,l:i.l}),e({h:(n+180)%360,s:i.s,l:i.l}),e({h:(n+270)%360,s:i.s,l:i.l})]},e.splitcomplement=function(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+72)%360,s:i.s,l:i.l}),e({h:(n+216)%360,s:i.s,l:i.l})]},e.analogous=function(t,i,n){i=i||6,n=n||30;var s=e(t).toHsl(),o=360/n,r=[e(t)];for(s.h=(s.h-(o*i>>1)+720)%360;--i;)s.h=(s.h+o)%360,r.push(e(s));return r},e.monochromatic=function(t,i){i=i||6;for(var n=e(t).toHsv(),s=n.h,o=n.s,r=n.v,a=[],l=1/i;i--;)a.push(e({h:s,s:o,v:r})),r=(r+l)%1;return a},e.readability=function(t,i){var n=e(t).toRgb(),s=e(i).toRgb(),o=(299*n.r+587*n.g+114*n.b)/1e3,r=(299*s.r+587*s.g+114*s.b)/1e3,a=Math.max(n.r,s.r)-Math.min(n.r,s.r)+Math.max(n.g,s.g)-Math.min(n.g,s.g)+Math.max(n.b,s.b)-Math.min(n.b,s.b);return{brightness:Math.abs(o-r),color:a}},e.readable=function(t,i){var n=e.readability(t,i);return n.brightness>125&&n.color>500},e.mostReadable=function(t,i){for(var n=null,s=0,o=!1,r=0;r<i.length;r++){var a=e.readability(t,i[r]),l=a.brightness>125&&a.color>500,c=3*(a.brightness/125)+a.color/500;(l&&!o||l&&o&&c>s||!l&&!o&&c>s)&&(o=l,s=c,n=e(i[r]))}return n};var E=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=e.hexNames=l(E),D=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",s="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.Tinycolor=e}(),define("vendor/tinycolor-0.9.16",function(){}),function(e){e.namespace("CreatePage.ReservedSeating"),e.CreatePage.ReservedSeating.TicketColorController={colorStopsSmall:["#ffbc32","#ff33aa","#998ae6","#33bbff"],colorStopsMedium:["#ffbc32","#ff8000","#ff4d4d","#ff33aa","#cc52cc","#998ae6","#668cff","#33bbff"],colorStopsLarge:["#ffbc32","#ffa013","#ff8000","#ff6633","#ff4d4d","#ff3377","#ff33aa","#e645bd","#cc52cc","#998ae6","#8a91e6","#99aaff","#668cff","#4da6ff","#33bbff"],initialize:function(){},lerp:function(e,t,i){return e+(t-e)*i},getColor:function(e,t){var i=e/t;if(t<=this.colorStopsSmall.length)return this.colorStopsSmall[e];if(t<=this.colorStopsMedium.length)return this.colorStopsMedium[Math.floor(this.lerp(0,this.colorStopsMedium.length+1,i))];if(t<=this.colorStopsLarge.length)return this.colorStopsLarge[Math.floor(this.lerp(0,this.colorStopsLarge.length+1,i))];var n,s=200,o=160,r=70,a=0,l=80,c=100,h=90,u=100,d=.62,p=e/(t-1),f=this.lerp(s,0,p)-o,m=this.lerp(l,r,p),g=this.lerp(u,c,p);if(e/t>d){var v=t*d,b=(e-(t-v))/(v-1);f-=5,m=this.lerp(a,l,b),g=this.lerp(h,u,b)}return 0>f&&(f=360+f),n={h:f,s:m,v:g},new window.Tinycolor(n).toHexString()}}}(window.EB,window.EB.App,window.jQuery,window.Tinycolor),define("eb/create/reserved_seating/ticket_color_controller",["require","vendor/tinycolor-0.9.16"],function(e){return e("vendor/tinycolor-0.9.16"),EB.CreatePage.ReservedSeating.TicketColorController}),define("hb!eb/components/seatmap/seatmap-dialog.handlebars",["handlebars.runtime"],function(e){return e["default"].template(function(e,t,i,n,s){function o(e,t){var n,s="";return s+='\n                    <p class="text-body-medium js-ticket-type seatmap-dialog__ticket-type">\n                        <i class="ico-circle ico--medium ico--bullet"\n                           style="background-color: ',(n=i.color)?n=n.call(e,{hash:{},data:t}):(n=e&&e.color,n=typeof n===l?n.call(e,{hash:{},data:t}):n),s+=c(n)+';">&nbsp;</i>\n                        ',(n=i.name)?n=n.call(e,{hash:{},data:t}):(n=e&&e.name,n=typeof n===l?n.call(e,{hash:{},data:t}):n),s+=c(n)+"\n                    </p>\n                "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var r,a="",l="function",c=this.escapeExpression,h=this;return a+='\n<div class="g-grid styleguide-grid-coloring">\n    <div class="g-group">\n        <div class="g-cell g-cell-4-12">\n            <div class="js-ticket-types seatmap-dialog__ticket-types pod pod--card l-padded-v-2 l-padded-h-2">\n                ',r=i.each.call(t,t&&t.tickets,{hash:{},inverse:h.noop,fn:h.program(1,o,s),data:s}),(r||0===r)&&(a+=r),a+='\n            </div>\n        </div>\n        <div class="g-cell g-cell-8-12">\n            <div class="js-seatmap-svg seatmap-dialog__map pod"></div>\n        </div>\n    </div>\n</div>\n\n\n'})}),function(e,t){e.Spinner=t()}(this,function(){function e(e,t){var i,n=document.createElement(e||"div");for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){var s=["opacity",t,~~(100*e),i,n].join("-"),o=.01+i/n*100,r=Math.max(1-(1-e)/t*(100-o),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return u[s]||(d.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+r+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+r+"}}",d.cssRules.length),u[s]=1),s}function n(e,t){var i,n,s=e.style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<h.length;n++)if(i=h[n]+t,void 0!==s[i])return i}function s(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function o(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function r(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function a(e){return"undefined"==typeof this?new a(e):void(this.opts=o(e||{},a.defaults,p))}function l(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}d.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,n){function o(){return s(i("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function r(e,r,a){t(u,t(s(o(),{rotation:360/n.lines*e+"deg",left:~~r}),t(s(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),i("fill",{color:n.color,opacity:n.opacity}),i("stroke",{opacity:0}))))}var a,l=n.length+n.width,c=2*l,h=2*-(n.width+n.length)+"px",u=s(o(),{position:"absolute",top:h,left:h});if(n.shadow)for(a=1;a<=n.lines;a++)r(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=n.lines;a++)r(a);return t(e,u)},a.prototype.opacity=function(e,t,i,n){var s=e.firstChild;n=n.shadow&&n.lines||0,s&&t+n<s.childNodes.length&&(s=s.childNodes[t+n],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=i))}}var c,h=["webkit","Moz","ms","O"],u={},d=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},o(a.prototype,{spin:function(t){this.stop();var i,n,o=this,a=o.opts,l=o.el=s(e(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),h=a.radius+a.length+a.width;if(t&&(t.insertBefore(l,t.firstChild||null),n=r(t),i=r(l),s(l,{left:("auto"==a.left?n.x-i.x+(t.offsetWidth>>1):parseInt(a.left,10)+h)+"px",top:("auto"==a.top?n.y-i.y+(t.offsetHeight>>1):parseInt(a.top,10)+h)+"px"})),l.setAttribute("role","progressbar"),o.lines(l,o.opts),!c){var u,d=0,p=(a.lines-1)*(1-a.direction)/2,f=a.fps,m=f/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function b(){d++;for(var e=0;e<a.lines;e++)u=Math.max(1-(d+(a.lines-e)*v)%m*g,a.opacity),o.opacity(l,e*a.direction+p,u,a);o.timeout=o.el&&setTimeout(b,~~(1e3/f))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(n,o){function r(t,i){return s(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var a,l=0,h=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)a=s(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&i(o.opacity,o.trail,h+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(a,s(r("#000","0 0 4px #000"),{top:"2px"})),t(n,t(a,r(o.color,"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}});var f=s(e("group"),{behavior:"url(#default#VML)"});return!n(f,"transform")&&f.adj?l():c=n(f,"animation"),a}),define("vendor/spin-1.3",function(){}),function(){var e={lines:12,length:2,width:2,radius:4,corners:1,rotate:0,direction:1,color:"#ffffff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner--small",zIndex:1,top:"auto",left:"auto"},t=_.extend({},e,{length:3,width:3,radius:7,className:"spinner--medium"}),i=_.extend({},e,{length:5,width:4,radius:9,className:"spinner--large"});EB.namespace("SpinSettings"),EB.SpinSettings={small:e,medium:t,large:i}}(),define("vendor/spin-1.3_settings",function(){}),define("eb/components/seatmap/dialog-view",["require","eb/backbone/mixins","./camera/app","eb/create/reserved_seating/ticket_color_controller","hb!./seatmap-dialog.handlebars","vendor/spin-1.3","vendor/spin-1.3_settings"],function(e){var t=jQuery,i=e("eb/backbone/mixins"),n=e("./camera/app"),s=e("eb/create/reserved_seating/ticket_color_controller"),o=e("hb!./seatmap-dialog.handlebars");return e("vendor/spin-1.3"),e("vendor/spin-1.3_settings"),EB.Backbone.View.extend({spinner:new Spinner(_.extend({},EB.SpinSettings.large,{color:"#000000"})),initialize:function(){_.bindAll(this,"loadSVG","show"),this.initializeTicketData()},initializeTicketData:function(){var e=t(".js-ticket-type"),i=[];e.each(function(n,o){i.push({id:t(o).find(".js-ticket-type-id").text(),name:t(o).find(".js-ticket-type-name").text(),color:s.getColor(n,e.length)})}),this.ticketsData=i},getContextData:function(){return{tickets:this.ticketsData}},loadSVG:function(){var e=t(".js-seatmap-dialog");e.find("svg").length>0||(e.find(".js-ticket-types").parent().css("height",e.height()),e.find(".js-seatmap-svg").css({height:e.height()}),e.children().css("visibility","hidden"),this.spinner.spin(e[0]),t.ajax({url:this.model.get("image_base_url")+".js",dataType:"jsonp",jsonp:!1,jsonpCallback:"data",success:function(e){var i=t(".js-seatmap-svg");this.highlightSelection(i.html(e)),this.assignUnitColors(),i.find("svg").find("*").css("cursor","default"),n.setupCamera(i.children().get(0)),this.spinner.stop(),t(".js-seatmap-dialog").children().css("visibility","visible")}.bind(this)}))},assignUnitColors:function(){_.each(this.ticketsData,function(e){t(".unit_primary_"+e.id).css("fill",e.color),t(".unit_secondary_"+e.id).css("stroke","#fff"),t(".unit_label_"+e.id).css("fill","#fff")})},highlightSelection:function(e){t(".js-seat-selection").each(function(){var i=t(this).text().trim().replace(":","_"),n="#unit_"+i,s="#unit_label_"+i;e.find(n).css("fill","#00a2a5"),e.find(s).css("fill","#ffffff")})},show:function(e){this.$el.dialog({modal:!0,title:e,dialogClass:"eb_dialog_outer",width:800,height:535,open:this.loadSVG})}}).mixin(i.withTemplate,{template:o})}),define("hb!eb/components/seatmap/seatmap.handlebars",["handlebars.runtime"],function(e){return e["default"].template(function(e,t,i,n,s){function o(e,t){var n,s="";return s+='\n    <a class="js-view-seatmap" href="#">\n        <img src="',(n=i.image_base_url)?n=n.call(e,{hash:{},data:t}):(n=e&&e.image_base_url,n=typeof n===p?n.call(e,{hash:{},data:t}):n),s+=d(n)+'.png">\n\n        <p class="l-block-3">\n        ',n=i["if"].call(e,e&&e.showViewSelectionCaption,{hash:{},inverse:f.program(4,a,t),fn:f.program(2,r,t),data:t}),(n||0===n)&&(s+=n),s+='\n        </p>\n    </a>\n    <div class="js-seatmap-dialog hide_me"></div>\n'}function r(e,t){var n,s,o="";return o+="\n            ",s={hash:{},data:t},o+=d((n=i._||e&&e._,n?n.call(e,"View selection",s):u.call(e,"_","View selection",s)))+"\n        "}function a(e,t){var n,s,o="";return o+="\n            ",s={hash:{},data:t},o+=d((n=i._||e&&e._,n?n.call(e,"View seat map",s):u.call(e,"_","View seat map",s)))+"\n        "}function l(e,t){var n,s,o="";return o+='\n    <div class="js-loading seatmap__loading">\n        <p>',s={hash:{},data:t},o+=d((n=i._||e&&e._,n?n.call(e,"Loading seat map...",s):u.call(e,"_","Loading seat map...",s)))+"</p>\n    </div>\n"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),s=s||{};var c,h="",u=i.helperMissing,d=this.escapeExpression,p="function",f=this;return c=i["if"].call(t,t&&t.imageIsReady,{hash:{},inverse:f.program(6,l,s),fn:f.program(1,o,s),data:s}),(c||0===c)&&(h+=c),h+="\n"})}),define("eb/components/seatmap/view",["require","eb/backbone/mixins","eb/components/seatmap/model","eb/components/seatmap/dialog-view","hb!./seatmap.handlebars","vendor/spin-1.3","vendor/spin-1.3_settings"],function(e){var t=jQuery,i=e("eb/backbone/mixins"),n=e("eb/components/seatmap/model"),s=e("eb/components/seatmap/dialog-view"),o=e("hb!./seatmap.handlebars");return e("vendor/spin-1.3"),e("vendor/spin-1.3_settings"),EB.Backbone.View.extend({tagName:"div",className:"js-seatmap",events:{"click .js-view-seatmap":"viewSeatmap"},imageIsReady:!1,initialize:function(){var e=this.options.bigEventID;this.model=new n({bigEventID:e}),_.bindAll(this,"fetchModel"),_.bindAll(this,"viewSeatmap"),this.fetchModel(function(){this.imageIsReady=!0,this.render()}.bind(this)),this.spinner=new window.Spinner(_.extend({},EB.SpinSettings.large,{color:"#000000"}))},getContextData:function(){var e=this.model.toJSON();return e.showViewSelectionCaption=this.options.showViewSelectionCaption,e.imageIsReady=this.imageIsReady,e},render:function(){this.imageIsReady||this.$el.find(".js-loading").prepend(this.spinner.spin().el)},fetchModel:function(e){this.model.fetch({success:function(){this.model.get("image_base_url")&&"None"!==this.model.get("image_base_url")?e():setTimeout(function(){this.fetchModel(e)}.bind(this),1e4)}.bind(this)})},viewSeatmap:function(e){e.preventDefault(),this.dialog||(this.dialog=new s({el:".js-seatmap-dialog",model:this.model}),this.dialog.render());var i=t(".js-seatmap-dialog-title").text().trim();this.dialog.show(i)}}).mixin(i.withTemplate,{template:o})}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("dorsal",[],t):e.Dorsal=t()}(this,function(){function e(e,t){var i=e.length,n=0;if(e.indexOf)return e.indexOf(t);for(;i>n;n++)if(e[n]===t)return n;return-1}var t=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),i=function(){};i.prototype.VERSION="0.4.0",i.prototype.CSS_PREFIX=".js-d-",i.prototype.DATA_IGNORE_PREFIX="xd",i.prototype.DATA_PREFIX="d",i.prototype.DATA_DORSAL_WIRED="data-"+i.prototype.DATA_IGNORE_PREFIX+"-wired",i.prototype.GUID_KEY="dorsal-guid",i.prototype.ELEMENT_TO_PLUGINS_MAP={},i.prototype.registerPlugin=function(e,t){this.plugins||(this.plugins={}),this.plugins[e]=t},i.prototype.unregisterPlugin=function(e){delete this.plugins[e]},i.prototype._getDatasetAttributes=function(e){var t=e.dataset,i={};for(var n in t)if(new RegExp("^"+this.DATA_PREFIX+"[A-Z]").test(n)){var s=n.substr(this.DATA_PREFIX.length),o=s[0].toLowerCase()+s.substr(1);i[o]=t[n]}return i},i.prototype._normalizeDataAttribute=function(e){return e.toUpperCase().replace("-","")},i.prototype._getDataAttributes=function(e){var t={},i=e.attributes,n=i.length,s="name",o=0;for(o=0;n>o;o++)if(new RegExp("^data-"+this.DATA_PREFIX+"-").test(i[o][s])){var r=i[o][s].substr(5+this.DATA_PREFIX.length+1).toLowerCase().replace(/(\-[a-zA-Z])/g,this._normalizeDataAttribute);t[r]=i[o].value}return t},i.prototype._getAttributes=function(e){return e.dataset?this._getDatasetAttributes(e):this._getDataAttributes(e)},i.prototype._runPlugin=function(e,i){if(e.getAttribute(this.DATA_DORSAL_WIRED)&&-1!==e.getAttribute(this.DATA_DORSAL_WIRED).indexOf(i))return!1;var n=this._getAttributes(e),s=e.getAttribute(this.DATA_DORSAL_WIRED),o=this.plugins[i],r={el:e,data:n},a=e.getAttribute(this.GUID_KEY);a||(a=t(),e.setAttribute(this.GUID_KEY,a),this.ELEMENT_TO_PLUGINS_MAP[a]={}),"function"==typeof o?this.ELEMENT_TO_PLUGINS_MAP[a][i]=o.call(e,r):"object"==typeof o&&(this.ELEMENT_TO_PLUGINS_MAP[a][i]=o.create.call(e,r)),s?e.setAttribute(this.DATA_DORSAL_WIRED,s+" "+i):e.setAttribute(this.DATA_DORSAL_WIRED,i)},i.prototype._wireElement=function(e,t,i){var n=this;window.setTimeout(function(){var s,o=n.CSS_PREFIX+t,r=e.querySelectorAll(o);e!==document&&e.className.indexOf(o.substr(1))>-1&&(s=n._runPlugin(e,t),i.notify(t,s,n));for(var a,l=0;a=r[l];l++)s=n._runPlugin(a,t),i.notify(t,s,n)},0)},i.prototype._detachPlugin=function(t,n){var s,o=!1;return"string"!=typeof t.getAttribute(this.DATA_DORSAL_WIRED)?!1:(t.getAttribute(this.DATA_DORSAL_WIRED).indexOf(n)>-1&&this.plugins[n].destroy&&(this.plugins[n].destroy({el:t,data:this._getAttributes(t),instance:this.ELEMENT_TO_PLUGINS_MAP[t.getAttribute(i.prototype.GUID_KEY)][n]}),o=!0),s=t.getAttribute(this.DATA_DORSAL_WIRED).split(" "),s.splice(e(s,n),1),t.setAttribute(this.DATA_DORSAL_WIRED,s.join(" ")),o)},i.prototype.unwire=function(e,t){if(t)return this._detachPlugin(e,t);for(var i,n=e.getAttribute(this.DATA_DORSAL_WIRED).split(" "),s=n.length,o=!1,r=0;s>r;r++)i=n[r],this._detachPlugin(e,i)&&(o=!0);return o},i.prototype.wire=function(e,t){var i=new DorsalDeferred(this),n=Object.keys(this.plugins),s=void 0!==t?1:n.length,o=0;if(i.promise().progress(function(){o++,o===s&&i.resolve()}),!this.plugins)throw new Error("No plugins registered with Dorsal");if(t)return this._wireElement(e,[t],i),i.promise();for(var r=0,a=n.length,e=e||document;a>r;r++)this._wireElement(e,n[r],i);return i.promise()},i.prototype.rewire=function(e,t){return this.unwire(e,t),this.wire(e,t)};var n=new i;return n.create=function(){return new i},DorsalDeferred=function(e){var t,i="pending",n=[],s=[],o=[],r=this;return t={state:function(){return r.state()},done:function(t){return"resolved"===i&&t.call(r,e),n.push(t),r},fail:function(t){return"rejected"===i&&t.call(r,e),s.push(t),r},progress:function(e){return o.push(e),r}},r.state=function(){return i},r.notify=function(){var e,t=o.length;for(e=0;t>e;e++)o[e].apply(r,arguments)},r.reject=function(){var t,n=s.length;for(i="rejected",t=0;n>t;t++)s[t].call(r,e)},r.resolve=function(){var t,s=n.length;for(i="resolved",t=0;s>t;t++)n[t].call(r,e)},r.promise=function(){return t},r},n});var CLOSE_EVENT="Close",BEFORE_CLOSE_EVENT="BeforeClose",AFTER_CLOSE_EVENT="AfterClose",BEFORE_APPEND_EVENT="BeforeAppend",MARKUP_PARSE_EVENT="MarkupParse",OPEN_EVENT="Open",CHANGE_EVENT="Change",NS="mfp",EVENT_NS="."+NS,READY_CLASS="mfp-ready",REMOVING_CLASS="mfp-removing",PREVENT_CLOSE_CLASS="mfp-prevent-close",mfp,MagnificPopup=function(){},_isJQ=!!window.jQuery,_prevStatus,_window=$(window),_body,_document,_prevContentType,_wrapClasses,_currPopupType,_mfpOn=function(e,t){mfp.ev.on(NS+e+EVENT_NS,t)},_getEl=function(e,t,i,n){var s=document.createElement("div");return s.className="mfp-"+e,i&&(s.innerHTML=i),n?t&&t.appendChild(s):(s=$(s),t&&s.appendTo(t)),s},_mfpTrigger=function(e,t){mfp.ev.triggerHandler(NS+e,t),mfp.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),mfp.st.callbacks[e]&&mfp.st.callbacks[e].apply(mfp,$.isArray(t)?t:[t]))},_getCloseBtn=function(e){return e===_currPopupType&&mfp.currTemplate.closeBtn||(mfp.currTemplate.closeBtn=$(mfp.st.closeMarkup.replace("%title%",mfp.st.tClose)),_currPopupType=e),mfp.currTemplate.closeBtn},_checkInstance=function(){$.magnificPopup.instance||(mfp=new MagnificPopup,mfp.init(),$.magnificPopup.instance=mfp)},supportsTransitions=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};MagnificPopup.prototype={constructor:MagnificPopup,init:function(){var e=navigator.appVersion;mfp.isIE7=-1!==e.indexOf("MSIE 7."),mfp.isIE8=-1!==e.indexOf("MSIE 8."),mfp.isLowIE=mfp.isIE7||mfp.isIE8,mfp.isAndroid=/android/gi.test(e),mfp.isIOS=/iphone|ipad|ipod/gi.test(e),mfp.supportsTransition=supportsTransitions(),mfp.probablyMobile=mfp.isAndroid||mfp.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),_document=$(document),mfp.popupsCache={}},open:function(e){_body||(_body=$(document.body));var t;if(e.isObj===!1){mfp.items=e.items.toArray(),mfp.index=0;var i,n=e.items;for(t=0;t<n.length;t++)if(i=n[t],i.parsed&&(i=i.el[0]),i===e.el[0]){mfp.index=t;break}}else mfp.items=$.isArray(e.items)?e.items:[e.items],mfp.index=e.index||0;if(mfp.isOpen)return void mfp.updateItemHTML();mfp.types=[],_wrapClasses="",mfp.ev=e.mainEl&&e.mainEl.length?e.mainEl.eq(0):_document,e.key?(mfp.popupsCache[e.key]||(mfp.popupsCache[e.key]={}),mfp.currTemplate=mfp.popupsCache[e.key]):mfp.currTemplate={},mfp.st=$.extend(!0,{},$.magnificPopup.defaults,e),mfp.fixedContentPos="auto"===mfp.st.fixedContentPos?!mfp.probablyMobile:mfp.st.fixedContentPos,mfp.st.modal&&(mfp.st.closeOnContentClick=!1,mfp.st.closeOnBgClick=!1,mfp.st.showCloseBtn=!1,mfp.st.enableEscapeKey=!1),mfp.bgOverlay||(mfp.bgOverlay=_getEl("bg").on("click"+EVENT_NS,function(){mfp.close()}),mfp.wrap=_getEl("wrap").attr("tabindex",-1).on("click"+EVENT_NS,function(e){mfp._checkIfClose(e.target)&&mfp.close()}),mfp.container=_getEl("container",mfp.wrap)),mfp.contentContainer=_getEl("content"),mfp.st.preloader&&(mfp.preloader=_getEl("preloader",mfp.container,mfp.st.tLoading));var s=$.magnificPopup.modules;for(t=0;t<s.length;t++){var o=s[t];o=o.charAt(0).toUpperCase()+o.slice(1),mfp["init"+o].call(mfp)}_mfpTrigger("BeforeOpen"),mfp.st.showCloseBtn&&(mfp.st.closeBtnInside?(_mfpOn(MARKUP_PARSE_EVENT,function(e,t,i,n){i.close_replaceWith=_getCloseBtn(n.type)}),_wrapClasses+=" mfp-close-btn-in"):mfp.wrap.append(_getCloseBtn())),mfp.st.alignTop&&(_wrapClasses+=" mfp-align-top"),mfp.wrap.css(mfp.fixedContentPos?{overflow:mfp.st.overflowY,overflowX:"hidden",overflowY:mfp.st.overflowY}:{top:_window.scrollTop(),position:"absolute"}),(mfp.st.fixedBgPos===!1||"auto"===mfp.st.fixedBgPos&&!mfp.fixedContentPos)&&mfp.bgOverlay.css({height:_document.height(),position:"absolute"}),mfp.st.enableEscapeKey&&_document.on("keyup"+EVENT_NS,function(e){27===e.keyCode&&mfp.close()}),_window.on("resize"+EVENT_NS,function(){mfp.updateSize()}),mfp.st.closeOnContentClick||(_wrapClasses+=" mfp-auto-cursor"),_wrapClasses&&mfp.wrap.addClass(_wrapClasses);var r=mfp.wH=_window.height(),a={};if(mfp.fixedContentPos&&mfp._hasScrollBar(r)){var l=mfp._getScrollbarSize();l&&(a.marginRight=l)}mfp.fixedContentPos&&(mfp.isIE7?$("body, html").css("overflow","hidden"):a.overflow="hidden");var c=mfp.st.mainClass;return mfp.isIE7&&(c+=" mfp-ie7"),c&&mfp._addClassToMFP(c),mfp.updateItemHTML(),_mfpTrigger("BuildControls"),$("html").css(a),mfp.bgOverlay.add(mfp.wrap).prependTo(mfp.st.prependTo||_body),mfp._lastFocusedEl=document.activeElement,setTimeout(function(){mfp.content?(mfp._addClassToMFP(READY_CLASS),mfp._setFocus()):mfp.bgOverlay.addClass(READY_CLASS),_document.on("focusin"+EVENT_NS,mfp._onFocusIn)},16),mfp.isOpen=!0,mfp.updateSize(r),_mfpTrigger(OPEN_EVENT),e},close:function(){mfp.isOpen&&(_mfpTrigger(BEFORE_CLOSE_EVENT),mfp.isOpen=!1,mfp.st.removalDelay&&!mfp.isLowIE&&mfp.supportsTransition?(mfp._addClassToMFP(REMOVING_CLASS),setTimeout(function(){mfp._close()},mfp.st.removalDelay)):mfp._close())},_close:function(){_mfpTrigger(CLOSE_EVENT);var e=REMOVING_CLASS+" "+READY_CLASS+" ";if(mfp.bgOverlay.detach(),mfp.wrap.detach(),mfp.container.empty(),mfp.st.mainClass&&(e+=mfp.st.mainClass+" "),mfp._removeClassFromMFP(e),mfp.fixedContentPos){var t={marginRight:""};mfp.isIE7?$("body, html").css("overflow",""):t.overflow="",$("html").css(t)}_document.off("keyup"+EVENT_NS+" focusin"+EVENT_NS),mfp.ev.off(EVENT_NS),mfp.wrap.attr("class","mfp-wrap").removeAttr("style"),mfp.bgOverlay.attr("class","mfp-bg"),mfp.container.attr("class","mfp-container"),!mfp.st.showCloseBtn||mfp.st.closeBtnInside&&mfp.currTemplate[mfp.currItem.type]!==!0||mfp.currTemplate.closeBtn&&mfp.currTemplate.closeBtn.detach(),mfp._lastFocusedEl&&$(mfp._lastFocusedEl).focus(),mfp.currItem=null,mfp.content=null,mfp.currTemplate=null,mfp.prevHeight=0,_mfpTrigger(AFTER_CLOSE_EVENT)
},updateSize:function(e){if(mfp.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*t;mfp.wrap.css("height",i),mfp.wH=i}else mfp.wH=e||_window.height();mfp.fixedContentPos||mfp.wrap.css("height",mfp.wH),_mfpTrigger("Resize")},updateItemHTML:function(){var e=mfp.items[mfp.index];mfp.contentContainer.detach(),mfp.content&&mfp.content.detach(),e.parsed||(e=mfp.parseEl(mfp.index));var t=e.type;if(_mfpTrigger("BeforeChange",[mfp.currItem?mfp.currItem.type:"",t]),mfp.currItem=e,!mfp.currTemplate[t]){var i=mfp.st[t]?mfp.st[t].markup:!1;_mfpTrigger("FirstMarkupParse",i),mfp.currTemplate[t]=i?$(i):!0}_prevContentType&&_prevContentType!==e.type&&mfp.container.removeClass("mfp-"+_prevContentType+"-holder");var n=mfp["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,mfp.currTemplate[t]);mfp.appendContent(n,t),e.preloaded=!0,_mfpTrigger(CHANGE_EVENT,e),_prevContentType=e.type,mfp.container.prepend(mfp.contentContainer),_mfpTrigger("AfterChange")},appendContent:function(e,t){mfp.content=e,e?mfp.st.showCloseBtn&&mfp.st.closeBtnInside&&mfp.currTemplate[t]===!0?mfp.content.find(".mfp-close").length||mfp.content.append(_getCloseBtn()):mfp.content=e:mfp.content="",_mfpTrigger(BEFORE_APPEND_EVENT),mfp.container.addClass("mfp-"+t+"-holder"),mfp.contentContainer.append(mfp.content)},parseEl:function(e){var t,i=mfp.items[e];if(i.tagName?i={el:$(i)}:(t=i.type,i={data:i,src:i.src}),i.el){for(var n=mfp.types,s=0;s<n.length;s++)if(i.el.hasClass("mfp-"+n[s])){t=n[s];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=t||mfp.st.type||"inline",i.index=e,i.parsed=!0,mfp.items[e]=i,_mfpTrigger("ElementParse",i),mfp.items[e]},addGroup:function(e,t){var i=function(i){i.mfpEl=this,mfp._openClick(i,e,t)};t||(t={});var n="click.magnificPopup";t.mainEl=e,t.items?(t.isObj=!0,e.off(n).on(n,i)):(t.isObj=!1,t.delegate?e.off(n).on(n,t.delegate,i):(t.items=e,e.off(n).on(n,i)))},_openClick:function(e,t,i){var n=void 0!==i.midClick?i.midClick:$.magnificPopup.defaults.midClick;if(n||2!==e.which&&!e.ctrlKey&&!e.metaKey){var s=void 0!==i.disableOn?i.disableOn:$.magnificPopup.defaults.disableOn;if(s)if($.isFunction(s)){if(!s.call(mfp))return!0}else if(_window.width()<s)return!0;e.type&&(e.preventDefault(),mfp.isOpen&&e.stopPropagation()),i.el=$(e.mfpEl),i.delegate&&(i.items=t.find(i.delegate)),mfp.open(i)}},updateStatus:function(e,t){if(mfp.preloader){_prevStatus!==e&&mfp.container.removeClass("mfp-s-"+_prevStatus),t||"loading"!==e||(t=mfp.st.tLoading);var i={status:e,text:t};_mfpTrigger("UpdateStatus",i),e=i.status,t=i.text,mfp.preloader.html(t),mfp.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),mfp.container.addClass("mfp-s-"+e),_prevStatus=e}},_checkIfClose:function(e){if(!$(e).hasClass(PREVENT_CLOSE_CLASS)){var t=mfp.st.closeOnContentClick,i=mfp.st.closeOnBgClick;if(t&&i)return!0;if(!mfp.content||$(e).hasClass("mfp-close")||mfp.preloader&&e===mfp.preloader[0])return!0;if(e===mfp.content[0]||$.contains(mfp.content[0],e)){if(t)return!0}else if(i&&$.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){mfp.bgOverlay.addClass(e),mfp.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),mfp.wrap.removeClass(e)},_hasScrollBar:function(e){return(mfp.isIE7?_document.height():document.body.scrollHeight)>(e||_window.height())},_setFocus:function(){(mfp.st.focus?mfp.content.find(mfp.st.focus).eq(0):mfp.wrap).focus()},_onFocusIn:function(e){return e.target===mfp.wrap[0]||$.contains(mfp.wrap[0],e.target)?void 0:(mfp._setFocus(),!1)},_parseMarkup:function(e,t,i){var n;i.data&&(t=$.extend(i.data,t)),_mfpTrigger(MARKUP_PARSE_EVENT,[e,t,i]),$.each(t,function(t,i){if(void 0===i||i===!1)return!0;if(n=t.split("_"),n.length>1){var s=e.find(EVENT_NS+"-"+n[0]);if(s.length>0){var o=n[1];"replaceWith"===o?s[0]!==i[0]&&s.replaceWith(i):"img"===o?s.is("img")?s.attr("src",i):s.replaceWith('<img src="'+i+'" class="'+s.attr("class")+'" />'):s.attr(n[1],i)}}else e.find(EVENT_NS+"-"+t).html(i)})},_getScrollbarSize:function(){if(void 0===mfp.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),mfp.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return mfp.scrollbarSize}},$.magnificPopup={instance:null,proto:MagnificPopup.prototype,modules:[],open:function(e,t){return _checkInstance(),e=e?$.extend(!0,{},e):{},e.isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return $.magnificPopup.instance&&$.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&($.magnificPopup.defaults[e]=t.options),$.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},$.fn.magnificPopup=function(e){_checkInstance();var t=$(this);if("string"==typeof e)if("open"===e){var i,n=_isJQ?t.data("magnificPopup"):t[0].magnificPopup,s=parseInt(arguments[1],10)||0;n.items?i=n.items[s]:(i=t,n.delegate&&(i=i.find(n.delegate)),i=i.eq(s)),mfp._openClick({mfpEl:i},t,n)}else mfp.isOpen&&mfp[e].apply(mfp,Array.prototype.slice.call(arguments,1));else e=$.extend(!0,{},e),_isJQ?t.data("magnificPopup",e):t[0].magnificPopup=e,mfp.addGroup(t,e);return t},define("magnific-popup",["jquery"],function(){});var INLINE_NS="inline",_hiddenClass,_inlinePlaceholder,_lastInlineElement,_putInlineElementsBack=function(){_lastInlineElement&&(_inlinePlaceholder.after(_lastInlineElement.addClass(_hiddenClass)).detach(),_lastInlineElement=null)};$.magnificPopup.registerModule(INLINE_NS,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){mfp.types.push(INLINE_NS),_mfpOn(CLOSE_EVENT+"."+INLINE_NS,function(){_putInlineElementsBack()})},getInline:function(e,t){if(_putInlineElementsBack(),e.src){var i=mfp.st.inline,n=$(e.src);if(n.length){var s=n[0].parentNode;s&&s.tagName&&(_inlinePlaceholder||(_hiddenClass=i.hiddenClass,_inlinePlaceholder=_getEl(_hiddenClass),_hiddenClass="mfp-"+_hiddenClass),_lastInlineElement=n.after(_inlinePlaceholder).detach().removeClass(_hiddenClass)),mfp.updateStatus("ready")}else mfp.updateStatus("error",i.tNotFound),n=$("<div>");return e.inlineElement=n,n}return mfp.updateStatus("ready"),mfp._parseMarkup(t,{},e),t}}}),define("magnific-popup-inline",["magnific-popup"],function(){});var _imgInterval,_getTitle=function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=mfp.st.image.titleSrc;if(t){if($.isFunction(t))return t.call(mfp,e);if(e.el)return e.el.attr(t)||""}return""};$.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=mfp.st.image,t=".image";mfp.types.push("image"),_mfpOn(OPEN_EVENT+t,function(){"image"===mfp.currItem.type&&e.cursor&&_body.addClass(e.cursor)}),_mfpOn(CLOSE_EVENT+t,function(){e.cursor&&_body.removeClass(e.cursor),_window.off("resize"+EVENT_NS)}),_mfpOn("Resize"+t,mfp.resizeImage),mfp.isLowIE&&_mfpOn("AfterChange",mfp.resizeImage)},resizeImage:function(){var e=mfp.currItem;if(e&&e.img&&mfp.st.image.verticalFit){var t=0;mfp.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",mfp.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,_imgInterval&&clearInterval(_imgInterval),e.isCheckingImgSize=!1,_mfpTrigger("ImageHasSize",e),e.imgHidden&&(mfp.content&&mfp.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var t=0,i=e.img[0],n=function(s){_imgInterval&&clearInterval(_imgInterval),_imgInterval=setInterval(function(){return i.naturalWidth>0?void mfp._onImageHasSize(e):(t>200&&clearInterval(_imgInterval),t++,void(3===t?n(10):40===t?n(50):100===t&&n(500)))},s)};n(1)},getImage:function(e,t){var i=0,n=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===mfp.currItem&&(mfp._onImageHasSize(e),mfp.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,_mfpTrigger("ImageLoadComplete")):(i++,200>i?setTimeout(n,100):s()))},s=function(){e&&(e.img.off(".mfploader"),e===mfp.currItem&&(mfp._onImageHasSize(e),mfp.updateStatus("error",o.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},o=mfp.st.image,r=t.find(".mfp-img");if(r.length){var a=document.createElement("img");a.className="mfp-img",e.img=$(a).on("load.mfploader",n).on("error.mfploader",s),a.src=e.src,r.is("img")&&(e.img=e.img.clone()),a=e.img[0],a.naturalWidth>0?e.hasSize=!0:a.width||(e.hasSize=!1)}return mfp._parseMarkup(t,{title:_getTitle(e),img_replaceWith:e.img},e),mfp.resizeImage(),e.hasSize?(_imgInterval&&clearInterval(_imgInterval),e.loadError?(t.addClass("mfp-loading"),mfp.updateStatus("error",o.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),mfp.updateStatus("ready")),t):(mfp.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),mfp.findImageSize(e)),t)}}}),define("magnific-popup-image",["magnific-popup"],function(){});var IFRAME_NS="iframe",_emptyPage="//about:blank",_fixIframeBugs=function(e){if(mfp.currTemplate[IFRAME_NS]){var t=mfp.currTemplate[IFRAME_NS].find("iframe");t.length&&(e||(t[0].src=_emptyPage),mfp.isIE8&&t.css("display",e?"block":"none"))}};$.magnificPopup.registerModule(IFRAME_NS,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){mfp.types.push(IFRAME_NS),_mfpOn("BeforeChange",function(e,t,i){t!==i&&(t===IFRAME_NS?_fixIframeBugs():i===IFRAME_NS&&_fixIframeBugs(!0))}),_mfpOn(CLOSE_EVENT+"."+IFRAME_NS,function(){_fixIframeBugs()})},getIframe:function(e,t){var i=e.src,n=mfp.st.iframe;$.each(n.patterns,function(){return i.indexOf(this.index)>-1?(this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1):void 0});var s={};return n.srcAction&&(s[n.srcAction]=i),mfp._parseMarkup(t,s,e),mfp.updateStatus("ready"),t}}}),define("magnific-popup-iframe",["magnific-popup"],function(){}),define("eb-styleguide/js/ui_components/modal/modal_view",["require","dorsal","jquery","backbone","magnific-popup","magnific-popup-inline","magnific-popup-image","magnific-popup-iframe"],function(e){var t,i=e("dorsal"),n=e("jquery"),s=e("backbone"),o=(e("magnific-popup"),e("magnific-popup-inline"),e("magnific-popup-image"),e("magnific-popup-iframe"),/^(#|\.)[\w-]+/);return t=s.View.extend({initialize:function(e){_.bindAll(this,"_config","create","saveInitialValues","reset","handleModalOpen","handleModalClose","handleWrapperClick"),"undefined"!=typeof e&&this.create(e)},create:function(e){var t="undefined"==typeof e.data.modalOptions?{}:n.parseJSON(e.data.modalOptions);this.modalConfig=this._config(t),n(e.el).magnificPopup(this.modalConfig);var i=n(e.el).attr("href");if(o.test(i))try{this.$modalEl=n(i)}catch(s){this.$modalEl=n()}else this.$modalEl=n()},saveInitialValues:function(){this.$modalEl.find("input, select, textarea").each(function(){/radio|checkbox/.test(n(this).attr("type"))?n(this).data("initial",this.checked):n(this).data("initial",n(this).val())})},open:function(e){this.modalConfig=this._config(e),this.$modalEl=n(e.items.src),n.magnificPopup.open(this.modalConfig)},close:function(){n.magnificPopup.close()},reset:function(){var e=this.$modalEl;window.setTimeout(function(){e.find("input, select, textarea").each(function(){var e=n(this);/radio|checkbox/.test(e.attr("type"))?this.checked!==Boolean(e.data("initial"))&&e.trigger("click"):e.val(e.data("initial")||"").trigger("change").trigger("blur")})},100)},handleWrapperClick:function(e){(n(e.target).hasClass("mfp-container")||n(e.target).hasClass("mfp-content"))&&this.reset()},handleModalOpen:function(){this.modalConfig.modal||(this.$modalEl.find(".mfp-close").on("click",this.reset),this.modalConfig.closeOnBgClick!==!1&&n(".mfp-wrap").on("click",this.handleWrapperClick)),this.saveInitialValues()},handleModalClose:function(){this.modalConfig.modal||(this.$modalEl.find(".mfp-close").off("click",this.reset),this.modalConfig.closeOnBgClick!==!1&&n(".mfp-wrap").off("click",this.handleWrapperClick))},_config:function(e){var t=this,i={type:"inline",fixedContentPos:!0,closeMarkup:'<i class="mfp-close default-mfp-close ico-circle-cross ico--medium"></i>',alignTop:!0,removalDelay:300,mainClass:"modal__animation",callbacks:{open:t.handleModalOpen,close:t.handleModalClose}};return n.extend({},i,e)}}),i.registerPlugin("modal",function(e){var i;return n(function(){i=new t(e),i.$modalEl.find(".js-xd-modal-reset").on("click",i.reset),i.$modalEl.find(".js-xd-modal-close").on("click",i.close)}),i}),t}),function(e,t){var i=!1,n="/ajax/social/disconnect",s="badperms",o="connected",r=[],a=!1,l={authResponse:null,status:"unknown"},c="EB.Facebook.hasPerms",h="0",u="1",d={streamPublish:"efbnen",streamPublishAction:"efbnreg",inviteFriends:"efbinvt"},p={scope:"email",locale:"en_US",internalReferrer:"0",skipAnalytics:!1},f=function(e){permCache.clear(),FB.login(function(){g(e)},{scope:p.scope})},m=function(e){permCache.clear(),t.ajax({type:"POST",url:n,data:{},cache:!1,dataType:"json",success:function(t){t&&t.success&&FB.logout(e)},error:function(){FB.logout(),"function"==typeof e&&setTimeout(e,250)}})},g=function(e){FB.getLoginStatus(function(i){i&&i.status===o?checkPerms({success:function(){"function"==typeof e&&e(i)},failure:function(){i.status=s,"function"==typeof e&&e(i)}}):(permCache.clear(),"function"==typeof e&&e(i)),t.extend(l,i)})},v=function(){return FB.getUserID()};permCache={get:function(){return window.localStorage?window.localStorage.getItem(c):null},set:function(e){window.localStorage&&window.localStorage.setItem(c,e)},clear:function(){window.localStorage&&window.localStorage.removeItem(c)}},checkPerms=function(e){return permCache.get()==u?void e.success():permCache.get()==h?void e.failure():void FB.api("/me/permissions",function(t){if(t&&t.data&&t.data[0]){var i,n=p.scope.split(/\s*,\s*/),s=t.data[0];for(i=0;i<n.length;++i)if(!(n[i]in s))return permCache.set(h),void e.failure();permCache.set(u),e.success()}})},actionGenerator=function(e){return function(i){var n=e.name;return e.pageModule&&(n=e.pageModule+"_"+e.name),i&&(n=n+"_"+i),t.extend({},e,{name:n})}},shareEvent=function(n){if(!i)return void f(function(e){e.status===o&&shareEvent(n)});var s=n.event,r=actionGenerator({name:"streampublish",category:"facebook",pageModule:n.pageModule});p.skipAnalytics||e.Analytics.recordAction(n.module?r(n.module+"_click"):r("click"));var a={},l="";s.location&&(a[gettext("Location")]=e.util.truncate(s.location,70)),s.time&&(a[gettext("Time")]=e.util.truncate(s.time,70)),s.host&&s.host_href&&(a[gettext("Hosted By")]={text:e.util.truncate(s.host,50),href:s.host_href}),l="organizer"===n.usertype?interpolate(gettext("%(actor)s just created %(event_name)s on Eventbrite!"),{actor:"{*actor*} ",event_name:s.name},!0):"attendee"===n.usertype?interpolate(gettext("%(actor)s registered for %(event_name)s at Eventbrite!"),{actor:"{*actor*} ",event_name:s.name},!0):interpolate(gettext("%(actor)s registered for %(event_name)s at Eventbrite!"),{actor:"{*actor*} ",event_name:s.name},!0);var c={name:"Eventbrite - "+s.name,caption:l,properties:a,href:s.base_url+"/"+d.streamPublish,media:[{type:"image",src:s.image,href:s.href}]};FB.ui({method:"stream.publish",display:"dialog",attachment:c,action_links:[{text:s.action_text,href:s.base_url+"/"+d.streamPublishAction}]},function(i){i&&i.post_id?(p.skipAnalytics||e.Analytics.recordAction(t.extend({},r(),{id:i.post_id})),"function"==typeof n.success&&n.success()):(p.skipAnalytics||e.Analytics.recordAction(i&&i.error?r("error"):r("cancel")),"function"==typeof n.error&&n.error())})},addInitCallback=function(e){"function"==typeof e&&(a?e():r.push(e))},fireInitCallbacks=function(){var e;for(e=0;e<r.length;++e)r[e]();r=[]},loadFacebookSDK=function(){!function(e){var t,i="facebook-jssdk";e.getElementById(i)||(t=e.createElement("script"),t.id=i,t.async=!0,t.src="//connect.facebook.net/"+p.locale+"/all.js",e.getElementsByTagName("head")[0].appendChild(t))}(document)},init=function(n){t.extend(p,n),window.fbAsyncInit=function(){FB.init({appId:p.appId,oauth:!0,cookie:!0,status:!0,xfbml:!0,channelUrl:"/facebook-sdk"}),FB.Event.subscribe("auth.authResponseChange",function(t){t.status===o?(i=t.authResponse?!0:!1,p.skipAnalytics||e.Analytics.recordAction({name:"connect",category:"facebook"})):i=!1}),FB.Event.subscribe("edge.create",function(t,i){for(var n="like",s=i&&i.dom;s;){if("eb_header"===s.id){n+="hdr";break}s=s.parentElement}p.skipAnalytics||e.Analytics.recordAction({name:n,category:"facebook"})}),fireInitCallbacks(),a=!0},n.deferSDKLoad||loadFacebookSDK()},e.Facebook={init:init,loadFacebookSDK:loadFacebookSDK,login:f,logout:m,getLoginStatus:g,getFbId:v,ready:addInitCallback,shareEvent:shareEvent,isConnected:function(){return l.status===e.Facebook.FB_STATUS_CONNECTED},FB_STATUS_CONNECTED:o,FB_STATUS_BADPERMS:s,streamPublish:shareEvent,loginStatus:l}}(window.EB,window.jQuery),"function"==typeof define&&define("eb/social/facebook",[],function(){return EB.Facebook}),define("require/components/saved_events/bookmark_controller",["require","backbone","eventbrite","underscore","eb-styleguide/js/ui_components/modal/modal_view","eb/social/facebook","jquery.ba-bbq.1.2.1"],function(e){var t=e("backbone"),i=e("eventbrite"),n=e("underscore"),s=e("eb-styleguide/js/ui_components/modal/modal_view"),o=e("eb/social/facebook");return e("jquery.ba-bbq.1.2.1"),t.View.extend({initialize:function(e){e=e||{},t.View.prototype.initialize.apply(this,arguments),n.bindAll(this,"bookmarkEvent","unbookmarkEvent","updateBookmarkUrl"),t.Events.on("bookmark",this.bookmarkEvent),t.Events.on("unbookmark",this.unbookmarkEvent),this.bookmarkUrl="/social/user/tracked_events/",e.fbAppId&&(o.init({appId:e.fbAppId}),o.ready(this.updateBookmarkUrl)),this.parseUrl()},updateBookmarkUrl:function(){o.getFbId()&&(this.bookmarkUrl="/social/user/1/"+o.getFbId()+"/tracked_events/")},parseUrl:function(){var e=$.deparam.querystring();e.bookmarkEvent&&$.isNumeric(e.bookmarkEvent)&&(this.bookmarkEvent({eid:parseInt(e.bookmarkEvent),showSuccess:!0}),window.location.hash="",history&&history.pushState&&history.pushState("",document.title,window.location.pathname))},bookmarkEvent:function(e){i.getUid()&&$.post(this.bookmarkUrl,{event_id:e.eid}).done(function(){t.Events.trigger("bookmarked",e),e.showSuccess&&(new s).open({items:{src:"#bookmark-success-popup"}})})},unbookmarkEvent:function(e){i.getUid()&&$.ajax({type:"DELETE",url:this.bookmarkUrl+e.eid+"/"}).done(function(){t.Events.trigger("unbookmarked",{eid:e.eid})})}})}),define("require/components/saved_events/bookmark_view",["require","dorsal","jquery","underscore","backbone","eventbrite","eb-styleguide/js/ui_components/modal/modal_view"],function(e){var t,i=e("dorsal"),n=e("jquery"),s=e("underscore"),o=e("backbone"),r=e("eventbrite"),a=e("eb-styleguide/js/ui_components/modal/modal_view");return t=o.View.extend({events:{click:"handleBookmarkClick"},initialize:function(e){o.View.prototype.initialize.apply(this,arguments),s.bindAll(this,"handleEventBookmarked","handleEventUnbookmarked","handleBookmarkClick","showLoginModal"),this.eventId=e.eventId||this.$el.data("eid"),this.bookmarked=e.bookmarked||this.$el.data("bookmarked"),o.Events.on("bookmarked",this.handleEventBookmarked),o.Events.on("unbookmarked",this.handleEventUnbookmarked)},handleBookmarkClick:function(e){return e.stopPropagation(),r.getUid()?void(this.bookmarked?o.Events.trigger("unbookmark",{eid:this.eventId}):o.Events.trigger("bookmark",{eid:this.eventId})):void this.showLoginModal()},showLoginModal:function(){var e,t,i=this;e=new a,e.open({items:{src:"#bookmark-login-popup"}}),t=e.$modalEl.find("a"),t.each(function(e,t){var s=n(t).attr("href");s=s.substr(0,s.indexOf("?")),s+="?referrer="+encodeURIComponent(window.location.pathname+"?bookmarkEvent="+i.eventId),n(t).attr("href",s)})},handleEventBookmarked:function(e){this.eventId===e.eid&&(this.$el.addClass("bookmarked"),this.$("i").removeClass("ico-bookmark").addClass("ico-bookmarked"),this.bookmarked=!0)},handleEventUnbookmarked:function(e){this.eventId===e.eid&&(this.$el.removeClass("bookmarked"),this.$("i").removeClass("ico-bookmarked").addClass("ico-bookmark"),this.bookmarked=!1)}}),i.registerPlugin("bookmark",function(e){var i=new t(e).render();return i}),t}),require(["eb/require_base_config","eb/require_app_config","require/core/bootstrap","eb/advanced_teams/constants","eb/components/teams/search/app"],function(e,t){t.showRelatedEvents&&require(["require/entities/related_event_collection","eb/components/related_events/analytics","eb/components/related_events/view"],function(e,i,n){var s=new e([],{publicID:t.bigEventID}),o=new n({FBAppID:t.FBAppID,collection:s,showFeedback:t.showFeedback});jQuery(".js-expired-event").prepend(o.el),t.isPublic?s.fetch({data:{similarEventsOnly:t.similarEventsOnly}}):s.trigger("sync"),new i({el:".js-related-events",bigEventID:t.bigEventID,EBUserID:t.EBUserID,correlationID:t.correlationID,sessionID:t.sessionID})}),t.showSeatMap&&require(["eb/components/seatmap/view"],function(e){new e({el:".js-seatmap",bigEventID:t.bigEventID}).render()}),t.eventbriteUserBookmarks&&require(["require/components/saved_events/bookmark_controller","require/components/saved_events/bookmark_view"],function(e,i){new e({fbAppId:t.FBAppID}),new i({el:"#track_event",eventId:t.bigEventID}).render()})}),define("eb/apps/event_page/app",function(){});