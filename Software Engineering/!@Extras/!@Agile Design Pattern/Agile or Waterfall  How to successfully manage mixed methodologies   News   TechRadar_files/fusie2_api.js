(function(a){a.fn.fusie=function(d,e,g){if("init"===d){window.fusie_settings&&window.fusie_settings();if(""==a.fn.fusie.defaults.sitecode||""==a.fn.fusie.defaults.sitename){console.log("ERROR: sitecode and sitename must be set!");return}if("en"!=a.fn.fusie.defaults.language&&"fr"!=a.fn.fusie.defaults.language){console.log("ERROR: invalid language is set!");return}var b="",b=a.fn.fusie.defaults.alt_language_file?a.fn.fusie.defaults.alt_language_file:a.fn.fusie.defaults.fusie_cdn+"/js/fusie_i18n_"+
a.fn.fusie.defaults.language+".js";a.ajax({url:b,dataType:"json",async:!1,timeout:3E3,success:function(a){window.fusielang=a},error:function(){}});if(!window.hasOwnProperty("fusielang")){console.log("ERROR: language file could not be loaded!");return}a.fn.fusie.defaults.languagecb&&a.fn.fusie.defaults.languagecb(e);window.hasOwnProperty("Recaptcha")||a("body").append(a("<script/>").attr("type","text/javascript").attr("src","http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"));b=a.fn.fusie("getusername");
if(!1==b)a.fn.fusie("loginjoin"),a.fn.fusie.defaults.disquscb&&a.fn.fusie.defaults.disquscb(!1),a.fn.fusie.defaults.init&&a.fn.fusie.defaults.initcb&&a.fn.fusie.defaults.initcb(!1);else if(a.fn.fusie.defaults.init){var c={action:"init"};a.fn.fusie("send",c,"initresponse")}else{var f={};f.fusie_username=decodeURIComponent(b);a.fn.fusie("namelogout",f)}a.fn.fusie.defaults.oninit&&a.fn.fusie(a.fn.fusie.defaults.oninit);0==window.location.hash.indexOf("#/resetpassword")&&0<window.location.hash.indexOf("authkey=")?
(b=window.location.hash.indexOf("authkey="),b=window.location.hash.substr(b+8),e={},e.key=b,window.location.hash="",a.fn.fusie("showpwdresetform",e)):0==window.location.hash.indexOf("#/activate")&&0<window.location.hash.indexOf("authkey=")?(b=window.location.hash.indexOf("authkey="),b=window.location.hash.substr(b+8),e={},e.key=b,window.location.hash="",a.fn.fusie("initactivate_alternate",e)):0==window.location.hash.indexOf("#/resetemail")&&0<window.location.hash.indexOf("authkey=")&&(b=window.location.hash.indexOf("authkey="),
b=window.location.hash.substr(b+8),e={},e.key=b,window.location.hash="",a.fn.fusie("initemailreset_alternate",e));if(a.fn.fusie.defaults.disqus)a(window).on("hashchange",hashchangecheck)}if("getusername"===d)return a.fn.fusie("getcookie","username");if("getcookie"===d){d=document.cookie;f=e+"=";b=d.indexOf(f);if(-1==b)return!1;b+=f.length;f=d.indexOf(";",b);-1==f&&(f=d.length);return d.substr(b,f-b)}"deletecookies"===d&&(document.cookie="username=; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie=
"sid=; expires=Thu, 01 Jan 1970 00:00:00 GMT");"loginjoin"===d&&a(".fusiebox").each(function(){a(this).empty();a(this).removeClass("fusiebox_loggedin");a(this).addClass("fusiebox_loggedout");a(this).append(a("<button/>").addClass("fusiebox_loginbtn").append(window.fusielang.login).on("click",function(b){a.fn.fusie("initlogin")}));a.fn.fusie.defaults.nojoin||a(this).append(a("<button/>").addClass("fusiebox_joinbtn").append(window.fusielang.join).on("click",function(b){a.fn.fusie("initjoin")}))});"namelogout"===
d&&a(".fusiebox").each(function(){a(this).empty();a(this).removeClass("fusiebox_loggedout");a(this).addClass("fusiebox_loggedin");a(this).append(a("<span/>").addClass("fusiebox_username").append(a("<a/>").addClass("fusiebox_username_a").attr("href","javascript:void(0);").html(a("<div />").text(e.fusie_username).html()).on("click",function(){a.fn.fusie("initprofile")})));a(this).append(a("<button/>").addClass("fusiebox_logoutbtn").append(window.fusielang.logout).on("click",function(b){a.fn.fusie("logout")}))});
"initlogin"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.login_title),a.fn.fusie("showloading"),c={action:"initlogin"},a.fn.fusie("send",c,"showloginform"));"connectsocial"===d&&(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.login_title),a.fn.fusie("showloginform",{social:!0}));"initjoin"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.join_title),
a.fn.fusie("showloading"),c={action:"initjoin"},a.fn.fusie("send",c,"showjoinform"));"initprofile"===d&&(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.profile_title),a.fn.fusie("showloading"),c={action:"get_profile"},a.fn.fusie("send",c,"showprofile"));"initpwdchange"===d&&(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.pwdchange_title),a.fn.fusie("showloading"),
c={action:"initpwdchange"},a.fn.fusie("send",c,"showpwdchangeform"));"initrequestpwd"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.pwdreset_title),a.fn.fusie("showloading"),c={action:"initrequestpwd"},a.fn.fusie("send",c,"showrequestpwdform"));"initemailresetrequest"===d&&(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.reset_email),a.fn.fusie("showloading"),
c={action:"initemailresetrequest"},a.fn.fusie("send",c,"showemailresetrequestform"));"initactivate"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.activate_account_title),a.fn.fusie("showloading"),c={action:"initactivate"},a.fn.fusie("send",c,"showactivateform"));"initactivate_alternate"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.activate_account_title),
a.fn.fusie("showactivateform"),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").find("#fusie_activation_key").val(e.key),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").find("button:eq(0)").trigger("click"));"initemailreset_alternate"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.reset_email),a.fn.fusie("showemailresetform"),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").find("#fusie_auth_key").val(e.key),
window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").find("button:eq(0)").trigger("click"));"initrequestactivationkey"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.request_activation_key_title),a.fn.fusie("showloading"),c={action:"initresendactivationkey"},a.fn.fusie("send",c,"showrequestactivationkeyform"));if("login"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=
window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_email").length&&b.find("#fusie_pwd").length&&(c=[{field:b.find("#fusie_email"),type:"email"},{field:b.find("#fusie_pwd"),type:"normal",min:1,max:30},{type:"recaptcha"}],a.fn.fusie("checkfields",c))){a.fn.fusie("mainerror");c={action:"login"};c.fields={fusie_email:b.find("#fusie_email").val(),fusie_pwd:b.find("#fusie_pwd").val()};b.find("#fusie_connectsocial").length&&(c.fields.fusie_connectsocial=!0);b.find("#recaptcha").length&&
(c.fields.repactcha_challenge=Recaptcha.get_challenge(),c.fields.recaptcha_response=Recaptcha.get_response());a.fn.fusie("send",c,"loginresponse");return}a.fn.fusie("hideprogress")}"loginresponse"===d&&(e.success?(a.fn.fusie("closemodal"),a.fn.fusie("handlelogin",e)):window.hasOwnProperty("fusiemodal")&&(a.fn.fusie("mainerror",window.fusielang.login_error),e.captcha_required&&a.fn.fusie("addcaptcha"),e.hasOwnProperty("recaptcha")&&!e.recaptcha&&a.fn.fusie("wrongcaptcha")));"fblogin"===d&&window.hasOwnProperty("FB")&&
(a.fn.fusie("showloading"),a.fn.fusie("removefirstbutton"),FB.getLoginStatus(function(b){if("connected"==b.status){var c={action:"fblogin"};c.fields={access_token:b.authResponse.accessToken};a.fn.fusie("send",c,"socialloginresponse")}else FB.login(function(b){b.authResponse?a.fn.fusie("fblogin"):a.fn.fusie("closemodal")},{scope:"email"})}));"gpluslogin"===d&&window.hasOwnProperty("gapi")&&(a.fn.fusie("showloading"),a.fn.fusie("removefirstbutton"),gapi.auth.signIn({callback:gpluslogincb,clientid:a.fn.fusie.defaults.gplus_clientid,
scope:a.fn.fusie.defaults.gplus_scope,gplus_requestvisibleactions:a.fn.fusie.defaults.gplus_requestvisibleactions,cookiepolicy:a.fn.fusie.defaults.gplus_cookiepolicy}));"linkedinlogin"===d&&(a.fn.fusie("showloading"),a.fn.fusie("removefirstbutton"),window.linkedinstate=S4()+S4()+S4(),b=window.open("https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id="+a.fn.fusie.defaults.linkedin_apikey+"&state="+window.linkedinstate+"&redirect_uri="+getLinkedInRedirectURI(!0),"linkedinpopup",
"width=100,height=100"),popupChecker(b,"linkedin"),b.focus());"twitterlogin"===d&&(a.fn.fusie("showloading"),a.fn.fusie("removefirstbutton"),c={action:"twitterrequesttoken"},c.fields={redirect_uri:getTwitterRedirectURI()},window.twitterwindow=window.open("","twitterpopup","width=750,height=400"),a.fn.fusie("send",c,"twitterloginredirect"),popupChecker(window.twitterwindow,"twitter"),window.twitterwindow.focus());"twitterloginredirect"===d&&(window.twitterwindow.location.href="https://api.twitter.com/oauth/authenticate?oauth_token="+
e.request_token,window.twitterwindow.focus());"steamlogin"===d&&(a.fn.fusie("showloading"),a.fn.fusie("removefirstbutton"),b=window.open(a.fn.fusie.defaults.fusie_api+"/externals/php/steamopenid.php?redirect_uri="+getSteamRedirectURI(!0)+"&realm="+window.location.hostname,"steampopup","width=1024,height=600"),popupChecker(b,"steam"),b.focus());"socialloginresponse"===d&&(e.success?(a.fn.fusie("closemodal"),a.fn.fusie("handlelogin",e)):e.dosocialregister?a.fn.fusie("showjoinform",{social:!0,email:e.email?
e.email:!1}):a.fn.fusie("closemodal"));"logout"===d&&(c={action:"logout"},a.fn.fusie("send",c,"logoutresponse"));"logoutresponse"===d&&e.success&&a.fn.fusie("handlelogout",e);"handlelogin"===d&&(a.fn.fusie("namelogout",e),document.cookie="username="+encodeURIComponent(e.fusie_username)+"; path=/",a.fn.fusie.defaults.logincb&&a.fn.fusie.defaults.logincb(e),a.fn.fusie.defaults.disquscb&&a.fn.fusie.defaults.disquscb(e));"handlelogout"===d&&(a.fn.fusie("loginjoin"),a.fn.fusie("deletecookies"),a.fn.fusie.defaults.logoutcb&&
a.fn.fusie.defaults.logoutcb(e),a.fn.fusie.defaults.disquscb&&a.fn.fusie.defaults.disquscb(e));"initresponse"===d&&e.success&&(e.loggedin?(a.fn.fusie("handlelogin",e),a.fn.fusie.defaults.initcb&&a.fn.fusie.defaults.initcb(!0)):(a.fn.fusie("handlelogout",e),a.fn.fusie.defaults.initcb&&a.fn.fusie.defaults.initcb(!1)));if("join"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_username").length&&
(b.find("#fusie_joinsocial").length||b.find("#fusie_email").length&&b.find("#fusie_pwd").length&&b.find("#fusie_pwd_verify").length)&&(c=b.find("#fusie_joinsocial").length?[{field:b.find("#fusie_username"),type:"normal",min:2,max:20},{field:b.find("#fusie_email"),type:"email"},{type:"recaptcha"}]:[{field:b.find("#fusie_username"),type:"normal",min:2,max:20},{field:b.find("#fusie_email"),type:"email"},{field:b.find("#fusie_pwd"),type:"normal",min:6,max:30},{field:b.find("#fusie_pwd_verify"),type:"verify",
against:b.find("#fusie_pwd")},{type:"recaptcha"}],a.fn.fusie("checkfields",c))){e={};a.fn.fusie("mainerror");c={action:"join"};b.find("#fusie_joinsocial").length?c.fields={fusie_username:b.find("#fusie_username").val(),fusie_email:b.find("#fusie_email").val(),fusie_own_newsletter:b.find("#fusie_own_newsletter").is(":checked")?1:0,fusie_own_newsletter_2:b.find("#fusie_own_newsletter_2").is(":checked")?1:0,fusie_own_newsletter_3:b.find("#fusie_own_newsletter_3").is(":checked")?1:0,fusie_future_newsletter:b.find("#fusie_future_newsletter").is(":checked")?
1:0,fusie_3rdparty_newsletter:b.find("#fusie_3rdparty_newsletter").is(":checked")?1:0,repactcha_challenge:Recaptcha.get_challenge(),recaptcha_response:Recaptcha.get_response(),fusie_joinsocial:!0}:c.fields={fusie_username:b.find("#fusie_username").val(),fusie_email:b.find("#fusie_email").val(),fusie_pwd:b.find("#fusie_pwd").val(),fusie_pwd_verify:b.find("#fusie_pwd_verify").val(),fusie_own_newsletter:b.find("#fusie_own_newsletter").is(":checked")?1:0,fusie_own_newsletter_2:b.find("#fusie_own_newsletter_2").is(":checked")?
1:0,fusie_own_newsletter_3:b.find("#fusie_own_newsletter_3").is(":checked")?1:0,fusie_future_newsletter:b.find("#fusie_future_newsletter").is(":checked")?1:0,fusie_3rdparty_newsletter:b.find("#fusie_3rdparty_newsletter").is(":checked")?1:0,repactcha_challenge:Recaptcha.get_challenge(),recaptcha_response:Recaptcha.get_response()};a.fn.fusie("send",c,"joinresponse");return}a.fn.fusie("hideprogress")}"joinresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_join),
e.activation?(c=a("<p/>").append(window.fusielang.successful_join_text),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initactivate")})):(c=a("<p/>").append(window.fusielang.successful_join_text_no_activation),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initlogin")})),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c),a.fn.fusie.defaults.joincb&&a.fn.fusie.defaults.joincb(e)):window.hasOwnProperty("fusiemodal")&&
(a.fn.fusie("mainerror",window.fusielang.join_error),a.fn.fusie("addcaptcha"),e.hasOwnProperty("recaptcha")&&!e.recaptcha&&a.fn.fusie("wrongcaptcha")));if("saveprofile"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_firstname").length&&b.find("#fusie_lastname").length&&b.find("#fusie_country").length&&(b.find("#fusie_pwd").length||b.find("#fusie_nopwd").length)&&b.find("#fusie_own_newsletter").length&&
b.find("#fusie_future_newsletter").length&&b.find("#fusie_3rdparty_newsletter").length&&(c=(f=0<b.find("#fusie_nopwd").length)?[{field:b.find("#fusie_firstname"),type:"normal",min:0,max:40},{field:b.find("#fusie_lastname"),type:"normal",min:0,max:40}]:[{field:b.find("#fusie_firstname"),type:"normal",min:0,max:40},{field:b.find("#fusie_lastname"),type:"normal",min:0,max:40},{field:b.find("#fusie_pwd"),type:"normal",min:1,max:30}],a.fn.fusie("checkfields",c))){e={};a.fn.fusie("mainerror");c={action:"save_profile"};
c.fields={fusie_firstname:b.find("#fusie_firstname").val(),fusie_lastname:b.find("#fusie_lastname").val(),fusie_country:b.find("#fusie_country").val(),fusie_pwd:b.find("#fusie_pwd").val(),fusie_own_newsletter:b.find("#fusie_own_newsletter").is(":checked")?1:0,fusie_own_newsletter_2:b.find("#fusie_own_newsletter_2").is(":checked")?1:0,fusie_own_newsletter_3:b.find("#fusie_own_newsletter_3").is(":checked")?1:0,fusie_future_newsletter:b.find("#fusie_future_newsletter").is(":checked")?1:0,fusie_3rdparty_newsletter:b.find("#fusie_3rdparty_newsletter").is(":checked")?
1:0};f?c.fields.fusie_nopwd=1:c.fields.fusie_pwd=b.find("#fusie_pwd").val();a.fn.fusie("send",c,"saveprofileresponse");return}a.fn.fusie("hideprogress")}"saveprofileresponse"===d&&(e.success?window.hasOwnProperty("fusiemodal")&&(window.fusiemodal.data("content").find(".fusie_modalwindow > .main").find("#fusie_pwd").val(""),a.fn.fusie("mainsuccess",window.fusielang.profile_update_success)):window.hasOwnProperty("fusiemodal")&&a.fn.fusie("mainerror",window.fusielang.profile_update_error));if("pwdchange"===
d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_currentpwd").length&&b.find("#fusie_pwd").length&&b.find("#fusie_pwd_verify").length&&(c=[{field:b.find("#fusie_currentpwd"),type:"normal",min:1,max:30},{field:b.find("#fusie_pwd"),type:"normal",min:6,max:30},{field:b.find("#fusie_pwd_verify"),type:"verify",against:b.find("#fusie_pwd")}],a.fn.fusie("checkfields",c))){e={};a.fn.fusie("mainerror");
c={action:"pwdchange"};c.fields={fusie_currentpwd:b.find("#fusie_currentpwd").val(),fusie_pwd:b.find("#fusie_pwd").val(),fusie_pwd_verify:b.find("#fusie_pwd_verify").val()};a.fn.fusie("send",c,"pwdchangeresponse");return}a.fn.fusie("hideprogress")}"pwdchangeresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_pwdchange),c=a("<p/>").append(window.fusielang.successful_pwdchange_text),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):
window.hasOwnProperty("fusiemodal")&&a.fn.fusie("mainerror",window.fusielang.pwdchange_error));if("pwdreset"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_authkey").length&&b.find("#fusie_email").length&&b.find("#fusie_pwd").length&&b.find("#fusie_pwd_verify").length&&(c=[{field:b.find("#fusie_email"),type:"email"},{field:b.find("#fusie_pwd"),type:"normal",min:6,max:30},{field:b.find("#fusie_pwd_verify"),
type:"verify",against:b.find("#fusie_pwd")}],a.fn.fusie("checkfields",c))){e={};a.fn.fusie("mainerror");c={action:"pwdreset"};c.fields={fusie_authkey:b.find("#fusie_authkey").val(),fusie_email:b.find("#fusie_email").val(),fusie_pwd:b.find("#fusie_pwd").val(),fusie_pwd_verify:b.find("#fusie_pwd_verify").val()};a.fn.fusie("send",c,"pwdresetresponse");return}a.fn.fusie("hideprogress")}"pwdresetresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_pwdchange),
c=a("<p/>").append(window.fusielang.successful_pwdchange_text),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):window.hasOwnProperty("fusiemodal")&&a.fn.fusie("mainerror",window.fusielang.pwdchange_error));if("resetpwd"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_email").length&&(c=[{field:b.find("#fusie_email"),type:"email"}],a.fn.fusie("checkfields",c))){a.fn.fusie("mainerror");
c={action:"requestpwd"};c.fields={fusie_email:b.find("#fusie_email").val()};a.fn.fusie("send",c,"resetpwdresponse");return}a.fn.fusie("hideprogress")}"resetpwdresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_requestpwd),c=a("<p/>").append(window.fusielang.successful_requestpwd_text),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):window.hasOwnProperty("fusiemodal")&&
a.fn.fusie("mainerror",window.fusielang.reset_pwd_error));if("emailresetrequest"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_email").length&&b.find("#fusie_email_verify").length&&b.find("#fusie_pwd").length&&(c=[{field:b.find("#fusie_email"),type:"email"},{field:b.find("#fusie_email_verify"),type:"verify",against:b.find("#fusie_email")},{field:b.find("#fusie_pwd"),type:"normal",min:1,
max:30}],a.fn.fusie("checkfields",c))){a.fn.fusie("mainerror");c={action:"emailresetrequest"};c.fields={fusie_email:b.find("#fusie_email").val(),fusie_email_verify:b.find("#fusie_email_verify").val(),fusie_pwd:b.find("#fusie_pwd").val()};a.fn.fusie("send",c,"emailresetrequestresponse");return}a.fn.fusie("hideprogress")}"emailresetrequestresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_emailresetrequest),
c=a("<p/>").append(window.fusielang.successful_emailresetrequest_text),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):window.hasOwnProperty("fusiemodal")&&a.fn.fusie("mainerror",window.fusielang.email_reset_error));if("emailreset"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_auth_key").length&&(c=[{field:b.find("#fusie_auth_key"),type:"normal",min:1,max:100}],
a.fn.fusie("checkfields",c))){a.fn.fusie("mainerror");c={action:"emailreset"};c.fields={fusie_auth_key:b.find("#fusie_auth_key").val()};a.fn.fusie("send",c,"emailresetresponse");return}a.fn.fusie("hideprogress")}"emailresetresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_emailreset),c=a("<p/>").append(window.fusielang.successful_emailreset_text),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):
window.hasOwnProperty("fusiemodal")&&a.fn.fusie("mainerror",window.fusielang.email_reset_error));if("activate"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_activation_key").length&&(c=[{field:b.find("#fusie_activation_key"),type:"normal",min:1,max:100}],a.fn.fusie("checkfields",c))){a.fn.fusie("mainerror");c={action:"activate"};c.fields={fusie_activation_key:b.find("#fusie_activation_key").val()};
a.fn.fusie("send",c,"activateresponse");return}a.fn.fusie("hideprogress")}"activateresponse"===d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_activation),c=a("<p/>").append(window.fusielang.successful_activation_text),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initlogin")}),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):window.hasOwnProperty("fusiemodal")&&
a.fn.fusie("mainerror",window.fusielang.activate_error));if("requestkey"===d&&window.hasOwnProperty("fusiemodal")){a.fn.fusie("showprogress");b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");if(b.find("#fusie_email").length&&(c=[{field:b.find("#fusie_email"),type:"email"}],a.fn.fusie("checkfields",c))){a.fn.fusie("mainerror");c={action:"resendactivationkey"};c.fields={fusie_email:b.find("#fusie_email").val()};a.fn.fusie("send",c,"requestkeyresponse");return}a.fn.fusie("hideprogress")}"requestkeyresponse"===
d&&(e.success?(a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.successful_activation_key_request),c=a("<p/>").append(window.fusielang.successful_activation_key_request_text),window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(c)):window.hasOwnProperty("fusiemodal")&&a.fn.fusie("mainerror",window.fusielang.request_activation_key_error));"showloginform"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),
b.empty(),b.append(a("<p/>").append(window.fusielang.tac_text_login)),e.social?b.append(a("<input/>").attr("type","hidden").val(1).attr("id","fusie_connectsocial")):a.fn.fusie.defaults.nosocial||b.append(a.fn.fusie("socialdiv")),b.append(a("<p>").addClass("subtitle").append(window.fusielang.login_details)),c=a("<table>").css("width","100%"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.email).attr("id","fusie_email").on("keypress",inputKeypressHandler)))),
c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd).attr("id","fusie_pwd").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),e.social?c.css("margin-bottom","20px"):(a.fn.fusie.defaults.simplelogin||a.fn.fusie.defaults.nojoin?(c=a("<p/>").append(window.fusielang.login_helper_nojoin),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initrequestpwd")})):
(c=a("<p/>").append(window.fusielang.login_helper),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initjoin")}),c.find("span:eq(1)").addClass("fake-link").on("click",function(b){a.fn.fusie("initrequestpwd")}),c.find("span:eq(2)").addClass("fake-link").on("click",function(b){a.fn.fusie("initactivate")})),b.append(c)),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.login).on("click",function(b){a(b.delegateTarget).attr("disabled",
"disabled");a.fn.fusie("login")})),e.captcha_required&&a.fn.fusie("addcaptcha"));if("showjoinform"===d&&window.hasOwnProperty("fusiemodal")){window.fusiemodal.data("content").find(".fusie_modalwindow > .title").html(window.fusielang.join_title);b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");b.empty();e.social?(c=a("<p/>").append(window.fusielang.connect_social),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("connectsocial")}),b.append(c)):a.fn.fusie.defaults.nosocial||
(b.append(a("<p/>").append(window.fusielang.join_social)),b.append(a.fn.fusie("socialdiv")),b.append(a("<p/>").append(window.fusielang.join_fill)));b.append(a("<p>").addClass("subtitle").append(window.fusielang.join_details));c=a("<table>").css("width","100%");c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.username).data("mandatory",window.fusielang.mandatory_username_join).attr("id","fusie_username").attr("maxlength",20).on("keypress",inputKeypressHandler))));
f=a("<input/>").attr("placeholder",window.fusielang.email).attr("id","fusie_email").on("keypress",inputKeypressHandler);e.email&&f.val(e.email);c.append(a("<tr/>").append(a("<td>").append(f)));if(e.social)b.append(a("<input/>").attr("type","hidden").val(1).attr("id","fusie_joinsocial"));else if(c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd_join).data("mandatory",window.fusielang.mandatory_pwd_join).attr("id","fusie_pwd").attr("type","password").attr("maxlength",
30).on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd_verify_join).data("nomatch",window.fusielang.pwd_not_match).attr("id","fusie_pwd_verify").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),a.fn.fusie.defaults.pwdhelp){var k=a("<span/>").attr("id","fusie_pwdhelp").append(window.fusielang.pwd_help).addClass("fake-link").on("click",openpwdhelp),f=a("<div/>").attr("id","fusie_pwdhelpdiv").append(a("<div/>").addClass("txt").append(a("<b/>").append(window.fusielang.pwd_help_title)).append("<br/>").append(window.fusielang.pwd_help_txt).append(a("<div/>").append("&times;").on("click",
closepwdhelp).addClass("close"))).css("height","0px");c.append(a("<tr/>").append(a("<td>").append(k).append(f)))}b.append(c);c.find("input:eq(0)").focus();b.append(a.fn.fusie("subscriptionblock",{own:a.fn.fusie.defaults.subscription_tick_options[0],own2:a.fn.fusie.defaults.subscription_tick_options[1],own3:a.fn.fusie.defaults.subscription_tick_options[2],future:a.fn.fusie.defaults.subscription_tick_options[3],third:a.fn.fusie.defaults.subscription_tick_options[4]}));b.append(a("<p/>").append(window.fusielang.tac_text_join));
window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.join).on("click",function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("join")}));a.fn.fusie("addcaptcha")}if("subscriptionblock"===d)return d=a("<div/>").addClass("subs_outer"),f=a("<div/>").addClass("subs_inner"),d.append(f),f.append(a("<p>").addClass("subtitle").append(window.fusielang.subscription_preferences)),c=a("<p>"),b=!0,a.fn.fusie.defaults.subscription_options[0]?
(c.append(a("<label/>").append(a("<input/>").attr("type","checkbox").attr("id","fusie_own_newsletter").val(1).prop("checked",e.own)).append(window.fusielang.siteletter)),b=!1):c.append(a("<input/>").attr("type","hidden").attr("id","fusie_own_newsletter").val(0)),a.fn.fusie.defaults.subscription_options[1]?(b||c.append("<br/>"),c.append(a("<label/>").append(a("<input/>").attr("type","checkbox").attr("id","fusie_own_newsletter_2").val(1).prop("checked",e.own2)).append(window.fusielang.newsletter_2)),
b=!1):c.append(a("<input/>").attr("type","hidden").attr("id","fusie_own_newsletter_2").val(0)),a.fn.fusie.defaults.subscription_options[2]?(b||c.append("<br/>"),c.append(a("<label/>").append(a("<input/>").attr("type","checkbox").attr("id","fusie_own_newsletter_3").val(1).prop("checked",e.own3)).append(window.fusielang.newsletter_3)),b=!1):c.append(a("<input/>").attr("type","hidden").attr("id","fusie_own_newsletter_3").val(0)),a.fn.fusie.defaults.subscription_options[3]?(b||c.append("<br/>"),c.append(a("<label/>").append(a("<input/>").attr("type",
"checkbox").attr("id","fusie_future_newsletter").val(1).prop("checked",e.future)).append(window.fusielang.newsletter)),b=!1):c.append(a("<input/>").attr("type","hidden").attr("id","fusie_future_newsletter").val(0)),a.fn.fusie.defaults.subscription_options[4]?(b||c.append("<br/>"),c.append(a("<label/>").append(a("<input/>").attr("type","checkbox").attr("id","fusie_3rdparty_newsletter").val(1).prop("checked",e.third)).append(window.fusielang.thirdparty_letter)),b=!1):c.append(a("<input/>").attr("type",
"hidden").attr("id","fusie_3rdparty_newsletter").val(0)),f.append(c),d;if("showprofile"===d&&window.hasOwnProperty("fusiemodal")){b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main");b.empty();b.append(a("<p/>").append(window.fusielang.profile_privacy_text));b.append(a("<p>").addClass("subtitle").append(window.fusielang.profile_details));e.fusie_product_list&&b.append(a("<p/>").append(window.fusielang.connected_sites_update+e.fusie_product_list));c=a("<table>").css("width","100%");
c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.firstname).attr("id","fusie_firstname").val(e.fusie_firstname).attr("maxlength",40).on("keypress",inputKeypressHandler))));c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.lastname).attr("id","fusie_lastname").val(e.fusie_lastname).attr("maxlength",40).on("keypress",inputKeypressHandler))));var l=a("<select/>").attr("id","fusie_country");l.append(a("<option/>").append(window.fusielang.country_select).attr("value",
"null"));a.each(e.countries,function(b,c){l.append(a("<option/>").append(c.country_name).attr("value",b));e.fusie_country_id==b&&l.find("option:last-child").prop("selected",!0)});c.append(a("<tr/>").append(a("<td>").append(l)));e.fusie_haspassword?c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd).attr("id","fusie_pwd").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))):b.append(a("<input/>").attr("type","hidden").attr("id",
"fusie_nopwd").val(1));c.append(a("<tr/>").append(a("<td>").append(e.fusie_email).append(a("<span/>").addClass("mailchange").append("(").append(a("<span/>").append(window.fusielang.change).addClass("fake-link").on("click",function(){a.fn.fusie("initemailresetrequest")})).append(")"))));e.fusie_haspassword?c.append(a("<tr/>").append(a("<td>").append(a("<span/>").addClass("fake-link").append(window.fusielang.change_pwd).on("click",function(){a.fn.fusie("initpwdchange")})))):c.append(a("<tr/>").append(a("<td>").append(a("<span/>").addClass("fake-link").append(window.fusielang.create_pwd).on("click",
function(){a.fn.fusie("initrequestpwd")}))));b.append(c);c.find("input:eq(0)").focus();b.append(a.fn.fusie("subscriptionblock",{own:0<e.newsletter_site,own2:0<e.newsletter_site_2,own3:0<e.newsletter_site_3,future:0<e.newsletter_future,third:0<e.newsletter_3rd_party}));window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.save_profile).on("click",function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("saveprofile")}))}"showpwdchangeform"===
d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),b.append(a("<p/>").append(window.fusielang.change_pwd_details)),c=a("<table>").css("width","100%").css("margin-bottom","20px"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.current_pwd).attr("id","fusie_currentpwd").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",
window.fusielang.pwd).attr("id","fusie_pwd").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd_verify).attr("id","fusie_pwd_verify").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.save).on("click",
function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("pwdchange")})));"showrequestpwdform"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),b.append(a("<p/>").append(window.fusielang.reset_password_hint)),c=a("<table>").css("width","100%").css("margin-bottom","20px"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.email).attr("id","fusie_email").on("keypress",
inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.reset_password).on("click",function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("resetpwd")})));"showpwdresetform"===d&&(a.fn.fusie("openmodal",{cancel:!0}),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").html(window.fusielang.reset_password),b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),
b.empty(),b.append(a("<p/>").append(window.fusielang.reset_pwd_details)),b.append(a("<input/>").attr("type","hidden").attr("id","fusie_authkey").val(e.key)),c=a("<table>").css("width","100%"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.email).attr("id","fusie_email").on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd).attr("id","fusie_pwd").attr("type","password").attr("maxlength",
30).on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd_verify).attr("id","fusie_pwd_verify").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.save).on("click",function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("pwdreset")})));
"showemailresetrequestform"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),e.fusie_haspassword?(b.append(a("<p/>").append(window.fusielang.reset_email_hint)),e.fusie_product_list&&b.append(a("<p/>").append(window.fusielang.connected_sites_update+e.fusie_product_list)),c=a("<table>").css("width","100%").css("margin-bottom","20px"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.email).attr("id",
"fusie_email").on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.email_verify).attr("id","fusie_email_verify").on("keypress",inputKeypressHandler)))),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.pwd).attr("id","fusie_pwd").attr("type","password").attr("maxlength",30).on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.reset_email).on("click",
function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("emailresetrequest")}))):(c=a("<p/>").append(window.fusielang.reset_email_nopassword),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initrequestpwd")}),b.append(c)));"showemailresetform"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),b.append(a("<p/>").append(window.fusielang.reset_email_details)),c=a("<table>").css("width",
"100%").css("margin-bottom","20px"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.auth_key).attr("id","fusie_auth_key").attr("maxlength",100).on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.save).on("click",function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("emailreset")})));"showactivateform"===
d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),b.append(a("<p/>").append(window.fusielang.tac_text_activation)),c=a("<table>").css("width","100%"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.activation_key).attr("id","fusie_activation_key").attr("maxlength",100).on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),c=a("<p/>").append(window.fusielang.activate_account_helper),
c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initjoin")}),c.find("span:eq(1)").addClass("fake-link").on("click",function(b){a.fn.fusie("initrequestactivationkey")}),b.append(c),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.activate_account).on("click",function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("activate")})));"showrequestactivationkeyform"===d&&window.hasOwnProperty("fusiemodal")&&
(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),b.append(a("<p/>").append(window.fusielang.request_activation_key_hint)),c=a("<table>").css("width","100%").css("margin-bottom","20px"),c.append(a("<tr/>").append(a("<td>").append(a("<input/>").attr("placeholder",window.fusielang.email).attr("id","fusie_email").on("keypress",inputKeypressHandler)))),b.append(c),c.find("input:eq(0)").focus(),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").prepend(a("<button/>").append(window.fusielang.request_activation_key).on("click",
function(b){a(b.delegateTarget).attr("disabled","disabled");a.fn.fusie("requestkey")})));"shownotactivated"===d&&window.hasOwnProperty("fusiemodal")&&(window.fusiemodal.data("content").find(".fusie_modalwindow > .title").html(window.fusielang.activate_account_title),b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.empty(),c=a("<p/>").append(window.fusielang.not_activated_text),c.find("span:eq(0)").addClass("fake-link").on("click",function(b){a.fn.fusie("initactivate")}),c.find("span:eq(1)").addClass("fake-link").on("click",
function(b){a.fn.fusie("initrequestactivationkey")}),b.append(c));"showloading"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content"),b.find(".fusie_modalwindow > .main").empty().append(a("<div/>").addClass("loading").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/loader.gif"))));"showprogress"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content"),b.find(".fusie_modalwindow > .bottom").prepend(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+
"/images/button_loader.gif").css("padding-right","5px")));"hideprogress"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content"),b.find(".fusie_modalwindow > .bottom > img").remove(),b.find(".fusie_modalwindow > .bottom > :disabled").removeAttr("disabled"));"removefirstbutton"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content"),b.find(".fusie_modalwindow > .bottom > button:eq(0)").remove());if("addcaptcha"===d){if(!window.hasOwnProperty("Recaptcha")){setTimeout(function(){a.fn.fusie("addcaptcha")},
10);return}window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),0==b.find(".captcha_holder").length?(b.find("table:eq(0)").after(a("<div/>").addClass("captcha_holder").append(a("<div/>").attr("id","recaptcha").addClass("captcha").append("Recaptcha"))),Recaptcha.create(a.fn.fusie.defaults.recaptcha_public_key,"recaptcha",{theme:"white"})):Recaptcha.reload())}if("socialdiv"===d)return a.fn.fusie.defaults.fblogin||a.fn.fusie.defaults.gpluslogin||
a.fn.fusie.defaults.linkedinlogin||a.fn.fusie.defaults.twitterlogin||a.fn.fusie.defaults.steamlogin?(d=a("<div/>").addClass("social_outer"),f=a("<div/>").addClass("social_inner"),d.append(f),a.fn.fusie("fillsocialdiv",f),d):"";"fillsocialdiv"===d&&(f=!1,e?f=e:window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),b.find(".social_outer > .social_inner").length&&(f=b.find(".social_outer > .social_inner"))),f&&(a.fn.fusie.defaults.fblogin&&!window.hasOwnProperty("FB")||
a.fn.fusie.defaults.fblogin&&!window.hasOwnProperty("gapi")?(f.find("img").length||f.append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/button_loader.gif").css("padding-right","5px")),window.hasOwnProperty("FB")||document.getElementById("facebook-jssdk")||(b=document.getElementsByTagName("script")[0],f=document.createElement("script"),f.id="facebook-jssdk",f.src="//connect.facebook.net/en_US/all.js",b.parentNode.insertBefore(f,b)),window.hasOwnProperty("gapi")||document.getElementById("googleplus-api")||
(b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.id="googleplus-api",b.src="//apis.google.com/js/client:plusone.js",f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(b,f)),setTimeout(function(){a.fn.fusie("fillsocialdiv")},150)):(f.empty(),a.fn.fusie.defaults.fblogin&&f.append(a("<span/>").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/facebook.png").attr("width","106").attr("height","40").addClass("pointer").attr("alt",window.fusielang.facebook_login).attr("title",
window.fusielang.facebook_login).on("click",function(){a.fn.fusie("fblogin")}))),a.fn.fusie.defaults.gpluslogin&&f.append(a("<span/>").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/gplus.png").attr("width","107").attr("height","40").addClass("pointer").attr("alt",window.fusielang.gplus_login).attr("title",window.fusielang.gplus_login).on("click",function(){a.fn.fusie("gpluslogin")}))),a.fn.fusie.defaults.linkedinlogin&&f.append(a("<span/>").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+
"/images/linkedin.png").attr("width","107").attr("height","40").addClass("pointer").attr("alt",window.fusielang.linkedin_login).attr("title",window.fusielang.linkedin_login).on("click",function(){a.fn.fusie("linkedinlogin")}))),a.fn.fusie.defaults.twitterlogin&&f.append(a("<span/>").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/twitter.png").attr("width","94").attr("height","40").addClass("pointer").attr("alt",window.fusielang.twitter_login).attr("title",window.fusielang.twitter_login).on("click",
function(){a.fn.fusie("twitterlogin")}))),a.fn.fusie.defaults.steamlogin&&f.append(a("<span/>").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/steam.png").attr("width","91").attr("height","40").addClass("pointer").attr("alt",window.fusielang.steam_login).attr("title",window.fusielang.steam_login).on("click",function(){a.fn.fusie("steamlogin")}))))));if("checkrecaptcha"===d){var h=!0;window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),
b.find("#recaptcha").length&&(""==Recaptcha.get_response()?(b.find("#recaptcha").addClass("wrongdiv"),b.find("#recaptcha").prev("div").length?b.find("#recaptcha").prev("div").html(window.fusielang.mandatory_captcha):b.find("#recaptcha").before(a("<div/>").addClass("red").append(window.fusielang.mandatory_captcha)),h=!1):b.find("#recaptcha").removeClass("wrongdiv").siblings("div").remove()));return h}"wrongcaptcha"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),
b.find("#recaptcha").length&&(b.find("#recaptcha").addClass("wrongdiv"),b.find("#recaptcha").prev("div").length?b.find("#recaptcha").prev("div").html(window.fusielang.wrong_captcha):b.find("#recaptcha").before(a("<div/>").addClass("red").append(window.fusielang.wrong_captcha))));"mainsuccess"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),e?b.find("table").length&&(c=b.find("table:eq(0)"),c.prev("div .mainsuccess").length?b.find("table:eq(0)").prev("div .mainsuccess").html(e):
b.find("table:eq(0)").before(a("<div/>").addClass("mainsuccess").append(e))):b.find(".mainsuccess").remove());"mainerror"===d&&window.hasOwnProperty("fusiemodal")&&(b=window.fusiemodal.data("content").find(".fusie_modalwindow > .main"),e?b.find("table").length&&(c=b.find("table:eq(0)"),c.prev("div .mainerror").length?b.find("table:eq(0)").prev("div .mainerror").html(e):b.find("table:eq(0)").before(a("<div/>").addClass("mainerror").append(e))):b.find(".mainerror").remove());"openmodal"===d&&(a.fn.fusie("closemodal"),
a("body").css("overflow","hidden"),b=a("<div/>").addClass("fusie_modalback"),f=a("<div/>").addClass("fusie_modalcontent"),c=a("<div/>").addClass("fusie_modalwindow").on("click",function(a){a.stopPropagation()}),c.append(a("<div/>").addClass("title")),c.append(a("<div/>").addClass("main")),k=a("<div/>").addClass("bottom"),c.append(k),f.append(c),b.data("content",f),window.fusiemodal=b,a("body").append(b),a("body").append(f),a.fn.fusie.defaults.noclose||(f.on("click",function(b){a.fn.fusie("closemodal")}),
c.append(a("<div/>").addClass("close_button").append(a("<img/>").attr("src",a.fn.fusie.defaults.fusie_cdn+"/images/close.png").attr("width","22").attr("height","22")).on("click",function(b){a.fn.fusie("closemodal")})),a(window).on("keyup.fusie",function(b){27==b.keyCode&&a.fn.fusie("closemodal")}),k.append(a("<button/>").append(e&&e.cancel?window.fusielang.cancel:window.fusielang.close).on("click",function(b){a.fn.fusie("closemodal")}))));"closemodal"===d&&window.hasOwnProperty("fusiemodal")&&(window.fusiemodal.data("content").remove(),
window.fusiemodal.remove(),delete window.fusiemodal,a(window).off("keyup.fusie"),a("body").css("overflow","visible"));if("checkfields"===d)return h=!0,a.each(e,function(b,c){if("normal"==c.type&&0<c.min&&""==c.field.val()){h=!1;c.field.addClass("wrongfield");var d="",d=c.field.data("mandatory")&&0<c.field.data("mandatory").length?c.field.data("mandatory"):window.fusielang.mandatory_field;c.field.siblings("div").length?c.field.siblings("div").html(d):c.field.after(a("<div/>").addClass("errordiv").html(d))}else"normal"==
c.type&&(c.field.val().length<c.min||c.field.val().length>c.max)?(h=!1,c.field.addClass("wrongfield"),d=window.fusielang.invalid_length,d=d.replace("%1",c.min),d=d.replace("%2",c.max),c.field.siblings("div").length?c.field.siblings("div").html(d):c.field.after(a("<div/>").addClass("errordiv").html(d))):"normal"==c.type&&(c.field.removeClass("wrongfield"),c.field.siblings("div").remove());"email"==c.type&&(/^\w+([\.\+-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,5})+$/.test(c.field.val())?(c.field.removeClass("wrongfield"),
c.field.siblings("div").remove()):(h=!1,c.field.addClass("wrongfield"),c.field.siblings("div").length?c.field.siblings("div").html(window.fusielang.invalid_email):c.field.after(a("<div/>").addClass("errordiv").html(window.fusielang.invalid_email))));"verify"==c.type&&(c.field.val()!=c.against.val()?(h=!1,c.field.addClass("wrongfield"),d="",d=c.field.data("nomatch")&&0<c.field.data("nomatch").length?c.field.data("nomatch"):window.fusielang.does_not_match,c.field.siblings("div").length?c.field.siblings("div").html(d):
c.field.after(a("<div/>").addClass("errordiv").html(d))):(c.field.removeClass("wrongfield"),c.field.siblings("div").remove()));"recaptcha"==c.type&&(a.fn.fusie("checkrecaptcha")||(h=!1))}),h;if("send"===d){b={};b.sitecode=a.fn.fusie.defaults.sitecode;b.sitename=a.fn.fusie.defaults.sitename;if(f=a.fn.fusie("getcookie","sid"))b.sid=f;b.request=e;a.ajax({type:"POST",url:a.fn.fusie.defaults.fusie_api+"/"+e.action+"/",dataType:"json",data:b,timeout:3E4,success:function(b){a.fn.fusie("hideprogress");b.session_id&&
(document.cookie="sid="+b.session_id+"; path=/");20==b.result?(b.field_errors&&a.each(b.field_errors,function(b,c){if(a("#"+b).length){var d=a("#"+b);d.addClass("wrongfield");d.siblings("div").length?d.siblings("div").html(window.fusielang.field_errors[c]):d.after(a("<div/>").addClass("errordiv").html(window.fusielang.field_errors[c]))}}),g&&a.fn.fusie(g,b)):b.dologin?(a.fn.fusie("handlelogout",e),a.fn.fusie("initlogin")):b.already_loggedin?a.fn.fusie("loginresponse",b):b.notactivated?a.fn.fusie("shownotactivated",
b):window.hasOwnProperty("fusiemodal")&&(window.fusiemodal.data("content").find(".fusie_modalwindow > .main").empty().append(a("<p/>").addClass("red").append(window.fusielang.results[b.result])),window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").empty().append(a("<button/>").append(window.fusielang.close).on("click",function(b){a.fn.fusie("closemodal")})))},error:function(b){a.fn.fusie("showerror")}})}"showerror"===d&&(a.fn.fusie("hideprogress"),a.fn.fusie("openmodal"),window.fusiemodal.data("content").find(".fusie_modalwindow > .title").append(window.fusielang.fatal_error),
window.fusiemodal.data("content").find(".fusie_modalwindow > .main").append(a("<p/>").addClass("red").append(window.fusielang.fatal_error_text)))}})(jQuery);
$.fn.fusie.defaults={init:!1,language:"en",alt_language_file:!1,sitecode:"",sitename:"",fusie_api:"https://api.fusie2.future.net.uk",fusie_cdn:"http://static.api.fusie2.futurecdn.net",fusie_api_path:"/auth",recaptcha_public_key:"6Lddv-sSAAAAAP2Ikc8rUxlVJkBEt6Yr84C7zafd",subscription_options:[!0,!1,!1,!0,!0],subscription_tick_options:[!0,!1,!1,!0,!1],gplus_clientid:"",gplus_scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read",gplus_requestvisibleactions:"http://schemas.google.com/AddActivity",
gplus_cookiepolicy:"single_host_origin",fblogin:!1,gpluslogin:!1,linkedinlogin:!1,twitterlogin:!1,steamlogin:!1,disqus:!1,disquscb:!1,languagecb:!1,logincb:!1,logoutcb:!1,joincb:!1,initcb:!1,oninit:!1,noclose:!1,simplelogin:!1,nosocial:!0,nojoin:!1,pwdhelp:!0};$(document).ready(function(){$("head").append($("<link/>").attr("href",$.fn.fusie.defaults.fusie_cdn+"/css/fusie.css").attr("rel","stylesheet").attr("type","text/css"));$.fn.fusie("init")});
function gpluslogincb(a){if(a.status.signed_in){if("PROMPT"==a.status.method){var d={action:"gpluslogin"};d.fields={access_token:a.access_token};$.fn.fusie("send",d,"socialloginresponse")}}else $.fn.fusie("closemodal")}
function linkedinlogincb(a){a=a.replace("?","");var d="code=",e=d.length,d=a.indexOf(d),g="";-1<d&&(g=-1<a.indexOf("&",d)?a.substr(d+e,a.indexOf("&",d)-(d+e)):a.substr(d+e));var d="state=",e=d.length,d=a.indexOf(d),b="";-1<d&&(b=-1<a.indexOf("&",d)?a.substr(d+e,a.indexOf("&",d)-(d+e)):a.substr(d+e));0<g.length&&window.linkedinstate===b?(clearTimeout(window.linkedin),a={action:"linkedinlogin"},a.fields={access_token:g,redirect_uri:getLinkedInRedirectURI(!1)},$.fn.fusie("send",a,"socialloginresponse")):
$.fn.fusie("closemodal")}
function twitterlogincb(a){a=a.replace("?","");var d="oauth_token=",e=d.length,g=a.indexOf(d),b="";-1<g&&(b=-1<a.indexOf("&",g)?a.substr(g+e,a.indexOf("&",g)-(g+e)):a.substr(g+e));d="oauth_verifier=";e=d.length;g=a.indexOf(d);d="";-1<g&&(d=-1<a.indexOf("&",g)?a.substr(g+e,a.indexOf("&",g)-(g+e)):a.substr(g+e));0<b.length&&0<d.length?(clearTimeout(window.twitter),a={action:"twitterlogin"},a.fields={redirect_uri:getTwitterRedirectURI(),access_token:b,access_verifier:d},$.fn.fusie("send",a,"socialloginresponse")):
$.fn.fusie("closemodal")}function steamlogincb(a){clearTimeout(window.steam);var d={action:"steamlogin"};d.query=a.substr(1);$.fn.fusie("send",d,"socialloginresponse")}function getLinkedInRedirectURI(a){var d=window.location.protocol+"//"+window.location.hostname+$.fn.fusie.defaults.fusie_api_path+"/html/linkedincb.html";return a?encodeURIComponent(d):d}
function getTwitterRedirectURI(a){var d=window.location.protocol+"//"+window.location.hostname+$.fn.fusie.defaults.fusie_api_path+"/html/twittercb.html";return a?encodeURIComponent(d):d}function getSteamRedirectURI(a){var d=window.location.protocol+"//"+window.location.hostname+$.fn.fusie.defaults.fusie_api_path+"/php/steamopenid.php";return a?encodeURIComponent(d):d}function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}
function inputKeypressHandler(a){13===a.which&&window.fusiemodal.data("content").find(".fusie_modalwindow > .bottom").find("button:eq(0)").each(function(){$(this).trigger("click")})}function popupChecker(a,d){a.closed?$.fn.fusie("closemodal"):window[d]=setTimeout(function(){popupChecker(a,d)},50)}var RecaptchaOptions={theme:"white"};
function hashchangecheck(){if("#/logout"===window.location.hash){$.fn.fusie("logout");var a=window.location.href,d=a.indexOf("#");-1<d&&(a=a.substr(0,d));history.replaceState("",document.title,a)}}function openpwdhelp(a){$(a.delegateTarget).fadeOut(300,showpwdhelp)}function showpwdhelp(a){$("#fusie_pwdhelpdiv").animate({height:$("#fusie_pwdhelpdiv").find("div").outerHeight()},300,function(){$("#fusie_pwdhelpdiv").css("height","auto")})}
function closepwdhelp(a){$("#fusie_pwdhelpdiv").animate({height:0},300,showpwdhelplink)}function showpwdhelplink(a){$("#fusie_pwdhelp").fadeIn(300)};
