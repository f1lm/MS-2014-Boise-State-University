define(["jquery","version!fly/managers/debug","version!fly/components/fixate"],function(e,t){var n=e.support.touch?"vclick":"click",r=t.init("shareBar");e.widget("fly.shareBar",e.fly.fixate,{options:{loadClass:"loaded",guideRight:".col-main",guideTop:".page-heading",guideBottom:".leader-bottom",mode:null,modeClassPrefix:"mode-",containersSelector:".container",minGutterWidth:100},hasEvents:!1,_create:function(){var t=this.options;this._super("_create"),this.content=e(this.$element.parents(t.containerSelector)[0]),this.minGutterWidth=t.minGutterWidth,this.currentMode=t.mode||"vertical",this.checkMode(),this._setupLoadEvent("loaded")},_addEvents:function(){this._super(),r.log("Events added",this.hasEvents);var e=this;this.$window.on("modeChange",function(t){e.checkMode()}),this.$window.on("resize.sharebar",function(t){e.checkMode()}),this.$window.on("skinAdLoaded",function(t){e._handleSkinAd()})},checkMode:function(){var e,t;this.options.mode&&this._setDisplay(this.options.mode),t=this.content.offset(),e=t.left<this.minGutterWidth?"horizontal":"vertical",this.currentMode!==e&&this._setDisplay(e)},_handleSkinAd:function(){r.log("handle SkinAd"),this._setDisplay("horizontal"),this.$window.off("resize.sharebar")},_setupLoadEvent:function(e){r.log("Share bar loaded"),this.$window.trigger("shareBarLoaded")},_setDisplay:function(e){if(!e)return;r.log("Mode set to: "+e);var t=this.options;el=this.$element,el.removeClass(t.modeClassPrefix+this.currentMode),el.addClass(t.modeClassPrefix+e),e==="vertical"?this._addEvents():this.destroy(),this.currentMode=e}})})