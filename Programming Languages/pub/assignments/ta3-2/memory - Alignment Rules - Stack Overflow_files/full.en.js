"use strict";function moveScroller(){var t=$("#scroller").width(),e=function(){var e=$(window).scrollTop(),n=$("#scroller-anchor").offset().top,i=$("#scroller");e>n?i.height()>$(window).height()?i.css({"position":"fixed","top":"","bottom":"0px","width":t}):i.css({"position":"fixed","top":"0px","bottom":"","width":t}):n>=e&&i.css({"position":"relative","top":"","bottom":""})};$(window).scroll(e).resize(e),e()}function sanitizeAndSplitTags(t,e){t=$.trim(t).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");for(var n=t.split(/[\s|,;]+/),i=[],a=0;a<n.length;a++){var o=n[a].toLowerCase();StackExchange.options.site.nonAsciiTags||(o=StackExchange.helpers.noDiacritics(o)),o=o.replace(/_/g,"-");var r="[^a-z0-9.#+"+(e?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,ª,µ,º,À-Ö,Ø-ö,ø-ˁ,ˆ-ˑ,ˠ-ˤ,ˬ,ˮ,Ͱ-ʹ,Ͷ-ͷ,ͺ-ͽ,Ά,Έ-Ί,Ό,Ύ-Ρ,Σ-ϵ,Ϸ-ҁ,Ҋ-ԣ,Ա-Ֆ,ՙ,ա-և,א-ת,װ-ײ,ء-ي,٠-٩,ٮ-ٯ,ٱ-ۓ,ە,ۥ-ۦ,ۮ-ۼ,ۿ,ܐ,ܒ-ܯ,ݍ-ޥ,ޱ,߀-ߪ,ߴ-ߵ,ߺ,ऄ-ह,ऽ,ॐ,क़-ॡ,०-९,ॱ-ॲ,ॻ-ॿ,অ-ঌ,এ-ঐ,ও-ন,প-র,ল,শ-হ,ঽ,ৎ,ড়-ঢ়,য়-ৡ,০-ৱ,ਅ-ਊ,ਏ-ਐ,ਓ-ਨ,ਪ-ਰ,ਲ-ਲ਼,ਵ-ਸ਼,ਸ-ਹ,ਖ਼-ੜ,ਫ਼,੦-੯,ੲ-ੴ,અ-ઍ,એ-ઑ,ઓ-ન,પ-ર,લ-ળ,વ-હ,ઽ,ૐ,ૠ-ૡ,૦-૯,ଅ-ଌ,ଏ-ଐ,ଓ-ନ,ପ-ର,ଲ-ଳ,ଵ-ହ,ଽ,ଡ଼-ଢ଼,ୟ-ୡ,୦-୯,ୱ,ஃ,அ-ஊ,எ-ஐ,ஒ-க,ங-ச,ஜ,ஞ-ட,ண-த,ந-ப,ம-ஹ,ௐ,௦-௯,అ-ఌ,ఎ-ఐ,ఒ-న,ప-ళ,వ-హ,ఽ,ౘ-ౙ,ౠ-ౡ,౦-౯,ಅ-ಌ,ಎ-ಐ,ಒ-ನ,ಪ-ಳ,ವ-ಹ,ಽ,ೞ,ೠ-ೡ,೦-೯,അ-ഌ,എ-ഐ,ഒ-ന,പ-ഹ,ഽ,ൠ-ൡ,൦-൯,ൺ-ൿ,අ-ඖ,ක-න,ඳ-ර,ල,ව-ෆ,ก-ะ,า-ำ,เ-ๆ,๐-๙,ກ-ຂ,ຄ,ງ-ຈ,ຊ,ຍ,ດ-ທ,ນ-ຟ,ມ-ຣ,ລ,ວ,ສ-ຫ,ອ-ະ,າ-ຳ,ຽ,ເ-ໄ,ໆ,໐-໙,ໜ-ໝ,ༀ,༠-༩,ཀ-ཇ,ཉ-ཬ,ྈ-ྋ,က-ဪ,ဿ-၉,ၐ-ၕ,ၚ-ၝ,ၡ,ၥ-ၦ,ၮ-ၰ,ၵ-ႁ,ႎ,႐-႙,Ⴀ-Ⴥ,ა-ჺ,ჼ,ᄀ-ᅙ,ᅟ-ᆢ,ᆨ-ᇹ,ሀ-ቈ,ቊ-ቍ,ቐ-ቖ,ቘ,ቚ-ቝ,በ-ኈ,ኊ-ኍ,ነ-ኰ,ኲ-ኵ,ኸ-ኾ,ዀ,ዂ-ዅ,ወ-ዖ,ዘ-ጐ,ጒ-ጕ,ጘ-ፚ,ᎀ-ᎏ,Ꭰ-Ᏼ,ᐁ-ᙬ,ᙯ-ᙶ,ᚁ-ᚚ,ᚠ-ᛪ,ᜀ-ᜌ,ᜎ-ᜑ,ᜠ-ᜱ,ᝀ-ᝑ,ᝠ-ᝬ,ᝮ-ᝰ,ក-ឳ,ៗ,ៜ,០-៩,᠐-᠙,ᠠ-ᡷ,ᢀ-ᢨ,ᢪ,ᤀ-ᤜ,᥆-ᥭ,ᥰ-ᥴ,ᦀ-ᦩ,ᧁ-ᧇ,᧐-᧙,ᨀ-ᨖ,ᬅ-ᬳ,ᭅ-ᭋ,᭐-᭙,ᮃ-ᮠ,ᮮ-᮹,ᰀ-ᰣ,᱀-᱉,ᱍ-ᱽ,ᴀ-ᶿ,Ḁ-ἕ,Ἐ-Ἕ,ἠ-ὅ,Ὀ-Ὅ,ὐ-ὗ,Ὑ,Ὓ,Ὕ,Ὗ-ώ,ᾀ-ᾴ,ᾶ-ᾼ,ι,ῂ-ῄ,ῆ-ῌ,ῐ-ΐ,ῖ-Ί,ῠ-Ῥ,ῲ-ῴ,ῶ-ῼ,‿-⁀,⁔,ⁱ,ⁿ,ₐ-ₔ,ℂ,ℇ,ℊ-ℓ,ℕ,ℙ-ℝ,ℤ,Ω,ℨ,K-ℭ,ℯ-ℹ,ℼ-ℿ,ⅅ-ⅉ,ⅎ,Ↄ-ↄ,Ⰰ-Ⱞ,ⰰ-ⱞ,Ⱡ-Ɐ,ⱱ-ⱽ,Ⲁ-ⳤ,ⴀ-ⴥ,ⴰ-ⵥ,ⵯ,ⶀ-ⶖ,ⶠ-ⶦ,ⶨ-ⶮ,ⶰ-ⶶ,ⶸ-ⶾ,ⷀ-ⷆ,ⷈ-ⷎ,ⷐ-ⷖ,ⷘ-ⷞ,ⸯ,々-〆,〱-〵,〻-〼,ぁ-ゖ,ゝ-ゟ,ァ-ヺ,ー-ヿ,ㄅ-ㄭ,ㄱ-ㆎ,ㆠ-ㆷ,ㇰ-ㇿ,㐀-䶵,一-鿃,ꀀ-ꒌ,ꔀ-ꘌ,ꘐ-ꘫ,Ꙁ-ꙟ,Ꙣ-ꙮ,ꙿ-ꚗ,ꜗ-ꜟ,Ꜣ-ꞈ,Ꞌ-ꞌ,ꟻ-ꠁ,ꠃ-ꠅ,ꠇ-ꠊ,ꠌ-ꠢ,ꡀ-ꡳ,ꢂ-ꢳ,꣐-꣙,꤀-ꤥ,ꤰ-ꥆ,ꨀ-ꨨ,ꩀ-ꩂ,ꩄ-ꩋ,꩐-꩙,가-힣,豈-鶴,侮-頻,並-龎,ﬀ-ﬆ,ﬓ-ﬗ,יִ,ײַ-ﬨ,שׁ-זּ,טּ-לּ,מּ,נּ-סּ,ףּ-פּ,צּ-ﮱ,ﯓ-ﴽ,ﵐ-ﶏ,ﶒ-ﷇ,ﷰ-ﷻ,︳-︴,﹍-﹏,ﹰ-ﹴ,ﹶ-ﻼ,０-９,Ａ-Ｚ,＿,ａ-ｚ,ｦ-ﾾ,ￂ-ￇ,ￊ-ￏ,ￒ-ￗ,ￚ-ￜ":"")+"-]";o=o.replace(new RegExp(r,"g"),""),o=o.replace(/^[#+-]+/,""),o=o.replace(/[.-]+$/,""),o.length>0&&-1==$.inArray(o,i)&&"or"!=o&&"and"!=o&&i.push(o)}return i}function initTagRenderer(t,e){window.tagRenderer||(window.tagRendererRaw=function(n,i,a){i=i||"",a=a||"a";var o="";i||(t&&$.inArray(n,t)>-1?o="required-tag":e&&$.inArray(n,e)>-1&&(o="moderator-tag"));var r=$("<"+a+">").addClass("post-tag").addClass(o).text(n);return"a"===a.toLowerCase()&&r.attr({"rel":"tag","href":i+"/questions/tagged/"+encodeURIComponent(n),"title":function(t){return"show questions tagged '"+t.tag+"'"}({"tag":n})}),r.outerHTML()},window.tagRenderer=function(t,e,n){return $(tagRendererRaw(t,e,n))})}function showFadingHelpText(t){t.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}function initFadingHelpText(){var t={"wmd-input":"#how-to-format","tagnames":"#how-to-tag","tag-editor":"#how-to-tag","title":"#how-to-title","wmd-input-42":"#how-to-format"},e=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),n=function(e){var n=$(e);return n.parent().hasClass("tag-editor")?t["tag-editor"]:t[$(e).attr("id")]};e.focus(function(){var t=n(this);e.each(function(){var e=n(this);e!=t&&$(e).hide()});var i=$(t);i.is(":visible")||showFadingHelpText(i)})}!function(t){function e(){}function n(t,e){if(o)return e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1}var i=e.prototype,a=[],o=a.indexOf?!0:!1;i.getListeners=function(t){var e=this._events||(this._events={});return e[t]||(e[t]=[])},i.addListener=function(t,e){var i=this.getListeners(t);return-1===n(e,i)&&i.push(e),this},i.removeListener=function(t,e){var i=this.getListeners(t),a=n(e,i);return-1!==a&&(i.splice(a,1),0===i.length&&(this._events[t]=null)),this},i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,a,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"==typeof e)for(i in e)e.hasOwnProperty(i)&&(a=e[i])&&("function"==typeof a?o.call(this,i,a):r.call(this,i,a));else for(i=n.length;i--;)o.call(this,e,n[i]);return this},i.removeEvent=function(t){return t?this._events[t]=null:this._events=null,this},i.emitEvent=function(t,e){for(var n=this.getListeners(t),i=n.length;i--;)n[i].apply(null,e||a)===!0&&this.removeListener(t,n[i]);return this},"function"==typeof define&&define.amd?define(function(){return e}):t.EventEmitter=e}(this),StackExchange.realtime=function(){function t(t){var a=t.split(","),o=a.length,r=R%o,s=a[r];if(null!=s&&0!=s.indexOf("ws://")&&0!=s.indexOf("wss://")&&(s=("https:"===document.location.protocol?"wss://":"ws://")+s),"WebSocket"in window||"MozWebSocket"in window){if(M)try{n("closing WebSocket"),M.close()}catch(c){}if(!M){try{M="WebSocket"in window?new WebSocket(s):new MozWebSocket(s)}catch(c){return n("Sockets disabled - "+c.message),void 0}M.onopen=function(){D||(D=!0),R=0,n("WebSocket opened"),e(),i(),setInterval(q,6e4)},M.onmessage=function(t){var e=$.parseJSON(t.data);U.emitEvent(e.action,[e.data])},M.onclose=function(){M=null,n("WebSocket closed"),5>R&&N>0&&(R++,N--,n("reconnect attempt:"+R+" max retries:"+N),setTimeout(function(){StackExchange.realtime.init(t)},(new Date).getTime()%50/20*1e3))},M.onerror=function(){n("WebSocket failed"),M=null}}}}function e(){if(null!=M&&1==M.readyState)for(var t=0,e=L.length;e>t;t++)n("sending "+L[t]),M.send(L[t])}function n(t){StackExchange.options.enableLogging&&console.log("realtime: "+t)}function i(){U.addListener("hb",function(t){M.send(t)})}function a(t){L.push(t),e()}function o(t){n("unsubscribing "+t);var e=$.inArray(t,L);-1!=e&&(L.splice(e,1),null!=M&&1==M.readyState&&M.send("-"+t))}function r(t,e){var n=t+"-question-"+e;o(n)}function s(t,e){var n=t+"-question-"+e;a(n),U.addListener(n,function(t){var e=$.parseJSON(t);if(e.acctid!=StackExchange.options.user.accountId)switch(e.a){case"score":m(e);break;case"comment-add":u(e);break;case"answer-add":k(e);break;case"accept":c(e);break;case"unaccept":c(e,!0);break;case"post-edit":S(e)}})}function c(t,e){1!=$("#vote-accepted-"+t.answerid).length&&($(".vote-accepted-on").remove(),e||$('.vote input[value="'+t.answerid+'"]').parent().append($("<span>",{"class":"vote-accepted-on","title":"The question owner accepted this as the best answer","text":"accepted"})))}function u(t){0==$("#comment-"+t.commentid).length&&StackExchange.comments.realtimeMessage(t.id)}function l(t,e,n,i,o,r,s){var c=t+"-"+e;j=n,B=r,a(c),U.addListener(c,function(t){var n=$.parseJSON(t);if(null!=o)for(var a=0;a<o.length;a++)if(-1==$.inArray(o[a],n.tags))return;C(n,i,e),null!=s&&s(n)})}function d(t){var e=t+"-review-dashboard-update";a(e),U.addListener(e,function(t){var e=$.parseJSON(t),n=$('.dashboard-activity[data-review-task="'+e.i+'"]');0==n.find('.dashboard-user[data-user="'+e.u+'"]').length&&(n.find(".dashboard-user:nth-child(6)").remove(),n.css("overflow","hidden"),n.children().css({"left":"-44px"}),n.prepend(e.html).children().animate({"left":0},function(){n.css("overflow","visible")}))})}function p(){if(null!=StackExchange.options.user.accountId){var t=StackExchange.options.user.accountId+"-topbar";a(t),U.addListener(t,function(t){StackExchange.topbar.handleRealtimeMessage(t)})}}function f(){if(null!=StackExchange.options.user.accountId){var t=StackExchange.options.user.accountId+"-inbox";a(t),U.addListener(t,function(t){w(t)})}}function h(t){if(null!=StackExchange.options.user.accountId){var e=t+"-"+StackExchange.options.user.userId+"-reputation";a(e),U.addListener(e,function(t){v(t)})}}function g(t){var e=t+"-suggested-edits-count-update";a(e),U.addListener(e,function(){b()})}function m(t){var e=$('.vote input[value="'+t.id+'"]').siblings(".vote-count-post");e.text()!=t.score&&(e.text(t.score),0==$(":animated").length&&e.fadeTo("fast",.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts())}function v(t){var e=$("#hlinks .reputation-score, .links-container .reputation");e.text()!=t.score&&(0==$(":animated").length&&e.fadeTo("fast",.8).fadeTo("fast",1),e.text(t).attr("title",function(t){return"your reputation: "+t.reputation}({"reputation":t})),e.trigger("reputationchange"))}function b(){$.ajax({"type":"POST","url":"/review/suggested-edit-count","data":{"fkey":StackExchange.options.user.fkey},"dataType":"json","success":function(t){t&&t.count&&x(t.count)}})}function x(t){var e=$(".suggested-edits-count");e.text()!=t&&(0==$(":animated").length&&e.fadeTo("fast",.5).fadeTo("fast",1),e.text(t))}function w(t){$(".unreadCount").remove();var e=$("<a>",{"class":"unreadCount","title":"unread messages in your inbox","text":t}).insertAfter(".genu");$("#portalLink .unreadCount").css({"marginTop":e.css("margin-top"),"opacity":1},2e3),genuwine.setUnreadCount(t)}function k(t){if(0==$("#answer-"+t.answerid).length&&(P.push(t.answerid),StackExchange.cardiologist)){if(StackExchange.cardiologist.isHeartBeating()){var e=StackExchange.helpers.DelayedReaction(y,5e3);e.trigger()}else y();StackExchange.cardiologist.notifiedOfNewAnswer()}}function y(){$("#new-answer-activity").remove(),$("#answers-header").prepend(V)}function S(t){var e=$(".question[data-questionid="+t.id+"], .answer[data-answerid="+t.id+"]"),n=$('<div class="new-post-activity" data-postid="'+t.id+'">an edit has been made to this post; click to load</div>');e.find(".new-post-activity[data-postid="+t.id+"]").length>0||e.prepend(n.click(function(){$(".new-post-activity[data-postid="+t.id+"]").remove(),0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({"postIdsSemiColonDelimited":t.id}),H(e.find(".postcell, .answercell"),t)),$(document).trigger("refreshEdit",t.id)}))}function E(){$("#tabs").show(),$("#new-answer-activity").remove();var t=$("#answers #answers-header"),e=t.find(".answers-subheader h2"),n=parseInt(e.text())+P.length;isNaN(n)&&(n=P.length),e.text(function(t){return 1==t.answerCount?t.answerCount+" Answer":t.answerCount+" Answers"}({"answerCount":n})),$.ajax({"url":"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({"postIdsSemiColonDelimited":P.join(";")})}).done(function(e){var n=$('<div class="dno" />').append(e);n.insertAfter(t).fadeIn(400,function(){n.removeClass("dno"),styleCode(),StackExchange.vote.init($(".question").data("questionid")),n.find(".answer").each(function(){StackExchange.comments.init({"post":$(this)})})})}),StackExchange.question.bindSuggestedEditPopupLinks(),q(),P=[]}function C(t,e,n){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(t.body)||(t.fetch&&$.ajax({"url":"/posts/"+t.id+"/"+n}).done(function(e){t.body=e,O[t.id]={"id":t.id,"body":t.body,"index":(new Date).getTime(),"siteid":t.siteid}}),O[t.id]={"id":t.id,"body":t.body,"index":(new Date).getTime(),"siteid":t.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(W),$(".tag-sponsorship").length>0&&$("#question-mini-list, #questions").css("margin-top","0px"),e&&I())}function T(t,e){return t.index<e.index?-1:t.index>e.index?1:0}function I(){var t=[];for(var e in O)O.hasOwnProperty(e)&&t.push(O[e]);for(var n=t.sort(T),i=0;i<n.length;i++){var a=n[i];$("#question-summary-"+a.id).remove(),$(a.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}_(0),null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,j),styleCode(),q(),$(".new-post-activity").remove(),O={}}function _(t){var e=document.title.replace(/^\(\d*\*?\) /,"");t>0&&(e="("+t+") "+e),window.setTimeout(function(){$(document).attr("title",e)},200)}function q(){for(var t=$("span.relativetime, span.relativetime-clean"),e=0;e<t.length;e++)if(t[e].title){var n=A(t[e].title);n&&(t[e].innerHTML=n)}}function A(t){if(null!=t&&20==t.length){t=t.substr(0,10)+"T"+t.substr(11,10);var e=new Date(t),n=((new Date).getTime()-e.getTime())/1e3+StackExchange.options.serverTimeOffsetSec,i=Math.floor(n/86400);if(!(isNaN(i)||0>i||i>=31))return 0==i&&(2>n&&"just now"||60>n&&(B?function(t){return t.seconds+"s ago"}({"seconds":Math.floor(n)}):function(t){return t.seconds+" secs ago"}({"seconds":Math.floor(n)}))||120>n&&(B?"1m ago":"1 min ago")||3600>n&&(B?function(t){return t.minutes+"m ago"}({"minutes":Math.floor(n/60)}):function(t){return t.minutes+" mins ago"}({"minutes":Math.floor(n/60)}))||7200>n&&(B?"1h ago":"1 hour ago")||86400>n&&(B?function(t){return 1==t.hours,t.hours+"h ago"}({"hours":Math.floor(n/3600)}):function(t){return 1==t.hours?t.hours+" hour ago":t.hours+" hours ago"}({"hours":Math.floor(n/3600)})))}}var M,j,O={},P=[],R=0,L=[],N=10,D=!1,B=!1,U=new EventEmitter,V=function(){var t=Object.keys(P).length;return 0==t&&$("#new-answer-activity").remove(),$('<div id="new-answer-activity">'+function(t){return 1==t.count?t.count+" new answer to this question":t.count+" new answers to this question"}({"count":t})+"</div>").click(function(){StackExchange.realtime.expandAnswers()})},H=function(t,e){return function(n){var i=$(n).filter(".question, .answer"),a=i.find(".postcell, .answercell"),o=t.closest(".question"),r=o.length>0,s=$("h1 a.question-hyperlink"),c=i.data("title"),u=r&&$.trim(s.text())!=c,l=$(".question-status"),d=150,p=function(t,e){return function(){return $.Deferred(function(n){null==e||e()?t.animate({"opacity":0},d).promise().done(function(){n.resolve()}):n.resolve()})}},f=p(s,function(){return u}),h=p(t),g=p(l);$.when(f(),h(),g()).done(function(){u&&s.text(c).animate({"opacity":1},d);var e=function(t,e){return new $.Deferred(function(n){e.css({"opacity":0}),t.replaceWith(e),e.animate({"opacity":1},d,function(){n.resolve()})})};e(t,a).done(function(){styleCode(),StackExchange.question.bindSuggestedEditPopupLinks(),r&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init()});var i=$(n).find(".question-status:last");i.length?(l.length||(l=$("<div>").addClass("question-status").insertAfter(o)),e(l,i)):l.remove()}),window.history.pushState(e,"new post","#"+e.id)}},W=function(){var t=Object.keys(O).length;return _(t),$('<div class="new-post-activity">'+function(t){return 1==t.count?t.count+" question with new activity":t.count+" questions with new activity"}({"count":t})+"</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{"init":t,"expandActiveQuestions":I,"expandAnswers":E,"subscribeToActiveQuestions":l,"subscribeToInboxNotifications":f,"subscribeToQuestion":s,"unsubscribeToQuestion":r,"subscribeToReputationNotifications":h,"subscribeToSuggestedEdits":g,"updateRelativeDates":q,"subscribeToReviewDashboard":d,"subscribeToTopBarNotifications":p}}(),StackExchange.anonymous={};var gauth=function(){return{"informStackAuth":function(t){if(gauth.enabled()){var e=document.domain;"meta."==e.substr(0,5)&&(e=e.substr(4,e.length-4));var n=$.cookie("gauth");if(null==n)return $.cookie("gauth",null,{"path":"/","domain":e}),$.cookie("gauth",null,{"path":"/","domain":document.domain}),void 0;"."!=e.charAt(0)&&(e="."+e),$.cookie("gauth",null,{"path":"/","domain":e}),$.cookie("gauth",null,{"path":"/","domain":document.domain});var i=n.indexOf(":"),a=n.substr(0,i),o=n.substr(i+1),r=t+"/auth/global/write?authToken="+encodeURIComponent(a)+"&nonce="+encodeURIComponent(o);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+r+"'></iframe>")})}},"checkStackAuth":function(t){if(gauth.enabled()){var e=$.cookie("gauthed");if(null==e){$.cookie("gauthed","1",{"path":"/"});var n=function(e){var n=e.origin;if(n==t){if("No Local Storage"==e.data)return gauth.noGAuthStorage(),void 0;if("No Session"==e.data)return gauth.noGAuthSession(),void 0;var i=e.data.substr(0,e.data.indexOf(",")),a=e.data.substr(e.data.indexOf(",")+1);$.post("/users/login/global",{"authToken":i,"nonce":a},function(t){gauth.globallyAuthed(t)},"json")}};window.attachEvent?window.attachEvent("onmessage",n):window.addEventListener("message",n,!1),$.post("/users/login/global/request","",function(e){var n=t+"/auth/global/read?request="+encodeURIComponent(e.token)+"&nonce="+encodeURIComponent(e.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+n+"'></iframe>")})},"json")}}},"enabled":function(){return $.cookie("enabledCheck","1"),null==$.cookie("enabledCheck")?!1:($.cookie("enabledCheck",null),"undefined"==typeof localStorage?!1:!0)},"noGAuthStorage":function(){},"noGAuthSession":function(){},"globallyAuthed":function(t){if(t&&t.Message){var e=t.Message;t.MessageType&&"WelcomeBack"===t.MessageType&&(e=function(t){return"Welcome back, "+t.userLink+". You've been logged in."}({"userLink":t.UserLink}));var n,i=e+" ",a=!1,o=""+window.location,r=o.indexOf("returnurl=");if(-1!=r){var s=o.indexOf("&",r);-1==s&&(s=o.length),n=decodeURIComponent(o.substring(r+"returnurl=".length,s)),n=/^(?:http:\/\/|\/)/.test(n)?n.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=o.indexOf("/users/login")&&(a=!0,n=n||"/"),i+=a?"<br>You are being redirected...":n?function(t){return'<a href="'+t.url+'">Click here</a> to return to your last location.'}({"url":"javascript:window.location='"+n+"'"}):function(t){return'<a href="'+t.url+'">Click here</a> to refresh the page.'}({"url":"javascript:location.reload(true)"}),StackExchange.helpers.showFancyOverlay({"message":i,"showClose":!a,"complete":function(){a&&(window.location=n)}})}}}}(),genuwine=function(){var t,e,n,i="",a=[],o=function(){return $(".genu").hasClass("genu-on")},r=function(){var t=$(".genu"),i=$("#seWrapper");if(0==i.length||e>0||n){c(),i=$("#seWrapper");var o;e>0?(o=$("#seTabInbox"),x(o)):n?(o=$("#seTabNotices"),l(o)):(o=$("#seTabHot"),h(o)),o.addClass("seCurrent")}var u=t.hasClass("genu-on");if(u){$(".unreadCountTab").remove(),$("#portalLink .itemBoxNew").removeClass("itemBoxNew"),i.fadeOut("fast");for(var d=0;d<a.length;d++)a[d]();a=[],n>0&&$("#portalLink .unreadCount").text(""+n).addClass("newNotices").show().click(r)}else i.fadeIn("fast"),$("#portalLink .unreadCount").hide();t.toggleClass("genu-on",!u),-1==e&&$(t).ready(function(){$("#seTabInbox").hide()}),s($("#seTabInbox"),$("#seTabNotices"))},s=function(t,i){StackExchange.options.site.isNoticesTabEnabled&&n&&0==i.find(".unreadCountTab").length&&i.prepend('<span class="unreadCountTab newNotices">'+n+"</span>"),e>0&&0==t.find(".unreadCountTab").length&&t.prepend('<span class="unreadCountTab">'+e+"</span>")},c=function(){$("#seWrapper").remove();var t='<div id="seWrapper" class="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+i+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li>'+(StackExchange.options.user.isAnonymous?"":'<li><a id="seTabInbox">Inbox</a></li>')+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter"><a id="seClose">close</a></div></div>',e=$("#hlinks"),n=e.height()+e.offset().top+5;$(t).appendTo("#portalLink").css({"top":n}).find("ul.seNavLinks a").click(function(){u($(this))}),$("#seClose").click(function(){r()})},u=function(t){switch($(".seNavLinks a").removeClass("seCurrent"),t.addClass("seCurrent"),t.attr("id")){case"seTabHot":h(t),$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide(),$("#seContainerHot").fadeIn("fast");break;case"seTabSites":v(t),$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide(),$("#seContainerSites").fadeIn("fast");break;case"seTabInbox":x(t),$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide(),$("#seContainerInbox").fadeIn("fast");break;case"seTabNotices":l(t),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}},l=function(t){0==$("#seContainerNotices").length&&d(t)},d=function(t){S(t,"/notices/genuwine","json",p,!0)},p=function(t,e){for(var i='<div id="seContainerNotices" style="display:none">',o=0;o<e.length;o++){var r=e[o],c=r.text,u=r.is_unread,l=(r.created,r.site_url),d=r.icon,p=r.hasOwnProperty("type")?' data-type="'+r.type.toString()+'"':"";null!=r.switch_type&&(p=p+' data-sw-type="'+r.switch_type.toString()+'" data-sw-site="'+r.site_id.toString()+'"'),i+='<div class="noticeBox'+(u?" itemBoxNew":"")+'"'+p+'><a href="'+l+'" class="siteLinkFavicon"><img src="'+d+'"></a><div class="siteInfo"><p>'+c+"</p></div></div>"}i+="</div>",E(t,i,"notifications_popup.click"),a.push(function(){n=0,s($("#seTabInbox"),$("#seTabNotices"))}),n=0},f=function(e){var n=document.location.host;S(e,i+"/genuwine/sites?callback=?&host="+n+(t?"&accountId="+t:""),"jsonp",b)},h=function(t){0==$("#seContainerHot").length&&g(t)},g=function(t){S(t,i+"/genuwine?callback=?","jsonp",m)},m=function(t,e){for(var n=$("<div/>"),i='<div id="seContainerHot" style="display:none">',a=0;a<e.length;a++){var o=e[a],r=o.SiteId,s='href="http://'+r+"/q/"+o.Id+'?hq=1"',c=parseInt(o.DisplayScore,10);i+='<div class="itemBox" data-sw-type="2" data-sw-name="'+r+'"><a '+s+' class="seNumAnswer">'+c+'</a><div class="siteInfo"><p><a '+s+">"+n.text(o.Title).html()+'</a></p><a href="http://'+r+'" class="siteLink">'+r+"</a></div></div>"}i+="</div>",E(t,i)},v=function(t){0==$("#seContainerSites").length&&f(t)},f=function(e){var n=document.location.host;S(e,i+"/genuwine/sites?callback=?&host="+n+(t?"&accountId="+t:""),"jsonp",b)},b=function(t,e){for(var n='<div id="seContainerSites" style="display:none">',i=0;i<e.length;i++){var a=e[i],o=a.Name,r='href="http://'+a.Id+'?as=1"';n+='<div class="itemBox" data-sw-type="3" data-sw-name="'+a.Id+'"><a '+r+' class="siteFavicon"><img src="'+a.FaviconUrl+'" alt="'+o+'"></a><div class="siteInfo"><p><a '+r+">"+o+"</a></p><a "+r+' class="siteLink">'+a.Description+"</a></div></div>"}n+="</div>",E(t,n)},x=function(t){-1!=e&&(0==$("#seContainerInbox").length||e>0)&&w(t)},w=function(t){S(t,"/inbox/genuwine","json",k,!0)},k=function(n,i){for(var o='<div id="seContainerInbox" style="display:none">',r=0;r<i.length;r++){var c=i[r],u='href="'+c.Url+'"',l='title="'+c.CreationDate+'"',d=c.Count,p=c.IsNew?" itemBoxNew":"",f=c.hasOwnProperty("ItemType")?' data-type="'+c.ItemType.toString()+'"':"";if(null!=c.SiteId&&(f=f+' data-sw-type="7" data-sw-site="'+c.SiteId.toString()+'"'),o+='<div class="itemBox'+p+'"'+f+"><a "+u+' class="siteLinkFavicon"><img src="'+c.FaviconUrl+'" alt="'+c.SiteUrl+'"></a><div class="siteInfo">',"careers message"==c.Type)o+="<p><a "+u+' style="font-weight:normal"><b>'+c.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>";else if("invitation"==c.Type){var h=c.Count,g="invitation"+(h>1?"s":"");o+="<p><a "+u+' style="font-weight:normal"><b>'+h+"</b> "+g+" awarded on <b>Stack Overflow Careers</b></a></p>"}else o+="<p>"+(d>1?d+" ":"")+c.Type+" on <a "+u+" "+l+">"+c.Title+"</a></p>";o+='<p class="inboxSummary">'+(c.Summary||"")+"</p></div></div>"}t&&i.length>=5&&(o+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+t+'?tab=inbox">more inbox messages &hellip;</a></div></div>'),o+="</div>",E(n,o,"inbox_popup.click"),a.push(function(){e=0,s($("#seTabInbox"),$("#seTabNotices"))}),e=0},y={},S=function(t,e,n,i,a){var o=t.attr("id");if(y[o])return C(),void 0;y[o]=!0,C();var r=function(){y[o]=!1,StackExchange.helpers.showErrorMessage($("#seWrapper .seContainer"),"An error occurred while loading - please try again.")};$.ajax({"type":"GET","url":e,"dataType":n,"success":function(e){y[o]=!1,e&&(e.length>0||a)?i(t,e):r()},"error":r,"complete":function(){$("#seWrapper .seContainer").removeSpinner()}})},E=function(t,e,n){var i=$(e);i.prependTo("#seWrapper .seContainer"),i.find(".itemBox a, .noticeBox a").click(function(){var t=$(this).closest(".itemBox, .noticeBox");n&&n.length&&StackExchange.gps.track(n,{"item_type":t.data("type")});var e=t.data("sw-type"),i=t.data("sw-site"),a=t.data("sw-name");null==e||null==i&&null==a||StackExchange.gps.track("site.switch",i?{"item_type":e,"target_site":i}:{"item_type":e,"target_name":a})}),t.hasClass("seCurrent")&&i.fadeIn("fast")},C=function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.addSpinner("#seWrapper .seContainer",{"position":"relative","left":"10px","top":"10px"})},T=function(){var t=$("#portalLink .unreadCount"),e=t.css("margin-top");t.css({"marginTop":-20,"opacity":0}).show().animate({"marginTop":e,"opacity":1},2e3)},I=function(t){e=t;var n=$("#seTabInbox");t>0?($("#portalLink .unreadCount").text(e),n.hasClass("seCurrent")&&o()&&w(n),T()):$("#portalLink .unreadCount").text("").hide(),$("#portalLink .unreadCount").removeClass("newNotices"),q()},_=function(t){n=t,e>0||!StackExchange.options.site.isNoticesTabEnabled||(n>99&&(n=99),n>0&&$("#portalLink .unreadCount").text(""+n).addClass("newNotices"),q())},q=function(){var t=$("#portalLink .unreadCount"),e=t.data("events");e&&e.click||t.length>0&&t.click(r)};return{"isVisible":o,"click":r,"setUnreadCount":I,"animateInbox":T,"init":function(n,a,s){var c=$(".genu");c.length>=1&&(c[0].onclick=null),t=n,i=c.attr("href"),e=a,_(s),c.removeAttr("href").click(r),q(),$(document).click(function(t){o()&&!$.contains($("#portalLink")[0],t.target)&&r()})}}}();StackExchange.topbar=function(){function t(t){StackExchange.options.enableLogging&&console.log("topbar: "+t)}function e(t){for(var e=0;e<m.length;e++){var n=m[e].$button;if(n&&n[0]==t)return!0}return!1}function n(){for(var t=0;t<m.length;t++)m[t].toggle(!1)}function i(e){var n;if(e&&(n=JSON.parse(e))){t("realtime message - "+e);for(var i in n)for(var a=0;a<m.length;a++)if(i==m[a].name){m[a].handleRealtimeMessage(n[i]);break}}}var a=klass({"name":"","url":"","cssClass":"","button":null,"$dialog":null,"$loadingPlaceholder":null,"$preloadedDialog":null,"hasRead":!1}).statics({"$corral":$(".js-topbar-dialog-corral")}).methods({"isLoading":function(){return null!=this.$loadingPlaceholder},"isLoaded":function(){return null!=this.$dialog},"isVisible":function(){var t=this.$dialog||this.$loadingPlaceholder;return null!=t&&t.is(":visible")},"toggle":function(t,e){if("boolean"!=typeof t)throw new Error("showOrHide is a required parameter");if(!t){if(this.isLoading())return this.showOrHide(!1),void 0;if(!this.isLoaded())return}if(this.isLoaded()||this.isLoading()?(t||e||!this.hasRead||this.markAsRead(),this.showOrHide(t)):this.$preloadedDialog?this.loadChildContent():this.loadDialog(),t)for(var n=0;n<m.length;n++)this.button!=m[n]&&m[n].toggle(!1,e)},"showOrHide":function(t){var e=this.$dialog||this.$loadingPlaceholder;e&&e.toggle(t),t&&this.$dialog&&(this.hasRead=!0)},"loadChildContent":function(){var t=this.$preloadedDialog.find(".child-content");if(this.$dialog=this.$preloadedDialog,this.positionDialogUnderButton(),this.showOrHide(!0),this.url){$("<div>",{"class":"child-content-loading"}).addSpinner().appendTo(t);var e=this;this.fetchUrl().done(function(n){t.html(n),e.afterLoad()})}},"loadDialog":function(){if(!this.isLoading()){this.$loadingPlaceholder=this.getLoadingPlaceholder().appendTo(a.$corral),this.positionDialogUnderButton(),this.showOrHide(!0);var t=this;this.fetchUrl().done(function(e){t.$dialog=$(e).appendTo(a.$corral),t.afterLoad();var n=t.$loadingPlaceholder.is(":visible");t.positionDialogUnderButton(),t.showOrHide(n)}).always(function(){t.$loadingPlaceholder.remove(),t.$loadingPlaceholder=null})}},"afterLoad":function(){this.$dialog.find(".js-close-button").click(function(){StackExchange.topbar.hideAll()}),StackExchange.gps.bindTrackClicks(this.$dialog)},"getLoadingPlaceholder":function(){var t=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html(),e=['<div class="topbar-dialog ',this.cssClass,' dno">','<div class="header">',t,"</div>",'<div class="modal-content"/>',"</div>"];return $(e.join(""))},"positionDialogUnderButton":function(){var t=this.button.$button.outerHeight(),e=this.button.$button.offset().left-m[0].$button.offset().left;(this.$dialog||this.$loadingPlaceholder).css({"top":t,"left":e})},"fetchUrl":function(){t("fetching "+this.url);var e=$.ajax({"type":"GET","url":this.url,"dataType":"html"});return e},"markAsRead":function(){this.button.markAsRead(),this.isLoaded()&&this.$dialog.find(".unread-item").removeClass("unread-item")},"handleRealtimeMessage":function(){this.clearLoadedDialog()},"clearLoadedDialog":function(){this.isLoaded()&&(this.$dialog.remove(),this.$dialog=null,this.hasRead=!1)}}),o=klass({"name":"","selector":"","dialog":null,"$button":null,"onClass":"","unreadCountPrefix":"","queuedUnreadCount":0,"showsOnMouseOver":!1}).methods({"initialize":function(){this.dialog.name=name,this.dialog.button=this,v.push(this.dialog);var t=this;this.$button=$(this.selector),this.$button.click(function(){return t.toggle(),!1}),this.showsOnMouseOver&&this.$button.mouseover(function(){t.showOnMouseOver()}),this.onClass="topbar-icon-on"+(this.onClass?" ":"")+this.onClass},"toggle":function(t,e){t="boolean"==typeof t?t:!this.$button.hasClass(this.onClass),this.$button.toggleClass(this.onClass,t),this.dialog.toggle(t,e)},"showOnMouseOver":function(){for(var t=!1,e=0;e<m.length;e++){var n=m[e];if(n!=this&&n.showsOnMouseOver&&n.isOn()){t=!0;break}}t&&this.toggle(!0,!0)},"isOn":function(){return this.$button.hasClass(this.onClass)},"markAsRead":function(){this.$button.find(".unread-count").fadeOut();var t=this.$button.data("unread-class");t&&this.$button.removeClass(t),this.dequeuePendingUnreadCount()},"dequeuePendingUnreadCount":function(){this.queuedUnreadCount&&(this.setUnreadCount(this.queuedUnreadCount),this.queuedUnreadCount=0,this.dialog.clearLoadedDialog())},"setUnreadCount":function(t){if(void 0===t);else if(0>=t)this.queuedUnreadCount=0,this.isOn()||this.markAsRead();else if(t>0)if(this.isOn())this.queuedUnreadCount=t;else{var e=this.$button.find(".unread-count");e.text(this.unreadCountPrefix+t).fadeIn(),this.addUnreadClass(),this.dialog.clearLoadedDialog()}},"addUnreadClass":function(){var t=this.$button.data("unread-class");t&&this.$button.addClass(t)},"handleRealtimeMessage":function(){}}),r=a.extend({"url":"/topbar/site-switcher/site-list","cssClass":"siteSwitcher-dialog","$searchItems":null,"$pinnedSiteSearchItems":null,"isPreloaded":!0,"$preloadedDialog":a.$corral.find(".siteSwitcher-dialog")}).methods({"afterLoad":function(){this.$dialog.find("#js-site-filter-txt").typeWatch({"highlight":!1,"wait":250,"captureLength":-1,"callback":$.proxy(this.filterSites,this)}),this.$searchItems=this.$dialog.find(".js-other-sites li").clone().map(function(){return{"title":$(".site-icon",this).attr("title").toLowerCase(),"description":$(".site-desc",this).text().toLowerCase(),"hostname":$("a",this).first().attr("href"),"li":this}});var t=this.$dialog;this.$dialog.find("#js-site-filter-txt").focus(function(){var e=t.offset().top+t.height(),n=t.find(".other-sites li:nth-child(2)"),i=n.offset().top+n.height();i>e&&t.animate({"scrollTop":t.scrollTop()+i-e},750)}),!StackExchange.options.user.isAnonymous&&$(".pinned-site-editor-container").length&&($(".js-found-sites").css({"width":$("#js-site-search-txt").outerWidth()}),$(".js-found-sites").hide(),this.$dialog.find("#js-site-search-txt").typeWatch({"highlight":!1,"wait":100,"captureLength":-1,"callback":$.proxy(this.findSitesToPin,this)}),this.$dialog.find("#edit-pinned-sites").click($.proxy(this.editPinnedSites,this)),this.$dialog.find("#cancel-pinned-sites").click({"forceListRefresh":$("#save-pinned-sites-btn").is(":enabled")},this.cancelSiteListEdits),this.$dialog.find("#pin-site-btn").click($.proxy(this.pinSite,this)),this.$dialog.on("click",".remove-pinned-site-link",function(){return $(this).parent().remove(),$("#save-pinned-sites-btn").enable(),$("#reset-pinned-sites").show(),!1}),this.$dialog.find("#save-pinned-sites-btn").click($.proxy(this.savePinnedSites,this)),this.$dialog.find("#reset-pinned-sites").click($.proxy(this.resetPinnedSites,this))),this.supr()
},"showOrHide":function(t){this.supr(t)},"pinSite":function(){$("#pin-site-btn").disable();var t=$("#js-site-search-txt").val(),e=$.grep(this.$pinnedSiteSearchItems,function(e){return e.sitename===t});if(!e.length)return $("#pin-site-btn").enable(),void 0;var n=e[0],i=$(".pinned-site-link").map(function(t,e){return $(e).data("id")}).toArray();if(i.indexOf(n.siteid)>-1)return $("#pin-site-btn").enable(),void 0;var a=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/pin-site","data":{"siteId":n.siteid},"dataType":"html"}).done(function(t){var e=$(t);e.hide(),$(".pinned-site-list").append(e),e.fadeIn("slow"),$("#js-site-search-txt").val(""),$("#save-pinned-sites-btn").enable(),a.toggleSiteListResetLink(!0)}).fail(function(){$("#pin-site-btn").parent().showErrorMessage("Something bad happened; please try again"),$("#pin-site-btn").enable()})},"savePinnedSites":function(){var t=$(".pinned-site-list li .pinned-site-link").map(function(t,e){return $(e).data("id")}).toArray(),e=!$("#reset-pinned-sites").is(":visible")||!t.length;return this.toggleSiteListResetLink(!e),$.ajax({"type":"POST","url":"/topbar/site-switcher/save-pinned-sites","data":{"siteIds":e?[]:t,"fkey":StackExchange.options.user.fkey},"dataType":"html","traditional":!0}).done($.proxy(function(t){$(".my-sites").html(t),this.cancelSiteListEdits(!1),$(".pinned-site-list").data("custom-list",!e),StackExchange.using("gps",function(){StackExchange.gps.track("site_switcher.edit",{})})},this)).fail(function(){$("#save-pinned-sites-btn").parent().showErrorMessage("Something bad happened; please try again")}),!1},"resetPinnedSites":function(){var t=this;return $.ajax({"type":"GET","url":"/topbar/site-switcher/default-active-sites","dataType":"html"}).done(function(e){$(".pinned-site-list").html(e),$("#save-pinned-sites-btn").enable(),t.toggleSiteListResetLink(!1)}).error(function(){$("#reset-pinned-sites").parent().showErrorMessage("Something bad happened; please try again")}),!1},"doSearch":function(t,e,n){var i;e=e.toLowerCase();var a=[];return $.each(t,function(t,n){var i={"index":t,"li":n.li,"item":n},o=n.title.indexOf(e);n.title==e?i.priority=1:0==o?i.priority=2:o>-1?i.priority=3:n.description.indexOf(e)>-1?i.priority=4:n.hostname.indexOf(e)>-1&&(i.priority=5),i.priority&&a.push(i)}),i=a.sort(function(t,e){return t.priority-e.priority||t.index-e.index}),n&&StackExchange.using("gps",function(){StackExchange.gps.track("sitesearch.submit",{"term":e,"numresults":a.length},!1)}),i},"_findSitesToPin":function(t){var e=$(".js-found-sites"),n=this.$pinnedSiteSearchItems;if(e.empty(),""===t)return e.hide(),$("#pin-site-btn").disable(),void 0;if(n=this.doSearch(n,t,!1),n.length){e.show(),$("#pin-site-btn").enable();var i=$(".pinned-site-link").map(function(t,e){return $(e).data("id")}).toArray();$.each(n,function(t,n){var a=$('<li class="pinned-site-candidate">'+n.item.sitename+"</li>");i.indexOf(n.item.siteid)>-1?a.addClass("already-pinned-site"):a.click(function(){var t=$(this).text();return $("#js-site-search-txt").val(t),$(".js-found-sites").hide(),!1}),a.appendTo(e)})}},"findSitesToPin":function(t){if(this.$pinnedSiteSearchItems)return this._findSitesToPin(t),void 0;var e=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/all-pinnable-sites","dataType":"json"}).done(function(n){e.$pinnedSiteSearchItems=n,e._findSitesToPin(t)})},"filterSites":function(t){var e=$(".js-other-sites"),n=this.$searchItems;e.empty(),""!=t&&(n=this.doSearch(n,t,!0)),e.append(n.map(function(t){return this&&this.li||t.li}))},"editPinnedSites":function(){$(".header").not("#your-communities-header").css("opacity",.2),$(".modal-content").not("#your-communities-section").css("opacity",.2),$(".my-sites").hide(),$(".pinned-site-editor-container").show(),$("#edit-pinned-sites").hide(),$("#cancel-pinned-sites").show();var t=$(".pinned-site-list");if(""===t.html().trim()){var e=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html();t.append('<li style="text-align:center;">'+e+"</li>"),$.ajax({"type":"GET","url":"/topbar/site-switcher/current-pinned-sites","dataType":"html"}).done(function(e){t.html(e)}).fail(function(){t.showErrorMessage("Something bad happened; please try again")}).always(function(){t.find(".ajax-loader").remove()})}this.toggleSiteListResetLink("true"===t.data("custom-list").toString().toLowerCase());var n=$(".sortable"),i=this;return n.data("isSortable")||StackExchange.loadJqueryUi().done(function(){n.sortable({"axis":"y","update":function(){$("#save-pinned-sites-btn").enable(),i.toggleSiteListResetLink(!0)}}).disableSelection().data("isSortable",!0)}),!1},"toggleSiteListResetLink":function(t){$("#reset-pinned-sites").toggle(t)},"cancelSiteListEdits":function(t){return $(".header").not("#your-communities-header").css("opacity",1),$(".modal-content").not("#your-communities-section").css("opacity",1),$(".my-sites").show(),$("#edit-pinned-sites").show(),$(".pinned-site-editor-container").hide(),$("#cancel-pinned-sites").hide(),$("#save-pinned-sites-btn").disable(),t&&($(".pinned-site-list").empty(),$(".js-found-sites").hide(),$("#js-site-search-txt").val(""),$("#pin-site-btn").disable()),!1}}),s=o.extend({"name":"SiteSwitcher","selector":".js-site-switcher-button","dialog":new r,"showsOnMouseOver":!0,"onClass":"icon-site-switcher-on"}),c=a.extend({"url":"/topbar/inbox","cssClass":"inbox-dialog"}),u=o.extend({"name":"Inbox","selector":".js-inbox-button","dialog":new c,"showsOnMouseOver":!0}).methods({"handleRealtimeMessage":function(t){this.setUnreadCount(t.UnreadInboxCount)}}),l=a.extend({"url":"/topbar/achievements","cssClass":"achievements-dialog"}).methods({"afterLoad":function(){this.alignRep(),this.bindDateGroupToggles(),this.displayUtcTime(),this.bindGpsTracker(),this.supr()},"alignRep":function(){var t=this.$dialog.find(".js-items .js-faux-column"),e=0;t.filter(".js-rep-change").each(function(){var t=$.trim($(this).text()).length;t>e&&(e=t)}),e>0&&t.width(6*(e+1))},"bindDateGroupToggles":function(){this.$dialog.find(".js-date-group-toggle").click(function(){var t=$(this),e=t.closest(".js-date-group"),n=e.find(".js-items"),i=e.find(".rep-site-container");t.find(".date-group-toggle").toggleClass("toggle-hidden"),n.add(i).fadeToggle("fast")}),this.$dialog.find(".rep-site-container").on("click",function(t){t.stopImmediatePropagation()})},"displayUtcTime":function(){var t=this.$dialog,e=function(){var e=new Date;e.setTime(e.getTime()+1e3*StackExchange.options.serverTimeOffsetSec);var n=e.getUTCHours(),i=e.getUTCMinutes();10>n&&(n="0"+n),10>i&&(i="0"+i),t.find(".js-utc-time").text(n+":"+i)};e(),setInterval(e,6e4)},"bindGpsTracker":function(){var t=$("#js-gps-container.js-empty-achiev");t.find("a:first").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:6 })"),t.find("a:last").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:7 })"),StackExchange.gps.bindTrackClicks(t)}}),d=o.extend({"name":"Achievements","selector":".js-achievements-button","dialog":new l,"unreadCountPrefix":"+","showsOnMouseOver":!0}).methods({"handleRealtimeMessage":function(t){var e=0===(t.UnreadRepCount||0)&&t.UnreadNonRepCount>0;e?this.addUnreadClass():this.setUnreadCount(t.UnreadRepCount)}}),p=a.extend({"cssClass":"help-dialog"}).methods({"loadDialog":function(){this.$dialog=$(".js-help-dialog").appendTo(a.$corral),this.positionDialogUnderButton(),this.showOrHide(!0)}}),f=o.extend({"name":"Help","selector":".js-help-button","dialog":new p}),h=a.extend({"url":"/topbar/mod-inbox","cssClass":"modInbox-dialog"}).methods({}),g=o.extend({"name":"ModInbox","selector":".js-mod-inbox-button","dialog":new h}),m=[],v=[];return{"init":function(){window.devicePixelRatio>=1.5&&$(".js-avatar-me").attr("src",function(t,e){return e.replace("?s=24","?s=48")}),m.push(new s),m.push(new u),m.push(new d),m.push(new f),StackExchange.options.user.isModerator&&m.push(new g),$(document).click(function(t){e(t.target)||$.contains(a.$corral[0],t.target)||n()})},"hideAll":n,"handleRealtimeMessage":i}}(),StackExchange.notify=function(){function t(t,e){var n=$("#dismissed-messages");n.val(n.val()+"~"+t+(e?" "+e:"")+"~")}function e(t,e){var n=$("#dismissed-messages").val();return n?new RegExp("~"+t+(e?" "+e:"")+"~").test(n):!1}function n(t,e,n){var i=parseInt($("body").css("margin-top").match(/\d+/)),a=e*i/t;n?$("body:not(.no-message-slide)").animate({"marginTop":a+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",a+"px")}var i=0,a=-1,o="m",r=function(e,o){var r=$("#notify-"+e+(o?"-"+o:""));e==a?c():e>a&&$.post("/messages/mark-as-read",{"messagetypeid":e,"id":o?o:null}),t(e,o),i--,r.fadeOut("fast",function(){n(i+1,i,!0),r.remove()})},s=function(t){if(i++,e(t.messageTypeId,t.id))return!1;var n="";t.messageTypeId&&(n=' id="notify-'+t.messageTypeId+(t.id?"-"+t.id:"")+'"');var a="<div"+n+' style="display:none"><span class="notify-close">'+$("<a>&times;</a>").attr("title","dismiss this notification").outerHTML()+'</span><span class="notify-text">'+t.text+"</span>";if(t.showProfile){var o=encodeURIComponent("/users/"+t.userId+"?tab=badges&sort=recent");a+=" "+function(t){return'See your <a href="'+t.url+'">profile</a>.'}({"url":"/messages/mark-as-read?messagetypeid="+t.messageTypeId+"&returnurl="+o})}a+="</div>";var s=$(a);return s.find(".notify-close").click(function(){t.close&&t.close(),r(t.messageTypeId,t.id)}),$("#notify-container").append(s),!0},c=function(t){$.cookie(o,t?t:"0",{"expires":90,"path":"/"})},u=function(){$("#notify-container div").fadeIn("slow")},l=function(){$("body:not(.no-message-slide)").animate({"marginTop":"2.5em"},"fast","linear")},d=function(t,e){var n=$('<div class="link-more">').append($("<a>").text(function(t){return 1==t.numNotifications?"view "+t.numNotifications+" more notification":"view "+t.numNotifications+" more notifications"}({"numNotifications":t})));$("#notify-container").append(n),n.click(function(){n.detach();for(var t=0;t<e.length;t++)s(e[t]);u()})};return{"showMessages":function(t,e){for(var a=0,o=e?2:t.length,r=0;o>r&&r<t.length;r++)s(t[r])&&a++;if(n(i,a,!1),u(),e&&a<t.length){var c=t.slice(o);d(t.length-a,c)}},"show":function(t,e){l(),s({"text":t,"messageTypeId":e}),u()},"close":r,"getMessageText":function(t){return $("#notify-"+t+" .notify-text").text()}}}();var styleCode=function(){function t(t){var e=$("#prettify-lang").text();return""!=e?(t.addClass(e),!0):!1}return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),StackExchange.ifUsing("snippets",function(){StackExchange.snippets.redraw&&StackExchange.snippets.redraw()});var e=!1;if($("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),e=!0),$(this).hasClass("prettyprint")||t($(this))&&($(this).addClass("prettyprint"),e=!0)}),e){if("undefined"!=typeof jtab)return jtab.renderimplicit(),void 0;StackExchange.using("prettify",function(){StackExchange.prettify.applyCodeStyling()})}$(".spoiler").click(function(){$(this).toggleClass("spoiler")})}}();styleCode.updateLangdivDelayed=StackExchange.helpers.DelayedReaction(function(t){var e=$("#prettify-lang");e.length&&$.get("/api/tags/langdiv",{"tags":t.join(" ")}).done(function(t){t?e.replaceWith(t):e.empty(),StackExchange.MarkdownEditor.refreshAllPreviews(),styleCode()})},1500,{"sliding":!0}),StackExchange.helpers.MagicPopup=function(t){function e(e,i){var o=$("<div id='"+t.id+"'/>").html(i),r=$("<div />").css({"overflow":"hidden","position":"absolute","z-index":1002,"width":1,"height":1,"top":0,"left":0}).append(o).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(o.attr("id"));var s=t.showing(e,o),c={"left":s.left};s.hasOwnProperty("bottom")?(c.bottom=s.bottom,c.top="auto"):c.top=0|s.top;var u;t.shown&&(u=function(){t.shown(e,o)}),r.css(c).animate({"height":o.outerHeight()+8,"width":o.outerWidth()+8},300,u),n=function(){r.stop().remove(),t.removed&&t.removed(e,o),a=null,n=null},a=StackExchange.helpers.DelayedReaction(n,5);var l=r;s.additional&&(l=l.add(s.additional)),l.hover(a.cancel,a.trigger)}var n,i,a,o,r={},s=StackExchange.helpers.DelayedReaction(function(i,a){if(!o&&i){var s;t.cache&&"c_"+i in r?s=$.Deferred().resolve(r["c_"+i]):(s=$.ajax({"type":"GET","url":i,"dataType":"html"}),t.cache&&s.done(function(t){r["c_"+i]=t})),s.done(function(t){n&&n(),""!=t&&e(a,t)})}},500);$(document).delegate(t.selector,{"mouseenter":function(){return a&&this===i?(a.cancel(),void 0):(i=this,s.trigger(t.getUrl(this),this),o=!1,!1)},"mouseleave":function(){o=!0,s.cancel(),a&&a.trigger()}})},StackExchange.tagmenu=function(){function t(t){var e=$(t),n=e.attr("href");if(!n||"/"!=n.charAt(0))return null;var i=e.text();return i.indexOf("*")>-1?null:(e.attr("title",""),"/tags/"+encodeURIComponent(i)+"/subscriber-info")}function e(t,e){var n=$(t),i=n.offset(),a=n.outerHeight(),o={"left":i.left},r=i.top+a,s=i.left+e.outerWidth();e.height()+r>$(window).height()+$(window).scrollTop()?o.bottom=$(window).height()-i.top-8:o.top=r;var c=Math.max(1024,$(window).width());return s>c&&(o.left-=s-c),o}var n,i,a=function(a){n=a,i||(i=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({"selector":".post-tag:not(.user-tag,.no-tag-menu)","id":"tag-menu","getUrl":t,"showing":e,"shown":function(t,e){n&&n(e,$(t).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))};return{"init":a}}(),StackExchange.usermenu=function(){function t(t,e){var n=$(t),i=n.find("img:first"),o=i.offset(),r=i.height(),s=i.width(),c=Math.max(s,r),u=64*r/c,l=64*s/c,d=e.find("img:first").css({"width":l,"height":u}),p=d.offset();d.css("visibility","hidden"),a=i.clone().css({"position":"absolute","zIndex":1003,"left":o.left,"top":o.top,"width":s,"height":r}).appendTo("body");var f=function(){return d[0].complete?(d.css("visibility","visible"),a.fadeOutAndRemove(),void 0):(setTimeout(f,100),void 0)};return a.animate({"width":l,"height":u,"top":o.top+p.top},200,f),e.trigger("userhovershowing",t),{"top":o.top,"left":o.left-p.left,"additional":a}}function e(t,e){e.trigger("userhovershown")}function n(t){$(t).trigger("userhoverremoved"),a.remove()}var i,a,o=function(){function a(t){var e=$(t),n=e.closest(".user-hover"),i=n.find(".user-details a").attr("href"),a=new RegExp("/users/([^/]+).*$"),o=a.exec(i);return o?"/users/user-info/"+o[1]:null}i||(i=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({"selector":".user-hover .user-gravatar48, .user-hover .user-gravatar32","getUrl":a,"cache":!0,"id":"user-menu","showing":t,"shown":e,"removed":n}))};return{"init":o}}(),StackExchange.chatAd=function(){function t(){var t=$(".question .post-taglist .post-tag");return t.length?t.map(function(t,e){return $(e).text()}).get().join(" "):null}function e(t){return 10>t?"0"+t:t}function n(t){var n=new Date;return n.setTime(1e3*t),[n.getUTCFullYear(),"-",e(n.getUTCMonth()+1),"-",e(n.getUTCDate())," ",e(n.getUTCHours()),":",e(n.getUTCMinutes()),":",e(n.getUTCSeconds()),"Z"].join("")}function i(t){var n=Math.floor((new Date).getTime()/1e3),i=n-t,a=i%60,o=Math.floor(i/60),r=Math.floor(i/3600);if(1>i)return"just now";if(60>i)return function(t){return 1==t.seconds?t.seconds+" sec ago":t.seconds+" secs ago"}({"seconds":a});if(3600>i)return function(t){return 1==t.minutes?t.minutes+" min ago":t.minutes+" mins ago"}({"minutes":o});if(86400>i)return function(t){return 1==t.hours?t.hours+" hour ago":t.hours+" hours ago"}({"hours":r});var s=Math.floor(i/86400);if(1==s)return"yesterday";if(2>=s)return function(t){return t.days+" days ago"}({"days":s});var c=new Date(1e3*t);return function(t){return t.month+" "+t.date+" at "+t.hours+":"+t.minutes}({"month":v[c.getMonth()],"date":c.getDate(),"hours":c.getHours(),"minutes":e(c.getMinutes())})}function a(t){var e=$("<div />");return e.text(t),e.html().replace('"',"&quot;")}function o(){f&&$.get(f,null,function(t,e,n){d(t,e,n)})}function r(t){if("!"==t.charAt(0)){var e=t.substr(1);if(/^https?:\/\/i.stack.imgur.com\//.test(e)){var n=/\?/.test(e)?"&":"?";e+=n+"g&s=32"}return e}return"https://www.gravatar.com/avatar/"+t+"?s=23&d=identicon&r=PG"}function s(t){for(var e=$('<div class="ad502-users" />'),n=0;n<t.length&&7>n;n++){var a=t[n],o=a.name;a.lastPost&&(o+=": "+i(a.lastPost));var s=p+"/users/"+a.id,c=$('<a href="'+s+'" />');$("<img height='23' width='23' />").attr("title",o).attr("src",r(a.emailhash)).appendTo(c),e.append(c)}return e}function c(t){return $('<div class="ad502-users"><img src="'+p+"/rooms/users/"+t+'.jpeg" /></div>')}function u(t){var e=t.user,n=t.userid;return n?'<a href="'+p+"/users/"+n+'">'+a(e)+"</a>":a(e)}function l(){f&&(m>=h&&window.setTimeout(o,1e3*h),h+=g)}function d(t){var e=$("#ad502-rooms");if(t.error)return l(),void 0;e.html("");for(var o=t.rooms,r=0;r<o.length&&2>r;r++){var d=o[r],f=p+"/rooms/"+d.id,h=$('<div class="ad502-room"></div>');h.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+a(d.name)+'"><a href="'+f+'">'+a(d.name)+"</a></span></h3>")),d.messages&&d.messages.length>0&&h.append($('<span title="'+n(d.lastPost)+'" class="ad502-last-message">'+i(d.lastPost)+" - "+u(d.messages[0])+"</span><br>")),d.singleImage?h.append(c(d.id)):h.append(s(d.users)),e.append(h)}t.activeUsers>1?$("#h-chat-link").text(function(t){return 1==t.num,t.num+" People Chatting"}({"num":t.activeUsers})):$("#h-chat-link").text("Visit Chat"),$("#h-chat-link").attr("title",function(t){return 1==t.users&&1==t.rooms?t.users+" user active in "+t.rooms+" room the last 60 minutes":1==t.users?t.users+" user active in "+t.rooms+" rooms the last 60 minutes":1==t.rooms?t.users+" users active in "+t.rooms+" room the last 60 minutes":t.users+" users active in "+t.rooms+" rooms the last 60 minutes"}({"users":t.activeUsers,"rooms":t.activeRooms})),l()}var p,f,h=180,g=30,m=480,v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return/^\/questions\/\d+/i.test(window.location.pathname)&&(m=0),{"init":function(e){if(p=e.chatUrl,f=e.reloadUrl,e.tagBased){var n=t();if(!n)return;f&&(f+=(/\?/.test(f)?"&":"?")+"tags="+encodeURIComponent(n))}null===e.preloadData?o():d(e.preloadData,null,null)}}}(),StackExchange.helpers.noDiacritics=function(){var t={"àåáâäãåąɐᵄᶛ":"a","æǣǽᴂᵆ":"ae","çćčĉ":"c","đƍðÐ":"d","èéêëęǝᴈᵌ":"e","ⅎ":"f","ğĝᵷ":"g","ĥɥʮᶣ":"h","ìíîïıᴉᵎ":"i","ĵ":"j","ʞ":"k","ł":"l","ɯɰᵚᶭᴟ":"m","ñń":"n","òóôõöøő":"o","œɶᴔ":"oe","řɹɺɻʴʵ":"r","śşšŝ":"s","ß":"ss","ʇ":"t","Þ":"th","ùúûüŭů":"u","ʌᶺ":"v","ʍ":"w","ýŸÿʎ":"y","żźž":"z"};return function(e){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp("["+n+"]","g"),t[n]));return e}}(),StackExchange.question=function(){function t(){var t="hashchange.highlightDestination";$(window).off(t).on(t,function(){var t=window.location.href;if(!(t.indexOf("#")<0)){var e=decodeURI(t).match(/#(\d+|comment(\d+)_(\d+))/i);e&&(e[2]?f(e[2],e[3]):p(e[1]))}}).trigger(t)}var e,n,i,a=function(){return $("div.share-tip a[id^='link-post-']")},o=function(t,e){return t?function(t){return"share link to this question on "+t.socialNetwork}({"socialNetwork":e}):function(t){return"share link to this answer on "+t.socialNetwork}({"socialNetwork":e})},r=function(t,e,n,i,a,r){return $("<a>",{"id":"share-"+i+"-"+t,"class":"share-"+i,"title":o(e,n),"text":a,"data-svc":r})},s=function(t,e){var n=null!=t;t||(t=$("div.question div.post-menu a.short-link"));var i=t.closest(".post-menu, .help-menu");if(t.hasClass("share-link"))i.find(".close-share-tip").click();else{t.addClass("share-link");var a=t.attr("id").substring("link-post-".length),o=t.closest(".col-section").length?"section":t.closest("div.question").length?"question":"answer",s=t.closest("div.question").length,c="http://"+document.location.host+t.attr("href"),u=("answer"==o?"Answer:":"")+$("#question-header a").text(),l='<div class="share-tip" style="display:none">'+(s?"share a link to this question":"share a link to this answer")+'<input type="text" style="display:block; width:292px;" value="'+c+'">';StackExchange.options.site.enableSocialMediaInSharePopup&&(l+=$("<div>",{"id":"share-icons"}).append(r(a,s,"Google+","gp","share [g+]",1)).append(r(a,s,"Facebook","fb","share [fb]",2)).append(r(a,s,"Twitter","tw","share [tw]",3)).prop("outerHTML")),StackExchange.gps.track("share.show",{"location":s?1:2}),l+='<a class="close-share-tip" style="float:right">close</a></div>';var d=$(l);if(StackExchange.options.site.enableSocialMediaInSharePopup){var p="2";StackExchange.share.gplus($("#share-gp-"+a,d),c,u,p),StackExchange.share.facebook($("#share-fb-"+a,d),c,u,p),StackExchange.share.twitter($("#share-tw-"+a,d),c,u,p),$("#share-icons a",d).click(function(){d.fadeOutAndRemove(),StackExchange.gps.track("share.click",{"location":s?1:2,"service":$(this).data("svc")})})}e&&d.find(".close-share-tip").before('<a id="link-post-'+a+'" style="float:left">cite</a>'),d.appendTo(i).fadeIn(n?"fast":0).bind("removing",function(){t.removeClass("share-link")}).find(".close-share-tip").click(function(){d.fadeOutAndRemove()}).end().find("input[type=text]").select()}},c=function(t){var e=$("#post-form h2:first"),n=e.wrap("<div />").parent(),i=n.wrap("<div />").parent(),a=$("<div />").prependTo(i),o=i.height(),r=$("<div />"),s=$(t),c=parseInt(e.css("margin-bottom")),u=$("#content"),l=$("#wmd-input").outerWidth(),d=1e3,p=u.offset().left>e.offset().left-5&&"visible"!=u.css("overflow-x");r.css({"height":0,"overflowY":"hidden"}).appendTo(n).append(s),i.css({"height":o,"position":"relative"}),n.css({"position":"absolute","bottom":-c,"width":l}),a.addClass("answer-help-background").css({"position":"absolute","bottom":-c,"height":0,"width":l}),p&&(a.css("left",0),n.animate({"paddingLeft":5},d)),r.animate({"height":s.height()+c+10},d),a.animate({"height":s.height()+c+10+o},d),$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(n).fadeIn(1e3).find("a").one("click",function(t){var i=$(this).parent();setTimeout(function(){i.remove()},1),r.animate({"height":0},d,function(){r.add(a).remove(),e.unwrap().unwrap(),e.text("Your Answer")}),a.animate({"height":0},d),p&&n.animate({"paddingLeft":0},d),t.preventDefault()})},u=function(){$.get("/posts/answer-help").then(c)},l=function(){$.get("/posts/answer-ban-warning").then(c).then(function(){var t=$("#post-form h2:first");t.text("WAIT!"),$("#qualityBanWarningShown").val("true")})},d=function(t){var e=t?t.closest(".question"):$(".question"),n=e.data("questionid");if(!n)throw new Error("getQuestionId could not find an id");return n},p=function(t){h($(".answer[data-answerid="+t+"]"))},f=function(t,e){var n="#comment-"+t,i=$(n);if(i.length)h(i);else{var a=$("#comments-link-"+e);a.length&&StackExchange.comments.loadAll(a).done(function(){h($(n))})}},h=function(t){var n=i;t.css({"backgroundColor":e}).animate({"backgroundColor":n},2e3,"linear",function(){$(this).css("background-color","")}),t.is(".comment")&&t[0].scrollIntoView(!0)},g=function(t){t=t||{},$(".post-menu a.short-link").live("click",function(e){return e.ctrlKey||e.metaKey?void 0:(s($(this),t.showCitation),!1)}),$(".bottom-share-links a").live("click",function(){var t=$(this).attr("href"),e=null;t&&t.length&&(t.indexOf("%3fsgp%3d")>=0?e=1:t.indexOf("%3fsfb%3d")>=0?e=2:t.indexOf("%3fstw%3d")>=0?e=3:t.indexOf("%3fsem%3d")>=0&&(e=4)),e&&StackExchange.gps.track("share.click",{"location":3,"service":e},!0)});var e=$(".bottom-notice");e&&e.length&&!e.data("bn")&&e.data("loc")&&e.data("bn","bn").find("a").live("click",function(){var t=0,n=e.data("loc"),i=$(this).attr("href");$(this).hasClass("post-tag")?t=1:/\/ask$/.test(i)?t=2:/\/tags$/.test(i)?t=4:/\/unanswered$/.test(i)?t=5:(/\/questions$/.test(i)||/\/questions[?\/]/.test(i))&&(t=3),StackExchange.gps.track("next_action.click",{"type":t,"location":n},!0)})},m=function(t,e,n,i){var a,o,r=document.title,s=0;t.attr("autocomplete","off"),i=i||function(){};var c=function(c){var u=t.val();if(!(""==u||u==a&&c!==!0||StackExchange.options.site.newTitleSearchBoxEnabled&&$(".title-float-selected:visible").length>0)){for(var l=u.split(" "),d=0,p=0;p<l.length;p++)$.trim(l[p]).length>0&&d++;var f=(new Date).getTime(),h=(f-s)/1e3;(c===!0||!(3>d||5>h)||t.hasClass("edit-field-overlayed"))&&(s=f,a=u,n&&(document.title=u?u+" - "+n:r),e.empty(),StackExchange.helpers.addSpinner(e),o&&o.fadeOutAndRemove(),$.ajax({"url":"/search/titles","dataType":"json","data":{"title":u},"success":function(t){t&&t.content&&(e.html(t.content),setTimeout(function(){i(e.find(".answer-link a").attr("target","_blank"))},1))},"complete":function(){StackExchange.helpers.removeSpinner(e)}}))}},u=!1;return e.mouseenter(function(){u=!0}).mouseleave(function(){u=!1}),t.keyup(c).blur(function(){var t=function(){s=0,c()};u?e.one("mouseleave",t):t()}),function(t){s=0,c(t)}};return{"initTitleSearch":m,"showShareTip":s,"getQuestionId":d,"initShareLinks":g,"canViewVoteCounts":function(){return n},"init":function(o){n=o.canViewVoteCounts,StackExchange.question.fullInit?StackExchange.question.fullInit(o):StackExchange.question.bindAnonymousVoteDisclaimers(),StackExchange.comments.init({"autoShowCommentHelp":o.autoShowCommentHelp}),g(o),o.showAnswerBanWarning&&$("#wmd-input").one("focus",l),o.showAnswerHelp&&!o.showAnswerBanWarning&&$("#wmd-input").one("focus",u),o.showCitation&&a().live("click",function(){var t=$(this).closest(".post-menu");t.find(".close-share-tip").click(),citation.show($(this))}),i=o.backgroundColor,e=o.highlightColor,t()}}}(),StackExchange.question.bindAnonymousVoteDisclaimers=function(){function t(t){var e=$(this),n=e.closest("div.vote"),i=e.prop("className"),a=/vote-up/.test(i),o=/vote-down/.test(i),r=/star/.test(i),s=e.closest(".answer").length;if(t.preventDefault(),a||o){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Voting isn't available in read-only mode.",{"transient":!0}),void 0;var c=n.find("input").val();if(StackExchange.options.isMobile){StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+c+"?voteTypeId="+(a?2:3));var u="Thank you for your feedback.<br />"+(s?function(t){return"Please "+t.startAnchor+"log in or register"+t.endAnchor+" to vote for this answer."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(t){return"Please "+t.startAnchor+"log in or register"+t.endAnchor+" to vote for this question."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}));StackExchange.helpers.showMessage(e,u,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}else{var l="anon-vote-popup-"+c;if(n.is(":working")||$("."+l).length)return;n.data("working",!0),$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var d=$('<div class="anon-vote-popup popup">'+function(t){return"Sending feedback"+t.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(l).addSpinner();d.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("vote_popup.show")}),$.ajax({"type":"POST","url":"/posts/popup/anon-vote/"+c+"?voteTypeId="+(a?2:3),"dataType":"html","success":function(t){d.html(t)},"error":function(){d.remove()},"complete":function(){n.data("working",!1)}})}}else if(r){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Favoriting isn't available in read-only mode.",{"transient":!0}),void 0;$(".anon-vote-popup").fadeOutAndRemove();var u=s?function(t){return"Please "+t.startAnchor+"log in or register"+t.endAnchor+" to favorite this answer."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(t){return"Please "+t.startAnchor+"log in or register"+t.endAnchor+" to favorite this question."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"});StackExchange.helpers.showMessage(e,u,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var e=$(this);e.data("bound-anonymous")||(e.data("bound-anonymous",!0),e.click(t))}),StackExchange.question.bindFetchAcceptedAnswerDates()},StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var t=$(this);if(!t.is(":working")){t.working(!0);var e=t.closest(".answer").data("answerid");if(!e)return t.attr("title",""),void 0;var n="/posts/"+e+"/accepted-answer-date";$.get(n,function(e){t.attr("title",e)})}})},StackExchange.comments=function(){function t(t,e){this.postId=t,this.jDiv=e,this.jtBody=e.find(" > table > tbody"),this.jCommentsLink=$("#comments-link-"+t)}function e(t){var e=n($("#comments-"+t)),i=e.jCommentsLink,a=e.jtBody,o=a.data("remaining-comments-count")||0;o++,i.data("comments-count",o),i.attr("title","expand to show all comments on this post, or add one of your own"),e.setCommentsMenu(o),i.removeClass("disabled-link"),a.data("remaining-comments-count",o),i.show().fadeTo("fast",.7).fadeTo("fast",1)}function n(e){var n=e.constructor===$?e:$(e),i=n.closest(".question, .answer, div[id^='post-']").find(".comments"),a=i.attr("id").replace(/^comments-/,"");if(c[a])return c[a];var o=new t(a,i);return c[a]=o,o}function i(t){var e=$(this),i=e.closest(".question, .answer, div[id^='post-']"),o=i.find(".comments"),r=o.find(" > table > tbody"),s=0==r.data("remaining-comments-count"),c=e.hasClass("disabled-link"),u=e.parent(),l=u.data("rep");s&&u.data("anon")&&(StackExchange.options.isMobile?StackExchange.helpers.showMessage(u,function(t){return"Commenting requires an account with "+t.rep+" reputation"}({"rep":l}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"}}):a(u.attr("id").replace("comments-link-",""))),s&&u.data("reg")&&StackExchange.helpers.showMessage(u,function(t){return"You must have "+t.linkStart+t.rep+" reputation"+t.linkEnd+" to comment"}({"rep":l,"linkStart":"<a href='/help/privileges/comment'>","linkEnd":"</a>"}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"}}),(u.data("anon")||u.data("reg"))&&StackExchange.using("gps",function(){StackExchange.gps.track("comment_popup.show")}),e.hasClass("js-show-link")&&StackExchange.using("gps",function(){StackExchange.gps.track("comment.show")});var d=!1;if(e.hasClass("js-add-link")){d=!0;var p="other";i.hasClass("question")?p="question":i.hasClass("answer")&&(p="answer");var f=s?"all_shown":"hidden";StackExchange.using("gps",function(){StackExchange.gps.track("comment.add",{"location":p,"type":f})})}c||(t.preventDefault(),n(this).addShow(!1,d))}function a(t){var e="anon-vote-popup-"+t;if(!$("."+e).length){$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var n=$('<div class="anon-vote-popup popup">'+function(t){return"Loading"+t.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(e).addSpinner();n.appendTo("body").center().fadeIn("fast"),$.ajax({"type":"POST","url":"/posts/popup/anon-comment/"+t,"dataType":"html","success":function(t){n.html(t)},"error":function(){n.remove()}})}}function o(t){var e=t&&t.post||document;c={},$(e).off("click","a.js-add-link",i).on("click","a.js-add-link",i),$(e).off("click","a.js-show-link",i).on("click","a.js-show-link",i),e==document&&s(),r(null,!0)}function r(e,n){n||(l=e),e=e||l||{};for(var i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])}function s(){if(0!=$(".question[data-questionid]").length){var t=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var e=$(this),n=e.closest(".answer"),i=n&&n.length?n.data("answerid"):0,a=e.closest(".comment").attr("id").substr("comment-".length),o=i?i:t,r="#comment"+a+"_"+o;location.href.indexOf("/questions/")>0?e.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({"hash":r})):e.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({"hash":r,"pid":o}))})}}var c={},u=function(){};t.prototype={"checkDiscussion":u,"ensureInput":u,"saveEditingComments":u,"restoreEditingComments":u,"isInputShown":function(){var t=this.jDiv.find('form[id^="add-comment-"]');
return t.children().length&&t.is(":visible")},"commentsShown":function(){this.jtBody.data("remaining-comments-count",0)},"addShow":function(t,e){var n=this,i=this.loadAllComments().done(function(){n.checkDiscussion()});if(e){var a=this.ensureInput();a&&!t&&a.focus()}i.done(function(){a&&a.length>0&&n.jCommentsLink.hide()})},"ajax":function(t,e,n,i){n&&!i&&StackExchange.helpers.addSpinner(n,{"margin-left":"10px"});var a=this;return $.ajax(t).fail(function(t){var o=t.responseText;(!o||o.indexOf("<html")>=0)&&(o=e||"An error occured"),StackExchange.helpers.showErrorMessage(n||a.jDiv,o,{"transient":409==t.status}),n&&!i&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},"setCommentsMenu":function(t){var e="",n="";t>0&&(n=function(t){return 1==t.count?"show <b>"+t.count+"</b> more comment":"show <b>"+t.count+"</b> more comments"}({"count":t})),this.isInputShown()||!this.jtBody.data("cansee")&&!this.jtBody.data("canpost")||(e="add a comment"),e.length||n||!this.jtBody.data("comments-unavailable")||(e="comments disabled on deleted / locked posts / reviews"),StackExchange.options.inReadOnly&&(e="");var i=this.jCommentsLink.find(".js-add-link"),a=this.jCommentsLink.find(".js-show-link");i.html(e),a.html(n),e.length?i.removeClass("dno"):i.addClass("dno"),n.length?a.removeClass("dno"):a.addClass("dno"),e.length&&n.length?this.jCommentsLink.find(".js-link-separator").removeClass("dno"):this.jCommentsLink.find(".js-link-separator").addClass("dno"),this.jtBody.data("addlink-disabled")&&i.addClass("disabled-link")},"showComments":function(t,e){this.saveEditingComments(e),this.jtBody.html(t),this.restoreEditingComments(),this.setCommentsMenu(0),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),s(),this.commentsShown()},"loadAllComments":function(t,e){this.jDiv.removeClass("dno");var n=0==this.jtBody.data("remaining-comments-count");if(!t&&n)return $.Deferred().resolve().promise();var i=this;return this.ajax({"type":"GET","url":"/posts/"+this.postId+"/comments"+(e||""),"dataType":"html"},"An error occurred while fetching comments").done(function(t){i.showComments(t)}).promise()}};var l;return{"init":o,"loadAll":function(t,e){return n(t).loadAllComments(!0,e)},"realtimeMessage":e,"extendPostUi":r,"uiForPost":n}}(),StackExchange.share=function(){function t(t,e,n){window.open(t,e,n)||(window.location.href=t)}function e(t,e,n){n="undefined"!=typeof n?n:"1",e+="="+n;var i=t.indexOf("?"),a=t.indexOf("#");return-1==i?-1==a?t+"?"+e:t.substring(0,a)+"?"+e+t.substring(a):-1==a?t+"&"+e:t.substring(0,a)+"&"+e+t.substring(a)}return{"gplus":function(n,i,a,o){i=e(i,"sgp",o),n.click(function(){t("https://plus.google.com/share?url="+encodeURIComponent(i),"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},"twitter":function(n,i,a,o){i=e(i,"stw",o);var r=117;a.length>r&&(a=a.substring(0,r-3)+"..."),n.click(function(){t("http://twitter.com/share?url="+encodeURIComponent(i)+"&ref=twitbtn&text="+encodeURIComponent(a),"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},"facebook":function(n,i,a,o){i=e(i,"sfb",o),n.click(function(){t("http://www.facebook.com/sharer.php?u="+encodeURIComponent(i)+"&ref=fbshare&t="+encodeURIComponent(a),"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}(),$.fn.extend({"postId":function(){var t=this.first();return t.hasClass("answer")&&t.hasClass("question")||(t=t.closest(".answer, .question")),parseInt(t.find(".vote input")[0].value)}}),StackExchange.newsletterAd=function(){function t(t){var e=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append($("<div />",{"class":"popup-close"}).append("<a>&times;</a>",{"title":"close this popup (or hit Esc)"})).append(t);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast"),e.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function e(){var e=StackExchange.options.site.name,n=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">',function(t){return"Subscribe to the "+t.site+" weekly newsletter"}({"site":e}),"</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">',function(t){return"Create an account on "+t.site+t.endAnchor+" or "+t.loginAnchor+"log in"+t.endAnchor+" if you already have one."}({"site":e,"loginAnchor":'<a href="/users/login?returnurl=/newsletter/signup/redirect">',"endAnchor":"</a>"}),"</strong></p>",'<form><label for="newsletter-email-input">',"Or, send newsletter emails to:","</label> ",$("<input>",{"type":"text","id":"newsletter-email-input","maxlength":"100","title":"your email address"}).prop("outerHTML")," ",$("<input>",{"type":"submit","id":"newsletter-email-submit","value":"Subcribe"}).prop("outerHtml"),"</form>",$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));n.find("form").submit(function(){var t=$(this),e=t.find("#newsletter-email-input"),n=t.find("#newsletter-email-submit"),i=$.trim(e.val());return 0==i.length?!1:(StackExchange.helpers.addSpinner(t),$.ajax({"url":"/newsletter/signup/anon","type":"POST","dataType":"json","data":{"email":i},"success":function(i){"confirmed"!=i.status||i.error?"unconfirmed"!=i.status||i.error?t.showErrorMessage(i.error||function(t){return"there was a problem signing up for the newsletter"+t.br+"please try again later"}({"br":"<br />"})):(e.attr("disabled",!0),n.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),t.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):(e.attr("disabled",!0),n.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'))},"error":function(){t.showErrorMessage(function(t){return"there was a problem signing up for the newsletter"+t.br+"please try again later"}({"br":"<br />"}))},"complete":function(){StackExchange.helpers.removeSpinner(t)}}),!1)}),t(n)}function n(){$("#newsletter-signup").click(function(){var t=$(this);return StackExchange.options.user.isAnonymous?(e(),!1):(StackExchange.helpers.addSpinner("#newsletter-signup-container"),$.ajax({"url":"/newsletter/signup","type":"POST","dataType":"json","success":function(e){e.url?window.location.href=e.url:"confirmed"==e.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==e.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):t.parent().showErrorMessage(function(t){return"there was a problem signing up for the newsletter"+t.br+"please try again later"}({"br":"<br />"}))},"error":function(){t.parent().showErrorMessage(function(t){return"there was a problem signing up for the newsletter"+t.br+"please try again later"}({"br":"<br />"}))},"complete":function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}}),void 0)}),$("#newsletter-preview").click(function(){var e=$(window).height(),n=Math.min(600,e-100),i=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',n,'px;">','<iframe src="',$(this).attr("href"),'&suppressPromotion=true" width="660" height="',n,'" frameborder="0"></iframe>',"</div>"].join("");return t(i),!1})}return{"init":n,"loader":function(t,e){var t=e||t,n=$(".newuser-greeting");$.ajax({"url":"/newsletter/targetted/ajax","data":{"domain":t},"success":function(t){$("#newsletter-ad").remove(),n.empty().append($(t))},"complete":function(){n.attr("class","").attr("style","")}}),e||(window.sessionStorage.tNewsletter=t+"-continued")}}}(),function(t,e,n,i){var a=!("selectionStart"in t("<input type='text' />")[0]);t.fn.caret=function(t,o){var r,s,c=this[0];if("object"==typeof t&&"number"==typeof t.start&&"number"==typeof t.end)r=t.start,s=t.end;else if("number"==typeof t&&"number"==typeof o)r=t,s=o;else if("string"==typeof t)(r=c.value.indexOf(t))>-1?s=r+t[e]:r=null;else if("[object RegExp]"===Object.prototype.toString.call(t)){var u=t.exec(c.value);null!=u&&(r=u.index,s=r+u[0][e])}if("undefined"!=typeof r){if(a){var l=this[0].createTextRange();l.collapse(!0),l.moveStart("character",r),l.moveEnd("character",s-r),l.select()}else this[0].selectionStart=r,this[0].selectionEnd=s;return this[0].focus(),this}if(a){var d=document.selection;if("textarea"!=this[0].tagName.toLowerCase()){var p=this.val(),f=d[n]()[i]();f.moveEnd("character",p[e]);var h=""==f.text?p[e]:p.lastIndexOf(f.text);f=d[n]()[i](),f.moveStart("character",-p[e]);var g=f.text[e]}else{var f=d[n](),m=f[i]();m.moveToElementText(this[0]),m.setEndPoint("EndToEnd",f);var h=m.text[e]-f.text[e],g=h+f.text[e]}}else var h=c.selectionStart,g=c.selectionEnd;var v=c.value.substring(h,g);return{"start":h,"end":g,"text":v,"replace":function(t){return c.value.substring(0,h)+t+c.value.substring(g,c.value[e])}}}}(jQuery,"length","createRange","duplicate"),StackExchange.captcha=function(){function t(t,e){function n(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var i=$(['<div id="lightbox-panel" class="popup captcha-popup" style="display: block; text-align: left;">','<div class="popup-close">',$("<a>",{"title":"close this popup (or hit Esc)","text":"×"}).prop("outerHTML"),"</div>",t,"</div>"].join("")),a=i.find("form:first");$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast"),i.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(n),$.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{"theme":"clean","lang":StackExchange.options.site.recaptchaAudioLang,"custom_translations":{"visual_challenge":"Get a visual challenge","audio_challenge":"Get an audio challenge","refresh_btn":"Get a new challenge","instructions_visual":"Type the text:","instructions_audio":"Type what you hear:","help_btn":"Help","play_again":"Play sound again","cant_hear_this":"Download sound as MP3","incorrect_try_again":"Incorrect. Try again.","image_alt_text":"reCAPTCHA challenge image","privacy_and_terms":"Privacy & Terms"},"callback":Recaptcha.focus_response_field}),StackExchange.helpers.enableSubmitButton(a),a.submit(function(){return StackExchange.helpers.disableSubmitButton(a),a.find('input[type="submit"]').addSpinnerAfter(),$.ajax({"url":"/captcha","type":"POST","dataType":"json","data":a.serialize(),"success":function(t){t.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(a),a.find(".form-error").html(t.captchaError),Recaptcha.reload()):(n(),e(t))},"error":function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(a),StackExchange.helpers.showErrorMessage(a,"An error occurred submitting the CAPTCHA")}}),!1})})}return{"init":t}}(),StackExchange.gps=function(){function t(t){return g?!0:(g=!0,t&&e()?(c(),o(),n(".tagged-questions-page, .questions-page, .tags-page",".js-gps-related-tags .post-tag","related_tags.click",", item_type:1"),n(".question-page",".js-gps-related-questions .spacer","related_questions.click"),n(".question-page .post-taglist",".post-tag","question_tags.click",", location:1"),n(".question-page #sidebar .tagged",".post-tag","question_tags.click",", location:2"),i(),!0):(StackExchange.gps.track=function(t,e,n,i){i&&i()},delete StackExchange._gps_track,!1))}function e(){if(!window.localStorage)return!1;try{if(window.localStorage["gps-probe"]="1","1"!=window.localStorage["gps-probe"])return!1;window.localStorage.removeItem("gps-probe")}catch(t){return!1}return!0}function n(t,e,n,i){$(t).find(e).each(function(t){$(this).addClass("js-gps-track").data("gps-track",n+"({ position:"+(t+1)+i+" })")})}function i(t){$(t||document).find(".js-gps-track").off("click.gps").one("click.gps",function(){var t=$.trim($(this).data("gps-track"));if(t)for(var e=a(t),n=0;n<e.length;n++){var i=e[n];r(i[0],i[1],!0)}})}function a(t){for(var e=[],n=t.match(/([a-z._]+)(\([^)]+\))?/gi),i=0;i<n.length;i++){var a=n[i];if(a.indexOf("{")<0)e.push([a,{}]);else{for(var o=a.match(/([a-z._]+)\s*\(\s*\{([^}]+)\}\s*\)/i),r=o[1],s=$.trim(o[2]),c=s.match(/[^,]+/gi),u={},l=0;l<c.length;l++){var d=c[l],p=d.indexOf(":"),f=$.trim(d.substr(0,p)),h=$.trim(d.substr(p+1)),g=parseInt(h);u[f]=0/0!=g?g:h}e.push([r,u])}}return e}function o(t){var e=u();if(e.length>0){for(var n=(new Date).getTime(),i=[],a=0;a<e.length&&i.length<20;a++){var o=e[a],r=n-o.now;0>r||r>36e5?d(o):i.push(o)}i.length>0?p(i,t):t&&t()}}function r(t,e,n,i){var a={"evt":t,"properties":e||{},"now":(new Date).getTime()};l(a),navigator&&navigator.sendBeacon&&(n=!1),n?(i&&i(),window.setTimeout(o,1e4)):o(i)}function s(t){t&&StackExchange.options&&StackExchange.options.user&&(t.properties&&!t.properties.user_type&&(t.properties.user_type=StackExchange.options.user.user_type),!t.ab&&StackExchange.options.user.ab&&(t.ab=StackExchange.options.user.ab))}function c(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(t,e){l(e)}),delete StackExchange._gps_track)}function u(){var t=localStorage[h];return t?JSON.parse(t):[]}function l(t){s(t);var e,n=localStorage[h];if(n){var i=JSON.parse(n);i.push(t),e=JSON.stringify(i)}else e=JSON.stringify([t]);f("addToPending "+JSON.stringify(t)),localStorage[h]=e}function d(t){var e=localStorage[h];if(e){for(var n=JSON.parse(e),i=JSON.stringify(t),a=-1,o=0;o<n.length;o++){var r=JSON.stringify(n[o]);if(i==r){a=o;break}}if(-1!=a)return n.splice(a,1),0==n.length?(localStorage.removeItem(h),void 0):(localStorage[h]=JSON.stringify(n),void 0)}}function p(t,e){$.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=JSON.stringify(t[n]);m[i]&&(t.splice(n,1),n--)}for(var n=0;n<t.length;n++){var i=JSON.stringify(t[n]);m[i]=!0}var a=JSON.stringify(t);if(navigator&&navigator.sendBeacon)try{if(f("sending (beacon): "+a),navigator&&navigator.sendBeacon("/gps/event",a)){for(var n=0;n<t.length;n++){d(t[n]);var i=JSON.stringify(t[n]);delete m[i]}return e&&e(),void 0}}catch(o){f(o)}f("sending (AJAX): "+a),$.ajax({"type":"POST","url":"/gps/event","data":{"data":a},"success":function(){for(var e=0;e<t.length;e++)d(t[e])},"complete":function(){for(var n=0;n<t.length;n++){var i=JSON.stringify(t[n]);delete m[i]}e&&e()}})}function f(t){StackExchange.options.enableLogging&&console.log("gps: "+t)}var h="gps-pending",g=!1,m={};return{"init":t,"track":r,"sendPending":o,"bindTrackClicks":i}}(),StackExchange.openid=function(){function t(t){t&&StackExchange.gps.track("openid.click",{"openid_provider":t,"location":u},!0),StackExchange.gps.track("signup.start",{"location":"question_page"},!0)}function e(e,n){var a=decodeURIComponent(n);0===a.indexOf("/questions/")&&(u="question_page"),"/questions/ask"===a&&(u="question_ask");var l=$(e),d=l.find(".new-login-left"),p=l.find(".new-login-right"),f=d.find(".show-more-options");f.click(function(){return f.hide(),p.show(),!1});var h=p.find(".hide-more-options");h.click(function(){return f.show(),p.hide(),!1}),l.removeClass("dno"),i(l,p);var g=d.find(".google-login");g.click(function(){t("Google"),r(l)});var m=d.find(".facebook-login");m.click(function(){t("Facebook"),o(l)});var v=d.find(".stackexchange-login");v.click(s(function(){t("Stack Exchange"),StackExchange.navPrevention.stop(),window.location="/users/signup?returnUrl="+encodeURIComponent(a)})),l.find(".submit-openid").click(function(){c(l,a)})}function n(e,n,i,a,s){var l=decodeURIComponent(n);u=i;var d=e.find(".google-login");d.click(function(){t("Google"),r(e)});var p=e.find(".facebook-login");p.click(function(){t("Facebook"),o(e)});var f=e.find(".stackexchange-login");f.click(function(){t("Stack Exchange"),window.location="/users/signup?returnUrl="+encodeURIComponent(l)}),e.find(".submit-openid").click(function(){c(e,l,a,s)})}function i(t,e){var n=e.find(".option-extra-fields");n.hide();var i=e.find(".yahoo-button");i.click(function(){n.hide(),a(t,"yahoo")});var o=function(i){var o="."+i+"-option";n.show(),n.find("> div:not("+o+")").hide(),n.find(o+", .extra-field-container").show(),e.find(".extra-field").val("").focus();var r=e.find(".extra-field-submit");r.unbind("click"),r.click(function(){a(t,i,e.find(".extra-field").val())})},r=e.find(".blogger-button");r.click(function(){o("blogger")});var s=e.find(".aol-button");s.click(function(){o("aol")})}function a(t,e,n){var i=l[e];n&&(i=i.replace("{username}",n)),t.find(".use-facebook").val(""),t.find(".use-google").val(""),t.find(".manual-openid").val(i),t.find(".submit-openid").click()}function o(t){t.find(".use-facebook").val("true"),t.find(".use-google").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function r(t){t.find(".use-google").val("true"),t.find(".use-facebook").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function s(t){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(t)})}}function c(t,e,n,i){var a=t.find(".manual-openid").val(),o=t.find(".use-facebook").val(),r=t.find(".use-google").val();s(function(){var t=!!StackExchange.options.site.isChildMeta,s=(t?StackExchange.options.site.parentUrl:"")+"/users/authenticate?returnurl="+encodeURIComponent(e),c=$('<form method="post" action="'+s+'"></form>');if(a){var u=$('<input type="hidden" name="openid_identifier" />');c.append(u),u.val(a)}else{var l=$('<input type="hidden" name="oauth_version" />'),d=$('<input type="hidden" name="oauth_server" />');c.append(l),c.append(d),l.val("2.0"),o?d.val("https://www.facebook.com/dialog/oauth"):r&&d.val("https://accounts.google.com/o/oauth2/auth")}c.append("<input type='hidden' name='fkey' value='"+StackExchange.options.user.fkey+"' />"),n&&i&&($('<input type="hidden" name="anon_vote_type" />').val(n).appendTo(c),$('<input type="hidden" name="anon_vote_hash" />').val(i).appendTo(c)),StackExchange.navPrevention.stop(),c.hide().appendTo("body").submit()})()}var u="unknown",l={"yahoo":"http://yahoo.com/","google":"https://www.google.com/accounts/o8/id","aol":"http://openid.aol.com/{username}","blogger":"http://{username}.blogspot.com/"};return{"initPostLogin":e,"initAnonPopup":n}}(),StackExchange.loggedIn={},StackExchange.tagPreferences=function(){function t(t){return t=t.replace(/#/g,"ñ").replace(/\+/g,"ç").replace(/\./g,"û"),/\*/.test(t)?"div.tags:regex(class, t-"+t.replace(/\*/g,".*")+")":"div.t-"+t}function e(t,e,n){var i="";"undefined"!=typeof forUserId&&(i=forUserId),$.post("/users/save-preference",{"fkey":StackExchange.options.user.fkey,"key":t,"value":e,"forUserId":i},n)}var n=[],i=$('<table><tr><td class="vt"><input type="text" id="interestingTag" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),a=$('<table><tr><td class="vt"><input type="text" id="ignoredTag" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),o=function(e,n){return e.map(function(t,e){return $(e).text()}).filter(function(t,e){if(!n)return!0;var i;/\*/.test(e)&&(i=new RegExp(e.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(var t=0;t<n.length;t++){var a=n[t];if(e===a)return!1;if(i&&i.test(a))return!1}return!0}).map(function(e,n){return t(n)}).get().join(",")},r=function(t,n,i,a,o,r){for(var c=$(t).val(),u=sanitizeAndSplitTags(c,!0),d=!1,p=0;p<u.length;p++)if(0!=$.trim(u[p]).length){if($(n).children().each(function(){return $(this).text()==u[p]?($(this).fadeTo(500,.1).fadeTo(500,1),d=!0,void 0):void 0}),!d){var f=encodeURIComponent(u[p]),h=$("<a>").attr({"id":u[p],"href":"/questions/tagged/"+f,"class":a,"title":function(t){return"show questions tagged '"+t.tag+"'"}({"tag":u[p]})}).text(u[p]);$(n).append(h),$(n).append(" "),s(i)}d=!1}$(t).val(""),o&&$(t).focus(),r||e(i,$(n).text()),l()},s=function(t){var n=20==t?"#interestingTags > .post-tag:last":25==t?"#ignoredTags > .post-tag:last":40==t?"#interestingTags > .post-tag":45==t?"#ignoredTags > .post-tag, #remainingIgnored > .post-tag":"#interestingTags > .post-tag, #ignoredTags > .post-tag",i=function(t){var n=$(t.target),i=n.closest(".post-tag"),a=i.closest("div"),o=a.is("#ignoredTags")?25:a.is("#interestingTags")?20:-1;return-1===o?console.log("removeTag: unknown container. Stopping execution. '"+a.text()+"'"):(i.remove(),e(o,a.text()),l()),!1};$("<span>").addClass("delete-tag").attr("title","remove this tag").appendTo($(n)).click(i)},c=function(){return $("#hideIgnoredTrue").is(":checked")?!0:$("#hideIgnoredFalse").is(":checked")?!1:$("#hideIgnored").is(":checked")},u=function(t){var e=$("#ignoredTags > a, #remainingIgnored > a");if(c()){var n=o(e,!0);if(n.length>0)return $(t).find(n).length>0}},l=function(t,e){if(e)for(var i=0;i<e.length;i++)-1==n.indexOf(e[i])&&n.push(e[i]);e=n;var a=$("#ignoredTags > a, #remainingIgnored > a"),r=$("#interestingTags > a");if(!t||0!=a.length||0!=r.length){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");var s=o(a,e),u=o(r,e);if(s.length>0){var l=c()?"tagged-ignored-hidden":"tagged-ignored";$(s).closest("div.question-summary").addClass(l)}u.length>0&&$(u).closest("div.question-summary").addClass("tagged-interesting")}},d=function(t,e){var n,i=$("#tag-menu");"favorite"==e&&(n=$("#ignoredTags a").filter(function(){return $(this).text()==t}),n.add(n.next()).remove(),$("#interestingTag").val(t),r("#interestingTag","#interestingTags",20,"post-tag",!1,!0)),"ignore"==e&&(n=$("#interestingTags a").filter(function(){return $(this).text()==t}),n.add(n.next()).remove(),$("#ignoredTag").val(t),r("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0)),"clear"==e&&(n=$("#ignoredTags a").filter(function(){return $(this).text()==t}),n.add(n.next()).remove(),n=$("#interestingTags a").filter(function(){return $(this).text()==t}),n.add(n.next()).remove(),l()),StackExchange.helpers.addSpinner(i),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(t)+"/favorite","data":{"action":e,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(e){f(i.html($(""+e)),t)},"error":function(){},"complete":StackExchange.helpers.removeSpinner})},p=function(t,e){var n=$("#tag-menu");StackExchange.helpers.addSpinner(n),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(t)+"/subscription","data":{"unsubscribe":e,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(e){f(n.html($(""+e)),t)},"error":function(){},"complete":StackExchange.helpers.removeSpinner})},f=function(t,e){t.find(".tm-se-subscription").click(function(){p(e,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?d(e,"ignore"):$(this).hasClass("tm-favorite-clear")?d(e,"favorite"):$(this).hasClass("tm-favorite-ignore")&&d(e,"clear")})},h=function(t){t&&s(40),$("#add-interesting").append(i);i.find("#interestingAdd").unbind("click").bind("click",function(){r("#interestingTag","#interestingTags",20,"post-tag user-tag",!0),$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")}),S()},g=function(t){$("#tag-pref-prefs").removeClass("dno"),t&&s(45),$("#add-ignored").append(a);a.find("#ignoredAdd").unbind("click").bind("click",function(){r("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")}),S()},m=function(t){if($.contains(document.documentElement,t.target)&&!$(t.target).closest("#interesting-tags").length){var e=$("#interestingTags > .post-tag").length>0,n=$("#ignoredTags > .post-tag, #remainingIgnored > .post-tag").length>0;e?b():v(),n?w():x(),$("#interesting-tags .delete-tag").remove(),T(),$(document).off("click",m)}},v=function(){$("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno")},b=function(){$("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno")},x=function(){$("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno")},w=function(){$("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")},k=function(){$("#showRemainingIgnored").addClass("dno"),$("#remainingIgnored").removeClass("dno")},y=function(){$("#addInterestingTag").on("click",function(){$(this).addClass("dno"),h(!1)}),$("#addIgnoredTag").on("click",function(){$(this).addClass("dno"),g(!1)}),$("#edit-interesting").on("click",function(){$(this).addClass("dno"),$("#addInterestingTag").addClass("dno"),$("#tag-subscriptions, #ignored-wrapper").removeClass("dno"),$("#edit-ignored").length||g(!0),h(!0)}),$("#edit-ignored").on("click",function(){$(this).addClass("dno"),g(!0)}),$("#showRemainingIgnored").on("click",function(){k()})},S=function(){$(document).on("click",m)},E=!1,C=function(){E=!0},T=function(){E&&$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click")};return{"applyPrefs":l,"isIgnored":u,"forceEditMode":C,"init":function(){StackExchange.tagmenu.init(f),0!=$("#interestingTags").length&&(y(),S(),$("#hideIgnored, #hideIgnoredTrue, #hideIgnoredFalse").click(function(){e(30,c()),l()}),T())}}}(),StackExchange.question.fullInit=function(t){if(window.votesCast=t.votesCast,StackExchange.vote.init(t.questionId),StackExchange.question.bindSuggestedEditPopupLinks(),StackExchange.vote_bounty.init(t),/^#autocomment/.test(window.location.hash)){var e=$(".comments-link:first"),n="#comment-"+window.location.hash.substring(12),i=function(){var e=$(n),i=$("<span><b>Trivial answer converted to comment</b></span>");e.find(".comment-date").append($("<br>")).append(i),e.css({"backgroundColor":t.highlightColor}),e.animate({"backgroundColor":t.backgroundColor},2e3,"linear",function(){$(this).css("background-color","")}),$(n)[0].scrollIntoView(!0)};t.totalCommentCount&&t.shownCommentCount&&t.totalCommentCount!=t.shownCommentCount?StackExchange.comments.loadAll(e).done(i):i()}},StackExchange.question.bindSuggestedEditPopupLinks=function(){function t(t){var e=t.parent(),n=t.attr("id").substring("edit-pending-".length);t.data("working")||(t.data("working",!0).addSpinnerAfter({"padding":"3px 0"}),$.ajax({"type":"GET","url":"/review/suggested-edit-popup/"+n,"dataType":"html","success":function(t){var n=$(['<div id="lightbox-panel" class="popup popup-suggested-edit no-auto-close" style="display: block;">','<div class="popup-controls">','<div class="handle"></div>','<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>',"</div>",'<div class="suggested-edit-container">',t,"</div>","</div>"].join("")),i=$(window).height(),a=(n.find(".popup-suggested-edit").css({"max-height":i-100}),$('<div id="lightbox" class="no-esc-remove"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast"));n.appendTo(e).css("height","600px").center().css("height","").fadeIn("fast");var o=function(){var t=$.Event("suggestedEditPopupClose");n.trigger(t),t.isDefaultPrevented()||(StackExchange.helpers.closePopups(n),StackExchange.helpers.closePopups(a))},r=function(t){return 27==t.which?(o(),!1):void 0},s=function(){return o(),!1};$(document).bind("keydown",r),a.mousedown(s),n.find(".popup-close").click(s),n.bind("popupClose",function(){$(document).unbind("keydown",r)}),StackExchange.helpers.bindMovablePopups()},"error":function(t){e.showErrorMessage(t.responseText&&t.responseText.length<200?t.responseText:"Unable to load suggested edit - please try again")},"complete":function(){StackExchange.helpers.removeSpinner(),t.removeData("working")}}))}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){return t($(this)),!1})})},StackExchange.vote=function(){var t=StackExchange.helpers,e={"informModerator":-1,"undoMod":0,"acceptedByOwner":1,"upMod":2,"downMod":3,"offensive":4,"favorite":5,"close":6,"reopen":7,"bountyClose":9,"deletion":10,"undeletion":11,"spam":12},n="View upvote and downvote totals",i=function(t){var e=t?t.closest("div.vote"):$("div.vote"),n=$("body.read-only").length>0,i=e.hasClass("vote-election-primary");e.find(".vote-up-off, .vote-down-off").each(function(){var t,e,a,o,r=$(this);if(n)t="Voting is disabled while the site is in readonly mode";else{if(e=r.hasClass("vote-up-off"),a=(e?h:g)(r),o=r.closest(".answer").length>0,i)return;t=o?e?"This answer is useful":"This answer is not useful":e?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful",t+=StackExchange.loggedIn&&a?" (click again to undo)":""}r.attr("title",t)})},a=function(t){t||(t="div.vote"),$(t).find(".vote-up-off").unbind("click").click(function(){u($(this))}),$(t).find(".vote-down-off").unbind("click").click(function(){l($(this))})},o=function(t){var e=t?t.closest("div.vote"):$("div.vote");return e.find(".vote-up-off, .vote-down-off").unbind("click")},r=function(t){$.each(t,function(){var t=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case e.upMod:t.find(".vote-up-off").addClass("vote-up-on");break;case e.downMod:t.find(".vote-down-off").addClass("vote-down-on");break;case e.favorite:t.find(".star-off").addClass("star-on"),t.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}}),votesCast=null},s=function(t){$.ajax({"type":"GET","url":"/posts/"+t+"/votes","dataType":"json","success":r})},c=function(t){null==window.votesCast?s(t):r(window.votesCast),a(),i()},u=function(t){var n=t.parent().find(".vote-up-off"),i=t.parent().find(".vote-down-off"),a=h(n),o=g(i),r=a?-1:o?2:1;w(t,r),x(n,i),a||n.addClass("vote-up-on"),k(t,a?e.undoMod:e.upMod)},l=function(t){var n=t.parent().find(".vote-up-off"),i=t.parent().find(".vote-down-off"),a=g(i),o=h(n),r=a?1:o?-2:-1;w(t,r),x(n,i),a||i.addClass("vote-down-on"),k(t,a?e.undoMod:e.downMod)},d=function(){return $("div.vote a[id^='vote-accepted-']")},p=function(){return $("div.post-menu a[id^='protect-post-']")},f=function(){return $("div.post-menu a[id^='unprotect-post-']")},h=function(t){return t.hasClass("vote-up-on")},g=function(t){return t.hasClass("vote-down-on")},m=function(t){return t.hasClass("star-on")},v=function(t){return t.closest("div.vote").find("input[name=_id_]").val()},b=function(t){return t.closest("div.vote").find("input[name=_ltu_]").val()},x=function(t,e){t.removeClass("vote-up-on"),e.removeClass("vote-down-on")},w=function(t,e){var n,i=t.siblings("span.vote-count-post");if(i.find(".vote-count-separator").length>0){var a=parseInt(i.children(":first").text(),10),o=Math.abs(parseInt(i.children(":last").text(),10));n=a-o,N(i)}else n=parseInt(i.text(),10);i.text(n+e)},k=function(t,e){o(t);var n=v(t);y({"$target":t,"postId":n,"voteTypeId":e,"success":S,"data":{"ltu":b(t)}})},y=function(t){var n=t.$target,i=t.postId,a=t.data,o=t.voteTypeId,r=function(e){e.Warning?confirm(e.Message)&&(u.ignoreWarnings="true",p()):t.success&&t.success(n,i,e),t.complete&&t.complete()
},s=function(e){n.parent().showErrorMessage("An error has occurred - please retry your request."),t.error&&t.error(n,i,e),t.complete&&t.complete()},c=n.data("vote-sub");if(c)return setTimeout(function(){r(c)},0),void 0;var u={"fkey":StackExchange.options.user.fkey};if(a)for(var l in a)u[l]=a[l];var d="/posts/"+i+"/vote/"+o;o==e.favorite&&(d="/posts/"+i+"/favorite",t.undo&&(u.undo=!0));var p=function(){$.ajax({"type":"POST","url":d,"data":u,"dataType":"json","success":r,"error":s})};p()},S=function(t,n,o){if(o.Success){if(o.Message&&t.parent().showInfoMessage(o.Message),o.ShowShareTip){var r=$(t).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(r)}o.LastVoteTypeId==e.upMod?$(document).trigger("upVote",n):o.LastVoteTypeId==e.downMod?$(document).trigger("downVote",n):$(document).trigger("undoVote",n)}else window.console&&window.console.firebug&&(!o.Message||o.Message.length<5)?t.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site."):(o.Message?t.parent().showErrorMessage(o.Message,{"transient":!0}):t.parent().showErrorMessage("An error has occurred - please retry your request."),x(t,t),t.parent().find("span.vote-count-post").text(o.NewScore),o.LastVoteTypeId&&E(t,o.LastVoteTypeId));a(t.parent()),i(t)},E=function(t,n){var i,a;n==e.upMod?(i=".vote-up-off",a="vote-up-on"):n==e.downMod&&(i=".vote-down-off",a="vote-down-on"),i&&t.closest("div.vote").find(i).addClass(a)},C=function(){$(".star-off:not(.disabled)").live("click",function(t){T($(this)),t.preventDefault()})},T=function(t){if(!t.data("loading")){t.data("loading",!0);var n=v(t)||t.siblings("input[type=hidden][name=_id_]").val(),i=t.parent().find("div.favoritecount b"),a=parseInt("0"+i.text().replace(/^\s+|\s+$/g,""),10),o=function(){return m(t)?(t.removeClass("star-on"),i.removeClass("favoritecount-selected").text(--a<=0?"":a),!0):(t.addClass("star-on"),i.addClass("favoritecount-selected").text(++a),!1)},r=o();y({"$target":t,"postId":n,"voteTypeId":e.favorite,"undo":r,"success":function(e,n,i){t.data("loading",!1),i.Success||(o(),t.parent().showErrorMessage(i.message))}})}},I=function(t,e){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(n){n.preventDefault(),q($(this),t,e)}).unbind("hover").die("hover").live("hover",function(){var t=$(this);if(t.hasClass("load-tooltip-on-hover")){t.removeClass("load-tooltip-on-hover");var e=t.attr("id").substring("delete-post-".length),n="/posts/"+e+"/delete-tooltip";$.get(n,function(e){t.attr("title",e)})}})},_=function(t,n,i,a){t.loadPopup({"url":"/posts/{postId}/fancy-deletion-prompt".formatUnicorn({"postId":n}),"loaded":function(o){StackExchange.helpers.bindMovablePopups(),$(o).find("a").each(function(t,e){var n=$(e).attr("href");n&&n.length>1&&$(e).attr("target","__blank")}),$(o).find(".cancel-delete").click(function(t){return StackExchange.helpers.closePopups(".popup"),t.preventDefault(),!1}),$(o).find(".delete-question").click(function(o){return StackExchange.helpers.closePopups(".popup"),y({"$target":t,"postId":n,"voteTypeId":e.deletion,"success":i,"data":a}),o.preventDefault(),!1})}})},q=function(t,n,i){var a=t.attr("id").substring("delete-post-".length),o=t.text().indexOf("undelete")>-1,r=t.data(o?"undelete-prompt":"delete-prompt");r||(r=StackExchange.options.user.isModerator?"":o?"Vote to undelete this post?":"Vote to delete this post?");var s=o?!1:!!t.data("fancy-delete"),c=n||A;return s?(_(t,a,c,i),void 0):(confirm(r)&&y({"$target":t,"postId":a,"voteTypeId":o?e.undeletion:e.deletion,"success":c,"data":i}),void 0)},A=function(e,n,i){var a=e.text().indexOf("undelete")>-1;if(i&&i.Success)if(e.html(i.Message),e.addClass("load-tooltip-on-hover"),i.NewScore<0){var o=$(".question:has(a[id='delete-post-"+n+"'])").length>0,r=o?".question, div.answer":"#answer-"+n;M($(r),!a)}else e.parent().showInfoMessage(a?"Your undelete vote has been recorded":"Your delete vote has been recorded");else{var s=i&&i.Message?i.Message:a?"A problem occurred during undeletion":"A problem occurred during deletion";t.showErrorMessage(e.parent(),s)}},M=function(t,e){e?($("div.question-status:has(span:contains('delete'))").show(),t.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("div[id^='comments-link-']>a").addClass("comments-link-deleted")):document.location.reload(!0)},j=function(){var t=$(this),n=t.attr("id").substring("vote-accepted-".length),i=d();t.is(":working")||(t.parent().addSpinner(),i.working(!0),y({"$target":t,"postId":n,"voteTypeId":e.acceptedByOwner,"success":function(n,a,o){o.Success?(i.removeClass("vote-accepted-on"),parseInt(o.Message,10)==e.acceptedByOwner&&t.addClass("vote-accepted-on")):t.parent().showErrorMessage(o.Message,{"transient":o.Transient}),t.parent().removeSpinner(),i.working(!1).trigger("update")}}))},O=function(){var t=$(this),e=t.hasClass("vote-accepted-on")?"unaccept":"accept";t.attr("title",t.data("title-"+e)).text(t.data("verb-"+e))},P=!1,R=function(t){return t.closest("div.vote").children('input[type="hidden"]').val()},L=function(t){if(!P){P=!0;var e=R(t);t.addSpinner(),$.ajax({"type":"GET","url":"/posts/{postId}/vote-counts".formatUnicorn({"postId":e}),"dataType":"json","success":function(e){StackExchange.helpers.removeMessages();var n='<div style="color:green">'+e.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+e.down+"</div>";t.html(n).unbind("click").data("bound",!1).css("cursor","default").attr("title",function(t){return 1==t.upCount&&1==t.downCount?t.upCount+" up / "+t.downCount+" down":1==t.upCount?t.upCount+" up / "+t.downCount+" down":(1==t.downCount,t.upCount+" up / "+t.downCount+" down")}({"upCount":Math.abs(+e.up),"downCount":Math.abs(+e.down)}))},"error":function(e){t.removeSpinner().parent().showErrorMessage(e.responseText&&e.responseText.length<100?e.responseText:"An error occurred during vote count fetch",{"transient":409==e.status})},"complete":function(){P=!1}})}},N=function(t){(t||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").filter(function(){return R($(this))}).attr("title",n).css("cursor","pointer").click(function(){L($(this))}).data("bound",!0)},D=function(t){c(t),p().unbind("click").click(function(t){t.preventDefault();var e=this.id.substring("protect-post-".length);return confirm("Are you sure you want to protect this question?")&&$.ajax({"type":"POST","url":"/question/protect","data":{"id":e,"fkey":StackExchange.options.user.fkey},"success":function(){location.reload(!0)}}),!1}),f().unbind("click").click(function(t){t.preventDefault();var e=this.id.substring("unprotect-post-".length);return confirm("Are you sure you want to unprotect this question?")&&$.ajax({"type":"POST","url":"/question/unprotect","data":{"id":e,"fkey":StackExchange.options.user.fkey},"success":function(){location.reload(!0)}}),!1}),StackExchange.vote_closingAndFlagging.init(),C()};return{"init":function(t){var e=!StackExchange.options.user.isRegistered;e?StackExchange.question.bindAnonymousVoteDisclaimers():D(t),d().not(":data(bound)").on({"click":j,"update":O}).data("bound",!0).trigger("update"),StackExchange.question.bindFetchAcceptedAnswerDates(),StackExchange.question.canViewVoteCounts()&&N(),I()},"up":u,"down":l,"vote_init":c,"favorite_init":C,"delete_init":I,"bindFetchVoteCounts":N,"highlightExistingVotes":r,"submit":y,"voteTypeIds":e,"getPostId":v}}(),StackExchange.vote_closingAndFlagging=function(){function t(){T=I=_=q=null}function e(e,i){t(),T=e.data("questionid"),I=e,e.data("isclosed")?(i||confirm("Nominate this question for reopening?"))&&g():n(!0)}function n(t){$("#popup-close-question").remove();var e=I.closest(".post-menu");0==e.length&&(e=I.parent()),I.data("isclosed")===!1&&I.addSpinnerAfter({"padding":"0 3px"});var n={};E&&E.reviewTaskIdGetter&&(n.reviewTaskId=E.reviewTaskIdGetter());var a=$.ajax({"type":"GET","url":"/flags/questions/{questionId}/close/popup".formatUnicorn({"questionId":T}),"dataType":"html","data":n}).done(function(n){_=$(n).elementNodesOnly(),_.appendTo(e),i(),E&&E.closeShowPopup?E.closeShowPopup(_,I):t&&_.center().fadeIn("fast"),StackExchange.helpers.bindMovablePopups()}).fail(function(t){t.responseText?e.showErrorMessage(t.responseText,{"transient":409==t.status}):e.showErrorMessage("Unable to load popup - please try again")}).always(function(){StackExchange.helpers.removeSpinner()});return a}function i(){_.find(".popup-close").click(function(){StackExchange.helpers.closePopups(".popup")}),_.on("popupClose",function(){q&&q.remove()}),_.find("input[type=radio]").click(r),$("#close-question-form").submit(function(t){return t.preventDefault(),h(),!1}),$(".retract-close-vote").click(function(){w($(this))}),$(".action-list a").attr("target","_blank"),a(),o()}function a(){var t=$(".close-as-duplicate-pane"),e=t.find("#search-text");t.on("show",function(){$("#search-text").focus(),$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling"),e.helpOverlay().typeWatch({"highlight":!1,"wait":750,"captureLength":-1,"callback":function(){p(e)}})}function o(){var t=_.find(".off-topic-other-comment-container"),e=t.find("textarea"),n=t.closest("li").find("input[type=radio]"),i=$.trim(e.val()),a=function(){return $.trim(e.val())!=i},o=function(t){var n=t&&a();e.is(":focus")&&_.find(".popup-submit").enable(n)};e.charCounter({"target":t.find(".text-counter"),"min":30,"max":500,"setIsValid":o}),n.click(function(){t.show(),e.focus();var n=e.val();e.val("").val(n)}),e.focus(function(){n.is(":checked")||n.attr("checked","checked")})}function r(){var t=$(this),e=t.closest("li");if(!e.hasClass("action-selected")){var n=_.find(".popup-subpane").filter(function(){var e=t.data("subpane-name");return e&&e==$(this).data("subpane-name")}),i=_.find(".popup-submit");n.length?(s(n,$(".popup-active-pane"),!0),n.hasClass("handles-submit-button-enabling")||i.disable()):(i.enable(),_.find(".popup-active-pane li.action-selected").removeClass("action-selected"),e.addClass("action-selected"))}}function s(t,e,n){if(_.find(".popup-active-pane").removeClass("popup-active-pane").hide(),_.find(".popup-title").html(t.data("title")),n){var i=e.data("breadcrumb")||e.data("title");u(i,function(){s(e,t,!1),c(t)})}c(t),t.addClass("popup-active-pane").show().trigger("show").asyncLoad()}function c(t){t.find("input[type=radio]:checked").removeAttr("checked"),t.find("li.action-selected").removeClass("action-selected"),_.find(".popup-submit").disable()}function u(t,e){var n=$(".popup-title-container .popup-breadcrumbs"),i=$("<span>").addClass("breadcrumb");$("<a>").text(t).click(function(){i.nextAll().andSelf().remove(),e()}).appendTo(i),$("<span>").addClass("arrow").html("&gt;").appendTo(i),i.appendTo(n)}function l(){u("Flagging",function(){var t=_.offset();StackExchange.options.isMobile||q.css({"top":t.top,"left":t.left}),_.hide(),q.fadeIn("fast"),s(_.find("#pane-main"),_.find(".popup-active-pane"),!1)})}function d(t){var e=t.find(".list-originals");return 0==e.children().length?(e.hide(),void 0):(e.show(),f(e,!0),styleCode(),e.find(".item").click(function(){var t=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),e=$("#search-text").hideHelpOverlay().val(t.attr("href"));return p(e,t),!1}).hover(function(){$(this).toggleClass("hover")}),void 0)}function p(t,e){var n=t.closest(".popup-subpane"),i=n.find(".preview"),a=n.find(".list-container"),o=n.find(".search-errors").empty(),r=$("#original-question-id"),s=n.closest("#popup-close-question").find(".popup-submit");if(s.disable(),i.html("").hide(),0!=$.trim(t.val()).length){e||n.find(".search-spinner").addSpinner();var c={"q":t.val()};E&&E.reviewTaskIdGetter&&(c.reviewTaskId=E.reviewTaskIdGetter()),$.ajax({"type":"GET","url":"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),"data":c,"dataType":"html"}).done(function(t){var e=$(t).elementNodesOnly().mathjax();if(e.hasClass("show-original"))a.hide(),f(e),i.empty().append(e).show(),e.find(".question .show-title a").attr("target","_blank"),e.find(".post-tag").addClass("user-tag"),r.val(e.find(".question").data("questionid")),s.enable();else{if(!e.hasClass("list-originals"))throw"these are not the results you were looking for";a.empty().append(e).show(),d(a)}}).fail(function(t){var e=t.responseText&&t.responseText.length<100?t.responseText:"An error occurred while searching; please try again";o.text(e),s.disable(),r.val(""),n.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()})}}function f(t,e){var n=$(".close-as-duplicate-pane .original-display").find(".navi-container"),i=t.find(".navi"),a=$("#search-text");if(e)n.empty();else{var o=n.find(".navi");if(1!=o.length)return;o.empty(),$("<a>").text(o.data("abbr")).click(function(){o.html(o.data("text")).siblings().remove(),n.siblings(".preview").hide(),n.siblings(".list-container").show(),$("#original-question-id").val(""),$("#popup-close-question").find(".popup-submit").disable(),$(".close-as-duplicate-pane").find(".search-errors").empty(),a.val(o.data("search-text")).focus()}).appendTo(o)}i.data("search-text",a.val()).text(i.data("text")).prependTo(n)}function h(){var t=_.find(".popup-submit");if(!t.attr("disabled")){$(".remaining-votes").addSpinner({"position":"absolute","margin":"18px 0 0 3px"}),t.disable();var e=function(t,e){return _.find(t+' input[type=radio][name="'+e+'"]:checked').val()};return E&&E.closeSubmitting&&E.closeSubmitting()===!1?(_.find(".popup-close").click(),void 0):($.ajax({"type":"POST","url":"/flags/questions/{questionId}/close/add".formatUnicorn({"questionId":T}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"closeReasonId":e("#pane-main","close-reason"),"duplicateOfQuestionId":$("#original-question-id").val(),"closeAsOffTopicReasonId":e(".close-as-off-topic-pane","close-as-off-topic-reason"),"belongsOnBaseHostAddress":e(".migration-pane","migration"),"offTopicOtherText":_.find(".off-topic-other-comment-container textarea").val(),"offTopicOtherCommentId":_.find(".close-as-off-topic-pane input[type=radio]:checked").data("other-comment-id"),"originalOffTopicOtherText":_.find('.off-topic-other-comment-container input[name="original_text"]').val()}}).done(function(t){m(t)}).fail(function(){I.parent().showErrorMessage("An error occurred; please try again")}).always(function(){_.find(".popup-close").click()}),void 0)}}function g(){I.is(":working")||(I.working(!0).addSpinner({"margin":"0 3px"}),$.ajax({"type":"POST","url":"/flags/questions/{questionId}/reopen/add".formatUnicorn({"questionId":T}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey}}).done(function(t){m(t)}).fail(function(){I.working(!1).parent().showErrorMessage("An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function m(t){t.isClose="QuestionClose"==t.FlagType,t.isRecommendClose="QuestionRecommendClose"==t.FlagType,t.isReopen="QuestionReopen"==t.FlagType,t.verb=t.isRecommendClose?"flag":t.isReopen?"reopen":"close";var e=I;t.isClose&&I.is('[class*="flag-post-"]')&&(e=I.parent().find("a[class*='close-question']")),t.Success?v(t,e):x(t,e)}function v(t,e){if(!(E&&E.closeCallback&&E.closeCallback(e,t,t.isRecommendClose))){var n=function(){var t=window.location.href.splitOnLast("#")[0],e="noredirect=1";t.indexOf(e)<0&&(t+=(t.indexOf("?")<0?"?":"&")+"noredirect=1"),window.location.href=t};return t.ResultChangedState?(n(),void 0):("Duplicate"!=t.CloseReason&&t.CloseAsOffTopicReasonId!=A||0!=e.closest(".mod-post-header").length||StackExchange.comments.loadAll(e),t.Tooltip&&e.attr("title",t.Tooltip),t.Message?(b(t,e),void 0):(n(),void 0))}}function b(t,e){if(e.parent().showInfoMessage(t.Message),!t.isRecommendClose&&t.Count>0){e=e.closest(".post-menu").find(".close-question-link");var n=e.find(".existing-flag-count");0==n.length&&(e.text(e.text()+" "),n=$('<span class="existing-flag-count">').appendTo(e)),n.text(t.Count)}}function x(t,e){var n=t.Message;if(!n)switch(t.verb){case"flag":n="A problem occurred when trying to flag";break;case"reopen":n="A problem occurred when trying to reopen";break;case"close":n="A problem occurred when trying to close"}E&&E.closeErrorCallback&&E.closeErrorCallback(n)||(e.parent().showErrorMessage(n),t.RefreshClient&&setTimeout(function(){location.reload(!0)},2500))}function w(t){!t.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(t.disable().addSpinnerBefore({"position":"absolute","margin":"18px 0 0 -25px"}),$.ajax({"type":"POST","url":"/flags/questions/{questionId}/close/retract".formatUnicorn({"questionId":T}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey}}).done(function(t){b(t,I)}).fail(function(){I.parent().showErrorMessage("An error occurred; please try again")}).always(function(){_.find(".popup-close").click()}))}function k(e){t(),T=e.data("postid"),I=e;var n={};E&&E.reviewTaskIdGetter&&(n.reviewTaskId=E.reviewTaskIdGetter()),e.loadPopup({"url":"/flags/posts/{postId}/popup".formatUnicorn({"postId":T}),"loaded":y,"data":n,"hideDescriptions":!1,"subformShow":j,"dontCenter":E&&E.flagShowPopup})}function y(t){q=t,M(),q.find(".js-flag-load-close").unbind("click").click(function(){C?C(q,$(this)):O($(this))}),q.find("form").submit(function(t){return t.preventDefault(),P(),!1}),S(),E&&E.flagShowPopup?E.flagShowPopup(t,I):StackExchange.helpers.bindMovablePopups()}function S(){q.find(".action-list > .disabled-action").each(function(){var t=$(this);t.find("input[type=radio]").attr("disabled","disabled"),t.find(".action-name").addClass("disabled-button")})}var E,C,T,I,_,q,A=3,M=function(){var t=q.find(".popup-submit"),e=q.find('textarea[name="otherText"]'),n=q.find('input[value="PostOther"]');e.focus(function(){e.hideHelpOverlay(),n.is(":checked")||n.attr("checked","checked")}).charCounter({"min":10,"max":500,"setIsValid":function(e){n.is(":checked")&&t.enable(e)}}),n.click(function(){e.focus()})},j=function(t){if(t.is(".mod-attention-subform")){var e=t.find('textarea[name="otherText"]').helpOverlay();t.find('input[value="PostOther"]:checked').length>0?e.focus():0==t.find("input:radio:checked").length&&t.closest(".popup").find(".popup-submit").disable()}},O=function(t){var e=q.offset(),i=q.fadeOut("fast").promise();_||(t.siblings(".action-name").addSpinner({"margin":"0 5px"}),i=n(!1)),i.done(function(){l(),t.is(".js-flag-load-close-duplicate")&&_.find("input[value=Duplicate]").click(),StackExchange.options.isMobile||_.css({"top":e.top,"left":e.left}),_.fadeIn("fast")}),q.find(".popup-submit").disable(),t.removeAttr("checked"),q.find(".action-list li").trigger("hide-action")},P=function(){q.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var t=q.find('input[name="top-form"]:checked').val(),e="";return"PostOther"==t&&(e=q.find('textarea[name="otherText"]').val()),E&&E.flagSubmitting&&E.flagSubmitting()===!1?(StackExchange.helpers.closePopups(".popup"),void 0):($.ajax({"type":"POST","url":"/flags/posts/{postId}/add/{flagType}".formatUnicorn({"postId":T,"flagType":t}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"otherText":e}}).always(function(){StackExchange.helpers.closePopups(".popup")}).done(function(t){E&&E.flagCallback&&E.flagCallback(I,t)||(t.ResultChangedState?location.reload(!0):t.Message&&(t.Success?I.parent().showInfoMessage(t.Message):I.parent().showErrorMessage(t.Message)))}).fail(function(t){var e=t.responseText&&t.responseText.length<100?t.responseText:"An error occurred during flagging";I.parent().showErrorMessage(e)}),void 0)};return{"close_afterLoadListOriginals":d,"updateCloseLinkCount":b,"init":function(t){E||(E=t);var n=".close-question-link, .close-question-button",i=function(t,n){t.preventDefault(),e($(this),!!n)};$("body").off("click",n).on("click",n,i);var a=".flag-post-link, .flag-post-button",o=function(t){t.preventDefault(),k($(this))};$("body").off("click",a).on("click",a,o)}}}(),function(){function t(t,e){this.commentId=t,this.jComment=e,this.postUi=s(e)}function e(e){var n=e.constructor===$?e:$(e),i=n.hasClass("comment")?n:n.closest(".comment"),a=i.attr("id").replace(/^comment-/,"");return new t(a,i)}function n(e,n){n||(c=e),e=e||c||{};for(var i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])}function i(t,e,n){/Android/.test(navigator.userAgent)&&$(e,t).bind("touchstart",function(t){var e=$(t.target);if(!e.is(n))return!0;var i=e.data("events");return i&&i.click&&i.click.length?!0:(e.click(function(){}).attr("data-nothing-to-see-here","X"),!0)})}function a(t,n,a){$(".comments",t).delegate(n,"click",function(){e(this)[a]()}),i(t,".comments",n)}var o,r=StackExchange.comments,s=r.uiForPost;r.extendPostUi({"ensureInput":function(){var t=this.jDiv.find('form[id^="add-comment-"]'),e=this;return t.children().length?(t.add(t.prev()).show(),t.find("textarea")):l(t,"Add Comment",!1,function(){e.submitNewComment()})},"saveEditingComments":function(t){var n=this.editingComments=[];this.jDiv.find("form[id^='edit-comment-']:visible").each(function(){var i=e(this);if(i.commentId!==t){var a=$(this).find("textarea");n.push([i.commentId,a.val()])}})},"restoreEditingComments":function(){if(this.editingComments){$.each(this.editingComments,function(t,n){var i=n[0],a=n[1],o=$("#comment-"+i);o.length&&e(o).edit(a,!0)}),delete this.editingComments}},"commentsShown":function(){try{var t=this.jDiv.find("form[id^='add-comment-'] textarea:focus");t.length&&StackExchange.comments.tabCompleter.init(t),this.jtBody.data("remaining-comments-count",0)}catch(e){}},"submitNewComment":function(){var t=this.jDiv.find('form[id^="add-comment-"]'),e=t.find("textarea"),n=this,i=t.find('input[type="submit"]').parent();this.ajax({"type":"POST","url":"/posts/"+this.postId+"/comments","dataType":"html","data":{"comment":e.val(),"fkey":StackExchange.options.user.fkey}},"An error occurred during comment submission",i).done(function(i){e.val("").keyup().blur(),StackExchange.helpers.enableSubmitButton(t),t.add(t.prev()).hide(),n.showComments(i),n.jCommentsLink.show(),$(document).trigger("comment",n.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(t)})},"checkDiscussion":function(){var t=this.jDiv.find("tr.is-comment-discussion"),e=this;if(t.length){t.remove();var n=this.jDiv.find(".comment-form");if(!n.find(".discussion-info").length){{$("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>"+function(t){return"Please avoid extended discussions in comments. Would you like to "+t.aStart+"automatically move this discussion to chat?"}({"aStart":"<a href='#'>"})+"</a></div>").find("a").click(function(t){$(this).unbind("click"),t.preventDefault(),e.ajax({"url":"/posts/"+e.postId+"/move-discussion-to-chat","data":{"fkey":StackExchange.options.user.fkey},"type":"POST"},"An error occurred when trying to move the discussion to chat",n).done(function(t){t.success?window.location.href=t.message:StackExchange.helpers.showErrorMessage(n,t.message)})}).end().prependTo(n)}t.remove()}}}}),t.prototype={"undoVoteUp":function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var t=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),e=this;this.submitVote(0).done(function(n){return n.Success?(t.closest("tr").siblings("tr").show(),e.renderScore(n.NewScore),t[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",e.postUi.postId),void 0):(t.removeClass("comment-up-off comment-up").addClass("comment-up-on"),void 0)}).fail(function(e){409===e.status&&t.addClass("comment-up-undo"),t.removeClass("comment-up").addClass("comment-up-on")})}},"voteUp":function(){var t=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),e=this;this.submitVote(2).done(function(n){return n.Success?(t.removeClass("comment-up-off"),t.addClass("comment-up-undo"),e.renderScore(n.NewScore),t[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",e.postUi.postId),void 0):(t.removeClass("comment-up-on").addClass("comment-up"),void 0)}).fail(function(){t.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var t=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(e){var n=t.postUi.jDiv.find("textarea");e.Success&&(0!==t.jComment.siblings(".comment").length||n.is(":visible")||t.jComment.closest(".comments").addClass("dno"),t.jComment.remove())})},"flag":function(){function t(t){var n=t.find('textarea[name="other-text"]').charCounter({"min":6,"max":200,"setIsValid":function(){r()}}),i=t.find('input[name="comment-flag-type"]'),a=i.filter('[value="'+n.data("flag-type")+'"]'),o=t.find(".text-counter"),r=function(){var e=i.filter(":checked").length>0;if(a.is(":checked")){var r=!n.is(":visible"),s=n.show().val().length;o.show(),e=s>=6&&200>=s,r&&n.focus()}else n.hide(),o.hide();t.find(".popup-submit").enable(e)};i.click(r),r(),t.find("form").submit(function(){var o=i.filter(":checked").val(),r=a.is(":checked")?n.val():"";return t.fadeOutAndRemove(),e.submitFlag(o,r).done(function(t){if(!t.Success)return t.Message&&e.jComment.find(".comment-flag").closest("td").showErrorMessage(t.Message),void 0;if(t.ResultChangedState)e.jComment.remove();else{var n=e.jComment.find(".comment-up"),i=$("<div/>").addClass("comment-flag").addClass("flag-on").addClass("comment-flag-indicator");i[0].title="You have already flagged this comment",i.text("flag"),n.length?(n.replaceWith(i),e.jComment.find("a.comment-flag").fadeOutAndRemove()):e.jComment.find("a.comment-flag").replaceWith(i)}}),!1})}var e=this;this.jComment.find(".comment-flag").loadPopup({"url":"/flags/comments/{commentId}/popup".formatUnicorn({"commentId":this.commentId}),"loaded":t})},"submitFlag":function(t,e){var n=this.jComment.find(".comment-actions"),i={"type":"POST","url":"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({"commentId":this.commentId,"flagTypeId":t}),"data":{"fkey":StackExchange.options.user.fkey,"otherText":e},"dataType":"json"};return this.postUi.ajax(i,"An error occurred during flagging",n,!0)},"edit":function(t,e){var n=this.jComment,i=n.find('form[id^="edit-comment-"]'),a=this;if(i.length){n.find(" > td > *").not(i).hide(),n.find("td:last").addClass("comment-form"),StackExchange.options.isMobile&&i.addClass("mobile-comment-form");var o=l(i,"Save Edits",!0,function(){a.submitEdit()});o.val(t||i.find("div").text()),o.trigger("charCounterUpdate"),i.show(),e||o.focus()}},"cancelEdit":function(){var t=this.jComment,e=t.find('form[id^="edit-comment-"]');StackExchange.options.isMobile?(e.children("*:not(.dno)").remove(),t.find("td:last").removeClass("mobile-comment-form")):e.children("table").remove(),e.hide(),e.unbind("submit"),t.find("td:last").removeClass("comment-form"),t.find(" > td > *").not(e).show()},"submitEdit":function(){var t=this.jComment.find('form[id^="edit-comment-"]'),e=t.find("textarea"),n=e.val(),i=this;this.postUi.ajax({"type":"POST","url":"/posts/comments/"+this.commentId+"/edit","dataType":"html","data":{"comment":n,"fkey":StackExchange.options.user.fkey}},"An error occurred during comment submission",t).done(function(t){i.postUi.showComments(t,i.commentId)}).fail(function(){StackExchange.helpers.enableSubmitButton(t)})},"submitVote":function(t,e){var n=this.jComment.find("td:first"),i={"fkey":StackExchange.options.user.fkey};if(e)for(var a in e)i[a]=e[a];var o={"type":"POST","url":"/posts/comments/"+this.commentId+"/vote/"+t,"dataType":"json","data":i,"success":function(t){!t.Success&&t.Message&&StackExchange.helpers.showErrorMessage(n,t.Message)}};return this.postUi.ajax(o,"An error occurred during voting",n,!0)},"renderScore":function(t){var e="";if(t&&t>0){var n=5>t?"":15>=t?"warm":30>=t?"hot":"supernova";e+='<span title="number of \'useful comment\' votes received" class="'+n+'">'+t+"</span>"}this.jComment.find(".comment-score").html(e)}};var c,u=function(t){t.find("textarea").keyup(function(e){13!=e.which||e.shiftKey||$(this).prev("#tabcomplete:visible").length||t.submit()}).keypress(function(t){return 13!=t.which||t.shiftKey?void 0:!1})},l=function(t,n,i,a){var r;r=t.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><br/><input type="submit" value="'+n+'"/>'+(i?' <a tabindex="0" class="edit-comment-cancel">cancel</a>':""):'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+n+'"/>'+(i?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>',t.append(r),t.find("textarea").attr("placeholder",t.data("placeholdertext")),i&&t.find(".edit-comment-cancel").click(function(){e(t).cancelEdit()});var s=!1,c=function(t){s=t},l=t.find("textarea");return l.charCounter({"min":15,"max":600,"setIsValid":c}).focus(function(){StackExchange.comments.tabCompleter.init($(this))}),t.find(".comment-help-link").click(d),o&&l.one("focus",d),t.submit(function(){return s?(StackExchange.helpers.disableSubmitButton(t),a(t)):t.find("span.text-counter").animate({"opacity":0},100,function(){$(this).animate({"opacity":1},100)}),!1}),StackExchange.options.desc||u(t),l},d=function(t){var e,n=$(this).closest("tbody"),i=n.find(".comment-help-link"),a=$(".comment-help",n);if("click"==t.type)e=0==a.length||!a.is(":visible"),e||(d.manualOnly=!0);else{if(d.manualOnly)return;e=!0}var o=function(){i.text(e?"hide help":"help")};if(a.length>0)return e?a.slideDown(o):a.slideUp(o),void 0;if(e){var r=$("<tr />").appendTo(n),s=$("<td colspan='2' />").appendTo(r);if(d.helpText)s.html(d.helpText),$(".comment-help",s).slideDown(o);else{if(d.inProgress)return;d.inProgress=!0,StackExchange.helpers.addSpinner(i),s.load("/posts/comment-help",function(t){d.helpText=t,StackExchange.helpers.removeSpinner(),$(".comment-help",this).slideDown(o),d.inProgress=!1})}}},p=r.init;r.init=function(t){p(t),o=t&&t.autoShowCommentHelp;var e=t&&t.post||document;a(e,".comment-up","voteUp"),a(e,".comment-delete,.comment-delete-empty","delete"),a(e,"a.comment-flag","flag"),a(e,".comment-edit","edit"),a(e,".comment-up-undo","undoVoteUp"),$("form.comment-form-expanded",e).each(function(){s(this).addShow(!0,!0)}),n(null,!0)},r.extendCommentUi=n}(),StackExchange.comments.tabCompleter=function(){function t(t){return StackExchange.helpers.noDiacritics(t.replace(/ /g,"").toLowerCase())}function e(t){var e=$("#tabcomplete");e.empty(),t.length>5||!t.length||$.each(t,function(t,n){var i=$("<li/>").text(n).appendTo(e);n.toLowerCase()==l.toLowerCase()&&i.addClass("chosen")})}function n(){var t=u.caret().start,e=u.val(),n=!1;if(/@[^\s!?();:+"].*@/.test(e)){if(!/`/.test(e))return null;n=!0}var i=e.substring(t).search(/[\s!?();:+"\[\]\\]/);-1==i&&(i=e.length-t);var a=e.substring(0,t+i).match(/@[^\s!?();:+"\[\]\\]*$/);if(!a)return null;var o=a[0].substr(1),r=t+i,s=r-o.length;return n&&/@[^\s!?();:+"]/.test(e.substr(0,s-1))?null:{"start":s,"pos":t,"end":r,"name":o}}function i(t){var e=n();if(e.name===t)return u.is(":focus")||u.focus(),void 0;var i=u.val();u.val(i.substring(0,e.start)+t+i.substring(e.end));var a=e.start+t.length;u.caret(a,a)}function a(t){var e,n;if(9==t.which){if(n=$("#tabcomplete li"),!n.length)return;var a=n.filter(".chosen").removeClass("chosen"),o=t.shiftKey?a.prev():a.next();o.length||(o=t.shiftKey?n.last():n.first()),e=o.addClass("chosen").text()}else{if(27!=t.which)return;if(n=$("#tabcomplete li"),!n.length)return;e=l,l=null}t.preventDefault(),i(e)}function o(i){if(i.which)switch(i.which){case 9:case 16:case 17:case 18:case 220:return
}var a=n();if(!a)return l=null,e([]),void 0;if(l!=a.name){var o=[];l=a.name;var r;r=a.name?new RegExp("^"+t(a.name).replace(/\./g,"\\."),"i"):/^\W/;for(var s=c.length,u=0;s>u;u++){var d=c[u],p=d.name,f=a.name?t(p):p;f.match(r)&&o.push(p.replace(/ /g,""))}e(o)}}function r(t){return t?parseInt(t.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null:null}function s(t){if(!StackExchange.options.isMobile){var e=t.closest("div.comments"),n=e.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),i=r(n.attr("href")),s=[];e.find("a.comment-user").each(function(t,e){var n=e.firstChild;if(3!==n.nodeType)return StackExchange.debug.log("unexpected structure in comment owner link"),void 0;var i=n.nodeValue,a=r($(e).attr("href"));a!==StackExchange.options.user.userId&&s.push({"id":a,"name":i})}),c=[];for(var d={},p=s.length-1;p>=0;p--){var f=s[p];d[f.id]||(c.push(f),d[f.id]=!0)}if($("#tabcomplete").remove(),u&&u.unbind($.browser.opera?"keypress":"keydown",a).unbind("keyup click",o),0===c.length||1===c.length&&c[0].id===i)return u=null,void 0;u=t,l=null,$("<ul id='tabcomplete' />").insertBefore(t),t.bind("keydown",a).bind("keyup click",o)}}var c,u,l=null;return $("#tabcomplete > li").live("mousedown",function(){var t=$(this);return t.parent().find("li.chosen").removeClass("chosen"),i(t.addClass("chosen").text()),!1}),{"init":s}}(),StackExchange.inlineEditing={"init":function(){function t(t,e,n,i){e.fadeIn(n,i),t.hide()}$(".post-menu .edit-post").live("click",function(e){if(!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)){var n=$(this),i=n.closest(".question, .answer");if(1==n.data("handling-event"))return!1;n.data("handling-event",1),i.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);var a=$("#show-editor-button"),o=a.is(":visible");o&&a.hide(),n.addSpinner();var r="",s=i.hasClass("answer");s&&(r=" class='answer'");var c=i.find(".postcell,.answercell"),u=c.find("> *"),l=$('<div class="inline-editor"/>').hide().appendTo(c);return l.load(n.attr("href")+"-inline",function(e,r){var d;if(l.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))}),StackExchange.helpers.removeSpinner(),i.offset().top<$(window).scrollTop()&&$("html, body").animate({"scrollTop":$(i).offset().top-55},200),"error"==r)StackExchange.helpers.showErrorMessage(c,"The post could not be loaded"),l.remove(),n.data("handling-event",0);else{t(u,l,300);var p=function(e){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}return o&&a.show(),n.data("handling-event",0),t(l,e,300,function(){l.remove()}),e.offset().top<$(window).scrollTop()&&$("html, body").animate({"scrollTop":$(i).offset().top-55},200),!1},f="input keyup",h=function(){w.unbind(f,g),S.trigger(d)},g=function(){return S.trigger(w[0].value),!0};l.find(".cancel-edit").click(function(){h(),p(u)});var m=StackExchange.helpers.DelayedReaction(function(t){$.ajax({"type":"POST","data":{"hide":t},"url":"/user/save-pref/hide-preview-for-inline-editing"})},1e3,{"sliding":!0}),v=l.find(".hide-preview");v.click(function(){var t=l.find(".wmd-preview"),e=t.is(":visible");return e?(t.slideUp(),v.text("show preview")):(t.slideDown(),v.text("hide preview")),m.trigger(e),!1});var b=l.find('input[type="submit"]'),x=(b.attr("id").replace("submit-button",""),l.find("form")),w=l.find("#title"),k=$("#question-header a"),y=w.data("question-state-suffix");y=y?" "+y:"",d=w.val();var S=StackExchange.helpers.DelayedReaction(function(t){"undefined"!=typeof t&&(k.text(t+y),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,k[0]]))},{"sliding":!0});w.bind(f,g),l.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(t){return t.ctrlKey===!0&&13==t.keyCode?(x.submit(),!1):27==t.keyCode?(h(),p(u),!1):void 0}),StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(x,s?2:1,"edit",!1,function(t){var e=t.html,n=$(e).hide();c.replaceWith(n),s||$("#question-header a").text(t.title),$("html").trigger("inline-edit-complete",[n,t.title]),styleCode(),p(n)})})}}),!1}})}},StackExchange.tooltips=function(){function t(){}function e(e,n){function i(){if(o++,!(o>=e.length)){var n=e[o],r=$('<div class="user-tooltip"></div>');r.append($('<div class="user-tooltip-message"></div>').html(n.message));var s=!n.dont_show_controls;if(s){var c=$('<div class="user-tooltip-controls"></div>');c.append($('<span class="user-tooltip-disable"></span>').html("<a href='#'>don't show me tips</a>")),o==e.length-1?c.append($('<span class="user-tooltip-done"></span>').html("<a href='#'>done!</a>")):c.append($('<span class="user-tooltip-next"></span>').html("<a href='#'>next >></a>")),c.find(".user-tooltip-next a").click(function(t){return n.evt_on_next&&StackExchange.gps.track(n.evt_on_next,n.evt_on_next_params),n.trackDismiss=!1,i(),t.preventDefault(),!1}),c.find(".user-tooltip-done a").click(function(t){return n.evt_on_done&&StackExchange.gps.track(n.evt_on_done,n.evt_on_done_params),n.trackDismiss=!1,a.remove(),t.preventDefault(),!1}),c.find(".user-tooltip-disable a").click(function(e){return n.evt_on_dismiss_all&&StackExchange.gps.track(n.evt_on_dismiss_all,n.evt_on_dismiss_all_params),n.trackDismiss=!1,a.remove(),t(),e.preventDefault(),!1}),r.append(c)}var u=function(){n.trackDismiss&&n.evt_on_dismiss_msg&&StackExchange.gps.track(n.evt_on_dismiss_msg,n.evt_on_dismiss_msg_params)};a=StackExchange.helpers.showMessage($(n.selector),r,{"dismissable":"x-or-esc","position":n.position,"transient":!1,"type":"info","tip":"top left","dismissing":u}),n.trackDismiss=!0,a.addClass("tooltip-message"),n.evt_on_show&&StackExchange.gps.track(n.evt_on_show,n.evt_on_show_params)}}var a,o=-1;if(n&&n.queryStringTrigger){var r=n.queryStringTrigger+"=";if(window.history&&window.location.search&&-1!=window.location.search.indexOf(r)){var s=window.location.search,c=s.indexOf(r),u=s.indexOf("&",c);-1==u&&(u=s.length-1),u++;var l=s.substring(0,c)+s.substring(u,s.length);l.length>0&&"&"==l[l.length-1]&&(l=l.substring(0,l.length-1));var d=window.location.toString().replace(s,l);window.history.replaceState({},window.title,d)}}i()}return{"startFlight":e}}(),StackExchange.vote_bounty=function(){var t,e=function(e,n,i){var a=$(".bounty-vote");if(i.Success){$(".bounty-notification").remove(),t=!1;var o=e.closest("td.votecell").parent().find("span.reputation-score:last");if(i.Message){var r=$(i.Message);o.text(r.text()).attr("title",r.attr("title"))}var s=e.closest("div.vote").find(".bounty-award-container");if(s.length>1){var c=s.filter(":first").find(".bounty-award"),u=parseInt(c.text(),10),l=parseInt(e.text(),10);c.text("+"+(u+l)),a.remove()}else e.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),a.not(e).remove()}else StackExchange.helpers.showErrorMessage(e.parent(),i.Message),a.removeClass("disabled")},n=function(){return t?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):!0},i=function(t){var i=StackExchange.vote.getPostId(t);n(i)&&($(".bounty-vote").addClass("disabled"),StackExchange.vote.submit({"$target":t,"postId":i,"voteTypeId":StackExchange.vote.voteTypeIds.bountyClose,"success":e}))},a=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")}),$(".bounty-vote:not(.disabled)").live("click",function(){i($(this))})},o=function(t,e){return e=$(e||$(".bounty-link")),e=e.off("click",r),t&&e.on("click",r),e},r=function(){var t=o(!1,this);t.addSpinnerAfter({"padding":"0 3px"});var e=$(t).closest(".question").find("div.vote input").val();$.ajax({"type":"GET","url":"/posts/bounty/"+e,"dataType":"html","success":function(e){var n=$(e);n.appendTo(t.parent()),n.find(".popup-close").click(function(){n.fadeOutAndRemove()}),n.center().fadeIn("fast")},"error":function(){t.parent().showErrorMessage("Unable to load popup - please try again")},"complete":function(){StackExchange.helpers.removeSpinner(),o(!0,t)}})},s=function(){o(!0)};return{"init":function(e){t=!!e.hasOpenBounty,e.canOpenBounty&&s(),e.hasOpenBounty&&a()}}}();