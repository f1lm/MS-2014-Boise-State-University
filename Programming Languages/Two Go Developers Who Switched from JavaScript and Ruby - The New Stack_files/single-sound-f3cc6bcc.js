
define("layouts/single-sound",["require","exports","module","views/sound/container","lib/views/single-sound"],function(a,b,c){var d,e=a("views/sound/container"),f=a("lib/views/single-sound");d=c.exports=f.extend({SoundView:e})}),
define("views/sound/container",["require","exports","module","models/audible","views/sound/compact-sound","views/sound/mini-sound","views/sound/sound","lib/view","lib/window-events"],function(a,b,c){function m(){n.call(this)}function n(){var a=this.model,b=this.subviews.sound,c=o.call(this);b&&b instanceof c||(b&&b._dispose(),b=this.addSubview(new c({resource_id:a.resource_id,resource_type:a.resource_type}),"sound"),this.$el.append(b.el),b.render())}function o(){var a=l.height();return a<=k.MINI?g:a<k.DEFAULT?f:h}var d,e=a("models/audible"),f=a("views/sound/compact-sound"),g=a("views/sound/mini-sound"),h=a("views/sound/sound"),i=a("lib/view"),j=a("lib/window-events"),k={MINI:20,COMPACT:116,DEFAULT:160},l=$(window);d=c.exports=i.extend({className:"soundContainer g-box-full",template:function(){return""},ModelClass:e,setup:function(){j.on("resize:debounced",m,this)},dispose:function(){j.off("resize:debounced",m,this)},renderDecorate:function(){this.whenInserted().done(n.bind(this))}})}),
define("lib/views/single-sound",["require","exports","module","config/error-messages","lib/views/mixins/audio-ad-prefetch","lib/mixins/performance-measuring","models/sound","lib/view","lib/views/mixins/widget-container","lib/views/single-sound.css"],function(a,b,c){var d,e=a("config/error-messages"),f=a("lib/views/mixins/audio-ad-prefetch"),g=a("lib/mixins/performance-measuring"),h=a("models/sound"),i=a("lib/view"),j=a("lib/views/mixins/widget-container");d=c.exports=i.extend(j,f,g,{ModelClass:h,performanceSelector:".playButton",SoundView:null,css:a("lib/views/single-sound.css"),className:"singleSound g-box-full",template:function(){return""},defaults:{resource_id:null,resource_type:null},renderDecorate:function(){var a=this.subviews.sound;a||(a=this.addSubview(new this.SoundView(this.options),"sound")),this.$el.empty().append(a.render().el)},getFetchErrorMessage:function(){return e.SOUND_NOT_FOUND}})}),
define("models/audible",["require","exports","module","config/resources","models/playlist","models/sound"],function(a,b,c){var d,e=a("config/resources"),f=a("models/playlist"),g=a("models/sound");d=c.exports=function(a,b){var c=a.resource_type,d;return delete a.resource_type,c===e.PLAYLIST?d=new f(a,b):d=new g(a,b),d},d.getClass=function(a){var b=a.resource_type;return b===e.PLAYLIST?f:g}}),
define("views/sound/compact-sound",["require","exports","module","lib/view","lib/views/mixins/responsive","models/audible","views/sound/compact-sound.css","views/sound/compact-sound.tmpl"],function(a,b,c){var d,e=a("lib/view"),f=a("lib/views/mixins/responsive"),g=a("models/audible");d=c.exports=e.extend(f,{className:"compactSound g-box-full g-background-default",css:a("views/sound/compact-sound.css"),template:a("views/sound/compact-sound.tmpl"),ModelClass:g,requiredAttributes:["permalink"]})}),
define("views/sound/mini-sound",["require","exports","module","lib/view","models/audible","lib/mixins/performance-measuring","views/sound/mini-sound.css","views/sound/mini-sound.tmpl"],function(a,b,c){function h(a){this.model[a]("play pause finish",i,this)}function i(){this.toggleState("playing",this.model.isPlaying())}var d,e=a("lib/view"),f=a("models/audible"),g=a("lib/mixins/performance-measuring");d=c.exports=e.extend(g,{className:"miniSound g-box-full sc-media",css:a("views/sound/mini-sound.css"),template:a("views/sound/mini-sound.tmpl"),ModelClass:f,performanceSelector:".playButton",requiredAttributes:["permalink"],setup:function(){h.call(this,"on")},dispose:function(){h.call(this,"off")}})}),
define("views/sound/sound",["require","exports","module","_","views/ads/ad-panel","config","lib/views/mixins/has-ad-state","lib/play-manager","views/sound/related-sounds","views/share/share-panel","models/sound","lib/view","views/sound/sound.css","views/sound/sound.tmpl"],function(a,b,c){function n(a){this.model[a]("progress-10",o,this)[a]("finish",r,this)}function o(){i.source===this.model&&this.model.areRelatedSoundsEnabled().done(s.bind(this))}function p(a){a.preventDefault(),this.toggleState("sharePanel",$(a.target).hasClass("sc-button-selected"))}function q(){this.model.off("play",q,this),this.toggleState("relatedSounds",!1).toggleState("sharePanel",!1)}function r(){if(this.disposed)return;var a=w();i.source===this.model&&!i.hasNextSound()&&a.sharing&&this.model.isShareable()&&!this.isSharePanelVisible&&this.model.areRelatedSoundsEnabled().done(this.toggleState.bind(this,"relatedSounds",!0)),this.model.on("play",q,this)}function s(){var a=this.subviews.relatedSounds,b=this.t("Play another track");return a||(a=this.addSubview(new j({resource_id:this.model.resource_id,title:b}),"relatedSounds"),a.render()),a}function t(){var a=this.subviews.sharePanel;return a||(a=this.addSubview(new k({resource_id:this.model.resource_id,resource_type:this.model.resource_type}),"sharePanel")),a.render(),a}function u(){var a=this.subviews.adPanel;return a||(a=this.addSubview(new f,"adPanel")),a.render(),a}function v(a){this.$$("panelContent").empty().append(a.el)}function w(){return g.get("widgetParams")||{}}function x(a){this.$$("content").toggleClass("g-left-transition",a);if(a){var b=s.call(this);v.call(this,b)}this.toggleState("artworkVisible",!a).toggleState("panelVisible",a)}function y(a){if(a){var b=t.call(this);v.call(this,b)}this.toggleState("panelVisible",a),this.$$("shareLink").toggleClass("sc-button-selected",a),this.isSharePanelVisible=a}function z(a){var b;a&&(b=u.call(this),v.call(this,b)),this.toggleState("panelVisible",a)}function A(a,b){this.$el.toggleClass(a,b),this.subviews.waveform&&!b&&this.subviews.waveform.rerender()}var d,e=a("_"),f=a("views/ads/ad-panel"),g=a("config"),h=a("lib/views/mixins/has-ad-state"),i=a("lib/play-manager"),j=a("views/sound/related-sounds"),k=a("views/share/share-panel"),l=a("models/sound"),m=a("lib/view");d=c.exports=m.extend(h,{className:"sound g-box-full g-background-default g-shadow-inset",css:a("views/sound/sound.css"),template:a("views/sound/sound.tmpl"),ModelClass:l,requiredAttributes:["permalink"],isSharePanelVisible:!1,states:{panelVisible:function(a){A.call(this,"panelVisible",a)},artworkVisible:function(a){A.call(this,"artworkVisible",a)},relatedSounds:x,sharePanel:y,adState:z},events:{"click .soundHeader__shareButton":p},setup:function(){w().show_artwork&&this.toggleState("artworkVisible",!0),n.call(this,"on")},dispose:function(){n.call(this,"off")},getTemplateData:function(a){return e.extend(a,{show_comments:g.get("widgetParams").show_comments})}})}),
define("lib/window-events",["require","exports","module","_","lib/backbone"],function(a,b,c){function h(a,b){var c=b+"d",f=a==="resize"?i(c):d.trigger.bind(d,a+":"+c);return e[b](f,g)}function i(a){var b=window.innerWidth,c=window.innerHeight,e=d.trigger.bind(d,"resize:x:"+a),f=d.trigger.bind(d,"resize:y:"+a),g=d.trigger.bind(d,"resize:"+a);return function(a){var d=window.innerWidth,h=window.innerHeight;d!==b&&e(a),h!==c&&f(a),g(a),c=h,b=d}}var d,e=a("_"),f=a("lib/backbone"),g=200;d=c.exports=e.extend({},f.Events),$(window).on("resize",h("resize","debounce")).on("resize",h("resize","throttle")).on("scroll",h("scroll","debounce")).on("scroll",h("scroll","throttle"))}),
define("lib/views/mixins/audio-ad-prefetch",["require","exports","module","config","lib/play-manager","lib/event-bus","lib/mixin"],function(a,b,c){function i(){var a=$.Deferred();return e.get("widgetReady")?a.resolve():g.one("widget:ready",a.resolve),g.on("exception",a.resolve),a}function j(){f.prefetchCurrentSoundAudioAd()}var d,e=a("config"),f=a("lib/play-manager"),g=a("lib/event-bus"),h=a("lib/mixin");d=c.exports=new h({after:{setup:function(){this.addDeferred(i().then(function(){this.$el.one("mouseenter",j)}.bind(this)))}}})}),
define("lib/mixins/performance-measuring",["require","exports","module","lib/event-bus","lib/mixin","tracking-events"],function(a,b,c){function m(a,b,c){function f(){clearTimeout(e),clearTimeout(d)}function g(){a()&&(f(),c())}var d=this.addDeferred(setTimeout(f,b)),e=this.addDeferred(setInterval(g,h));g()}var d,e=a("lib/event-bus"),f=a("lib/mixin"),g=a("tracking-events"),h=50,i=1e4,j=window.performance&&window.performance.timing,k="fetchStart",l=!0;d=c.exports=j?new f({defaults:{performanceSelector:null},after:{render:function(){var a,b,c;if(!l)return;l=!1;if(a=this.performanceSelector)b=function(){return this.$(a).length}.bind(this),c=function(){var a=Date.now()-j[k];e.trigger(g.APP.LOAD,{latency:a})},m.call(this,b,i,c)}}}):new f({})}),
define("lib/views/mixins/widget-container",["require","exports","module","config","lib/play-manager","lib/event-bus","lib/browser","lib/views/mixins/responsive","lib/mixin","models/audible-interface","models/exception"],function(a,b,c){function m(){var a=q.call(this),b=e.get("widgetParams");if(a instanceof k&&!a.isEmbeddable()){o(a);return}f.setSource(q.call(this)).setCursor(b.start_track),b.auto_play&&!h.isMobileSafari&&!h.isAndroid&&f.play(f.getCurrentSound()),g.trigger("widget:ready")}function n(a){var b=this.getFetchErrorMessage(a);b&&p(b)}function o(a){var b,c=a.get("permalink_url");b="This "+a.resource_type+" canâ€™t be played outside of SoundCloud",!a.isPrivate()&&c&&(b+='<br/><a href="'+c+'">Play on SoundCloud</a>'),p(b)}function p(a){l.raise({fatal:!0,message:a})}function q(){return this.collection||this.model}var d,e=a("config"),f=a("lib/play-manager"),g=a("lib/event-bus"),h=a("lib/browser"),i=a("lib/views/mixins/responsive"),j=a("lib/mixin"),k=a("models/audible-interface"),l=a("models/exception");d=c.exports=new j({applyTo:function(a){i.applyTo(a)},defaults:{getFetchErrorMessage:$.noop},after:{setup:function(){var a=q.call(this);f.setSource(a),a.fetch().done(m.bind(this)).fail(n.bind(this))}}})}),
define("lib/views/single-sound.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".singleSound{border-radius:3px;overflow:hidden}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/mixins/responsive",["require","exports","module","_","config/sizes","config","lib/event-bus","lib/mixin","lib/backbone"],function(a,b,c){function o(a){var b=a?"on":"off";k[b]("change",r,this),h[b]("layout:change",p,this)}function p(){q(),r.call(this)}function q(){k.set({width:n.width(),height:n.height()})}function r(){s.call(this),this.onWindowSizeChange(t(),{width:this.getWindowWidth(),height:this.getWindowHeight()})}function s(){var a=t(),b;Object.keys(f).forEach(function(c){b=f[c],b!==f.DEFAULT&&this.toggleState("state-"+b,b===a)},this)}function t(){if(!u())return f.DEFAULT;var a=k.get("width"),b;return a<=l?b=f.SMALL:a<m?b=f.MEDIUM:b=f.DEFAULT,b}function u(){return!!g.get("router").layoutName}var d,e=a("_"),f=a("config/sizes"),g=a("config"),h=a("lib/event-bus"),i=a("lib/mixin"),j=a("lib/backbone"),k=new j.Model,l=250,m=400,n=$(window);d=c.exports=new i({before:{setup:function(){o.call(this,!0)},renderDecorate:function(){this.whenInserted().done(p.bind(this))},dispose:function(){o.call(this,!1)}},defaults:{onWindowSizeChange:function(){},getWindowHeight:function(){return k.has("height")?k.get("height"):n.height()},getWindowWidth:function(){return k.has("width")?k.get("width"):n.width()},getWindowSize:t}}),n.on("resize",e.debounce(q,50))}),
define("views/sound/compact-sound.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".compactSound{padding:7px}.compactSound__artwork{margin-right:15px;width:100px;height:100px}.compactSound__content{position:relative;height:100px}.compactSound__header{position:absolute;left:0;right:0;top:0;height:55px}.compactSound__waveform{position:absolute;left:0;right:0;top:55px;height:45px}.compactSound.state-small .compactSound__artwork{display:none;margin-right:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/compact-sound.tmpl",["vendor/handlebars-runtime","views/sound/artwork","views/sound/header","views/waveform/waveform"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=' <div class="compactSound__artwork sc-media-left"> ',e="views/sound/artwork",f={},g=a._resource_id,f.resource_id=g,g=a._resource_type,f.resource_type=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div> ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;f+='<div class="sc-media"> ',g=b._params,g=g===null||g===undefined||g===!1?g:g.show_artwork,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+=' <div class="compactSound__content sc-media-body"> <div class="compactSound__header"> ',g="views/sound/header",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!1,h.show_share_button=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> <div class="compactSound__waveform"> ',g="views/waveform/waveform",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="custom",h.waveformStyle=i,i=!1,h.show_comments=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+" </div> </div>\n</div>\n",f})}),
define("views/sound/mini-sound.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".miniSound__body{height:100%}.miniSound__title{margin:2px 0;opacity:1;-webkit-transition:-webkit-transform .25s ease-in-out,opacity .25s ease-in-out;transition:transform .25s ease-in-out,opacity .25s ease-in-out}.miniSound__waveform{position:absolute;top:0;opacity:0;-webkit-transform:translate(-100%,0);-ms-transform:translate(-100%,0);transform:translate(-100%,0);-webkit-transition:-webkit-transform .25s ease-in-out,opacity .25s ease-in-out;transition:transform .25s ease-in-out,opacity .25s ease-in-out}.miniSound.playing .miniSound__title{opacity:0;-webkit-transform:translate(100%,0);-ms-transform:translate(100%,0);transform:translate(100%,0)}.miniSound.playing .miniSound__waveform{opacity:1;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.miniSound__logo{margin-top:-2px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/mini-sound.tmpl",["vendor/handlebars-runtime","views/sound/play-button","views/sound/logo","views/sound/title","views/waveform/waveform"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="sc-media-left"> ',g="views/sound/play-button",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="small",h.size=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n</div>\n<div class="miniSound__logo sc-media-right"> ',g="views/sound/logo",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=b._params,i=i===null||i===undefined||i===!1?i:i.inverse,h.inverse=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n</div>\n<div class="miniSound__body sc-media-body"> <div class="g-box-full"> <div class="miniSound__title"> ',g="views/sound/title",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.inline=i,i=b._params,i=i===null||i===undefined||i===!1?i:i.inverse,h.inverse=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> <div class="miniSound__waveform g-box-full"> ',g="views/waveform/waveform",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!1,h.show_comments=i,i="custom",h.waveformStyle=i,i=b._params,i=i===null||i===undefined||i===!1?i:i.inverse,h.inverse=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+" </div> </div>\n</div>\n",f})}),
define("views/ads/ad-panel",["require","exports","module","_","lib/ad-manager","lib/helpers/datetime-helper","lib/view","views/ads/ad-panel.tmpl","views/ads/ad-panel.css"],function(a,b,c){var d,e=a("_"),f=a("lib/ad-manager"),g=a("lib/helpers/datetime-helper"),h=a("lib/view"),i,j=150;d=c.exports=h.extend({template:a("views/ads/ad-panel.tmpl"),css:a("views/ads/ad-panel.css"),className:"adPanel",getTemplateData:function(){var a=f.getCurrentAd();return a?a.toJSON():{}},renderDecorate:function(){this._ad=f.getCurrentSound(),this._ad&&this._ad.on("time",i,this).trigger("time")},dispose:function(){this._ad&&this._ad.off("time",i,this)}}),i=e.throttle(function(){var a=f.getCurrentSound();if(this.disposed||!a)return;this.$$("countdown").text(g.timecode(f.getCurrentSound().currentTime()))},j)}),
define("lib/views/mixins/has-ad-state",["require","exports","module","lib/ad-manager","lib/mixin"],function(a,b,c){function h(a){a=a?"one":"off",e[a]("ad:play",i,this)[a]("ad:skip ad:finish",j,this)}function i(){if(this.disposed)return;this.$el.toggleClass(g,!0),this.toggleState(g,!0),this.onAdStart(e.getCurrentSound())}function j(){if(this.disposed)return;this.$el.toggleClass(g,!1),this.toggleState(g,!1),this.onAdFinish()}var d,e=a("lib/ad-manager"),f=a("lib/mixin"),g="adState";d=c.exports=new f({defaults:{onAdStart:$.noop,onAdFinish:$.noop},after:{setup:function(){h.call(this,!0)},dispose:function(){h.call(this,!1)}}})}),
define("views/sound/related-sounds",["require","exports","module","lib/event-bus","lib/views/list","collections/own-related-sounds","tracking-events","models/sound","views/sound/sound-badge","views/sound/related-sounds.css","views/sound/related-sounds.tmpl"],function(a,b,c){function k(a){var b=this.getListItemViewByEvent(a);b&&e.trigger(h.UI.RELATED_VIEW_CLICKED,b.model)}var d,e=a("lib/event-bus"),f=a("lib/views/list"),g=a("collections/own-related-sounds"),h=a("tracking-events"),i=a("models/sound"),j=a("views/sound/sound-badge");d=c.exports=f.extend({Subview:j,className:"relatedSounds",itemClassName:"relatedSounds__item",css:a("views/sound/related-sounds.css"),template:a("views/sound/related-sounds.tmpl"),defaults:{maxDisplay:2,title:null},events:{"click .soundBadge__item a":k},setup:function(){this.collection=new g(null,{resource_id:this.options.resource_id});var a=i.instances.get(this.options.resource_id);e.trigger(h.UI.RELATED_VIEW_OPENED,a)},getListContainer:function(){return this.$$("list")}})}),
define("views/share/share-panel",["require","exports","module","lib/views/mixins/multi-resource-type","lib/event-bus","tracking-events","lib/view","views/share/share-panel.css","views/share/share-panel.tmpl"],function(a,b,c){function i(a){a.isTrigger||f.trigger(g.UI.LINK_INPUT_CLICKED,this.model),n(a.target)}function j(a){n(a.target)}function k(a){var b={},c;a.target.checked&&(b.format="wordpress"),c=this.model.getEmbedCode(b),this.$$("embedCodeInput").val(c).click()}function l(){this.toggleState("embed",!1).$$("linkCodeInput").click(),f.trigger(g.UI.LINK_BUTTON_CLICKED,this.model)}function m(){this.toggleState("embed",!0).$$("embedCodeInput").click(),f.trigger(g.UI.EMBED_BUTTON_CLICKED,this.model)}function n(a){a.select()}var d,e=a("lib/views/mixins/multi-resource-type"),f=a("lib/event-bus"),g=a("tracking-events"),h=a("lib/view");d=c.exports=h.extend(e,{css:a("views/share/share-panel.css"),template:a("views/share/share-panel.tmpl"),className:"sharePanel",requiredAttributes:["permalink_url"],events:{"change .sharePanel__wordpress":k,"click  .sharePanel__embedButton":m,"click  .sharePanel__embedCodeInput":j,"click  .sharePanel__linkButton":l,"click  .sharePanel__linkCodeInput":i},defaults:{show_embed_options:!0},states:{embed:"embedCodeVisible"},setup:function(){this.options.show_embed_options=this.isAudible?this.options.show_embed_options:!1,f.trigger(g.UI.SHARE_VIEW_OPENED,this.model)},getTemplateData:function(a){return this.options.show_embed_options&&this.isAudible&&this.model.get("embeddable_by")==="all"&&(a.embed_code=this.model.getEmbedCode()),a.share_url=this.getShareURL(),a}})}),
define("views/sound/sound.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".sound{overflow:hidden}.sound__artwork{float:left;width:162px;height:162px;margin:1px;overflow:hidden;border-radius:2px 0 0 2px;display:none}.sound__content{position:absolute;height:154px;top:6px;right:10px;bottom:6px;left:6px;overflow:hidden}.sound__header{position:absolute;left:0;right:0;top:2px;height:55px}.sound__waveform{position:absolute;left:0;right:0;top:60px;height:65px}.sound__footer{position:absolute;left:0;right:0;top:125px;height:25px}.sound__stats{padding-top:8px}.sound.artworkVisible .sound__artwork{display:block;position:relative;overflow:hidden}.sound.artworkVisible .sound__content{left:175px}.sound__panel{position:absolute;right:0;bottom:0;left:0;top:100%;z-index:10;padding-top:10px;background:#f6f6f6}.sound__panelContent{padding:7px 0 0}.sound.panelVisible .sound__panel{top:54px}.sound.adState .soundHeader__actions{opacity:0}.sound.adState .sc-media-right{margin-left:32px}.sound .adPanel{margin-top:-10px}@media (max-width:349px){.sound.artworkVisible .sound__artwork{display:none}.sound.artworkVisible .sound__content{left:6px}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/sound.tmpl",["vendor/handlebars-runtime","views/sound/artwork","views/ads/display-ad-container","views/sound/header","views/waveform/waveform","views/sound/stats","views/sound/seekable-thin-bar"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=' <div class="sound__artwork"> ',e="views/sound/artwork",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.show_follow_button=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",e="views/ads/display-ad-container",f=c.$view,e=f.call(a,e,{hash:{}}),d+=m(e)+" </div>\n",d}function o(a,b){var d="",e,f,g;return d+=' <div class="sound__stats sc-media-right"> ',e="views/sound/stats",f={},g=a._resource_id,f.resource_id=g,g=a._resource_type,f.resource_type=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div> ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;g=b._params,g=g===null||g===undefined||g===!1?g:g.show_artwork,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n<div class="sound__content"> <div class="sound__header"> ',g="views/sound/header",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="header",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> <div class="sound__waveform"> ',g="views/waveform/waveform",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=b.show_comments,h.show_comments=i,i="custom",h.waveformStyle=i,i="waveform",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> <div class="sound__footer sc-media"> ',g=b._params,g=g===null||g===undefined||g===!1?g:g.show_playcount,h=c["if"],k=l.program(3,o,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+=' </div> <div class="sound__panel g-top-transition"> ',g="views/sound/seekable-thin-bar",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' <div class="sound__panelContent"></div> </div>\n</div>\n',f})}),
define("config/sizes",["require","exports","module"],function(a,b,c){c.exports={SMALL:"small",MEDIUM:"medium",DEFAULT:"default"}}),
define("views/sound/artwork",["require","exports","module","_","models/audible","lib/event-bus","tracking-events","lib/view","views/sound/artwork.tmpl","views/sound/artwork.css"],function(a,b,c){function j(){var a=this.model;g.trigger(h.UI.ARTWORK_CLICKED,a),g.trigger("sound:deeplink",this.$$("link")[0],a)}var d,e=a("_"),f=a("models/audible"),g=a("lib/event-bus"),h=a("tracking-events"),i=a("lib/view");d=c.exports=i.extend({template:a("views/sound/artwork.tmpl"),css:a("views/sound/artwork.css"),ModelClass:f,className:"artwork",events:{"click .artwork__link":j},defaults:{show_follow_button:!1,size:200,is_link:!0},getTemplateData:function(a){return e.extend(a,{isLink:this.options.is_link&&!this.model.isPrivate()})}})}),
define("views/sound/header",["require","exports","module","_","lib/animation","config","lib/views/mixins/has-ad-state","lib/views/mixins/multi-resource-type","lib/play-manager","lib/views/mixins/responsive","views/ads/skip","lib/view","views/sound/header.css","views/sound/header.tmpl"],function(a,b,c){function o(a){var b=a?"on":"off",c=this.isPlaylist?j:this.model;c[b]("play",p,this)}function p(){var a=this.subviews.likeButton,b=this.getState("likeVisible");a&&!b&&(this.model.isPlaying()?(this.$$("buttons").prepend(a.$el),this.toggleState("likeVisible")):a.$el.detach())}var d,e=a("_"),f=a("lib/animation"),g=a("config"),h=a("lib/views/mixins/has-ad-state"),i=a("lib/views/mixins/multi-resource-type"),j=a("lib/play-manager"),k=a("lib/views/mixins/responsive"),l=a("views/ads/skip"),m=a("lib/view"),n=g.get("widgetParams");d=c.exports=m.extend(k,i,h,{css:a("views/sound/header.css"),className:"soundHeader sc-media",template:a("views/sound/header.tmpl"),requiredAttributes:{sound:["sharing"],playlist:["sharing"]},defaults:{show_like_button:!0,show_share_button:!0,show_buy_button:!0,show_download_button:!0,show_button_overlay:!1,visual:!1},setup:function(){this.toggleState("visual",this.options.visual),o.call(this,!0)},dispose:function(){o.call(this,!1)},renderDecorate:function(){p.call(this)},getTemplateData:function(){var a=this.options;return a=e.defaults({show_share_button:a.show_share_button&&n.sharing&&this.isShareable(),show_like_button:a.show_like_button&&$.support.cors&&n.liking&&this.isLikeable(),show_buy_button:a.show_buy_button&&n.buying&&this.isBuyable(),show_download_button:a.show_download_button&&n.download&&this.isDownloadable()},a),a},onAdStart:function(a){var b=this.$$("skipAdContainer"),c=this.subviews.skipButton;c||(c=this.addSubview(new l({resource_id:a.id,resource_type:"sound",visual:this.options.visual,iconColor:this.options.visual?"#FFFFFF":"#000000"}),"skipButton")),c.render(),b.append(c.el),f.fadeIn(b)},onAdFinish:function(){var a=this.subviews.skipButton;a.$el.detach(),this.removeSubview("skipButton"),a.teardown()}})}),
define("views/waveform/waveform",["require","exports","module","_","models/sound","lib/promise","lib/scene/scene","lib/scene/scene-layer","lib/support","lib/view","lib/helpers/waveform-helper","views/comments/comment-popover","views/waveform/nodes/background","views/waveform/nodes/comments","views/waveform/nodes/interaction","views/waveform/nodes/progress","views/waveform/nodes/scrubber","views/waveform/nodes/time-indicator","views/waveform/waveform.tmpl","views/waveform/waveform.css"],function(a,b,c){function t(a){this.model[a]("play pause",u,this)}function u(){this.toggleState("playing",this.model.isPlaying())}function v(){return this.options.show_comments&&this.model.resource_type==="sound"}function w(){if(this.disposed)return;var a=this.options,b=this.model,c=a.interactive,d=this.getElement("sceneElement"),f={resource_type:b.resource_type,resource_id:b.resource_id,waveformStyle:a.waveformStyle,upperPartHeight:a.upperPartHeight,$eventEl:d};this.addLayer([[n,e.defaults({waveformData:this.waveformData},f)],[q,e.clone(f)],c&&!j.touch?[r,f]:null]),c&&this.addLayer([[s,e.clone(f)],[p,e.clone(f)]]),x.call(this),this.toggleState("loaded",!0)}function x(){var a,b;if(this._commentsShowing||!v.call(this))return;a=this.model,b=this.addLayer([[o,{sound_id:a.id,resource_id:a.resource_id,waveformData:this.waveformData,$eventEl:this.getElement("sceneElement")}]],{at:1}),b.setDirty(!0),this._commentsShowing=!0}function y(){if(this.subviews.commentPopover)return;var a,b=this.model,c=this.el.offsetHeight*(1-this.options.upperPartHeight);a=new m({sound_id:b.id,resource_id:b.resource_id,darkText:this.options.darkText,avatarSize:c<20?10:20}),a.render(),this.el.appendChild(a.el),this.addSubview(a,"commentPopover")}var d,e=a("_"),f=a("models/sound"),g=a("lib/promise"),h=a("lib/scene/scene"),i=a("lib/scene/scene-layer"),j=a("lib/support"),k=a("lib/view"),l=a("lib/helpers/waveform-helper"),m=a("views/comments/comment-popover"),n=a("views/waveform/nodes/background"),o=a("views/waveform/nodes/comments"),p=a("views/waveform/nodes/interaction"),q=a("views/waveform/nodes/progress"),r=a("views/waveform/nodes/scrubber"),s=a("views/waveform/nodes/time-indicator");d=c.exports=k.extend({template:a("views/waveform/waveform.tmpl"),css:a("views/waveform/waveform.css"),className:"waveform",ModelClass:f,requiredAttributes:["waveform_url","state"],defaults:{single:!0,upperPartHeight:.7,waveformStyle:"default",show_comments:!0,interactive:!0,darkText:!0},_commentsShowing:!1,states:{playing:"playing",emptyWaveform:function(a){this.$el.toggleClass("waveform__empty",a),a&&this.toggleState("loaded",!0)},loaded:"loaded"},element2selector:{sceneElement:".waveform__scene"},waveformData:null,_wisDeferred:null,setup:function(){t.call(this,"on"),this.scene=new h},dispose:function(){t.call(this,"off")},teardown:function(){this.scene.teardown(),this._commentsShowing=!1},addLayer:function(a,b){var c=new i,d=c.el,f=this.scene,g=this.getElement("sceneElement"),h;return b=b||{},this.addSubview(c),f.addLayer(c),b.at===undefined?g.append(d):(h=f.getLayers()[b.at],h?h.$el.before(d):g.append(d)),c.initCanvasDimensions(),a.filter(e.identity).forEach(c.addNode,c),c},renderDecorate:function(){var a=!this.model.getNumSounds()||this.model.isProcessing();a?this.toggleState("emptyWaveform",!0):v.call(this)&&this.whenInserted().done(y.bind(this)),this._wisDeferred?this._wisDeferred&&this._wisDeferred.state()==="resolved"&&this.whenInserted().done(w.bind(this)):this.whenInserted().done(function(){this._wisDeferred=g.defer().done(w.bind(this)),l.loadWaveformDataForView(this).done(this._wisDeferred.resolve)}.bind(this))},getModelData:function(){return{}},getTemplateData:function(a){var b=this.model,c=b.resource_type==="sound",d=!b.getNumSounds(),f=b.isProcessing(),g=d||f;return e.extend(a,{id:b.id,_resource_id:b.resource_id,type:c?"track":"playlist",emptySet:d,isProcessing:f,emptyWaveform:g,showComments:v.call(this),upperPartHeightPercent:this.options.upperPartHeight*100+"%"})}})}),
define("views/sound/play-button",["require","exports","module","_","lib/customization","lib/play-manager","lib/ad-manager","lib/views/mixins/multi-resource-type","config/resources","lib/view","views/sound/play-button.css","views/sound/play-button.tmpl"],function(a,b,c){function l(a){var b=a?"on":"off";g[b]("finish",p,this)[b]("play pause",o,this),h.on("ad:play ad:skip ad:finish",o,this).on("ad:play ad:pause",r,this)}function m(){var a=g.getCurrentSound();a&&a.initAudio()}function n(){this.getState("ad")?h.toggle({userAction:!0}):g.toggle(g.getCurrentSound(),{userAction:!0,view:"play-button"})}function o(){q.call(this)}function p(){if(this.disposed)return;q.call(this)}function q(){var a=g.getCurrentSound(),b=a&&a.isPlaying(),c=h.getCurrentSound(),d=c&&c.isPlaying(),e=a&&(a.isProcessing()||!a.isPlayable()),f=this.t(b?"Pause":"Play");this.toggleState("replay",!1).toggleState("playing",b).toggleState("disabled",e).toggleState("ad",d).$el.attr("title",f)}function r(){var a=h.getCurrentSound();this.toggleState("playing",!!a&&!!a.isPlaying())}var d,e=a("_"),f=a("lib/customization"),g=a("lib/play-manager"),h=a("lib/ad-manager"),i=a("lib/views/mixins/multi-resource-type"),j=a("config/resources"),k=a("lib/view");d=c.exports=k.extend(i,{css:a("views/sound/play-button.css"),template:a("views/sound/play-button.tmpl"),tagName:"button",className:"playButton",colorCustomizable:!0,loadingTemplate:null,events:{click:n,mouseenter:m},defaults:{size:"medium"},setup:function(){l.call(this,!0),this.requiredAttributes=this.requiredAttributes||{},this.requiredAttributes[j.PLAYLIST]=["tracks"],this.observedAttributes=this.observedAttributes||{},this.observedAttributes[j.SOUND]=["playable"],this.$el.toggleClass(this.options.size)},dispose:function(){l.call(this,!1)},renderDecorate:function(){q.call(this)},getTemplateData:function(){return{custom:f.getColorParams(),gradient_id:e.uniqueId("playButton__gradient")}}})}),
define("views/sound/logo",["require","exports","module","_","lib/event-bus","lib/views/mixins/multi-resource-type","lib/views/mixins/responsive","tracking-events","lib/view","views/sound/logo.tmpl"],function(a,b,c){function k(){this.isAudible&&f.trigger("sound:deeplink",this.el,this.model),f.trigger(i.UI.LOGO_LINK_CLICKED,this.model)}function l(){var a=this.model,b=this.isAudible&&a.isPrivate(),c,d;return c=b?a.get("user").permalink_url:a.get("permalink_url"),d=this.t(b?"SoundCloud":"Play on SoundCloud"),{href:c,title:d}}var d,e=a("_"),f=a("lib/event-bus"),g=a("lib/views/mixins/multi-resource-type"),h=a("lib/views/mixins/responsive"),i=a("tracking-events"),j=a("lib/view");d=c.exports=j.extend(h,g,{tagName:"a",template:a("views/sound/logo.tmpl"),className:"logo",requiredAttributes:["permalink_url"],defaults:{inverse:!1},events:{click:k},setup:function(){this.$el.toggleClass("inverse",this.options.inverse)},renderDecorate:function(){this.$el.attr(l.call(this))},getColor:function(){return this.getState("alt")?"#FF5500":"#FFFFFF"},toggleAltColor:function(){this.toggleState("alt")},getTemplateData:function(){return{gradient_id:e.uniqueId("logo_hover_")}}})}),
define("views/sound/title",["require","exports","module","_","config","config/resources","lib/event-bus","lib/views/mixins/multi-resource-type","tracking-events","lib/view","views/sound/title.tmpl","views/sound/title.css"],function(a,b,c){function l(){h.trigger(j.UI.TITLE_LINK_CLICKED,this.model)}function m(){h.trigger(j.UI.CREATOR_LINK_CLICKED,this.model),this.isAudible&&h.trigger("sound:deeplink",this.$$("h2")[0],this.model)}function n(){var a,b,c,d,e=this.options.resource_type,f=this.model;switch(e){case g.SOUND:case g.PLAYLIST:a=f.get("user").username,c=f.get("user").permalink_url,b=f.get("title"),d=this.getShareURL();break;case g.USER_SOUNDS:case g.USER_FAVORITES:case g.USER_SPOTLIGHT:a=f.get("username"),c=f.get("permalink_url"),b=this.t((e===g.USER_FAVORITES?"Favorite":e===g.USER_SPOTLIGHT?"Featured":"Latest")+" tracks"),d=this.getShareURL();break;case g.GROUP_SOUNDS:a=f.get("name"),c=f.get("permalink_url"),b=f.get("short_description")}return{h1Text:a,h1Link:c,h2Text:b,h2Link:d}}var d,e=a("_"),f=a("config"),g=a("config/resources"),h=a("lib/event-bus"),i=a("lib/views/mixins/multi-resource-type"),j=a("tracking-events"),k=a("lib/view");d=c.exports=k.extend(i,{template:a("views/sound/title.tmpl"),css:a("views/sound/title.css"),className:"title sc-truncate",defaults:{visual:!1,show_link:!0,inline:!1,inverse:!1},events:{"click a.title__h1":l,"click a.title__h2":m},requiredAttributes:{user:["permalink_url","username"],track:["permalink_url","title","user"],playlist:["permalink_url","title","user"],group:["name","short_description"]},getTemplateData:function(){var a=n.call(this),b=f.get("widgetParams"),c=this.isSound?b.show_user:!0;return e.extend(a,{visual:this.options.visual,inline:this.options.inline,showH1:c,inverse:this.options.inverse,showH1Link:this.options.show_link,showH2Link:this.options.show_link&&!this.isPrivate()&&a.h2Link,inlineTitle:(c?a.h1Text+" &ndash; ":"")+a.h2Text})}})}),
define("views/ads/ad-panel.tmpl",["vendor/handlebars-runtime","views/sound/thin-progress-bar"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return g="views/sound/thin-progress-bar",h={},i=b.sound,i=i===null||i===undefined||i===!1?i:i.id,h.resource_id=i,i="sound",h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n<b class="adPanel__title">Advertisement</b>\n<a href="http://help.soundcloud.com/customer/portal/articles/1656210" class="adPanel__why">',g="Why Ads?",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+'</a>\n<div class="adPanel__countdown"></div>\n',f})}),
define("views/ads/ad-panel.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".adPanel{position:relative;padding-top:4px}.adPanel__title,.adPanel__why,.adPanel__countdown{font-size:11px;line-height:1.5}.adPanel__title{display:block;color:#999}a.adPanel__why{color:#666}.adPanel>.thinProgressbar{position:absolute;top:0;cursor:auto}.adPanel>.thinProgressbar .thinProgressbar__played{-webkit-transition:width 1s;transition:width 1s}.adPanel__countdown{position:absolute;right:0;top:4px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/list",["require","exports","module","_","lib/view","vendor/handlebars-runtime"],function(a,b,c){function h(){var a=e.pluck(this.subviews,"model");return this.collection.find(function(b){return a.indexOf(b)===-1})}var d,e=a("_"),f=a("lib/view"),g=a("vendor/handlebars-runtime");d=c.exports=f.extend({emptyTemplate:null,defaults:{bulkFetch:0,maxDisplay:3,inverted:!1},Subview:null,subviewArgs:{},listTagName:"ul",listClassName:"sc-list-nostyle sc-clearfix",itemTagName:"li",itemClassName:"",animations:{},template:function(){return""},_listElement:null,fetchData:function(){return this.options.bulkFetch?this.collection.bulkFetch(this.options.bulkFetch):this.collection.fetch()},renderDecorate:function(){this.createListElement()&&this.addInitialItems()},createListElement:function(){var a=this.getListContainer(),b;return a.length&&!this._listElement&&(b=document.createElement(this.listTagName),this.listClassName&&(b.className=this.listClassName),a.append(b),this._listElement=$(b)),this._listElement},addInitialItems:function(){var a,b=this.getModelsToRender(),c=Math.min(this.options.maxDisplay||Infinity,b.length);for(a=0;a<c;++a)this.createAndInsertListItemView(b[a],-1)},_teardown:function(){this._listElement&&(this._listElement.remove(),this._listElement=null),f.prototype._teardown.call(this)},getModelsToRender:function(){return this.collection.models},createAndInsertListItemView:function(a,b){var c,d=this.options.maxDisplay;c=this.addListItemSubview(a),c.render(),this.addListItemToDOM(c,e.isNumber(b)?b:-1),d&&this.getListItemViews().length>d&&(c=this.getListItemView(this.collection.at(d)),c&&(this.removeListItemFromDOM(c),this.removeSubview(c)))},getTemplate:function(a){return!this.emptyTemplate||!a||this.collection.length||!this.collection.isFullyPopulated()?f.prototype.getTemplate.apply(this,arguments):this.emptyTemplate},getListContainer:function(){return this.$el},getListElement:function(){return this._listElement||$()},getListItemView:function(a){return e.find(this.subviews,function(b){return b.model===a})},getListItemWrappers:function(){return this.getListElement().children()},getListItemViews:function(){var a=this.Subview;return this.subviews.filter(function(b){return b instanceof a})},getListItemViewByScrollOffset:function(a){var b,c;return e.find(this.subviews,function(d){return d.$el.is(":visible")?(b=d.$el.outerHeight(),c=d.$el.position().top+a-b/2,c<=a&&a<c+b):!1})},getSubviewArgs:function(a){return e.defaults({resource_id:a.resource_id,resource_type:a.resource_type},this.subviewArgs)},getListItemAttributesData:function(a){return a.model?a.model.toJSON():{}},getListItemAttributes:function(){return{}},getListItemAttributesString:function(a){var b=this.getListItemAttributes(a);return new g.SafeString(e.toAttributesString(b))},onAdd:function(a,b,c){if(this.disposed)return;if(!this.getListElement().length&&b.length===1&&a===b.at(0)){this.rerender();return}var d=c&&typeof c.index=="number"?c.index:-1,e=this.options.maxDisplay,f=!e||d>=0&&d<e||d<0&&this.collection.length<=e;f&&this.createAndInsertListItemView(a,d)},onRemove:function(a){var b=this.getListItemView(a);b&&(this.removeListItemFromDOM(b),this.removeSubview(b))},addListItemSubview:function(a){var b=this.getSubviewArgs(a);return this.addSubview(new this.Subview(b))},getListItemViewByEvent:function(a){var b=$(a.target).closest(this.getListItemSelector()),c;return b.length&&(c=e.find(this.subviews,function(a){return a.el===b.children()[0]})),c},getListItemSelector:function(){return"."+this.itemClassName.trim().split(/\s+/).join(".")},createSubviewWrapper:function(a){var b=this.getListItemAttributesString(this.getListItemAttributesData(a)),c;return b=b.toString().length?" "+b:"",c=$("<"+this.itemTagName+' class="'+this.itemClassName+'"'+b+">"),c},getSubviewWrapper:function(a){return a.$el.parent()},getSubviewInWrapper:function(a){return e.find(this.subviews,function(b){return b.$el.parent().is(a)})},addListItemToDOM:function(a,b){var c=this.getListElement(),d=this.getSubviewWrapper(a),e=this.options.inverted,f,g;d.length||(d=this.createSubviewWrapper(a),d.append(a.el)),b===-1||b>=this.collection.length-1||b===undefined?c[e?"prepend":"append"](d):b===0?c[e?"append":"prepend"](d):(g=this.getListItemView(this.collection.at(b-1)),g&&(f=this.getSubviewWrapper(g),d[e?"insertBefore":"insertAfter"](f)))},removeListItem:function(a){var b=this.getListItemView(a);b&&this.removeListItemFromDOM(b)},removeListItemFromDOM:function(a){var b,c=this.getSubviewWrapper(a),d=this.options.maxDisplay;b=function(){var b,e,f,g=c.index();c.detach(),a._dispose(),f=!this._disposed&&d&&d<=this.collection.length&&this.getListItemWrappers().length<d,f&&(e=h.call(this),b=this.addListItemSubview(e),b.render(),this.addListItemToDOM(b,g))}.bind(this),this.animations.remove?this.addDeferred(setTimeout(c.fadeOut.bind(c,"slow",b),this.animations.remove.delay)):b()},detachSubviewFromDOM:function(a){this.getSubviewWrapper(a).detach()},appendDOMElement:function(a){var b=this.getListContainer();b&&b[this.options.inverted?"prepend":"append"](a)},getCollectionData:function(){return[]}})}),
define("collections/own-related-sounds",["require","exports","module","_","models/user","models/sound","collections/user-sounds","collections/related-sounds","collections/spotlight-sounds"],function(a,b,c){function m(a){function h(){return i.prototype.fetch.call(c,a).fail(b.reject).done(b.resolve)}var b=$.Deferred(),c=this,d=c.options.resource_id;return a=a?e.clone(a):{},g.getUserBySoundId(d).done(function(e){e.getPlan()===f.Plans.PRO_UNLIMITED?c.isFullyPopulated()?b.resolve():n(e.id,d).done(function(d){d.length>=l?(c.hasOwnSounds=!0,c.next_href=!1,c.lastFetchTime=Date.now(),c[a.add?"add":"reset"](d,a),b.resolve()):h()}).fail(b.reject):h()}.bind(c)),b}function n(a,b){var c=$.Deferred();return $.whenAll(k.map(o.bind(null,a))).done(function(){var a=e.chain(arguments).flatten().uniq().value(),d=a.filter(function(a){return a.id!==b});c.resolve(d)}),c}function o(a,b){var c,d=$.Deferred();return c=new b(null,{resource_id:a}),c.setLimit(20),c.fetch({add:!!c.length}).always(function(){d.resolve.apply(d,c.models),c.release()}),d}var d,e=a("_"),f=a("models/user"),g=a("models/sound"),h=a("collections/user-sounds"),i=a("collections/related-sounds"),j=a("collections/spotlight-sounds"),k=[j,h],l=2;d=c.exports=i.extend({fetch:function(a){return m.call(this,a)},hasOwnSounds:!1,getInfo:function(){return{type:this.hasOwnSounds?"own-related-sounds":"recommender",version:this.audioSourceVersion}}})}),
define("views/sound/sound-badge",["require","exports","module","models/sound","lib/view","views/sound/sound-badge.tmpl","views/sound/sound-badge.css"],function(a,b,c){var d,e=a("models/sound"),f=a("lib/view");d=c.exports=f.extend({template:a("views/sound/sound-badge.tmpl"),css:a("views/sound/sound-badge.css"),className:"soundBadge sc-media",ModelClass:e,requiredAttributes:["permalink_url","user"]})}),
define("views/sound/related-sounds.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".relatedSounds__item{width:50%;padding-right:10px;float:left}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/related-sounds.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=" <h3>",d=a._options,d=d===null||d===undefined||d===!1?d:d.title,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"_options.title",{hash:{}})),c+=o(d)+"</h3>\n",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b._options,g=g===null||g===undefined||g===!1?g:g.title,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n<div class="relatedSounds__list"></div>\n',f})}),
define("lib/views/mixins/multi-resource-type",["require","exports","module","models/sound","models/group","models/user","models/playlist","lib/mixin","config/resources"],function(a,b,c){var d,e=a("models/sound"),f=a("models/group"),g=a("models/user"),h=a("models/playlist"),i=a("lib/mixin"),j=a("config/resources");d=c.exports=new i({defaults:{isAudible:!1,isUser:!1,isGroup:!1,isSound:!1,isPlaylist:!1,isPrivate:function(){return this.isAudible&&this.model.isPrivate()},isShareable:function(){return this.isAudible&&this.model.isShareable()},isLikeable:function(){return this.isAudible&&!this.model.isPrivate()},isBuyable:function(){return!!this.isAudible&&!!this.model.get("purchase_url")},isDownloadable:function(){return!!this.isAudible&&!!this.model.get("download_url")},getShareURL:function(){var a=this.model.get("permalink_url");switch(this.options.resource_type){case j.USER_SOUNDS:a+="/tracks";break;case j.USER_FAVORITES:a+="/likes"}return this.isAudible&&this.isPrivate()&&(a+="/"+this.model.get("secret_token")),a}},before:{setup:function(){if(!this.model){var a=this.options;switch(a.resource_type){case j.USER:case j.USER_SOUNDS:case j.USER_FAVORITES:case j.USER_SPOTLIGHT:this.ModelClass=g,this.isUser=!0;break;case j.SOUND:this.ModelClass=e,this.isAudible=!0,this.isSound=!0;break;case j.PLAYLIST:this.ModelClass=h,this.isAudible=!0,this.isPlaylist=!0;break;case j.GROUP:case j.GROUP_SOUNDS:this.ModelClass=f,this.isGroup=!0}this.model=this.getModel(a.resource_id,a.resource_type)}}}})}),
define("views/share/share-panel.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".sharePanel__header{height:32px;margin-bottom:14px}.sharePanel__header,.sharePanel__linkCode,.sharePanel__embedCode{overflow:hidden}.sharePanel__linkCode,.sharePanel.embedCodeVisible .sharePanel__embedCode{display:block}.sharePanel.embedCodeVisible .sharePanel__linkCode,.sharePanel__embedCode{display:none}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-panel.tmpl",["vendor/handlebars-runtime","views/share/icons-list"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var d="",e,f;return d+=' <div class="sc-media-right"> <button class="sharePanel__embedButton sc-button">',e="Embed",f=c.$t,e=f.call(a,e,{hash:{}}),d+=m(e)+"</button> </div> ",d}function r(a,b){var d="",e,f;d+='\n<div class="sharePanel__embedCode sc-media"> <div class="sc-media-right"> <input type="checkbox" id="embed-code-wordpress" class="sharePanel__wordpress"/> <label for="embed-code-wordpress" class="g-label">',e="WordPress",f=c.$t,e=f.call(a,e,{hash:{}}),d+=m(e)+'</label> <button class="sharePanel__linkActionButton sharePanel__linkButton sc-button">',e="Link",f=c.$t,e=f.call(a,e,{hash:{}}),d+=m(e)+"</button> </div> ",e=a.embed_code,f=c["if"],k=l.program(4,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n</div>\n",d}function s(a,b){var c="",d;return c+=' <div class="sc-media-body"> <input class="sharePanel__embedCodeInput g-input g-selection" type="text" readonly="readonly" value="',d=a.embed_code,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"embed_code",{hash:{}})),c+=m(d)+'"/> </div> ',c}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression,n="function",o=c.helperMissing,p=void 0;f+='<div class="sharePanel__header"> <div class="sharePanel__icons sc-left"> ',g="views/share/icons-list",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_id,h.resource_id=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div>\n</div> <div class="sharePanel__linkCode sc-media"> ',g=b.embed_code,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' <div class="sc-media-body"> <input id="link-code-input" class="sharePanel__linkCodeInput g-input g-selection" type="text" readonly="readonly" value="',g=b.share_url,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"share_url",{hash:{}})),f+=m(g)+'"/> </div>\n</div> ',g=b._options,g=g===null||g===undefined||g===!1?g:g.show_embed_options,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/ads/display-ad-container",["require","exports","module","_","lib/ad-manager","lib/views/mixins/has-ad-state","lib/view","views/ads/display-ad-container.css","views/ads/display-ad-container.tmpl"],function(a,b,c){var d,e=a("_"),f=a("lib/ad-manager"),g=a("lib/views/mixins/has-ad-state"),h=a("lib/view");d=c.exports=h.extend(g,{className:"displayAdContainer g-transition-transform",css:a("views/ads/display-ad-container.css"),template:a("views/ads/display-ad-container.tmpl"),hasData:function(){return!!f.getCurrentSound()},getTemplateData:function(){var a=f.getCurrentAd();return a&&a.toJSON()||{}},renderDecorate:function(){f.metrics("audio_ad:impression")},onAdStart:function(){this.toggleState("visible",!0),this.rerender()},onAdFinish:function(){this.toggleState("visible",!1),this.addDeferred(e.delay(this.teardown,250))}})}),
define("views/sound/stats",["require","exports","module","_","config","models/sound","lib/event-bus","lib/helpers/number-helper","lib/view","views/sound/stats.css","views/sound/stats.tmpl"],function(a,b,c){function k(a){a.stopPropagation(),h.trigger("sound:deeplink",this.$$("link")[0],this.model)}var d,e=a("_"),f=a("config"),g=a("models/sound"),h=a("lib/event-bus"),i=a("lib/helpers/number-helper"),j=a("lib/view");d=c.exports=j.extend({css:a("views/sound/stats.css"),template:a("views/sound/stats.tmpl"),className:"soundStats sc-ministats-group",tagName:"ul",defaults:{showPlayback:!0,showSoundLink:!1},events:{"click .soundStats__link":k},ModelClass:g,requiredAttributes:[],getTemplateData:function(a){var b=this.options,c=!!a.playback_count&&b.showPlayback&&f.get("widgetParams").show_playcount;return e.extend(a,{show_sound_link:b.showSoundLink,playback_count:c?i.format(a.playback_count):null})}})}),
define("views/sound/seekable-thin-bar",["require","exports","module","views/sound/thin-progress-bar","lib/views/mixins/seekable"],function(a,b,c){var d,e=a("views/sound/thin-progress-bar"),f=a("lib/views/mixins/seekable");d=c.exports=e.extend(f)}),
define("views/sound/artwork.tmpl",["vendor/handlebars-runtime","lib/views/image","views/buttons/follow-button"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var d="",e,f;return d+=' <a href="',e=a.permalink_url,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"permalink_url",{hash:{}})),d+=p(e)+'" title="',e="Open SoundCloud page",f=c.$t,e=f.call(a,e,{hash:{}}),d+=p(e)+'" class="artwork__link">\n',d}function r(a,b){return" </a>\n"}function s(a,b){var d="",e,f,g;return d+=" ",d+=' <div class="artwork__follow g-opacity-transition"> ',e="views/buttons/follow-button",f={},g=a.user,g=g===null||g===undefined||g===!1?g:g.id,f.resource_id=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=p(e)+" </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;g=b.isLink,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="artwork__img",h.className=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.size,h.size=i,i=!0,h.stretch=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+"\n",g=b.isLink,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n",g=b._options,g=g===null||g===undefined||g===!1?g:g.show_follow_button,h=c["if"],k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/artwork.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".artwork__link,.artwork__img,.artwork{display:block;position:relative;height:100%;width:100%}.artwork__userAvatar{width:100%}.artwork__follow{opacity:0;position:absolute;bottom:10px;left:10px}.artwork:hover .artwork__follow{opacity:1;display:block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/animation",["require","exports","module"],function(a,b,c){function g(a,b){var c=$.Deferred();return a.removeClass("g-opacity-transition").css({opacity:b?0:1}).addClass("g-opacity-transition").css({opacity:b?1:0}),h(f).progress(c.notify).done(function(){a.removeClass("g-opacity-transition"),c.resolve()}),c}function h(a){var b=$.Deferred(),c=Date.now(),d,e,f;return f=setInterval(function(){e=Date.now()-c,d=Math.min(1,e/a),b.notify(d),d===1&&(b.resolve(),clearInterval(f))},16),b.fail(function(){clearInterval(f)}),b}function i(a,b,c,d){return c*a/d+b}function j(a,b,c,d){return c*(a/=d)*a+b}function k(a,b,c,d){return-c*(a/=d)*(a-2)+b}function l(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function m(a,b,c,d){return c*(a/=d)*a*a+b}function n(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}var d,e={linear:i,"ease-in":j,"ease-out":k,"ease-in-out":l,"ease-in-cubic":m,"ease-out-cubic":n},f=200;d=c.exports={fadeOut:function(a,b){return g(a,!1,b)},fadeIn:function(a,b){return g(a,!0,b)},animateValue:function(a,b,c,d){var f=$.Deferred(),g=c-b,i=h(a),j=e[d]||e.linear;return g?(i.progress(function(c){var d=a*c,e=j(d,b,g,a);f.notify(e)}).done(f.resolve),f.fail(i.reject),f):f.resolve()}}}),
define("views/ads/skip",["require","exports","module","_","lib/ad-manager","lib/helpers/datetime-helper","models/sound","lib/view","views/ads/skip.tmpl","views/ads/skip.css"],function(a,b,c){function n(){var a=this.model,b=k-a.currentTime();b<1e3?(this.toggleState("disabled",!1),this.model.off("time",m,this),this.getElement("in").text("")):this.getElement("remaining").text(this.options.visual?g.timecode(b):g.timecode(b).slice(-2).replace(/^0/,""))}function o(){var a=this.model;this.getElement("remaining").text(g.timecode(a.duration()-a.currentTime()))}function p(){this.getState("disabled")||f.skip()}var d,e=a("_"),f=a("lib/ad-manager"),g=a("lib/helpers/datetime-helper"),h=a("models/sound"),i=a("lib/view"),j=150,k=15e3,l=2500,m;d=c.exports=i.extend({template:a("views/ads/skip.tmpl"),css:a("views/ads/skip.css"),tagName:"button",className:"skipAd sc-button sc-button-small",ModelClass:h,events:{click:p},defaults:{iconColor:"#FFFFFF"},contextName:"ad-skip",setup:function(){this.model.on("time",m,this),this.toggleState("disabled",!0),this.options.visual&&this.toggleState("sc-button-visual",!0),this.skippable=this.model.get("duration")-k>l},dispose:function(){this.model.off("time",m,this)},getTemplateData:function(a){return a.remaining=g.timecode(k),a.skippable=this.skippable,a.nonSkippableLong=!this.skippable&&this.options.visual,a.nonSkippableShort=!this.skippable&&!this.options.visual,a}}),m=e.throttle(function(){if(this.disposed)return;this.skippable?n.call(this):o.call(this)},j)}),
define("views/sound/header.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".soundHeader__playButton{margin-top:3px;margin-right:6px}.soundHeader__title{margin-top:6px}.soundHeader__rightRow{height:22px}.soundHeader__rightRow,.soundHeader__logo{position:relative}.soundHeader__actions{float:right}.soundHeader:not(.visual) .soundHeader__actions{position:absolute;right:0}.soundHeader.visual .soundHeader__actions{top:-3px}.soundHeader .soundHeader__likeButton{display:none}.soundHeader.likeVisible .soundHeader__likeButton{display:inline-block}.soundHeader.state-small .soundTitle__title,.soundHeader.state-medium .soundTitle__title{position:absolute;left:49px;right:65px}.soundHeader.visual.state-small .soundTitle__title,.soundHeader.visual.state-medium .soundTitle__title{left:59px}.soundHeader.visual .soundHeader__logo{right:-1px}.soundHeader__skipAdContainer{position:absolute;top:22px;right:0;z-index:1}.soundHeader.visual .soundHeader__skipAdContainer{top:34px;right:11px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/header.tmpl",["vendor/handlebars-runtime","views/sound/play-button","views/sound/logo","views/buttons/like-button","views/buttons/buy-button","views/buttons/download-button","views/buttons/share-button","views/sound/title"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/like-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="likeButton",f.key=g,g="small",f.size=g,g=a.visual,f.visual=g,g="soundHeader__likeButton",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function o(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/buy-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="small",f.size=g,g=a.visual,f.visual=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function p(a,b){var d="",e,f;d+=" ",e=a.show_download_button,f=c["if"],k=l.program(6,q,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+=" ",d}function q(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/download-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="small",f.size=g,g=a.visual,f.visual=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function r(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/share-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g=a.visual,f.visual=g,g=a.show_button_overlay,f.overlay=g,g="soundHeader__shareButton",f.className=g,g="small",f.size=g,g="soundHeader__shareButton",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;f+='<div class="soundHeader__playButton sc-media-left g-transition-opacity"> ',g="views/sound/play-button",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n</div> <div class="sc-media-right"> <div class="soundHeader__rightRow sc-clearfix"> <div class="soundHeader__logo g-transition-opacity"> ',g="views/sound/logo",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=b.visual,h.inverse=i,i="logo",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> </div> <div class="soundHeader__rightRow sc-clearfix"> <div class="soundHeader__skipAdContainer"></div> <div class="soundHeader__actions g-transition-opacity"> <div class="sc-button-group sc-button-group-pill soundHeader__buttons"> ',g=b.show_like_button,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g=b.show_buy_button,h=c["if"],k=l.program(3,o,e),k.hash={},k.fn=k,k.inverse=l.program(5,p,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g=b.show_share_button,h=c["if"],k=l.program(8,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+=' </div> </div> </div>\n</div> <div class="soundHeader__title sc-media-body g-transition-opacity"> ',g="views/sound/title",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=b.visual,h.visual=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("lib/promise",["require","exports","module","_"],function(a,b,c){var d=a("_");c.exports={defer:function(a){var b=$.Deferred(),c=b.promise();return d.isFunction(a)?(a.call(c,b.resolve,b.reject),c):(d.isObject(a)&&d.isFunction(a.then)&&a.then(b.resolve,b.reject),b)},settled:function(a){return $.whenAll(a)},all:function(a){return $.when.apply($,a)},resolve:function(a){return $.Deferred().resolve(a)},reject:function(a){return $.Deferred().reject(a)},promisify:function(a){return function(){var b=$.Deferred();return a.apply(null,d.toArray(arguments).concat(function(a,c){a?b.reject(a):b.resolve(c)})),b.promise()}},call:function(a){var b=$.Deferred(),c=d.tail(arguments,1);try{b.resolve(a.apply(null,c))}catch(e){b.reject(e)}return b.promise()}}}),
define("lib/scene/scene",["require","exports","module","lib/backbone"],function(a,b,c){function f(){g.call(this)}function g(){this._raf||(this._raf=window.requestAnimationFrame(this.update))}var d,e=a("lib/backbone");d=c.exports=Class.extend([e.Events,{_layers:null,_raf:null,initialize:function(){this._layers=[],this.update=this.update.bind(this)},teardown:function(){window.cancelAnimationFrame(this._raf),this._raf=null;var a;while(a=this._layers.pop())a.off("dirty",f,this)},getLayers:function(){return this._layers},addLayer:function(a){this._layers.push(a),a.on("dirty",f,this),a.isDirty&&g.call(this)},update:function(){this._raf=null;var a,b;for(a=0;b=this._layers[a];++a)b.isDirty&&b.update()}}])}),
define("lib/scene/scene-layer",["require","exports","module","_","lib/views/canvas-view"],function(a,b,c){function g(){this.setDirty(!0)}var d,e=a("_"),f=a("lib/views/canvas-view");d=c.exports=f.extend({className:"g-box-full sceneLayer",render:function(){return this},addNode:function(a){var b=a[0],c=e.extend({el:this.el,scale:this.scale},a[1]),d=new b(c);d.className&&this.$el.addClass(d.className),this.addSubview(d).on("dirty",g,this).render()},onCanvasResize:function(){e.invoke(this.subviews,"onResize")},setDirty:function(a){(this.isDirty=a)&&this.trigger("dirty")},update:function(){if(this.disposed||!this.isDirty)return;var a=!1,b,c;this.context.clearRect(0,0,this.el.width,this.el.height);for(b=0;c=this.subviews[b];++b)c.draw(),a=a||c.isDirty;this.setDirty(a)}})}),
define("lib/helpers/waveform-helper",["require","exports","module","_","config","lib/circuit-breaker","lib/helpers/image-helper","lib/promise","lib/store","lib/support"],function(a,b,c){function t(a){var b=document.createElement("canvas"),c=a.width,d=a.height/2,e;return b.width=c,b.height=d,e=b.getContext("2d"),e.drawImage(a,0,0),e.getImageData(0,0,c,d)}function u(a){var b=t(a),c=a.width,d=a.height/2,e=new l(c),f;for(f=0;f<c;++f)e[f]=v(b,c,d,f);return e}function v(a,b,c,d){var e=b,f=0,g=c,h,i;while(f<g)h=f+g>>1,i=(h*e+d)*4+3,a.data[i]===255?f=h+1:g=h;return f}function w(a){return $.ajax({url:f.get("wisHost")+"/"+a,type:"GET",dataType:"json"})}function x(){var a=this.model.getSounds(),b,c=this.$el.width(),d=this.model.duration(),f;return a.length?f=a.map(function(a){return{duration:a.duration(),waveform_url:a.get("waveform_url")}}):f=[{duration:d,waveform_url:m}],b=f.map(function(a){var b=Math.round(c*a.duration/d),e=b>p?a.waveform_url:r[Math.floor(Math.random()*r.length)],f=i.defer(),g,j,o;return e.indexOf(n)>-1&&(e=m),o=e.split("/").pop(),j=q.get(o),j?f.resolve({data:j}):(f.done(function(a){q.set(a.key,a.data)}),g=function(){k.corsImg||(e="/_waveform/"+o),h.load(e).done(function(a){f.resolve({key:o,data:u(a)})})},s.enabled?w(o).done(function(a){s.succeeded();var b=new l(a.samples.length);a.samples.forEach(function(c,d){b[d]=a.height-c}),f.resolve({key:o,data:b})}).fail(function(){s.failed(),g()}):g()),f}),i.all(b).done(function(){this.waveformData=e.pluck(arguments,"data")}.bind(this))}var d,e=a("_"),f=a("config"),g=a("lib/circuit-breaker"),h=a("lib/helpers/image-helper"),i=a("lib/promise"),j=a("lib/store"),k=a("lib/support"),l=k.typedArrays?Uint8Array:Array,m="90GaSwazbrh1_m.png",n="/images/player-waveform-medium.png",o=500,p=15,q=new j({maxLength:o}),r=["oQ4mQ28umFy9_m.png","yAsGo4Oj2vjn_m.png","XOsjuw7QwaPt_m.png","H9uGzKOYK5Ph_m.png","IHBAsSu3O7qn_m.png","wco8JS0UScQo_m.png"].map(function(a){return(k.corsImg?"//w1.sndcdn.com/":"/_waveform/")+a}),s;m=(k.corsImg?"//w1.sndcdn.com/":"/_waveform/")+m,d=c.exports={loadWaveformDataForView:function(a){return s||(s=new g({tolerance:5,baseDelay:2e3,maxDelay:12e4})),x.call(a)}}}),
define("views/comments/comment-popover",["require","exports","module","_","config","collections/comment-heads","lib/helpers/datetime-helper","lib/helpers/image-helper","lib/helpers/lang-helper","lib/play-manager","lib/timed-comments-states","lib/views/mixins/timed-comments","vendor/usertext/usertext","lib/view","lib/window-events","views/comments/comment-popover.tmpl","views/comments/comment-popover.css"],function(a,b,c){function r(a){var b=a?"on":"off";p[b]("resize:debounced",this.resetCachedDimensions,this),this.sound[b]("finish",s,this)}function s(){this.isInteracting()||this.goToState(l.INITIAL)}function t(){this._hovered||(this._hoverTimeout=setTimeout(function(){this._hovered=!0,this._hoverTimeout=null}.bind(this),q))}function u(){this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null),this.getCurrentState()!==l.ACTIVE_TIMESTAMP&&this.goToState(l.INITIAL)}function v(a){var b=this.getTimestampByMouseEvent(a),c=A.call(this,a),d=this.getCurrentState();if(d===l.ACTIVE_TIMESTAMP)return;if(d===l.CURRENT_COMMENT&&this.getCurrentComment()===c)return;this.setInteracting(!0),c&&this._hovered?this.goToState(l.CURRENT_COMMENT,c.get("timestamp"),c):this.goToState(l.CURRENT_TIMESTAMP,b)}function w(a){var b=Math.floor((B.call(this)||0)/1e3),c=this.sound;c.isPrivate()||(window.open(c.get("permalink_url")+"#c="+b+"&t="+c.timecode()),k.pause(c)),a.stopPropagation(),a.preventDefault()}function x(a){var b=f.get("me"),c=h.timecode(a),d=b?i.urlFrom(b.attributes,10):i.getDefaultImage("user",10);this.toggleState("leaveCommentPlaceholder",!0),this.$$("body").text(""),this.$$("body").attr("title","").html("Leave a comment at "+c),this.$$("avatar").attr("title","").css({"background-image":"url("+d+")"}),this.setPosition(a/this.sound.duration()),this.toggleState("visible",!0)}function y(a){var b=this.getState("visible");a=a||this.getCurrentComment(),this.toggleState("leaveCommentPlaceholder",!1),a?(z.call(this,a),this.setPosition(a.get("timestamp")/this.sound.duration()),this.toggleState("visible",!0)):b&&!a&&this.toggleState("visible",!1)}function z(a){var b=a.get("user"),c=b.username,d=n(a.get("body"),{paragraphs:!1,className:"sc-truncate",links:!1}),e=i.urlFrom(b,10);this.$$("username").attr("href",b.permalink_url).attr("title","Go to "+j.possessive(c)+" profile").text(c),this.$$("body").attr("title","Click to reply to "+c).html(d),this.$$("avatar").attr("title","Go to "+j.possessive(c)+" profile").css({"background-image":e?"url("+e+")":""})}function A(a){var b=this.getTimestampByMouseEvent(a),c=Math.floor(this.options.avatarSize/2/this.cachedDimensions().width*this.sound.duration());return this.collection.getCommentAtTimestamp(b,c)}function B(){var a=this.stateMachine.currentComment;return a?a.get("timestamp"):this.stateMachine.currentTimestamp}var d,e=a("_"),f=a("config"),g=a("collections/comment-heads"),h=a("lib/helpers/datetime-helper"),i=a("lib/helpers/image-helper"),j=a("lib/helpers/lang-helper"),k=a("lib/play-manager"),l=a("lib/timed-comments-states"),m=a("lib/views/mixins/timed-comments"),n=a("vendor/usertext/usertext"),o=a("lib/view"),p=a("lib/window-events"),q=50;d=c.exports=o.extend(m,{className:"commentPopover",template:a("views/comments/comment-popover.tmpl"),css:a("views/comments/comment-popover.css"),defaults:{avatarSize:10,darkText:!1,flagSize:"small"},events:{mouseleave:u,mouseenter:t,"mousemove .commentPopover__scrub":v,"click .commentPopover__body":w},_hovered:!1,_hoverTimeout:null,setup:function(a){this.collection=new g(null,{sound_id:a.sound_id,secret_token:this.sound.get("secret_token")}),e.bindAll(this,"onClickOutsideOfPointer"),r.call(this,!0),this.toggleState("darkText",a.darkText).toggleState("smallAvatar",a.avatarSize===10),this.$el.addClass(a.flagSize)},dispose:function(){r.call(this,!1),$("html").off("mousedown",this.onClickOutsideOfPointer)},renderDecorate:function(){var a=this.getCurrentComment();this.toggleState("visible",!!a),this.toggleState("commentLeft",!1),a&&this.setPosition(a.get("timestamp")/this.sound.duration())},setPosition:function(a){var b=this.cachedDimensions().width,c=Math.floor(a*b)-this.options.avatarSize/2,d=0,e=b-c,f=this.$$("wrapper");a>.5?(e=b-e,f.width(e),this.getState("leaveCommentPlaceholder")?d=-1*this.$$("body").outerWidth():d=-1*(this.$$("username").outerWidth()+this.$$("body").outerWidth()),this.toggleState("commentLeft",!0)):(f.width(e),this.toggleState("commentLeft",!1)),f.css({transform:"translateX("+c+"px)",marginLeft:d}),this.$$("avatar").css({left:-d})},onAdd:function(a){this.toggleState("visible",!0),y.call(this,a)},onRemove:function(){this.goToState(l.INITIAL)},onInitialState:function(){this.setInteracting(!1),y.call(this)},onCurrentCommentChange:function(){y.call(this)},onCurrentTimestamp:function(a){!this.sound.isPrivate()&&this.isInteracting()?x.call(this,a):y.call(this)},onActiveTimestamp:function(a,b){y.call(this,b),$("html").on("mousedown",this.onClickOutsideOfPointer)},onClickOutsideOfPointer:function(a){!this.disposed&&this.getCurrentState()===l.ACTIVE_TIMESTAMP&&!$(a.target).closest(".commentPopover__wrapper").length&&(this.goToState(l.INITIAL),$("html").off("mousedown",this.onClickOutsideOfPointer))}})}),
define("views/waveform/nodes/background",["require","exports","module","_","lib/browser","views/waveform/nodes/has-gradient-fill","views/waveform/nodes/has-waveform-data","lib/scene/scene-node","models/sound","lib/view","views/waveform/waveform-events","views/waveform/waveform-style"],function(a,b,c){function q(a){var b=a?"on":"off";this.model[b](l.SOUND_FOCUS,v,this)[b](l.SOUND_UNFOCUS,w,this)[b]("play",s,this)}function r(a){return a>0&&a<p}function s(){u.call(this),t.call(this),this.setDirty(!0)}function t(){var a=this.model.getSounds();a.forEach(function(a,b){this._playingSounds[b]=a.isPlaying()},this)}function u(){var a=this.model.getSounds();a.forEach(function(a,b){this._activeSounds[b]=!0},this)}function v(a){a&&(this._focusedSound=a,u.call(this),this.setDirty(!0))}function w(){this._focusedSound=null,u.call(this),this.setDirty(!0)}function x(a,b){var c=b?p:0;return c>a?a+1:c<a?a-1:a}function y(){if(this._pattern)return this._pattern;var a=document.createElement("canvas"),b=this.options,c=this.canvas,d=a.getContext("2d"),e=b.scale,g=c.width/e,h=c.height/e,i=b.waveformHeight,j=m.getConfig("gapWidth"),k=m.getConfig("barWidth"),l=k+j,n=b.upperPartHeight*h,o=h-n,p=this.getFillStyle(),q=j>0,r=q&&this.getFillStyle(1,"gapGradient"),s=null,t=null,u,v,w,x,y;a.width=c.width,a.height=c.height,f.isHiDPI&&e!==1&&d.scale(e,e),d.beginPath(),d.fillStyle=r;for(u=0;u<g;u+=l)x=this.getWaveformHeightAt(u),v=Math.floor(x/i*n),w=Math.floor((1-x/i)*o+n),d.rect(u,v,k,w-v),q&&u&&(y=Math.max(v,s),d.fillRect(u-j,y,j,Math.min(w,t)-y)),s=v,t=w;return d.fillStyle=p,d.fill(),this._pattern=this.context.createPattern(a,"no-repeat"),this._pattern}var d,e=a("_"),f=a("lib/browser"),g=a("views/waveform/nodes/has-gradient-fill"),h=a("views/waveform/nodes/has-waveform-data"),i=a("lib/scene/scene-node"),j=a("models/sound"),k=a("lib/view"),l=a("views/waveform/waveform-events"),m=a("views/waveform/waveform-style"),n,o=3,p=13;d=c.exports=k.extend(i,h,g,{ModelClass:j,defaults:{waveformStyle:"default"},gradientName:"backgroundGradient",_focusedSound:null,_pattern:null,_activeSounds:null,_playingSounds:null,_currentPlayingStep:0,_currentFocusStep:0,setup:function(){var a=this.model;this._activeSounds=[],this._playingSounds=[],u.call(this),t.call(this),a.isPlaying()&&(this._currentPlayingStep=p),q.call(this,!0)},dispose:function(){q.call(this,!1)},onResize:function(){this._pattern=null},draw:function(){var a=y.call(this),b=this.context,c=this.options.scale,d=this.canvas.width,e=this.canvas.height,f=this.model.duration(),g=d/f,h=x(this._currentPlayingStep,this.model.isPlaying()),i=x(this._currentFocusStep,!!this._focusedSound);this._currentPlayingStep=h,this._currentFocusStep=i,this.isAnimating=r(i)||r(h),b.save(),b.fillStyle=a,b.scale(1/c,1/c),this.model.getSounds().forEach(function(a,c){var d=a.duration()*g,f=this._playingSounds[c]?Math.max(h,i):this._activeSounds[c]?i:0;b.globalAlpha=n(f),b.fillRect(0,0,d,e)},this),i===0&&(this._activeSounds.length=0),h===0&&(this._playingSounds.length=0),b.restore()}}),n=e.memoize(function(a){var b=Math.max(0,(a-o)/(p-o));return-Math.cos(b*Math.PI)/8+.875})}),
define("views/waveform/nodes/comments",["require","exports","module","_","collections/comment-heads","config","views/waveform/nodes/has-waveform-data","lib/helpers/image-helper","lib/helpers/mouse-helper","lib/promise","lib/scene/scene-node","lib/timed-comments-states","lib/views/mixins/timed-comments","lib/view","views/waveform/nodes/comments.css"],function(a,b,c){function u(a){this.options.$eventEl[a]("click",this.onClick)[a]("mousemove",this.onMouseMove)[a]("mouseenter",this.onMouseEnter)[a]("mouseleave",this.onMouseLeave),this.sound[a]("finish",this.onPlaybackFinish)}function v(){return!!this._avatarsDeferred&&this._avatarsDeferred.state()!=="pending"}function w(){var a=this.collection.map(x,this).filter(e.identity);return this._avatarsDeferred=this.addDeferred(k.settled(a).done(function(){this.setDirty(!0),this.toggleState("loadedAvatars",!0)}.bind(this))),this._avatarsDeferred}function x(a){var b,c,d,e,f,g,h,j,l;a.length?(c=a[0],d=a[1][0]):(c=a.get("timestamp"),d=a);if(!d||c==null||c<0)return;return b=k.defer(),f={timestamp:c,cid:d.cid},g=d.get("user"),h=!!g.avatar_t20x20,e=h?g.avatar_t20x20:g.avatar_url,j=e.indexOf("default_avatar")!==-1,this.sound.get("comment_count")<50||!j?(l={view:this,url:h||j?e:i.setFormat(e,10,!0),info:f,imgDefer:b},h?y(l):z(l)):(this._comments.unshift(f),b.resolve()),b}function y(a){var b=new Image;b.onload=C.bind(a.view,b,a.info,a.imgDefer),b.onerror=D.bind(a.view,a.info,a.imgDefer),b.src=a.url}function z(a){t.push(a),A()}function A(){var a,b,c=s.length;while(c<r&&(b=t.shift())){a=b.imgDefer;if(a.state()!=="pending")continue;c=s.push(b),y(b),a.always(B(b))}}function B(a){return function(){s.splice(s.indexOf(a),1),A()}}function C(a,b,c){this.disposed||(b.el=a,this._comments.unshift(b)),c.resolve()}function D(a,b){this._comments.unshift(a),b.resolve()}function E(a){var b=this.getTimestampByMouseEvent(a),c=Math.floor(this.options.avatarWidth/2/this.cachedDimensions().width*this.sound.duration());return this.collection.getCommentAtTimestamp(b,c)}function F(a){return a.offsetY>=this.options.upperPartHeight*this.cachedDimensions().height}var d,e=a("_"),f=a("collections/comment-heads"),g=a("config"),h=a("views/waveform/nodes/has-waveform-data"),i=a("lib/helpers/image-helper"),j=a("lib/helpers/mouse-helper"),k=a("lib/promise"),l=a("lib/scene/scene-node"),m=a("lib/timed-comments-states"),n=a("lib/views/mixins/timed-comments"),o=a("lib/view"),p=o.prototype,q=500,r=10,s=[],t=[];d=c.exports=o.extend(l,h,n,{css:a("views/waveform/nodes/comments.css"),className:"waveformCommentsNode",defaults:{sound_id:null,avatarWidth:10,avatarHeight:10,fullAvatarWidth:20,fullAvatarHeight:20,drawLines:!0,strokeStyle:"rgba(255,255,255,.1)",bulkFetch:g.get("maxComments")},_avatarsDeferred:null,_hovered:!1,_hoverTimeout:null,_comments:null,states:{loadedAvatars:"loaded"},setup:function(a){this.collection=new f(null,{sound_id:a.sound_id,secret_token:this.sound.get("secret_token")}),this._comments=[],e.bindAll(this,"onClick","onMouseMove","onMouseEnter","onMouseLeave","onClickOutsideOfPointer","onPlaybackFinish"),u.call(this,"on")},dispose:function(){this._comments.length=0,u.call(this,"off")},getAudible:function(){return this.sound},hasData:function(){if(p.hasData.call(this))return v.call(this)},fetchData:function(){return p.hasData.call(this,this.collection)?v.call(this)?(this.toggleState("loadedAvatars",!0),k.resolve()):w.call(this):p.fetchData.call(this,this.collection)},onResize:function(){this.resetCachedDimensions()},draw:function(){if(!this._comments.length||!v.call(this))return;var a=this.context,b=this.canvas,c=this.options,d=b.width/c.scale,e=b.height/c.scale*c.upperPartHeight,f=c.avatarHeight,g=c.avatarWidth,h=f/2,i=this.sound.get("duration");this._comments.forEach(function(b){var c=b.timestamp/i,j=Math.floor(d*c);b.el&&a.drawImage(b.el,j-h,e,f,g)},this)},onAdd:function(a){x.call(this,a).done(this.setDirty.bind(this,!0))},onRemove:function(a){var b=this._comments.some(function(b,c,d){if(b.cid===a.cid)return d.splice(c,1),!0});b&&this.setDirty(!0)},onInitialState:function(){this.setInteracting(!1)},onActiveTimestamp:function(){$("html").one("click",this.onClickOutsideOfPointer)},onClickOutsideOfPointer:function(){!this.disposed&&this.getCurrentState()===m.ACTIVE_TIMESTAMP&&this.goToState(m.INITIAL)},onClick:function(a){a=j.normalizeEvent(a);if(!F.call(this,a))return;a.stopPropagation();var b=E.call(this,a),c=b?b.get("timestamp"):this.getTimestampByMouseEvent(a);this.goToState(m.ACTIVE_TIMESTAMP,c,b)},onMouseMove:function(a){var b=this.getTimestampByMouseEvent(a),c=E.call(this,a),d=this.getCurrentState();a=j.normalizeEvent(a);if(!F.call(this,a)){d===m.CURRENT_COMMENT&&this.goToState(m.INITIAL);return}if(d===m.ACTIVE_TIMESTAMP)return;if(d===m.CURRENT_COMMENT&&this.getCurrentComment()===c)return;c&&this._hovered?(this.setInteracting(!0),this.goToState(m.CURRENT_COMMENT,c.get("timestamp"),c)):this.goToState(m.CURRENT_TIMESTAMP,b)},onMouseEnter:function(){this._hovered||(this._hoverTimeout=setTimeout(function(){this._hovered=!0,this._hoverTimeout=null}.bind(this),q))},onMouseLeave:function(){this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null)},onPlaybackFinish:function(){this.isInteracting()||this.goToState(m.INITIAL)}})}),
define("views/waveform/nodes/interaction",["require","exports","module","_","config","lib/helpers/mouse-helper","lib/play-manager","lib/scene/scene-node","models/sound","lib/support","lib/view","views/waveform/waveform-events"],function(a,b,c){function v(a){this.options.$eventEl[a](q,this.onPointerLeave)[a](r,this.onPointerEnter)[a](t,this.onPointerMove)[a](u,this.onPointerUp)[a](s,this.onPointerDown)}function w(a){return a.offsetY<this.options.upperPartHeight*(this.canvas.height/this.options.scale)}var d,e=a("_"),f=a("config"),g=a("lib/helpers/mouse-helper"),h=a("lib/play-manager"),i=a("lib/scene/scene-node"),j=a("models/sound"),k=a("lib/support"),l=a("lib/view"),m=a("views/waveform/waveform-events"),n=$(window),o=f.get("appView").$el,p=function(){return!1},q="mouseleave",r="mouseenter",s=k.touch?"touchstart":"mousedown",t=k.touch?"touchmove":"mousemove",u=k.touch?"touchend":"mouseup";d=c.exports=l.extend(i,{ModelClass:j,requiredAttributes:["duration"],defaults:{upperPartHeight:.7},states:{scrubbing:function(a){document.onselectstart=a?p:null,o.toggleClass("sc-selection-disabled",a)},clickToPlay:function(a){this.$el.css({cursor:a?"pointer":""})}},_cachedOffset:null,_focusedSound:null,draw:$.noop,setup:function(){e.bindAll(this,"onPointerLeave","onPointerEnter","onPointerDown","onPointerMove","onPointerUp"),v.call(this,"on")},dispose:function(){v.call(this,"off")},seek:function(a){this.model.seek(a)},onResize:function(){this._cachedOffset=null},onPointerDown:function(a){a=g.normalizeEvent(a),this.toggleState("scrubbing",!0),n.on(u,this.onPointerUp),w.call(this,a)&&(this.model.isPlaying()?this.seek(this.getSeekPosition(a.originalEvent.pageX)):h.toggle(this.model,{userAction:!0}))},onPointerUp:function(a){a=g.normalizeEvent(a),n.off(u,this.onPointerUp),this.toggleState("scrubbing",!1)},onPointerMove:function(a){k.touch&&a.preventDefault(),a=g.normalizeEvent(a);var b=this.getSeekPosition(a.originalEvent.pageX),c;w.call(this,a)?(c=this.model.getSoundAt(b),this._focusedSound!==c?(this._focusedSound=c,this.model.trigger(m.SOUND_FOCUS,c)):c.isPlaying()&&this.getState("scrubbing")&&this.seek(b),this.model.isPlaying()&&this.toggleState("clickToPlay",this.model.getCurrentSound()!==c)):this._focusedSound&&(this._focusedSound=null,this.model.trigger(m.SOUND_UNFOCUS,this._focusedSound))},onPointerEnter:function(a){a=g.normalizeEvent(a);var b=this.model.getSoundAt(this.getSeekPosition(a.originalEvent.pageX));b&&b.isPaused()&&w.call(this,a)&&(this._focusedSound=b,this.model.trigger(m.SOUND_FOCUS,b))},onPointerLeave:function(){var a=this._focusedSound;a&&(this._focusedSound=null,this.model.trigger(m.SOUND_UNFOCUS,a))},getCachedOffset:function(){if(!this._cachedOffset){var a=this.$el,b=a.offset(),c=Math.floor;this._cachedOffset={left:c(b.left),top:c(b.top),right:c(b.left+a.width()),bottom:c(b.top+a.height())}}return this._cachedOffset},getSeekPosition:function(a){var b=(a-this.getCachedOffset().left)/this.canvas.width*this.options.scale,c=b*this.model.duration(),d=this.model.getSoundAt(c);return this.model.getCurrentSound()===d?c:d.timeOffset}})}),
define("views/waveform/nodes/progress",["require","exports","module","views/waveform/nodes/follows-progress","views/waveform/nodes/has-gradient-fill","lib/scene/scene-node","models/sound","lib/view","views/waveform/waveform-style"],function(a,b,c){function k(a){var b=a?"on":"off";this.model[b]("play pause seeked",l,this)}function l(){this.setDirty(!0)}var d,e=a("views/waveform/nodes/follows-progress"),f=a("views/waveform/nodes/has-gradient-fill"),g=a("lib/scene/scene-node"),h=a("models/sound"),i=a("lib/view"),j=a("views/waveform/waveform-style");d=c.exports=i.extend(g,e,f,{ModelClass:h,requiredAttributes:["duration"],defaults:{waveformStyle:"default"},gradientName:"progressGradient",setup:function(){k.call(this,!0)},dispose:function(){k.call(this,!1)},draw:function(){var a=this.context,b=this.canvas,c=this.options,d=j.getConfig("barWidth")+j.getConfig("gapWidth"),e=j.getConfig("fadeInSteps"),f=this.lastPosition=Math.ceil(this.model.progress()*(b.width/c.scale)*e)/e,g=Math.floor(f/d),h=f%d;a.save(),a.globalCompositeOperation="source-atop",a.fillStyle=this.getFillStyle(),a.fillRect(0,0,g*d,this.canvas.height),h&&(a.fillStyle=this.getFillStyle(h/d),a.fillRect(g*d,0,d,this.canvas.height)),a.restore()}})}),
define("views/waveform/nodes/scrubber",["require","exports","module","_","views/waveform/nodes/has-gradient-fill","lib/helpers/mouse-helper","lib/scene/scene-node","models/sound","lib/view","views/waveform/waveform-events","views/waveform/waveform-style"],function(a,b,c){function p(a){var b=this.context,c=this.canvas,d=this.options,e=d.scale,f=this._mouseX||0,g=this._focusedSound||this._lastFocusedSound,h,i,j;i=l.getConfig("barWidth")+l.getConfig("gapWidth"),h=this.model.progress()*(c.width/e),j=g===this.model.getCurrentSound()?f:g.timeOffset/this.model.duration()*(c.width/e),h=Math[h<j?"floor":"ceil"](h/i)*i,b.save(),b.globalCompositeOperation="source-atop",b.fillStyle=this.getFillStyle(a,h<j?"scrubberGradientForward":this.gradientName),b.fillRect(Math.min(h,j),0,Math.abs(h-j),c.height),b.restore()}function q(a){this.options.$eventEl[a]("mouseenter",this.onMouseEnter)[a]("mouseleave",this.onMouseLeave)[a]("mousemove",this.onMouseMove),this.model[a](k.SOUND_FOCUS,t,this)[a](k.SOUND_UNFOCUS,u,this)}function r(a){return a.offsetY<this.canvas.height/this.options.scale*this.options.upperPartHeight}function s(){var a=this._targetStep,b=this._currentStep;return a>b?b+1:a<b?b-1:b}function t(a){a&&(this._focusedSound=a,this.fadeIn())}function u(){this._lastFocusedSound=this._focusedSound,this._focusedSound=null,this.fadeOut()}var d,e=a("_"),f=a("views/waveform/nodes/has-gradient-fill"),g=a("lib/helpers/mouse-helper"),h=a("lib/scene/scene-node"),i=a("models/sound"),j=a("lib/view"),k=a("views/waveform/waveform-events"),l=a("views/waveform/waveform-style"),m,n=3,o=13;d=c.exports=j.extend(h,f,{ModelClass:i,gradientName:"scrubberGradientBackward",_lastMouseX:null,_mouseX:null,_currentStep:0,_focusedSound:null,_lastFocusedSound:null,_targetStep:0,_isHovering:!1,setup:function(){e.bindAll(this,"onMouseEnter","onMouseLeave","onMouseMove","fadeIn","fadeOut"),q.call(this,"on")},dispose:function(){q.call(this,"off"),clearTimeout(this._delayTimeout)},onResize:function(){this._mouseX=this._lastMouseX=null},onMouseEnter:function(){this._isHovering=!0},onMouseLeave:function(){this._isHovering=!1},onMouseMove:function(a){a=g.normalizeEvent(a),r.call(this,a)&&(this._lastMouseX=this._mouseX,this._mouseX=a.offsetX),this._lastMouseX!==this._mouseX&&this.setDirty(!0)},fadeIn:function(){this._targetStep=o,this.setDirty(!0)},fadeOut:function(){this._targetStep=0,this.setDirty(!0)},draw:function(){var a=s.call(this),b=m(a),c=this.model.isPlaying(),d=this.model.getCurrentSound();this.isAnimating=a!==this._currentStep,this._currentStep=a;if(!c&&this._focusedSound===d||c&&this._focusedSound===d&&!this._isHovering||!c&&!this._focusedSound&&this._lastFocusedSound===d||b===0)return;p.call(this,b)}}),m=e.memoize(function(a){var b=Math.max(0,(a-n)/(o-n));return-Math.cos(b*Math.PI)/2+.5})}),
define("views/waveform/nodes/time-indicator",["require","exports","module","models/audible","lib/helpers/datetime-helper","views/waveform/nodes/follows-progress","lib/scene/scene-node","lib/view","views/waveform/waveform-style"],function(a,b,c){function l(a){var b=a?"on":"off";this.model[b]("play",n,this)[b]("change:duration",o,this)}function m(a,b,c,d){var e=this.context,f=e.lineTo.bind(e),g=e.quadraticCurveTo.bind(e),h=k.topRight,i=k.topLeft,j=a+c,l=b+d;e.beginPath(),e.moveTo(a+i,b),f(j-h,b),g(j,b,j,b+h),f(j,l),f(a,l),f(a,b+i),g(a,b,a+i,b),e.closePath()}function n(){this.setDirty(!0)}function o(){this._duration=null}var d,e=a("models/audible"),f=a("lib/helpers/datetime-helper"),g=a("views/waveform/nodes/follows-progress"),h=a("lib/scene/scene-node"),i=a("lib/view"),j=a("views/waveform/waveform-style"),k={topLeft:2,topRight:2};d=c.exports=i.extend(h,g,{ModelClass:e,_lastSecs:null,_duration:null,defaults:{upperPartHeight:.7,waveformStyle:"default"},requiredAttributes:["duration"],setup:function(){l.call(this,!0),this.setFont()},dispose:function(){l.call(this,!1)},onResize:function(){this.setFont()},setFont:function(){this.context.font='10px "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Garuda, Verdana, Tahoma, sans-serif',this.setDirty(!0)},shouldBeDirty:function(){return this.hasPositionChanged()||this._lastSecs!==Math.floor(this.model.currentTime()/1e3)},getDuration:function(a){if(!this._duration){var b=f.timecode(this.model.duration());this._duration={text:b,width:this.context.measureText(b).width}}return this._duration[a]},draw:function(){var a=this.el,b=this.context,c=this.options,d=this.model,e=c.waveformStyle,g=d.currentTime(),h=2,i=12,k=f.timecode(g),l=this.getDuration("text"),n=b.measureText(k).width,o=this.getDuration("width"),p=o+h*2,q=n+h*2,r=a.width/c.scale,s=this.lastPosition=0,t=c.upperPartHeight*(a.height/c.scale),u=t-i-h;m.call(this,r-p,u,p,i+h),b.fillStyle=j.getColor("durationIndicatorBg",e),b.fill();if(g>0||d.isPlaying())m.call(this,Math.min(s,r-p-q),u,n+h*2,i+h),b.fill(),b.fillStyle=j.getColor("progressIndicatorColor",e),b.fillText(k,Math.min(s+h,r-p-q+h),Math.floor(t-h*2)+.5);b.fillStyle=j.getColor("durationIndicatorColor",e),b.fillText(l,Math.floor(r-p+h)+.5,Math.floor(t-h*2)+.5),this._lastSecs=Math.floor(g/1e3)}})}),
define("views/waveform/waveform.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=' <div style="height:',e=a.upperPartHeightPercent,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"upperPartHeightPercent",{hash:{}})),d+=o(e)+';" class="waveform__emptyWaveform sc-font sc-type-light"> <span class="waveform__emptyMessage"> ',e=a.emptySet,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=" ",e=a.isProcessing,f=c["if"],j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" </span> </div>\n",d}function q(a,b){return"This playlist has no tracks yet"}function r(a,b){var c="",d;return c+="This ",d=a.type,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"type",{hash:{}})),c+=o(d)+" is being processed",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="waveform__layer waveform__scene"></div>\n',g=b.emptyWaveform,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/waveform/waveform.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".waveform{position:relative;width:100%;height:100%;opacity:0;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.waveform:not(.playing) .waveform__scene:hover{cursor:pointer}.waveform.loaded{opacity:1}.waveform__layer,.waveform__layer .sceneLayer{position:absolute;top:0;left:0;width:100%;height:100%}.waveform__empty .waveform__scene{opacity:.4}.waveform__emptyWaveform{position:relative}.waveform__emptyMessage{position:absolute;text-align:center;width:100%;bottom:5px;color:#000;font-size:11px;text-shadow:1px 1px 1px #fff}.waveform__emptyMessage{font-size:16px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/play-button.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".playButton{position:relative;display:inline-block;width:43px;height:43px;margin:0;padding:0;vertical-align:middle;border:0;background:transparent}.playButton.small{width:20px;height:20px}.playButton:focus{outline:none}.playButton:disabled,.playButton.disabled{opacity:.4}.playButton__play{display:block}.playButton__pause{display:none}.playButton.playing .playButton__play{display:none}.playButton.playing .playButton__pause{display:block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/play-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43 43"> <defs> <linearGradient id="',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"> <stop offset="0%" stop-color="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColor,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColor",{hash:{}})),f+=m(g)+'" stop-opacity="1"/> <stop offset="100%" stop-color="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorShade,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorShade",{hash:{}})),f+=m(g)+'" stop-opacity="1"/> </linearGradient> </defs> <circle fill="url(#',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+')" stroke="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorDarker,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorDarker",{hash:{}})),f+=m(g)+'" cx="21.5" cy="21.5" r="21"/> <path class="playButton__play" fill="#fff" d="M31,21.5L17,33l2.5-11.5L17,10L31,21.5z"/> <g fill="#fff" class="playButton__pause"> <rect x="15" y="12" width="5" height="19"/> <rect x="23" y="12" width="5" height="19"/> </g>\n</svg>\n',f})}),
define("views/sound/logo.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<style type="text/css"> .logo { display: inline-block; height: 22px; padding: 5px 0; } .logo__path { fill: #999; } .logo.inverse .logo__path { fill: #fff; } .logo.alt .logo__path { fill: #333; } .logo:hover .logo__path { fill: url("#',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'"); } .logo.state-small { width: 25px; overflow: hidden; }\n</style>\n<svg xmlns="http://www.w3.org/2000/svg" width="100" height="14"> <defs> <linearGradient id="',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"> <stop offset="0%" stop-color="#ff7700" stop-opacity="1"/> <stop offset="100%" stop-color="#ff3300" stop-opacity="1"/> </linearGradient> </defs> <path class="logo__path" d="M10.517 3.742c-.323 0-.49.363-.49.582 0 0-.244 3.591-.244 4.641 0 1.602.15 2.621.15 2.621 0 .222.261.401.584.401.321 0 .519-.179.519-.401 0 0 .398-1.038.398-2.639 0-1.837-.153-4.127-.284-4.592-.112-.395-.313-.613-.633-.613zm-1.996.268c-.323 0-.49.363-.49.582 0 0-.244 3.322-.244 4.372 0 1.602.119 2.621.119 2.621 0 .222.26.401.584.401.321 0 .581-.179.581-.401 0 0 .081-1.007.081-2.608 0-1.837-.206-4.386-.206-4.386 0-.218-.104-.581-.425-.581zm-2.021 1.729c-.324 0-.49.362-.49.582 0 0-.272 1.594-.272 2.644 0 1.602.179 2.559.179 2.559 0 .222.229.463.552.463.321 0 .519-.241.519-.463 0 0 .19-.944.19-2.546 0-1.837-.253-2.657-.253-2.657 0-.22-.104-.582-.425-.582zm-2.046-.358c-.323 0-.49.363-.49.582 0 0-.162 1.92-.162 2.97 0 1.602.069 2.496.069 2.496 0 .222.26.557.584.557.321 0 .581-.304.581-.526 0 0 .143-.936.143-2.538 0-1.837-.206-2.96-.206-2.96 0-.218-.198-.581-.519-.581zm-2.169 1.482c-.272 0-.232.218-.232.218v3.982s-.04.335.232.335c.351 0 .716-.832.716-2.348 0-1.245-.436-2.187-.716-2.187zm18.715-.976c-.289 0-.567.042-.832.116-.417-2.266-2.806-3.989-5.263-3.989-1.127 0-2.095.705-2.931 1.316v8.16s0 .484.5.484h8.526c1.655 0 3-1.55 3-3.155 0-1.607-1.346-2.932-3-2.932zm10.17.857c-1.077-.253-1.368-.389-1.368-.815 0-.3.242-.611.97-.611.621 0 1.106.253 1.542.699l.981-.951c-.641-.669-1.417-1.067-2.474-1.067-1.339 0-2.425.757-2.425 1.99 0 1.338.873 1.736 2.124 2.026 1.281.291 1.513.486 1.513.923 0 .514-.379.738-1.184.738-.65 0-1.26-.223-1.736-.777l-.98.873c.514.757 1.504 1.232 2.639 1.232 1.853 0 2.668-.873 2.668-2.163 0-1.477-1.193-1.845-2.27-2.097zm6.803-2.745c-1.853 0-2.949 1.435-2.949 3.502s1.096 3.501 2.949 3.501c1.852 0 2.949-1.434 2.949-3.501s-1.096-3.502-2.949-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.096 0 1.551.94 1.551 2.153.001 1.213-.454 2.153-1.551 2.153zm8.939-1.736c0 1.086-.533 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.897h-1.358v3.916c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.754-1.136 2.754-3.103v-3.897h-1.358v3.916zm8.142-.89l.019 1.485c-.087-.174-.31-.515-.475-.768l-2.703-3.692h-1.362v6.894h1.401v-2.988l-.02-1.484c.088.175.311.514.475.767l2.79 3.705h1.213v-6.894h-1.339v2.975zm5.895-2.923h-2.124v6.791h2.027c1.746 0 3.474-1.01 3.474-3.395 0-2.484-1.437-3.396-3.377-3.396zm-.097 5.472h-.67v-4.152h.719c1.436 0 2.028.688 2.028 2.076 0 1.242-.651 2.076-2.077 2.076zm7.909-4.229c.611 0 1 .271 1.242.737l1.26-.582c-.426-.883-1.202-1.503-2.483-1.503-1.775 0-3.016 1.435-3.016 3.502 0 2.143 1.191 3.501 2.968 3.501 1.232 0 2.047-.572 2.513-1.533l-1.145-.68c-.358.602-.718.864-1.329.864-1.019 0-1.611-.932-1.611-2.153-.001-1.261.583-2.153 1.601-2.153zm5.17-1.192h-1.359v6.791h4.083v-1.338h-2.724v-5.453zm6.396-.157c-1.854 0-2.949 1.435-2.949 3.502s1.095 3.501 2.949 3.501c1.853 0 2.95-1.434 2.95-3.501s-1.097-3.502-2.95-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.095 0 1.55.94 1.55 2.153.001 1.213-.454 2.153-1.55 2.153zm8.557-1.736c0 1.086-.532 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.794h-1.358v3.813c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.755-1.136 2.755-3.103v-3.794h-1.36v3.813zm5.449-3.907h-2.318v6.978h2.211c1.908 0 3.789-1.037 3.789-3.489 0-2.552-1.565-3.489-3.682-3.489zm-.108 5.623h-.729v-4.266h.783c1.565 0 2.21.706 2.21 2.133.001 1.276-.707 2.133-2.264 2.133z"/> </svg>\n',f})}),
define("views/sound/title.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=" ",e=a.showH2Link,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=' <span title="',e=a.inlineTitle,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"inlineTitle",{hash:{}})),d+=o(e)+'" class="',e=a.inverse,f=c["if"],j=k.program(7,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+='">',e=a.inlineTitle,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"inlineTitle",{hash:{}})),d+=o(e)+"</span> ",e=a.showH2Link,f=c["if"],j=k.program(9,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function q(a,b){var d="",e,f;d+=' <a href="',e=a.h2Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Link",{hash:{}})),d+=o(e)+'" title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="sc-link-',e=a.inverse,f=c["if"],j=k.program(3,r,b),j.hash={},j.fn=j,j.inverse=k.program(5,s,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',d}function r(a,b){return"white"}function s(a,b){return"dark"}function t(a,b){return"title__white"}function u(a,b){return" </a> "}function v(a,b){var d="",e,f;d+=" ",e=a.showH1,f=c["if"],j=k.program(12,w,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=" <br> ",e=a.showH2Link,f=c["if"],j=k.program(19,B,b),j.hash={},j.fn=j,j.inverse=k.program(22,D,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function w(a,b){var d="",e,f;d+=" ",e=a.showH1Link,f=c["if"],j=k.program(13,x,b),j.hash={},j.fn=j,j.inverse=k.program(16,z,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" ",d}function x(a,b){var d="",e,f;d+=' <a href="',e=a.h1Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Link",{hash:{}})),d+=o(e)+'" title="',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+'" class="title__h1 sc-truncate sc-link-light g-text-shadow ',e=a.visual,f=c["if"],j=k.program(14,y,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+" </a> ",d}function y(a,b){return"g-text-visual"}function z(a,b){var d="",e,f;d+=' <span title="',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+'" class="title__h1 sc-truncate sc-text-light g-text-shadow ',e=a.visual,f=c["if"],j=k.program(17,A,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+" </span> ",d}function A(a,b){return"g-text-visual"}function B(a,b){var d="",e,f;d+=' <a href="',e=a.h2Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Link",{hash:{}})),d+=o(e)+'" title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="title__h2 sc-truncate sc-link-dark g-text-shadow ',e=a.visual,f=c["if"],j=k.program(20,C,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+" </a> ",d}function C(a,b){return"g-text-visual"}function D(a,b){var d="",e,f;d+=' <span title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="title__h2 sc-truncate sc-link-dark g-text-shadow ',e=a.visual,f=c["if"],j=k.program(23,E,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='">',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+"</span> ",d}function E(a,b){return"g-text-visual"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.inline,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(11,v,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/title.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".title{font-size:12px;line-height:16px}.title__h1,.title__h2{display:inline-block;max-width:100%;vertical-align:bottom}.title__h1{margin-bottom:1px;font-weight:100}.title__h1:hover{color:#999}.title__white{color:#fff}.title__h2{font-family:'Interstate','Lucida Grande','Lucida Sans Unicode','Lucida Sans',Garuda,Verdana,Tahoma,sans-serif;font-size:14px;line-height:18px;font-weight:400}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/thin-progress-bar",["require","exports","module","lib/views/progress-bar","views/sound/thin-progress-bar.tmpl","views/sound/thin-progress-bar.css"],function(a,b,c){var d,e=a("lib/views/progress-bar");d=c.exports=e.extend({template:a("views/sound/thin-progress-bar.tmpl"),css:a("views/sound/thin-progress-bar.css"),className:"thinProgressbar sc-pointer",colorCustomizable:!0,updatePlayed:function(){if(!this.playedProgress)return;this.$$("played")[0].style.width=100*this.playedProgress+"%"}})}),
define("collections/user-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d,e=a("collections/sounds");d=c.exports=e.extend({defaults:{resource_type:"users",sounds_type:"tracks"}})}),
define("collections/related-sounds",["require","exports","module","config","collections/sounds"],function(a,b,c){function h(){return Math.floor(Math.random()*1e8)}var d,e=a("config"),f=a("collections/sounds"),g=null;d=c.exports=f.extend({defaults:{sounds_type:"related",resource_type:"tracks"},audioSourceVersion:null,baseUrlQueryParams:function(){var a=e.get("me").id||null;return!a&&!g&&(g=h()),{user_id:a,anon_user_id:a?null:g}},getInfo:function(){return{type:"recommender",version:this.audioSourceVersion}},parse:function(a){return this.audioSourceVersion=a.version||"no_version",f.prototype.parse.apply(this,arguments)}})}),
define("collections/spotlight-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d,e=a("collections/sounds");d=c.exports=e.extend({isEdgeBaseUrl:!0,defaults:{sounds_type:"spotlight",resource_type:"users"}})}),
define("views/sound/sound-badge.tmpl",["vendor/handlebars-runtime","views/sound/title","views/sound/stats"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;return f+='<a href="',g=b.permalink_url,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"permalink_url",{hash:{}})),f+=p(g)+'" class="sc-media-image"> ',g=b,h={},i=50,h.size=i,i=c.$image,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+'\n</a>\n<div class="sc-media-content soundBadge__content"> ',g="views/sound/title",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+' <div class="soundBadge__stats"> ',g="views/sound/stats",h={},i=b.id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+" </div>\n</div>\n",f})}),
define("views/sound/sound-badge.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".soundBadge{position:relative;min-height:60px;padding:5px 0}.soundBadge__content{position:relative}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("models/group",["require","exports","module","lib/mixins/has-image","lib/mixins/throws-not-found","lib/model"],function(a,b,c){var d,e=a("lib/mixins/has-image"),f=a("lib/mixins/throws-not-found"),g=a("lib/model");d=c.exports=g.extend(e,f,{resource_type:"group",urnPrefix:"soundcloud:groups",baseUrl:function(){return["groups",this.id].join("/")}})}),
define("views/share/icons-list",["require","exports","module","_","lib/browser","lib/helpers/L10n-helper","lib/views/mixins/multi-resource-type","lib/view","views/share/icons/email","views/share/icons/fb","views/share/icons/google","views/share/icons/line","views/share/icons/mixi","views/share/icons/orkut","views/share/icons/pinterest","views/share/icons/tuenti","views/share/icons/tumblr","views/share/icons/twitter","views/share/icons/vkontakte","views/share/icons/weibo","views/share/icons-list.tmpl","views/share/icons-list.css"],function(a,b,c){var d,e=a("_"),f=a("lib/browser"),g=a("lib/helpers/L10n-helper"),h=a("lib/views/mixins/multi-resource-type"),i=a("lib/view"),j=a("views/share/icons/email"),k=a("views/share/icons/fb"),l=a("views/share/icons/google"),m=a("views/share/icons/line"),n=a("views/share/icons/mixi"),o=a("views/share/icons/orkut"),p=a("views/share/icons/pinterest"),q=a("views/share/icons/tuenti"),r=a("views/share/icons/tumblr"),s=a("views/share/icons/twitter"),t=a("views/share/icons/vkontakte"),u=a("views/share/icons/weibo"),v=[k,s,r,l],w={global:[p],china:[u],brazil:[o],russia:[t],japan:[n],spain:[q]},x=g.isUsedLanguage("zh")?"china":g.isUsedLanguageAndCountry("pt-BR")?"brazil":g.isUsedLanguage("ru")||g.isUsedLanguage("uk")?"russia":g.isUsedLanguage("jp")?"japan":g.isUsedLanguageAndCountry("es-ES")?"spain":"global",y=f.isiOS||f.isAndroid?[j,m]:[j];d=c.exports=i.extend(h,{tagName:"ul",template:a("views/share/icons-list.tmpl"),css:a("views/share/icons-list.css"),className:"shareIcons sc-list-nostyle",getTemplateData:function(a){return e.extend(a,{icons:v.concat(w[x]).concat(y)})}})}),
define("views/ads/display-ad-container.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".displayAdContainer{background-color:rgba(0,0,0,.6);position:absolute;top:0;left:0;width:163px;height:163px;-webkit-transform:translate(0,100%);-ms-transform:translate(0,100%);transform:translate(0,100%)}.displayAdContainer.visible{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.displayAdContainer__wrapper{position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/display-ad-container.tmpl",["vendor/handlebars-runtime","views/ads/ad"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="displayAdContainer__wrapper"> ',g="views/ads/ad",h={},i=b.companion_display,h.companion_display=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("views/sound/stats.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".soundStats .soundStats__link{margin-right:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/stats.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n<li class="soundStats__item sc-ministats-item"> <a class="soundStats__link sc-ministats sc-ministats-small sc-ministats-sounds',e=a._options,e=e===null||e===undefined||e===!1?e:e.inverted,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='" href="',e=a.permalink_url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"permalink_url",{hash:{}})),d+=o(e)+'" title="',e="View track",f=c.$t,e=f.call(a,e,{hash:{}}),d+=o(e)+'"> <span class="soundStats__linkText">',e="View track",f=c.$t,e=f.call(a,e,{hash:{}}),d+=o(e)+"</span> </a>\n</li>\n",d}function q(a,b){return" sc-ministats-inverted"}function r(a,b){var d="",e,f,g,h;d+='\n<li class="soundStats__item sc-ministats-item"> <span class="sc-ministats sc-ministats-small sc-ministats-plays',e=a._options,e=e===null||e===undefined||e===!1?e:e.inverted,f=c["if"],j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='" title="',e=a.playback_count,f="%d plays",g="1 play",h=c.$tp,e=h.call(a,g,f,e,{hash:{}}),d+=o(e)+'"> ',e=a.playback_count,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"playback_count",{hash:{}})),d+=o(e)+" </span>\n</li>\n",d}function s(a,b){return" sc-ministats-inverted"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.show_sound_link,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.playback_count,h=c["if"],j=k.program(4,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/mixins/seekable",["require","exports","module","_","models/audible","lib/play-manager","config","lib/support","lib/mixin"],function(a,b,c){function s(a){this.model.seek(t.call(this,a)),this.onSeek()}function t(a){var b;return b=(a-x.call(this).left)/w.call(this),Math.floor(b*this.model.duration())}function u(a){var b=a.originalEvent.pageX,c=a.originalEvent.pageY,d=x.call(this);return b>=d.left&&b<=d.right&&c>=d.top&&c<=d.bottom}function v(a){var b=a?"on":"off";$(window)[b]("resize",this.onWindowResize),this.model[b]("play",this.onPlay,this)[b]("pause",this.onPause,this)}function w(){return this.width=this.width||this.$el.width(),this.width}function x(){var a=this.$el.offset();return a.right=a.left+this.$el.width(),a.bottom=a.top+this.$el.height(),a}function y(){return this.model.loadProgress()*w.call(this)}var d,e=a("_"),f=a("models/audible"),g=a("lib/play-manager"),h=a("config"),i=a("lib/support"),j=a("lib/mixin"),k=h.get("appView").$el,l=$(document),m=500,n=50,o={CLICK:"click:scrubber",MOUSE_MOVE:"mousemove:scrubber",MOUSE_ENTER:"mouseenter:scrubber",MOUSE_LEAVE:"mouseleave:scrubber"},p=i.touch?"touchend":"mouseup",q=i.touch?"touchstart":"mousedown",r=i.touch?"touchmove":"mousemove";d=c.exports=new j({applyTo:function(a){var b=a.constructor;e.extend(b,{Events:o}),a.events=a.events||{},a.events[q]="onPointerDown",a.events[r]="onPointerMove",a.states=e.extend({},a.states,{"selection-disabled":function(a){a?(document.onselectstart=function(){return!1},k.addClass("sc-selection-disabled")):(document.onselectstart=null,k.removeClass("sc-selection-disabled"))}})},before:{setup:function(){this.scrubbingEnabled=!0,this.scrub=e.throttle(this.scrub.bind(this),n),this.unscrub=this.unscrub.bind(this),this.onWindowResize=e.debounce(this.onWindowResize.bind(this),100),v.call(this,!0)},dispose:function(){v.call(this,!1)},renderDecorate:function(){this.width=this.coord=null}},defaults:{ModelClass:f,width:null,coord:null,onWindowResize:function(){this.rerender()},onPlay:function(){this.scrubbingEnabled=!1,e.delay(function(){this.scrubbingEnabled=!0}.bind(this),m)},onPause:function(){this.scrubbingEnabled=!1},onSeek:$.noop,onPointerDown:function(a){this.trigger(o.CLICK),this.scrubbingEnabled&&this.model.isPlaying()?(s.call(this,a.originalEvent.pageX),l.on(r,this.scrub).on(p,this.unscrub)):g.toggle(this.model,{userAction:!0})},onPointerMove:function(a){var b=this.model.isPlaying(),c=a.originalEvent.pageX-x.call(this).left;if(!this.scrubbingEnabled||!b||c>y.call(this)||c<=0)return;(!this.hasHoverIntent||this._isEntered)&&this.trigger(o.MOUSE_MOVE,c-1)},scrub:function(a){if(!u.call(this,a))return l.trigger(p);this.toggleState("selection-disabled",!0),s.call(this,a.originalEvent.pageX)},unscrub:function(){this.toggleState("selection-disabled",!1),l.off(r,this.scrub).off(p,this.unscrub),i.touch&&this.trigger(o.MOUSE_LEAVE)}}})}),
define("lib/views/image",["require","exports","module","lib/helpers/image-helper","lib/views/mixins/multi-resource-type","lib/view","lib/views/image.tmpl","lib/views/image.css"],function(a,b,c){function h(){var a=this.model,b=this.options,c={};return c.url=e.urlFrom(a.attributes,b.size),c.altText=b.alt||e.getAltText(a.attributes),c.placeholderUrl=e.getPlaceholderUrl(c.url,b.size),c.width=b.stretch||b.cover?"100%":parseInt(b.size,10)+(b.cover?"px":""),c.height=c.width,c}function i(a){var b=this.$$("placeholder");this.toggleState("fadeIn",!1),setTimeout(b.remove.bind(b),500),e.flagCachedImage(a)}var d,e=a("lib/helpers/image-helper"),f=a("lib/views/mixins/multi-resource-type"),g=a("lib/view");d=c.exports=g.extend(f,{template:a("lib/views/image.tmpl"),css:a("lib/views/image.css"),className:"image",defaults:{alt:"",size:50,stretch:!1,cover:!1},states:{fadeIn:"fadeIn"},requiredAttributes:null,setup:function(){!!this.model.imageAttribute,this.requiredAttributes=["kind",this.model.imageAttribute],this.$el.addClass(["image-"+(this.options.stretch||this.options.cover?"full":this.options.size),"image-"+this.model.resource_type].join(" "))},renderDecorate:function(){var a=h.call(this),b=a.placeholderUrl!==!1;this.toggleState("fadeIn",b),this.addDeferred(e.load(a.url).done(i.bind(this,a.url)))},getModelData:function(){return{}},getTemplateData:function(){var a=h.call(this);return a.backgroundImage=this.options.cover,a}})}),
define("views/buttons/follow-button",["require","exports","module","lib/action-controller","lib/views/mixins/button","lib/event-bus","models/user","models/followers","models/followings","tracking-events","lib/view","views/buttons/follow-button.tmpl"],function(a,b,c){function m(){return!!this.model.get(this.options.resource_id)}function n(){return!!this.myFollowers.get(this.options.resource_id)}var d,e=a("lib/action-controller"),f=a("lib/views/mixins/button"),g=a("lib/event-bus"),h=a("models/user"),i=a("models/followers"),j=a("models/followings"),k=a("tracking-events"),l=a("lib/view");d=c.exports=l.extend(f,{ModelClass:j,className:"sc-button-follow sc-button-cta",template:a("views/buttons/follow-button.tmpl"),setup:function(){this.observedAttributes=[this.options.resource_id],this.myFollowers=new i,this.setupModelListeners(this.myFollowers)},dispose:function(){this.teardownModelListeners(this.myFollowers),this.myFollowers.release(),delete this.myFollowers},renderDecorate:function(){var a=m.call(this);this.myFollowers.lastFetchTime||this.myFollowers.fetch(),this.toggleState("selected",a),this.$el.toggleClass("sc-button-cta",!a)},onClick:function(a){var b=new h({id:this.options.resource_id});g.trigger(k.UI.FOLLOW_BUTTON_CLICKED,b),e.follow(this.options.resource_id,!m.call(this)),a.preventDefault()},getTemplateData:function(){var a=m.call(this),b=n.call(this);return{selected:a,followBack:!a&&b}}})}),
define("views/ads/skip.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;return d+="\n",e="Skip",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+'<span class="skipAd__in"> in <span class="skipAd__remaining">',e=a.remaining,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"remaining",{hash:{}})),d+=l(e)+"</span>\n",d}function q(a,b){var d="",e,f;return d+="\n",e="Your track will start in",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+' <span class="skipAd__remaining">',e=a.remaining,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"remaining",{hash:{}})),d+=l(e)+"</span>\n",d}function r(a,b){var d="",e,f;return d+="\n",e="Track starts in",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+' <span class="skipAd__remaining">',e=a.remaining,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"remaining",{hash:{}})),d+=l(e)+"</span>\n",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression,m="function",n=c.helperMissing,o=void 0;f+='<svg width="8px" height="9px" viewBox="0 0 8 9" xmlns="http://www.w3.org/2000/svg"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-421.000000, -41.000000)" fill="',g=b._options,g=g===null||g===undefined||g===!1?g:g.iconColor,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"_options.iconColor",{hash:{}})),f+=l(g)+'"> <g transform="translate(316.000000, 34.000000)"> <path d="M111,7 L111,16 L113,16 L113,7 L111,7 Z M105,16 L105,7 L111,11.5 L105,16 Z" id="skip"></path> </g> </g> </g>\n</svg> ',g=b.skippable,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.nonSkippableLong,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.nonSkippableShort,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+=" ",f})}),
define("views/ads/skip.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".skipAd{font-size:12px}.skipAd>svg{margin-right:3px}.skipAd.disabled{opacity:1;cursor:default}.skipAd.disabled>svg{display:none}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/buttons/like-button",["require","exports","module","lib/action-controller","lib/views/mixins/button","lib/event-bus","lib/views/mixins/has-tooltip","models/sound-likes","models/playlist-likes","tracking-events","lib/view","config/resources"],function(a,b,c){var d,e=a("lib/action-controller"),f=a("lib/views/mixins/button"),g=a("lib/event-bus"),h=a("lib/views/mixins/has-tooltip"),i=a("models/sound-likes"),j=a("models/playlist-likes"),k=a("tracking-events"),l=a("lib/view"),m=a("config/resources");d=c.exports=l.extend(f,h,{className:"sc-button-like likeButton",template:function(){return this.t("Like")},defaults:{size:"small",icon_only:!0,resource_id:null},attributes:{title:"Like"},setup:function(){this.options.resource_type===m.PLAYLIST?this.model=new j:this.model=new i,this.observedAttributes=[this.options.resource_id]},renderDecorate:function(){var a=!!this.model.get(this.options.resource_id),b=this.t(a?"Liked":"Like");this.toggleState("selected",a),this.$el.attr("title",b).html(b)},onClick:function(a){var b=this.options;g.trigger(k.UI.LIKE_BUTTON_CLICKED,this.model),e.like(b.resource_id,b.resource_type,!this.model.get(b.resource_id)),a.preventDefault()}})}),
define("views/buttons/buy-button",["require","exports","module","models/audible","lib/views/mixins/button","lib/event-bus","lib/views/mixins/has-tooltip","vendor/js-online-stores/online-stores","tracking-events","lib/view"],function(a,b,c){var d,e=a("models/audible"),f=a("lib/views/mixins/button"),g=a("lib/event-bus"),h=a("lib/views/mixins/has-tooltip"),i=a("vendor/js-online-stores/online-stores"),j=a("tracking-events"),k=a("lib/view");d=c.exports=k.extend(f,h,{tagName:"a",className:"sc-button-buy",defaults:{size:"small",icon_only:!0},ModelClass:e,requiredAttributes:["purchase_url"],template:function(){return""},renderDecorate:function(){var a=this.options.resource_type==="sound",b=this.model,c=i.getPurchaseTitle(b.toJSON(),this.t(a?"Buy":"Buy all"));this.$el.attr({href:b.get("purchase_url"),title:c}).html(c)},onClick:function(){g.trigger(j.UI.BUY_LINK_CLICKED,this.model)}})}),
define("views/buttons/download-button",["require","exports","module","models/audible","lib/views/mixins/button","config","lib/event-bus","lib/views/mixins/has-tooltip","tracking-events","lib/url","lib/view"],function(a,b,c){var d,e=a("models/audible"),f=a("lib/views/mixins/button"),g=a("config"),h=a("lib/event-bus"),i=a("lib/views/mixins/has-tooltip"),j=a("tracking-events"),k=a("lib/url"),l=a("lib/view");d=c.exports=l.extend(f,i,{tagName:"a",className:"sc-button-download",ModelClass:e,requiredAttributes:["download_url"],defaults:{icon_only:!0},template:function(){return this.t("Download")},renderDecorate:function(){var a=k.modify(this.model.get("download_url"),{query:{client_id:g.get("client_id")}});this.$el.attr({href:a,title:this.t("Download")})},onClick:function(){h.trigger(j.UI.DOWNLOAD_LINK_CLICKED,this.model)}})}),
define("views/buttons/share-button",["require","exports","module","lib/views/mixins/button","lib/views/mixins/has-overlay","lib/views/mixins/has-tooltip","lib/event-bus","views/share/share-panel","tracking-events","lib/views/mixins/multi-resource-type","lib/view"],function(a,b,c){function m(){return this.getState("selected")?this.t("Hide share options"):this.t(this.isPlaylist?"Share playlist":"Share track")}var d,e=a("lib/views/mixins/button"),f=a("lib/views/mixins/has-overlay"),g=a("lib/views/mixins/has-tooltip"),h=a("lib/event-bus"),i=a("views/share/share-panel"),j=a("tracking-events"),k=a("lib/views/mixins/multi-resource-type"),l=a("lib/view");d=c.exports=l.extend(e,f,g,k,{className:"sc-button-share",defaults:{size:"small",icon_only:!0,overlay:!0,ContentViewClass:i,contentViewOptions:{show_embed_options:!1}},states:{"overlay-opened":function(a){this.toggleState("selected",a)}},template:function(){return""},renderDecorate:function(){var a=m.call(this);this.$el.attr("title",a).html(a)},onClick:function(){this.toggleState("selected"),h.trigger(j.UI.SHARE_BUTTON_CLICKED,this.model),this.options.overlay?this.toggleOverlay():this.rerender()}})}),
define("lib/views/canvas-view",["require","exports","module","lib/browser","lib/view","lib/window-events"],function(a,b,c){function i(){var a=this.$el.width(),b=this.$el.height();this.initCanvasDimensions(a,b),this.onCanvasResize()}var d,e=a("lib/browser"),f=a("lib/view"),g=a("lib/window-events"),h=window.devicePixelRatio?(Math.floor(window.devicePixelRatio)||1)/e.backingStoreRatio:1;d=c.exports=f.extend({tagName:"canvas",className:"g-box-full waveform__layer",attributes:{"aria-hidden":"true"},context:null,scale:null,template:function(){return""},onCanvasResize:$.noop,_setup:function(){this.context=this.el.getContext("2d"),this.scale=h,g.on("resize:x:debounced",i,this),f.prototype._setup.apply(this,arguments)},_dispose:function(){if(this.disposed)return;g.off("resize:x:debounced",i,this),f.prototype._dispose.apply(this,arguments)},renderDecorate:function(){this.whenInserted().done(this.initCanvasDimensions.bind(this))},initCanvasDimensions:function(a,b){var c=this.context,d=c.canvas,f=this.scale;d.width=(a||this.el.offsetWidth)*f,d.height=(b||this.el.offsetHeight)*f,e.isHiDPI&&f!==1&&c.scale(f,f)}})}),
define("collections/comment-heads",["require","exports","module","models/comment","lib/collection","models/sound","lib/url","lib/mixins/throws-not-found"],function(a,b,c){var d,e=a("models/comment"),f=a("lib/collection"),g=a("models/sound"),h=a("lib/url"),i=a("lib/mixins/throws-not-found");d=c.exports=f.extend(i.withOptions("__COMMENTS_ARE_DOWN__"),{model:e,soundDuration:null,defaults:{sound_id:null,secret_token:null,limit:100},baseUrl:function(){return h.stringify({path:["app","widget","tracks",this.options.sound_id,"comments"],query:{filter_replies:1,embed_avatars:0}})},setup:function(){var a=new g({id:this.options.sound_id});a.get("comment_count")===0&&(this.lastFetchTime=Date.now()),this.options.secret_token=a.get("secret_token"),this.soundDuration=a.duration(),a.release()},comparator:function(a,b){return new Date(a.attributes.timestamp)-new Date(b.attributes.timestamp)},getCommentAtTimestamp:function(a,b){return b=b||0,this.find(function(c){var d=c.get("timestamp");return b===0?d===a:Math.abs(a-d)<=b&&d!==e.EMPTY_TIMESTAMP})}},{hashFn:function(a,b){return b&&b.sound_id||null}})}),
define("lib/timed-comments-states",["require","exports","module"],function(a,b,c){c.exports={INITIAL:"timed-comment-sm:initial",CURRENT_COMMENT:"timed-comment-sm:current-comment",CURRENT_TIMESTAMP:"timed-comment-sm:current-timestamp",ACTIVE_TIMESTAMP:"timed-comment-sm:active-timestamp"}}),
define("lib/views/mixins/timed-comments",["require","exports","module","_","lib/mixin","models/sound","lib/timed-comments-state-machine","lib/timed-comments-states"],function(a,b,c){var d,e=a("_"),f=a("lib/mixin"),g=a("models/sound"),h=a("lib/timed-comments-state-machine"),i=a("lib/timed-comments-states"),j=$.noop;d=c.exports=new f({stateMachine:null,_stateHandlers:null,before:{setup:function(){this._stateHandlers={},this.sound=new g({id:this.options.sound_id,resource_id:this.options.resource_id})}},after:{setup:function(){var a=this.sound.get("secret_token");this.stateMachine=new h(this.options.sound_id,this.options.resource_id,a),this.onState(i.INITIAL,this.onInitialState).onState(i.CURRENT_COMMENT,this.onCurrentCommentChange).onState(i.ACTIVE_TIMESTAMP,this.onActiveTimestamp).onState(i.CURRENT_TIMESTAMP,this.onCurrentTimestamp)},dispose:function(){var a=this.stateMachine,b=this;this.sound.release(),this.sound=null,e.each(this._stateHandlers,function(c,d){c.forEach(function(c){a.off(d,c,b)})}),this._stateHandlers=null,a&&a.release()}},getCurrentComment:function(){return this.stateMachine.currentComment},getCurrentCommentTimestamp:function(){var a=this.getCurrentComment();return a&&a.get("timestamp")},cachedDimensions:function(){return this._cachedDimensions||(this._cachedDimensions=this.$el.offset(),this._cachedDimensions.width=this.$el.width(),this._cachedDimensions.height=this.$el.height()),this._cachedDimensions},resetCachedDimensions:function(){this._cachedDimensions=null},getTimestampByMouseEvent:function(a){return Math.floor((a.clientX-this.cachedDimensions().left)/this.cachedDimensions().width*this.sound.duration())},getCurrentState:function(){return this.stateMachine.currentState},goToState:function(){var a=this.stateMachine;a.goToState.apply(a,arguments)},setInteracting:function(a){this.stateMachine.interactingWithComments=a},isInteracting:function(){return this.stateMachine.interactingWithComments},onState:function(a,b){return this._stateHandlers[a]=this._stateHandlers[a]||[],this.stateMachine.on(a,b,this),this._stateHandlers[a].push(b),this},isActiveTimestampState:function(){return!!this.stateMachine.activeTimestamp&&this.getCurrentState()===i.ACTIVE_TIMESTAMP},defaults:{onInitialState:j,onActiveTimestamp:j,onCurrentTimestamp:j,onCurrentCommentChange:j}})}),
define("views/comments/comment-popover.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="commentPopover__scrub"></div>\n<div class="commentPopover__wrapper g-opacity-transition"> <div class="commentPopover__avatar" style="width: ',g=b._options,g=g===null||g===undefined||g===!1?g:g.avatarSize,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.avatarSize",{hash:{}})),f+=m(g)+"px; height: ",g=b._options,g=g===null||g===undefined||g===!1?g:g.avatarSize,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.avatarSize",{hash:{}})),f+=m(g)+'px;"></div> <a class="commentPopover__username sc-truncate" href=""></a> <p class="commentPopover__body sc-truncate sc-pointer"></p>\n</div>\n',f})}),
define("views/comments/comment-popover.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".commentPopover{position:absolute;width:100%;top:70%;height:20px;opacity:0;-webkit-transition:opacity 250ms;transition:opacity 250ms}.commentPopover.leaveCommentPlaceholder .commentPopover__avatar{pointer-events:none}.commentPopover.leaveCommentPlaceholder .commentPopover__username{display:none}.commentPopover.visible{opacity:1}.commentPopover__scrub{height:100%;cursor:pointer}.commentPopover__wrapper{width:50%;-webkit-transition:-webkit-transform 50ms;transition:transform 50ms}.commentPopover:hover .commentPopover__wrapper{-webkit-transition:-webkit-transform 0;transition:transform 0}.commentPopover__username,.commentPopover__body{-webkit-transition:padding-top 250ms;transition:padding-top 250ms;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block}.commentPopover__username{position:relative;float:left;max-width:30%;padding-left:10px}.commentPopover.commentLeft .commentPopover__username{float:none;padding-left:0;padding-right:10px}.commentPopover__username,a.commentPopover__username:hover,a.commentPopover__username:visited{color:#f50}.commentPopover__username:before{content:'';position:absolute;top:0;bottom:0;left:0;width:1px;display:block;background-image:-webkit-linear-gradient(rgba(255,85,0,.95),rgba(255,85,0,.1));background-image:linear-gradient(rgba(255,85,0,.95),rgba(255,85,0,.1))}.commentPopover.commentLeft .commentPopover__username:before{right:0;left:auto}.commentPopover__body{margin:0;padding-left:10px;color:#fff;max-width:70%}.commentPopover.leaveCommentPlaceholder.commentLeft .commentPopover__body{position:absolute;left:20px}.commentPopover.leaveCommentPlaceholder.commentLeft.smallAvatar .commentPopover__body{left:10px}.commentPopover.commentLeft .commentPopover__body{float:left;padding-left:0;padding-right:10px}.commentPopover__avatar{position:absolute;top:-20px;background-size:cover;display:none}.commentPopover.visible .commentPopover__avatar{display:block;cursor:pointer}.commentPopover.smallAvatar{height:10px}.commentPopover.smallAvatar .commentPopover__avatar{top:-10px}.commentPopover.darkText .commentPopover__body{color:#333}.commentPopover.small .commentPopover__username,.commentPopover.small .commentPopover__body{padding-top:1px}.commentPopover.small.visible .commentPopover__username,.commentPopover.small.visible .commentPopover__body{padding-top:2px}.commentPopover.medium .commentPopover__username,.commentPopover.medium .commentPopover__body{padding-top:10px}.commentPopover.medium.visible .commentPopover__username,.commentPopover.medium.visible .commentPopover__body{padding-top:13px}.commentPopover.large .commentPopover__username,.commentPopover.large .commentPopover__body{padding-top:20px}.commentPopover.large.visible .commentPopover__username,.commentPopover.large.visible .commentPopover__body{padding-top:23px}.visualSound.streamContext.playing .commentPopover__body{color:#e5e5e5}.visualSound.streamContext.playing .commentPopover__username,.visualSound.streamContext.playing .commentPopover__body{padding-top:6px}.visualSound.streamContext.playing .commentPopover.visible .commentPopover__username,.visualSound.streamContext.playing .commentPopover.visible .commentPopover__body{padding-top:9px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/waveform/nodes/has-gradient-fill",["require","exports","module","lib/mixin","views/waveform/waveform-style"],function(a,b,c){var d,e=a("lib/mixin"),f=a("views/waveform/waveform-style");d=c.exports=new e({_fills:null,requires:["gradientName"],before:{onResize:function(){this._fills=null}},getFillStyle:function(a,b){return a==null&&(a=1),b=b||this.gradientName,this._fills=this._fills||{},this._fills[a+"_"+b]||(this._fills[a+"_"+b]=f.gradient(this.context,b,this.options.waveformStyle,this.options.scale,a))}})}),
define("views/waveform/nodes/has-waveform-data",["require","exports","module","_","lib/mixin","views/waveform/waveform-style"],function(a,b,c){var d,e=a("_"),f=a("lib/mixin"),g=a("views/waveform/waveform-style"),h={upperPartHeight:.7,waveformWidth:1800,waveformHeight:140,waveformData:null};d=c.exports=new f({_memo:null,applyTo:function(a){a.defaults=e.defaults(a.defaults||{},h)},before:{onResize:function(){this._memo=null}},defaults:{getAudible:function(){return this.model}},getWaveformHeightAt:function(a){var b=this.options,c=b.waveformData.length===1,d=this.canvas.width/b.scale,e=g.getConfig("gapWidth")+g.getConfig("barWidth"),f=Math.floor(a/e),h=a/d,i,j,k,l,m;return this._memo||(this._memo=new Array(Math.ceil(d/e))),this._memo[f]==null&&(c?l=0:(i=this.getAudible(),j=h*i.duration(),l=i.getSoundIndexAt(j),k=i.getSounds()[l],h=(j-k.timeOffset)/k.duration()),m=Math.floor(h*b.waveformWidth),this._memo[f]=b.waveformData[l][m]),this._memo[f]}})}),
define("lib/scene/scene-node",["require","exports","module","_","lib/css","lib/mixin"],function(a,b,c){var d,e=a("_"),f=a("lib/css"),g=a("lib/mixin");d=c.exports=new g({canvas:null,context:null,isDirty:!1,isAnimating:!1,requires:["draw"],applyTo:function(a){a.defaults=e.extend({scale:1,$eventEl:null},a.defaults)},after:{draw:function(){this.setDirty(this.isAnimating)},onResize:function(){this.setDirty(!0)}},before:{setup:function(a){a.$eventEl||(a.$eventEl=this.$el),this.canvas=this.el,this.context=this.el.getContext("2d")}},override:{render:function(){this.css&&f.insert(this.css),this.hasData()?this.setDirty(!0):(this.setDirty(!1),this.fetchData())},destroyElement:$.noop},defaults:{onResize:$.noop},setDirty:function(a){(this.isDirty=a)&&this.trigger("dirty")}})}),
define("views/waveform/waveform-events",["require","exports","module"],function(a,b,c){c.exports={SOUND_FOCUS:"waveform:soundFocus",SOUND_UNFOCUS:"waveform:soundUnFocus"}}),
define("views/waveform/waveform-style",["require","exports","module","_","config/waveform-styles"],function(a,b,c){function g(a,b){var c=b[0],d=b[1],e=b.length===3?b[2]:1,f="rgba("+d+","+e+")";return a.addColorStop(c,f),a}function h(a){var b=e.result(f,a);return b}var d,e=a("_"),f=a("config/waveform-styles");d=c.exports={getConfig:function(a){return f._config[a]},gradient:function(a,b,c,d,e){d=d||1,e==null&&(e=1);var f=h(c),i=a.canvas.height/d,j=f[b];return e!==1&&(j=j.map(function(a){var b=a.length===3?a[2]:1;return[a[0],a[1],b*e]})),j.reduce(g,a.createLinearGradient(0,0,0,i))},getColor:function(a,b){return h(b)[a]}}}),
define("lib/helpers/mouse-helper",["require","exports","module"],function(a,b,c){var d,e;d=c.exports={normalizeEvent:function(a){if(a.offsetX===e||a.offsetY===e){var b=$(a.target).offset(),c=a.originalEvent;a.offsetX=c.pageX-b.left,a.offsetY=c.pageY-b.top}return a}}}),
define("views/waveform/nodes/comments.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".waveformCommentsNode{opacity:0;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.waveformCommentsNode.loaded{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/waveform/nodes/follows-progress",["require","exports","module","lib/mixin"],function(a,b,c){function f(){!this.isDirty&&this.shouldBeDirty()&&this.setDirty(!0)}function g(){this.setDirty(!0)}function h(a){var b=a?"on":"off";this.model[b]("time",f,this)[b]("seeked",g,this)}var d,e=a("lib/mixin");d=c.exports=new e({lastPosition:0,after:{setup:function(){h.call(this,!0)},dispose:function(){h.call(this,!1)}},getPosition:function(){return Math.max(this.model.isPlaying()?1:0,Math.ceil(this.model.progress()*this.canvas.width/this.options.scale))},hasPositionChanged:function(){return this.lastPosition!==this.getPosition()},defaults:{shouldBeDirty:function(){return this.hasPositionChanged()}}})}),
define("lib/views/progress-bar",["require","exports","module","_","models/audible","lib/view","lib/window-events"],function(a,b,c){var d,e=a("_"),f=a("models/audible"),g=a("lib/view"),h=a("lib/window-events"),i=40;d=c.exports=g.extend({ModelClass:f,_lastContainerSize:-1,_throttleTime:0,_throttleTimeout:0,setup:function(){this.loadedProgress=this._getLoadedProgress(),this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded=!1,e.bindAll(this,"onAudioFinish","updateProgressBar","rethrottle","onInitialPlay","onAudioPlay","onAudioPause","timedUpdate"),h.on("resize:debounced",this.rethrottle,this),this.model.on("finish",this.onAudioFinish).on("time",this.onInitialPlay).on("seeked",this.updateProgressBar)},dispose:function(){this.model.off("finish",this.onAudioFinish).off("time",this.onInitialPlay).off("seeked",this.updateProgressBar),h.off("resize:debounced",this.rethrottle,this)},renderDecorate:function(){this.updateProgressBar(),this.model.on("play",this.onAudioPlay).on("pause",this.onAudioPause),this.model.isPlaying()&&(this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate())},teardown:function(){this.stopTimedUpdates(),this.model.off("play",this.onAudioPlay).off("pause",this.onAudioPause)},onInitialPlay:function(){this.model.off("time",this.onInitialPlay),this.updateProgressBar()},onAudioPause:function(){this.stopTimedUpdates()},onAudioPlay:function(){this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate()},rethrottle:function(){if(this.disposed)return;var a=this.el.clientWidth,b,c;a!==this._lastContainerSize&&(this._lastContainerSize=a,b=this.model.duration(),a===0?(this._throttleTime=0,c=this.whenInserted(),c.state()==="pending"&&c.done(this.rethrottle)):this._throttleTime=Math.max(i,Math.floor(b/a)))},updateLoaded:$.noop,updatePlayed:$.noop,onAudioFinish:function(){this.updateProgressBar()},updateProgressBar:function(){this.disposed||(this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded||(this.loadedProgress=this._getLoadedProgress(),this.isFullyLoaded=this.loadedProgress===1,this.updateLoaded()),this.updatePlayed())},_getLoadedProgress:function(){return this.model.loadProgress()},_getPlayedProgress:function(){return this.model.progress()},timedUpdate:function(){var a=this._throttleTime,b;this.updateProgressBar(),b=Math.max(i,a&&a-this.model.currentTime()%a),this._throttleTimeout=setTimeout(this.timedUpdate,b)},stopTimedUpdates:function(){clearTimeout(this._throttleTimeout),this._throttleTimeout=null}})}),
define("views/sound/thin-progress-bar.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="thinProgressbar__layer sc-background-dark"></div>\n<div class="thinProgressbar__layer thinProgressbar__played"></div>\n'})}),
define("views/sound/thin-progress-bar.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e='.thinProgressbar{height:3px;width:100%;position:relative}.thinProgressbar:after{content:"";display:block;position:absolute;height:11px;width:100%;top:-4px;left:0}.thinProgressbar__layer{position:absolute;height:100%;width:100%}.thinProgressbar__played{width:0;background-color: $mainColor}';d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/helpers/L10n-helper",["require","exports","module"],function(a,b,c){var d,e=(navigator.userLanguage||navigator.language||"").toLowerCase(),f=e.split("-")[0];d=c.exports={isUsedLanguage:function(a){return f===a.toLowerCase()},isUsedLanguageAndCountry:function(a){return e===a.toLowerCase()}}}),
define("views/share/icons/email",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[550,300],serviceKey:"email",serviceName:"Email",opensPopup:!1,hrefTemplate:"mailto:?subject={share_title}%20-%20SoundCloud&body={share_url}"},getHrefData:function(){var a=this.model;return{share_url:a.get("permalink_url"),share_title:encodeURIComponent(a.get("title"))}}})}),
define("views/share/icons/fb",["require","exports","module","_","config","views/share/share-icon"],function(a,b,c){var d,e=a("_"),f=a("config"),g=a("views/share/share-icon");d=c.exports=g.extend({defaults:{popupSize:[550,300],serviceKey:"facebook",serviceName:"Facebook",hrefTemplate:"//www.facebook.com/v2.2/dialog/share?app_id={fb_app_id}&amp;display=popup&amp;redirect_uri={fb_popup_page_url}&amp;href={share_url}"},getHrefData:function(a){return e.extend(a,{fb_app_id:f.get("fb_app_id"),fb_popup_page_url:encodeURI(location.protocol+"//soundcloud.com/fb_popup_callback.html")})}})}),
define("views/share/icons/google",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[600,600],serviceKey:"googleplus",serviceName:"Google+",hrefTemplate:"//plus.google.com/share?url={share_url}"}})}),
define("views/share/icons/line",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[550,300],serviceKey:"line",serviceName:"Line",hrefTemplate:"http://line.me/R/msg/text/?{share_url}"},getHrefData:function(){var a=this.model;return{share_url:a.get("permalink_url")}}})}),
define("views/share/icons/mixi",["require","exports","module","config","views/share/share-icon"],function(a,b,c){var d,e=a("config"),f=a("views/share/share-icon");d=c.exports=f.extend({defaults:{popupSize:[650,450],serviceKey:"mixi",serviceName:"mixi",hrefTemplate:"http://mixi.jp/share.pl?u={share_url}&amp;k={mixi_api_key}"},getHrefData:function(a){return a.mixi_api_key=e.get("mixi_api_key"),a}})}),
define("views/share/icons/orkut",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[645,450],serviceKey:"orkut",serviceName:"Orkut",hrefTemplate:"http://promote.orkut.com/preview?nt=orkut.com&amp;tt={share_title}&amp;du={share_url}"},getHrefData:function(a){return a.share_title=encodeURIComponent(this.model.get("title")),a}})}),
define("views/share/icons/pinterest",["require","exports","module","lib/helpers/image-helper","views/share/share-icon","lib/url"],function(a,b,c){var d,e=a("lib/helpers/image-helper"),f=a("views/share/share-icon"),g=a("lib/url");d=c.exports=f.extend({defaults:{popupSize:[665,300],serviceKey:"pinterest",serviceName:"Pinterest"},getHref:function(){var a=this.model.toJSON(),b=this.getShareURL(),c=e.urlFrom(a,200),d=this.t("[[title]] on SoundCloud",{title:this.getShareTitle()});return g.stringify({query:{url:b,media:c,description:d,is_video:"true",utm_source:"soundcloud",utm_campaign:"share",utm_medium:"pinterest",utm_content:b}},"http://pinterest.com/pin/create/button/")},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.title=this.t("Pin it"),a}})}),
define("views/share/icons/tuenti",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[1e3,600],serviceKey:"tuenti",serviceName:"Tuenti",hrefTemplate:"http://www.tuenti.com/share?url={share_url}&amp;suggested-text={share_title}"},getHrefData:function(a){return a.share_title=encodeURIComponent(this.model.get("title")),a}})}),
define("views/share/icons/tumblr",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[450,450],serviceKey:"tumblr",serviceName:"Tumblr",hrefTemplate:"http://www.tumblr.com/share/audio?externally_hosted_url={share_url}&tags={tags}"}})}),
define("views/share/icons/twitter",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[700,251],serviceKey:"twitter",serviceName:"Twitter",hrefTemplate:"http://twitter.com/share?text={share_title}%20via%20%23soundcloud&amp;url={share_url}"}})}),
define("views/share/icons/vkontakte",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[645,450],serviceKey:"vkontakte",serviceName:"VK",hrefTemplate:"http://vkontakte.ru/share.php?url={share_url}"}})}),
define("views/share/icons/weibo",["require","exports","module","views/share/share-icon"],function(a,b,c){var d,e=a("views/share/share-icon");d=c.exports=e.extend({defaults:{popupSize:[450,450],serviceKey:"weibo",serviceName:"Weibo",hrefTemplate:"http://service.weibo.com/share/share.php?url={share_url}"}})}),
define("views/share/icons-list.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function m(a,b,d){var e="",f,g,h;return e+=' <li class="shareIcons__icon"> ',f=a,g={},h=d._options,h=h===null||h===undefined||h===!1?h:h.resource_id,g.resource_id=h,h=d._options,h=h===null||h===undefined||h===!1?h:h.resource_type,g.resource_type=h,h=c.$view,j={},j.hash=g,f=h.call(a,f,j),e+=l(f)+" </li>\n",e}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression;g=b.icons,h=c.each,j=k.programWithDepth(m,e,b),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/share/icons-list.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".shareIcons__icon{float:left;margin:0 4px 0 0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/ad",["require","exports","module","lib/ad-manager","lib/helpers/image-helper","lib/model","lib/view","views/ads/ad.css","views/ads/ad.tmpl"],function(a,b,c){function i(){this._impressionRecorded&&e.metrics("companion_display:clickthrough")}function j(a){this.$el.toggleClass("imageLoaded",a),a&&!this._impressionRecorded&&(this._impressionRecorded=!0,e.metrics("companion_display:impression"))}var d,e=a("lib/ad-manager"),f=a("lib/helpers/image-helper"),g=a("lib/model"),h=a("lib/view");d=c.exports=h.extend({_impressionRecorded:!1,css:a("views/ads/ad.css"),template:a("views/ads/ad.tmpl"),events:{"click .displayAd__image":i},states:{imageLoaded:j},className:"displayAd",setup:function(){this.model=new g(this.options.companion_display)},renderDecorate:function(){this.addDeferred(f.load(this.model.get("ad_visual"))).then(this.toggleState.bind(this,"imageLoaded",!0))}})}),
define("lib/views/image.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=" ",e=a.placeholderUrl,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=' <div class="image__full g-opacity-transition" style="background-image: url(\'',e=a.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"url",{hash:{}})),d+=o(e)+"'); width: ",e=a.width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"width",{hash:{}})),d+=o(e)+"; height: ",e=a.height,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"height",{hash:{}})),d+=o(e)+';"> </div>\n',d}function q(a,b){var c="",d;return c+=' <div class="image__placeholder" style="background-image: url(\'',d=a.placeholderUrl,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"placeholderUrl",{hash:{}})),c+=o(d)+"'); width: ",d=a.width,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"width",{hash:{}})),c+=o(d)+"; height: ",d=a.height,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"height",{hash:{}})),c+=o(d)+';"> </div> ',c}function r(a,b){var d="",e,f;d+=" ",e=a.placeholderUrl,f=c["if"],j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=' <img src="',e=a.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"url",{hash:{}})),d+=o(e)+'" width="',e=a.width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"width",{hash:{}})),d+=o(e)+'" height="',e=a.height,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"height",{hash:{}})),d+=o(e)+'" alt="',e=a.altText,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"altText",{hash:{}})),d+=o(e)+'" class="image__full g-transition-opacity">\n',d}function s(a,b){var c="",d;return c+=' <img src="',d=a.placeholderUrl,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"placeholderUrl",{hash:{}})),c+=o(d)+'" width="',d=a.width,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"width",{hash:{}})),c+=o(d)+'" height="',d=a.height,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"height",{hash:{}})),c+=o(d)+'" alt="',d=a.altText,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"altText",{hash:{}})),c+=o(d)+'" class="image__placeholder"> ',c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.backgroundImage,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(4,r,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/image.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".image{position:relative;width:100%;height:100%;background-color:#f2f2f2;background-image:url(/player/assets/images/default/cloudx200-d1068b51.png);background-position:center center;background-repeat:no-repeat}.image-sound.image-full{background-image:url(/player/assets/images/default/cloud-0f541944.png);background-size:100px 60px}.image__placeholder{position:absolute}.image__full{position:relative;opacity:1}.image__placeholder,.image__full{background-size:cover;background-position:50% 50%}.image.fadeIn>.image__full{opacity:0}.image-20{background-size:20px 20px}.image-20,.image-40{background-image:url(/player/assets/images/default/cloudx40-d1068b51.png)}.image-50{background-image:url(/player/assets/images/default/cloudx50-d1068b51.png)}.image-80{background-image:url(/player/assets/images/default/cloudx80-d1068b51.png)}.image-120{background-image:url(/player/assets/images/default/cloudx120-d1068b51.png)}.image-full{background-image:url(/player/assets/images/default/cloudx500-d1068b51.png)}.image-user.image-20,.image-user.image-40{background-image:url(/player/assets/images/default/userx40-377f1b9e.png)}.image-user.image-50{background-image:url(/player/assets/images/default/userx50-377f1b9e.png)}.image-user.image-80{background-image:url(/player/assets/images/default/userx80-377f1b9e.png)}.image-user.image-120{background-image:url(/player/assets/images/default/userx120-377f1b9e.png)}.image-user,.image-user.image-200{background-image:url(/player/assets/images/default/userx200-377f1b9e.png)}.image-group.image-20,.image-group.image-40{background-image:url(/player/assets/images/default/groupx40-377f1b9e.png)}.image-group.image-50{background-image:url(/player/assets/images/default/groupx50-377f1b9e.png)}.image-group.image-80{background-image:url(/player/assets/images/default/groupx80-377f1b9e.png)}.image-group.image-120{background-image:url(/player/assets/images/default/groupx120-377f1b9e.png)}.image-group,.image-group.image-200{background-image:url(/player/assets/images/default/groupx200-377f1b9e.png)}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/action-controller",["require","exports","module","_","lib/backbone","lib/connect","models/followers","models/followings","models/groups","models/playlist-likes","models/sound-likes"],function(a,b,c){function n(a){var b=!1,c=a.list,f=a.state,h=a.target,i=a.origin,j=a.requestType,k=i===g.currentUserId(),l,m,o;return m=$.Deferred(),k&&!g.isLoggedIn()?g.login().done(function(){a.origin=g.currentUserId(),n(a).done(m.resolve).fail(m.reject)}).fail(m.reject):(c&&k?(l=function(){c.get(h)!==f?(c.toggle(h,f),f=c.get(h),a.persist&&(o=c.setRemote(h,f,j),o&&o.fail(function(b,c){c!=="abort"&&d.trigger("error",e.extend({xhr:b},a)),n(e.defaults({persist:!1,state:!f},a))}))):b=!0},c.fetch().done(l).done(m.resolve).fail(m.reject)):m.resolve(),m.done(function(){if(!b){var c=a.action;d.trigger([c,c+":origin:"+a.originType+":"+i,c+":target:"+a.targetType+":"+h].join(" "),{state:f,origin:i,originType:a.originType,target:h,targetType:a.targetType,context:a.context})}})),m}var d,e=a("_"),f=a("lib/backbone"),g=a("lib/connect"),h=a("models/followers"),i=a("models/followings"),j=a("models/groups"),k=a("models/playlist-likes"),l=a("models/sound-likes"),m={followings:new i,followers:new h,playlistLikes:new k,soundLikes:new l,groups:new j};d=c.exports=e.extend({},f.Events,{follow:function(a,b,c){var d=g.currentUserId(),f,h;c=e.defaults(c||{},{action:"follow",origin:d,originType:"user",target:a,targetType:"user",state:b,persist:!0}),h=c.origin;if(h===c.target)return;c.target===d?(f=m.followers,f.fetch().done(function(){f.get(h)!==c.state&&(f.toggle(h,c.state),c.state=f.get(h),n(c))})):(c.list=h===d?m.followings:null,n(c))},like:function(a,b,c,d){d=e.defaults(d||{},{action:"like",origin:g.currentUserId(),originType:"user",target:a,targetType:b,state:c,persist:!0,list:b==="playlist"?m.playlistLikes:m.soundLikes}),n(d)},join:function(a,b,c){return c=e.defaults(c||{},{action:"join",origin:g.currentUserId(),originType:"user",target:a,targetType:"group",state:b,persist:!0,list:m.groups}),n(c)}})}),
define("lib/views/mixins/button",["require","exports","module","_","lib/mixin"],function(a,b,c){var d,e=a("_"),f=a("lib/mixin");d=c.exports=new f({applyTo:function(a){a.defaults=e.extend({size:"small",icon_only:!1,visual:!1},a.defaults),a.states=e.extend({active:"sc-button-active",selected:"sc-button-selected"},a.states),a.className=["sc-button",a.className].join(" ").trim(),a.events=e.extend({},a.events,{"click.button":"onClick"})},defaults:{tagName:"button",onClick:$.noop,template:function(){return""},loadingTemplate:null},before:{setup:function(a){this.$el.attr("tabIndex",0).addClass("sc-button-"+a.size).toggleClass("sc-button-icon",a.icon_only).toggleClass("sc-button-visual",a.visual)}}})}),
define("models/followers",["require","exports","module","models/id-list"],function(a,b,c){var d,e=a("models/id-list");d=c.exports=e.extend({baseUrl:function(){return"me/followers/"},setRemote:$.noop})}),
define("models/followings",["require","exports","module","models/id-list"],function(a,b,c){var d,e=a("models/id-list");d=c.exports=e.extend({baseUrl:function(){return"me/followings/"}})}),
define("views/buttons/follow-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function m(a,b){var d="",e,f;return d+=" ",e="Follow back",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+"\n",d}function n(a,b){var d="",e,f;d+=" ",e=a.selected,f=c["if"],j=k.program(4,o,b),j.hash={},j.fn=j,j.inverse=k.program(6,p,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function o(a,b){var d="",e,f;return d+=" ",e="Following",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+" ",d}function p(a,b){var d="",e,f;return d+=" ",e="Follow",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+" ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression;g=b.followBack,h=c["if"],j=k.program(1,m,e),j.hash={},j.fn=j,j.inverse=k.program(3,n,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/mixins/has-tooltip",["require","exports","module","_","lib/views/tooltip","lib/mixin"],function(a,b,c){function h(a){var b=i.call(this),c=this.el.getAttribute("aria-haspopup"),d=this.el.getAttribute("aria-owns");a.type==="mouseenter"&&(!c||d&&!document.getElementById(d))?(this.toggleState("mouseover",!0),b.open()):a.type==="mouseleave"&&(this.toggleState("mouseover",!1),b.close())}function i(){var a=this.subviews.tooltip;return a&&a.disposed&&(this.removeSubview(a),a=null),a||(a=j.call(this),this.addSubview(a,"tooltip")),this.subviews.tooltip}function j(){var a=new f({togglerEl:this.el,relativeElement:this.el,domId:this.domId,priorityLevel:f.PriorityLevels.LOW});return a}var d,e=a("_"),f=a("lib/views/tooltip"),g=a("lib/mixin");d=c.exports=new g({applyTo:function(a){a.events=e.extend({mouseenter:h,mouseleave:h},a.events)},before:{setup:function(){this.domId=e.uniqueId("tooltip-"),this.$el.attr({"aria-describedby":this.domId})}},after:{renderDecorate:function(){if(this.getState("mouseover")){var a=i.call(this);a.open()}}}})}),
define("models/sound-likes",["require","exports","module","lib/api-wrapper","config","models/sound","models/id-list"],function(a,b,c){var d,e=a("lib/api-wrapper"),f=a("config"),g=a("models/sound"),h=a("models/id-list");d=c.exports=h.extend({baseUrl:function(){return e.EDGE+"me/track_likes/"},onToggle:function(a,b){var c=g.instances.get(a),d=f.get("me");c&&c.likesChanged(b),d&&d.likesChanged(b)}})}),
define("models/playlist-likes",["require","exports","module","lib/api-wrapper","models/id-list"],function(a,b,c){var d,e=a("lib/api-wrapper"),f=a("models/id-list");d=c.exports=f.extend({baseUrl:function(){return e.EDGE+"me/playlist_likes/"}})}),
define("vendor/js-online-stores/online-stores",["require","exports","module"],function(a,b,c){(function(){var a={getPurchaseTitle:function(a,b){var c=a.purchase_url,d=this._shops,e;if(c&&!a.purchase_title)if(d.Flattr.test(c))a.purchase_title="Flattr";else if(d["Getty Images"].test(c))a.purchase_title="License";else{a.purchase_title=b||"Buy";for(e in d)if(d.hasOwnProperty(e)&&d[e].test(c)){a.purchase_title+=" on "+e;break}}return a.purchase_title},getStoreName:function(a){var b=a.purchase_url,c=this._shops,d;if(b)for(var e in c)if(c[e].test(b)){d=e;break}return d},_shops:{Amazon:/ama?zo?n\.(co\.(jp|uk)|com|de|to)/,Beatport:/beatport\.(com|it)/,iTunes:/apple\.com/,Juno:/juno(\.co\.uk|download\.com)/,"Digital Tunes":/digital-tunes\.net/,'zero"':/zero-inch\.com/,trackitdown:/trackitdown\.net/,whatpeopleplay:/whatpeopleplay\.com/,DJdownload:/djdownload\.com/,Minno:/soundra\.in/,Flattr:/flattr\.com/,Ganxy:/ganxy\.com/,"Getty Images":/soundcloud\.(.*-)?gettyimages\.com/}};typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.OnlineStores=a)})()}),
define("lib/views/mixins/has-overlay",["require","exports","module","_","lib/views/dialog","lib/mixin"],function(a,b,c){function h(){var a,b,c,d=this.options;return b=i.call(this,d.ContentViewClass),c=e.extend({resource_id:d.resource_id,resource_type:d.resource_type},d.contentViewOptions),a=new f({togglerEl:this.el,relativeElement:this.el,Subview:b,subviewArgs:c,domId:this.domId,priorityLevel:f.PriorityLevels.HIGH}),a}function i(a){return a?e.isFunction(a.extend)?a:a.call(this):undefined}function j(){var a=this.subviews.overlay;a&&this.toggleState("overlay-opened",a.isOpened)}var d,e=a("_"),f=a("lib/views/dialog"),g=a("lib/mixin");d=c.exports=new g({applyTo:function(a){a.defaults=e.extend({el:null,ContentViewClass:null,contentViewOptions:null},a.defaults)},defaults:{contentView:null,domId:null,toggleOverlay:function(){var a=this.getOverlay();a.isOpened?a.close():a.open()},getOverlay:function(){var a=this.subviews.overlay;return a&&a.disposed&&(this.removeSubview(a),a=null),a||(a=h.call(this),a.on([f.Events.CLOSED,f.Events.OPENED].join(" "),j,this),this.addSubview(a,"overlay")),this.subviews.overlay}},before:{setup:function(){e.bindAll(this,"toggleOverlay"),this.domId=e.uniqueId("overlay-"),this.$el.attr({"aria-haspopup":"true","aria-owns":this.domId})}}})}),
define("models/comment",["require","exports","module","lib/model","models/user","models/sound"],function(a,b,c){var d,e=a("lib/model"),f=a("models/user"),g=a("models/sound"),h=Infinity;d=c.exports=e.extend({resource_type:"comment",urnPrefix:"soundcloud:comments",parse:function(a){return a.timestamp===null&&(a.timestamp=h),a.user.avatar_url=a.user.avatar_url.replace("http:","https:"),a},submodelMap:{track:g,user:f},baseUrl:function(){return["comments",this.id].join("/")},saveUrl:function(){return["tracks",this.get("track_id"),"comments"].join("/")},destroyUrl:function(){return["tracks",this.get("track_id"),"comments",this.id].join("/")},getAttributesToBeSaved:function(){return{"comment[body]":this.get("body"),"comment[timestamp]":this.get("timestamp")}}},{EMPTY_TIMESTAMP:h})}),
define("lib/timed-comments-state-machine",["require","exports","module","_","lib/backbone","collections/comment-heads","lib/single","models/sound","lib/timed-comments-states"],function(a,b,c){function n(a){var b=a?"on":"off";this[b](j.INITIAL,this.onInitialState,this)[b](j.CURRENT_COMMENT,this.onCurrentComment,this)[b](j.CURRENT_TIMESTAMP,this.onCurrentTimestamp,this)[b](j.ACTIVE_TIMESTAMP,this.onActiveTimestamp,this),this.sound[b]("time",this.onAudioTime,this)}var d,e=a("_"),f=a("lib/backbone"),g=a("collections/comment-heads"),h=a("lib/single"),i=a("models/sound"),j=a("lib/timed-comments-states"),k=300,l=3e3,m=1e3;d=function(){this.setup.apply(this,arguments)},d.extend=f.Model.extend,e.extend(d.prototype,f.Events,{constructor:d,currentComment:null,activeTimestamp:null,currentTimestamp:null,commentQuotaTimeout:null,commentQuotaExceeded:!0,commentIntervalTimeout:null,commentIntervalExceeded:!0,currentState:j.INITIAL,interactingWithComments:!1,setup:function(a,b,c){this.collection=new g(null,{sound_id:a,secret_token:c}),this.sound=new i({id:a,resource_id:b}),n.call(this,!0)},dispose:function(){n.call(this,!1),this.sound.release(),this.collection.release()},onInitialState:function(){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=null},onCurrentComment:function(a,b){this.activeTimestamp=null,this.currentComment=b,this.currentTimestamp=null},onCurrentTimestamp:function(a){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=a},onActiveTimestamp:function(a){this.activeTimestamp=a,this.currentComment=null,this.currentTimestamp=null},goToState:function(a){var b=this.canGoToState.apply(this,arguments);return b&&(this.currentState=a,this.trigger.apply(this,arguments)),b},canGoToState:function(a){var b=this.activeTimestamp&&this.currentState===j.ACTIVE_TIMESTAMP;switch(a){case j.CURRENT_TIMESTAMP:return!b;case j.CURRENT_COMMENT:return this.commentIntervalExceeded&&arguments[1]!==this.currentComment&&!b;case j.INITIAL:return!0;case j.ACTIVE_TIMESTAMP:return arguments[1]!==this.activeTimestamp;default:return!1}},onAudioTime:e.throttle(function(a){if(this.disposed)return;var b,c=a.sound.currentTime();!this.interactingWithComments&&this.sound.isPlaying()&&(b=this.collection.getCommentAtTimestamp(c,k),b?this.goToState(j.CURRENT_COMMENT,c,b)&&(clearTimeout(this.commentIntervalTimeout),this.commentIntervalExceeded=!1,setTimeout(function(){this.commentIntervalExceeded=!0}.bind(this),m),clearTimeout(this.commentQuotaTimeout),this.commentQuotaExceeded=!1,this.commentQuotaTimeout=setTimeout(function(){this.commentQuotaExceeded=!0,this.onAudioTime(a)}.bind(this),l)):this.commentQuotaExceeded&&this.goToState(j.CURRENT_TIMESTAMP,c))},k)}),c.exports=h.applyTo(d,{onCleanup:function(a){a.dispose()},cleanupInstantly:!0,hashFn:function(a){return a}})}),
define("config/waveform-styles",["require","exports","module","vendor/color/color","config"],function(a,b,c){function p(a,b){return b===1?"rgb("+a+")":"rgba("+a+","+b+")"}var d=a("vendor/color/color"),e=a("config"),f="0,0,0",g="51,51,51",h="102,102,102",i="153,153,153",j="255,0,0",k="255,51,0",l="255,85,0",m="255,101,0",n="255,255,255",o="82,82,82";c.exports={_config:{barWidth:2,gapWidth:1,fadeInSteps:10,fixedTimeIndicator:!0,commentLines:!1,fullHighlight:!0},"default":{progressGradient:[[0,l],[.7,k],[.701,l],[1,l]],loaderGradient:[[0,f,.5],[1,f,.5]],backgroundGradient:[[0,g],[.7,g],[.701,g,.5],[1,g,.5]],gapGradient:[[0,h,0],[.28,o,.6],[.7,g],[.701,g,.25],[1,g,.25]],scrubberGradientBackward:[[0,g,.5],[.7,g,.5],[.701,g,0],[1,g,0]],scrubberGradientForward:[[0,l,.5],[.7,k,.5],[.701,l,0],[1,l,0]],highlightGradientPlayed:[[0,l],[.7,k],[.701,l],[1,l]],highlightGradientUnplayed:[[0,f,.5],[1,f,.5]],progressIndicatorBg:p(f,.8),progressIndicatorColor:p(m,1),durationIndicatorBg:p(f,.8),durationIndicatorColor:p(i,1),dividerColorPrevious:p(j,1),dividerColorUpcoming:p(i,1)},inverted:{progressGradient:[[0,l],[.7,k],[.701,l],[1,l]],loaderGradient:[[0,n],[1,n]],backgroundGradient:[[0,n],[.7,n],[.701,n,.4],[1,n,.4]],gapGradient:[[0,n,0],[.28,n,.3],[.7,n,.5],[.701,n,.125],[1,n,.125]],scrubberGradientBackward:[[0,n,.5],[.7,n,.5],[.701,n,0],[1,n,0]],scrubberGradientForward:[[0,l,.5],[.7,k,.5],[.701,l,0],[1,l,0]],highlightGradientPlayed:[[0,l],[.7,k],[.701,l],[1,l]],highlightGradientUnplayed:[[0,n],[1,n]],progressIndicatorBg:p(f,.8),progressIndicatorColor:p(m,1),durationIndicatorBg:p(f,.8),durationIndicatorColor:p(i,1),dividerColorPrevious:p(j,1),dividerColorUpcoming:p(i,1)},custom:function(){var a=d(e.get("widgetParams").color).toRgb(),b=[a.r,a.g,a.b].join(","),c=b==="255,85,0"?"255,51,0":b;return{progressGradient:[[0,b],[.7,c],[.701,b],[1,b]],loaderGradient:[[0,f,.5],[1,f,.5]],backgroundGradient:[[0,g],[.7,g],[.701,g,.5],[1,g,.5]],gapGradient:[[0,h,0],[.28,o,.6],[.7,g],[.701,g,.25],[1,g,.25]],scrubberGradientBackward:[[0,g,.5],[.7,g,.5],[.701,g,0],[1,g,0]],scrubberGradientForward:[[0,b,.5],[.7,c,.5],[.701,b,0],[1,b,0]],highlightGradientPlayed:[[0,b],[.7,c],[.701,b],[1,b]],highlightGradientUnplayed:[[0,f,.5],[1,f,.5]],progressIndicatorBg:p(f,.8),progressIndicatorColor:p(m,1),durationIndicatorBg:p(f,.8),durationIndicatorColor:p(i,1),dividerColorPrevious:p(j,1),dividerColorUpcoming:p(i,1)}}}}),
define("views/share/share-icon",["require","exports","module","lib/event-bus","lib/helpers/popup-helper","lib/helpers/tag-helper","tracking-events","lib/views/mixins/multi-resource-type","config/resources","lib/utils","lib/view","views/share/share-icon.css","views/share/share-icon.tmpl"],function(a,b,c){function m(){var a=this.getShareURL(),b=this.options;return encodeURIComponent(a+"?utm_source=soundcloud&utm_campaign="+b.campaignName+"&utm_medium="+b.serviceName+"&utm_content="+a)}function n(){var a="",b;return this.isAudible&&(b=this.model.toJSON(),encodeURIComponent(["SoundCloud",b.user.username].concat(g.extract(b).slice(0,4)).join(","))),a}var d,e=a("lib/event-bus"),f=a("lib/helpers/popup-helper"),g=a("lib/helpers/tag-helper"),h=a("tracking-events"),i=a("lib/views/mixins/multi-resource-type"),j=a("config/resources"),k=a("lib/utils"),l=a("lib/view");d=c.exports=l.extend(i,{className:"shareIcon",css:a("views/share/share-icon.css"),template:a("views/share/share-icon.tmpl"),defaults:{popupSize:null,serviceKey:null,serviceName:null,campaignName:"wtshare",hrefTemplate:null,opensPopup:!0},events:{"click .sc-social-icon":"onIconClick"},onIconClick:function(a){var b=this.options,c=b.popupSize;b.opensPopup&&(a.preventDefault(),f.centered(a.target.getAttribute("href"),c[0],c[1])),e.trigger(h.UI.SHARE_ICON_CLICKED,{model:this.model,shareIconType:this.options.serviceKey})},getHrefData:$.noop,getHref:function(){var a={tags:n.call(this),share_url:m.call(this),share_title:this.getShareTitle()};return k.supplant(this.options.hrefTemplate,this.getHrefData(a)||a)},getShareTitle:function(){var a=[],b=this.model.toJSON();switch(this.options.resource_type){case j.SOUND:case j.PLAYLIST:a=this.t("[[title]] by [[username]]",{title:b.title,username:b.user.username});break;case j.USER_FAVORITES:a=this.t("Favorite tracks of [[username]]",{username:b.username});break;case j.USER_SOUNDS:a=this.t("Latest tracks by [[username]]",{username:b.username});break;case j.GROUP_SOUNDS:a=this.t("Tracks from the [[username]]",{username:b.username})}return a},getTemplateData:function(){var a=this.options;return{href:this.getHref(),key:a.serviceKey,title:this.t("Share to [[title]]",{title:this.t(a.serviceName)})}}})}),
define("views/ads/ad.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".displayAd{height:100%}.displayAd__visualLink{display:block;height:100%}.displayAd__image{opacity:0;width:100%}.displayAd.imageLoaded .displayAd__image{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/ad.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=' <a href="',d=a.landing_page,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"landing_page",{hash:{}})),c+=o(d)+'" class="displayAd__visualLink" >\n',c}function q(a,b){return" </a>\n"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.landing_page,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+=' <img class="displayAd__image g-opacity-transition" src="',g=b.ad_visual,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"ad_visual",{hash:{}})),f+=o(g)+'" />\n',g=b.landing_page,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("models/groups",["require","exports","module","_","lib/connect","models/id-list","lib/url"],function(a,b,c){var d,e=a("_"),f=a("lib/connect"),g=a("models/id-list"),h=a("lib/url");d=c.exports=g.extend({baseUrl:"me/groups",CREATE:"POST",url:function(a,b){var c=e.result(this,"baseUrl");return a&&b==="CREATE"?this.saveUrl(a):a&&b==="DELETE"?this.destroyUrl(a):this.next_href===null?h.modify(c,{query:{representation:"mini",linked_partitioning:1,limit:5e3}}):this.next_href},parse:function(a){var b=a.collection,c={};return this.next_href=a.next_href||!1,b&&b.length&&b.forEach(function(a){c[a.id]=!0}),c},destroyUrl:function(a){return h.joinPath(["groups",a,"members",f.currentUserId()])},saveUrl:function(a){return h.joinPath(["groups",a,"members"])}})}),
define("models/id-list",["require","exports","module","_","lib/connect","lib/event-bus","lib/model","lib/store","lib/url"],function(a,b,c){function k(){var a=this.url();a&&f.isLoggedIn()?h.prototype.fetch.apply(this,arguments).done(k.bind(this)).fail(this._fetchDefer.reject):this._fetchDefer.resolve()}var d,e=a("_"),f=a("lib/connect"),g=a("lib/event-bus"),h=a("lib/model"),i=a("lib/store"),j=a("lib/url");d=c.exports=h.extend({CREATE:"PUT",READ:"GET",DELETE:"DELETE",_currentRequests:null,next_href:null,_fetchDefer:null,readPathSuffix:"ids",setup:function(){this._currentRequests=new i},url:function(a){var b=j.parse(e.result(this,"baseUrl"));b.path=b.path.replace(/\/?$/,"/");if(a)b.path+=a;else if(this.next_href===null)b.path+=this.readPathSuffix,b.query.linked_partitioning=1,b.query.limit=5e3;else return this.next_href;return j.stringify(b)},get:function(){return h.prototype.get.apply(this,arguments)||!1},fetch:function(){return this._fetchDefer||(this._fetchDefer=$.Deferred(),f.isLoggedIn()?k.call(this):g.one("connect:hasUserData",k.bind(this))),this._fetchDefer},parse:function(a){return this.next_href=a.next_href||!1,e.reduce(a.collection,function(a,b){return a[b]=!0,a},{})},toggle:function(a,b){var c=this.get(a),d=typeof b=="boolean"?b:!c;d!==c&&(d?this.set(a,!0):this.unset(a))},setRemote:function(a,b,c){var d,e,f=this._currentRequests.get(a),g;if(!f)return e=c?c:b?"CREATE":"DELETE",d=this.url(a,e),f=$.ajax({url:d,type:this[e],dataType:"json"}),this._currentRequests.set(a,f),g=this,f.always(function(){this._currentRequests.unset(a)}.bind(this)).done(function(){var b=g.get(a);(this.type===g.DELETE&&b||this.type===g.CREATE&&!b)&&g.setRemote(a,b)}),f},hasDataForView:function(){return!!this.lastFetchTime}},{neverRelease:!0,hashFn:function(){return 1}})}),
define("lib/views/tooltip",["require","exports","module","lib/views/mixins/overlay","lib/view","lib/views/tooltip.tmpl","lib/views/tooltip.css"],function(a,b,c){var d,e=a("lib/views/mixins/overlay"),f=a("lib/view");d=c.exports=f.extend(e,{template:a("lib/views/tooltip.tmpl"),css:a("lib/views/tooltip.css"),className:"tooltip g-overlay sc-selection-disabled",defaults:{margin:11,collision:"fit",text:null},attributes:{role:"tooltip"},setup:function(){var a=this.options;!a.text&&a.relativeElement&&(a.text=a.relativeElement.title,a.relativeElement.removeAttribute("title"))},closeDecorate:function(){this.toggleState("visible",!1)},renderDecorate:function(){this.whenInserted().done(function(){this.toggleState("visible",this.isOpened)}.bind(this))}})}),
define("lib/views/dialog",["require","exports","module","lib/views/mixins/overlay","lib/view","lib/views/dialog.css","lib/views/dialog.tmpl"],function(a,b,c){var d,e=a("lib/views/mixins/overlay"),f=a("lib/view");d=c.exports=f.extend(e,{css:a("lib/views/dialog.css"),template:a("lib/views/dialog.tmpl"),className:"dialog g-overlay",defaults:{margin:11},getOverlayContentEl:function(){return this.$$("content")}})}),
define("lib/helpers/popup-helper",["require","exports","module"],function(a,b,c){c.exports={centered:function(a,b,c){var d=window.screenX+(window.outerWidth-b)/2,e=window.screenY+(window.outerHeight-c)/2;return window.open(a,"",["location=1","width="+b,"height="+c,"top="+e,"left="+d,"toolbar=no","scrollbars=yes"].join(","))}}}),
define("lib/helpers/tag-helper",["require","exports","module"],function(a,b,c){var d;d=c.exports={extract:function(a){var b=a.tag_list||"",c=a.genre||"",d=[],e="",f=!1,g=!0,h=/(\w+)\:(\w+)=(.+)/,i,j,k;c&&d.push(c);for(i=0,j=b.length;i<j;++i)k=b.charAt(i),k==='"'?f=!f:k===" "?f?e+=k:g===!1&&(g=!0,d.push(e),e=""):(g=!1,e+=k);return g||d.push(e),d.filter(function(a){return!h.test(a)}).map(function(a){return a.replace(/"/g,"").replace(/\s\s+/," ").trim()}).filter(Boolean)}}}),
define("views/share/share-icon.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".shareIcon{display:inline-block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-icon.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<a class="sc-social-icon sc-social-icon-32x32 sc-social-icon-',g=b.key,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"key",{hash:{}})),f+=m(g)+'-32x32 sc-ir" href="',g=b.href,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"href",{hash:{}})),f+=m(g)+'" title="',g=b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+'">',g=b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+"</a>\n",f})}),
define("lib/views/mixins/overlay",["require","exports","module","_","lib/keys","lib/event-bus","lib/math","lib/mixin"],function(a,b,c){function m(a){var b=a?"on":"off";g[b](j.OPENED,this.onOverlayOpen,this),$(document)[b]("keydown",this.onDocumentKeydown),document[a?"addEventListener":"removeEventListener"]("click",this.onDocumentClick,!0),$(window)[b]("resize",this.onWindowResize)}function n(a,b){var c=b.element.element,d=b.target.element,e=$(window),f=this.$$("arrow"),g=a.top,i=a.left,j="fixed",k=e.width(),l=e.height(),m=c.outerWidth(),n=c.outerHeight(),o=this.options.margin,p=k-m-this.options.margin,q=this.options.margin,r=l-n-this.options.margin;g=h.clamp(g,q,r),i=h.clamp(i,o,p),this.options.relativeElement&&f.length&&this.options.anchor==="center top"&&(f.css({left:d.offset().left-i+d.outerWidth()/2-f.outerWidth()/2,top:-f.outerHeight()}),g+=f.outerHeight()+3),c.css({position:j,top:g,left:i})}function o(a){var b=p(this),c=p(a);return b<c}function p(a){return a.options.priorityLevel||k.MEDIUM}function q(){return!0}var d,e=a("_"),f=a("lib/keys"),g=a("lib/event-bus"),h=a("lib/math"),i=a("lib/mixin"),j={OPENED:"overlay:opened",CLOSED:"overlay:closed"},k={HIGH:1,MEDIUM:2,LOW:3},l=300;d=c.exports=new i({applyTo:function(a){var b=a.constructor;e.extend(b,{Events:j,PriorityLevels:k}),a.defaults=e.defaults(a.defaults||{},{Subview:null,subviewArgs:null,togglerEl:null,relativeElement:null,relativeElementAnchor:"center bottom",anchor:"center top",offset:"0 0",collision:"flip",width:"auto",minHeight:"auto",domId:null,focusable:!0,margin:0,priorityLevel:null}),a.element2selector=e.extend({},a.element2selector,{"last-tabbable":":tabbable:last","first-tabbable":":tabbable:first"})},before:{setup:function(){e.bindAll(this,"onDocumentClick","onDocumentKeydown","onWindowResize"),m.call(this,!0),this.$el.css({outline:"none"}),this.onPositionComplete=n.bind(this)},dispose:function(){m.call(this,!1),this.close()}},defaults:{template:function(){return""},isOpened:!1,open:function(){!this.disposed&&!this.isOpened&&this.canBeOpened()&&(this.isOpened=!0,this.rerender(),this.$el.appendTo(document.body),this.createContentView(),this.position(),this.options.focusable&&this.$el.focus(),this.trigger(j.OPENED),g.trigger(j.OPENED,this))},close:function(a){!this.disposed&&this.isOpened&&(a||this.canBeClosed())&&(this.isOpened=!1,this.$el.detach(),this.closeDecorate(),this.trigger(j.CLOSED))},closeDecorate:$.noop,canBeClosed:q,canBeOpened:q,getContentView:function(){return this.subviews.contentView},createContentView:function(){if(this.getContentView()||!this.options.Subview)return;var a=this.options,b=a.Subview,c=e.result(a,"subviewArgs"),d;d=this.addSubview(new b(e.extend({resource_id:a.resource_id,resource_type:a.resource_type},c)),"contentView"),this.$el.attr({tabindex:"-1",id:this.options.domId||e.uniqueId("overlay_")}),this.getOverlayContentEl().append(d.render().el)},getOverlayContentEl:function(){return this.$el},position:function(){var a=this.options;this.$el.css({width:a.width,minHeight:a.minHeight,position:"fixed"}).position({my:a.anchor,at:a.relativeElementAnchor,of:a.relativeElement,offset:a.offset,collision:a.collision,using:this.onPositionComplete}),this.positionDecorate()},positionDecorate:$.noop,onOverlayOpen:function(a){a.isOpened&&a!==this&&!o.call(this,a)&&this.close(!0)},onDocumentClick:function(a){if(!this.isOpened||$(a.target).closest(this.options.togglerEl).length)return;$(a.target).closest(this.$el).length||this.close()},onDocumentKeydown:function(a){if(!this.isOpened)return;if(a.which===f.ESC){this.close();var b=this._parentView&&this._parentView.$el;b&&b.focus()}else if(a.which===f.TAB){if(!a.shiftKey&&a.target===this.getElement("last-tabbable")[0])return this.getElement("first-tabbable").focus(),!1;if(a.shiftKey&&a.target===this.getElement("first-tabbable")[0])return this.getElement("last-tabbable").focus(),!1}},onWindowResize:e.throttle(function(){!this.disposed&&this.isOpened&&this.position()},l)}})}),
define("lib/views/tooltip.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="tooltip__arrow g-arrow g-arrow-top"></div>\n<div class="tooltip__content">',g=b._options,g=g===null||g===undefined||g===!1?g:g.text,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.text",{hash:{}})),f+=m(g)+"</div>\n",f})}),
define("lib/views/tooltip.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".tooltip{padding:3px 7px;opacity:0;-webkit-transition:opacity .1s linear;transition:opacity .1s linear;font-size:12px;line-height:15px}.tooltip.visible{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/dialog.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".dialog{padding:10px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/dialog.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="dialog__arrow g-arrow g-arrow-top"></div>\n<div class="dialog__content"></div>\n'})}),
define("lib/keys",["require","exports","module"],function(a,b,c){c.exports={ALT:18,BACKSPACE:8,CTRL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESC:27,HOME:36,INSERT:45,LEFT:37,META:97,PGDOWN:34,PGUP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,COMMA:188}})