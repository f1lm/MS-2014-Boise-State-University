"use strict";StackExchange.mockups=function(){function t(t,e,i,n,s){function a(t,e,i){for(var n=-1,s=-1;;){if(s=e.indexOf(t,s+1),-1==s)break;(0>n||Math.abs(s-i)<Math.abs(s-n))&&(n=s)}return n}return t.replace(new RegExp("<!-- Begin mockup[^>]*? -->\\s*!\\[[^\\]]*\\]\\((http://[^ )]+)[^)]*\\)\\s*<!-- End mockup -->","g"),function(t,o,r){var c={"payload":o.replace(/[^-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]/g,""),"pos":a(t,e,r),"len":t.length};return-1===c.pos?t:(s.push(c),t+"\n\n"+i+n+"-"+(s.length-1)+"%")})}function e(){StackExchange.externalEditor.init({"thingName":"mockup","thingFinder":t,"getIframeUrl":function(t){var e="/plugins/mockups/editor";return t&&(e+="?edit="+encodeURIComponent(t)),e},"buttonTooltip":"UI wireframe","buttonImageUrl":"/content/balsamiq/wmd-mockup-button.png?v=4","onShow":function(t){window.addMockupToEditor=t},"onRemove":function(){window.addMockupToEditor=null;try{delete window.addMockupToEditor}catch(t){}}})}return{"init":e}}(),StackExchange.schematics=function(){function t(){if(!window.postMessage)return n;var t=document.createElement("div");t.innerHTML="<svg/>";var e="http://www.w3.org/2000/svg"==(t.firstChild&&t.firstChild.namespaceURI);if(!e)return n;var i=navigator.userAgent;return/Firefox|Chrome/.test(i)?o:/Apple/.test(navigator.vendor)||/Opera/.test(i)?a:s}function e(t,e,i,n,s){function a(t,e,i){for(var n=-1,s=-1;;){if(s=e.indexOf(t,s+1),-1==s)break;(0>n||Math.abs(s-i)<Math.abs(s-n))&&(n=s)}return n}return t.replace(new RegExp("<!-- Begin schematic[^>]*? -->\\s*!\\[[^\\]]*\\]\\((http://[^ )]+)[^)]*\\)\\s*<!-- End schematic -->","g"),function(t,o,r){var c={"payload":o.replace(/[^-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]/g,""),"pos":a(t,e,r),"len":t.length};return-1===c.pos?t:(s.push(c),t+"\n\n"+i+n+"-"+(s.length-1)+"%")})}function i(){var i;StackExchange.externalEditor.init({"thingName":"schematic","thingFinder":e,"getIframeUrl":function(t){var e="/plugins/schematics/editor";return t&&(e+="?edit="+encodeURIComponent(t)),e},"buttonTooltip":"Schematic","buttonImageUrl":"/content/electronics/img/wmd-schematic-button.png?v=1","checkSupport":function(){var e=t();switch(e){case o:return!0;case a:return confirm("Your browser is not officially supported by the schematics editor; however it has been reported to work. Launch the editor?");case s:return confirm("Your browser is not officially supported by the schematics editor; it may or may not work. Launch the editor anyway?");case n:return alert("Sorry, your browser does not support all the necessary features for the schematics editor."),!1}},"onShow":function(t){var e=$("<div class='popup' />").css("z-index",1111).text("Loading editor").appendTo("body").show().addSpinner({"marginLeft":5}).center({"dy":-200});$("<div style='text-align:right;margin-top: 10px' />").append($("<button>cancel</button>").click(function(){e.remove(),t()})).appendTo(e),i=function(i){if(i=i.originalEvent,"https://www.circuitlab.com"===i.origin){i.data||t();var n=$.parseJSON(i.data);if(n&&"success"===n.load)return e.remove(),void 0;if(n&&n.edit_url&&n.image_url){n.fkey=StackExchange.options.user.fkey;var s=$("<div class='popup' />").css("z-index",1111).appendTo("body").show(),a=function(){s.text("Storing image").addSpinner({"marginLeft":5}).center(),$.post("/plugins/schematics/save",n).done(function(e){s.remove(),t(e.img)}).fail(function(t){if(409===t.status){var e="Storing aborted";t.responseText.length<200&&(e=t.responseText),s.text(e+", will retry shortly").addSpinner({"marginLeft":5}).center(),setTimeout(a,1e4)}else s.remove(),alert("Failed to upload the schematic image.")})};a()}}},$(window).on("message",i)},"onRemove":function(){$(window).off("message",i)}})}var n=0,s=1,a=2,o=3;return{"init":i}}(),StackExchange.externalEditor=function(){function t(t){function e(t,e){function d(e){function n(){x.add("#lightbox").remove(),h()}var s=m||v.caret(),r=v[0].value||"",c=e?e.pos:s.start,u=e?e.len:s.end-s.start,d=r.substring(0,c),p=r.substring(c+u);m=null;var g=function(e,a){if(!e)return setTimeout(n,0),v.focus(),void 0;StackExchange.navPrevention.start();var o=void 0===a?i(e):a,r=d.replace(/(?:\r\n|\r|\n){1,2}$/,""),c=r+o+p.replace(/^(?:\r\n|\r|\n){1,2}/,""),l=s.start+o.length-d.length+r.length;setTimeout(function(){t.textOperation(function(){v.val(c).focus().caret(l,l)}),n()},0)},f=$('<div id="lightbox" class="esc-remove" />');f.appendTo($("body")).css({"height":$(document).height(),"opacity":.5}).fadeIn("fast");var x=null;if(a){var k=a(e?e.payload:null);x=$('<iframe class="esc-remove" src="'+k+'" width="95%" height="95%" style="position: fixed; top: 2.5%; left: 2.5%; background: white; z-index: 1001" />')}else{var b=o(e?e.payload:null);x=$('<div class="esc-remove" style="position: fixed; top: 2.5%; left: 2.5%; width: 95%; height: 95%; background: white; z-index: 1001"></div>'),x.append(b)}x.appendTo($("body")),$(window).resize(),l(g)}$('<style type="text/css"> .wmd-'+n+"-button span { background-position: 0 0; } .wmd-"+n+"-button:hover span { background-position: 0 -40px; }</style>)").appendTo("head");var p,g,m,f=t.getConverter().hooks,v=$("#wmd-input"+e);f.chain("preConversion",function(t){var e=(t.match(/%/g)||[]).length,i=v[0].value||"";return p=new Array(e+2).join("%"),g=[],s(t,i,p,n,g)}),f.chain("postConversion",function(t){return t.replace(new RegExp(p+n+"-(\\d+)%","g"),function(t,e){return"<sup><a href='#' class='edit-"+n+"' data-id='"+e+"'>edit the above "+n+"</a></sup>"})});var x="The "+n+" editor does not support touch devices.",k=!1;$("#wmd-preview"+e).on("touchend",function(){k=!0}).on("click","a.edit-"+n,function(){return k?(alert(x),k=!1,!1):(k=!1,(!u||u())&&d(g[$(this).attr("data-id")]),!1)}),$("#wmd-input"+e).keyup(function(t){t.shiftKey||t.altKey||t.metaKey||!t.ctrlKey||77!==t.which||(!u||u())&&d()}),setTimeout(function(){var t=($("#wmd-button-bar"+e),$("#wmd-image-button"+e)),i=parseInt(t.css("left"));t.nextAll("li").each(function(){var t=$(this),e=parseInt(t.css("left"));t.css("left",e+25)});var s=$("<li class='wmd-button wmd-"+n+"-button' style='left:"+(i+25)+"px' id='wmd-"+n+"-button"+e+"' title='"+r+" Ctrl-M' />").insertAfter(t),a=!1,o=$("<span />").css({"backgroundImage":"url("+c+")"}).appendTo(s).on("touchend",function(){a=!0}).click(function(){return a?(alert(x),a=!1,void 0):(a=!1,(!u||u())&&d(),void 0)});$.browser.msie&&o.mousedown(function(){m=v.caret()})},0)}function i(t){return('\n\n<!-- Begin {THING}: In order to preserve an editable {THING}, please\n     don\'t edit this section directly.\n     Click the "edit" link below the image in the preview instead. -->\n\n![{THING}]('+t+")\n\n<!-- End {THING} -->\n\n").replace(/{THING}/g,n)}var n=t.thingName,s=t.thingFinder,a=t.getIframeUrl,o=t.getDivContent,r=t.buttonTooltip,c=t.buttonImageUrl,l=t.onShow,h=t.onRemove,u=t.checkSupport;StackExchange.MarkdownEditor.creationCallbacks.add(e)}return{"init":t}}();