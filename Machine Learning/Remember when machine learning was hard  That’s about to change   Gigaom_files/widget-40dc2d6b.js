(function(a,b){typeof module=="object"&&typeof module.exports=="object"?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)})(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(a){var b=a.length,c=jQuery.type(a);return c==="function"||jQuery.isWindow(a)?!1:a.nodeType===1&&b?!0:c==="array"||b===0||typeof b=="number"&&b>0&&b-1 in a}function winnow(a,b,c){if(jQuery.isFunction(b))return jQuery.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return jQuery.grep(a,function(a){return a===b!==c});if(typeof b=="string"){if(risSimple.test(b))return jQuery.filter(b,a,c);b=jQuery.filter(b,a)}return jQuery.grep(a,function(a){return indexOf.call(b,a)>=0!==c})}function sibling(a,b){while((a=a[b])&&a.nodeType!==1);return a}function createOptions(a){var b=optionsCache[a]={};return jQuery.each(a.match(rnotwhite)||[],function(a,c){b[c]=!0}),b}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(a,b,c){var d;if(c===undefined&&a.nodeType===1){d="data-"+b.replace(rmultiDash,"-$1").toLowerCase(),c=a.getAttribute(d);if(typeof c=="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:+c+""===c?+c:rbrace.test(c)?jQuery.parseJSON(c):c}catch(e){}data_user.set(a,b,c)}else c=undefined}return c}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(a){}}function manipulationTarget(a,b){return jQuery.nodeName(a,"table")&&jQuery.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function disableScript(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function restoreScript(a){var b=rscriptTypeMasked.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function setGlobalEval(a,b){var c=0,d=a.length;for(;c<d;c++)data_priv.set(a[c],"globalEval",!b||data_priv.get(b[c],"globalEval"))}function cloneCopyEvent(a,b){var c,d,e,f,g,h,i,j;if(b.nodeType!==1)return;if(data_priv.hasData(a)){f=data_priv.access(a),g=data_priv.set(b,f),j=f.events;if(j){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)jQuery.event.add(b,e,j[e][c])}}data_user.hasData(a)&&(h=data_user.access(a),i=jQuery.extend({},h),data_user.set(b,i))}function getAll(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return b===undefined||b&&jQuery.nodeName(a,b)?jQuery.merge([a],c):c}function fixInput(a,b){var c=b.nodeName.toLowerCase();if(c==="input"&&rcheckableType.test(a.type))b.checked=a.checked;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}function actualDisplay(a,b){var c=jQuery(b.createElement(a)).appendTo(b.body),d=window.getDefaultComputedStyle?window.getDefaultComputedStyle(c[0]).display:jQuery.css(c[0],"display");return c.detach(),d}function defaultDisplay(a){var b=document,c=elemdisplay[a];if(!c){c=actualDisplay(a,b);if(c==="none"||!c)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=iframe[0].contentDocument,b.write(),b.close(),c=actualDisplay(a,b),iframe.detach();elemdisplay[a]=c}return c}function curCSS(a,b,c){var d,e,f,g,h=a.style;return c=c||getStyles(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(g===""&&!jQuery.contains(a.ownerDocument,a)&&(g=jQuery.style(a,b)),rnumnonpx.test(g)&&rmargin.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),g!==undefined?g+"":g}function addGetHookIf(a,b){return{get:function(){if(a()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}function vendorPropName(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=cssPrefixes.length;while(e--){b=cssPrefixes[e]+c;if(b in a)return b}return d}function setPositiveNumber(a,b,c){var d=rnumsplit.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function augmentWidthOrHeight(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2)c==="margin"&&(g+=jQuery.css(a,c+cssExpand[f],!0,e)),d?(c==="content"&&(g-=jQuery.css(a,"padding"+cssExpand[f],!0,e)),c!=="margin"&&(g-=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e))):(g+=jQuery.css(a,"padding"+cssExpand[f],!0,e),c!=="padding"&&(g+=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e)));return g}function getWidthOrHeight(a,b,c){var d=!0,e=b==="width"?a.offsetWidth:a.offsetHeight,f=getStyles(a),g=jQuery.css(a,"boxSizing",!1,f)==="border-box";if(e<=0||e==null){e=curCSS(a,b,f);if(e<0||e==null)e=a.style[b];if(rnumnonpx.test(e))return e;d=g&&(support.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+augmentWidthOrHeight(a,b,c||(g?"border":"content"),d,f)+"px"}function showHide(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=data_priv.get(d,"olddisplay"),c=d.style.display,b?(!f[g]&&c==="none"&&(d.style.display=""),d.style.display===""&&isHidden(d)&&(f[g]=data_priv.access(d,"olddisplay",defaultDisplay(d.nodeName)))):f[g]||(e=isHidden(d),(c&&c!=="none"||!e)&&data_priv.set(d,"olddisplay",e?c:jQuery.css(d,"display")))}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none"}return a}function Tween(a,b,c,d,e){return new Tween.prototype.init(a,b,c,d,e)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(a,b){var c,d=0,e={height:a};b=b?1:0;for(;d<4;d+=2-b)c=cssExpand[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function createTween(a,b,c){var d,e=(tweeners[b]||[]).concat(tweeners["*"]),f=0,g=e.length;for(;f<g;f++)if(d=e[f].call(c,b,a))return d}function defaultPrefilter(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&isHidden(a),o=data_priv.get(a,"fxshow");c.queue||(h=jQuery._queueHooks(a,"fx"),h.unqueued==null&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,jQuery.queue(a,"fx").length||h.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=jQuery.css(a,"display"),j==="none"&&(j=defaultDisplay(a.nodeName)),j==="inline"&&jQuery.css(a,"float")==="none"&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){e=b[d];if(rfxtypes.exec(e)){delete b[d],f=f||e==="toggle";if(e===(n?"hide":"show"))if(e==="show"&&o&&o[d]!==undefined)n=!0;else continue;l[d]=o&&o[d]||jQuery.style(a,d)}}if(!jQuery.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=data_priv.access(a,"fxshow",{}),f&&(o.hidden=!n),n?jQuery(a).show():k.done(function(){jQuery(a).hide()}),k.done(function(){var b;data_priv.remove(a,"fxshow");for(b in l)jQuery.style(a,b,l[b])});for(d in l)g=createTween(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start=d==="width"||d==="height"?1:0))}}function propFilter(a,b){var c,d,e,f,g;for(c in a){d=jQuery.camelCase(c),e=b[d],f=a[c],jQuery.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=jQuery.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function Animation(a,b,c){var d,e,f=0,g=animationPrefilters.length,h=jQuery.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;var b=fxNow||createFxNow(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:jQuery.extend({},b),opts:jQuery.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:fxNow||createFxNow(),duration:c.duration,tweens:[],createTween:function(b,c){var d=jQuery.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=!0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;propFilter(k,j.opts.specialEasing);for(;f<g;f++){d=animationPrefilters[f].call(j,a,k,j.opts);if(d)return d}return jQuery.map(k,createTween,j),jQuery.isFunction(j.opts.start)&&j.opts.start.call(a,j),jQuery.fx.timer(jQuery.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function addToPrefiltersOrTransports(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(c))while(d=f[e++])d[0]==="+"?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function inspectPrefiltersOrTransports(a,b,c,d){function g(h){var i;return e[h]=!0,jQuery.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j=="string"&&!f&&!e[j])return b.dataTypes.unshift(j),g(j),!1;if(f)return!(i=j)}),i}var e={},f=a===transports;return g(b.dataTypes[0])||!e["*"]&&g("*")}function ajaxExtend(a,b){var c,d,e=jQuery.ajaxSettings.flatOptions||{};for(c in b)b[c]!==undefined&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&jQuery.extend(!0,a,d),a}function ajaxHandleResponses(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*")i.shift(),d===undefined&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function ajaxConvert(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}return{state:"success",data:b}}function buildParams(a,b,c,d){var e;if(jQuery.isArray(b))jQuery.each(b,function(b,e){c||rbracket.test(a)?d(a,e):buildParams(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&jQuery.type(b)==="object")for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}function getWindow(a){return jQuery.isWindow(a)?a:a.nodeType===9&&a.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,trim="".trim,support={},document=window.document,version="2.1.0",jQuery=function(a,b){return new jQuery.fn.init(a,b)},rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(a,b){return b.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(a){return a!=null?a<0?this[a+this.length]:this[a]:slice.call(this)},pushStack:function(a){var b=jQuery.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return jQuery.each(this,a,b)},map:function(a){return this.pushStack(jQuery.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;typeof g=="boolean"&&(j=g,g=arguments[h]||{},h++),typeof g!="object"&&!jQuery.isFunction(g)&&(g={}),h===i&&(g=this,h--);for(;h<i;h++)if((a=arguments[h])!=null)for(b in a){c=g[b],d=a[b];if(g===d)continue;j&&d&&(jQuery.isPlainObject(d)||(e=jQuery.isArray(d)))?(e?(e=!1,f=c&&jQuery.isArray(c)?c:[]):f=c&&jQuery.isPlainObject(c)?c:{},g[b]=jQuery.extend(j,f,d)):d!==undefined&&(g[b]=d)}return g},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return jQuery.type(a)==="function"},isArray:Array.isArray,isWindow:function(a){return a!=null&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if(jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a))return!1;try{if(a.constructor&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?class2type[toString.call(a)]||"object":typeof a},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(a){return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a);if(c)if(g)for(;e<f;e++){d=b.apply(a[e],c);if(d===!1)break}else for(e in a){d=b.apply(a[e],c);if(d===!1)break}else if(g)for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===!1)break}else for(e in a){d=b.call(a[e],e,a[e]);if(d===!1)break}return a},trim:function(a){return a==null?"":trim.call(a)},makeArray:function(a,b){var c=b||[];return a!=null&&(isArraylike(Object(a))?jQuery.merge(c,typeof a=="string"?[a]:a):push.call(c,a)),c},inArray:function(a,b,c){return b==null?-1:indexOf.call(b,a,c)},merge:function(a,b){var c=+b.length,d=0,e=a.length;for(;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length,h=!c;for(;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a),h=[];if(g)for(;e<f;e++)d=b(a[e],e,c),d!=null&&h.push(d);else for(e in a)d=b(a[e],e,c),d!=null&&h.push(d);return concat.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return typeof b=="string"&&(c=a[b],b=a,a=c),jQuery.isFunction(a)?(d=slice.call(arguments,2),e=function(){return a.apply(b||this,d.concat(slice.call(arguments)))},e.guid=a.guid=a.guid||jQuery.guid++,e):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){class2type["[object "+b+"]"]=b.toLowerCase()});var Sizzle=function(a){function bd(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;(b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[];if(!a||typeof a!="string")return d;if((i=b.nodeType)!==1&&i!==9)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(i===9){g=b.getElementById(h);if(!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){q=p=s,u=b,v=i===9&&a;if(i===1&&b.nodeName.toLowerCase()!=="object"){m=bo(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+bp(m[j]);u=$.test(a)&&bm(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return bx(a.replace(P,"$1"),b,d,e)}function be(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function bf(a){return a[s]=!0,a}function bg(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function bh(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function bi(a,b){var c=b&&a,d=c&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function bj(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function bk(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bl(a){return bf(function(b){return b=+b,bf(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function bm(a){return a&&typeof a.getElementsByTagName!==A&&a}function bn(){}function bo(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){if(!c||(e=Q.exec(h)))e&&(h=h.slice(e[0].length)||h),i.push(f=[]);c=!1;if(e=R.exec(h))c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length);for(g in d.filter)(e=V[g].exec(h))&&(!j[g]||(e=j[g](e)))&&(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?bd.error(a):x(a,i).slice(0)}function bp(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d}function bq(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=v++;return b.first?function(b,c,f){while(b=b[d])if(b.nodeType===1||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if(b.nodeType===1||e)if(a(b,c,g))return!0}else while(b=b[d])if(b.nodeType===1||e){i=b[s]||(b[s]={});if((h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];i[d]=j;if(j[2]=a(b,c,g))return!0}}}function br(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function bs(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function bt(a,b,c,d,e,f){return d&&!d[s]&&(d=bt(d)),e&&!e[s]&&(e=bt(e,f)),bf(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||bw(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?bs(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){j=bs(r,n),d(j,[],h,i),k=j.length;while(k--)if(l=j[k])r[n[k]]=!(q[n[k]]=l)}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=bs(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function bu(a){var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=bq(function(a){return a===b},i,!0),l=bq(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];for(;j<f;j++)if(c=d.relative[a[j].type])m=[bq(br(m),c)];else{c=d.filter[a[j].type].apply(null,a[j].matches);if(c[s]){e=++j;for(;e<f;e++)if(d.relative[a[e].type])break;return bt(j>1&&br(m),j>1&&bp(a.slice(0,j-1).concat({value:a[j-2].type===" "?"*":""})).replace(P,"$1"),c,j<e&&bu(a.slice(j,e)),e<f&&bu(a=a.slice(e)),e<f&&bp(a))}m.push(c)}return br(m)}function bv(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=t==null?1:Math.random()||.1,x=v.length;k&&(h=g!==l&&g);for(;q!==x&&(m=v[q])!=null;q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}p+=q;if(c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)!r[q]&&!s[q]&&(s[q]=E.call(j));s=bs(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&bd.uniqueSort(j)}return k&&(u=w,h=t),r};return c?bf(f):f}function bw(a,b,c){var d=0,e=b.length;for(;d<e;d++)bd(a,b[d],c);return c}function bx(a,b,e,f){var h,i,j,k,l,m=bo(a);if(!f&&m.length===1){i=m[0]=m[0].slice(0);if(i.length>2&&(j=i[0]).type==="ID"&&c.getById&&b.nodeType===9&&n&&d.relative[i[1].type]){b=(d.find.ID(j.matches[0].replace(ba,bb),b)||[])[0];if(!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){j=i[h];if(d.relative[k=j.type])break;if(l=d.find[k])if(f=l(j.matches[0].replace(ba,bb),$.test(i[0].type)&&bm(b.parentNode)||b)){i.splice(h,1),a=f.length&&bp(i);if(!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&bm(b.parentNode)||b),e}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+ -(new Date),t=a.document,u=0,v=0,w=be(),x=be(),y=be(),z=function(a,b){return a===b&&(j=!0),0},A=typeof undefined,B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,d&1023|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(bc){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}c=bd.support={},f=bd.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},k=bd.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;if(e===l||e.nodeType!==9||!e.documentElement)return l;l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=bg(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=bg(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&bg(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",a.getElementsByClassName("i").length===2}),c.getById=bg(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==A)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++])c.nodeType===1&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==A&&n)return b.getElementsByClassName(a)},p=[],o=[];if(c.qsa=Y.test(e.querySelectorAll))bg(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),bg(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")});return(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&bg(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&d.nodeType===1&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,d&1||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:d&4?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return bi(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?bi(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e},bd.matches=function(a,b){return bd(a,null,null,b)},bd.matchesSelector=function(a,b){(a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']");if(c.matchesSelector&&n&&(!p||!p.test(b))&&(!o||!o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&a.document.nodeType!==11)return d}catch(e){}return bd(b,l,null,[a]).length>0},bd.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},bd.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):undefined;return f!==undefined?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},bd.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},bd.uniqueSort=function(a){var b,d=[],e=0,f=0;j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z);if(j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=bd.getText=function(a){var b,c="",d=0,f=a.nodeType;if(!f)while(b=a[d++])c+=e(b);else if(f===1||f===9||f===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(f===3||f===4)return a.nodeValue;return c},d=bd.selectors={cacheLength:50,createPseudo:bf,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,bb),a[3]=(a[4]||a[5]||"").replace(ba,bb),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1].slice(0,3)==="nth"?(a[3]||bd.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd")),a[5]=+(a[7]+a[8]||a[3]==="odd")):a[3]&&bd.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&a[4]!==undefined?a[2]=a[4]:c&&T.test(c)&&(b=bo(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,bb).toLowerCase();return a==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=bd.attr(d,a);return e==null?b==="!=":b?(e+="",b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return!1;o=p=a==="only"&&!o&&"nextSibling"}return!0}o=[g?q.firstChild:q.lastChild];if(g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(l.nodeType===1&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){t&&((l[s]||(l[s]={}))[a]=[u,m]);if(l===b)break}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||bd.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?bf(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:bf(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?bf(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:bf(function(a){return function(b){return bd(a,b).length>0}}),contains:bf(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:bf(function(a){return U.test(a||"")||bd.error("unsupported lang: "+a),a=a.replace(ba,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||c.indexOf(a+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text")},first:bl(function(){return[0]}),last:bl(function(a,b){return[b-1]}),eq:bl(function(a,b,c){return[c<0?c+b:c]}),even:bl(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a}),odd:bl(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a}),lt:bl(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a}),gt:bl(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=bj(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=bk(b);return bn.prototype=d.filters=d.pseudos,d.setFilters=new bn,g=bd.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=bo(a)),c=b.length;while(c--)f=bu(b[c]),f[s]?d.push(f):e.push(f);f=y(a,bv(e,d))}return f},c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=bg(function(a){return a.compareDocumentPosition(l.createElement("div"))&1}),bg(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild.getAttribute("href")==="#"})||bh("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,b.toLowerCase()==="type"?1:2)}),(!c.attributes||!bg(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),a.firstChild.getAttribute("value")===""}))&&bh("value",function(a,b,c){if(!c&&a.nodeName.toLowerCase()==="input")return a.defaultValue}),bg(function(a){return a.getAttribute("disabled")==null})||bh(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),bd}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),b.length===1&&d.nodeType===1?jQuery.find.matchesSelector(d,a)?[d]:[]:jQuery.find.matches(a,jQuery.grep(b,function(a){return a.nodeType===1}))},jQuery.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if(typeof a!="string")return this.pushStack(jQuery(a).filter(function(){for(b=0;b<c;b++)if(jQuery.contains(e[b],this))return!0}));for(b=0;b<c;b++)jQuery.find(a,e[b],d);return d=this.pushStack(c>1?jQuery.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(winnow(this,a||[],!1))},not:function(a){return this.pushStack(winnow(this,a||[],!0))},is:function(a){return!!winnow(this,typeof a=="string"&&rneedsContext.test(a)?jQuery(a):a||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(a,b){var c,d;if(!a)return this;if(typeof a=="string"){a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?c=[null,a,null]:c=rquickExpr.exec(a);if(c&&(c[1]||!b)){if(c[1]){b=b instanceof jQuery?b[0]:b,jQuery.merge(this,jQuery.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:document,!0));if(rsingleTag.test(c[1])&&jQuery.isPlainObject(b))for(c in b)jQuery.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=document.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=document,this.selector=a,this}return!b||b.jquery?(b||rootjQuery).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):jQuery.isFunction(a)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(a):a(jQuery):(a.selector!==undefined&&(this.selector=a.selector,this.context=a.context),jQuery.makeArray(a,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(a,b,c){var d=[],e=c!==undefined;while((a=a[b])&&a.nodeType!==9)if(a.nodeType===1){if(e&&jQuery(a).is(c))break;d.push(a)}return d},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}}),jQuery.fn.extend({has:function(a){var b=jQuery(a,this),c=b.length;return this.filter(function(){var a=0;for(;a<c;a++)if(jQuery.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g=rneedsContext.test(a)||typeof a!="string"?jQuery(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&jQuery.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?jQuery.unique(f):f)},index:function(a){return a?typeof a=="string"?indexOf.call(jQuery(a),this[0]):indexOf.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(a,b))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),jQuery.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return jQuery.dir(a,"parentNode")},parentsUntil:function(a,b,c){return jQuery.dir(a,"parentNode",c)},next:function(a){return sibling(a,"nextSibling")},prev:function(a){return sibling(a,"previousSibling")},nextAll:function(a){return jQuery.dir(a,"nextSibling")},prevAll:function(a){return jQuery.dir(a,"previousSibling")},nextUntil:function(a,b,c){return jQuery.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return jQuery.dir(a,"previousSibling",c)},siblings:function(a){return jQuery.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return jQuery.sibling(a.firstChild)},contents:function(a){return a.contentDocument||jQuery.merge([],a.childNodes)}},function(a,b){jQuery.fn[a]=function(c,d){var e=jQuery.map(this,b,c);return a.slice(-5)!=="Until"&&(d=c),d&&typeof d=="string"&&(e=jQuery.filter(d,e)),this.length>1&&(guaranteedUnique[a]||jQuery.unique(e),rparentsprev.test(a)&&e.reverse()),this.pushStack(e)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(a){a=typeof a=="string"?optionsCache[a]||createOptions(a):jQuery.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;for(;h&&g<f;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;(function g(b){jQuery.each(b,function(b,c){var d=jQuery.type(c);d==="function"?(!a.unique||!k.has(c))&&h.push(c):c&&c.length&&d!=="string"&&g(c)})})(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&jQuery.each(arguments,function(a,b){var c;while((c=jQuery.inArray(b,h,c))>-1)h.splice(c,1),d&&(c<=f&&f--,c<=g&&g--)}),this},has:function(a){return a?jQuery.inArray(a,h)>-1:!!h&&!!h.length},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=undefined,this},disabled:function(){return!h},lock:function(){return i=undefined,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return h&&(!c||i)&&(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},jQuery.extend({Deferred:function(a){var b=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return jQuery.Deferred(function(c){jQuery.each(b,function(b,f){var g=jQuery.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&jQuery.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return a!=null?jQuery.extend(a,d):d}},e={};return d.pipe=d.then,jQuery.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=slice.call(arguments),d=c.length,e=d!==1||a&&jQuery.isFunction(a.promise)?d:0,f=e===1?a:jQuery.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?slice.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&jQuery.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}});var readyList;jQuery.fn.ready=function(a){return jQuery.ready.promise().done(a),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(a){a?jQuery.readyWait++:jQuery.ready(!0)},ready:function(a){if(a===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(a!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}}),jQuery.ready.promise=function(a){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(a)},jQuery.ready.promise();var access=jQuery.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(jQuery.type(c)==="object"){e=!0;for(h in c)jQuery.access(a,b,h,c[h],!0,f,g)}else if(d!==undefined){e=!0,jQuery.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(jQuery(a),c)}));if(b)for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}return e?a:j?b.call(a):i?b(a[0],c):f};jQuery.acceptData=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(a){if(!Data.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=Data.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,jQuery.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(typeof b=="string")f[b]=c;else if(jQuery.isEmptyObject(f))jQuery.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return b===undefined?c:c[b]},access:function(a,b,c){var d;return b===undefined||b&&typeof b=="string"&&c===undefined?(d=this.get(a,b),d!==undefined?d:this.get(a,jQuery.camelCase(b))):(this.set(a,b,c),c!==undefined?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(b===undefined)this.cache[f]={};else{jQuery.isArray(b)?d=b.concat(b.map(jQuery.camelCase)):(e=jQuery.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(rnotwhite)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!jQuery.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(a){return data_user.hasData(a)||data_priv.hasData(a)},data:function(a,b,c){return data_user.access(a,b,c)},removeData:function(a,b){data_user.remove(a,b)},_data:function(a,b,c){return data_priv.access(a,b,c)},_removeData:function(a,b){data_priv.remove(a,b)}}),jQuery.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(a===undefined){if(this.length){e=data_user.get(f);if(f.nodeType===1&&!data_priv.get(f,"hasDataAttrs")){c=g.length;while(c--)d=g[c].name,d.indexOf("data-")===0&&(d=jQuery.camelCase(d.slice(5)),dataAttr(f,d,e[d]));data_priv.set(f,"hasDataAttrs",!0)}}return e}return typeof a=="object"?this.each(function(){data_user.set(this,a)}):access(this,function(b){var c,d=jQuery.camelCase(a);if(f&&b===undefined){c=data_user.get(f,a);if(c!==undefined)return c;c=data_user.get(f,d);if(c!==undefined)return c;c=dataAttr(f,d,undefined);if(c!==undefined)return c;return}this.each(function(){var c=data_user.get(this,d);data_user.set(this,d,b),a.indexOf("-")!==-1&&c!==undefined&&data_user.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){data_user.remove(this,a)})}}),jQuery.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=data_priv.get(a,b),c&&(!d||jQuery.isArray(c)?d=data_priv.access(a,b,jQuery.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=jQuery.queue(a,b),d=c.length,e=c.shift(),f=jQuery._queueHooks(a,b),g=function(){jQuery.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return data_priv.get(a,c)||data_priv.access(a,c,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(a,[b+"queue",c])})})}}),jQuery.fn.extend({queue:function(a,b){var c=2;return typeof a!="string"&&(b=a,a="fx",c--),arguments.length<c?jQuery.queue(this[0],a):b===undefined?this:this.each(function(){var c=jQuery.queue(this,a,b);jQuery._queueHooks(this,a),a==="fx"&&c[0]!=="inprogress"&&jQuery.dequeue(this,a)})},dequeue:function(a){return this.each(function(){jQuery.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=jQuery.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};typeof a!="string"&&(b=a,a=undefined),a=a||"fx";while(g--)c=data_priv.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(a,b){return a=b||a,jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var a=document.createDocumentFragment(),b=a.appendChild(document.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.get(a);if(!q)return;c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=jQuery.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof jQuery!==strundefined&&jQuery.event.triggered!==b.type?jQuery.event.dispatch.apply(a,arguments):undefined}),b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n)continue;l=jQuery.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=jQuery.event.special[n]||{},k=jQuery.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&jQuery.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,(!l.setup||l.setup.call(a,d,o,g)===!1)&&a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),jQuery.event.global[n]=!0}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.hasData(a)&&data_priv.get(a);if(!q||!(i=q.events))return;b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n){for(n in i)jQuery.event.remove(a,n+b[j],c,d,!0);continue}l=jQuery.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],(e||p===k.origType)&&(!c||c.guid===k.guid)&&(!h||h.test(k.namespace))&&(!d||d===k.selector||d==="**"&&k.selector)&&(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&((!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&jQuery.removeEvent(a,n,q.handle),delete i[n])}jQuery.isEmptyObject(i)&&(delete q.handle,data_priv.remove(a,"events"))},trigger:function(a,b,c,d){var e,f,g,h,i,j,k,l=[c||document],m=hasOwn.call(a,"type")?a.type:a,n=hasOwn.call(a,"namespace")?a.namespace.split("."):[];f=g=c=c||document;if(c.nodeType===3||c.nodeType===8)return;if(rfocusMorph.test(m+jQuery.event.triggered))return;m.indexOf(".")>=0&&(n=m.split("."),m=n.shift(),n.sort()),i=m.indexOf(":")<0&&"on"+m,a=a[jQuery.expando]?a:new jQuery.Event(m,typeof a=="object"&&a),a.isTrigger=d?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=undefined,a.target||(a.target=c),b=b==null?[a]:jQuery.makeArray(b,[a]),k=jQuery.event.special[m]||{};if(!d&&k.trigger&&k.trigger.apply(c,b)===!1)return;if(!d&&!k.noBubble&&!jQuery.isWindow(c)){h=k.delegateType||m,rfocusMorph.test(h+m)||(f=f.parentNode);for(;f;f=f.parentNode)l.push(f),g=f;g===(c.ownerDocument||document)&&l.push(g.defaultView||g.parentWindow||window)}e=0;while((f=l[e++])&&!a.isPropagationStopped())a.type=e>1?h:k.bindType||m,j=(data_priv.get(f,"events")||{})[a.type]&&data_priv.get(f,"handle"),j&&j.apply(f,b),j=i&&f[i],j&&j.apply&&jQuery.acceptData(f)&&(a.result=j.apply(f,b),a.result===!1&&a.preventDefault());return a.type=m,!d&&!a.isDefaultPrevented()&&(!k._default||k._default.apply(l.pop(),b)===!1)&&jQuery.acceptData(c)&&i&&jQuery.isFunction(c[m])&&!jQuery.isWindow(c)&&(g=c[i],g&&(c[i]=null),jQuery.event.triggered=m,c[m](),jQuery.event.triggered=undefined,g&&(c[i]=g)),a.result},dispatch:function(a){a=jQuery.event.fix(a);var b,c,d,e,f,g=[],h=slice.call(arguments),i=(data_priv.get(this,"events")||{})[a.type]||[],j=jQuery.event.special[a.type]||{};h[0]=a,a.delegateTarget=this;if(j.preDispatch&&j.preDispatch.call(this,a)===!1)return;g=jQuery.event.handlers.call(this,a,i),b=0;while((e=g[b++])&&!a.isPropagationStopped()){a.currentTarget=e.elem,c=0;while((f=e.handlers[c++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,d=((jQuery.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),d!==undefined&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation())}return j.postDispatch&&j.postDispatch.call(this,a),a.result},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click"))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||a.type!=="click"){d=[];for(c=0;c<h;c++)f=b[c],e=f.selector+" ",d[e]===undefined&&(d[e]=f.needsContext?jQuery(e,this).index(i)>=0:jQuery.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return a.pageX==null&&b.clientX!=null&&(c=a.target.ownerDocument||document,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.which&&f!==undefined&&(a.which=f&1?1:f&2?3:f&4?2:0),a}},fix:function(a){if(a[jQuery.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=rmouseEvent.test(e)?this.mouseHooks:rkeyEvent.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new jQuery.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=document),a.target.nodeType===3&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(a){return jQuery.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==undefined&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=jQuery.extend(new jQuery.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?jQuery.event.trigger(e,null,b):jQuery.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},jQuery.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},jQuery.Event=function(a,b){if(this instanceof jQuery.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===undefined&&a.getPreventDefault&&a.getPreventDefault()?returnTrue:returnFalse):this.type=a,b&&jQuery.extend(this,b),this.timeStamp=a&&a.timeStamp||jQuery.now(),this[jQuery.expando]=!0;else return new jQuery.Event(a,b)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=returnTrue,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=returnTrue,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){jQuery.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!jQuery.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){jQuery.event.simulate(b,a.target,jQuery.event.fix(a),!0)};jQuery.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b);e||d.addEventListener(a,c,!0),data_priv.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b)-1;e?data_priv.access(d,b,e):(d.removeEventListener(a,c,!0),data_priv.remove(d,b))}}}),jQuery.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a=="object"){typeof b!="string"&&(c=c||b,b=undefined);for(g in a)this.on(g,b,c,a[g],e);return this}c==null&&d==null?(d=b,c=b=undefined):d==null&&(typeof b=="string"?(d=c,c=undefined):(d=c,c=b,b=undefined));if(d===!1)d=returnFalse;else if(!d)return this;return e===1&&(f=d,d=function(a){return jQuery().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,jQuery(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof a=="object"){for(e in a)this.off(e,b,a[e]);return this}if(b===!1||typeof b=="function")c=b,b=undefined;return c===!1&&(c=returnFalse),this.each(function(){jQuery.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){jQuery.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return jQuery.event.trigger(a,b,c,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=jQuery.contains(a.ownerDocument,a);if(!support.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){g=getAll(h),f=getAll(a);for(d=0,e=f.length;d<e;d++)fixInput(f[d],g[d])}if(b)if(c){f=f||getAll(a),g=g||getAll(h);for(d=0,e=f.length;d<e;d++)cloneCopyEvent(f[d],g[d])}else cloneCopyEvent(a,h);return g=getAll(h,"script"),g.length>0&&setGlobalEval(g,!i&&getAll(a,"script")),h},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;for(;m<n;m++){e=a[m];if(e||e===0)if(jQuery.type(e)==="object")jQuery.merge(l,e.nodeType?[e]:e);else if(!rhtml.test(e))l.push(b.createTextNode(e));else{f=f||k.appendChild(b.createElement("div")),g=(rtagName.exec(e)||["",""])[1].toLowerCase(),h=wrapMap[g]||wrapMap._default,f.innerHTML=h[1]+e.replace(rxhtmlTag,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;jQuery.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}}k.textContent="",m=0;while(e=l[m++]){if(d&&jQuery.inArray(e,d)!==-1)continue;i=jQuery.contains(e.ownerDocument,e),f=getAll(k.appendChild(e),"script"),i&&setGlobalEval(f);if(c){j=0;while(e=f[j++])rscriptType.test(e.type||"")&&c.push(e)}}return k},cleanData:function(a){var b,c,d,e,f,g,h=jQuery.event.special,i=0;for(;(c=a[i])!==undefined;i++){if(jQuery.acceptData(c)){f=c[data_priv.expando];if(f&&(b=data_priv.cache[f])){d=Object.keys(b.events||{});if(d.length)for(g=0;(e=d[g])!==undefined;g++)h[e]?jQuery.event.remove(c,e):jQuery.removeEvent(c,e,b.handle);data_priv.cache[f]&&delete data_priv.cache[f]}}delete data_user.cache[c[data_user.expando]]}}}),jQuery.fn.extend({text:function(a){return access(this,function(a){return a===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){var c,d=a?jQuery.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++)!b&&c.nodeType===1&&jQuery.cleanData(getAll(c)),c.parentNode&&(b&&jQuery.contains(c.ownerDocument,c)&&setGlobalEval(getAll(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++)a.nodeType===1&&(jQuery.cleanData(getAll(a,!1)),a.textContent="");return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return jQuery.clone(this,a,b)})},html:function(a){return access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined&&b.nodeType===1)return b.innerHTML;if(typeof a=="string"&&!rnoInnerhtml.test(a)&&!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rxhtmlTag,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},b.nodeType===1&&(jQuery.cleanData(getAll(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,jQuery.cleanData(getAll(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=concat.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=jQuery.isFunction(m);if(n||j>1&&typeof m=="string"&&!support.checkClone&&rchecked.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j){c=jQuery.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,c.childNodes.length===1&&(c=d);if(d){e=jQuery.map(getAll(c,"script"),disableScript),f=e.length;for(;i<j;i++)g=c,i!==l&&(g=jQuery.clone(g,!0,!0),f&&jQuery.merge(e,getAll(g,"script"))),b.call(this[i],g,i);if(f){h=e[e.length-1].ownerDocument,jQuery.map(e,restoreScript);for(i=0;i<f;i++)g=e[i],rscriptType.test(g.type||"")&&!data_priv.access(g,"globalEval")&&jQuery.contains(h,g)&&(g.src?jQuery._evalUrl&&jQuery._evalUrl(g.src):jQuery.globalEval(g.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(a){var c,d=[],e=jQuery(a),f=e.length-1,g=0;for(;g<=f;g++)c=g===f?this:this.clone(!0),jQuery(e[g])[b](c),push.apply(d,c.get());return this.pushStack(d)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",d.appendChild(e);var c=window.getComputedStyle(f,null);a=c.top!=="1%",b=c.width==="4px",d.removeChild(e)}var a,b,c="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",d=document.documentElement,e=document.createElement("div"),f=document.createElement("div");f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=f.style.backgroundClip==="content-box",e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(f),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return g(),a},boxSizingReliable:function(){return b==null&&g(),b},reliableMarginRight:function(){var a,b=f.appendChild(document.createElement("div"));return b.style.cssText=f.style.cssText=c,b.style.marginRight=b.style.width="0",f.style.width="1px",d.appendChild(e),a=!parseFloat(window.getComputedStyle(b,null).marginRight),d.removeChild(e),f.innerHTML="",a}})})(),jQuery.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=curCSS(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var e,f,g,h=jQuery.camelCase(b),i=a.style;b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(i,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h];if(c===undefined)return g&&"get"in g&&(e=g.get(a,!1,d))!==undefined?e:i[b];f=typeof c,f==="string"&&(e=rrelNum.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(jQuery.css(a,b)),f="number");if(c==null||c!==c)return;f==="number"&&!jQuery.cssNumber[h]&&(c+="px"),!support.clearCloneStyle&&c===""&&b.indexOf("background")===0&&(i[b]="inherit");if(!g||!("set"in g)||(c=g.set(a,c,d))!==undefined)i[b]="",i[b]=c},css:function(a,b,c,d){var e,f,g,h=jQuery.camelCase(b);return b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(a.style,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),e===undefined&&(e=curCSS(a,b,d)),e==="normal"&&b in cssNormalTransform&&(e=cssNormalTransform[b]),c===""||c?(f=parseFloat(e),c===!0||jQuery.isNumeric(f)?f||0:e):e}}),jQuery.each(["height","width"],function(a,b){jQuery.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&rdisplayswap.test(jQuery.css(a,"display"))?jQuery.swap(a,cssShow,function(){return getWidthOrHeight(a,b,d)}):getWidthOrHeight(a,b,d)},set:function(a,c,d){var e=d&&getStyles(a);return setPositiveNumber(a,c,d?augmentWidthOrHeight(a,b,d,jQuery.css(a,"boxSizing",!1,e)==="border-box",e):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(a,b){if(b)return jQuery.swap(a,{display:"inline-block"},curCSS,[a,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(a,b){jQuery.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c=="string"?c.split(" "):[c];for(;d<4;d++)e[a+cssExpand[d]+b]=f[d]||f[d-2]||f[0];return e}},rmargin.test(a)||(jQuery.cssHooks[a+b].set=setPositiveNumber)}),jQuery.fn.extend({css:function(a,b){return access(this,function(a,b,c){var d,e,f={},g=0;if(jQuery.isArray(b)){d=getStyles(a),e=b.length;for(;g<e;g++)f[b[g]]=jQuery.css(a,b[g],!1,d);return f}return c!==undefined?jQuery.style(a,b,c):jQuery.css(a,b)},a,b,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(jQuery.cssNumber[c]?"":"px")},cur:function(){var a=Tween.propHooks[this.prop];return a&&a.get?a.get(this):Tween.propHooks._default.get(this)},run:function(a){var b,c=Tween.propHooks[this.prop];return this.options.duration?this.pos=b=jQuery.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=jQuery.css(a.elem,a.prop,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){jQuery.fx.step[a.prop]?jQuery.fx.step[a.prop](a):a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])?jQuery.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},jQuery.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=rfxnum.exec(b),f=e&&e[3]||(jQuery.cssNumber[a]?"":"px"),g=(jQuery.cssNumber[a]||f!=="px"&&+d)&&rfxnum.exec(jQuery.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,jQuery.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&h!==1&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(a,b){jQuery.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],tweeners[c]=tweeners[c]||[],tweeners[c].unshift(b)},prefilter:function(a,b){b?animationPrefilters.unshift(a):animationPrefilters.push(a)}}),jQuery.speed=function(a,b,c){var d=a&&typeof a=="object"?jQuery.extend({},a):{complete:c||!c&&b||jQuery.isFunction(a)&&a,duration:a,easing:c&&b||b&&!jQuery.isFunction(b)&&b};d.duration=jQuery.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){jQuery.isFunction(d.old)&&d.old.call(this),d.queue&&jQuery.dequeue(this,d.queue)},d},jQuery.fn.extend({fadeTo:function(a,b,c,d){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=jQuery.isEmptyObject(a),f=jQuery.speed(b,c,d),g=function(){var b=Animation(this,jQuery.extend({},a),f);(e||data_priv.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return typeof a!="string"&&(c=b,b=a,a=undefined),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=a!=null&&a+"queueHooks",f=jQuery.timers,g=data_priv.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rrun.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem===this&&(a==null||f[e].queue===a)&&(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&jQuery.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=data_priv.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=jQuery.timers,g=d?d.length:0;c.finish=!0,jQuery.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),jQuery.each(["toggle","show","hide"],function(a,b){var c=jQuery.fn[b];jQuery.fn[b]=function(a,d,e){return a==null||typeof a=="boolean"?c.apply(this,arguments):this.animate(genFx(b,!0),a,d,e)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){jQuery.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),jQuery.timers=[],jQuery.fx.tick=function(){var a,b=0,c=jQuery.timers;fxNow=jQuery.now();for(;b<c.length;b++)a=c[b],!a()&&c[b]===a&&c.splice(b--,1);c.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(a){jQuery.timers.push(a),a()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(a,b){return a=jQuery.fx?jQuery.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=document.createElement("input"),b=document.createElement("select"),c=b.appendChild(document.createElement("option"));a.type="checkbox",support.checkOn=a.value!=="",support.optSelected=c.selected,b.disabled=!0,support.optDisabled=!c.disabled,a=document.createElement("input"),a.value="t",a.type="radio",support.radioValue=a.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(a,b){return access(this,jQuery.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){jQuery.removeAttr(this,a)})}}),jQuery.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2)return;if(typeof a.getAttribute===strundefined)return jQuery.prop(a,b,c);if(f!==1||!jQuery.isXMLDoc(a))b=b.toLowerCase(),d=jQuery.attrHooks[b]||(jQuery.expr.match.bool.test(b)?boolHook:nodeHook);if(c===undefined)return d&&"get"in d&&(e=d.get(a,b))!==null?e:(e=jQuery.find.attr(a,b),e==null?undefined:e);if(c===null)jQuery.removeAttr(a,b);else return d&&"set"in d&&(e=d.set(a,c,b))!==undefined?e:(a.setAttribute(b,c+""),c)},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(rnotwhite);if(f&&a.nodeType===1)while(c=f[e++])d=jQuery.propFix[c]||c,jQuery.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!support.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),boolHook={set:function(a,b,c){return b===!1?jQuery.removeAttr(a,c):a.setAttribute(c,c),c}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(a,b){var c=attrHandle[b]||jQuery.find.attr;attrHandle[b]=function(a,b,d){var e,f;return d||(f=attrHandle[b],attrHandle[b]=e,e=c(a,b,d)!=null?b.toLowerCase():null,attrHandle[b]=f),e}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(a,b){return access(this,jQuery.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[jQuery.propFix[a]||a]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;return f=g!==1||!jQuery.isXMLDoc(a),f&&(b=jQuery.propFix[b]||b,e=jQuery.propHooks[b]),c!==undefined?e&&"set"in e&&(d=e.set(a,c,b))!==undefined?d:a[b]=c:e&&"get"in e&&(d=e.get(a,b))!==null?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||rfocusable.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).addClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):" ");if(d){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=jQuery.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=arguments.length===0||typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).removeClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):"");if(d){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?jQuery.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return typeof b=="boolean"&&c==="string"?b?this.addClass(a):this.removeClass(a):jQuery.isFunction(a)?this.each(function(c){jQuery(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var b,d=0,e=jQuery(this),f=a.match(rnotwhite)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else if(c===strundefined||c==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||a===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(rclass," ").indexOf(b)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e)return b=jQuery.valHooks[e.type]||jQuery.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&(c=b.get(e,"value"))!==undefined?c:(c=e.value,typeof c=="string"?c.replace(rreturn,""):c==null?"":c);return}return d=jQuery.isFunction(a),this.each(function(c){var e;if(this.nodeType!==1)return;d?e=a.call(this,c,jQuery(this).val()):e=a,e==null?e="":typeof e=="number"?e+="":jQuery.isArray(e)&&(e=jQuery.map(e,function(a){return a==null?"":a+""})),b=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,e,"value")===undefined)this.value=e})}}),jQuery.extend({valHooks:{select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!jQuery.nodeName(c.parentNode,"optgroup"))){b=jQuery(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=jQuery.makeArray(b),g=e.length;while(g--){d=e[g];if(d.selected=jQuery.inArray(jQuery(d).val(),f)>=0)c=!0}return c||(a.selectedIndex=-1),f}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(a,b){if(jQuery.isArray(b))return a.checked=jQuery.inArray(jQuery(a).val(),b)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){jQuery.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),jQuery.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(a){return JSON.parse(a+"")},jQuery.parseXML=function(a){var b,c;if(!a||typeof a!="string")return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=undefined}return(!b||b.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+a),b};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):ajaxExtend(jQuery.ajaxSettings,a)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(a,b){function w(a,b,f,h){var j,q,r,t,v,w=b;if(s===2)return;s=2,g&&clearTimeout(g),c=undefined,e=h||"",u.readyState=a>0?4:0,j=a>=200&&a<300||a===304,f&&(t=ajaxHandleResponses(k,u,f)),t=ajaxConvert(k,t,u,j);if(j)k.ifModified&&(v=u.getResponseHeader("Last-Modified"),v&&(jQuery.lastModified[d]=v),v=u.getResponseHeader("etag"),v&&(jQuery.etag[d]=v)),a===204||k.type==="HEAD"?w="nocontent":a===304?w="notmodified":(w=t.state,q=t.data,r=t.error,j=!r);else{r=w;if(a||!w)w="error",a<0&&(a=0)}u.status=a,u.statusText=(b||w)+"",j?n.resolveWith(l,[q,w,u]):n.rejectWith(l,[u,w,r]),u.statusCode(p),p=undefined,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[u,k,j?q:r]),o.fireWith(l,[u,w]),i&&(m.trigger("ajaxComplete",[u,k]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof a=="object"&&(b=a,a=undefined),b=b||{};var c,d,e,f,g,h,i,j,k=jQuery.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?jQuery(l):jQuery.event,n=jQuery.Deferred(),o=jQuery.Callbacks("once memory"),p=k.statusCode||{},q={},r={},s=0,t="canceled",u={readyState:0,getResponseHeader:function(a){var b;if(s===2){if(!f){f={};while(b=rheaders.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return s===2?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return s||(a=r[c]=r[c]||a,q[a]=b),this},overrideMimeType:function(a){return s||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(s<2)for(b in a)p[b]=[p[b],a[b]];else u.always(a[u.status]);return this},abort:function(a){var b=a||t;return c&&c.abort(b),w(0,b),this}};n.promise(u).complete=o.add,u.success=u.done,u.error=u.fail,k.url=((a||k.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=jQuery.trim(k.dataType||"*").toLowerCase().match(rnotwhite)||[""],k.crossDomain==null&&(h=rurl.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ajaxLocParts[1]&&h[2]===ajaxLocParts[2]&&(h[3]||(h[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),k.data&&k.processData&&typeof k.data!="string"&&(k.data=jQuery.param(k.data,k.traditional)),inspectPrefiltersOrTransports(prefilters,k,b,u);if(s===2)return u;i=k.global,i&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!rnoContent.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(rquery.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=rts.test(d)?d.replace(rts,"$1_="+nonce++):d+(rquery.test(d)?"&":"?")+"_="+nonce++)),k.ifModified&&(jQuery.lastModified[d]&&u.setRequestHeader("If-Modified-Since",jQuery.lastModified[d]),jQuery.etag[d]&&u.setRequestHeader("If-None-Match",jQuery.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&u.setRequestHeader("Content-Type",k.contentType),u.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)u.setRequestHeader(j,k.headers[j]);if(!k.beforeSend||k.beforeSend.call(l,u,k)!==!1&&s!==2){t="abort";for(j in{success:1,error:1,complete:1})u[j](k[j]);c=inspectPrefiltersOrTransports(transports,k,b,u);if(!c)w(-1,"No Transport");else{u.readyState=1,i&&m.trigger("ajaxSend",[u,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){u.abort("timeout")},k.timeout));try{s=1,c.send(q,w)}catch(v){if(s<2)w(-1,v);else throw v}}return u}return u.abort()},getJSON:function(a,b,c){return jQuery.get(a,b,c,"json")},getScript:function(a,b){return jQuery.get(a,undefined,b,"script")}}),jQuery.each(["get","post"],function(a,b){jQuery[b]=function(a,c,d,e){return jQuery.isFunction(c)&&(e=e||d,d=c,c=undefined),jQuery.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){jQuery.fn[b]=function(a){return this.on(b,a)}}),jQuery._evalUrl=function(a){return jQuery.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(a){var b;return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapAll(a.call(this,b))}):(this[0]&&(b=jQuery(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapInner(a.call(this,b))}):this.each(function(){var b=jQuery(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=jQuery.isFunction(a);return this.each(function(c){jQuery(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},jQuery.expr.filters.visible=function(a){return!jQuery.expr.filters.hidden(a)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,b){var c,d=[],e=function(a,b){b=jQuery.isFunction(b)?b():b==null?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===undefined&&(b=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){e(this.name,this.value)});else for(c in a)buildParams(c,a[c],b,e);return d.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=jQuery.prop(this,"elements");return a?jQuery.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&(this.checked||!rcheckableType.test(a))}).map(function(a,b){var c=jQuery(this).val();return c==null?null:jQuery.isArray(c)?jQuery.map(c,function(a){return{name:b.name,value:a.replace(rCRLF,"\r\n")}}):{name:b.name,value:c.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.ActiveXObject&&jQuery(window).on("unload",function(){for(var a in xhrCallbacks)xhrCallbacks[a]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(a){var b;if(support.cors||xhrSupported&&!a.crossDomain)return{send:function(c,d){var e,f=a.xhr(),g=++xhrId;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete xhrCallbacks[g],b=f.onload=f.onerror=null,a==="abort"?f.abort():a==="error"?d(f.status,f.statusText):d(xhrSuccessStatus[f.status]||f.status,f.statusText,typeof f.responseText=="string"?{text:f.responseText}:undefined,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=xhrCallbacks[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return jQuery.globalEval(a),a}}}),jQuery.ajaxPrefilter("script",function(a){a.cache===undefined&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),jQuery.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=jQuery("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e(a.type==="error"?404:200,a.type)}),document.head.appendChild(b[0])},abort:function(){c&&c()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[a]=!0,a}}),jQuery.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=a.jsonp!==!1&&(rjsonp.test(a.url)?"url":typeof a.data=="string"&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(a.data)&&"data");if(g||a.dataTypes[0]==="jsonp")return d=a.jsonpCallback=jQuery.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(rjsonp,"$1"+d):a.jsonp!==!1&&(a.url+=(rquery.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return f||jQuery.error(d+" was not called"),f[0]},a.dataTypes[0]="json",e=window[d],window[d]=function(){f=arguments},c.always(function(){window[d]=e,a[d]&&(a.jsonpCallback=b.jsonpCallback,oldCallbacks.push(d)),f&&jQuery.isFunction(e)&&e(f[0]),f=e=undefined}),"script"}),jQuery.parseHTML=function(a,b,c){if(!a||typeof a!="string")return null;typeof b=="boolean"&&(c=b,b=!1),b=b||document;var d=rsingleTag.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=jQuery.buildFragment([a],b,e),e&&e.length&&jQuery(e).remove(),jQuery.merge([],d.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(a,b,c){if(typeof a!="string"&&_load)return _load.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),jQuery.isFunction(b)?(c=b,b=undefined):b&&typeof b=="object"&&(e="POST"),g.length>0&&jQuery.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?jQuery("<div>").append(jQuery.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},jQuery.expr.filters.animated=function(a){return jQuery.grep(jQuery.timers,function(b){return a===b.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=jQuery.css(a,"position"),l=jQuery(a),m={};k==="static"&&(a.style.position="relative"),h=l.offset(),f=jQuery.css(a,"top"),i=jQuery.css(a,"left"),j=(k==="absolute"||k==="fixed")&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),jQuery.isFunction(b)&&(b=b.call(a,c,h)),b.top!=null&&(m.top=b.top-h.top+g),b.left!=null&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},jQuery.fn.extend({offset:function(a){if(arguments.length)return a===undefined?this:this.each(function(b){jQuery.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(!f)return;return b=f.documentElement,jQuery.contains(b,d)?(typeof d.getBoundingClientRect!==strundefined&&(e=d.getBoundingClientRect()),c=getWindow(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(!this[0])return;var a,b,c=this[0],d={top:0,left:0};return jQuery.css(c,"position")==="fixed"?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),jQuery.nodeName(a[0],"html")||(d=a.offset()),d.top+=jQuery.css(a[0],"borderTopWidth",!0),d.left+=jQuery.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-jQuery.css(c,"marginTop",!0),left:b.left-d.left-jQuery.css(c,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||docElem;while(a&&!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")a=a.offsetParent;return a||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;jQuery.fn[a]=function(d){return access(this,function(a,d,e){var f=getWindow(a);if(e===undefined)return f?f[b]:a[d];f?f.scrollTo(c?window.pageXOffset:e,c?e:window.pageYOffset):a[d]=e},a,d,arguments.length,null)}}),jQuery.each(["top","left"],function(a,b){jQuery.cssHooks[b]=addGetHookIf(support.pixelPosition,function(a,c){if(c)return c=curCSS(a,b),rnumnonpx.test(c)?jQuery(a).position()[b]+"px":c})}),jQuery.each({Height:"height",Width:"width"},function(a,b){jQuery.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){jQuery.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!="boolean"),g=c||(d===!0||e===!0?"margin":"border");return access(this,function(b,c,d){var e;return jQuery.isWindow(b)?b.document.documentElement["client"+a]:b.nodeType===9?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):d===undefined?jQuery.css(b,c,g):jQuery.style(b,c,d,g)},b,f?d:undefined,f,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&
define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(a){return window.$===jQuery&&(window.$=_$),a&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery});var requirejs,require,define,__inflate;(function(a){function i(a,b){var c=b&&b.split("/"),e=d.map,f=e&&e["*"]||{},g,h,i,j,k,l,m;if(a&&a.charAt(0)==="."&&b){c=c.slice(0,c.length-1),a=c.concat(a.split("/"));for(k=0;m=a[k];k++)if(m===".")a.splice(k,1),k-=1;else if(m==="..")if(k!==1||a[2]!==".."&&a[0]!=="..")k>0&&(a.splice(k-1,2),k-=2);else return!0;a=a.join("/")}if((c||f)&&e){g=a.split("/");for(k=g.length;k>0;k-=1){h=g.slice(0,k).join("/");if(c)for(l=c.length;l>0;l-=1){i=e[c.slice(0,l).join("/")];if(i){i=i[h];if(i){j=i;break}}}j=j||f[h];if(j){g.splice(0,k,j),a=g.join("/");break}}}return a}function j(b,c){return function(){return h.apply(a,f.call(arguments,0).concat([b,c]))}}function k(a){return function(b){return i(b,a)}}function l(a){return function(c){b[a]=c}}function m(d){if(c.hasOwnProperty(d)){var f=c[d];delete c[d],e[d]=!0,g.apply(a,f)}if(!b.hasOwnProperty(d))throw new Error("No "+d);return b[d]}function n(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=i(a.slice(0,e),b),a=a.slice(e+1),d=m(c),d&&d.normalize?a=d.normalize(a,k(b)):a=i(a,b)):a=i(a,b),{f:c?c+"!"+a:a,n:a,p:d}}function o(a){return function(){return d&&d.config&&d.config[a]||{}}}var b={},c={},d={},e={},f=[].slice,g,h;g=function(d,f,g,h){var i=[],k,p,q,r,s,t;h=h||d,typeof g=="string"&&(g=__inflate(d,g));if(typeof g=="function"){f=!f.length&&g.length?["require","exports","module"]:f;for(t=0;t<f.length;t++){s=n(f[t],h),q=s.f;if(q==="require")i[t]=j(d);else if(q==="exports")i[t]=b[d]={},k=!0;else if(q==="module")p=i[t]={id:d,uri:"",exports:b[d],config:o(d)};else if(b.hasOwnProperty(q)||c.hasOwnProperty(q))i[t]=m(q);else if(s.p)s.p.load(s.n,j(h,!0),l(q),{}),i[t]=b[q];else if(!e[q])throw new Error(d+" missing "+q)}r=g.apply(b[d],i);if(d)if(p&&p.exports!==a&&p.exports!==b[d])b[d]=p.exports;else if(r!==a||!k)b[d]=r}else d&&(b[d]=g)},requirejs=require=h=function(b,c,e,f){return typeof b=="string"?m(n(b,c).f):(b.splice||(d=b,c.splice?(b=c,c=e,e=null):b=a),c=c||function(){},f?g(a,b,c,e):setTimeout(function(){g(a,b,c,e)},15),h)},h.config=function(a){return d=a,h},define=function(a,b,d){b.splice||(d=b,b=[]),c[a]=[a,b,d]},define.amd={jQuery:!0}})(),__inflate=function(name,src){var r;return eval(["r = function(a,b,c){","\n};\n//@ sourceURL="+name+"\n"].join(src)),r},define.unordered=!0,function(a){typeof define=="function"&&define.amd?define(["jquery"],a):typeof exports=="object"?module.exports=a:a(jQuery)}(function(a){function i(b){var c=b||window.event,g=d.call(arguments,1),h=0,i=0,l=0,m=0,n=0,o=0;b=a.event.fix(c),b.type="mousewheel","detail"in c&&(l=c.detail*-1),"wheelDelta"in c&&(l=c.wheelDelta),"wheelDeltaY"in c&&(l=c.wheelDeltaY),"wheelDeltaX"in c&&(i=c.wheelDeltaX*-1),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(i=l*-1,l=0),h=l===0?i:l,"deltaY"in c&&(l=c.deltaY*-1,h=l),"deltaX"in c&&(i=c.deltaX,l===0&&(h=i*-1));if(l===0&&i===0)return;if(c.deltaMode===1){var p=a.data(this,"mousewheel-line-height");h*=p,l*=p,i*=p}else if(c.deltaMode===2){var q=a.data(this,"mousewheel-page-height");h*=q,l*=q,i*=q}m=Math.max(Math.abs(l),Math.abs(i));if(!f||m<f)f=m,k(c,m)&&(f/=40);k(c,m)&&(h/=40,i/=40,l/=40),h=Math[h>=1?"floor":"ceil"](h/f),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f);var r=this.getBoundingClientRect();return n=b.clientX-r.left,o=b.clientY-r.top,b.deltaX=i,b.deltaY=l,b.deltaFactor=f,b.offsetX=n,b.offsetY=o,b.deltaMode=0,g.unshift(b,h,i,l),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&a.type==="mousewheel"&&b%120===0}var b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice,e,f;if(a.event.fixHooks)for(var g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;var h=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],i,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a,b){function m(a,b,c){return[parseInt(a[0],10)*(k.test(a[0])?b/100:1),parseInt(a[1],10)*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return c.nodeType===9?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+%?/,j=/^\w+/,k=/%$/,l=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e=c==="scroll"||c==="auto"&&b.width<b.element[0].scrollWidth,f=d==="scroll"||d==="auto"&&b.height<b.element[0].scrollHeight;return{width:e?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),c,d;a.length===1&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),w.length===1&&(w[1]=w[0]),b.at[0]==="right"?r.left+=k:b.at[0]==="center"&&(r.left+=k/2),b.at[1]==="bottom"?r.top+=p:b.at[1]==="center"&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());b.my[0]==="right"?A.left-=j:b.my[0]==="center"&&(A.left-=j/2),b.my[1]==="bottom"?A.top-=l:b.my[1]==="center"&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:f<0?"left":c>0?"right":"center",vertical:h<0?"top":g>0?"bottom":"middle"};k<j&&e(c+f)<k&&(m.horizontal="center"),p<l&&e(g+h)<p&&(m.vertical="middle"),d(e(c),e(f))>d(e(g),e(h))?m.important="horizontal":m.important="vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e,j;b.collisionWidth>f?h>0&&i<=0?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):i>0&&h<=0?a.left=e:h>i?a.left=e+f-b.collisionWidth:a.left=e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e,j;b.collisionHeight>f?h>0&&i<=0?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):i>0&&h<=0?a.top=e:h>i?a.top=e+f-b.collisionHeight:a.top=e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){b.elem.removeClass("ui-flipped-left ui-flipped-right");var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,l=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,m=-2*b.offset[0],n,o;if(i<0){n=a.left+k+l+m+b.collisionWidth-f-d;if(n<0||n<e(i))a.left+=k+l+m,b.elem.addClass("ui-flipped-right")}else if(j>0){o=a.left-b.collisionPosition.marginLeft+k+l+m-g;if(o>0||e(o)<j)a.left+=k+l+m,b.elem.addClass("ui-flipped-left")}},top:function(a,b){b.elem.removeClass("ui-flipped-top ui-flipped-bottom");var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k=b.my[1]==="top",l=k?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,n=-2*b.offset[1],o,p;i<0?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(p<0||p<e(i))&&(b.elem.addClass("ui-flipped-bottom"),a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(b.elem.addClass("ui-flipped-top"),a.top+=l+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&e<11,b.innerHTML="",c.removeChild(b)}(),a.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(jQuery)}(jQuery),jQuery.whenAll=function(a){if(a&&a.length){var b=jQuery.Deferred(),c=a.length,d=!1,e=[],f,g;return g=function(a){e[a]=[].slice.call(arguments,1),--c||b[d?"reject":"resolve"].apply(b,e)},f=function(){d=!0},e.length=a.length,a.forEach(function(a,b){a.fail(f).always(g.bind(null,b))}),b}return jQuery.Deferred().resolve()},function(a){window.XDomainRequest&&a.ajaxTransport(function(b){if(b.crossDomain&&b.async){b.timeout&&(b.xdrTimeout=b.timeout,delete b.timeout);var c;return{send:function(d,e){function g(b,d,f,g){c.onload=c.onerror=c.ontimeout=a.noop,c=undefined,e(b,d,f,g)}var f;d.Authorization&&(f=d.Authorization.split(" ")[1],b.url=b.url.replace(/\?|(.)$/,"$1?oauth_token="+f+"&")),c=new window.XDomainRequest,c.open(b.type,b.url),c.onload=function(){g(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)},c.onerror=function(){g(404,"Not Found")},b.xdrTimeout&&(c.ontimeout=function(){g(0,"timeout")},c.timeout=b.xdrTimeout),c.send(b.hasContent&&b.data||null)},abort:function(){c&&(c.onerror=a.noop(),c.abort())}}}})}(jQuery),Array.prototype.every||(Array.prototype.every=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)if(e in b&&!a.call(d,b[e],e,b))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=[],e=arguments[1];for(var f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)e in b&&a.call(d,b[e],e,b)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=0;arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:d!==0&&d!==Infinity&&d!==-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;var e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:d!==0&&d!==Infinity&&d!==-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));var e=d>=0?Math.min(d,c-1):c-Math.abs(d);for(;e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.map||(Array.prototype.map=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=new Array(c),e=arguments[1];for(var f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;if(c==0&&arguments.length==1)throw new TypeError;var d=0,e;if(arguments.length>=2)e=arguments[1];else do{if(d in b){e=b[d++];break}if(++d>=c)throw new TypeError}while(!0);while(d<c)d in b&&(e=a.call(undefined,e,b[d],d,b)),d++;return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;if(c===0&&arguments.length===1)throw new TypeError;var d=c-1,e;if(arguments.length>=2)e=arguments[1];else do{if(d in this){e=this[d--];break}if(--d<0)throw new TypeError}while(!0);while(d>=0)d in b&&(e=a.call(undefined,e,b[d],d,b)),d--;return e}),Array.prototype.some||(Array.prototype.some=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),Date.now||(Date.now=function(){return+(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){var a=function(b,c){return c=c||2,(b+="",b.length===c)?b:a("0"+b,c)};return function(){var b=this.getUTCFullYear();b=(b<0?"-":b>9999?"+":"")+("00000"+Math.abs(b)).slice(0<=b&&b<=9999?-4:-6);var c=[b,a(this.getUTCMonth()+1),a(this.getUTCDate())].join("-"),d=[a(this.getUTCHours()),a(this.getUTCMinutes()),a(this.getUTCSeconds())].join(":")+"."+a(this.getUTCMilliseconds(),3);return[c,d].join("T")+"Z"}}()),Date.prototype.toJSON||(Date.prototype.toJSON=Date.prototype.toJSON),Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){if(e.prototype&&this instanceof e){var f=d.apply(new e,c.concat(b.call(arguments)));return Object(f)===f?f:d}return d.apply(a,c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),function(){"use strict";var a=function(a){if(a!==Object(a))throw new TypeError("Object.getPrototypeOf called on non-object")};Object.getPrototypeOf||(typeof "test".__proto__=="object"?Object.getPrototypeOf=function(b){return a(b),b.__proto__}:Object.getPrototypeOf=function(b){return a(b),b.constructor.prototype})}(),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),String.prototype.trim||(String.prototype.trim=function(){var a=/^\s+/,b=/\s+$/;return function(){return this.replace(a,"").replace(b,"")}}()),function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function j(){if(!a&&this.initialize)return this.initialize.apply(this,arguments)}var d=this.prototype,e,f,g,h;a=!0;var i=new this;a=!1,Object.prototype.toString.call(c)!=="[object Array]"?h=[c]:h=c;for(f=0,g=h.length;f<g;++f){c=h[f];for(e in c)i[e]=typeof c[e]=="function"&&typeof d[e]=="function"&&b.test(c[e])?function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);return this._super=c,e}}(e,c[e]):c[e]}return j.prototype=i,j.prototype.constructor=j,j.extend=arguments.callee,j}}(),function(a){var b={millisecond:1,sec:1e3,min:60,hour:60,day:24,month:30,year:12},c=["January","February","March","April","May","June","July","August","September","October","November","December"];a.toRelativeTime=function(a){var c=Date.now()-this,d=c>0,e,f=null;a=a&&parseInt(a,10)||1e3,c=Math.abs(c);if(c<=a)return d?"Just now":"Right now";for(e in b)if(b.hasOwnProperty(e)){if(c<b[e])break;f=e,c/=b[e]}return c=Math.floor(c),c!==1&&(f+="s"),[d?"":"In",c,f].filter(Boolean).join(" ")},a.format=function(a){var b,d,e,f;if(a==="relative")return this.toRelativeTime();b=this.getDate(),d=this.getMonth(),e=this.getFullYear(),f=("0"+this.getMinutes()).substr(-2);switch(a){case"readable":return b+" "+c[d]+" "+e;case"readable_time":return[b,c[d],e,[this.getHours(),f].join(":")].join(" ");default:return b+"/"+(d+1)+"/"+e}},Date.fromString=function(a){return new Date(Date.parse(a))}}(Date.prototype),function(a,b,c){function d(a,b,d,f){if(a[b])return;var g=e(b);c.some(function(c){return f&&(c=e(c)),a[b]=a[c+g],a[b]}),a[b]=a[b]||d}function e(a){return a&&(a=a[0].toUpperCase()+a.substr(1)),a}d(a,"requestAnimationFrame",function(b){return a.setTimeout(b,16)}),d(a,"cancelAnimationFrame",function(b){a.clearTimeout(b)})}(window,navigator,["webkit","moz","o","ms"]),jQuery.extend(jQuery.expr[":"],{data:function(a,b,c){return!!$.data(a,c[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),c=$.attr(a,"tabindex");return(/input|select|textarea|button|object/.test(b)?!a.disabled:b==="a"||b==="area"?a.href||!isNaN(c):!isNaN(c))&&!$(a)[b==="area"?"parents":"closest"](":hidden").length},tabbable:function(a){var b=$.attr(a,"tabindex");return(isNaN(b)||b>=0)&&$(a).is(":focusable")}}),
define("application",["require","exports","module","_","lib/ad-manager","lib/api/api-bridge","lib/api-wrapper","models/audio-ad","backbone","vendor/color/color","config","lib/connect","views/buttons/cookie-policy","config/widget-params","config/error-messages","lib/event-bus","vendor/event-logger/event-logger","models/exception","config/experiments","vendor/experiments/experiments","vendor/fastclick","lib/flash-widget","lib/global-xhr-handlers","lib/lingua","lib/loader","lib/persistent-store","models/playlist","collections/playlist-sounds","lib/play-manager","lib/views/progress","tracking-events","router","config/routes","lib/support","lib/tracking","lib/url","models/user","lib/view"],function(a,b,c){function O(){var a;a=L.extend({template:function(){return""}}),u.attach(document.body),g.initialize(w),f.start(),p.on("widget:ready",P).on("error:geo_blocked",Q).on("error:no_stream_info",Q).on("error:audio_support",R).on("audio:play",S).on("audio:play-intent",S).on("exception",T).on("broadcast:audio:play",V).on("sound:deeplink",W),k.set("me",Z()).set("router",(new F).setRoutes(G)).set("appView",(new a({el:$(N)})).render()).set("widgetParams",Y()),bd(),e.setAudioAd(h),C.setAdManager(e),e.on("ad:play",S),$(window).on("error",U),ba(),X().done(I.init).done(function(){x.getLocale()==="pt"&&p.trigger(E.MISC.PT_LOCAL_USED)}),$.whenAll([_(),bb()]).always(function(){i.history.start({hashChange:!1,pushState:!0,root:k.get("app_root")})})}function P(){k.set("widgetReady",!0)}function Q(){C.hasNextSound()?C.playNext():r.raise({message:o.SOUND_GEO_BLOCKED,fatal:!0})}function R(){r.raise({message:o.INSTALL_FLASH,fatal:!0})}function S(){p.broadcast({excludeThis:!0},"audio:play")}function T(a){a.fatal?k.get("router").apply("error",{resource_id:a.resource_id}):(window.console.warn("Exception: %s",a.get("message")),window.console.warn(a))}function U(a){var b=a.originalEvent;return r.raise({message:b.message,error:b,fatal:!1}),!0}function V(){k.get("widgetParams").single_active&&(C.pause(),e.pause())}function W(a,b){var c=b&&b.getCurrentSound(),d;c&&!c.isPrivate()&&c===C.getCurrentSound()&&(C.source instanceof B&&(d=A.instances.get(C.source.resource_id)),a.href=(d||b).getDeeplinkURL(),C.pause(c))}function X(){var a=$.Deferred();return k.get("widgetParams").tracking==="delayed"?($(document).one("click",a.resolve),p.on("audio:play",a.resolve)):a.resolve(),a}function Y(){var a,b,c;return a=d.extend({},n,i.history.getOptions()),b=d.pick(a,d.keys(n)),b.visual?b.color=n.color:(c=j(b.color).hex(),b.color=c?c.substr(1):n.color),b}function Z(){var a=new K;return a.on("change",function(){M.set("me",d.extend({lastFetchTime:a.lastFetchTime},a.attributes))}),a}function _(a){if(!l.isLoggedIn())return p.one("broadcast:connect:login",_),$.Deferred().reject();var b=k.get("me"),c=M.get("me"),d=arguments[1],e;return b.baseUrl="me",a===undefined&&(a=2),d||(d=$.Deferred().done(function(){K.instances.add(b),p.trigger("connect:hasUserData")})),c?(e=c.lastFetchTime||Date.now(),delete c.lastFetchTime,b.lastFetchTime=e,b.set(c),d.resolve()):b.fetch().done(d.resolve).fail(function(b){b.status===401?(l.logout(),d.reject(b)):a?_(a-1,d):d.reject(b)}),d}function ba(){var a=new D,b=new m;a.render(),b.render(),$(N).append(a.el).append(b.el)}function bb(){var a=$.Deferred();return t.initialize(s).fetchAssignments().done(function(b){bc(),q.setExperiments(b),a.resolve()}).fail(function(){a.reject()}),a}function bc(){var a=J.getQueryParams();d.each(a,function(a,b){var c=/^exp\.([^.]+)\.([^.]+)$/.exec(b),d,e,f=a;c&&(d=c[1],e=c[2]),d&&e&&f&&t.set(d,e,f)})}function bd(){var a=k.get("widgetParams").locale,b=window.navigator.userLanguage;!b&&window.navigator.languages&&window.navigator.languages.length>0&&(b=window.navigator.languages[0]),b||(b=window.navigator.language);if(!a||a==="undefined")a="en";/^pt\.*/.test(b)&&(a="pt"),x.initialize(a)}var d=a("_"),e=a("lib/ad-manager"),f=a("lib/api/api-bridge"),g=a("lib/api-wrapper"),h=a("models/audio-ad"),i=a("backbone"),j=a("vendor/color/color"),k=a("config"),l=a("lib/connect"),m=a("views/buttons/cookie-policy"),n=a("config/widget-params"),o=a("config/error-messages"),p=a("lib/event-bus"),q=a("vendor/event-logger/event-logger"),r=a("models/exception"),s=a("config/experiments"),t=a("vendor/experiments/experiments"),u=a("vendor/fastclick"),v=a("lib/flash-widget"),w=a("lib/global-xhr-handlers"),x=a("lib/lingua"),y=a("lib/loader"),z=a("lib/persistent-store"),A=a("models/playlist"),B=a("collections/playlist-sounds"),C=a("lib/play-manager"),D=a("lib/views/progress"),E=a("tracking-events"),F=a("router"),G=a("config/routes"),H=a("lib/support"),I=a("lib/tracking"),J=a("lib/url"),K=a("models/user"),L=a("lib/view"),M=new z("auth"),N="#widget";c.exports={start:function(a,b){!H.newWidget||!1?v.start():(b&&y.setPackageMap(b),O(),H.audio||p.trigger("error:audio_support"))}}}),
define("_",["require","exports","module","vendor/underscore"],function(a,b,c){var d=a("vendor/underscore");c.exports=d,d.mixin({proxy:function(a,b){[].slice.call(arguments,2).forEach(function(c){if(typeof a[c]!="function")throw new Error("Proxy source has no method named "+c);b[c]=a[c].bind(a)})},toAttributesString:function(a){var b=[],c,e;return d.each(a,function(a,f){c=f+'="',e=[],d.isObject(a)?d.each(a,function(a,b){e.push(b+":"+a)}):e.push(a),b.push(c+e.join(";")+'"')}),b.join(" ")}})}),
define("lib/ad-manager",["require","exports","module","_","lib/browser","lib/promoted","lib/backbone","lib/circuit-breaker","config","lib/event-bus","tracking-events"],function(a,b,c){function t(){var a=q||[],b;while(b=a.pop())b.state()!=="resolved"&&b.abort()}function u(){return p||(p=new i({giveUp:1})),p}function v(a,b,c,d){a.sound&&b.state()!=="rejected"?w.call(this,a,b,c,d):b.resolve()}function w(a,b,c,d){var f=a.sound;f.hold(),f.on("finish",this._onAdFinish,this).on("pause",this._onAdPause,this).on("play",this._onAdPlay,this).one("play",this._onAdPlayStart,this),this._currentAd=a,this._upcomingSound=c,this._upcomingSound.hold(),b.done(x.bind(this)),f.play(e.extend({checkpointInterval:n},d))}function x(){var a=this.getCurrentSound();a.off("finish",this._onAdFinish).off("pause",this._onAdPause).off("play",this._onAdPlay),a.isPlaying()&&a.pause(),a.release(),this._currentAd=null,this._upcomingSound.release(),this._upcomingSound=null}function y(a){var b=d.getCurrentAd(),c=d.getCurrentSound(),f=b.get("audio"),h=b.get("companion_display"),i={monetization_type:b.getMonetizationType(),monetized_object:c.getMonetizableTrack().getUrn()},j;switch(a){case"companion_display:impression":g.trackEvent("impression",h),j=e.extend({ad_urn:h.ad_urn,external_media:h.ad_visual,impression_name:"companion_display",impression_object:c.getUrn(),promoted_by:null},i),k.trigger(l.IMPRESSION,j);break;case"audio_ad:impression":g.trackEvent("impression",f),j=e.extend({ad_urn:f.ad_urn,external_media:null,impression_name:"audio_ad_impression",impression_object:c.getUrn(),promoted_by:null},i),k.trigger(l.IMPRESSION,j);break;case"companion_display:clickthrough":g.trackEvent("adClick",h),j=e.extend({ad_urn:h.ad_urn,external_media:h.ad_visual,click_name:"clickthrough::companion_display",click_object:c.getUrn(),click_target:h.landing_page,promoted_by:null},i),k.trigger(l.CLICKED,j);break;case"audio_ad:skip":g.trackEvent("skip",f),j=e.extend({ad_urn:f.ad_urn,click_name:"ad::skip",click_object:c.getUrn(),click_target:null,external_media:h.ad_visual},i),k.trigger(l.SKIPPED,j);break;case"audio_ad:finish":g.trackEvent("finish",f),j=e.extend({ad_urn:f.ad_urn,click_name:"ad::finish",click_object:c.getUrn(),click_target:null,external_media:h.ad_visual},i),k.trigger(l.FINISH,j);break;case"audio_ad:playStart":g.trackEvent("play",f);break;default:}}var d,e=a("_"),f=a("lib/browser"),g=a("lib/promoted"),h=a("lib/backbone"),i=a("lib/circuit-breaker"),j=a("config"),k=a("lib/event-bus"),l=a("tracking-events").ADS,m=1e3,n=3e3,o,p,q,r={AD_PLAY:"ad:play",AD_PAUSE:"ad:pause",AD_SKIP:"ad:skip",AD_FINISH:"ad:finish"},s=["visual-single-sound","single-sound"];d=c.exports=e.extend({},h.Events,{_adDeferred:null,_currentAd:null,_upcomingSound:null,setAudioAd:function(a){o=a},prefetchAudioAd:function(a){e.delay(function(){var b=new o({id:a.id}),c=u();b.configureMonetizableTrack(a),!b.isPopulated()&&c.enabled&&b.fetch().fail(c.failed).done(c.succeeded)},m)},getCurrentSound:function(){return this._currentAd&&this._currentAd.sound},getUpcomingSound:function(){return this._upcomingSound},getCurrentAd:function(){return this._currentAd},skip:function(a){var b=this._adDeferred,c=this._currentAd;return t(),b?(this.getCurrentSound()&&(c.sound.pause(),this.trigger(r.AD_SKIP,c),this.metrics("audio_ad:skip",a)),b.resolve()):$.Deferred().resolve()},toggle:function(a){var b=this.getCurrentSound(),c;c=!b.isPlaying(),c?b.play(a):b.pause(a)},pause:function(){var a=this.getCurrentSound();a&&a.pause()},whenAdFinished:function(a,b){var c=this._adDeferred,d=new o({id:a.id}),e=u(),g=q||[];return d.configureMonetizableTrack(a),c&&c.state()==="pending"?this.skip():d.sound&&d.sound.currentTime()>0?$.Deferred().resolve():(c=this._adDeferred=$.Deferred(),!d.isPopulated()&&e.enabled?(g.push(d.fetch({async:!f.isMobile}).fail(function(){e.failed(),c.reject(),t()}.bind(this)).done(function(){e.succeeded(),v.call(this,d,c,a,b),t()}.bind(this))),c):(v.call(this,d,c,a,b),c))},adsEnabled:function(){return!j.get("adsDisabled")&&j.get("widgetParams").show_artwork&&e.contains(s,j.get("router").layoutName)},_onAdFinish:function(){var a=this.getCurrentAd(),b=this._adDeferred;this.trigger(r.AD_FINISH,a),this.metrics("audio_ad:finish"),b.resolve()},_onAdPause:function(){var a=this.getCurrentAd();this.trigger(r.AD_PAUSE,a)},_onAdPlay:function(){var a=this.getCurrentAd();this.trigger(r.AD_PLAY,a)},_onAdPlayStart:function(){this.metrics("audio_ad:playStart")},_isUserWithinGracePeriod:function(){return!1},metrics:function(a,b){d.getCurrentAd()&&d.getCurrentSound()&&y(a,b||{})}})}),
define("lib/api/api-bridge",["require","exports","module","_","config","lib/event-bus","lib/play-manager","lib/api/setters","lib/api/getters","lib/api/events","lib/api/events-map"],function(a,b,c){function u(){if(s)return;s=!0,window.addEventListener?window.addEventListener("message",E,!1):window.attachEvent("onmessage",E),e.each(m.audio,function(a,b){g.on(a,function(a){var c=a.sound;c&&c.isNowPlaying()&&A(b,F(c))})}),e.each(m.ui,function(a,b){g.on(a,function(a,c){A(b,c)})}),z(k.READY)}function v(){f.get("router").layoutName==="error"&&(u(),z(k.ERROR))}function w(){return h.getCurrentSound()}function x(a){var b,c=w();switch(a){case j.GET_VOLUME:b=c?c.getVolume():r;break;case j.GET_POSITION:b=c?c.currentTime():r;break;case j.GET_DURATION:b=c?c.duration():r;break;case j.GET_CURRENT_SOUND:b=c?c.toJSON():r;break;case j.GET_CURRENT_SOUND_INDEX:b=h.cursor;break;case j.GET_SOUNDS:b=h.getSounds();break;case j.IS_PAUSED:b=c?c.isPaused():!1}return b}function y(a,b){var c=w();if(c)switch(a){case i.SET_VOLUME:c.setVolume(b);break;case i.SEEK_TO:c.seek(b);break;case i.PLAY:h.play(c);break;case i.PAUSE:h.pause(c);break;case i.TOGGLE:h.toggle(c)}switch(a){case i.NEXT:h.playNext();break;case i.PREV:h.playPrev();break;case i.SKIP:h.play(h.get(b))}}function z(a,b){var c=G(),d;if(!c)return!1;d=JSON.stringify({widgetId:f.get("widget_id"),method:a,value:e.isUndefined(b)?null:b}),c.postMessage(d,"*")}function A(a,b,c){(c||e.indexOf(t,a)>-1)&&z(a,b)}function B(a){return e.indexOf(e.values(k),a)>-1}function C(a){B(a)&&t.push(a)}function D(a){B(a)&&(t=e.without(t,a))}function E(a){var b,c,d;try{b=JSON.parse(a.data)}catch(f){return}c=b.method;if(!c)return;e.indexOf(n,c)>-1?z(c,x(c)):e.indexOf(o,c)>-1?y(c,b.value):e.indexOf(p,c)>-1&&(d=b.value,d&&(c===l.ADD_LISTENER?C(d):D(d)))}function F(a){var b=a.currentTime();return{loadedProgress:a.loadProgress(),currentPosition:b,relativePosition:a.progress()}}function G(){if(e.isUndefined(q))try{q=window.parent&&window.parent!==window&&window.parent.postMessage?window.parent:null}catch(a){q=null}return q}var d,e=a("_"),f=a("config"),g=a("lib/event-bus"),h=a("lib/play-manager"),i=a("lib/api/setters"),j=a("lib/api/getters"),k=a("lib/api/events").api,l=a("lib/api/events").bridge,m=a("lib/api/events-map"),n=e.values(j),o=e.values(i),p=e.values(l),q,r,s=!1,t=[];d=c.exports={start:e.once(function(){g.on("widget:ready",u).on("layout:change",v)})}}),
define("lib/api-wrapper",["require","exports","module","lib/connect","config","lib/url"],function(a,b,c){function l(a){return!!a.match(j)}var d,e=a("lib/connect"),f=a("config"),g=a("lib/url"),h=/^https?:\/\/.+?\//,i=/^https?|^_/,j=new RegExp(["me","me/","i1/me/","tracks/[0-9]+/(plays|streams)","audio-ads"].join("|")),k={likes:"favorites",groups:"groups",people:"users",sound:"track",sounds:"tracks"};d=c.exports={EDGE:"e1/",initialize:function(a){var b=f.get("client_id"),c=f.get("api_host"),d=f.get("api_embedded_host");$.ajaxSetup({statusCode:a||{},beforeSend:function(a,f){var j;f.crossDomain=!0,i.test(f.url)||(f.url=c+f.url.replace(h,""),j=!0),j=j||f.url.substr(0,c.length)===c||f.url.substr(0,d.length)===d,j&&(e.isLoggedIn()&&l(f.url)&&a.setRequestHeader("Authorization","OAuth "+e.getAuthToken()),f.url=g.modify(f.url,{scheme:"https",query:{client_id:b,format:"json"}}))}})},toAPIResource:function(a){return k[a]||a}}}),
define("models/audio-ad",["require","exports","module","_","lib/promoted","lib/model","models/sound","models/user"],function(a,b,c){var d,e=a("_"),f=a("lib/promoted"),g=a("lib/model"),h=a("models/sound"),i=a("models/user"),j="audio_ad";d=c.exports=g.extend({resource_type:"audio_ad",submodelMap:{sound:h,user:i},baseUrl:function(){return f.getAdUrl("audioAds",this.id)},createSubmodel:function(a,b){var c;b==="sound"?(c=this.get("sound"),this.sound=new h(e.extend(c,{resource_id:{ad_target_id:this.resource_id,sound_id:c.id}})),this.sound.setMonetizableTrack(this._monetizableTrack)):g.prototype.createSubmodel.apply(this,arguments)},parse:function(a){var b=f.parseResponse(a),c={};return b.data&&(c.sound=b.data.audio&&b.data.audio.track,c.sound.ad_type="preroll",c.user=c.sound.user,c.tracking=b.data.audio?b.data.audio.tracking:{},c.audio=b.data.audio,c.context=b.context,c.companion_display=b.data.companion_display),c},configureMonetizableTrack:function(a){this._monetizableTrack=a},getMonetizationType:function(){return j}})}),
define("backbone",["require","exports","module","_"],function(a,b,c){((function(){var c=function(){return this}(),d=c.Backbone,e=Array.prototype.slice,f=Array.prototype.splice,g;typeof b!="undefined"?g=b:g=c.Backbone={},g.VERSION="0.9.1";var h=c._;!h&&typeof a!="undefined"&&(h=a("_"));var i=c.jQuery||c.Zepto||c.ender;g.setDomLibrary=function(a){i=a},g.noConflict=function(){return c.Backbone=d,this},g.emulateHTTP=!1,g.emulateJSON=!1,g.Events={on:function(a,b,c){if(b===i.noop)return this;var d;a=a.split(/\s+/);var e=this._callbacks||(this._callbacks={});while(d=a.shift()){var f=e[d]||(e[d]={}),g=f.tail||(f.tail=f.next={});g.callback=b,g.context=c,f.tail=g.next={}}return this},off:function(a,b,c){if(b===i.noop)return this;var d,e,f;if(!a)delete this._callbacks;else if(e=this._callbacks){a=a.split(/\s+/);while(d=a.shift()){f=e[d],delete e[d];if(!b||!f)continue;while((f=f.next)&&f.next)if(f.callback!==b||!!c&&f.context!==c)this.on(d,f.callback,f.context);else continue}}return this},trigger:function(a){var b,c,d,f,g,h,i;if(!(d=this._callbacks))return this;h=d.all,(a=a.split(/\s+/)).push(null);while(b=a.shift()){h&&a.push({next:h.next,tail:h.tail,event:b});if(!(c=d[b]))continue;a.push({next:c.next,tail:c.tail})}i=e.call(arguments,1);while(c=a.pop()){f=c.tail,g=c.event?[c.event].concat(i):i;while((c=c.next)!==f)c.callback.apply(c.context||this,g)}return this},one:function(a,b,c){var d=this,e,f=function(a){var e=function(){d.off(a,e,c),b.apply(this,arguments)};return e};a=a.split(/\s+/);while(e=a.shift())d.on(e,f(e),c);return this}},g.Events.bind=g.Events.on,g.Events.unbind=g.Events.off,g.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a));if(c=w(this,"defaults"))a=h.extend({},c,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=h.uniqueId("c");if(!this.set(a,{silent:!0}))throw new Error("Can't create an invalid model");delete this._changed,this._previousAttributes=h.clone(this.attributes),this.initialize.apply(this,arguments)},h.extend(g.Model.prototype,g.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=h.escape(c==null?"":""+c)},has:function(a){return this.attributes[a]!=null},set:function(a,b,c){var d,e,f;h.isObject(a)||a==null?(d=a,c=b):(d={},d[a]=b),c||(c={});if(!d)return this;d instanceof g.Model&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var i=this.attributes,j=this._escapedAttributes,k=this._previousAttributes||{},l=this._setting;this._changed||(this._changed={}),this._setting=!0;for(e in d){f=d[e],h.isEqual(i[e],f)||delete j[e],c.unset?delete i[e]:i[e]=f,this._changing&&!h.isEqual(this._changed[e],f)&&(this.trigger("change:"+e,this,f,c),this._moreChanges=!0),delete this._changed[e];if(!h.isEqual(k[e],f)||h.has(i,e)!=h.has(k,e))this._changed[e]=f}return l||(!c.silent&&this.hasChanged()&&this.change(c),this._setting=!1),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(h.clone(this.attributes),a)},fetch:function(a){a=a?h.clone(a):{};var b=this,c=a.success;return a.success=function(d,e,f){b.lastFetchTime=Date.now();if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)},a.error=g.wrapError(a.error,b,a),(this.sync||g.sync).call(this,"read",this,a)},save:function(a,b,c){var d,e;h.isObject(a)||a==null?(d=a,c=b):(d={},d[a]=b),c=c?h.clone(c):{},c.wait&&(e=h.clone(this.attributes));var f=h.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?f:c))return!1;var i=this,j=c.success;c.success=function(a,b,e){var f=i.parse(a,e);c.wait&&(f=h.extend(d||{},f));if(!i.set(f,c))return!1;j?j(i,a):i.trigger("sync",i,a,c)},c.error=g.wrapError(c.error,i,c);var k=this.isNew()?"create":"update",l=(this.sync||g.sync).call(this,k,this,c);return c.wait&&this.set(e,f),l},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d();a.success=function(e){a.wait&&d(),c?c(b,e):b.trigger("sync",b,e,a)},a.error=g.wrapError(a.error,b,a);var e=(this.sync||g.sync).call(this,"delete",this,a);return a.wait||d(),e},url:function(){var a=w(this.collection,"url")||w(this,"urlRoot")||x();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(a){if(this._changing||!this.hasChanged())return this;this._changing=!0,this._moreChanges=!0;for(var b in this._changed)this.trigger("change:"+b,this,this._changed[b],a);while(this._moreChanges)this._moreChanges=!1,this.trigger("change",this,a);return this._previousAttributes=h.clone(this.attributes),delete this._changed,this._changing=!1,this},hasChanged:function(a){return arguments.length?this._changed&&h.has(this._changed,a):!h.isEmpty(this._changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this._changed):!1;var b,c=!1,d=this._previousAttributes;for(var e in a){if(h.isEqual(d[e],b=a[e]))continue;(c||(c={}))[e]=b}return c},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),g.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})},h.extend(g.Collection.prototype,g.Events,{model:g.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){var c,d,e,g,i,j,k={},l={};b||(b={}),a=h.isArray(a)?a.slice():[a];for(c=0,e=a.length;c<e;c++){if(!(g=a[c]=this._prepareModel(a[c],b)))throw new Error("Can't add an invalid model to a collection");if(k[i=g.cid]||this._byCid[i]||(j=g.id)!=null&&(l[j]||this._byId[j]))throw new Error("Can't add the same model to a collection twice");k[i]=l[j]=g}for(c=0;c<e;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,g.id!=null&&(this._byId[g.id]=g);this.length+=e,d=b.at!=null?b.at:this.models.length,f.apply(this.models,[d,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,e=this.models.length;c<e;c++){if(!k[(g=this.models[c]).cid])continue;b.index=c,g.trigger("add",g,this,b)}return this},remove:function(a,b){var c,d,e,f;b||(b={}),a=h.isArray(a)?a.slice():[a];for(c=0,d=a.length;c<d;c++){f=this.getByCid(a[c])||this.get(a[c]);if(!f)continue;delete this._byId[f.id],delete this._byCid[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f)}return this},get:function(a){return a==null?null:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var b=h.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return h.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,{silent:!0,parse:b.parse}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?h.clone(a):{},a.parse===undefined&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){b.lastFetchTime=Date.now(),b[a.add?"add":"reset"](b.parse(d,f),a),c&&c(b,d)},a.error=g.wrapError(a.error,b,a),(this.sync||g.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b=b?h.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f,g){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return h(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof g.Model)a.collection||(a.collection=this);else{var c=a;b.collection=this,a=new this.model(c,b),a._validate(a.attributes,b)||(a=!1)}return a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(a!="add"&&a!="remove"||c==this)a=="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments);else return}});var j=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];h.each(j,function(a){g.Collection.prototype[a]=function(){return h[a].apply(h,[this.models].concat(h.toArray(arguments)))}}),g.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var k=/:\w+/g,l=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(g.Router.prototype,g.Events,{initialize:function(){},route:function(a,b,c){return g.history||(g.history=new g.History),h.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),g.history.route(a,h.bind(function(d){var e=this._extractParameters(a,d);c&&c.apply(this,e),this.trigger.apply(this,["route:"+b].concat(e)),g.history.trigger("route",this,b,e)},this)),this},navigate:function(a,b){g.history.navigate(a,b)},_bindRoutes:function(){if(!this.routes)return;var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])},_routeToRegExp:function(a){return a=a.replace(m,"\\$&").replace(k,"([^/]+)").replace(l,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),g.History=function(){this.handlers=[],h.bindAll(this,"checkUrl")};var n=/^[#\/]/,o=/msie [\w.]+/,p=!1;h.extend(g.History.prototype,g.Events,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c)}else a=window.location.hash;return a=decodeURIComponent(a),a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(n,"")},start:function(a){if(p)throw new Error("Backbone.history has already been started");this.options=h.extend({},{root:"/"},this.options,a),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,d=o.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);d&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b,p=!0;var e=window.location,f=e.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;if(!this.options.silent)return this.loadUrl()},stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),p=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location.hash));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){if(!p)return!1;if(!b||b===!0)b={trigger:b};var c=(a||"").replace(n,"");if(this.fragment==c||this.fragment==decodeURIComponent(c))return;this._hasPushState?(c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}}),g.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var q=/^(\S+)\s*(.*)$/,r=["model","collection","el","id","attributes","className","tagName"];h.extend(g.View.prototype,g.Events,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&i(d).attr(b),c&&i(d).html(c),d},setElement:function(a,b){return this.$el=i(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=w(this,"events")))return;this.undelegateEvents();for(var b in a){var c=a[b];h.isFunction(c)||(c=this[a[b]]);if(!c)throw new Error('Event "'+a[b]+'" does not exist');var d=b.match(q),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,f===""?this.$el.bind(e,c):this.$el.delegate(f,e,c)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=h.extend({},this.options,a));for(var b=0,c=r.length;b<c;b++){var d=r[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(!this.el){var a=w(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}else this.setElement(this.el,!1)}});var s=function(a,b){var c=v(this,a,b);return c.extend=this.extend,c};g.Model.extend=g.Collection.extend=g.Router.extend=g.View.extend=s;var t={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=t[a],e={type:d,dataType:"json"};return c.url||(e.url=w(b,"url")||x()),!c.data&&b&&(a=="create"||a=="update")&&(e.contentType="application/json",e.data=JSON.stringify(b.toJSON())),g.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{}),g.emulateHTTP&&(d==="PUT"||d==="DELETE")&&(g.emulateJSON&&(e.data._method=d),e.type="POST",e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)}),e.type!=="GET"&&!g.emulateJSON&&(e.processData=!1),i.ajax(h.extend(e,c))},g.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var u=function(){},v=function(a,b,c){var d;return b&&b.hasOwnProperty("constructor")?d=b.constructor:d=function(){a.apply(this,arguments)},h.extend(d,a),u.prototype=a.prototype,d.prototype=new u,b&&h.extend(d.prototype,b),c&&h.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},w=function(a,b){return!a||!a[b]?null:h.isFunction(a[b])?a[b]():a[b]},x=function(){throw new Error('A "url" property or function must be specified')}})).call(this)}),
define("vendor/color/color",["require","exports","module"],function(a,b,c){(function(){function j(a){return a===void 0}function k(a){return parseInt(a,16)}function l(a){return parseInt(a,10)}function m(a){return a.length===1?"0"+a:""+a}function n(a){return typeof a=="string"&&a.indexOf(".")!==-1&&parseFloat(a)===1}function o(a){return typeof a=="string"&&a.indexOf("%")!==-1}function p(a){return g(1,h(0,a))}function q(a,b){n(a)&&(a="100%");var c=o(a);return a=g(b,h(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),d.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function r(a){return[m(f(a.r).toString(16)),m(f(a.g).toString(16)),m(f(a.b).toString(16))].join("")}function s(a){function h(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var b,c,d,e=q(a.h,360),f=q(a.s,100),g=q(a.l,100);if(f===0)b=c=d=g;else{var i=g<.5?g*(1+f):g+f-g*f,j=2*g-i;b=h(j,i,e+1/3),c=h(j,i,e),d=h(j,i,e-1/3)}return{r:b*255,g:c*255,b:d*255}}function t(a){var b=q(a.r,255),c=q(a.g,255),d=q(a.b,255),e=h(b,c,d),i=g(b,c,d),j,k,l=(e+i)/2;if(e===i)j=k=0;else{var m=e-i;k=l>.5?m/(2-e-i):m/(e+i);switch(e){case b:j=(c-d)/m+(c<d?6:0);break;case c:j=(d-b)/m+2;break;case d:j=(b-c)/m+4}j/=6}return{h:f(j*360),s:f(k*100),l:f(l*100)}}function u(c){c=c.replace(a,"").replace(b,"").toLowerCase();var d;return(d=i.rgb.exec(c))?{r:l(d[1]),g:l(d[2]),b:l(d[3])}:(d=i.hsl.exec(c))?{h:l(d[1]),s:l(d[2]),l:l(d[3])}:(d=i.hex6.exec(c))?{r:k(d[1]),g:k(d[2]),b:k(d[3])}:(d=i.hex3.exec(c))?{r:k(d[1]+""+d[1]),g:k(d[2]+""+d[2]),b:k(d[3]+""+d[3])}:!1}function v(a){var b=null;return typeof a=="string"&&(a=u(a)),typeof a=="object"&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?b=a:a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(b=s(a))),b}function w(a){var b=this.toHsl();return b.h+=l(a),D(b)}function x(a){var b=this.toHsl();return b.l-=l(a),h(0,b.l),D(b)}function y(a){var b=this.toHsl();return b.l+=l(a),g(100,b.l),D(b)}function z(a,b){a=a||6,b=b||30;var c=this.toHsl(),d=360/b,e=[D(c)];for(c.h=(c.h-(d*a>>1)+720)%360;--a;)c.h=(c.h+d)%360,e.push(D(c));return e}function A(a){var b=this.toRgb(),c=D(a).toRgb(),d=(b.r*299+b.g*587+b.b*114)/1e3,f=(c.r*299+c.g*587+c.b*114)/1e3,i=h(b.r,c.r)-g(b.r,c.r)+h(b.g,c.g)-g(b.g,c.g)+h(b.b,c.b)-g(b.b,c.b);return{brightness:e(d-f),color:i}}function B(a){var b=this.diff(a);return b.brightness>125&&b.color>500}function C(a,b){var c=this.diff(a||"#000"),d=this.diff(b||"#fff");return c.brightness>d.brightness&&c.color>d.color?D(a):D(b)}var a=/^[\s,#]+/,b=/\s+$/,d=Math,e=d.abs,f=d.round,g=d.min,h=d.max,i=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),hsl:new RegExp("hsl"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),D=function(a){var b=v(a);return{hue:function(a){return w.call(this,a)},darken:function(a){return x.call(this,a)},lighten:function(a){return y.call(this,a)},analogous:function(a,b){return z.call(this,a,b)},readable:function(a){return B.call(this,a)},diff:function(a){return A.call(this,a)},contrast:function(a,b){return C.call(this,a,b)},hex:function(){return b?"#"+r(b):null},toRgb:function(){return b},isValid:function(){return b?!0:!1},rgb:function(){return b?"rgb("+[f(b.r),f(b.g),f(b.b)].join(", ")+")":null},rgba:function(a){return b?"rgba("+[f(b.r),f(b.g),f(b.b),j(a)?1:p(a)].join(", ")+")":null},toHsl:function(){return t(b)},hsl:function(){var a=t(b);return b?"hsl("+a.h+", "+a.s+"%, "+a.l+"%)":null}}};typeof c!="undefined"&&c.exports?c.exports=D:(global=function(){return this}(),global.SC=global.SC||{},global.SC.color=D)})()}),
define("config",["require","exports","module","lib/mixins/observing","_","config/client-ids","lib/store","lib/url"],function(a,b,c){var d=a("lib/mixins/observing"),e=a("_"),f=a("config/client-ids"),g=a("lib/store"),h=a("lib/url"),i=h.parse(location.search).query.visual==="true",j=i?"visual":"classic",k,l,m="https://api-embedded.soundcloud.com/",n="https://api-staging-embedded.soundcloud.com/",o=c.exports=new g;d.applyTo(o),k=f[j].production,l="https://w.soundcloud.com/player/callback.html",k||window.console.error("Unknown host: %o","http://w.soundcloud.com/player/"),e.each({app_root:h.parse("http://w.soundcloud.com/player/").directory||"/",api_host:"https://api.soundcloud.com/",api_embedded_host:m,widget_id:"widget_"+Date.now(),client_application_id:i?90575:43164,client_id:k,redirect_uri:l,fb_app_id:"19507961798",mixi_api_key:"1403ed11563185e9cff6cfeedf4f2ecf77fa459e",me:null,oauth_token:null,preferFlashAudio:!0,promotedContentServer:m+"audio-ads",promotedContentAccessToken:"widget",router:null,widgetReady:!1,appView:null,widgetParams:{},wisHost:"https://wis.sndcdn.com",visualsHost:"https://visuals.soundcloud.com",adsDisabled:!1},function(a,b){o.set(b,a,{silent:!0})}),o.finalize()}),
define("lib/connect",["require","exports","module","_","lib/backbone","config","lib/event-bus","lib/url","lib/persistent-store"],function(a,b,c){function s(a,b,c){var d=window.screenX+(window.outerWidth-b)/2,e=window.screenY+(window.outerHeight-c)/2;return window.open(a,"connectWithSoundCloud",["location=1","width="+b,"height="+c,"top="+e,"left="+d,"toolbar=no","scrollbars=yes"].join(","))}var d,e=a("_"),f=a("lib/backbone"),g=a("config"),h=a("lib/event-bus"),i=a("lib/url"),j=a("lib/persistent-store"),k=150,l="v=2",m="oauth_token",n="non-expiring fast-connect",o=new j("anonymous-user"),p=new j("auth"),q,r;p.on(m,function(a){d.setAuthToken(a.current)}),d=c.exports=e.extend({},f.Events,{setAuthToken:function(a){p.set(m,a)},getAuthToken:function(){return p.get(m)},isLoggedIn:function(){return!!this.getAuthToken()},login:function(){var a;return r?q&&!q.closed&&q.focus&&q.focus():(r=$.Deferred().fail(function(){r=null}),this.isLoggedIn()?r.resolve():(a=i.stringify({host:g.get("api_host").replace("api.",""),path:["connect"],query:{client_id:g.get("client_id"),response_type:"token",scope:n,display:"next",redirect_uri:g.get("redirect_uri")+"?"+l}}),q=s(a,450,500),function b(){(!q||q.closed)&&!d.isLoggedIn()?r.reject():q.closed?h.one("connect:hasUserData",r.resolve).broadcast("connect:login"):setTimeout(b,k)}())),r},logout:function(){p.reset(),h.trigger("connect:logout","logout")},getUserIdentifier:function(){var a;return d.isLoggedIn()?a=d.currentUserId():(a=o.get("id"),a||(a=Math.floor(Math.random()*1e3),o.set("id",a))),a},currentUserId:function(){return g.get("me").id}})}),
define("views/buttons/cookie-policy",["require","exports","module","lib/view","views/buttons/cookie-policy.css"],function(a,b,c){var d,e=a("lib/view");d=c.exports=e.extend({css:a("views/buttons/cookie-policy.css"),tagName:"a",className:"cookiePolicy sc-background-light",attributes:{href:"https://soundcloud.com/pages/cookies"},template:function(){return this.t("Cookie policy")}})}),
define("config/widget-params",["require","exports","module","lib/browser"],function(a,b,c){var d,e=a("lib/browser");d=c.exports={auto_advance:!0,auto_play:!1,buying:!0,color:"FF5500",continuous_play:!0,download:!0,following:!0,hide_related:!1,inverse:!1,legacy_fallback:!0,liking:!0,secret_token:"",sharing:!0,show_artwork:!0,show_comments:e.isNextSupported?!0:!1,show_playcount:!0,show_reposts:!1,show_user:!0,single_active:!0,start_track:0,tracking:"",visual:!1,locale:"en"}}),
define("config/error-messages",["require","exports","module","lib/lingua"],function(a,b,c){function f(a){return function(){return e.t("Oops, we couldn't find that "+a+".")}}var d,e=a("lib/lingua");d=c.exports={USER_NOT_FOUND:f("user"),GROUP_NOT_FOUND:f("group"),SOUND_NOT_FOUND:f("track"),PLAYLIST_NOT_FOUND:f("playlist"),INSTALL_FLASH:function(){return e.t('You need Adobe Flash to play sounds. Please <a href="http://get.adobe.com/flashplayer" target="_blank">install Flash</a> and reload the page.')},EMPTY_PLAYLIST:function(){return e.t("This playlist is empty.")},SOUND_GEO_BLOCKED:function(){return e.t("The owner of this track has not made this sound available for streaming in your location.")},INVALID_URL_PARAM:function(){return e.t('`url` parameter is not a valid SoundCloud URL. <a href="https://soundcloud.com/pages/embed">Learn more</a> about using SoundCloud players.')}}}),
define("lib/event-bus",["require","exports","module","_","lib/backbone","lib/persistent-store"],function(a,b,c){var d,e=a("_"),f=a("lib/backbone"),g=a("lib/persistent-store"),h,i,j,k,l;l=new g("broadcast"),h=String(Date.now()).substr(-8)*1e3+Math.floor(Math.random()*1e3),l.on("broadcast",function(a){var b=a.current;b&&b.appId!==h&&k.call(d,b)}),d=c.exports=e.extend({},f.Events,{broadcast:function(a,b){var c,d;return typeof a=="string"?(c=[].slice.call(arguments,1),b=a,a={}):c=[].slice.call(arguments,2),d=j(b,c),l.set("broadcast",d),a.excludeThis||k.call(this,d),this}}),j=function(a,b){return{type:a,timestamp:Date.now(),appId:h,args:b}},k=function(a){this.trigger.apply(this,["broadcast:"+a.type].concat(a.args||[]))}}),
define("vendor/event-logger/event-logger",["require","exports","module"],function(a,b,c){(function(){function o(a){var b="."+window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),c=new Date,d;c.setTime(c.getTime()+31536e7),d="; expires="+c.toGMTString(),document.cookie=j+"="+a+d+"; path=/; domain="+b}function p(){var a=document.cookie.split(j+"=");return a.length>1&&a[1].split(";")[0]}function q(){return Math.floor(Math.random()*1e6)}function r(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function s(a,b){var c=r(a),d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function t(a){return a=typeof a=="object"?a:{},a.context=a.context||{},a.context.scope=a.context.scope||[],a}function u(a,c){var d,i,j,k;i=[],d=h+a+"?",d+=["anonymous_id="+encodeURIComponent(b),"client_id="+g,"ts="+Date.now(),"url="+window.location.href.split("/").map(encodeURIComponent).join("/")].join("&"),f&&Object.keys(f).forEach(function(a){i.push("exp_"+a+"="+f[a])}),e&&i.push("origin="+e),document.referrer.length>0&&i.push("referrer="+encodeURIComponent(document.referrer));for(j in c)c.hasOwnProperty(j)&&c[j]!=null&&i.push(encodeURIComponent(j)+"="+encodeURIComponent(c[j]));return d+="&"+i.join("&"),k=new Image,k.onload=v.bind(null,k),k.onerror=w.bind(null,k,m),k.src=d,d}function v(a){a.onload=a.onerror=null}function w(a,b){var c=a.src;a.onload=a.onerror=null,a.src=n,setTimeout(function(){a.src=c},b)}function x(a,b){var c=0,d=b.length;for(;c<d;c++)if(a[b[c]]===undefined)return!0;return!1}function y(a){return a?"soundcloud:users:"+a:b}function z(){}function A(a,b){b&&(a.page_params=[b.qid,b.position].join(";"))}var a,b,d,e,f,g,h,i,j="sc_anonymous_id",k=3e4,l=1e3,m=3e4,n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";i=function(){throw new Error("EventLogger must be initialized")},a={_anonymousId:null,initialize:function(c){if(d)return;if(!c.id)throw new Error("EventLogger: You need to pass an id");e=c.origin,b=this._anonymousId=a.getAnonymousId(),this.checkpointIntervals={},g=c.id,h=c.trackingUrl||"https://eventlogger.soundcloud.com",d=!0,i=z},setExperiments:function(a){f=a},getAnonymousId:function(){var a=p();if(!a||a==="undefined")a=[q(),q(),q(),q()].join("-"),o(a);return a},pageview:function(a,b,c){i();var d=y(a);return u("/pageview",{user:d,level:b,chapter:c.join("::")})},impression:function(a,b,c){i(),c=t(c);var d={ad_urn:c.ad_urn,campaign:c.context.campaign,context:c.context.scope.join(":"),external_media:c.external_media,impression_name:c.impression_name,impression_object:c.impression_object,level:b,monetization_type:c.monetization_type,monetized_object:c.monetized_object,promoted_by:c.promoted_by,urn:c.urn,user:y(a)};u("/impression",s(d,c.params))},click:function(a,b,c,d){i(),d=t(d);var e={ad_urn:d.ad_urn,campaign:d.context.campaign,chapter:c.join("::"),context:d.context.scope.join(":"),external_media:d.external_media,level:b,monetization_type:d.monetization_type,monetized_object:d.monetized_object,promoted_by:d.promoted_by,urn:d.urn,user:y(a),click_name:d.click_name,click_object:d.click_object,click_target:d.click_target,page_name:d.page_name,page_urn:d.page_urn};return A(e,d.context.searchTracking),u("/click",s(e,d.params))},audio:function(a){i();if(x(a,["level","action","id","duration"]))throw new Error("EventLogger  Audio : One or multiple mandatory arguments are missing");var b=a.id,c="soundcloud:sounds:"+b,d=Math.floor(a.duration*1e3),e=this.checkpointIntervals,f=typeof a.checkpointInterval=="number"&&a.checkpointInterval>=l?a.checkpointInterval:null,g,h,j,m;return g={action:a.action,ad_urn:a.ad_urn,context:a.context,duration:d,level:a.level,monetization_type:a.monetization_type,monetized_object:a.monetized_object,policy:a.policy,promoted_by:a.promoted_by,protocol:a.protocol,set_id:a.setId,set_position:a.setPosition,sound:c,source:a.source,source_version:a.sourceVersion,trigger:a.trigger,user:y(a.user)},A(g,a.searchTracking),h=u("/audio",g),clearInterval(e[b]),a.action==="play"?(j=Date.now(),m=r(g),m.action="checkpoint",e[b]=setInterval(function(){Date.now()<j+d?u("/audio",m):clearInterval(e[b])},f||k)):delete e[b],h},audioPerformance:function(a){i();if(x(a,["type","latency","protocol","playertype","host"]))throw new Error("EventLogger  AudioPerformance : One or multiple mandatory arguments are missing");var b={type:a.type,latency:a.latency,protocol:a.protocol,player_type:a.playertype,host:a.host};return u("/audio_performance",b)},appLoad:function(a,b){i();var c={latency:b.latency,user:y(a),level:b.level};return u("/appload",c)},performRequestWithUser:function(a,b,c){return u(b,s({user:y(a)},c))}},typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.EventLogger=a)})()}),
define("models/exception",["require","exports","module","lib/event-bus","lib/model"],function(a,b,c){var d,e=a("lib/event-bus"),f=a("lib/model");d=c.exports=f.extend({url:null,lastFetchTime:1,fatal:!1,initialize:function(a){a=a||{},this.id||(a.id=this.id=this.cid,d.instances.set(this.id,this)),this.fatal=!!a.fatal,f.prototype.initialize.apply(this,arguments)}},{raise:function(a,b){var c=new d(a);c.release(),b=b||{},e.trigger("exception",c);if(b.hard)throw c}})}),
define("config/experiments",["require","exports","module","config","vendor/event-logger/event-logger","lib/support"],function(a,b,c){var d,e=a("config"),f=a("vendor/event-logger/event-logger"),g=a("lib/support");d=c.exports={version:"05-11-2014_12:00",availableLayers:["widget_listening"],anonymousUserId:f.getAnonymousId(),assignmentServiceUrl:e.get("api_embedded_host")+"assignments/",localStorageKey:"WIDGET::local::assignments",localStorageEnabled:g.localStorage}}),
define("vendor/experiments/experiments",["require","exports","module"],function(a,b,c){(function(){function d(b){if(!a._localStorageEnabled)return;localStorage.setItem(a._localStorageKey,b)}var a,b="assignments";a={_assignments:null,_localStorageKey:null,_localStorageEnabled:null,_availableLayers:null,_assignmentServiceUrl:null,_version:null,_anonymousId:null,initialize:function(c){return c=c||{},a._availableLayers=c.availableLayers||[],a._localStorageKey=c.localStorageKey||b,a._assignmentServiceUrl=c.assignmentServiceUrl+c.anonymousUserId,a._version=c.version,a._anonymousId=c.anonymousUserId,a._localStorageEnabled=c.hasOwnProperty("localStorageEnabled")?c.localStorageEnabled:!0,a._assignments=a.loadAssignments(),a},reset:function(){a._availableLayers=[],a._localStorageKey=b,a._assignmentServiceUrl="",a._version=null,a._anonymousId=null,a._assignments=null},get:function(b,c){var d=a.getLayers()||{};return d.hasOwnProperty(b)&&d[b].experimentName===c?d[b].variantName:!1},set:function(b,c,d){var e=a.getLayers();e[b]={experimentName:c,variantName:d}},fetchAssignments:function(){var b=$.Deferred(),c=a.getAssignments(),d=a._availableLayers,e=!!d.length,f={layers:d.join(",")};return a.isUpToDate(c,a._version)?b.resolve(a.formatAssignments()):e?(a.clearAssignments(),$.ajax({url:a._assignmentServiceUrl,type:"GET",dataType:"json",data:f,timeout:5e3}).done(function(c){a.buildAssignments(c),a.storeAssignments(),b.resolve(a.formatAssignments())}).fail(b.reject)):(a.clearAssignments(),b.resolve(a.formatAssignments())),b.promise()},isUpToDate:function(a,b){return a&&a._version===b},loadAssignments:function(){var b;try{b=JSON.parse(localStorage.getItem(a._localStorageKey))}catch(c){b={}}return b},buildAssignments:function(b){a._assignments={_version:a._version,layers:a.formatLayers(b)}},storeAssignments:function(){var b=a.getAssignments()||{};d(JSON.stringify(b))},clearAssignments:function(){a._assignments={},d(JSON.stringify({}))},getAssignments:function(){return a._assignments},getLayers:function(){return a.getAssignments().layers},formatAssignments:function(){var b={},c=a.getLayers(),d;return c&&(d=Object.keys(c),d.forEach(function(a){b[a]=c[a].variantId})),b},formatLayers:function(a){var b={};return a.forEach(function(a){b[a.layer_name]={experimentName:a.experiment_name,variantName:a.variant_name,variantId:a.variant_id}}),b},serialize:function(){var b=a.getLayers(),c,d,e=[];for(d in b)c=b[d],c&&c.experimentName&&c.variantName&&e.push("["+d+"] "+c.experimentName+": "+c.variantName);return e.join(", ")}},typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.Experiments=a)})()}),
define("vendor/fastclick",["require","exports","module"],function(a,b,c){function d(a){"use strict";var b,c=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a;if(!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return d.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return d.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return d.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return d.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return d.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return d.prototype.onTouchCancel.apply(c,arguments)};if(d.notNeeded(a))return;this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;b==="click"?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;b==="click"?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),typeof a.onclick=="function"&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null)}d.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,d.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),d.prototype.deviceIsIOS4=d.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),d.prototype.deviceIsIOSWithBadTarget=d.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),d.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&a.type==="file"||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},d.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},d.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},d.prototype.determineEventType=function(a){return"use strict",this.deviceIsAndroid&&a.tagName.toLowerCase()==="select"?"mousedown":"click"},d.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&a.type.indexOf("date")!==0&&a.type!=="time"?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},d.prototype.updateScrollParent=function(a){"use strict";var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},d.prototype.getTargetElementFromEventTarget=function(a){return"use strict",a.nodeType===Node.TEXT_NODE?a.parentNode:a},d.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0];if(this.deviceIsIOS){d=window.getSelection();if(d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},d.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},d.prototype.onTouchMove=function(a){"use strict";if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0},d.prototype.findControl=function(a){return"use strict",a.control!==undefined?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},d.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase();if(d==="label"){b=this.findControl(g);if(b){this.focus(g);if(this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g)){if(a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&d==="input")return this.targetElement=null,!1;this.focus(g);if(!this.deviceIsIOS4||d!=="select")this.targetElement=null,a.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){e=g.fastClickScrollParent;if(e&&e.fastClickLastScrollTop!==e.scrollTop)return!0}return this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1},d.prototype.onTouchCancel=function(){"use strict",this.trackingClick=!1,this.targetElement=null},d.prototype.onMouse=function(a){return"use strict",this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},d.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):a.target.type==="submit"&&a.detail===0?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},d.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},d.notNeeded=function(a){"use strict";var b,c;if(typeof window.ontouchstart=="undefined")return!0;c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(c){if(!d.prototype.deviceIsAndroid)return!0;b=document.querySelector("meta[name=viewport]");if(b){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return a.style.msTouchAction==="none"?!0:!1},d.attach=function(a){return"use strict",new d(a)},c.exports=d}),
define("lib/flash-widget",["require","exports","module","lib/url","lib/utils","lib/support"],function(a,b,c){var d,e=a("lib/url"),f=a("lib/utils"),g=a("lib/support");d=c.exports={start:function(){var a=document.getElementById("widget"),b,c,d={},h='<div style="position:absolute;width:100%;top:50px;text-align:center;"><p style="line-height:20px;">{errorMessage}</p><a href="http://soundcloud.com" title="Play on SoundCloud" class="g-sc-logo" style="display:inline-block">SoundCloud.com</a></div>';e.getQueryParam("legacy_fallback")==="false"?(c=h,d.errorMessage="Sorry, we dont support your browser. Please upgrade to the latest version and try again."):g.flash?(c='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="flashwidget"><param name="movie" value="{flashPlayerSrc}"> </param><param name="allowscriptaccess" value="always"> </param><embed src="{flashPlayerSrc}" type="application/x-shockwave-flash" allowscriptaccess="always" width="100%" height="100%"> </embed></object>',d.flashPlayerSrc="//player.soundcloud.com/player.swf"+location.search+"&enable_api=true"):(c=h,d.errorMessage='You need Adobe Flash to play tracks. Please <a href="http://get.adobe.com/flashplayer" target="_blank">install Flash</a> and reload the page.'),b=f.supplant(c,d),a.className+=" noBorders fullSize",a.innerHTML=b}}}),
define("lib/global-xhr-handlers",["require","exports","module","lib/connect"],function(a,b,c){var d,e=a("lib/connect");d=c.exports={401:function(a){var b=a.responseText.indexOf("geo_blocked")!==-1;b||e.logout()}}}),
define("lib/lingua",["require","exports","module","vendor/i18n/i18n","config/locales/locale-en","config/locales/locale-pt"],function(a,b,c){var d,e=a("vendor/i18n/i18n"),f,g,h={en:a("config/locales/locale-en"),pt:a("config/locales/locale-pt")};d=c.exports={initialize:function(a){g=h[a]?a:"en",f=f||new e,f.setLocale(g),f.extend(h[g])},getLocale:function(){return g},t:function(a,b,c){return f.t(a,b,c)},tp:function(a,b,c,d,e){return f.tp(a,b,c,d,e)}}}),
define("lib/loader",["require","exports","module","_","lib/helpers/dom-helper"],function(a,b,c){var d,e=a("_"),f=a("lib/helpers/dom-helper"),g={};d=c.exports={setPackageMap:function(a){a._prefix&&e.each(a,function(b,c){c.charAt(0)!=="_"&&(a[c]=a._prefix+b)}),this.packageMap=a},loadLayout:function(b){var c=this.packageMap,e=c&&c[b],h,i=g[b],j;return i?i:e?(h=$.Deferred(),j=function(){h.resolve(a(b))},f.insertScript(e,{onload:j,onerror:h.reject}),i=g[b]=h.promise(),i):d.load(b)},load:function(b){var c=$.Deferred();return e.isArray(b)||(b=[b]),a(b,c.resolve),c}}}),
define("lib/persistent-store",["require","exports","module","lib/store","lib/mixins/persistent","lib/mixins/observing"],function(a,b,c){var d=a("lib/store"),e=a("lib/mixins/persistent"),f=a("lib/mixins/observing"),g;g=c.exports=d.extend(),e.applyTo(g.prototype),f.applyTo(g.prototype)}),
define("models/playlist",["require","exports","module","models/audible-interface","lib/play-manager","lib/mixins/has-image","lib/mixins/throws-not-found","lib/url"],function(a,b,c){function j(a){return f.sourceIsCollection()&&f.source.resource_id===a.resource_id}var d,e=a("models/audible-interface"),f=a("lib/play-manager"),g=a("lib/mixins/has-image"),h=a("lib/mixins/throws-not-found"),i=a("lib/url");d=c.exports=e.extend(g,h,{resource_type:"playlist",urnPrefix:"soundcloud:playlists",baseUrl:function(){return"playlists/"+this.id+"/?representation=compact"},parse:function(a){return a.track_count=Math.max(a.tracks.length,a.track_count),a},isShareable:function(){return this.isEmbeddable()&&!this.isPrivate()},isEmbeddable:function(){return this.get("embeddable_by")!=="none"},isPlaying:function(){var a=f.getCurrentSound();return a&&a.isPlaying()&&j(this)},getCurrentSound:function(){return j(this)?f.getCurrentSound():null},getDeeplinkURL:function(){var a=this.getCurrentSound(),b;return a&&(b=i.modify(a.getDeeplinkURL(),{query:{"in":this.get("user").permalink+"/sets/"+this.get("permalink")}})),b}})}),
define("collections/playlist-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d,e=a("collections/sounds");d=c.exports=e.extend({defaults:{resource_type:"playlists"},parse:function(a){return this.next_href=!1,a.tracks}})}),
define("lib/play-manager",["require","exports","module","_","backbone","lib/collection"],function(a,b,c){function k(a,b){b[a]("pause",l,this)[a]("finish",m,this)}function l(a){this.trigger("pause",a.sound)}function m(a){var b=a.sound,c=this.indexOf(b)===this.getSounds().length-1;b.seek(0),c?this.trigger("finish",this.source):this.isContinuousPlaybackEnabled?this.playNext():this.trigger("pause")}function n(){var a=this.source;a instanceof g&&a.on("add",p,this).on("remove",q,this),a.hold()}function o(){var a=this.source;a instanceof g&&a.off("add",p,this).off("remove",q,this),a.release()}function p(a,b,c){c.index<=this.cursor&&++this.cursor}function q(a,b,c){this.cursor&&c.index<=this.cursor&&--this.cursor}function r(){return!this._adDeferred&&this.getCurrentSound()&&this.getCurrentSound().get("policy")==="MONETIZE"&&h.adsEnabled()}function s(){return this._adDeferred&&this._adDeferred.state()==="pending"}function t(a,b){this._adDeferred=null,u.call(this,a,b)}function u(a,b){var c=this.source;this.pause(),a&&(this.setCursor(this.indexOf(a)),a.play(b),j=a,this.trigger("play",a)),this.length()-this.cursor<=i&&this.sourceIsCollection()&&!c.isFullyPopulated()&&c.fetch({add:!0})}var d,e=a("_"),f=a("backbone"),g=a("lib/collection"),h,i=3,j=null;d=c.exports=e.extend({},f.Events,{cursor:-1,source:null,isContinuousPlaybackEnabled:!0,sourceIsCollection:function(){return this.source&&this.source instanceof g},setSource:function(a,b){return b=e.defaults(b||{},{continuousPlay:!0}),this.source!==a&&(this.source&&o.call(this),this.source=a,a&&n.call(this),this.setCursor(-1)),this.isContinuousPlaybackEnabled=b.continuousPlay,this},length:function(){return this.getSounds().length},get:function(a){var b=this.source;return this.sourceIsCollection()?b.at(a):b},getSounds:function(){var a=this.source,b=[];return this.sourceIsCollection()?b=a.models:a&&(b=a.getSounds()),b},indexOf:function(a){return this.getSounds().indexOf(a)},getCurrentSound:function(){return this.get(this.cursor)||null},setCursor:function(a){var b=this.getCurrentSound(),c;if(a===this.cursor)return;b&&k.call(this,"off",b),this.cursor=Math.max(-1,Math.min((this.length()||0)-1,a)),c=this.getCurrentSound(),c&&k.call(this,"on",c),b!==this.getCurrentSound()&&this.trigger("change:current",{prev:b,current:this.getCurrentSound()})},play:function(a,b){if(r.call(this))this._adDeferred=h.whenAdFinished(a,b),this._adDeferred.always(t.bind(this,a,b));else{if(s.call(this))return;u.call(this,a,b)}},pause:function(a,b){a=a||j,a&&a.isPlaying()&&a.pause(b),j=null},toggle:function(a,b){a&&(a.isPlaying()?this.pause(a,b):this.play(a,b))},playNext:function(){this.cursor<this.length()-1&&this.play(this.get(this.cursor+1))},playPrev:function(){this.cursor>0&&this.play(this.get(this.cursor-1))},hasNextSound:function(){var a=this.source,b=this.cursor,c=this.length(),d=!(c&&b<c-1);return!d||a&&this.sourceIsCollection()&&(!a.isFullyPopulated()||!d)},prefetchCurrentSoundAudioAd:function(){r.call(this)&&h.prefetchAudioAd(this.getCurrentSound())},setAdManager:function(a){h=a}})}),
define("lib/views/progress",["require","exports","module","config","lib/event-bus","lib/math","lib/view","lib/views/progress.css"],function(a,b,c){function i(){return g.clamp(this._status+Math.random()*this.options.trickleRate,0,.95)}function j(){this.done()}function k(a){var b=a?"on":"off";f[b]("widget:ready exception",j,this)}var d,e=a("config"),f=a("lib/event-bus"),g=a("lib/math"),h=a("lib/view");d=c.exports=h.extend({className:"progress sc-background-orange",css:a("lib/views/progress.css"),template:function(){return""},defaults:{minimum:g.randomRange(.08,.15),trickleRate:.1,trickleSpeed:500},attributes:{role:"bar"},_status:null,setup:function(){k.call(this,!0)},dispose:function(){k.call(this,!1)},renderDecorate:function(){this.whenInserted().done(this.start.bind(this))},start:function(){this._status||this.set(0);var a=function(){this.addDeferred(setTimeout(function(){if(!this._status||this._status===1)return;this.set(i.call(this)),a()}.bind(this),this.options.trickleSpeed))}.bind(this);a()},set:function(a){this._status=a=g.clamp(a,this.options.minimum,1);var b=(-1+a)*100;window.requestAnimationFrame(function(){this.$el.css({"-webkit-transform":"translate3d("+b+"%, 0, 0)","-ms-transform":"translate3d("+b+"%, 0, 0)",transform:"translate3d("+b+"%, 0, 0)"}),a===1&&this.toggleState("hidden",!e.get("widgetParams").visual)}.bind(this))},done:function(){this.set(1)}})}),
define("tracking-events",["require","exports","module"],function(a,b,c){c.exports={UI:{LIKE_BUTTON_CLICKED:"tracking:like_button_clicked",FOLLOW_BUTTON_CLICKED:"tracking:follow_button_clicked",SHARE_BUTTON_CLICKED:"tracking:share_button_clicked",DOWNLOAD_LINK_CLICKED:"tracking:download_link_clicked",BUY_LINK_CLICKED:"tracking:buy_link_clicked",SHARE_VIEW_OPENED:"tracking:share_view_opened",LINK_BUTTON_CLICKED:"tracking:link_button_clicked",LINK_INPUT_CLICKED:"tracking:link_input_clicked",EMBED_BUTTON_CLICKED:"tracking:embed_button_clicked",ARTWORK_CLICKED:"tracking:artwork_clicked",WAVEFORM_CLICKED:"tracking:waveform_clicked",SHARE_ICON_CLICKED:"tracking:share_icon_clicked",PLAYLIST_SCROLLED:"tracking:playlist_scrolled",TITLE_LINK_CLICKED:"tracking:title_link_clicked",CREATOR_LINK_CLICKED:"tracking:creator_link_clicked",LOGO_LINK_CLICKED:"tracking:logo_link_clicked",RELATED_VIEW_OPENED:"tracking:related_view_opened",RELATED_VIEW_CLICKED:"tracking:related_view_clicked"},ADS:{IMPRESSION:"tracking:impression",CLICKED:"tracking:ad:click",SKIPPED:"tracking:ad:skip",FINISH:"tracking:ad:finish"},APP:{LOAD:"tracking:appLoad"},MISC:{PT_LOCAL_USED:"tracking:pt_locale_used"}}}),
define("router",["require","exports","module","lib/backbone","lib/event-bus","lib/loader","config"],function(a,b,c){var d,e=a("lib/backbone"),f=a("lib/event-bus"),g=a("lib/loader"),h=a("config");d=c.exports=e.Router.extend({layoutName:null,reload:function(){return e.history.loadUrl()},setRoutes:function(a){return a.forEach(function(a){this.route(a.route,a.name,a.handler)},this),this},apply:function(a,b){var c="layouts/"+a,d;this.setupDeferred&&this.setupDeferred.reject(),this.setupDeferred=d=$.Deferred(),g.loadLayout(c).done(function(c){if(d.state()!=="rejected"){var e=h.get("appView"),g=new c(b);e._teardown(),e.addSubview(g),e.$el.append(g.render().el),this.layoutName=a,f.trigger("layout:change",e)}}.bind(this))}})}),
define("config/routes",["require","exports","module","_","backbone","config/error-messages","models/exception","config","lib/url","lib/utils","config/resources"],function(a,b,c){function p(a,b){return a.push(q(b.resource,o(b.route),b.resource,s(b))),a.push(q(b.resource+"-permalink",o("/"+b.permalink),b.resource,r(b))),a}function q(a,b,c,d){return{name:a,route:b,resource:c,handler:d}}function r(a){return function(){var b=d.toArray(arguments),c=h.get("widgetParams").secret_token,e;n.lastIndex=0,e=a.permalink.replace(n,function(){return b.shift()}),c&&[k.SOUND,k.PLAYLIST].indexOf(a.resource)>-1&&(e+="/"+c),u.call(this,e)}}function s(a){return function(b){var c=h.get("widgetParams").visual,e=a.resource,f=t(e,c);b=d.isNaN(Number(b))?b:Number(b),this.apply(f,{resource_id:b,resource_type:e})}}function t(a,b){var c;switch(a){case k.SOUND:c=b?"visual-single-sound":"single-sound";break;case k.PLAYLIST:case k.USER_SOUNDS:case k.USER_FAVORITES:case k.USER_SPOTLIGHT:case k.GROUP_SOUNDS:c=b?"visual-multi-sounds":"multi-sounds";break;default:c="error"}return c}function u(a){v(a).done(function(a){var b,c;b=e.history.getOptions(),b.url=a.location.replace(/\.json.*/,""),c=i.stringify({query:b}),this.navigate(c,{trigger:!0,replace:!0})}.bind(this)).fail(function(a){if(a.status===404)return w(j.escapeHTML(e.history.getFragment()));g.raise({fatal:!0,xhr:a})})}function v(a){return $.ajax({url:h.get("api_host")+"resolve",dataType:"json",data:{url:"http://soundcloud.com/"+a,"_status_code_map[302]":200}})}function w(){g.raise({fatal:!0,message:f.INVALID_URL_PARAM})}var d=a("_"),e=a("backbone"),f=a("config/error-messages"),g=a("models/exception"),h=a("config"),i=a("lib/url"),j=a("lib/utils"),k=a("config/resources"),l="[a-zA-Z0-9_-]{1,255}",m={id:"[0-9]+",app:l,user:l,group:l,track:l,playlist:l},n=new RegExp(":("+Object.keys(m).join("|")+")","g"),o=function(){function a(a,b){return"("+m[b]+")"}return function(b){return n.lastIndex=0,new RegExp("^"+b.replace(n,a)+"$")}}();c.exports=[{route:"tracks/:id",permalink:":user/:track",resource:k.SOUND},{route:"users/:id",permalink:":user",resource:k.USER_SOUNDS},{route:"users/:id/favorites",permalink:":user/favorites",resource:k.USER_FAVORITES},{route:"users/:id/spotlight",permalink:":user/spotlight",resource:k.USER_SPOTLIGHT},{route:"groups/:id",permalink:"groups/:group",resource:k.GROUP_SOUNDS},{route:"playlists/:id",permalink:":user/sets/:playlist",resource:k.PLAYLIST}].reduce(p,[q("error","*error","exception",w)])}),
define("lib/support",["require","exports","module","_","lib/browser","lib/helpers/environment-helper"],function(a,b,c){function j(a){try{var b=!!a.getItem,c=!1,d;try{d=Date.now(),a.setItem(d,d),a.removeItem(d),c=!0}catch(e){}return b&&c}catch(f){return!1}}function k(){return g.getFlashPlugin()&&g.getFlashVersion()>=i}function l(){try{return!!window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg;").replace(/^no$/,"")}catch(a){return!1}}function m(){try{return!!window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("application/vnd.apple.mpegURL").replace(/^no$/,"")}catch(a){return!1}}function n(){return f.isIE9&&!f.isIEMobile?!1:l()}var d,e=a("_"),f=a("lib/browser"),g=a("lib/helpers/environment-helper"),h,i=9;d=c.exports={},h={audio:function(){return n()||k()},flash:function(){return k()},HTML5Audio:function(){return l()},HLSAudio:function(){return m()},newWidget:function(){return typeof window.JSON=="undefined"?!1:f.isIEMobile?!0:document.documentMode<=8||f.isIE6||f.isIE7||f.isIE8?!1:!0},sessionStorage:function(){try{return typeof sessionStorage!="undefined"&&j(sessionStorage)}catch(a){return!1}},localStorage:function(){try{return typeof localStorage!="undefined"&&j(localStorage)}catch(a){return!1}},webSocket:function(){return typeof window.WebSocket!="undefined"},WebWorker:function(){return!1},BlobBuilder:function(){return window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder},URL:function(){return window.webkitURL||window.URL},touch:function(){try{return window.hasOwnProperty("ontouchstart")}catch(a){return!1}},speech:function(){return"onwebkitspeechchange"in document.createElement("input")},corsImg:function(){return"crossOrigin"in new Image},transform3d:function(){var a=document.createElement("modernizr"),b=a.style,c=document.head||document.getElementsByTagName("head")[0],d=document.documentElement,e=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),f="@media ("+e.join("transform-3d),(")+"modernizr)",g=document.createElement("style"),h=document.createElement("div"),i=0,j,k;return j=function(a){while(a[i]){if(typeof b[a[i]]!="undefined")return!0;i++}},k=!!j(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),k&&typeof d.style.webkitPerspective!="undefined"&&(k=null,g.textContent=f+"{#modernizr{height:3px}}",c.appendChild(g),h.id="modernizr",d.appendChild(h),k=h.offsetHeight===3?!0:!1,g.parentNode.removeChild(g),h.parentNode.removeChild(h)),k},typedArrays:function(){try{return window.hasOwnProperty("Uint8Array")}catch(a){return!1}}},e.each(h,function(a,b){d[b]=!!a()}),h=null}),
define("lib/tracking",["require","exports","module","_","lib/ad-manager","lib/analytics","config","lib/event-bus","tracking-events","lib/url","lib/play-manager"],function(a,b,c){function x(a,b){var c=e.last(a.split(":")),d=b&&b.model?b.model:b,f=d&&"getUrn"in d?d.getUrn():null,h=!1,i;switch(a){case"audio:play":case"audio:pause":case"audio:finish":c==="finish"&&(c="stop"),i=q;break;case m.LIKE_BUTTON_CLICKED:case m.FOLLOW_BUTTON_CLICKED:case m.SHARE_BUTTON_CLICKED:case m.DOWNLOAD_LINK_CLICKED:case m.BUY_LINK_CLICKED:case m.SHARE_VIEW_OPENED:case m.LINK_BUTTON_CLICKED:case m.LINK_INPUT_CLICKED:case m.EMBED_BUTTON_CLICKED:case m.ARTWORK_CLICKED:case m.PLAYLIST_SCROLLED:case m.TITLE_LINK_CLICKED:case m.CREATOR_LINK_CLICKED:case m.LOGO_LINK_CLICKED:case m.RELATED_VIEW_OPENED:case m.RELATED_VIEW_CLICKED:i=s;break;case n.IMPRESSION:case n.CLICKED:case n.SKIPPED:case n.FINISH:i=t;break;case m.WAVEFORM_CLICKED:i=s,h=!0;break;case m.SHARE_ICON_CLICKED:i=s,c+="::"+b.shareIconType,f=b.model.getUrn();break;case o.LOAD:B(b);break;case j.MISC.PT_LOCAL_USED:i=j.MISC}if(h){u.hasOwnProperty(f)||(u[f]={});if(!u[f].hasOwnProperty(c))u[f][c]=!0;else return}c&&i===q?z(c,d,b):i===t&&c==="impression"?g.trackImpression(p,undefined,E(),b):i&&c&&g.trackClick({level:p,chapter:b&&b.chapter||[c,f]},b),a==="audio:finish"&&delete u[f]}function y(){g.trackPageView({level:p,chapter:[v,k.parse(window.location.href).query.url]})}function z(a,b){var c=b,d=f.getCurrentAd(),h=b.playbackOptions,i,j;l.sourceIsCollection()&&l.source.getInfo&&(i=l.source.getInfo()),j={action:a,chapter:["sound",v,b.getUrn()].join("::"),duration:b.get("duration"),level:p,urn:b.getUrn(),trigger:h.userAction?"manual":"auto",context:h.view||"",source:i,protocol:b.audio&&b.audio.streamInfo&&b.audio.streamInfo.protocol,checkpointInterval:h.checkpointInterval,policy:b.get("policy")},b.playbackOptions={},d&&d.sound&&d.sound===c&&e.extend(j,{ad_urn:d.get("audio").ad_urn,monetization_type:d.getMonetizationType(),monetized_object:c.getUrn(),policy:null,promoted_by:null}),g.trackAudioEvent(j)}function A(){if(window._gaq!=null){var a=$(window),b=a.width()+"x"+a.height();window._gaq.push(["_trackEvent","Widget size","Range",b])}}function B(a){g.trackAppLoad(p,E(),a.latency)}function C(a,b,c){if(!w(a))return;window._gaq!=null&&window._gaq.push(["_trackEvent",r,"JS - "+a,"file:"+b+"; line:"+c])}function D(a){var b=a.get("xhr");b&&b.status.toString().indexOf("5")===0&&window._gaq!=null&&window._gaq.push(["_trackEvent",r,b.status+" - "+b.statusText,"url:"+b.url])}function E(){return h.get("me").id||null}var d,e=a("_"),f=a("lib/ad-manager"),g=a("lib/analytics"),h=a("config"),i=a("lib/event-bus"),j=a("tracking-events"),k=a("lib/url"),l=a("lib/play-manager"),m=j.UI,n=j.ADS,o=j.APP,p=0,q="Tracks",r="Error",s="UI",t="Ads",u={},v=k.parse(document.referrer).host,w;d=c.exports={init:e.once(function(){g.initialize();var a=["audio:play","audio:pause","audio:finish"];Object.keys(j).forEach(function(b){a.push.apply(a,e.values(j[b]))}),a.forEach(function(a){i.on(a,x.bind(null,a))}),window.onerror=C,i.on("exception",D).on("layout:change",function(){y(),A()})})},w=function(){function b(a){return this.message.indexOf(a)>-1}var a=["Error: Permission denied to access property 'toString'","Script error.","stopAudioAdsTimer","ReferenceError: Can't find variable: dzPlayer","Error connecting to extension"];return function(c){return!a.some(b,{message:c})}}()}),
define("lib/url",["require","exports","module","_"],function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["---","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],f=a("_"),g,h;h=c.exports={parse:function(a,b){var c=d.exec(a),f,g,i={};b||(b=e);for(f=1;f<e.length;++f){g=e[f];if(b.indexOf(g)!==-1)if(c[f]||g==="query")switch(g){case"port":i[g]=parseInt(c[f],10);break;case"path":i[g]=c[f].split("/").map(decodeURIComponent).join("/");break;case"query":i[g]=h.parseQueryString(c[f]);break;default:i[g]=c[f]}}return i},joinPath:function(a){return a.filter(Boolean).map(encodeURIComponent).join("/")},parseQueryString:function(a){var b={};return a&&a.replace(/([^?=&]+)(?:=([^&]*))?/g,function(a,c,d){c=decodeURIComponent(c),d=decodeURIComponent(d||"");switch(typeof b[c]){case"object":b[c].push(d);break;case"undefined":b[c]=d;break;default:b[c]=[b[c],d]}}),b},stringify:function(a,b){var c=[],d,e;return b&&(e=h.parse(b),a.query&&e.query&&(f.extend(e.query,a.query),delete a.query),a=f.extend({},e,a)),a.scheme&&c.push(a.scheme+"://"),a.user&&(c.push(a.user),a.password&&c.push(":"+a.password),c.push("@")),a.host&&c.push(a.host),a.port&&c.push(":"+a.port),a.path&&(typeof a.path=="string"?c.push(a.path.split("/").map(encodeURIComponent).join("/")):c.push(h.joinPath(a.path))),d=g(a.query),d&&c.push("?"+d),a.fragment&&c.push("#"+a.fragment),c.join("")},modify:function(a,b){var c=h.parse(a);return f.isFunction(b)?c=b.call(null,c):typeof b=="object"&&(b.query&&(f.extend(c.query,b.query),delete b.query),f.extend(c,b)),h.stringify(c)},getQueryParam:function(a){return h.parseQueryString(window.location.search)[a]},getQueryParams:function(){var a,b;return function(c){var d=c||window.location.search;return d!==a&&(a=d,b=h.parseQueryString(d)),b}}()},g=function(a){var b,c,d,e,f,g=[];if(a)for(b in a)if(a.hasOwnProperty(b)){e=a[b];if(e!==null&&e!==f)if(typeof e=="object"){d=e.length;for(c=0;c<d;++c)g.push(encodeURIComponent(b)+"="+encodeURIComponent(e[c]).replace(/%2F/g,"/"))}else g.push(encodeURIComponent(b)+"="+encodeURIComponent(e).replace(/%2F/g,"/"))}return g.join("&")}}),
define("models/user",["require","exports","module","config","lib/mixins/has-image","lib/mixins/throws-not-found","lib/model","lib/url"],function(a,b,c){function k(a,b){this.set(a,this.get(a)+(b?1:-1))}var d,e=a("config"),f=a("lib/mixins/has-image"),g=a("lib/mixins/throws-not-found"),h=a("lib/model"),i=a("lib/url"),j={FREE:"free",PRO:"creator-pro",PRO_UNLIMITED:"creator-pro-unlimited"};d=c.exports=h.extend(f,g,{resource_type:"user",urnPrefix:"soundcloud:users",baseUrl:function(){var a=this.id;if(a)return i.stringify({path:["users",a]});if(this.get("permalink")==="you")return i.stringify({path:"me"})},likesChanged:function(a){k.call(this,"likes_count",a)},getPlan:function(){var a=this.get("subscriptions");if(a&&a[0])return a[0].product.id}},{Plans:j,resolve:function(a){if(a==="you"){var b=$.Deferred(),c=e.get("me");return b.resolve(c),b}return h._resolve(this,a,function(b){return b.get("permalink")===a})}})}),
define("lib/view",["require","exports","module","lib/backbone","config","lib/css","lib/views/mixins/stateful","lib/template","lib/lingua","_","lib/utils","lib/customization"],function(a,b,c){function n(a,b){return k.defaults(b,a.prototype.defaults),a===d?b:n(a.__super__.constructor,b)}function o(a,b){var c,d;b=b||this.model,c=a?b.on:b.off,d=this.getObservedAttributes(b),d.forEach(function(a){c.call(b,"change:"+a,this.onModelChange,this)}.bind(this))}function p(a,b){var c;b=b||this.collection,c=a?"on":"off",b[c]("add",this.onAdd,this)[c]("remove",this.onRemove,this)[c]("reset",this.onCollectionReset,this)}var d,e=a("lib/backbone"),f=a("config"),g=a("lib/css"),h=a("lib/views/mixins/stateful"),i=a("lib/template"),j=a("lib/lingua"),k=a("_"),l=a("lib/utils"),m=a("lib/customization");d=c.exports=e.View.extend(h,{ModelClass:null,requiredAttributes:null,observedAttributes:null,css:null,template:$.noop,LoadingView:null,loadingViewArgs:null,loadingTemplate:function(){return""},element2selector:{},_element2selector_cache:null,defaults:null,disposed:!1,subviews:null,_subviews_keys:null,_lastEventId:null,constructorArguments:null,_whenInsertedDefer:null,_deferreds:null,initialize:function(a){a=this.options=n(this.constructor,a||{}),this.constructorArguments=k.clone(a),a.resource_id&&this.ModelClass?this.model=this.getModel(a.resource_id,a.resource_type):typeof this.collection=="function"&&(this.collection=new this.collection),this._deferreds=[],this.subviews=[],this._subviews_keys=[],this.resetElementCache(),this._setup.call(this,a),this.model&&this.setupModelListeners(),this.collection&&this.setupCollectionListeners()},_setup:function(){this.setup.apply(this,arguments)},setup:$.noop,_dispose:function(){if(this.disposed)return;this._teardown(),this.dispose(),this.disposed=!0;while(this._deferreds.length)typeof this._deferreds[0]=="number"?clearTimeout(this._deferreds.shift()):this._deferreds[0].reject("viewDisposed");this.off(),this.model&&(this.teardownModelListeners(),this.model.release()),this.collection&&(this.teardownCollectionListeners(),this.collection.release()),this.$el.remove(),this._whenInsertedDefer&&(this._whenInsertedDefer.reject(),this._whenInsertedDefer=null),this._whenRenderedDefer&&(this._whenRenderedDefer.reject(),this._whenRenderedDefer=null),delete this.el,delete this.$el,delete this.model,delete this.collection,this.constructorArguments=null},dispose:$.noop,_teardown:function(){this.resetElementCache(),this.disposeSubviews(),this.teardown()},teardown:$.noop,disposeSubviews:function(){while(this.subviews.length)this.subviews.pop()._dispose();this.subviews=[],this._subviews_keys=[]},getModel:function(a,b){var c,d,e,f,g;return f={id:a,resource_type:b},e=this.ModelClass.getClass?this.ModelClass.getClass(f):this.ModelClass,c=e.hashFn(f),d=e.instances.get(c),d?d.hold():(g={id:a},b&&(g.resource_type=b),d=new e(g)),d},setupModelListeners:function(a){o.call(this,!0,a)},teardownModelListeners:function(a){o.call(this,!1,a)},setupCollectionListeners:function(a){p.call(this,!0,a)},teardownCollectionListeners:function(a){p.call(this,!1,a)},getRequiredAttributes:function(a){var b=this.requiredAttributes;return a||(a=this.model),b&&!Array.isArray(b)&&(b=b[a.resource_type]),b||[]},getObservedAttributes:function(a){var b=this.observedAttributes,c;return a||(a=this.model),c=this.getRequiredAttributes(a),b&&!Array.isArray(b)&&(b=b[a.resource_type]),b?b.concat(c):c},addDeferred:function(a){return typeof a=="number"?this._deferreds.push(a):a.state()==="pending"&&(a.always(function(){var b=this._deferreds.indexOf(a);b>-1&&this._deferreds.splice(b,1)}.bind(this)),this._deferreds.push(a)),a},addSubview:function(a,b){return this.subviews.push(a),this._subviews_keys.push(b),b&&(this.subviews[b]=a),a},removeSubview:function(a){for(var b=this.subviews.length;b--;)if(this.subviews[b]===a){this._subviews_keys[b]&&delete this.subviews[this._subviews_keys[b]],this.subviews.splice(b,1),this._subviews_keys.splice(b,1);return}},getElement:function(a){var b,c,d;return this._element2selector_cache[a]===b&&(d=this.className.split(" ").shift(),c=this.element2selector[a]||"."+d+"__"+a,this._element2selector_cache[a]=this.$(c)),this._element2selector_cache[a]},resetElementCache:function(){this._element2selector_cache={}},render:function(){var a=this.hasData(),b=this.getTemplate(a),c=this.model||this.collection,d=a||!c?this._getTemplateData(a):c.toJSON();return b&&(i.render(b.bind(this),d,this.el),i.subviews(this)),this.css&&g.insert(this.css,this.colorCustomizable?function(a){var b=m.getColorParams();return k.each(b,function(a,c){b[c]=" "+a+" "}),l.replaceCSSVariables(a,b)}:undefined),a?(this.renderDecorate(),this._whenRenderedDefer||(this._whenRenderedDefer=$.Deferred()),this._whenRenderedDefer.resolve()):c&&(!b&&this.LoadingView&&this.addSubview(new this.LoadingView(k.result(this,"loadingViewArgs")),"loading").render().$el.appendTo(this.el),this.fetchData(c)),this},renderDecorate:$.noop,rerender:function(){this.disposed||(this._teardown(),this.render())},getTemplate:function(a){return a||!this.LoadingView&&!this.loadingTemplate?this.template:this.LoadingView?null:this.loadingTemplate},_getTemplateData:function(a){var b={};return this.model?b=this.getModelData():this.collection&&(b=this.getCollectionData()),b._options=k.clone(this.options),b._params=k.clone(f.get("widgetParams")),a&&(b=this.getTemplateData(b)||b),b},getTemplateData:$.noop,getCollectionData:function(){return this.collection.toJSON()},getModelData:function(){return this.model.toJSON()},fetchData:function(a){return a.fetch({attrs:this.getObservedAttributes(a)})},hasData:function(a){return a=a||this.model||this.collection,a?a.hasDataForView(this):!0},scrollIntoView:function(a){var b,c=this.$el.offset(),d,e,f,g,h,i,j;a=k.defaults({},a,{position:"auto"});if(!c)return!1;i=$(".g-main-scroll-area").first(),i.length||(i=$("#content")),f=$(document).scrollTop(),j=i.offset().top,d=f+j,e=f+$(window).height(),g=Math.floor(c.top),h=Math.floor(g+this.$el.height()),b=g>d&&h<e,b||(a.position==="top"||a.position==="auto"&&g<d?window.scrollTo(0,g-j):this.el.scrollIntoView(!1))},isEquivalentTo:function(a,b){var c=b||{};return this.constructor===a&&k.isEqual(n(a,c),this.constructorArguments)},whenInserted:function(a){var b=this._whenInsertedDefer,c,d;return b||(a=a||document.body,d=function(e){e.closest(a).length!==0?b.resolve():c=setTimeout(d,100)}.bind(null,this.$el),this._whenInsertedDefer=b=$.Deferred(),b.fail(function(){clearTimeout(c)}),d()),b},whenRendered:function(){var a=this._whenRenderedDefer;return a||(a=this._whenRenderedDefer=$.Deferred()),a},whenReady:function(){var a=$.Deferred();return $.whenAll([this.whenInserted(),this.whenRendered()]).done(a.resolve.bind(a,this)),a},onModelChange:function(a,b,c,d){this._lastEventId!==d&&(this._lastEventId=d,this.rerender())},onCollectionReset:function(){this.rerender()},onAdd:$.noop,onRemove:$.noop,t:j.t,tp:j.tp}),d.prototype.$$=d.prototype.getElement}),
define("vendor/underscore",["require","exports","module"],function(a,b,c){((function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){if(a instanceof z)return a;if(this instanceof z)this._wrapped=a;else return new z(a)};typeof b!="undefined"?(typeof c!="undefined"&&c.exports&&(b=c.exports=z),b._=z):a._=z,z.VERSION="1.4.4";var A=z.each=z.forEach=function(a,b,c){if(a==null)return;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g in a)if(z.has(a,g)&&b.call(c,a[g],g,a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return a==null?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)});if(!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},z.filter=z.select=function(a,b,c){var d=[];return a==null?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return a==null?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){if(!(d=d&&b.call(c,a,f,g)))return e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return a==null?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){if(d||(d=b.call(c,a,f,g)))return e}),!!d)};z.contains=z.include=function(a,b){return a==null?!1:u&&a.indexOf===u?a.indexOf(b)!=-1:C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b,c){return z.isEmpty(b)?c?null:[]:z[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.findWhere=function(a,b){return z.where(a,b,!0)},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return-1}return a.index<b.index?-1:1}),"value")};var E=function(a,b,c,d){var e={},f=D(b||z.identity);return A(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};z.groupBy=function(a,b,c){return E(a,b,c,function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)})},z.countBy=function(a,b,c){return E(a,b,c,function(a,b){z.has(a,b)||(a[b]=0),a[b]++})},z.sortedIndex=function(a,b,c,d){c=c==null?z.identity:D(c);var e=c.call(d,b),f=0,g=a.length;while(f<g){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return a==null?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return a==null?void 0:b!=null&&!c?j.call(a,0,b):a[0]},z.initial=function(a,b,c){return j.call(a,0,a.length-(b==null||c?1:b))},z.last=function(a,b,c){return a==null?void 0:b!=null&&!c?j.call(a,Math.max(a.length-b,0)):a[a.length-1]},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,b==null||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return A(a,function(a){z.isArray(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){if(b?!d||g[g.length-1]!==c:!z.contains(g,c))g.push(c),f.push(a[d])}),f},z.union=function(){return z.uniq(k.apply(f,arguments))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){var a=j.call(arguments),b=z.max(z.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=z.pluck(a,""+d);return c},z.object=function(a,b){if(a==null)return{};var c={};for(var d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(a==null)return-1;var d=0,e=a.length;if(c)if(typeof c=="number")d=c<0?Math.max(0,e+c):c;else return d=z.sortedIndex(a,b),a[d]===b?d:-1;if(u&&a.indexOf===u)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(a==null)return-1;var d=c!=null;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);var e=d?c:a.length;while(e--)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f},z.bind=function(a,b){if(a.bind===y&&y)return y.apply(a,j.call(arguments,1));var c=j.call(arguments,2);return function(){return a.apply(b,c.concat(j.call(arguments)))}},z.partial=function(a){var b=j.call(arguments,1);return function(){return a.apply(this,b.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);return b.length===0&&(b=z.functions(a)),A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},z.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},z.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&(b[b.length]=c);return b},z.values=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push(a[c]);return b},z.pairs=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push([c,a[c]]);return b},z.invert=function(a){var b={};for(var c in a)z.has(a,c)&&(b[a[c]]=c);return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]==null&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var G=function(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var f=c.length;while(f--)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if(e=="[object Array]"){g=a.length,h=g==b.length;if(h)while(g--)if(!(h=G(a[g],b[g],c,d)))break}else{var i=a.constructor,j=b.constructor;if(i!==j&&!(z.isFunction(i)&&i instanceof i&&z.isFunction(j)&&j instanceof j))return!1;for(var k in a)if(z.has(a,k)){g++;if(!(h=z.has(b,k)&&G(a[k],b[k],c,d)))break}if(h){for(k in b)if(z.has(b,k)&&!(g--))break;h=!g}}return c.pop(),d.pop(),h};z.isEqual=function(a,b){return G(a,b,[],[])},z.isEmpty=function(a){if(a==null)return!0;if(z.isArray(a)||z.isString(a))return a.length===0;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!!a&&a.nodeType===1},z.isArray=w||function(a){return l.call(a)=="[object Array]"},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!!a&&!!z.has(a,"callee")}),typeof /./!="function"&&(z.isFunction=function(a){return typeof a=="function"}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||l.call(a)=="[object Boolean]"},z.isNull=function(a){return a===null},z.isUndefined=function(a){return a===void 0},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){var d=Array(a);for(var e=0;e<a;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return b==null&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};H.unescape=z.invert(H.escape);var I={escape:new RegExp("["+z.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(H.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return b==null?"":(""+b).replace(I[a],function(b){return H[a][b]})}}),z.result=function(a,b){if(a==null)return null;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),N.call(this,c.apply(z,a))}})};var J=0;z.uniqueId=function(a){var b=++J+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||K).source,(c.interpolate||K).source,(c.evaluate||K).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(M,function(a){return"\\"+L[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var N=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),(a=="shift"||a=="splice")&&c.length===0&&delete c[0],N.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return N.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})})).call(this)}),
define("lib/browser",["require","exports","module"],function(a,b,c){var d,e=navigator.userAgent.toLowerCase(),f=function(a){return a.test(e)};d=c.exports={},d.isOpera=typeof window.opera!="undefined"&&window.opera.toString()==="[object Opera]",d.isChrome=f(/chrome/),d.isWebKit=f(/webkit/),d.isSafari=!d.isChrome&&f(/safari/),d.isUIWebView=f(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i),d.isIE=!d.isOpera&&f(/msie/),d.isIE6=d.isIE&&f(/msie 6/),d.isIE7=d.isIE&&f(/msie 7/),d.isIE8=d.isIE&&f(/msie 8/),d.isIE9=d.isIE&&f(/msie 9/),d.isGecko=!d.isWebKit&&f(/gecko/),d.isWindows=f(/windows|win32/),d.isMac=f(/macintosh|mac os x/),d.isLinux=f(/linux/),d.isMobile=f(/mobile|Android|iPhone|iPod|iPad|PlayBook|Skyfire/i),d.isMobileSafari=d.isSafari&&d.isMobile,d.isAndroid=f(/android/),d.isiOS=f(/iphone|ipod|ipad/),d.isIEMobile=d.isMobile&&d.isIE,d.isSecure=/^https/i.test(window.location.protocol),d.isHiDPI=window.devicePixelRatio?window.devicePixelRatio>1:!1,d.isNextSupported=!d.isMobile||f(/iPad/i),d.backingStoreRatio=function(){var a=document.createElement("canvas"),b=a.getContext&&a.getContext("2d");if(b)return b.backingStorePixelRatio||b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||1}()}),
define("lib/promoted",["require","exports","module","_","config","lib/persistent-store","lib/url"],function(a,b,c){function l(a){var b=new Image;b.src=a}var d,e=a("_"),f=a("config"),g=a("lib/persistent-store"),h=a("lib/url"),i=new g("promoted-session","session"),j=new g("promoted-persistent"),k={addToSet:"add_to_set_click",follow:"follow_click",like:"like_click",play:"sound_play",skip:"sound_skip",finish:"sound_finish",impression:"impression",repost:"repost_click",share:"share_click",adClick:"ad_click",soundClickThrough:"sound_click",userClickThrough:"profile_click",purchaseClickThrough:"purchase_click"};d=c.exports={getAdUrl:function(a,b){var c=f.get("promotedContentServer")+"/soundcloud:sounds:"+b;return h.modify(c,{query:{user_id:j.get("user_id"),referrer:h.parse(document.referrer).host}})},trackEvent:function(a,b){d.getTrackingUrls(a,b).forEach(l)},parseResponse:function(a){return a.session_id&&a.geo_id&&a.user_id?(i.set("session_id",a.session_id),i.set("geo_id",decodeURIComponent(a.geo_id)),j.set("user_id",a.user_id),a):{}},getTrackingUrls:function(a,b){var c=b&&b.tracking&&b.tracking[k[a]]||[];return e.isArray(c)?c:[c]}}}),
define("lib/backbone",["require","exports","module","_","lib/url","lib/utils","backbone","lib/mixin"],function(a,b,c){var d=a("_"),e=a("lib/url"),f=a("lib/utils"),g=a("backbone"),h=a("lib/mixin"),i=g.Model.prototype,j=g.Collection.prototype,k="url";c.exports=g,d.extend(g.History.prototype,{getFragment:function(a){var b=this.getOptions(a);return b[k]||""},_getParams:function(a){return e.parse(f.unescapeHTML(a)).query},getOptions:function(a){var b,c,f,g;return b=this._getParams(a||location.search),b[k]=decodeURIComponent(b[k]),c=this._getParams(b[k]),f=e.parse(b[k]),f.path&&(f.host&&f.host!=="soundcloud.com"?g=f.path.replace(/^[#\/]/,""):g=f.path.replace(/\/+$/,"")),b[k]=g,b=d.extend(b,c),d.each(b,function(a,c){a==="false"?b[c]=!1:a==="true"?b[c]=!0:c==="start_track"&&(b[c]=parseInt(a,10))}),b}}),function(){function a(a,b){return function(){delete a._requests[b]}}function b(b){return function(c){var e;return c=d.extend({url:d.result(this,"url"),jqAjax:!1,saveRequest:!1,dataType:"json"},c),this._requests||(this._requests={}),e=this._requests[c.url],e?(c.success&&e.done(function(a){c.success(this,a)}.bind(this)),c.error&&e.fail(c.error)):(e=this._requests[c.url]=c.jqAjax?$.ajax(c):b.call(this,c),e[c.saveRequest?"fail":"always"](a(this,c.url))),e}}i.fetch=b(i.fetch),j.fetch=b(j.fetch)}(),i.change=function(){var a=0;return function(b){var c;b&&b.force&&b.force.forEach(function(a){this._changed[a]=this.get(a)}.bind(this)),++a;for(c in this._changed)this._changed.hasOwnProperty(c)&&this.trigger("change:"+c,this,this._changed[c],b,a);this.trigger("change",this,b,a),this._previousAttributes=d.clone(this.attributes),this._changed={}}}(),g.Model.extend=g.Collection.extend=g.View.extend=function(a){return function(){var b=d.toArray(arguments),c=0,e,f;return e=b.filter(function(a,b){if(a instanceof h)return c=b+1,!0}),f=a.apply(this,b.slice(c)),e.forEach(function(a){a.applyTo(f.prototype)}),f}}(g.View.extend),j.add=function(a,b){var c,e,f,g,h,i,j={},k={},l,m;b||(b={}),a=d.isArray(a)?a.slice():[a];for(c=a.length;c--;){l=!1;if(!(g=a[c]=this._prepareModel(a[c],b)))l=!0;else if(j[h=g.cid]||this._byCid[h]||(i=g.id)!==null&&i!==m&&(k[i]||this._byId[i]))g.release(),l=!0;l?a.splice(c,1):j[h]=k[i]=g}for(c=0,f=a.length;c<f;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,g.id!==null&&g.id!==m&&(this._byId[g.id]=g);this.length+=f,e=b.at!==null&&b.at!==m?b.at:this.models.length,Array.prototype.splice.apply(this.models,[e,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,f=this.models.length;c<f;c++)j[(g=this.models[c]).cid]&&(b.index=c,g.trigger("add",g,this,b));return this}}),
define("lib/circuit-breaker",["require","exports","module","_","lib/backbone"],function(a,b,c){var d,e=a("_"),f=a("lib/backbone");d=c.exports=Class.extend({enabled:!0,_breakCount:0,_failCount:0,_maxBreaks:0,_timeoutId:null,defaults:{tolerance:1,baseDelay:1e3,maxDelay:3e4,backoffRate:2,giveUp:null,enabled:!0},initialize:function(a){e.bindAll(this,"failed","succeeded"),this.setup(a)},setup:function(a){this.options=e.extend({},this.options||this.defaults,a),a=e.defaults(this.options,this.defaults);var b=a.maxDelay/a.baseDelay;if(a.backoffRate>1)while(b>1)++this._maxBreaks,b/=a.backoffRate;else this._maxBreaks=Infinity;a.enabled||this.disable()},dispose:function(){this.off(),this.clearTimeout()},clearTimeout:function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},failed:function(){++this._failCount>=this.options.tolerance&&this.disable()},succeeded:function(){this._breakCount=this._failCount=0},disable:function(a){if(this.enabled){var b=!a||a.autoEnable!==!1;this.enabled=!1,++this._breakCount,b&&(!this.options.giveUp||this._breakCount<this.options.giveUp)?this._timeoutId=setTimeout(this.enable.bind(this),this.currentDelay()):this.trigger("giveup"),this.trigger("disabled")}},enable:function(){this.enabled||(this.enabled=!0,this._failCount=0,this.trigger("enabled"))},currentDelay:function(){var a=this.options;return Math.min(a.baseDelay*Math.pow(a.backoffRate,Math.floor(Math.random()*Math.min(this._maxBreaks,this._breakCount))),a.maxDelay)}}),e.extend(d.prototype,f.Events)}),
define("lib/api/setters",["require","exports","module"],function(a,b,c){c.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}),
define("lib/api/getters",["require","exports","module"],function(a,b,c){c.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}}),
define("lib/api/events",["require","exports","module"],function(a,b,c){b.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},b.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}}),
define("lib/api/events-map",["require","exports","module","lib/api/events","tracking-events"],function(a,b,c){var d,e=a("lib/api/events").api,f=a("tracking-events");d=c.exports={},d.audio={},d.audio[e.PLAY_PROGRESS]="audio:time",d.audio[e.PLAY]="audio:play",d.audio[e.PAUSE]="audio:pause",d.audio[e.FINISH]="audio:finish",d.audio[e.SEEK]="audio:seeked",d.ui={},d.ui[e.OPEN_SHARE_PANEL]=f.UI.SHARE_VIEW_OPENED,d.ui[e.CLICK_BUY]=f.UI.BUY_LINK_CLICKED,d.ui[e.CLICK_DOWNLOAD]=f.UI.DOWNLOAD_LINK_CLICKED}),
define("lib/model",["require","exports","module","_","lib/api-wrapper","lib/backbone","lib/connect","config","lib/single","lib/url"],function(a,b,c){var d,e=a("_"),f=a("lib/api-wrapper"),g=a("lib/backbone"),h=a("lib/connect"),i=a("config"),j=a("lib/single"),k=a("lib/url"),l=Array.prototype.slice;d=g.Model.extend({resource_type:null,lastFetchTime:null,_submodels:null,submodelMap:null,initialize:function(a,b){this._submodels=[],this.options=b,e.each(this.submodelMap,function(a,b){this.on("change:"+b,this.createSubmodel.bind(this,a,b))},this),this.setup.apply(this,arguments),e.each(this.submodelMap,function(a,b){this.get(b)&&this.createSubmodel(a,b)},this)},setup:$.noop,createSubmodel:function(a,b){this.addSubmodel(new a(this.get(b),{parse:!0}))},addSubmodel:function(){l.call(arguments).forEach(function(a){this._submodels.indexOf(a)===-1?this._submodels.push(a):a.release()}.bind(this))},getAttributesToBeSaved:function(){var a=this.toJSON(),b={};return b[f.toAPIResource(this.resource_type)]=a,b},save:function(a,b){return g.Model.prototype.save.call(this,a,e.extend({url:this.saveUrl(),data:$.param(this.getAttributesToBeSaved())},b)).done(function(a){this.set(a),this.updateResourceId()}.bind(this))},saveUrl:function(){var a=e.result(this,"baseUrl");return this.isNew()&&(a=a.split("/").slice(0,-1).join("/")),a},destroy:function(a){return g.Model.prototype.destroy.call(this,e.extend({url:this.destroyUrl()},a))},destroyUrl:function(){return e.result(this,"baseUrl")},baseUrl:function(){throw new Error("baseUrl should be defined for every model")},url:function(a){var b=this.getSecretToken(),c=e.result(this,a||"baseUrl");return b?k.modify(c,{query:{secret_token:b}}):c},getSecretToken:function(){return this.get("secret_token")||i.get("widgetParams").secret_token},signedUrl:function(a){var b=this.get(a),c;return b?(c={scheme:"http",query:{client_id:i.get("client_id")}},h.isLoggedIn()&&(c.scheme="https",c.query.oauth_token=h.getAuthToken()),this.get("secret_token")&&(c.query.secret_token=this.get("secret_token")),k.modify(b,c)):null},toJSON:function(){var a=g.Model.prototype.toJSON.apply(this,arguments);return a._resource_id=this.resource_id,a._resource_type=this.resource_type,a},parse:function(a){var b;return typeof this.baseUrl=="string"&&(b=k.parse(this.baseUrl).query.secret_token),b||(b=this.extractSecretToken(a)),b&&(a.secret_token=b),a.permalink_url&&(a.permalink_url=a.permalink_url.replace(/^http:/,"https:").replace(/\/+$/,"")),a},extractSecretToken:$.noop,toString:function(){return this.resource_type?this.resource_type+" ("+(this.isNew()?"new":this.resource_id)+")"+": "+(this.attributes.permalink||this.attributes.title||this.attributes.name):Object.prototype.toString.call(this)},hasDataForView:function(a){return a.getRequiredAttributes(this).every(Object.prototype.hasOwnProperty,this.attributes)},updateResourceId:function(){var a=this.constructor.hashFn(this.attributes),b=this.resource_id;a&&(this.resource_id=a,this.constructor.instances.changeKey(b,a))},attrExists:function(a){var b=Object.prototype.hasOwnProperty;return e.isArray(a)?a.every(b,this.attributes):b.call(this.attributes,a)},getUrn:function(){if(this.urnPrefix&&this.id)return this.urnPrefix+":"+this.id},isPopulated:function(){return!!this.lastFetchTime}},{_resolve:function(a,b,c){var d=a.instances.find(c),e=$.Deferred(),f;return d?e.resolve(d):(f=k.stringify({path:"resolve",query:{url:k.stringify({scheme:document.location.protocol.replace(/:/,""),host:i.get("api_host").replace(/^https?:\/\/api\./,""),path:b}),"_status_code_map[302]":200,_status_format:"json"}}),$.getJSON(f).done(function(b){d=a.getNewInstance({}),d.baseUrl=b.location,d.fetch().done(function(){a.instances.add(d),d.release(),e.resolve(d)}).fail(e.reject)}).fail(e.reject)),e}}),c.exports=j.applyTo(d,{hashFn:function(a){return a&&a.id||null},onCleanup:function(a){a._submodels&&a._submodels.length&&(e.invoke(a._submodels,"release"),a._submodels.length=0)},prepareArgs:function(a,b){return b=b||{},a=a||{},b.parse&&(a=this.parse(a)),[a,b]},prepareInstance:function(a,b){return b=b||{},b.collection&&(this.lastFetchTime=Date.now()),e.isEmpty(a)||this.set(a),delete this.attributes.resource_id,this},getIncrementValue:function(a,b){var c=b&&b.collection;return c?c.constructor.instances.countFor(c.resource_id):1}})}),
define("models/sound",["require","exports","module","_","models/audible-interface","config","lib/mixins/has-image","lib/mixins/has-visuals","lib/mixins/throws-not-found","lib/model","lib/widget-audio","models/user","lib/url"],function(a,b,c){function o(a){var b=$.Deferred();return p(a).fail(b.reject).then(q).done(b.resolve).fail(b.reject),b}function p(a){var b=$.Deferred(),c=new d({id:a});return c.getUserId()?b.resolve(c.getUserId()):c.fetch().done(function(){b.resolve(c.getUserId())}).fail(b.reject),b.always(c.release.bind(c)),b}function q(a){var b=new m({id:a}),c=$.Deferred();return b.getPlan()?c.resolve(b):b.fetch({saveRequest:!0}).done(c.resolve.bind(c,b)).fail(c.reject.bind(c,b)),c.always(b.release.bind(b)),c}var d,e=a("_"),f=a("models/audible-interface"),g=a("config"),h=a("lib/mixins/has-image"),i=a("lib/mixins/has-visuals"),j=a("lib/mixins/throws-not-found"),k=a("lib/model"),l=a("lib/widget-audio"),m=a("models/user"),n=a("lib/url");d=c.exports=f.extend(h,i,j,{resource_type:"sound",urnPrefix:"soundcloud:tracks",audio:null,submodelMap:{user:m},playbackOptions:{},setup:function(){f.prototype.setup.apply(this,arguments),this.audio=new l(this),this.set("playable",!0),e.proxy(this.audio,this,"toggle","seek","isPaused","isPlaying","isLoading","loadProgress","currentTime"),["play","pause"].forEach(function(a){this[a]=function(b){this.playbackOptions=b||{},this.audio[a].call(this.audio,{userAction:this.playbackOptions.userAction})}},this)},isEmbeddable:function(a){a=a||this.toJSON();if(!document&&!this.lastFetchTime)return!0;var b=n.parse(document.referrer),c=a.domain_lockings||[],d=a.embeddable_by;return d==="none"?!1:c.length?e.any(c,function(a){var c=b.host&&b.host.match(n.parse(a.domain).host);return c&&c.length}):!0},baseUrl:function(){return n.stringify({path:["tracks",this.id]})},streamsUrl:function(){return n.stringify({path:["i1","tracks",this.id,"streams"],query:{secret_token:this.get("secret_token")}})},registerUrl:function(){return n.stringify({path:["tracks",this.id,"plays"],query:{referer:document.referrer,secret_token:this.get("secret_token"),policy:this.get("policy")}})},extractSecretToken:function(a){return n.parse(a.stream_url).query.secret_token},getSounds:function(){return[this]},getNumSounds:function(){return 1},getSoundAt:function(){return this},getCurrentSound:function(){return this},getFirstSound:function(){return this},getLastSound:function(){return this},getPrevSound:function(){return undefined},getNextSound:function(){return undefined},getSoundIndexAt:function(){return 0},getSoundIndex:function(a){return a===this?0:-1},isPlayable:function(){return this.get("playable")!==!1},isProcessing:function(){return this.get("state")!=="finished"},isEditing:function(){return!1},isShareable:function(){return this.get("embeddable_by")!=="none"&&!this.isPrivate()},getRelativeTrackLength:function(){return 1},areRelatedSoundsEnabled:function(){var a=this._relatedSoundsEnabledDefer,b;return a||(this._relatedSoundsEnabledDefer=a=$.Deferred(),this.isPrivate()?a.reject():(b=g.get("widgetParams").hide_related,o(this.id).done(function(c){b&&c.getPlan()===m.Plans.PRO_UNLIMITED?a.reject():a.resolve()}).fail(a.resolve))),a},getUserId:function(){var a=this.get("user");return a?a.id:null},updateCommentCount:function(a){var b=this.get("comment_count");this.set({comment_count:b+(a?1:-1)})},setMonetizableTrack:function(a){a.hold(),this.addSubmodel(a),this._monetizableTrack=a},getMonetizableTrack:function(){return this._monetizableTrack}},{resolve:function(a,b,c){return k._resolve(this,[a,b,c],function(c){var d=c.get("user");return d&&c.get("permalink")===b&&d.permalink===a})},getUserBySoundId:o})}),
define("lib/mixins/observing",["require","exports","module","_","lib/backbone","lib/mixin"],function(a,b,c){var d,e=a("_"),f=a("lib/backbone"),g=a("lib/mixin");d=c.exports=new g(e.extend({around:{set:function(a,b,c,d){var e=d&&d.silent,f,g;return e||(g=this.get(b)),f=a(b,c,d),!e&&g!==c&&this.trigger(b,{prev:g,current:c}),f},unset:function(a,b,c){var d=c&&c.silent,e,f;return d||(f=this.get(b)),e=a(b,c),!d&&f!==undefined&&this.trigger(b,{prev:f,current:undefined}),e}},before:{reset:function(a){(!a||!a.silent)&&this.each(function(a,b){this.trigger(b,{prev:this.get(b),current:undefined})},this)}}},f.Events))}),
define("config/client-ids",["require","exports","module"],function(a,b,c){c.exports={classic:{dev:"181fbe7e56ac80af29353323774890c3",staging:"8925a570bf9dc21c78991ddb5f4b2254",production:"0f8fdbbaa21a9bd18210986a7dc2d72c"},visual:{dev:"7582f2f46622ab908ba1d809f96ed037",staging:"3362fa8a84e2aff3385974f8adc7b38e",production:"a3e059563d7fd3372b49b37f00a00bcf"}}}),
define("lib/store",["require","exports","module","_"],function(a,b,c){var d,e=a("_"),f={};["each","forEach","map","find","detect","filter","select","reject","every","all","any","some","include","contains"].forEach(function(a){f[a]=function(){var b=[this._store];return b.push.apply(b,arguments),e[a].apply(e,b)}}),d=c.exports=Class.extend([f,{initialize:function(a){this._store={},this.length=0,this._final=!1,this.maxLength=a&&a.maxLength||!1,this.maxLength&&(this._keys=[])},maxLength:0,get:function(a){return this._store[a]},set:function(a,b){return this.has(a)?this.maxLength&&this._keys.splice(this._keys.indexOf(a),1):(++this.length,this.maxLength&&this.length>this.maxLength&&this.unset(this._keys[0])),this.maxLength&&this._keys.push(a),this._store[a]=b,this},unset:function(a){var b;return this.has(a)&&(--this.length,this._final?this._store[a]=b:(delete this._store[a],this.maxLength&&this._keys.splice(this._keys.indexOf(a),1))),this},reset:function(){return this._store={},this.maxLength&&(this._keys=[]),this._final=!1,this.length=0,this},has:function(a){return this._store.hasOwnProperty(a)},keys:function(){return Object.keys(this._store)},finalize:function(){this._final=!0}}])}),
define("views/buttons/cookie-policy.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".cookiePolicy{position:fixed;bottom:0;left:0;z-index:1000;padding:1px 3px;opacity:.8;font-size:10px;border-top-right-radius:2px}.cookiePolicy,.cookiePolicy:visited{color:#999}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/utils",["require","exports","module"],function(a,b,c){function i(a,b,c){return(a||"").replace(c,function(a,c){var d=b[c];return typeof d=="string"||typeof d=="number"?d:a})}var d=/[&<>\"\']/g,e=function(a){return"&#"+a.charCodeAt(0)+";"},f=/(&(lt|gt|quot|apos|amp|#\d+);|.)/gi,g={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},h=function(a,b,c){return g[c]||(c?String.fromCharCode(c.substring(1)):b)};c.exports={unescapeHTML:function(a){return(a||"").replace(f,h)},escapeHTML:function(a){return(a||"").replace(d,e)},supplant:function(a,b){return i(a,b,/\{([^\{\}]*)\}/g)},replaceCSSVariables:function(a,b){return i(a,b,/\$([\w-]*)/g)}}}),
define("vendor/i18n/i18n",["require","exports","module"],function(a,b,c){(function(){function d(){this.phrases={},this.locale=null}function e(b,c){return c?b.replace(a,function(a,b,d){return c[b||d]}):b}function f(a,c){return b[a](c)}function g(a){return Array.isArray(a)?a[0]:a.toString()}function h(){return 0}function i(a){return a!==1?1:0}function j(a){return a>1?1:0}function k(a){return a%10===1&&a%100!==11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2}function l(a){return a===1?0:a>=2&&a<=4?1:2}function m(a){return a===1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2}function n(a){return a%10!==1||a%100===11?1:0}function o(a){var b,c;for(var d=1,e=arguments.length;d<e;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function p(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)a[e]===void 0&&(a[e]=d[e])}return a}var a=/\[\[([a-zA-Z0-9_]+)\]\]|(%d)/g,b;d.prototype.setLocale=function(a){this.locale=a},d.prototype.extend=function(a){o(this.phrases,a)},d.prototype.t=function(a,b,c){var d=this.phrases[a]||a;return e.call(this,g(d),b)},d.prototype.tp=function(a,b,c,d,h){var i;return i=this.phrases[a]?this.phrases[a][f(this.locale,c)]:f("en",c)?b:a,e.call(this,g(i),p({"%d":c},d))},b={id:h,ja:h,ko:h,ms:h,th:h,tr:h,zh:h,da:i,de:i,en:i,es:i,fi:i,el:i,he:i,hu:i,it:i,nl:i,no:i,pt:i,sv:i,fr:j,tl:j,hr:k,ru:k,cs:l,pl:m,is:n},typeof c!="undefined"&&c.exports?c.exports=d:(window.SC=window.SC||{},window.SC.I18n=d)})()}),
define("config/locales/locale-en",["require","exports","module"],function(a,b,c){c.exports={"Hide share options":null,"Share track":null,"Share playlist":null,"Oops, we couldn't find that user.":null,"Oops, we couldn't find that track.":null,"Oops, we couldn't find that playlist.":null,"Oops, we couldn't find that group.":null,'`url` parameter is not a valid SoundCloud URL. <a href="https://soundcloud.com/pages/embed">Learn more</a> about using SoundCloud players.':null,'You need Adobe Flash to play sounds. Please <a href="http://get.adobe.com/flashplayer" target="_blank">install Flash</a> and reload the page.':null,"This playlist is empty.":null,"The owner of this track has not made this sound available for streaming in your location.":null,"Play on SoundCloud":null,Advertisement:null,"Why Ads?":null,Skip:null,"Your track will start in":null,"Track starts in":null,Buy:null,"Buy all":null,"Cookie policy":null,Download:null,"Follow back":null,Following:null,Follow:null,Join:null,Joined:null,Liked:null,Like:null,'Leave a comment at <span class="commentView__timestamp">[[timestamp]]</span>':null,"Sorry, something went wrong.":null,'Favorite tracks of <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>':null,'Spotlight tracks of <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>':null,'Latest tracks by <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>':null,'Tracks from the <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a> group':null,"Favorite tracks of [[username]]":null,"Spotlight tracks of [[username]]":null,"Latest tracks by [[username]]":null,"Tracks from the [[groupname]] group":null,"[[title]] by [[username]]":null,"Visit [[username]]s profile":null,"Go to this sets page":null,Email:null,Facebook:null,"Google+":null,Line:null,mixi:null,Orkut:null,Pinterest:null,"[[title]] on SoundCloud":null,"Share to [[title]]":null,"Pin it":null,Tuenti:null,Tumblr:null,Twitter:null,VK:null,Weibo:null,by:"by",Embed:null,WordPress:null,Link:null,"Open SoundCloud page":null,SoundCloud:null,"Hear more tracks like this":null,"Play more tracks by [[title]]":null,"Play another track by [[title]]":null,"Play more tracks like [[title]]":null,"Play another track like [[title]]":null,Play:null,Pause:null,"View track":null,"Explore more music & audio like":null,"On SoundCloud.":null,"Download the app":null,'Back to track in <span class="teaser__countdown"></span>':null,"Play another track":null,"Favorite tracks":null,"Featured tracks":null,"Latest tracks":null,"This track is being processed":null,"1 track":["1 track","[[number]] tracks"],"1 follower":["1 follower","[[number]] followers"],including:"including",'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a> including <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visit [[known_follower_name]]s profile">[[known_follower_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a> including <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visit [[known_follower_name]]s profile">[[known_follower_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] followers</a> including <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visit [[known_follower_name]]s profile">[[known_follower_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] followers</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a> including <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visit [[known_member_name]]s profile">[[known_member_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a> including <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visit [[known_member_name]]s profile">[[known_member_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] member</a> including <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visit [[known_member_name]]s profile">[[known_member_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] member</a>'],"1 play":null,track:["track","tracks"],playlist:["playlist","playlists"],user:["user","users"],group:["group","groups"]}}),
define("config/locales/locale-pt",["require","exports","module"],function(a,b,c){c.exports={"Hide share options":"Esconderopes de compartilhamento","Share track":"Compartilhar track","Share playlist":"Compartilhar","Oops, we couldn't find that user.":"Ops, no foi possvel encontrar esse usurio.","Oops, we couldn't find that track.":"Ops, no conseguimos encontrar essa track.","Oops, we couldn't find that playlist.":"Ops, no conseguimos encontrar essa lista de reproduo.","Oops, we couldn't find that group.":"Ops, no foi possvel encontrar esse grupo.",'`url` parameter is not a valid SoundCloud URL. <a href="https://soundcloud.com/pages/embed">Learn more</a> about using SoundCloud players.':'Parmetro `url` no  uma URL vlida da SoundCloud. <a href="https://soundcloud.com/pages/embed">Saiba mais</a> sobre o uso de players da SoundCloud.','You need Adobe Flash to play sounds. Please <a href="http://get.adobe.com/flashplayer" target="_blank">install Flash</a> and reload the page.':'Voc precisa do Adobe Flash para tocar sons. Por favor <a href="http://get.adobe.com/flashplayer" target="_blank">instale o Flash</a> e recarregue a pgina.',"This playlist is empty.":"Esta lista est vazia.","The owner of this track has not made this sound available for streaming in your location.":"O dono desta track no a disponibilizou em sua localizao.","Play on SoundCloud":"Oua na SoundCloud",Advertisement:"Material promocional","Why Ads?":"Por que anncios?",Skip:"Pular","Your track will start in":"Sua track comear em","Track starts in":"Track comea em",Buy:"Comprar","Buy all":"Comprar tudo","Cookie policy":"Poltica de Cookies",Download:"Baixar","Follow back":"Seguir de volta",Following:"Seguindo",Follow:"Seguir",Join:"Participar",Joined:"Cadastrado",Liked:"Curtidas",Like:"Curtir",'Leave a comment at <span class="commentView__timestamp">[[timestamp]]</span>':'Deixar um comentrio em <span class="commentView__timestamp">[[timestamp]]</span>',"Sorry, something went wrong.":"Desculpe, um erro ocorreu.",'Favorite tracks of <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>':'Tracks favoritas por <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>','Spotlight tracks of <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>':'Tracks de Spotlight <a class="sc-link-dark multiSoundDetails__link" href="[[link]]"> [[title]]</a>','Latest tracks by <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>':'ltimas faixas <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>','Tracks from the <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a> group':'Tracks do grupo <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a> ',"Favorite tracks of [[username]]":"Tracks favoritas por [[title]]","Spotlight tracks of [[username]]":"Tracks de Spotlight  [[title]]","Latest tracks by [[username]]":"ltimas faixas [[title]]","Tracks from the [[groupname]] group":"Tracks do grupo [[title]] ","[[title]] by [[username]]":"[[title]], [[username]]","Visit [[username]]s profile":"Visite o perfil do [[username]] ","Go to this sets page":"Ir para a pgina desta lista",Email:"Email",Facebook:"Facebook","Google+":"Google+",Line:"Linha",mixi:"mixi",Orkut:"Orkut",Pinterest:"Pinterest","[[title]] on SoundCloud":"[[Ttulo]] na SoundCloud","Share to [[title]]":"Compartilhar com [[title]]","Pin it":"Pin ",Tuenti:"Tuenti",Tumblr:"Tumblr",Twitter:"Twitter",VK:"VK",Weibo:"Weibo",by:"da",Embed:"Embutir",WordPress:"WordPress",Link:"Link","Open SoundCloud page":"Abrir SoundCloud",SoundCloud:"SoundCloud","Hear more tracks like this":"Oua mais tracks como esta","Play more tracks by [[title]]":"Tocar mais faixas por [[title]]","Play another track by [[title]]":"Tocar outra track por [[title]]","Play more tracks like [[title]]":"Tocar mais tracks como [[title]]","Play another track like [[title]]":"Tocar outra track como [[title]]",Play:"Play",Pause:"Pausa","View track":"Ver track","Explore more music & audio like":"Explorar mais tracks como","On SoundCloud.":"Na SoundCloud.","Download the app":"Baixe o aplicativo",'Back to track in <span class="teaser__countdown"></span>':'Voltar para track em <span class="teaser__countdown"></span>',"Play another track":"Tocar outra track","Favorite tracks":"Tracks favoritas","Featured tracks":"Tracks selecionadas","Latest tracks":"Tracks recentes","This track is being processed":"Essa track est sendo processada","1 track":["1 track","[[number]] tracks"],"1 follower":["1 seguidor","[[number]] seguidores"],including:"incluindo",'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a> including <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visit [[known_follower_name]]s profile">[[known_follower_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 seguidor</a> incluindo <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visite o perfil [[known_follower_name]]">[[known_follower_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] seguidores</a> incluindo <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visite o perfil [[known_follower_name]]">[[known_follower_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 seguidor</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] seguidores</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a> including <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visit [[known_member_name]]s profile">[[known_member_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">1 membro</a> incluindo <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visite o perfil [[known_member_name]]">[[known_member_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] membros</a> incluindo <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visite o perfil [[known_member_name]]">[[known_member_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">1 membro</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] membros</a>'],"1 play":"1 reproduo",track:["track","tracks"],playlist:["lista de reproduo","listas de reproduo"],user:["usurio","usurios"],group:["grupo","grupos"]}}),
define("lib/helpers/dom-helper",["require","exports","module"],function(a,b,c){var d;d=c.exports={insertScript:function(a,b){var c=document.createElement("script"),e=document.getElementsByTagName("head")[0],f,g;c.async=!0,c.src=a,b=b||{},f=b.removeAfterLoad?e.removeChild.bind(e,c):b.onload,g=b.onerror,(f||g)&&d.onScriptLoad(c,f,g),e.appendChild(c)},onScriptLoad:function(a,b,c){b&&(a.addEventListener?a.addEventListener("load",b,!1):a.readyState&&(a.onreadystatechange=b)),c&&(a.onerror=c)}}}),
define("lib/mixins/persistent",["require","exports","module","_","lib/mixin","lib/support"],function(a,b,c){function l(a,b){return[h,a,b].join(i)}function m(a){var b=a.storage;if(b)try{return b.setItem(a.keyName,JSON.stringify(a._store)),!0}catch(c){return!1}}function n(a){var b;return a==="local"&&g.localStorage?b=window.localStorage:a==="session"&&g.sessionStorage&&(b=window.sessionStorage),b}function o(a){var b={},c=a.storage;return c&&(b=JSON.parse(c.getItem(a.keyName)||"{}")),b}function p(a){var b,c,d,f,g;g={dontPersist:!0};if(!a.key){e.each(e.values(k.local).concat(e.values(k.session)),function(a){a.reset(g)});return}j.lastIndex=0,b=j.exec(a.key),b&&(d=b[1],c=b[2],d&&c&&(f=k[d][c],f&&e.each(o(f),function(a,b){f.set(b,a,g)})))}function q(){if(!g.localStorage)return;var a=[],b=localStorage.length,c,d;for(c=0;c<b;c++)d=localStorage.key(c),d.indexOf(h+i)!==0&&a.push(d);a.forEach(function(a){localStorage.removeItem(a)})}var d,e=a("_"),f=a("lib/mixin"),g=a("lib/support"),h="WIDGET",i="::",j=new RegExp("^"+h+i+"(\\S+?)"+i+"(\\S+)"),k={local:{},session:{}};q(),d=c.exports=new f({storage:null,keyName:null,type:null,namespace:null,around:{initialize:function(a,b,c){c=c||"local";if(k[c][b])return k[c][b];k[c][b]=this,a(),this.type=c,this.namespace=b,this.storage=n(c,b),this.keyName=l(c,b),this._store=o(this),this.length=e.keys(this._store).length}},after:{set:function(a,b,c){var d=!c||!c.dontPersist,e;d&&(e=m(this),e||this.unset(a))},unset:function(a,b){(!b||!b.dontPersist)&&m(this)},reset:function(a){(!a||!a.dontPersist)&&m(this)}},dispose:function(){this.storage.removeItem(this.keyName),this.reset({dontPersist:!0}),delete k[this.type][this.namespace]},write:function(){m(this)}}),window.addEventListener("storage",p,!1)}),
define("models/audible-interface",["require","exports","module","_","config/resources","config","lib/play-manager","config/widget-params","vendor/embed/embed","lib/helpers/datetime-helper","lib/model"],function(a,b,c){var d,e=a("_"),f=a("config/resources"),g=a("config"),h=a("lib/play-manager"),i=a("config/widget-params"),j=a("vendor/embed/embed"),k=a("lib/helpers/datetime-helper"),l=a("lib/model"),m;m=function(){throw new Error("Abstract method should be implemented in subclass")},d=c.exports=l.extend({isEmbeddable:m,isShareable:m,getCurrentSound:m,getSounds:m,getNumSounds:m,getSoundAt:m,getSoundIndex:m,getSoundIndexAt:m,getRelativeTrackLength:m,initAudio:function(){var a=this.getCurrentSound();a&&a.audio.initAudio()},setup:function(){this.on("destroy",this.pause,this)},isNowPlaying:function(){return h.getCurrentSound()===this},isPrivate:function(){return this.get("sharing")==="private"},isPlaylist:function(){return this.resource_type===f.PLAYLIST},likesChanged:function(a){this.set({likes_count:Math.max(0,(this.get("likes_count")||0)+(a?1:-1))})},getEmbedCode:function(a){var b=this.attributes,c=e.clone(g.get("widgetParams"));return e.each(c,function(a,b){b in i&&a===i[b]&&delete c[b]}),a=a||{},a.params=c,j(b,a)},getShareURL:function(){return this.get("permalink_url")+(this.isPrivate()?"/"+this.get("secret_token"):"")},getDeeplinkURL:function(a){var b=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g;return e.isUndefined(a)?a=this.currentTime()!==0?this.timecode():"":a=a.match(b)?b.exec(a)[0]:"",a&&(a="#t="+a),this.get("permalink_url")+a},play:m,pause:m,seek:m,isPlaying:m,isProcessing:m,isEditing:m,loadProgress:m,currentTime:m,toggle:function(){this[this.isPlaying()?"pause":"play"]()},stop:function(){this.seek(0),this.pause()},isPaused:function(){return!this.isPlaying()},seekRelative:function(a){this.seek(this.currentTime()+a)},duration:function(){return this.get("duration")},progress:function(){return this.currentTime()/this.duration()},timecode:function(){return k.timecode(this.currentTime())},toggleMute:function(a){var b=this.getCurrentSound();b&&b.audio.toggleMute(a)},getVolume:function(){var a=this.getCurrentSound(),b;return a&&(b=a.audio.getVolume()),b},setVolume:function(a){var b=this.getCurrentSound();b&&b.audio.setVolume(a)}})}),
define("lib/mixins/has-image",["require","exports","module","lib/mixin","config/resources"],function(a,b,c){var d,e=a("lib/mixin"),f=a("config/resources");d=c.exports=new e({before:{initialize:function(){switch(this.resource_type){case f.USER:this.imageAttribute="avatar_url";break;case f.GROUP:case f.PLAYLIST:case f.SOUND:this.imageAttribute="artwork_url"}if(!this.imageAttribute&&!1)throw new Error("This resource_type is not allowed, you might want to add it?")}}})}),
define("lib/mixins/throws-not-found",["require","exports","module","lib/mixin"],function(a,b,c){function f(a){$.mockjax({url:a+"*",status:404,responseTime:0})}var d,e=a("lib/mixin");d=c.exports=new e({applyTo:function(a,b){this.around(a,{baseUrl:function(a){var c=a();return b=b||"__SOURCE_NOT_FOUND__",c}})}})}),
define("collections/sounds",["require","exports","module","_","config/resources","lib/api-wrapper","lib/backbone","lib/url","models/sound","lib/collection","lib/mixins/can-be-empty","lib/mixins/throws-not-found"],function(a,b,c){function n(a){return a.resource_type=a.kind===f.PLAYLIST?f.PLAYLIST:f.SOUND,a}function o(a){return a.resource_type==="sound"}var d,e=a("_"),f=a("config/resources"),g=a("lib/api-wrapper"),h=a("lib/backbone"),i=a("lib/url"),j=a("models/sound"),k=a("lib/collection"),l=a("lib/mixins/can-be-empty"),m=a("lib/mixins/throws-not-found");d=c.exports=k.extend(l,m,{isEdgeBaseUrl:!1,model:j,defaults:{sounds_type:null,resource_type:null,resource_id:null},baseUrl:function(){var a=this.options;return(this.isEdgeBaseUrl?g.EDGE:"")+i.stringify({path:[a.resource_type,a.resource_id,a.sounds_type],query:e.result(this,"baseUrlQueryParams")})},baseUrlQueryParams:{},parse:function(a){return a.collection.map(n).filter(o)},_prepareModel:function(){var a=h.Collection.prototype._prepareModel.apply(this,arguments);if(a){if(!a.isEmbeddable())return!1;a.hold(this._usageCount()-1)}return a}})}),
define("lib/collection",["require","exports","module","lib/backbone","config","lib/single","lib/url","_"],function(a,b,c){var d,e=a("lib/backbone"),f=a("config"),g=a("lib/single"),h=a("lib/url"),i=a("_"),j={},k,l;d=e.Collection.extend({next_href:null,lastFetchTime:null,model:j,defaults:{offset:0,limit:5,secret_token:null},initialize:function(a,b){this.options=b=l(this.constructor,b||{}),this.setup(b)},setup:$.noop,_prepareModel:function(){var a=e.Collection.prototype._prepareModel.apply(this,arguments);return a&&a.hold(this._usageCount()-1),a},_removeReference:function(a){return a.release(this._usageCount()),e.Collection.prototype._removeReference.apply(this,arguments)},fetch:function(a){var b=this.url();return b?this._requests&&this._requests[b]||e.Collection.prototype.fetch.call(this,a).done(function(a){this.next_href=a.next_href||!1}.bind(this)):$.Deferred().done(a&&a.success).resolve({})},bulkFetch:function(a){var b=arguments[1],c=arguments[2],d,e;if(!b){this._requests=this._requests||{};if(this._requests.bulk)return this._requests.bulk;this._requests.bulk=b=$.Deferred(),b.always(function(){delete this._requests.bulk}.bind(this)),c=this.length,d=this.options.limit,this.next_href||(this.options.limit=a-this.length),b.always(function(){this.options.limit=d,k.call(this,{limit:d})}.bind(this))}return this.length<a&&this.url()?(this.lastFetchTime?e={add:!0}:e={},e.silent=!0,k.call(this,{limit:a-this.length}),this.fetch(e).done(function(){this.bulkFetch(a,b,c)}.bind(this)).fail(b.reject)):(c?this.rest(c).forEach(function(a){this.trigger("add",a,this)},this):this.trigger("reset",this,{}),b.resolve()),b},url:function(){if(this.next_href!==null)return this.next_href;var a=h.parse(i.result(this,"baseUrl"));return i.extend(a.query,{limit:this.options.limit,offset:this.options.offset,linked_partitioning:1,secret_token:this.getSecretToken()}),h.stringify(a)},getSecretToken:function(){return this.options.secret_token||f.get("widgetParams").secret_token},parse:function(a){return a.collection},hasDataForView:function(){return!!this.lastFetchTime},isPopulated:function(){return!!this.lastFetchTime},isFullyPopulated:function(){return this.next_href===!1},setLimit:function(a){this.options.limit=a,this.next_href&&(this.next_href=h.modify(this.next_href,{query:{limit:a}}))},random:function(){return this.at(Math.floor(Math.random()*this.length))}}),d=c.exports=g.applyTo(d,{hashFn:function(a,b){return b&&b.resource_id||null},onHold:function(a,b,c){a.length&&a.at(0).hold&&a.invoke("hold",c)},onRelease:function(a){a.length&&a.at(0).release&&a.invoke("release")}}),l=function(a,b){return i.defaults(b,a.prototype.defaults),a===d?b:l(a.__super__.constructor,b)},k=function(a){if(this.next_href){var b=h.parse(this.next_href);i.extend(b.query,a),this.next_href=h.stringify(b)}}}),
define("lib/math",["require","exports","module"],function(a,b,c){var d=c.exports={sort:function(a){return a.sort(function(a,b){return a-b})},isInRange:function(a,b){return b=d.sort(b),a>=b[0]&&a<=b[1]},precise:function(a,b){return b=Math.pow(10,b||0),Math.round(a*b)/b},clamp:function(a,b,c){return Math.min(c,Math.max(b,a))},randomRange:function(a,b){return Math.random()*(b-a)+a}}}),
define("lib/views/progress.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".progress{pointer-events:none;position:fixed;z-index:100;top:0;left:0;width:100%;height:3px;-webkit-transform:translate3d(-100%,0,0);-ms-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);opacity:1;-webkit-transition:-webkit-transform .2s ease,opacity .6s linear;transition:transform .2s ease,opacity .6s linear}.progress.hidden{opacity:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("config/resources",["require","exports","module"],function(a,b,c){c.exports={GROUP:"group",GROUP_SOUNDS:"group-sounds",PLAYLIST:"playlist",SOUND:"sound",USER:"user",USER_FAVORITES:"user-favorites",USER_SOUNDS:"user-sounds",USER_SPOTLIGHT:"user-spotlight"}}),
define("lib/helpers/environment-helper",["require","exports","module"],function(a,b,c){var d;d=c.exports={getFlashPlugin:function(){var a,b,c,d;if(typeof window.ActiveXObject!="undefined")try{d=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d&&(a=d.GetVariable("$version"))}catch(e){}else navigator.plugins&&navigator.plugins.length>0&&(c="application/x-shockwave-flash",b=navigator.mimeTypes,b&&b[c]&&b[c].enabledPlugin&&b[c].enabledPlugin.description&&(a=b[c].enabledPlugin.description));return a},getFlashVersion:function(){var a=this.getFlashPlugin().match(/\d\S+/)[0].replace(/,/g,".").split(".");return[a[0],a[1]].join(".")},getOperatingSystem:function(){var a=navigator.appVersion;return a.indexOf("Win")!==-1?"Windows":a.indexOf("Mac")!==-1?"MacOS":a.indexOf("X11")!==-1?"UNIX":a.indexOf("Linux")!==-1?"Linux":"undefined-OS"},getBrowser:function(){var a=navigator.userAgent,b=a.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),c=a.match(/version\/([\.\d]+)/i),d,e;return e=b&&c!==null?c[1]:b[2],d=b?[b[1],e]:[navigator.appName,navigator.appVersion],d.join()}}}),
define("lib/analytics",["require","exports","module","_","config","vendor/event-logger/event-logger","lib/math","vendor/includes/comscore","vendor/includes/google-analytics"],function(a,b,c){var d,e=a("_"),f=a("config"),g=a("vendor/event-logger/event-logger"),h=a("lib/math"),i=a("vendor/includes/comscore"),j=a("vendor/includes/google-analytics");d=c.exports={initialize:function(){e.invoke([j],"include"),g.initialize({id:f.get("client_application_id"),origin:(window.location.search.match(/(?:\?|&)origin=(\w+)/)||[])[1]})},trackAudioEvent:function(a){var b=f.get("me").id||null,c=a.action,d=h.precise(a.duration/1e3,1),e=a.level,i=a.source||{},j=a.urn.split(":")[2];g.audio({action:c,ad_urn:a.ad_urn,checkpointInterval:a.checkpointInterval,duration:d,external_media:a.external_media,id:j,level:e,monetization_type:a.monetization_type,monetized_object:a.monetized_object,promoted_by:a.promoted_by,policy:a.policy,source:i.type||null,sourceVersion:i.version||null,trigger:a.trigger,user:b})},trackAppLoad:function(a,b,c){g.appLoad(b,{level:a,latency:c})},trackPageView:function(a){i.include();var b=f.get("me").id||null,c=a.level,d=a.chapter;g.pageview(b,c,d)},trackClick:function(a,b){var c=f.get("me").id||null,d=a.level,e=a.chapter;g.click(c,d,e,b)},trackImpression:function(a,b,c,d){g.impression(c,a,d)}}}),
define("lib/css",["require","exports","module","_","lib/browser"],function(a,b,c){var d,e=a("_"),f=a("lib/browser"),g=document.getElementsByTagName("head")[0],h=f.isIE9,i,j;h&&(i=document.createElement("style"),j=[]),d=c.exports={insert:function(a,b){e.isArray(a)||(a=[a]),a.forEach(function(a){if(h){if(j.indexOf(a)>-1)return;j.push(a),i.innerText+=b?b(a.innerHTML):a.innerHTML,a=i}a.parentNode||(!h&&b&&(a.innerHTML=b(a.innerHTML)),g.appendChild(a))})}}}),
define("lib/views/mixins/stateful",["require","exports","module","_","lib/mixin"],function(a,b,c){var d,e=a("_"),f=a("lib/mixin");d=c.exports=new f({states:null,_states:null,toggleState:function(a,b){var c,d;return this.disposed?this:(this.states||(this.states={}),this.states[a]||(this.states[a]=a),this._states=this._states||{},this._states[a]=this._states[a]||!1,b=typeof b!="undefined"?!!b:!this._states[a],this._states[a]===b?this:(this._states[a]=b,c=this.states[a],typeof c=="string"?(d=c,this.$el[b?"addClass":"removeClass"](d)):e.isFunction(c)?c.call(this,b):c&&c[b?"setup":"teardown"].call(this),this.trigger("state:"+a,b),this))},getState:function(a){return!!this._states&&!!this._states[a]}})}),
define("lib/template",["require","exports","module","vendor/handlebars-runtime","lib/subview-plugin","lib/template-helpers","_"],function(a,b,c){var d,e=a("vendor/handlebars-runtime"),f=a("lib/subview-plugin"),g=a("lib/template-helpers"),h=a("_");h.each(g,function(a,b){e.registerHelper(b,a)}),d=c.exports={render:function(a,b,c){var d=a(b||{}),e,f,g;return c?(h.isArray(c)?(e=c[0],f=c[1],g=document.createElement(e),f&&$(g).attr(f)):g=c,g.innerHTML=d,g):d},subviews:function(a){f.replacePlaceholders(a)}}}),
define("lib/customization",["require","exports","module","config","vendor/color/color"],function(a,b,c){function m(a){var b=a.hue(n(a));return a.diff(b.hex()).brightness<i&&b.darken(5),b}function n(a){var b=a.toHsl();return(b.h<=180?"-":"+")+(b.l>=25&&b.l<=75?"12":"24")}var d,e=a("config"),f=a("vendor/color/color"),g="#FFFFFF",h="#333333",i=20,j=10,k=15,l;d=c.exports={getColorParams:function(){if(!l){var a=f(e.get("widgetParams").color);l={mainColor:a.hex(),mainContrastColor:a.contrast(g,h).hex(),mainColorShade:m(a).hex(),mainColorDarker:a.darken(j).hex(),mainColorLighter:a.lighten(k).hex()}}return l}}}),
define("lib/mixin",["require","exports","module","_"],function(a,b,c){function g(a,b){this.applyTo=function(c){a.applyTo(c,b)}}var d,e=a("_"),f=["before","after","around","requires","override","defaults","applyTo"];d=c.exports=Class.extend({initialize:function(a){this.properties=a},withOptions:function(a){return new g(this,a)},applyTo:function(a){var b=this.properties;this.requires(a,b.requires),this.extend(a,b),this.defaults(a,b.defaults),this.override(a,b.override),this.before(a,b.before),this.after(a,b.after),this.around(a,b.around),b.applyTo&&b.applyTo.apply(this,arguments)},before:function(a,b){e.each(b,function(b,c){var d=a[c];a[c]=function(){return b.apply(this,arguments),d.apply(this,arguments)}})},after:function(a,b){e.each(b,function(b,c){var d=a[c];a[c]=function(){var a=d.apply(this,arguments);return b.apply(this,arguments),a}})},around:function(a,b){e.each(b,function(b,c){var d=a[c],f=Array.prototype.slice;a[c]=function(){var a=f.apply(arguments);return a.unshift(d.bind(this)),b.apply(this,a)}})},override:function(a,b){e.extend(a,b)},defaults:function(a,b){e.each(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})},extend:function(a,b){e.each(b,function(b,c){f.indexOf(c)<0&&(a[c]=b)})},requires:function(a,b){}}),g.prototype=d.prototype}),
define("lib/single",["require","exports","module","_","backbone","lib/gc-store"],function(a,b,c){var d=a("_"),e=a("backbone"),f=a("lib/gc-store"),g=$.noop,h=0,i=6e4,j;c.exports={applyTo:function k(a,b){b=d.extend({neverRelease:!1,cleanupInstantly:!1,hashFn:function(){return null},prepareArgs:function(){return arguments},prepareInstance:function(){return this},getIncrementValue:function(){return 1},onHold:g,onRelease:g,onCleanup:null,GC_INTERVAL:i},b,a),delete b.prototype;var c,l=a.extend||e.Model.extend,m=b.neverRelease,n,o,p,q,r,s;return c=new f({autoCleanup:b.cleanupInstantly,onCleanup:b.onCleanup,onIncrement:b.onHold,onDecrement:b.onRelease}),m?p=q=r=g:(r=function(){c.cleanup(),o=c.length?setTimeout(r,b.GC_INTERVAL):null},p=function(a){c.increment(this.resource_id,a)},q=function(a){c.decrement(this.resource_id,a)}),s={hold:p,release:q,_usageCount:function(){return c.countFor(this.resource_id)},constructor:function(){var d=n.prepareArgs.apply(this,arguments),e=n.hashFn.apply(this,d)||"f-"+ ++h,f=n.neverRelease?1:n.getIncrementValue.apply(null,d),g=c.get(e);if(g)return this.constructor.neverRelease||g.hold(f),n.prepareInstance.apply(g,d),g;g=this,!o&&!n.cleanupInstantly&&(o=setTimeout(r,b.GC_INTERVAL)),c.set(e,g),g.constructor.neverRelease||g.hold(f-1),g.resource_id=e,j(a).apply(g,d),n.prepareInstance.apply(g,d)}},n=l.call(a,s,b),d.extend(n,{__constructor__:j(a),reset:function(){c.reset(),o&&(clearTimeout(o),o=null)},extend:function(b){var c,e;return b=b||{},d.isArray(b)&&(b=d.extend.apply(null,[{}].concat(b))),b.hasOwnProperty("constructor")||(b.constructor=j(a)),c=l.apply(n,arguments),c.extend=l,e=k(c,n),e.__super__&&(e.__super__=e.__super__.constructor.__super__),e},instances:function(){return c.add=function(a){var b=n.hashFn(a.attributes);a.resource_id=b,b&&this.set(b,a)},c}(),getNewInstance:function(){function d(){return j(a).apply(this,b)}var b=arguments,c;return d.prototype=n.prototype,c=new d,c}})}},j=function(a){return a.__constructor__||a}}),
define("lib/mixins/has-visuals",["require","exports","module","_","lib/circuit-breaker","config","lib/mixin","lib/url","models/visuals-list","collections/sound-visuals"],function(a,b,c){function o(a){return a&&a.attrs&&a.attrs.indexOf("visuals")>-1}function p(a){var b=a&&a.attrs;return!b||b.length>1||b[0]!=="visuals"}function q(){var a=i.stringify({path:"/visuals",query:{urn:this.getUrn()}},g.get("visualsHost"));return a}var d,e=a("_"),f=a("lib/circuit-breaker"),g=a("config"),h=a("lib/mixin"),i=a("lib/url"),j=a("models/visuals-list"),k=a("collections/sound-visuals"),l=5e3,m,n;d=c.exports=new h({_lastVisualsFetch:null,around:{fetch:function(a,b){var c,d,g;return m||(m=new f({giveUp:1})),g=[],p(b)&&g.push(a(b)),o(b)&&(n||(n=new j),n.fetch(),!this._lastVisualsFetch&&this.get("visuals")==null?(this._lastVisualsFetch=d=$.Deferred(),this.mayHaveVisuals()?m.enabled?$.ajax({dataType:"json",url:q.call(this),timeout:l}).done(function(a){var b=a.visuals||this.get("visuals")||{},c;b&&this.resource_type==="sound"&&(c=new k(e.map(b,function(a){if(a.entry_time!=null)return a.id=a.entry_time,a}).filter(e.identity),{resource_id:this.resource_id}),c.lastFetchTime=Date.now(),c.release()),this.set("tracking",a.tracking||{}),this.set("visuals",b)}.bind(this)).always(function(a,b,c){c==="timeout"&&m.failed(),this.set("visuals",this.get("visuals")),d.resolve()}.bind(this)):(this.set("visuals",this.get("visuals")),d.resolve()):(d.resolve(),this.set("visuals",{}))):d=this._lastVisualsFetch,d&&g.push(d)),c=$.Deferred(),$.whenAll(g).done(function(a){c.resolve.apply(null,a)}).fail(c.reject),c}},mayHaveVisuals:function(){return!n||n.get(this.getUrn())!==!1},hasVisuals:function(){return!e.isEmpty(this.get("visuals"))}})}),
define("lib/widget-audio",["require","exports","module","lib/audiomanager","lib/browser","lib/event-bus","vendor/event-logger/event-logger","vendor/scaudio/scaudio"],function(a,b,c){function l(a,b,c){var d=m.call(this,b,a);d.forEach(function(b){var d={sound:a,model:a,controller:this.controller,args:c};g.trigger("audio:"+b,d),a.trigger(b,d)},this);switch(b){case k.STREAMS:case k.NO_STREAMS:a.set("playable",!!this.streamInfo);break;case k.NO_PROTOCOL:case k.FLASH_NOT_LOADED:case k.AUDIO_ERROR:a.set("playable",!1);break;case k.REGISTERED:a.set("playback_count",a.get("playback_count")+1)}}function m(a,b){var c="";switch(a){case k.PLAY:c="play-intent";break;case k.PLAY_START:c="play";break;case k.PAUSE:c="pause";break;case k.FINISH:c="finish";break;case k.SEEKED:c="seeked";break;case k.FLASH_BLOCK:c="flash-block";break;case k.FLASH_UNBLOCK:c="flash-unblock";break;case k.TIME:c="time",this.progressEvents.length&&b.progress()>=this.progressEvents[0].value&&(c+=" "+this.progressEvents.shift().name)}return c?c.split(" "):[]}var d,e=a("lib/audiomanager"),f=a("lib/browser"),g=a("lib/event-bus"),h=a("vendor/event-logger/event-logger"),i=a("vendor/scaudio/scaudio"),j=[{name:"progress-10",value:.1},{name:"progress-95",value:.95}],k=i.Events;d=c.exports=i.extend({constructor:function(a){i.prototype.constructor.call(this,e,{soundId:a.id,duration:a.duration.bind(a),registerEndpoint:a.registerUrl.bind(a),streamUrlsEndpoint:a.streamsUrl.bind(a),asyncFetch:!f.isMobile,protocols:[i.Protocols.HLS,i.Protocols.RTMP,i.Protocols.HTTP],debug:!1}),this.progressEvents=j.slice(),this.on("all",l.bind(this,a),this)},logAudioPerformance:function(a){h.audioPerformance(a)}})}),
define("vendor/embed/embed",["require","exports","module"],function(a,b,c){(function(){var a,b,d,e,f,g,h,i;a={html5:{allowed_params:["url","auto_play","color","show_artwork"],supported_types:["track","playlist","group","user","app"],root_url:"https://w.soundcloud.com/player/",template:'<iframe width="100%" height="{height}" scrolling="no" frameborder="no" src="{src}"></iframe>',height:{single:166,multi:450}},flash:{allowed_params:["url","auto_play","color","show_artwork","show_comments","show_playcount"],supported_types:["track","playlist","group","user"],root_url:"https://player.soundcloud.com/player.swf",template:'<object height="{height}" width="100%"><param name="movie" value="{src}"></param><param name="allowscriptaccess" value="always"></param><embed allowscriptaccess="always" src="{src}" type="application/x-shockwave-flash" width="100%" height="{height}"></embed></object>',height:{single:81,multi:165}},mini:{allowed_params:["url","auto_play","color","player_type","font"],supported_types:["track","playlist","group","user"],root_url:"https://player.soundcloud.com/player.swf",template:'<object height="18" width="100%"><param name="movie" value="{src}"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param><embed wmode="transparent" allowscriptaccess="always" height="18" width="100%" src="{src}"></embed></object>',height:{single:18,multi:18}},artwork:{allowed_params:["url","auto_play","color","player_type"],supported_types:["track","playlist","group","user"],root_url:"https://player.soundcloud.com/player.swf",template:'<object height="{height}" width="{height}"><param name="movie" value="{src}"></param><param name="allowscriptaccess" value="always"></param><embed allowscriptaccess="always" width="{height}" height="{height}" src="{src}" type="application/x-shockwave-flash"></embed></object>',height:{single:300,multi:300}}},h={track:'<span><a href="{resource_url}">{resource_title}</a> by <a href="{user_url}">{user_name}</a></span>',playlist:'<span><a href="{resource_url}">{resource_title}</a> by <a href="{user_url}">{user_name}</a></span>',user:'<span>Latest sounds by <a href="{resource_url}">{resource_title}</a></span>',group:'<span><a href="{resource_url}">{resource_title}</a></span>'},b=function(a){return[].slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},g={render:function(a,b){var c=/\{([^\{\}]*)\}/g;return b.replace(c,function(b,c){var d=a[c];return typeof d=="string"||typeof d=="number"?d:b})},html:function(b,c){var d=a[c.type].template,e=c.text?h[b.resource_type]||"":"";return this.render(b,d)+this.render(b,e)},wordpress:function(a,b){var c=b.type==="html5",d=a.api_url,e=i(b.params,b.type).replace(/&amp;/g,"&"),f=b.type==="artwork"?a.height:"100%";return'[soundcloud url="'+d+'"'+(e.length?' params="'+e+'"':"")+' width="'+f+'" height="'+a.height+'" iframe="'+c+'" /]'}},e=function(c,e){var h={type:"html5",format:"html",text:!1},j=d(c),k,l;e=b(h,e),e.params=b({},e.params),l=a[e.type];if(l.supported_types.indexOf(c.kind)===-1)return!1;if(e.type==="artwork"||e.type==="mini")e.params.player_type=e.type.replace("mini","tiny");e.type==="flash"&&(e.text=!0),k={user_name:c.user?c.user.username:null,user_url:c.user?c.user.permalink_url.replace(/^http:/,"https:"):null,resource_title:c.title||c.name||c.username,resource_url:c.permalink_url.replace(/^http:/,"https:"),resource_type:c.kind,api_url:j,height:f(c,e,l),params:e.params,src:[l.root_url,"?",i(b({url:j},e.params),e.type)].join("")};if(g[e.format])return g[e.format](k,e)},d=function(a){var b=a.secret_uri||a.uri,c=a.sharing==="public";return c&&(b=b.replace(/\?secret_token=([^&]*)/,"")),b.replace(/^http:/,"https:")},i=function(b,c){var d,e,f,g,h,i,j=[];if(b)for(d in b)if(b.hasOwnProperty(d)&&a[c].allowed_params.indexOf(d)!==-1){g=b[d];if(g!==null&&g!==h)if(typeof g=="object"){f=g.length;for(e=0;e<f;++e)j.push(encodeURIComponent(d)+"="+encodeURIComponent(g[e]).replace(/%2F/g,"/"))}else j.push(encodeURIComponent(d)+"="+encodeURIComponent(g).replace(/%2F/g,"/"))}return j.join("&amp;")},f=function(a,b,c){return b.height?b.height:a.kind==="track"?c.height.single:c.height.multi},typeof c!="undefined"&&c.exports?c.exports=e:(window.SC=window.SC||{},window.SC.getEmbedCode=e)})()}),
define("lib/helpers/datetime-helper",["require","exports","module"],function(a,b,c){var d,e=1e3,f=60*e,g=60*f;d=c.exports={timecode:function(a){var b,c;return isNaN(a)?a:(b=[],c={h:Math.floor(a/g),m:Math.floor(a/f%60),s:Math.floor(a/e%60)},c.h>0&&b.push(c.h),b.push(c.m<10&&c.h>0?"0"+c.m:c.m,c.s<10?"0"+c.s:c.s),b.join(":"))}}}),
define("lib/mixins/can-be-empty",["require","exports","module","lib/mixin"],function(a,b,c){function f(a){$.mockjax({url:a+"*",responseTime:0,responseText:'{"collection":[]}'})}var d,e=a("lib/mixin");d=c.exports=new e({applyTo:function(a,b){this.around(a,{baseUrl:function(a){var c=a();return b=b||"__NO_SOUNDS__",c}})}})}),
define("vendor/includes/comscore",["require","exports","module","lib/helpers/dom-helper"],function(a,b,c){var d,e=a("lib/helpers/dom-helper");d=c.exports={include:function(){var a=window._comscore=window._comscore||[];a.push({c1:"7",c2:"16601931",c3:"43164"}),e.insertScript("https://sb.scorecardresearch.com/beacon.js")}}}),
define("vendor/includes/google-analytics",["require","exports","module","lib/helpers/dom-helper"],function(a,b,c){var d,e=a("lib/helpers/dom-helper");d=c.exports={include:function(){var a=window._gaq=window._gaq||[];a.push(["_setAccount","UA-2519404-20"],["_gat._anonymizeIp"],["_trackPageview"]),e.insertScript("https://ssl.google-analytics.com/ga.js")}}}),
define("vendor/handlebars-runtime",["require","exports","module"],function(a,b,c){var d={};c.exports=d,d.VERSION="1.0.beta.5",d.helpers={},d.partials={},d.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},d.registerPartial=function(a,b){this.partials[a]=b},d.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")});var e=Object.prototype.toString,f="[object Function]";d.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,g="",h=e.call(a);h===f&&(a=a.call(this));if(a===!0)return d(this);if(a===!1||a==null)return c(this);if(h==="[object Array]"){if(a.length>0)for(var i=0,j=a.length;i<j;i++)g+=d(a[i]);else g=c(this);return g}return d(a)}),d.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;f<g;f++)e+=c(a[f]);else e=d(this);return e}),d.registerHelper("if",function(a,b){var c=e.call(a);return c===f&&(a=a.call(this)),!a||d.Utils.isEmpty(a)?b.inverse(this):b.fn(this)}),d.registerHelper("unless",function(a,b){var c=b.fn,e=b.inverse;return b.fn=e,b.inverse=c,d.helpers["if"].call(this,a,b)}),d.registerHelper("with",function(a,b){return b.fn(a)}),d.registerHelper("log",function(a){d.log(a)}),d.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},d.Exception.prototype=new Error,d.SafeString=function(a){this.string=a},d.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,e=function(b){return a[b]||"&amp;"};d.Utils={escapeExpression:function(a){return a instanceof d.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,e):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),d.VM={template:function(a){var b={escapeExpression:d.Utils.escapeExpression,invokePartial:d.VM.invokePartial,programs:[],program:function(a,b,c){var e=this.programs[a];return c?d.VM.program(b,c):e?e:(e=this.programs[a]=d.VM.program(b),e)},programWithDepth:d.VM.programWithDepth,noop:d.VM.noop};return function(c,e){return e=e||{},a.call(b,d,c,e.helpers,e.partials,e.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,e,f,g){var h={helpers:e,partials:f,data:g};if(a===undefined)throw new d.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,h);if(!d.compile)throw new d.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");return f[b]=d.compile(a),f[b](c,h)}},d.template=d.VM.template}),
define("lib/subview-plugin",["require","exports","module","_"],function(a,b,c){function g(b,c){var d=b.getAttribute("data-id"),f=e[d],g,h,i;f.__path?(h=a(f.__path),delete f.__path):(h=f.__class,delete f.__class),delete e[d],f.key&&(i=f.key,delete f.key),g=c.addSubview(new h(f),i),g.render(),b.parentNode.replaceChild(g.el,b)}function h(b,c){var g,h;return typeof b=="string"?(c.hash.__path=b,h=a(b)):(c.hash.__class=b,h=b),c.hash.args&&(d.isFunction(c.hash.args)&&(c.hash.args=c.hash.args(this)),c.hash=d.extend({},c.hash.args,c.hash)),delete c.hash.args,c.hash.className&&(c.hash.className=[h.prototype.className,c.hash.className].filter(Boolean).join(" ")),g=f++,e[g]=c.hash,'<view data-id="'+g+'"></view>'}function i(a){a.$("view").each(function(){g(this,a)})}var d=a("_"),e={},f=0;b.handlebarHelper=h,b.replacePlaceholders=i}),
define("lib/template-helpers",["require","exports","module","vendor/handlebars-runtime","lib/helpers/datetime-helper","lib/helpers/number-helper","lib/helpers/image-helper","lib/helpers/lang-helper","lib/lingua","lib/subview-plugin","vendor/usertext/usertext"],function(a,b,c){var d,e=a("vendor/handlebars-runtime"),f=a("lib/helpers/datetime-helper"),g=a("lib/helpers/number-helper"),h=a("lib/helpers/image-helper"),i=a("lib/helpers/lang-helper"),j=a("lib/lingua"),k=a("lib/subview-plugin"),l=a("vendor/usertext/usertext");d=c.exports={$debug:function(){return window.console.log.apply(window.console,[].slice.call(arguments,0,arguments.length-1)),""},$image:function(a,b){return new e.SafeString(h.markup(a,b.hash))},$timecode:f.timecode,$view:function(){return new e.SafeString(k.handlebarHelper.apply(this,arguments))},$plural:i.plural,$shortnumber:g.shorten,$formatnumber:g.format,$usertextOneline:function(){var a=l.withDefaults({paragraphs:!1,whitelist:[],externalLinks:!1});return function(b,c){if(c.hash.escapeExpression===undefined||c.hash.escapeExpression)b=e.Utils.escapeExpression(b);return new e.SafeString(a(b,c.hash))}}(),$t:function(a,b){return new e.SafeString(j.t.call(this,a,b.hash))},$tp:function(a,b,c,d){return new e.SafeString(j.tp.call(this,a,b,c,d.hash))}}}),
define("lib/gc-store",["require","exports","module","lib/store","lib/mixins/usage-counting"],function(a,b,c){var d,e=a("lib/store"),f=a("lib/mixins/usage-counting");d=c.exports=e.extend(),f.applyTo(d.prototype)}),
define("models/visuals-list",["require","exports","module","_","config","lib/model","lib/url"],function(a,b,c){var d,e=a("_"),f=a("config"),g=a("lib/model"),h=a("lib/url");d=c.exports=g.extend({_hasFetched:!1,url:function(){return h.modify(f.get("visualsHost"),{path:"/visual_owners"})},parse:function(a){return this._hasFetched=!0,a.visual_owners.reduce(function(a,b){return a[b]=!0,a},{})},fetch:function(a){return g.prototype.fetch.call(this,e.defaults({saveRequest:!0},a))},get:function(a){return this._hasFetched?g.prototype.get.call(this,a)||!1:undefined},reset:function(){this._hasFetched=null,delete this._requests,Object.keys(this.attributes).forEach(function(a){this.unset(a)},this)}},{hashFn:function(){return 1},neverRelease:!0})}),
define("collections/sound-visuals",["require","exports","module","_","lib/collection","config","models/sound-visual","lib/url","lib/helpers/urn-helper"],function(a,b,c){var d,e=a("_"),f=a("lib/collection"),g=a("config"),h=a("models/sound-visual"),i=a("lib/url"),j=a("lib/helpers/urn-helper"),k=1e3;d=c.exports=f.extend({model:h,_isLooping:!1,_loopInterval:null,baseUrl:function(){return i.stringify({path:"/visuals",query:{urn:"soundcloud:sounds:"+this.resource_id}},g.get("visualsHost"))},isLooping:function(){return this._isLooping},getLoopInterval:function(){return this._loopInterval},parse:function(a){var b=a&&a.visuals;return b?(b=e.map(b,function(a){return a.id=j.getAsAttributes(a.urn).id,a.filename=a.visual_url.split("/").pop(),a}),a.is_looping&&a.loop_interval&&(this._isLooping=!0,this._loopInterval=Math.max(k,a.loop_interval)),b):this.toJSON()}})}),
define("lib/audiomanager",["require","exports","module","lib/browser","config","vendor/audiomanager/audiomanager","lib/event-bus"],function(a,b,c){function j(a){var b=a.controller,c=$(b.getContainerElement()),g=$(".playButton"),h=g.offset(),i=b.getState()===d.States.ERROR;if(e.isGecko){f.get("appView").$el.append(c),c.toggleClass("fullscreen",i);return}c.toggleClass("blocked",i).css({top:i?h.top:0,left:i?h.left:0})}var d,e=a("lib/browser"),f=a("config"),g=a("vendor/audiomanager/audiomanager"),h=a("lib/event-bus"),i=1e3/60;c.exports=d=new g({flashAudioPath:"/player/assets/swf/flashAudio-e3e74daf.swf",flashObjectID:"flashAudioObject",flashLoadTimeout:500,updateInterval:i,debug:!1}),d.Errors=g.Errors,d.States=g.States,d.UPDATE_INTERVAL=i,h.one("audio:flash-block audio:flash-unblock",j)}),
define("vendor/scaudio/scaudio",["require","exports","module"],function(a,b,c){(function(a,b){typeof c!="undefined"&&c.exports?c.exports=b():a.SCAudio=b()})(this,function(){var a,b,c;return function(d){function p(a,b){return m.call(a,b)}function q(a,b){var c,d,e,f,g,h,i,j,l,m,n,p=b&&b.split("/"),q=k.map,r=q&&q["*"]||{};if(a&&a.charAt(0)===".")if(b){p=p.slice(0,p.length-1),a=a.split("/"),g=a.length-1,k.nodeIdCompat&&o.test(a[g])&&(a[g]=a[g].replace(o,"")),a=p.concat(a);for(l=0;l<a.length;l+=1){n=a[l];if(n===".")a.splice(l,1),l-=1;else if(n==="..")if(l!==1||a[2]!==".."&&a[0]!=="..")l>0&&(a.splice(l-1,2),l-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((p||r)&&q){c=a.split("/");for(l=c.length;l>0;l-=1){d=c.slice(0,l).join("/");if(p)for(m=p.length;m>0;m-=1){e=q[p.slice(0,m).join("/")];if(e){e=e[d];if(e){f=e,h=l;break}}}if(f)break;!i&&r&&r[d]&&(i=r[d],j=l)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function r(a,b){return function(){return f.apply(d,n.call(arguments,0).concat([a,b]))}}function s(a){return function(b){return q(b,a)}}function t(a){return function(b){i[a]=b}}function u(a){if(p(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(d,b)}if(!p(i,a)&&!p(l,a))throw new Error("No "+a);return i[a]}function v(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function w(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice,o=/\.js$/;g=function(a,b){var c,d=v(a),e=d[0];return a=d[1],e&&(e=q(e,b),c=u(e)),e?c&&c.normalize?a=c.normalize(a,s(b)):a=q(a,b):(a=q(a,b),d=v(a),e=d[0],a=d[1],e&&(c=u(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},h={require:function(a){return r(a)},exports:function(a){var b=i[a];return typeof b!="undefined"?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:w(a)}}},e=function(a,b,c,e){var f,k,m,n,o,q=[],s=typeof c,v;e=e||a;if(s==="undefined"||s==="function"){b=!b.length&&c.length?["require","exports","module"]:b;for(o=0;o<b.length;o+=1){n=g(b[o],e),k=n.f;if(k==="require")q[o]=h.require(a);else if(k==="exports")q[o]=h.exports(a),v=!0;else if(k==="module")f=q[o]=h.module(a);else if(p(i,k)||p(j,k)||p(l,k))q[o]=u(k);else if(n.p)n.p.load(n.n,r(e,!0),t(k),{}),q[o]=i[k];else throw new Error(a+" missing "+k)}m=c?c.apply(i[a],q):undefined;if(a)if(f&&f.exports!==d&&f.exports!==i[a])i[a]=f.exports;else if(m!==d||!v)i[a]=m}else a&&(i[a]=c)},a=b=f=function(a,b,c,i,j){if(typeof a=="string")return h[a]?h[a](b):u(g(a,b).f);if(!a.splice){k=a,k.deps&&f(k.deps,k.callback);if(!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},typeof c=="function"&&(c=i,i=j),i?e(d,a,b,c):setTimeout(function(){e(d,a,b,c)},4),f},f.config=function(a){return f(a)},a._defined=i,c=function(a,b,c){b.splice||(c=b,b=[]),!p(i,a)&&!p(j,a)&&(j[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("../vendor/almond/almond",function(){}),c("browser",["require","exports","module"],function(a,b,c){function f(a){return a.test(window.navigator.userAgent.toLowerCase())}function g(){return!i()&&f(/safari/)}function h(){return g()&&f(/version\/7\.1/)}function i(){return f(/chrome/)}function j(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(a){return!1}}function k(){try{var a=g()&&f(/version\/5\.0/),b=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!a&&b}catch(c){return!1}}function l(){return n(m())>=e}function m(){var a,b,c,d;if(typeof window.ActiveXObject!="undefined")try{d=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d&&(a=d.GetVariable("$version"))}catch(e){}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(c="application/x-shockwave-flash",b=window.navigator.mimeTypes,b&&b[c]&&b[c].enabledPlugin&&b[c].enabledPlugin.description&&(a=b[c].enabledPlugin.description));return a}function n(a){if(!a)return 0;var b=a.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([b[0],b[1]].join("."))||0}var d,e=9;d=c.exports={isSafari:g,isSafari71:h,isChrome:i,supportsHLSAudio:k,supportsHTML5Audio:j,supportsFlash:l}}),c("utils",["require","exports","module"],function(a,b,c){var d=c.exports={extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},each:function(a,b,c){Object.keys(a).forEach(function(d){b.call(c||null,a[d],d)})},find:function(a,b,c){var d;return a.some(function(a){if(b.call(c,a))return d=a,!0}),d},has:function(a,b){return Object.keys(a).indexOf(b)>-1},inherits:function(a,b){var c=this,e;a&&d.has(a,"constructor")?e=a.constructor:e=function(){return c.apply(this,arguments)},d.extend(e,c,b);var f=function(){this.constructor=e};return f.prototype=c.prototype,e.prototype=new f,a&&d.extend(e.prototype,a),e.__super__=c.prototype,e},without:function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)},result:function(a){var b=a;return d.isFunction(b)&&(b=a()),b},isFunction:function(a){return typeof a=="function"},after:function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},isNull:function(a){return a===null}}}),c("protocols",["require","exports","module"],function(a,b,c){var d=c.exports={HTTP:"http",RTMP:"rtmp",HLS:"hls"}}),c("stream-urls",["require","exports","module","protocols","utils"],function(a,b,c){function i(a,b){if(!a)return!1;var c=a.issuedAt+j(a.protocol,a.duration);return k(a.protocol)?Date.now()+a.duration-(b||0)<c:Date.now()<c}function j(a,b){var c=k(a);return h+(c?f.result(b):0)}function k(a){return a===e.HTTP||a===e.HLS}function l(a,b){function q(a,b){return Math.abs(b-d)-Math.abs(a-d)}function r(a){return a*-1}var c={},d=b.maxBitrate,e=b.protocols,g=b.extensions,h,i,j,k,l,m,n,o,p;f.each(a,function(a,b){var d=b.split("_"),e=d[0],f=d[1],g=d[2];c[e]=c[e]||{},c[e][f]=c[e][f]||{},c[e][f][g]=a});for(l=0,m=e.length;l<m;++l){k=e[l];for(o=0,p=g.length;o<p;++o){n=g[o];if(c[k]&&c[k][n])return h=Object.keys(c[k][n]).map(Number).sort(r),i=d===Infinity,j=d===-Infinity,i||j?d=h[i?"pop":"shift"]():d=h.sort(q).pop(),{url:c[k][n][d],bitrate:d,protocol:k,extension:n,issuedAt:Date.now(),duration:f.result(b.duration)}}}return null}var d,e=a("protocols"),f=a("utils"),g=.9,h=Math.floor(12e4*g);d=c.exports={choosePreferredStream:l,streamValidForPlayingFrom:i}}),c("events",["require","exports","module"],function(a,b,c){var d=c.exports={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered"}}),c("audio-logger",["require","exports","module","events"],function(a,b,c){function f(a){this.listenTime+=a.from-this.currentTime,this.currentTime=a.to}function g(a){this.listenTime+=a.position-this.currentTime,this.currentTime=a.position}function h(a){this.currentTime=a.position}var d,e=a("events");d=c.exports=function(a){this.scAudio=a,this.listenTime=0,this.currentTime=0,this.scAudio.on(e.SEEK,f,this).on(e.PLAY_START,h,this).on(e.PAUSE,g,this)},d.prototype={constructor:d,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}}),c("observable",["require","exports","module"],function(a,b,c){function e(a,b,c,e){if(!c)return!0;if(typeof c=="object")for(var f in c)c.hasOwnProperty(f)&&a[b].apply(a,[f,c[f]].concat(e));else{if(!d.test(c))return!0;var g=c.split(d);for(var h=0,i=g.length;h<i;h++)a[b].apply(a,[g[h]].concat(e))}}function f(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:while(++d<e)c=a[d],c.callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}}var d=/\s+/;c.exports={on:function(a,b,c){if(!e(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},off:function(a,b,c){var d,f,g,h,i,j,k,l;if(!this._events||!e(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:Object.keys(this._events);for(i=0,j=h.length;i<j;i++){a=h[i];if(g=this._events[a]){this._events[a]=d=[];if(b||c)for(k=0,l=g.length;k<l;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f);d.length||delete this._events[a]}}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!e(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&f(c,b),d&&f(d,arguments),this}}}),c("url",["require","exports","module"],function(a,b,c){var d=c.exports={getUrlParams:function(a){var b={},c=a.indexOf("?");return c>-1&&a.substr(c+1).split("&").forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b},getUrlHost:function(a){var b=a.split("//"),c;return b[0]===a?c=b[0].split("/")[0]:c=b[1]?b[1].split("/")[0]:"",c}}}),c("audio-perf-monitor",["require","exports","module","events","observable","url","utils"],function(a,b,c){function i(a){return"AudioPerfMonitor ("+this.scAudio.getId()+") : "+a}function j(){if(!this.scAudio.controller){this.printWarning("Cant initialize when controller is null");return}if(this.controller){this.printWarning(i.call(this,"Setup was called while it was already initialized (returned with a no-op)"));return}this.scAudio.options.debug&&window.console.info(i.call(this,"Initialized for instance %s"),this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,this.host=g.getUrlHost(this.scAudio.streamInfo.url)}function k(){if(!this.controller){this.printWarning(i.call(this,"Reset was called while it was already de-initialized (returned with a no-op)"));return}this.scAudio.options.debug&&window.console.info(i.call(this,"Reset for instance %s"),this.scAudio.getId()),this.controller=null,this.protocol=null,this.host=null,this.timeToPlayMeasured=!1}function l(a){var b=this.scAudio.getAudioManagerStates();a===b.LOADING?this.timeToPlayMeasured&&s.call(this):h.isNull(this.bufferingStartTime)||t.call(this)}function m(){this.metadataLoadStartTime=Date.now()}function n(){if(h.isNull(this.metadataLoadStartTime)){this.printWarning(i.call(this,"onMetadataEnd was called without onMetadataStart being called before."));return}this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),this.metadataLoadStartTime=null}function o(){this.playClickTime=Date.now()}function p(){if(this.timeToPlayMeasured)return;if(h.isNull(this.playClickTime)){this.printWarning(i.call(this,"onPlayResume was called without onPlayStart being called before."));return}this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}function q(){if(this.scAudio.isPaused())return;this.seekStartTime=Date.now()}function r(){if(this.scAudio.isPaused())return;if(h.isNull(this.seekStartTime)){this.printWarning(i.call(this,"onSeekEnd was called without onSeekStart being called before."));return}this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}function s(){if(this.bufferingStartTime)return;this.bufferingStartTime=Date.now()}function t(){if(h.isNull(this.bufferingStartTime)){this.printWarning(i.call(this,"onBufferingEnd was called without onBufferingStart being called before."));return}u.call(this),this.bufferingStartTime=null}function u(){h.isNull(this.bufferingStartTime)||(h.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function v(){u.call(this);if(h.isNull(this.bufferingTimeAccumulated))return;this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null}var d,e=a("events"),f=a("observable"),g=a("url"),h=a("utils");d=c.exports=function(a,b){this.scAudio=a,this.logFn=b,this.controller=null,this.reset(),a.on(e.CREATED,j,this).on(e.RESET,k,this).on(e.DESTROYED,k,this).on(e.SEEK,q,this).on(e.SEEKED,r,this).on(e.PLAY,o,this).on(e.PLAY_START,m,this).on(e.PLAY_RESUME,p,this).on(e.PAUSE,v,this).on(e.FINISH,v,this).on(e.STATE_CHANGE,l,this).on(e.METADATA,n,this)},h.extend(d.prototype,f,{constructor:d,log:function(a){if(!this.controller){this.printWarning(i.call(this,"Monitor log was called while controller is null (returned with a no-op)"));return}h.extend(a,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),this.scAudio.options.debug&&window.console.info(i.call(this,"%s latency: %d protocol: %s host: %s playertype: %s"),a.type,a.latency,a.protocol,a.host,a.playertype),this.logFn(a)},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1},printWarning:function(a){this.scAudio.options.debug&&window.console.warn(a)}})}),c("extensions",["require","exports","module"],function(a,b,c){var d=c.exports={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"}}),c("protocol-selector",["require","exports","module","protocols","browser"],function(a,b,c){function i(a){var b=!1;switch(a){case e.RTMP:b=f.supportsFlash();break;case e.HTTP:b=f.supportsHTML5Audio()||f.supportsFlash();break;case e.HLS:b=(g&&f.isSafari()||!g)&&(f.supportsHLSAudio()||h&&f.supportsFlash())}return b}var d,e=a("protocols"),f=a("browser"),g=!0,h=!1;d=c.exports={isProtocolSupported:i}}),c("scaudio",["require","exports","module","browser","utils","stream-urls","audio-logger","audio-perf-monitor","events","extensions","observable","protocols","protocol-selector"],function(a,b,c){function A(a){var b=this.options,c;return c={id:this.getId(),src:a.url,duration:f.result(b.duration),mimeType:a.mimeType,forceSingle:b.useSinglePlayer},o.createAudioPlayer(c)}function B(a,b){var c=b?"on":"off";a[c]("stateChange",S,this)[c]("positionChange",D,this)[c]("loadedmetadata",C,this)}function C(){this.trigger(j.METADATA)}function D(){this._prevPosition!==this.currentTime()&&(this.trigger(j.TIME),this._prevPosition=this.currentTime())}function E(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function F(){E.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(j.RESET))}function G(){this._registerPlays=!0,this.pause(),this.trigger(j.FINISH)}function H(){var a=$.Deferred();return this.streamInfo?a.resolve(this.streamInfo):I.call(this).done(function(b){var c=g.choosePreferredStream(b,this.options);c?a.resolve(c):(this.trigger(j.NO_PROTOCOL),this.options.debug&&window.console.warn(V("SCAudio (%s): Could not match a protocol of given media descriptor to one of the supported protocols ("+this.options.protocols+"), aborting attempt to play."),this.getId()),a.reject())}.bind(this)).fail(function(b){this.options.debug&&window.console.warn(V("Stream request failed with status: %d"),b.status),J.call(this,b),K.call(this,b),a.reject()}.bind(this)),a}function I(){if(this.options.streamUrls&&!this._usedPrefetchUrls){this._usedPrefetchUrls=!0;var a=typeof this.options.streamUrls=="function"?this.options.streamUrls():this.options.streamUrls;return $.Deferred().resolve(a)}return $.ajax({async:this.options.asyncFetch,dataType:"json",timeout:this.options.asyncFetch?t:s,url:f.result(this.options.streamUrlsEndpoint)})}function J(a){var b=a.status>=400&&(a.responseText||"").indexOf("geo_blocked")!==-1;b&&this.trigger(j.GEO_BLOCKED)}function K(a){a.status===0&&this.trigger(j.NO_CONNECTION)}function L(a){var b=this._initAudioDefer&&this._initAudioDefer.state(),c=g.streamValidForPlayingFrom(this.streamInfo,a);return b&&(b==="pending"||b==="resolved"&&c)}function M(a){a&&!this._bufferingTimeout?this._bufferingTimeout=setTimeout(function(){this._isBuffering=!0,this.trigger(j.BUFFERRING_START)}.bind(this),u):a||(this._bufferingTimeout&&(clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(j.BUFFERRING_END)))}function N(){this.off(j.TIME,this.seekTimeEventHandler),this.trigger(j.SEEKED),this.seekTimeEventHandler=null}function O(){this._errorRecoveryFlagsResetTimeout=setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),y)}function P(){this._errorRecoveryFlagsResetTimeout&&clearTimeout(this._errorRecoveryFlagsResetTimeout)}function Q(){var a,b=Date.now(),c=this.isPlaying(),d=o.Errors,e=function(){P.call(this);if(this._errorRecoveryTime&&this._errorRecoveryTime+w>b&&this._errorRecoveryCounts>x){this.trigger(j.AUDIO_ERROR,this);return}this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,F.call(this),c&&this.play({seek:this.currentTime()})};if(!this.controller){this.options.debug&&window.console.error(V("SCAudio: controller is null, aborting error handler ("+this.getId()+")."),this),e.call(this);return}a=this.controller.getErrorID();switch(a){case d.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(j.FLASH_NOT_LOADED);break;case d.FLASH_PROXY_FLASH_BLOCKED:this.trigger(j.FLASH_BLOCK);break;case d.FLASH_RTMP_CONNECT_FAILED:f.without(this.options.protocols,m.RTMP);case d.FLASH_RTMP_CANNOT_PLAY_STREAM:case d.FLASH_RTMP_CONNECT_CLOSED:case d.HTML5_AUDIO_NETWORK:case d.HTML5_AUDIO_ABORTED:case d.HTML5_AUDIO_DECODE:case d.HTML5_AUDIO_SRC_NOT_SUPPORTED:case d.HTML5_AUDIO_ENDED_EARLY:e.call(this);break;case d.HTML5_AUDIO_OVERRUN:G.call(this);break;default:throw new Error("SCAudio: Unhandled audio error code: "+a)}this.options.debug&&typeof this.controller.getErrorMessage!="undefined"&&window.console.error(V("SCAudio error ("+this.getId+"): "+this.controller.getErrorMessage()),this)}function R(a){this.options.debug&&U.call(this,a);switch(a){case j.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case j.PLAY:this._isPlaying=!1,this._isPlayActionQueued=!0;break;case j.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case j.BUFFERRING_START:case j.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case j.BUFFERRING_END:case j.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1)}}function S(a){var b=o.States,c=o.Errors;switch(a){case b.IDLE:this._initAudioDefer&&this._initAudioDefer.resolve(),this.controller.getErrorID()===c.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(j.FLASH_UNBLOCK);break;case b.PAUSED:M.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&N.call(this);break;case b.PLAYING:M.call(this,!1),O.call(this),this.trigger(j.PLAY_RESUME);break;case b.LOADING:case b.SEEKING:M.call(this,!0);break;case b.ENDED:G.call(this);break;case b.ERROR:M.call(this,!1),Q.call(this)}this.trigger(j.STATE_CHANGE,a)}function T(){e.isSafari71()&&(this.options.protocols=[m.HTTP,m.HLS,m.RTMP]),this.options.protocols=this.options.protocols.filter(n.isProtocolSupported)}function U(a){var b=window.console.log,c;a!==j.TIME?(c=[V("SCAudio event ("+this.getId()+"):")],c.push.apply(c,arguments),b.apply(window.console,c),this._loggedTime=!1):this._loggedTime||(b.call(window.console,V("SCAudio time (%s): %d ms"),this.getId(),this.currentTime()),this._loggedTime=!0)}function V(a){return(new Date).toString()+" | "+a}var d,e=a("browser"),f=a("utils"),g=a("stream-urls"),h=a("audio-logger"),i=a("audio-perf-monitor"),j=a("events"),k=a("extensions"),l=a("observable"),m=a("protocols"),n=a("protocol-selector"),o,p={},q={muted:!1,volume:1},r={soundId:p,duration:p,registerEndpoint:p,streamUrlsEndpoint:p,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[m.HLS,m.RTMP,m.HTTP],extensions:[k.MP3],maxBitrate:Infinity},s=6e3,t=6e3,u=400,v=6e4,w=6e3,x=3,y=3e4,z=[];d=c.exports=function(a,b){arguments.length===1?b=a:d.setAudioManager(a);if(!o)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=f.extend({},r,b);var c=Object.keys(this.options).filter(function(a){return this.options[a]===p},this);if(c.length)throw new Error("SCAudio: pass into constructor the following options: "+c.join(", "));T.call(this),this.controller=null,this.streamInfo=null,this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=null,b.debug&&(this._loggedTime=!1),this.on("all",R,this),this.audioPerfMonitor=new i(this,this.logAudioPerformance.bind(this)),this.audioLogger=new h(this)},f.extend(d.prototype,l,{constructor:d,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=$.Deferred(),H.call(this).done(function(a){var b=!0;this.streamInfo&&(b=!1),this.streamInfo=a,b&&this.trigger(j.STREAMS),this.controller=A.call(this,a),B.call(this,this.controller,!0),S.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(j.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(j.CREATED)}.bind(this))),this._initAudioDefer},registerPlay:function(){var a=this.options.soundId,b=!1;return z.indexOf(a)===-1&&(z.push(a),setTimeout(function(){var b=z.indexOf(a);b>-1&&z.splice(b,1)},v),$.ajax({type:"POST",dataType:"json",statusCode:{429:$.noop},url:f.result(this.options.registerEndpoint)}),this._registerCounts++,this._registerPlays=!1,this.trigger(j.REGISTERED),b=!0),b},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(a){var b=a&&a.seek!=null?a.seek:this.currentTime();a=f.extend({},a,{position:b}),this.trigger(j.PLAY,a),L.call(this,b)||F.call(this),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(j.PLAY_START,a),this.controller.play(b))}.bind(this)),M.call(this,!0)},pause:function(a){if(this.isPaused())return;a=f.extend({},a,{position:this.currentTime()}),this.trigger(j.PAUSE,a),this.controller&&this.controller.pause(),M.call(this,!1)},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,this.off(),f.without(z,this.options.soundId),clearTimeout(this._bufferingTimeout),E.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(j.DESTROYED)},seek:function(a){if(!this.controller)return;if(a>=f.result(this.options.duration)){G.call(this);return}this.seekTimeEventHandler&&this.off(j.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=f.after(2,function(){N.call(this)}.bind(this)),this.on(j.TIME,this.seekTimeEventHandler),this.trigger(j.SEEK,{from:this.currentTime(),to:a});if(this.isPlaying()&&!L.call(this,a)){F.call(this),this.play({seek:a});return}this.controller.seek(a)},seekRelative:function(a){this.controller&&this.seek(this.currentTime()+a)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var a=0;return this.controller&&(a=this.controller.getLoadedPosition()/this.controller.getDuration(),a=a>=.99?1:a),a},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!!this.controller&&this.controller.getState()===o.States.LOADING},toggleMute:function(a){d.toggleMute(a)},isMuted:function(){return d.isMuted()},setVolume:function(a){d.setVolume(a)},getVolume:function(){return d.getVolume()},logAudioPerformance:function(){},getAudioManagerStates:function(){return o.States},getId:function(){return this.options.resourceId||this.options.soundId}}),f.extend(d,{extend:f.inherits,getSettings:function(){return q},setSettings:function(a){f.extend(q,a)},setAudioManager:function(a){o=a,a&&(d.AudioManagerStates=a.States,this.toggleMute(q.muted),this.setVolume(q.volume))},toggleMute:function(a){q.muted=a===undefined?!q.muted:!!a,o&&o.setVolume(q.muted?0:1)},isMuted:function(){return q.muted},setVolume:function(a){q.volume=a===undefined?1:a,o&&o.setVolume(q.volume)},getVolume:function(){return q.volume},Extensions:k,Protocols:m,Events:j,BUFFER_DELAY:u,PLAY_REGISTRATION_TIMEOUT:v})}),b("scaudio")})}),
define("lib/helpers/number-helper",["require","exports","module"],function(a,b,c){function e(a){var b=a<100?10:1;return Math.floor(a*b)/b}var d;d=c.exports={format:function(a){return typeof a!="number"&&(a=parseInt(a,10)),a!==a?"":a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},shorten:function(a){var b=1e3,c;return[{limit:Math.pow(b,1),unit:""},{limit:Math.pow(b,2),unit:"K"},{limit:Math.pow(b,3),unit:"M"},{limit:Math.pow(b,4),unit:"B"}].some(function(d){return a<d.limit&&(c=e(a/(d.limit/b))+d.unit),!!c}),c}}}),
define("lib/helpers/image-helper",["require","exports","module","lib/helpers/name-helper","_","lib/math","lib/browser","lib/support"],function(a,b,c){function t(a){n.lastIndex=0;var b=n.exec(a),c;return b&&(c=b[3].charCodeAt(0)%4+1,c!==1&&(a=a.replace("//i1.","//i"+c+"."))),a}function u(a){l[a.type][a.key]|=1<<a.index}var d,e=a("lib/helpers/name-helper"),f=a("_"),g=a("lib/math"),h=a("lib/browser"),i=a("lib/support"),j,k,l,m,n,o,p,q,r,s;k=/default_avatar/,n=/^.*(artworks|avatars)-0*([0-9]+)-([a-z0-9]+)-([a-z0-9]+)\.jpg.*$/i,r=/\/images\/default\/.*?x[0-9]+(?:-[a-z0-9]+)?\.png$/,l={artworks:{},avatars:{}},j=[[20,"t20x20"],[50,"t50x50"],[120,"t120x120"],[200,"t200x200"],[500,"t500x500"]],o=["alt","class","height","src","title","width"],q={cloud:{40:"/player/assets/images/default/cloudx40-d1068b51.png",50:"/player/assets/images/default/cloudx50-d1068b51.png",80:"/player/assets/images/default/cloudx80-d1068b51.png",120:"/player/assets/images/default/cloudx120-d1068b51.png",200:"/player/assets/images/default/cloudx200-d1068b51.png",500:"/player/assets/images/default/cloudx500-d1068b51.png"},group:{40:"/player/assets/images/default/groupx40-377f1b9e.png",50:"/player/assets/images/default/groupx50-377f1b9e.png",80:"/player/assets/images/default/groupx80-377f1b9e.png",120:"/player/assets/images/default/groupx120-377f1b9e.png",200:"/player/assets/images/default/groupx200-377f1b9e.png",500:"/player/assets/images/default/groupx500-3d2db348.png"},user:{40:"/player/assets/images/default/userx40-377f1b9e.png",50:"/player/assets/images/default/userx50-377f1b9e.png",80:"/player/assets/images/default/userx80-377f1b9e.png",120:"/player/assets/images/default/userx120-377f1b9e.png",200:"/player/assets/images/default/userx200-377f1b9e.png",500:"/player/assets/images/default/userx500-3d2db348.png"}},d=c.exports={load:function(a,b){var c=new Image,d=$.Deferred();return $(c).on("load",function(){d.resolve(this)}).on("error",function(){d.reject(this)}),b&&i.corsImg&&(c.crossOrigin=!0),c.src=a,d},isLoaded:function(a){return!!(a.complete&&a.width&&a.height)},markup:function(a,b){return f.defaults(b,{src:d.urlFrom(a,b.size),width:b.size,height:b.size,alt:d.getAltText(a)}),d.getMarkup(b)},getMarkup:function(a){var b=[],c;return f.each(a,function(a,c){f.indexOf(o,c)!==-1&&b.push(c+'="'+a+'"')}),c=m(a.src),c&&u(c),"<img "+b.join(" ")+">"},getAltText:function(a){return a.username?e.get(a,!0)+" avatar":e.get(a)},getPlaceholderUrl:function(a,b){var c,e,g,h,i;g=m(d.setFormat(a,b));if(g){c=g.key;if(l[g.type][c]){e=f.find(j,function(a,c){return i=c,b<=a[0]});while(i>=0){if(l[g.type][c]&1<<i){h=j[i];break}--i}}if(e&&h===e)return!1;if(h)return d.setFormat(a,h[0])}return null},urlFrom:function(a,b){var c=a&&(a.artwork_url||a.avatar_url||a.user&&a.user.avatar_url)||"";return b&&h.isHiDPI&&(b*=2),d.isDefaultImage(c)?d.getDefaultImage(a.kind,b):(c=t(c).replace(/^https?\:\/\//,"//"),b?d.setFormat(c,b):c)},isDefaultImage:function(a){return!a||k.test(a)},getDefaultImage:function(a,b){return(q[a]||q.cloud)[s(b)]},setFormat:function(a,b,c){if(r.test(a))return a.replace(/[0-9]+((?:-[a-z0-9]+)?\.png)$/,s(b)+"$1");n.lastIndex=0;var d=n.exec(a),e=d[1],f=d[4],g=p(e,b);return g&&(a=a.replace(f,g)),c?t(a):a},flagCachedImage:function(a){var b=m(a);b&&u(b)},getMainColor:function(a,b){var c=a.data,d=c.length,e={},f=0,h=1,i=d/4,j,k,l;b=g.clamp(b||0,h,i);for(l=0;l<d;l+=b*4)k=[c[l],c[l+1],c[l+2]],k=k.join(","),e[k]=e.hasOwnProperty(k)?++e[k]:1;for(k in e)if(e.hasOwnProperty(k)){if(e[k]<f)continue;f=e[k],j=k}return j?j.split(",").map(function(a){return parseInt(a,10)}):null}},m=function(a){var b,c,d;return n.lastIndex=0,b=a.replace(n,function(a,b,e,g,h){return f.find(j,function(a,b){if(a[1]===h)return c=b,!0}),d=b,e}),d?{index:c,key:parseInt(b,10),type:d}:null},p=function(a,b){var c=f.find(j,function(a){return a[0]>=b})||f.last(j);return c[1]==="t20x20"&&a==="artworks"?"tiny":c[1]},s=function(){var a=Object.keys(q.cloud),b;return a.sort(function(a,b){return a-b}),b=f.last(a),f.memoize(function(c){var d,e;for(d=0;e=a[d];++d)if(e>=c)return e;return b})}()}),
define("lib/helpers/lang-helper",["require","exports","module"],function(a,b,c){var d;d=c.exports={plural:function(a,b,c){return c=typeof c=="string"?c:b+"s",a===1?b:c},possessive:function(a){return a+"s"}}}),
define("vendor/usertext/usertext",["require","exports","module"],function(a,b,c){(function(){var a,b,d,e,f,g,h,i=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)\S*[^\s`!()\[\]{};:'".,<>?])/ig,j=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})/gi,k=/(\s|[^\w]|^)@([\w\-]+)/g,l=/\{\{\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)\S*[^\s`!()\[\]{};:'".,<>?])\}\}/ig,m=/\{\{(?:mailto:)?([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})\}\}/gi,n=/\{\{@([\w\-]+)\}\}/gi,o=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?/i,p=/^(?:ht|f)tps?:\/\//i,q=/(?:[ \t]*\r?\n[ \t]*){2,}/,r=/[ \t][ \t]+/g;b={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,whitelist:["b","i","em"],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null},d=function(a){var b,c,d,e,f,g;f=[].slice.call(arguments,1);for(b=0,c=f.length;b<c;++b){e=f[b];for(g in e)e[g]!==d&&(a[g]=e[g])}return a},e=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},f=function(a){return a.textContent||a.innerText||""},h=function s(a,b){b(a),a=a.firstChild;while(a)s(a,b),a=a.nextSibling},g=function(a,b){if(a.length<b)return a;var c=document.createElement("div"),d,e;return d=function(a){if(b>0){var c=a.data.length;b-=c,b<=0&&(a.data=a.substringData(0,a.data.length+b))}else a.data=""},e=function(a,c){var d=a.firstChild,f;do d.nodeType===3?c(d):d.nodeType===1&&e(d,c);while((d=d.nextSibling)&&b>0);while(d)f=d,d=d.nextSibling,a.removeChild(f)},c.innerHTML=a,e(c,d),c.innerHTML===a?c.innerHTML:c.innerHTML+"&hellip;"},a=function(a,c){var f=d({},b,c),s,t,u=document.createElement("div");if(typeof a!="string")return"";f.links?!f.userLinks&&!f.internalLinks&&!f.externalLinks?f.links=!1:f.whitelist.push("a"):f.userLinks=f.internalLinks=f.externalLinks=!1,i.lastIndex=k.lastIndex=j.lastIndex=0,a=a.replace(/<\/p>/g,"\n\n").replace(/<br\s*\/?>/g,"\n").replace(r," "),f.whitelist&&f.whitelist.length&&(a=a.replace(new RegExp("<(?!\\s*\\/?("+f.whitelist.join("|")+")\\b)[^>]*>","ig"),"")),u.innerHTML=a,f.links&&h(u,function(a){a.nodeType===3&&a.parentNode.nodeName.toLowerCase()!=="a"&&(a.nodeValue=a.nodeValue.replace(i,"{{$1}}").replace(j,"{{mailto:$1}}").replace(k,"$1{{@$2}}"))}),a=u.innerHTML,f.links&&(a=a.replace(l,function(a,b){return f.internalLinks&&o.test(b)?'<a href="'+b.replace(o,f.internalLinksBaseUrl)+'">'+b+"</a>":f.externalLinks?'<a href="'+(p.test(b)?b:"http://"+b)+'" rel="nofollow" target="_blank">'+b+"</a>":b}).replace(m,'<a href="mailto:$1">$1</a>').replace(n,'@<a href="'+f.internalLinksBaseUrl+'$1"'+(f.isOpeningNewWindow?' target="_blank"':"")+">$1</a>")),f.maxLength&&(a=g(a,f.maxLength));if(f.paragraphs){a=a.split(q);for(s=0,t=a.length;s<t;s++)a[s]=e(a[s]),a[s]=a[s].replace(/\r?\n/g,"<br>"),a[s]="<p>"+a[s]+"</p>";a=a.join("")}else a=a.replace(/[\r\n]+/g," ").replace(r," ");return a},a.withDefaults=function(c){var e=d({},b,c);return function(b,c){var f=c?d({},e,c):e;return a.call(this,b,f)}},typeof c!="undefined"&&c.exports?c.exports=a:(global=function(){return this}(),global.SC=global.SC||{},global.SC.usertext=a)})()}),
define("lib/mixins/usage-counting",["require","exports","module","lib/mixin"],function(a,b,c){var d,e=a("lib/mixin");d=c.exports=new e({onCleanup:null,onIncrement:null,onDecrement:null,after:{initialize:function(a){this._counts={},this._needsGC=!1,a=a||{},this._autoCleanup=!!a.autoCleanup,this.onCleanup=a.onCleanup,this.onIncrement=a.onIncrement,this.onDecrement=a.onDecrement},reset:function(){this._counts={},this._needsGC=!1},set:function(a,b){this._counts[a]||(this._counts[a]=1,this.onIncrement&&this.onIncrement(b,a,1))},unset:function(a){delete this._counts[a]}},before:{reset:function(){this.onCleanup&&this.forEach(this.onCleanup)}},countFor:function(a){return this._counts[a]||0},increment:function(a,b){return this.has(a)&&(b=typeof b=="number"?b:1,b>0?(this._counts[a]=(this._counts[a]||0)+b,this.onIncrement&&this.onIncrement(this.get(a),a,b)):b<0&&this.decrement(a,-b)),this},decrement:function(a,b){return this.has(a)&&(b=typeof b=="number"?b:1,b>0?(this._counts[a]=(this._counts[a]||1)-b,this.onDecrement&&this.onDecrement(this.get(a),a,b),this._counts[a]<=0&&(this._needsGC=!0,this._autoCleanup&&this.cleanup())):b<0&&this.increment(a,-b)),this},cleanup:function(){var a,b=this.onCleanup;if(this._needsGC){for(a in this._counts)this._counts.hasOwnProperty(a)&&this._counts[a]===0&&(b&&b(this.get(a),a),this.unset(a));this._needsGC=!1}},changeKey:function(a,b){if(a===b)return;var c=this.get(a),d=this.countFor(a);this.unset(a),this.set(b,c),this.increment(b,d-1)}})}),
define("models/sound-visual",["require","exports","module","lib/model"],function(a,b,c){var d,e=a("lib/model");d=c.exports=e.extend({resource_type:"soundVisual",hasDataForView:function(){return!0},baseUrl:$.noop})}),
define("lib/helpers/urn-helper",["require","exports","module"],function(a,b,c){var d,e={playlists:"playlist",sounds:"track",tracks:"track",users:"user"},f={playlists:"playlist",sounds:"sound",tracks:"sound",users:"user"},g={playlist:"playlists",sound:"tracks",user:"users"};d=c.exports={getAsAttributes:function(a){var b=a.split(":"),c=b[2],d=f[b[1]];return/\D/.test(c)||(c=parseInt(c,10)),d==="user"&&c==="system"&&(c=193),{id:c,kind:e[b[1]],resource_type:d}},generate:function(a,b){var c=g[a];return c?"soundcloud:"+c+":"+b:null}}}),
define("vendor/audiomanager/audiomanager",["require","exports","module"],function(a,b,c){(function(a,b){typeof c!="undefined"&&c.exports?c.exports=b():a.AudioManager=b()})(this,function(){var a,b,d;return function(c){function o(a,b){return m.call(a,b)}function p(a,b){var c,d,e,f,g,h,i,j,l,m,n=b&&b.split("/"),o=k.map,p=o&&o["*"]||{};if(a&&a.charAt(0)===".")if(b){n=n.slice(0,n.length-1),a=n.concat(a.split("/"));for(j=0;j<a.length;j+=1){m=a[j];if(m===".")a.splice(j,1),j-=1;else if(m==="..")if(j!==1||a[2]!==".."&&a[0]!=="..")j>0&&(a.splice(j-1,2),j-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((n||p)&&o){c=a.split("/");for(j=c.length;j>0;j-=1){d=c.slice(0,j).join("/");if(n)for(l=n.length;l>0;l-=1){e=o[n.slice(0,l).join("/")];if(e){e=e[d];if(e){f=e,g=j;break}}}if(f)break;!h&&p&&p[d]&&(h=p[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function q(a,b){return function(){return f.apply(c,n.call(arguments,0).concat([a,b]))}}function r(a){return function(b){return p(b,a)}}function s(a){return function(b){i[a]=b}}function t(a){if(o(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(c,b)}if(!o(i,a)&&!o(l,a))throw new Error("No "+a);return i[a]}function u(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function v(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice;g=function(a,b){var c,d=u(a),e=d[0];return a=d[1],e&&(e=p(e,b),c=t(e)),e?c&&c.normalize?a=c.normalize(a,r(b)):a=p(a,b):(a=p(a,b),d=u(a),e=d[0],a=d[1],e&&(c=t(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},h={require:function(a){return q(a)},exports:function(a){var b=i[a];return typeof b!="undefined"?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:v(a)}}},e=function(a,b,d,e){var f,k,m,n,p,r=[],u;e=e||a;if(typeof d=="function"){b=!b.length&&d.length?["require","exports","module"]:b;for(p=0;p<b.length;p+=1){n=g(b[p],e),k=n.f;if(k==="require")r[p]=h.require(a);else if(k==="exports")r[p]=h.exports(a),u=!0;else if(k==="module")f=r[p]=h.module(a);else if(o(i,k)||o(j,k)||o(l,k))r[p]=t(k);else if(n.p)n.p.load(n.n,q(e,!0),s(k),{}),r[p]=i[k];else throw new Error(a+" missing "+k)}m=d.apply(i[a],r);if(a)if(f&&f.exports!==c&&f.exports!==i[a])i[a]=f.exports;else if(m!==c||!u)i[a]=m}else a&&(i[a]=d)},a=b=f=function(a,b,d,i,j){return typeof a=="string"?h[a]?h[a](b):t(g(a,b).f):(a.splice||(k=a,b.splice?(a=b,b=d,d=null):a=c),b=b||function(){},typeof d=="function"&&(d=i,i=j),i?e(c,a,b,d):setTimeout(function(){e(c,a,b,d)},4),f)},f.config=function(a){return k=a,k.deps&&f(k.deps,k.callback),f},d=function(a,b,c){b.splice||(c=b,b=[]),!o(i,a)&&!o(j,a)&&(j[a]=[a,b,c])},d.amd={jQuery:!0}}(),d("vendor/almond",function(){}),function(a){function L(){return c.pop()||[]}function M(){return e.pop()||{args:"",array:null,bottom:"",cache:null,"false":!1,firstArg:"",init:"",loop:"","null":!1,number:null,object:null,push:null,shadowedProps:null,string:null,top:"","true":!1,"undefined":!1,useHas:!1,useKeys:!1}}function N(a){return typeof a.toString!="function"&&typeof (a+"")=="string"}function O(){}function P(a){a.length=0,c.length<j&&c.push(a)}function Q(a){var b=a.cache;b&&Q(b),a.array=a.cache=a.object=a.number=a.string=null,e.length<j&&e.push(a)}function bs(){}function by(a,b,c,d){function i(){var d=arguments,j=f?this:b;e||(a=b[g]),c.length&&(d=d.length?(d=bo.call(d),h?d.concat(c):c.concat(d)):c);if(this instanceof i){j=bA(a.prototype);var k=a.apply(j,d);return bM(k)?k:j}return a.apply(j,d)}var e=bL(a),f=!c,g=b;if(f){var h=d;c=b}else if(!e){if(!d)throw new TypeError;b=a}return i}function bz(){var a=M();a.shadowedProps=w,a.array=a.bottom=a.loop=a.top="",a.init="iterable",a.useHas=!0,a.useKeys=!!bE;for(var b,c=0;b=arguments[c];c++)for(var d in b)a[d]=b[d];var e=a.args;a.firstArg=/^[^,]+/.exec(e)[0];var f=Function("errorClass, errorProto, hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+e+") {\n"+bu(a)+"\n}");return Q(a),f(C,S,ba,bB,bC,bN,bE,bs,T,I,br,H,U,be)}function bA(a){return bM(a)?bg(a):{}}function bB(a){return be.call(a)==y}function bJ(a){var b=[];return bI(a,function(a,c){bL(a)&&b.push(c)}),b.sort()}function bK(a,b,c,d,e,f){var h=c===g;if(typeof c=="function"&&!h){c=bs.createCallback(c,d,2);var i=c(a,b);if(typeof i!="undefined")return!!i}if(a===b)return a!==0||1/a==1/b;var j=typeof a,k=typeof b;if(a===a&&(!a||j!="function"&&j!="object")&&(!b||k!="function"&&k!="object"))return!1;if(a==null||b==null)return a===b;var l=be.call(a),m=be.call(b);l==y&&(l=F),m==y&&(m=F);if(l!=m)return!1;switch(l){case A:case B:return+a==+b;case E:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case G:case H:return a==String(b)}var n=l==z;if(!n){if(ba.call(a,"__wrapped__ ")||ba.call(b,"__wrapped__"))return bK(a.__wrapped__||a,b.__wrapped__||b,c,d,e,f);if(l!=F||!bt.nodeClass&&(N(a)||N(b)))return!1;var o=!bt.argsObject&&bB(a)?Object:a.constructor,p=!bt.argsObject&&bB(b)?Object:b.constructor;if(o!=p&&!(bL(o)&&o instanceof o&&bL(p)&&p instanceof p))return!1}var q=!e;e||(e=L()),f||(f=L());var r=e.length;while(r--)if(e[r]==a)return f[r]==b;var s=0;i=!0,e.push(a),f.push(b);if(n){r=a.length,s=b.length,i=s==a.length;if(!i&&!h)return i;while(s--){var t=r,u=b[s];if(h){while(t--)if(i=bK(a[t],u,c,d,e,f))break}else if(!(i=bK(a[s],u,c,d,e,f)))break}return i}return bI(b,function(b,g,h){if(ba.call(h,g))return s++,i=ba.call(a,g)&&bK(a[g],b,c,d,e,f)}),i&&!h&&bI(a,function(a,b,c){if(ba.call(c,b))return i=--s>-1}),q&&(P(e),P(f)),i}function bL(a){return typeof a=="function"}function bM(a){return!!a&&!!I[typeof a]}function bN(a){return typeof a=="string"||be.call(a)==H}function bO(a,b,c){var d={};if(typeof b!="function"){var e=-1,f=Z.apply(R,bo.call(arguments,1)),g=bM(a)?f.length:0;while(++e<g){var h=f[e];h in a&&(d[h]=a[h])}}else b=bs.createCallback(b,c),bI(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function bP(a){var b=-1,c=bE(a),d=c.length,e=Array(d);while(++b<d)e[b]=a[c[b]];return e}function bQ(a,b,c){if(b&&typeof c=="undefined"&&bC(a)){var d=-1,e=a.length;while(++d<e)if(b(a[d],d,a)===!1)break}else bF(a,b,c);return a}function bR(a,b){var c=bo.call(arguments,2),d=-1,e=typeof b=="function",f=a?a.length:0,g=Array(typeof f=="number"?f:0);return bQ(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function bS(a,b){return bt.fastBind||bf&&arguments.length>2?bf.call.apply(bf,arguments):by(a,b,bo.call(arguments,2))}function bT(a){var b=arguments.length>1?Z.apply(R,bo.call(arguments,1)):bJ(a),c=-1,d=b.length;while(++c<d){var e=b[c];a[e]=bS(a[e],a)}return a}function bU(a,b,c){if(a==null)return bW;var d=typeof a;if(d!="function"){if(d!="object")return function(b){return b[a]};var e=bE(a);return function(b){var c=e.length,d=!1;while(c--)if(!(d=bK(b[e[c]],a[e[c]],g)))break;return d}}return typeof b=="undefined"||s&&!s.test(_.call(a))?a:c===1?function(c){return a.call(b,c)}:c===2?function(c,d){return a.call(b,c,d)}:c===4?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}}function bV(a){var b,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function bW(a){return a}function bX(a){var b=++f;return String(a==null?"":a)+b}var b,c=[],e=[],f=0,g={},h=+(new Date)+"",i=75,j=40,l=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,n=/(__e\(.*?\)|\b__t\)) \+\n'';/g,o=/&(?:amp|lt|gt|quot|#39);/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,q=/\w*$/,r=/<%=([\s\S]+?)%>/g,s=(s=/\bthis\b/)&&s.test(function(){return this})&&s,t=/($^)/,u=/[&<>"']/g,v=/['\n\r\t\u2028\u2029\\]/g,w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=0,y="[object Arguments]",z="[object Array]",A="[object Boolean]",B="[object Date]",C="[object Error]",D="[object Function]",E="[object Number]",F="[object Object]",G="[object RegExp]",H="[object String]",I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},K=I[typeof global]&&global;K&&(K.global===K||K.window===K)&&(a=K);var R=[],S=Error.prototype,T=Object.prototype,U=String.prototype,V=a._,W=RegExp("^"+String(T.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),X=Math.ceil,Y=a.clearTimeout,Z=R.concat,$=Math.floor,_=Function.prototype.toString,ba=T.hasOwnProperty,bb=R.push,bc=T.propertyIsEnumerable,bd=a.setTimeout,be=T.toString,bf=W.test(bf=be.bind)&&bf,bg=W.test(bg=Object.create)&&bg,bh=W.test(bh=Array.isArray)&&bh,bi=a.isFinite,bj=a.isNaN,bk=W.test(bk=Object.keys)&&bk,bl=Math.max,bm=Math.min,bn=Math.random,bo=R.slice,bp=W.test(a.attachEvent),bq=bf&&!/\n|true/.test(bf+bp),br={};br[z]=br[B]=br[E]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},br[A]=br[H]={constructor:!0,toString:!0,valueOf:!0},br[C]=br[D]=br[G]={constructor:!0,toString:!0},br[F]={constructor:!0},function(){var a=w.length;while(a--){var b=w[a];for(var c in br)ba.call(br,c)&&!ba.call(br[c],b)&&(br[c][b]=!1)}}();var bt=bs.support={};(function(){var a=function(){this.x=1},b=[];a.prototype={valueOf:1,y:1};for(var c in new a)b.push(c);for(c in arguments);bt.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),bt.argsClass=bB(arguments),bt.enumErrorProps=bc.call(S,"message")||bc.call(S,"name"),bt.enumPrototypes=bc.call(a,"prototype"),bt.fastBind=bf&&!bq,bt.nonEnumArgs=c!=0,bt.nonEnumShadows=!/valueOf/.test(b),bt.unindexedChars="x"[0]+Object("x")[0]!="xx";try{bt.nodeClass=be.call(document)!=F||!!({toString:0}+"")}catch(d){bt.nodeClass=!0}})(1);var bu=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",bt.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):bt.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),bt.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),bt.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];bt.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),bt.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))');if(a.useHas&&a.useKeys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else{b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ";if(bt.nonEnumShadows){b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";for(k=0;k<7;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}}if(a.array||bt.nonEnumArgs)b+="\n}";return b+=a.bottom+";\nreturn result",b},bv={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},bw={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",array:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},bx={top:"if (!objectTypes[typeof iterable]) return result;\n"+bw.top,array:!1};if(!bg)var bA=function(a){if(bM(a)){O.prototype=a;var b=new O;O.prototype=null}return b||{}};bt.argsClass||(bB=function(a){return a?ba.call(a,"callee"):!1});var bC=bh||function(a){return a?typeof a=="object"&&be.call(a)==z:!1},bD=bz({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),bE=bk?function(a){return bM(a)?bt.enumPrototypes&&typeof a=="function"||bt.nonEnumArgs&&a.length&&bB(a)?bD(a):bk(a):[]}:bD,bF=bz(bw),bG=bz(bv,{top:bv.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),bH=bz(bv),bI=bz(bw,bx,{useHas:!1});bL(/x/)&&(bL=function(a){return typeof a=="function"&&be.call(a)==D}),bs.assign=bG,bs.bind=bS,bs.bindAll=bT,bs.createCallback=bU,bs.defaults=bH,bs.forEach=bQ,bs.forIn=bI,bs.functions=bJ,bs.invoke=bR,bs.keys=bE,bs.once=bV,bs.pick=bO,bs.values=bP,bs.each=bQ,bs.extend=bG,bs.methods=bJ,bs.identity=bW,bs.isArguments=bB,bs.isArray=bC,bs.isEqual=bK,bs.isFunction=bL,bs.isObject=bM,bs.isString=bN,bs.uniqueId=bX,bs.VERSION="1.3.1",typeof d=="function"&&typeof d.amd=="object"&&d.amd&&d("underscore",[],function(){return bs})}(this),d("browserutils",{supportHTML5Audio:function(){var a;try{if(window.HTMLAudioElement&&typeof Audio!="undefined")return a=new Audio,!0}catch(b){return!1}},supportSourceSwappingWithPreload:function(){return/Firefox/i.test(navigator.userAgent)},isMobile:function(a){var b=window.navigator.userAgent,c=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return c.some(function(a){return a=new RegExp(a,"i"),a.test(b)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(a){var b=document.createElement("audio");return!b||!b.canPlayType?!1:b.canPlayType(a).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var a=navigator.userAgent,b=["iPhone","iPad","iPod"],c,d,e;return c=function(b){return b.test(a)},d=!c(/chrome/i)&&!c(/opera/i)&&c(/safari/i),e=b.some(function(a){return c(new RegExp(a,"i"))}),e||d},isMSESupported:function(){return!!window.MediaSource||!!window.WebKitMediaSource},isMSESupportMPEG:function(){var a=window.MediaSource||window.WebKitMediaSource;return a?a.isTypeSupported("audio/mpeg"):!1}}),d("errors",{FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",HTML5_AUDIO_ENDED_EARLY:"HTML5_AUDIO_ENDED_EARLY",HTML5_AUDIO_OVERRUN:"HTML5_AUDIO_OVERRUN",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}),d("vendor/events",["require","exports","module","underscore"],function(a,b,c){var d=a("underscore"),e=[],f=e.push,g=e.slice,h=e.splice,i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if(typeof c=="object")for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!i.test(c))return!0;var f=c.split(i);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d))}},k=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:while(++d<e)c=a[d],c.callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}},l={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!j(this,"once",a,[b,c])||!b)return this;var e=this,f=d.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:d.keys(this._events);for(i=0,k=h.length;i<k;i++){a=h[i];if(g=this._events[a]){this._events[a]=e=[];if(b||c)for(l=0,m=g.length;l<m;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}}return this},trigger:function(a,b){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;typeof b=="object"&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},m={listenTo:"on",listenToOnce:"once"};d.each(m,function(a,b){l[b]=function(b,c,e){var f=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=d.uniqueId("l"));return f[g]=b,typeof c=="object"&&(e=this),b[a](c,e,this),this}}),l.bind=l.on,l.unbind=l.off,c.exports=l}),d("logger",["require","exports","module"],function(a,b,c){var d;c.exports=d=function(a,b,c){this.enabled=c.debug,this.type=a,this.id=b},d.prototype.log=function(a){if(!this.enabled)return;window.console.log("#"+this.type+" "+this.id+"# "+a)}}),d("states",{PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}),d("vendor/swfobject",[],function(){function C(){if(u||!document.getElementsByTagName("body")[0])return;try{var a,b=T("span");b.style.display="none",a=i.getElementsByTagName("body")[0].appendChild(b),a.parentNode.removeChild(a),a=null,b=null}catch(c){return}u=!0;var d=m.length;for(var e=0;e<d;e++)m[e]()}function D(a){u?a():m[m.length]=a}function E(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)V(h,"onload",b);else if(typeof h.onload=="function"){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function F(){var c=i.getElementsByTagName("body")[0],d=T(b);d.setAttribute("style","visibility: hidden;"),d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;(function h(){if(typeof f.GetVariable!=a)try{var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),A.pv=[U(b[0]),U(b[1]),U(b[2])])}catch(e){A.pv=[8,0,0]}else if(g<10){g++,setTimeout(h,10);return}c.removeChild(d),f=null,G()})()}else G()}function G(){var b=n.length;if(b>0)for(var c=0;c<b;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(A.pv[0]>0){var g=S(d);if(g)if(W(n[c].swfVersion)&&!(A.wk&&A.wk<312))Y(d,!0),e&&(f.success=!0,f.ref=H(d),f.id=d,e(f));else if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else K(g),e&&e(f)}else{Y(d,!0);if(e){var m=H(d);m&&typeof m.SetVariable!=a&&(f.success=!0,f.ref=m,f.id=m.id),e(f)}}}}function H(c){var d=null,e=S(c);return e&&e.nodeName.toUpperCase()==="OBJECT"&&(typeof e.SetVariable!==a?d=e:d=e.getElementsByTagName(b)[0]||e),d}function I(){return!v&&W("6.0.65")&&(A.win||A.mac)&&!(A.wk&&A.wk<312)}function J(b,c,d,e){var g=S(d);d=R(d),v=!0,s=e||null,t={success:!1,id:d};if(g){g.nodeName.toUpperCase()=="OBJECT"?(q=L(g),r=null):(q=g,r=d),b.id=f;if(typeof b.width==a||!/%$/.test(b.width)&&U(b.width)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&U(b.height)<137)b.height="137";var j=A.ie?"ActiveX":"PlugIn",k="MMredirectURL="+encodeURIComponent(h.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+j+"&MMdoctitle="+encodeURIComponent(i.title.slice(0,47)+" - Flash Player Installation");typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(A.ie&&g.readyState!=4){var l=T("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",P(g)}N(b,c,d)}}function K(a){if(A.ie&&a.readyState!=4){a.style.display="none";var b=T("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(L(a),b),P(a)}else a.parentNode.replaceChild(L(a),a)}function L(a){var c=T("div");if(A.win&&A.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function M(a,b){var c=T("div");return c.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+b+"</object>",c.firstChild}function N(c,d,f){var g,h=S(f);f=R(f);if(A.wk&&A.wk<312)return g;if(h){var i=A.ie?T("div"):T(b),j,k,l;typeof c.id==a&&(c.id=f);for(l in d)d.hasOwnProperty(l)&&l.toLowerCase()!=="movie"&&O(i,l,d[l]);A.ie&&(i=M(c.data,i.innerHTML));for(j in c)c.hasOwnProperty(j)&&(k=j.toLowerCase(),k==="styleclass"?i.setAttribute("class",c[j]):k!=="classid"&&k!=="data"&&i.setAttribute(j,c[j]));A.ie?o[o.length]=c.id:(i.setAttribute("type",e),i.setAttribute("data",c.data)),h.parentNode.replaceChild(i,h),g=i}return g}function O(a,b,c){var d=T("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function P(a){var b=S(a);b&&b.nodeName.toUpperCase()=="OBJECT"&&(A.ie?(b.style.display="none",function c(){if(b.readyState==4){for(var a in b)typeof b[a]=="function"&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(c,10)}()):b.parentNode.removeChild(b))}function Q(a){return a&&a.nodeType&&a.nodeType===1}function R(a){return Q(a)?a.id:a}function S(a){if(Q(a))return a;var b=null;try{b=i.getElementById(a)}catch(c){}return b}function T(a){return i.createElement(a)}function U(a){return parseInt(a,10)}function V(a,b,c){a.attachEvent(b,c),p[p.length]=[a,b,c]}function W(a){a+="";var b=A.pv,c=a.split(".");return c[0]=U(c[0]),c[1]=U(c[1])||0,c[2]=U(c[2])||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function X(b,c,d,e){var f=i.getElementsByTagName("head")[0];if(!f)return;var g=typeof d=="string"?d:"screen";e&&(w=null,x=null);if(!w||x!=g){var h=T("style");h.setAttribute("type","text/css"),h.setAttribute("media",g),w=f.appendChild(h),A.ie&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(w=i.styleSheets[i.styleSheets.length-1]),x=g}w&&(typeof w.addRule!=a?w.addRule(b,c):typeof i.createTextNode!=a&&w.appendChild(i.createTextNode(b+" {"+c+"}")))}function Y(a,b){if(!y)return;var c=b?"visible":"hidden",d=S(a);u&&d?d.style.visibility=c:typeof a=="string"&&X("#"+a,"visibility:"+c)}function Z(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k,l=!1,m=[],n=[],o=[],p=[],q,r,s,t,u=!1,v=!1,w,x,y=!0,z=!1,A=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),k=j.platform.toLowerCase(),m=k?/win/.test(k):/win/.test(g),n=k?/mac/.test(k):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=j.appName==="Microsoft Internet Explorer",q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&typeof j.mimeTypes!=a&&j.mimeTypes[e]&&j.mimeTypes[e].enabledPlugin&&(l=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=U(r.replace(/^(.*)\..*$/,"$1")),q[1]=U(r.replace(/^.*\.(.*)\s.*$/,"$1")),q[2]=/[a-zA-Z]/.test(r)?U(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[U(r[0]),U(r[1]),U(r[2])]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}(),B=function(){if(!A.w3)return;(typeof i.readyState!=a&&(i.readyState==="complete"||i.readyState==="interactive")||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&C(),u||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",C,!1),A.ie&&(i.attachEvent(g,function b(){i.readyState=="complete"&&(i.detachEvent(g,b),C())}),h==top&&function c(){if(u)return;try{i.documentElement.doScroll("left")}catch(a){setTimeout(c,0);return}C()}()),A.wk&&function d(){if(u)return;if(!/loaded|complete/.test(i.readyState)){setTimeout(d,0);return}C()}())}();m[0]=function(){l?F():G()};var $=function(){A.ie&&window.attachEvent("onunload",function(){var a=p.length;for(var b=0;b<a;b++)p[b][0].detachEvent(p[b][1],p[b][2]);var c=o.length;for(var d=0;d<c;d++)P(o[d]);for(var e in A)A[e]=null;A=null;for(var f in k)k[f]=null;k=null})}();return k={registerObject:function(a,b,c,d){if(A.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,n[n.length]=e,Y(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(A.w3)return H(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m=R(d),n={success:!1,id:m};A.w3&&!(A.wk&&A.wk<312)&&c&&d&&e&&f&&g?(Y(m,!1),D(function(){e+="",f+="";var o={};if(k&&typeof k===b)for(var p in k)o[p]=k[p];o.data=c,o.width=e,o.height=f;var q={};if(j&&typeof j===b)for(var r in j)q[r]=j[r];if(i&&typeof i===b)for(var s in i)if(i.hasOwnProperty(s)){var t=z?encodeURIComponent(s):s,u=z?encodeURIComponent(i[s]):i[s];typeof q.flashvars!=a?q.flashvars+="&"+t+"="+u:q.flashvars=t+"="+u}if(W(g)){var v=N(o,q,d);o.id==m&&Y(m,!0),n.success=!0,n.ref=v,n.id=v.id}else{if(h&&I()){o.data=h,J(o,q,d,l);return}Y(m,!0)}l&&l(n)})):l&&l(n)},switchOffAutoHideShow:function(){y=!1},enableUriEncoding:function(b){z=typeof b===a?!0:b},ua:A,getFlashPlayerVersion:function(){return{major:A.pv[0],minor:A.pv[1],release:A.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(a,b,c){return A.w3?N(a,b,c):undefined},showExpressInstall:function(a,b,c,d){A.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){A.w3&&P(a)},createCSS:function(a,b,c,d){A.w3&&X(a,b,c,d)},addDomLoadEvent:D,addLoadEvent:E,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return Z(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return Z(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=S(f);a&&q&&(a.parentNode.replaceChild(q,a),r&&(Y(r,!0),A.ie&&(q.style.display="block")),s&&s(t)),v=!1}},version:"2.3"}}),d("flashaudioproxy",["require","exports","module","underscore","errors","vendor/events","logger","states","vendor/swfobject"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("logger"),i=a("states"),j=a("vendor/swfobject");c.exports=d=function(a,b){this._descriptor=a,this._id=a.id,this._autoPlay=a.autoPlay||!1,d.players[a.id]=this,this._errorMessage=null,this._errorID=null,this._state=i.INITIALIZE,this._settings=b,this._volume=1,this._muted=!1,this._logger=new h(this.getType(),this._id,b),d.creatingFlashAudio||(d.flashAudio?this._createFlashAudio():d.createFlashObject(b))},d.createFlashObject=function(a){d.creatingFlashAudio=!0,d.containerElement=document.createElement("div"),d.containerElement.setAttribute("id",a.flashObjectID+"-container"),d.flashElementTarget=document.createElement("div"),d.flashElementTarget.setAttribute("id",a.flashObjectID+"-target"),d.containerElement.appendChild(d.flashElementTarget),document.body.appendChild(d.containerElement);var b=function(b){if(!b.success){for(var c in d.players)d.players.hasOwnProperty(c)&&(d.players[c]._errorID=f.FLASH_PROXY_CANT_LOAD_FLASH,d.players[c]._errorMessage="Cannot create flash object",d.players[c]._setState(i.ERROR));return}d.flashAudio=document.getElementById(a.flashObjectID),setTimeout(function(){if(d.flashAudio&&!("PercentLoaded"in d.flashAudio))for(var a in d.players)d.players.hasOwnProperty(a)&&(d.players[a]._errorID=f.FLASH_PROXY_FLASH_BLOCKED,d.players[a]._errorMessage="Flash object blocked",d.players[a]._setState(i.ERROR),d.players[a]._logger.type=d.players[a].getType(),d.players[a]._logger.log(d.players[a]._errorMessage))},a.flashLoadTimeout),d.flashAudio.triggerEvent=function(a,b){d.players[a]._triggerEvent(b)},d.flashAudio.onPositionChange=function(a,b,c,e){d.players[a]._onPositionChange(b,c,e)},d.flashAudio.onDebug=function(a,b,c){d.players[a]._logger.type=b,d.players[a]._logger.log(c)},d.flashAudio.onStateChange=function(a,b){d.players[a]._setState(b),b===i.DEAD&&delete d.players[a]},d.flashAudio.onInit=function(a){d.creatingFlashAudio=!1,e.invoke(e.values(d.players),"_createFlashAudio")}};document.getElementById(a.flashObjectID)||j.embedSWF(a.flashAudioPath,a.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(a))},{allowscriptaccess:"always"},{id:a.flashObjectID},b)},d._ready=function(){return d.flashAudio&&!d.creatingFlashAudio},e.extend(d.prototype,g),d.players={},d.prototype._createFlashAudio=function(){d.flashAudio.createAudio(this._descriptor),this._state=d.flashAudio.getState(this._id),this.setVolume(this._volume),this.setMute(this._muted),this._autoPlay&&this.play()},d.prototype._triggerEvent=function(a){this._logger.log("Flash element triggered event: "+a),this.trigger(a,this)},d.prototype._setState=function(a){if(this._state===a)return;this._state=a,this.trigger("stateChange",a,this)},d.prototype._onPositionChange=function(a,b,c){this.trigger("positionChange",a,b,c,this)},d.prototype.getId=function(){return this._id},d.prototype.getType=function(){return d._ready()?d.flashAudio.getType(this._id):"Flash ..."},d.prototype.getContainerElement=function(){return d.containerElement},d.prototype.play=function(a){if(!d._ready())return;if(this.getState()===i.PAUSED){this.resume();return}a=a===undefined?0:a,d.flashAudio.playAudio(this._id,a)},d.prototype.pause=function(){if(!d._ready())return;d.flashAudio.pauseAudio(this._id)},d.prototype.seek=function(a){if(!d._ready())return;d.flashAudio.seekAudio(this._id,a)},d.prototype.resume=function(){if(!d._ready())return;d.flashAudio.resumeAudio(this._id)},d.prototype.setVolume=function(a){this._volume=a;if(!d._ready())return;d.flashAudio.setVolume(this._id,a)},d.prototype.getVolume=function(){return d._ready()?d.flashAudio.getVolume(this._id):this._volume},d.prototype.setMute=function(a){this._muted=a;if(!d._ready())return;d.flashAudio.setMute(this._id,a)},d.prototype.getMute=function(){return d._ready()?d.flashAudio.getMute(this._id):this._muted},d.prototype.getState=function(){return this._state},d.prototype.getCurrentPosition=function(){return d._ready()?d.flashAudio.getCurrentPosition(this._id):0},d.prototype.getLoadedPosition=function(){return d._ready()?d.flashAudio.getLoadedPosition(this._id):0},d.prototype.getDuration=function(){return d._ready()?d.flashAudio.getDuration(this._id):0},d.prototype.kill=function(){if(!d._ready())return 0;d.flashAudio.killAudio(this._id)},d.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:d.flashAudio.getErrorMessage(this._id)},d.prototype.getErrorID=function(){return this._errorID?this._errorID:d.flashAudio.getErrorID(this._id)},d.prototype.getLevelNum=function(){return d._ready()?d.flashAudio.getLevelNum(this._id):0},d.prototype.getLevel=function(){return d._ready()?d.flashAudio.getLevel(this._id):0},d.prototype.setLevel=function(a){return d._ready()?d.flashAudio.setLevel(this._id,a):0},d.prototype.preload=function(){return!1}}),d("html5audioplayer",["require","exports","module","underscore","vendor/events","states","errors","logger","browserutils"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/events"),g=a("states"),h=a("errors"),i=a("logger"),j=a("browserutils");c.exports=d=function(a,b){this._id=a.id,this._descriptor=a,this._isLoaded=!1,this._settings=b,this._bufferingTimeout=null,this._currentPosition=0,this._loadedPosition=0,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,a.duration&&(this._duration=a.duration),e.bindAll(this,"_onPositionChange","_onHtml5AudioStateChange","_onLoaded","_onLoadedMetadata","_onBuffering"),this._init(),this._toggleEventListeners(!0),this._descriptor.preload&&this._preload(),a.autoPlay?this.play():this._setState(g.IDLE)},e.extend(d.prototype,f),d.prototype.getId=function(){return this._id},d.prototype.getType=function(){return"HTML5 audio"},d.prototype.play=function(a){if(this._isInOneOfStates(g.ERROR,g.DEAD))return;if(this._isInOneOfStates(g.PAUSED,g.ENDED)){this.resume();return}this._logger.log("play"),this._startFromPosition=a||0,this._setState(g.LOADING),this._playRequested=!0,this._isLoaded?this._playAfterLoaded():(this._preload(),this.once("loaded",this._playAfterLoaded))},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(g.ERROR,g.DEAD))return;this._logger.log("pause"),this._html5Audio.pause(),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){var b=!1,c=a/1e3,d=this._html5Audio.seekable,e;if(this._isInOneOfStates(g.ERROR,g.DEAD))return;if(!this._isLoaded){this.once("loaded",function(){this.seek(a)});return}for(e=0;e<d.length;e++)if(c<=d.end(e)&&c>=d.start(e)){b=!0;break}if(!b)return;this._logger.log("seek"),this._setState(g.SEEKING),this._html5Audio.currentTime=c,this._currentPosition=a,clearTimeout(this._bufferingTimeout)},d.prototype.resume=function(){if(this._isInOneOfStates(g.ERROR,g.DEAD))return;this._logger.log("resume"),this.getState()===g.PAUSED?(this._setState(g.LOADING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===g.ENDED&&(this._setState(g.LOADING),this._html5Audio.play(0)),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype.setVolume=function(a){if(!this._html5Audio)return;this._html5Audio.volume=a},d.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},d.prototype.setMute=function(a){if(!this._html5Audio)return;this._html5Audio.muted=a},d.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},d.prototype.getState=function(){return this._state},d.prototype.getCurrentPosition=function(){return this._currentPosition},d.prototype.getLoadedPosition=function(){return this._loadedPosition},d.prototype.getDuration=function(){return this._duration},d.prototype.kill=function(){if(this._state===g.DEAD)return;clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this._html5Audio.src=null,delete this._html5Audio,this._setState(g.DEAD)},d.prototype.getErrorMessage=function(){return this._errorMessage},d.prototype.getErrorID=function(){return this._errorID},d.prototype._init=function(){this._html5Audio=new Audio,this._html5Audio.mozAudioChannelType="content",this._html5Audio.id=this._settings.audioObjectID+"_"+this._descriptor.id,this._html5Audio.preload="none",this._logger=new i(this.getType(),this._id,this._settings)},d.prototype._preload=function(){this._html5Audio.preload!=="auto"&&(this._logger.log("setting up preload"),this._html5Audio.preload="auto",this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.load())},d.prototype._playAfterLoaded=function(){if(!this._playRequested)return;this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype._setState=function(a){if(this._state===a)return;this._logger.log('state changed "'+a+'"'),this._logger.log("_currentPosition = "+this._currentPosition+", _loadedPosition = "+this._loadedPosition),this._state=a,this.trigger("stateChange",a,this)},d.prototype._isInOneOfStates=function(){for(var a in arguments)if(arguments[a]===this._state)return!0;return!1},d.prototype._toggleEventListeners=function(a){if(!this._html5Audio)return;var b=a?"addEventListener":"removeEventListener";["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(a){this._html5Audio[b](a,this._onHtml5AudioStateChange)},this),this._html5Audio[b]("loadeddata",this._onLoaded),this._html5Audio[b]("loadedmetadata",this._onLoadedMetadata)},d.prototype._updatePositions=function(){this._currentPosition=this._html5Audio.currentTime*1e3,this._html5Audio.seekable.length>0&&(this._loadedPosition=this._html5Audio.seekable.end(0)*1e3)},d.prototype._trySeekToStartPosition=function(){var a;if(this._startFromPosition>0){this._logger.log("seek to start position="+this._startFromPosition),a=this._startFromPosition/1e3,this._html5Audio.currentTime=a;if(this._html5Audio.currentTime===a)return this._startFromPosition=0,!0}return!1},d.prototype._onBuffering=function(){this._setState(g.LOADING)},d.prototype._onLoaded=function(a){this._logger.log('html5 audio event (loaded handler) "'+a.type+'"');if(this._duration===undefined||this._duration===0)this._duration=this._html5Audio.duration*1e3;this._isLoaded=!0,this.trigger("loaded",this)},d.prototype._onLoadedMetadata=function(a){this._logger.log('html5 audio event (loadedmetadata handler) "'+a.type+'"'),this.trigger("loadedmetadata",this)},d.prototype._onPositionChange=function(a){this._updatePositions();var b=this._currentPosition-this._prevCurrentPosition,c,d,e;this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this);if(!this._isInOneOfStates(g.PLAYING,g.LOADING)){this._state===g.SEEKING&&b>0&&this._setState(g.PLAYING);return}this._duration!==0&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!j.isIE10Mobile)&&this._onHtml5AudioStateChange({type:"ended"}),c=(new Date).valueOf(),d=c-this._prevCheckTime;if(d===0)return;e=b/d,e>.7?(clearTimeout(this._bufferingTimeout),this._setState(g.PLAYING),this._bufferingTimeout=null):this._state===g.PLAYING&&this._bufferingTimeout==null&&(this._bufferingTimeout=setTimeout(this._onBuffering,this._settings.bufferingDelay)),this._prevCurrentPosition=this._currentPosition,this._prevCheckTime=c},d.prototype._onHtml5AudioStateChange=function(a){this._logger.log('html5 audio event (state change handler) "'+a.type+'"'),clearTimeout(this._bufferingTimeout);switch(a.type){case"playing":if(this._trySeekToStartPosition())return;this._updatePositions(),this._setState(g.PLAYING);break;case"pause":this._setState(g.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this),clearInterval(this._positionUpdateTimer),this._setState(g.ENDED);break;case"waiting":if(this.getState()===g.SEEKING)break;this._setState(g.LOADING);break;case"seeking":this._setState(g.SEEKING);break;case"seeked":this._updatePositions(),this._html5Audio.paused?this._setState(g.PAUSED):this._setState(g.PLAYING);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},d.prototype._html5AudioErrorCodeToErrorId=function(){return{1:h.HTML5_AUDIO_ABORTED,2:h.HTML5_AUDIO_NETWORK,3:h.HTML5_AUDIO_DECODE,4:h.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},d.prototype._error=function(a,b){var c="error: ";b&&(c="error (native): "),this._errorID=a,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(c+this._errorID+" "+this._errorMessage),this._setState(g.ERROR),this._toggleEventListeners(!1)},d.prototype._getErrorMessage=function(a){var b={};return b[h.HTML5_AUDIO_ABORTED]="The fetching process was aborted by the user.",b[h.HTML5_AUDIO_NETWORK]="A network connection lost.",b[h.HTML5_AUDIO_DECODE]="An error occurred while decoding the media resource.",b[h.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource is not suitable.",b[h.HTML5_AUDIO_ENDED_EARLY]="Audio playback ended before the indicated duration of the track.",b[h.HTML5_AUDIO_OVERRUN]="Audio playback continued past end of the track.",b[a]}}),d("hlsaudioplayer",["require","exports","module","underscore","errors","vendor/events","html5audioplayer","logger","states"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("html5audioplayer"),i=a("logger"),j=a("states"),k=1;c.exports=d=function(a,b){h.apply(this,arguments),this._seekPosition=0},e.extend(d.prototype,h.prototype),d.prototype.getType=function(){return"HTML5 HLS audio"},d.prototype.seek=function(a){h.prototype.seek.apply(this,arguments),this._isInOneOfStates(j.LOADING,j.SEEKING)&&(this._seekPosition=a)},d.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(j.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(j.PLAYING,j.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return h.prototype.getCurrentPosition.apply(this,arguments)},d.prototype._onStateChange=function(a){this._logger.log('hls html5 audio event "'+a.type+'"'),clearTimeout(this._bufferingTimeout);switch(a.type){case"playing":if(this._trySeekToStartPosition())return;this.updatePositions(),this._setState(j.PLAYING);break;case"pause":this._setState(j.PAUSED);break;case"ended":if(this._currentPosition+k<this._duration){this._errorID=f.HTML5_AUDIO_ENDED_EARLY,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(j.ERROR),this.toggleEventListeners(!1);break}this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this),this._setState(j.ENDED),clearInterval(this._positionUpdateTimer);break;case"waiting":if(this.getState()===j.SEEKING)break;this._setState(j.LOADING);break;case"seeking":this._setState(j.SEEKING);break;case"seeked":this.updatePositions(),this._html5Audio.paused&&this._setState(j.PAUSED);break;case"error":this._errorID={1:f.HTML5_AUDIO_ABORTED,2:f.HTML5_AUDIO_NETWORK,3:f.HTML5_AUDIO_DECODE,4:f.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code],this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(j.ERROR),this.toggleEventListeners(!1)}}}),d("singleaudioplayer",["require","exports","module","underscore","browserutils","errors","vendor/events","html5audioplayer","logger","states"],function(a,b,c){var d,e=a("underscore"),f=a("browserutils"),g=a("errors"),h=a("vendor/events"),i=a("html5audioplayer"),j=a("logger"),k=a("states"),l={};c.exports=d=function(a,b){i.apply(this,arguments)},e.extend(d.prototype,i.prototype),d.prototype._init=function(){if(!d._html5Audio){var a=new Audio;a.mozAudioChannelType="content",a.id=this._settings.audioObjectID+"_Single",a.preload="none",d._html5Audio=a,this._preloadAudio=a,this._addGlobalListeners()}this._html5Audio=d._html5Audio,this._playRequested=!1,this._logger=new j(this.getType(),this._id,this._settings)},d.prototype._toggleEventListeners=function(a){a?l[this._id]=this:delete l[this._id]},d.prototype._addGlobalListeners=function(){var a=d._html5Audio,b=function(b,c){var d=l[a._playerId];Object.keys(l).forEach(function(a){var b=l[a];b!==d&&b._isInOneOfStates(k.PLAYING,k.LOADING,k.SEEKING)&&b.pause()}),d&&d[b](c)},c=b.bind(null,"_onHtml5AudioStateChange"),e=b.bind(null,"_onLoaded"),f=b.bind(null,"_onLoadedMetadata");["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(b){a.addEventListener(b,c)}),a.addEventListener("loadeddata",e),a.addEventListener("loadedmetadata",f)},d.prototype.getType=function(){return"HTML5 single audio"},d.prototype.play=function(a){this._playRequested=!0;if(this._html5Audio._playerId===this._descriptor.id&&this._isInOneOfStates(k.PAUSED,k.ENDED)){i.prototype.resume.apply(this,arguments);return}this._isInOneOfStates(k.PAUSED)&&(a=this._currentPosition),this._startFromPosition=a||0,this._html5Audio._playerId=this._descriptor.id,this._toggleEventListeners(!0),this._setState(k.LOADING);var b=function(){if(!this._playRequested)return;this._logger.log("play after loaded"),this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};this._html5Audio.readyState>0&&this._descriptor.src===this._html5Audio.src?b.apply(this):(this.once("loaded",b),this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.preload="auto",this._html5Audio.load())},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(k.ERROR,k.DEAD))return;this._logger.log("pause"),this._html5Audio._playerId===this._descriptor.id?this._html5Audio.pause():(this._toggleEventListeners(!1),this._setState(k.PAUSED)),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){if(this._html5Audio._playerId!==this._descriptor.id){this._currentPosition=a,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);return}i.prototype.seek.apply(this,arguments)},d.prototype.kill=function(){if(this._state===k.DEAD)return;this._playRequested=!1,clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._toggleEventListeners(!1),this._setState(k.DEAD)},d.prototype.resume=function(){if(this._isInOneOfStates(k.ERROR,k.DEAD))return;if(this._html5Audio._playerId!==this._descriptor.id){this.play(this._currentPosition);return}i.prototype.resume.apply(this,arguments)},d.prototype.preload=function(){!this._preloadAudio&&f.supportSourceSwappingWithPreload()&&(this._preloadAudio=new Audio,this._preloadAudio.preload="none");var a=this._preloadAudio;a&&a.preload!=="auto"&&(this._logger.log("preload"),a.preload="auto",a._playerId=this._id,a.type=this._descriptor.mimeType,a.src=this._descriptor.src,a.load())}}),d("hlssingleaudioplayer",["require","exports","module","underscore","errors","vendor/events","hlsaudioplayer","logger","singleaudioplayer","states"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("hlsaudioplayer"),i=a("logger"),j=a("singleaudioplayer"),k=a("states");c.exports=d=function(a,b){j.apply(this,arguments)},e.extend(d.prototype,j.prototype),e.extend(d.prototype,e.pick(h.prototype,"_seekPosition","getCurrentPosition","_onStateChange")),d.prototype.seek=function(a){j.prototype.seek.apply(this,arguments),this._isInOneOfStates(k.LOADING,k.SEEKING)&&(this._seekPosition=a)},d.prototype.getType=function(){return"HTML5 HLS single audio"}}),d("mimetypes",{AAC:"audio/aac",M3U8:"application/x-mpegURL",MP4:"audio/mp4",MPEG:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBM:"audio/webm",getTypeByExtension:function(a){var b={mp1:this.MPEG,mp2:this.MPEG,mp3:this.MPEG,mpeg:this.MPEG,mpg:this.MPEG,aac:this.AAC,mp4:this.MP4,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return b[a]||null}}),function(a,b){typeof d=="function"&&d.amd?d("vendor/forge",[],b):a.forge=b()}(this,function(){var a,b,d;return function(c){function p(a,b){return m.call(a,b)}function q(a,b){var c,d,e,f,g,h,i,j,l,m,n,p=b&&b.split("/"),q=k.map,r=q&&q["*"]||{};if(a&&a.charAt(0)===".")if(b){p=p.slice(0,p.length-1),a=a.split("/"),g=a.length-1,k.nodeIdCompat&&o.test(a[g])&&(a[g]=a[g].replace(o,"")),a=p.concat(a);for(l=0;l<a.length;l+=1){n=a[l];if(n===".")a.splice(l,1),l-=1;else if(n==="..")if(l!==1||a[2]!==".."&&a[0]!=="..")l>0&&(a.splice(l-1,2),l-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((p||r)&&q){c=a.split("/");for(l=c.length;l>0;l-=1){d=c.slice(0,l).join("/");if(p)for(m=p.length;m>0;m-=1){e=q[p.slice(0,m).join("/")];if(e){e=e[d];if(e){f=e,h=l;break}}}if(f)break;!i&&r&&r[d]&&(i=r[d],j=l)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function r(a,b){return function(){return f.apply(c,n.call(arguments,0).concat([a,b]))}}function s(a){return function(b){return q(b,a)}}function t(a){return function(b){i[a]=b}}function u(a){if(p(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(c,b)}if(!p(i,a)&&!p(l,a))throw new Error("No "+a);return i[a]}function v(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function w(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice,o=/\.js$/;g=function(a,b){var c,d=v(a),e=d[0];return a=d[1],e&&(e=q(e,b),c=u(e)),e?c&&c.normalize?a=c.normalize(a,s(b)):a=q(a,b):(a=q(a,b),d=v(a),e=d[0],a=d[1],e&&(c=u(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},h={require:function(a){return r(a)},exports:function(a){var b=i[a];return typeof b!="undefined"?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:w(a)}}},e=function(a,b,d,e){var f,k,m,n,o,q=[],s=typeof d,v;e=e||a;if(s==="undefined"||s==="function"){b=!b.length&&d.length?["require","exports","module"]:b;for(o=0;o<b.length;o+=1){n=g(b[o],e),k=n.f;if(k==="require")q[o]=h.require(a);else if(k==="exports")q[o]=h.exports(a),v=!0;else if(k==="module")f=q[o]=h.module(a);else if(p(i,k)||p(j,k)||p(l,k))q[o]=u(k);else if(n.p)n.p.load(n.n,r(e,!0),t(k),{}),q[o]=i[k];else throw new Error(a+" missing "+k)}m=d?d.apply(i[a],q):undefined;if(a)if(f&&f.exports!==c&&f.exports!==i[a])i[a]=f.exports;else if(m!==c||!v)i[a]=m}else a&&(i[a]=d)},a=b=f=function(a,b,d,i,j){if(typeof a=="string")return h[a]?h[a](b):u(g(a,b).f);if(!a.splice){k=a,k.deps&&f(k.deps,k.callback);if(!b)return;b.splice?(a=b,b=d,d=null):a=c}return b=b||function(){},typeof d=="function"&&(d=i,i=j),i?e(c,a,b,d):setTimeout(function(){e(c,a,b,d)},4),f},f.config=function(a){return f(a)},a._defined=i,d=function(a,b,c){b.splice||(c=b,b=[]),!p(i,a)&&!p(j,a)&&(j[a]=[a,b,c])},d.amd={jQuery:!0}}(),d("node_modules/almond/almond",function(){}),function(){function a(a){function d(a){this.data="",this.read=0;if(typeof a=="string")this.data=a;else if(b.isArrayBuffer(a)||b.isArrayBufferView(a)){var c=new Uint8Array(a);try{this.data=String.fromCharCode.apply(null,c)}catch(e){for(var f=0;f<c.length;++f)this.putByte(c[f])}}else if(a instanceof d||typeof a=="object"&&typeof a.data=="string"&&typeof a.read=="number")this.data=a.data,this.read=a.read}function e(a,c){c=c||{},this.read=c.readOffset||0,this.growSize=c.growSize||1024;var d=b.isArrayBuffer(a),e=b.isArrayBufferView(a);if(d||e){d?this.data=new DataView(a):this.data=new DataView(a.buffer,a.byteOffset,a.byteLength),this.write="writeOffset"in c?c.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,a!==null&&a!==undefined&&this.putBytes(a),"writeOffset"in c&&(this.write=c.writeOffset)}var b=a.util=a.util||{};typeof process=="undefined"||!process.nextTick?typeof setImmediate=="function"?(b.setImmediate=setImmediate,b.nextTick=function(a){return setImmediate(a)}):(b.setImmediate=function(a){setTimeout(a,0)},b.nextTick=b.setImmediate):(b.nextTick=process.nextTick,typeof setImmediate=="function"?b.setImmediate=setImmediate:b.setImmediate=b.nextTick),b.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},b.isArrayBuffer=function(a){return typeof ArrayBuffer!="undefined"&&a instanceof ArrayBuffer};var c=[];typeof DataView!="undefined"&&c.push(DataView),typeof Int8Array!="undefined"&&c.push(Int8Array),typeof Uint8Array!="undefined"&&c.push(Uint8Array),typeof Uint8ClampedArray!="undefined"&&c.push(Uint8ClampedArray),typeof Int16Array!="undefined"&&c.push(Int16Array),typeof Uint16Array!="undefined"&&c.push(Uint16Array),typeof Int32Array!="undefined"&&c.push(Int32Array),typeof Uint32Array!="undefined"&&c.push(Uint32Array),typeof Float32Array!="undefined"&&c.push(Float32Array),typeof Float64Array!="undefined"&&c.push(Float64Array),b.isArrayBufferView=function(a){for(var b=0;b<c.length;++b)if(a instanceof c[b])return!0;return!1},b.ByteBuffer=d,b.ByteStringBuffer=d,b.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},b.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},b.ByteStringBuffer.prototype.putByte=function(a){return this.data+=String.fromCharCode(a),this},b.ByteStringBuffer.prototype.fillWithByte=function(a,b){a=String.fromCharCode(a);var c=this.data;while(b>0)b&1&&(c+=a),b>>>=1,b>0&&(a+=a);return this.data=c,this},b.ByteStringBuffer.prototype.putBytes=function(a){return this.data+=a,this},b.ByteStringBuffer.prototype.putString=function(a){return this.data+=b.encodeUtf8(a),this},b.ByteStringBuffer.prototype.putInt16=function(a){return this.data+=String.fromCharCode(a>>8&255)+String.fromCharCode(a&255),this},b.ByteStringBuffer.prototype.putInt24=function(a){return this.data+=String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(a&255),this},b.ByteStringBuffer.prototype.putInt32=function(a){return this.data+=String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(a&255),this},b.ByteStringBuffer.prototype.putInt16Le=function(a){return this.data+=String.fromCharCode(a&255)+String.fromCharCode(a>>8&255),this},b.ByteStringBuffer.prototype.putInt24Le=function(a){return this.data+=String.fromCharCode(a&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255),this},b.ByteStringBuffer.prototype.putInt32Le=function(a){return this.data+=String.fromCharCode(a&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>24&255),this},b.ByteStringBuffer.prototype.putInt=function(a,b){do b-=8,this.data+=String.fromCharCode(a>>b&255);while(b>0);return this},b.ByteStringBuffer.prototype.putSignedInt=function(a,b){return a<0&&(a+=2<<b-1),this.putInt(a,b)},b.ByteStringBuffer.prototype.putBuffer=function(a){return this.data+=a.getBytes(),this},b.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},b.ByteStringBuffer.prototype.getInt16=function(){var a=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,a},b.ByteStringBuffer.prototype.getInt24=function(){var a=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,a},b.ByteStringBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},b.ByteStringBuffer.prototype.getInt16Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,a},b.ByteStringBuffer.prototype.getInt24Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,a},b.ByteStringBuffer.prototype.getInt32Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,a},b.ByteStringBuffer.prototype.getInt=function(a){var b=0;do b=(b<<8)+this.data.charCodeAt(this.read++),a-=8;while(a>0);return b},b.ByteStringBuffer.prototype.getSignedInt=function(a){var b=this.getInt(a),c=2<<a-2;return b>=c&&(b-=c<<1),b},b.ByteStringBuffer.prototype.getBytes=function(a){var b;return a?(a=Math.min(this.length(),a),b=this.data.slice(this.read,this.read+a),this.read+=a):a===0?b="":(b=this.read===0?this.data:this.data.slice(this.read),this.clear()),b},b.ByteStringBuffer.prototype.bytes=function(a){return typeof a=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},b.ByteStringBuffer.prototype.at=function(a){return this.data.charCodeAt(this.read+a)},b.ByteStringBuffer.prototype.setAt=function(a,b){return this.data=this.data.substr(0,this.read+a)+String.fromCharCode(b)+this.data.substr(this.read+a+1),this},b.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},b.ByteStringBuffer.prototype.copy=function(){var a=b.createBuffer(this.data);return a.read=this.read,a},b.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},b.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},b.ByteStringBuffer.prototype.truncate=function(a){var b=Math.max(0,this.length()-a);return this.data=this.data.substr(this.read,b),this.read=0,this},b.ByteStringBuffer.prototype.toHex=function(){var a="";for(var b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);c<16&&(a+="0"),a+=c.toString(16)}return a},b.ByteStringBuffer.prototype.toString=function(){return b.decodeUtf8(this.bytes())},b.DataBuffer=e,b.DataBuffer.prototype.length=function(){return this.write-this.read},b.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},b.DataBuffer.prototype.accommodate=function(a,b){if(this.length()>=a)return this;b=Math.max(b||this.growSize,a);var c=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),d=new Uint8Array(this.length()+b);return d.set(c),this.data=new DataView(d.buffer),this},b.DataBuffer.prototype.putByte=function(a){return this.accommodate(1),this.data.setUint8(this.write++,a),this},b.DataBuffer.prototype.fillWithByte=function(a,b){this.accommodate(b);for(var c=0;c<b;++c)this.data.setUint8(a);return this},b.DataBuffer.prototype.putBytes=function(a,c){if(b.isArrayBufferView(a)){var d=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),e=d.byteLength-d.byteOffset;this.accommodate(e);var f=new Uint8Array(this.data.buffer,this.write);return f.set(d),this.write+=e,this}if(b.isArrayBuffer(a)){var d=new Uint8Array(a);this.accommodate(d.byteLength);var f=new Uint8Array(this.data.buffer);return f.set(d,this.write),this.write+=d.byteLength,this}if(a instanceof b.DataBuffer||typeof a=="object"&&typeof a.read=="number"&&typeof a.write=="number"&&b.isArrayBufferView(a.data)){var d=new Uint8Array(a.data.byteLength,a.read,a.length());this.accommodate(d.byteLength);var f=new Uint8Array(a.data.byteLength,this.write);return f.set(d),this.write+=d.byteLength,this}a instanceof b.ByteStringBuffer&&(a=a.data,c="binary"),c=c||"binary";if(typeof a=="string"){var g;if(c==="hex")return this.accommodate(Math.ceil(a.length/2)),g=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.hex.decode(a,g,this.write),this;if(c==="base64")return this.accommodate(Math.ceil(a.length/4)*3),g=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.base64.decode(a,g,this.write),this;c==="utf8"&&(a=b.encodeUtf8(a),c="binary");if(c==="binary"||c==="raw")return this.accommodate(a.length),g=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.raw.decode(g),this;if(c==="utf16")return this.accommodate(a.length*2),g=new Uint16Array(this.data.buffer,this.write),this.write+=b.text.utf16.encode(g),this;throw new Error("Invalid encoding: "+c)}throw Error("Invalid parameter: "+a)},b.DataBuffer.prototype.putBuffer=function(a){return this.putBytes(a),a.clear(),this},b.DataBuffer.prototype.putString=function(a){return this.putBytes(a,"utf16")},b.DataBuffer.prototype.putInt16=function(a){return this.accommodate(2),this.data.setInt16(this.write,a),this.write+=2,this},b.DataBuffer.prototype.putInt24=function(a){return this.accommodate(3),this.data.setInt16(this.write,a>>8&65535),this.data.setInt8(this.write,a>>16&255),this.write+=3,this},b.DataBuffer.prototype.putInt32=function(a){return this.accommodate(4),this.data.setInt32(this.write,a),this.write+=4,this},b.DataBuffer.prototype.putInt16Le=function(a){return this.accommodate(2),this.data.setInt16(this.write,a,!0),this.write+=2,this},b.DataBuffer.prototype.putInt24Le=function(a){return this.accommodate(3),this.data.setInt8(this.write,a>>16&255),this.data.setInt16(this.write,a>>8&65535,!0),this.write+=3,this},b.DataBuffer.prototype.putInt32Le=function(a){return this.accommodate(4),this.data.setInt32(this.write,a,!0),this.write+=4,this},b.DataBuffer.prototype.putInt=function(a,b){this.accommodate(b/8);do b-=8,this.data.setInt8(this.write++,a>>b&255);while(b>0);return this},b.DataBuffer.prototype.putSignedInt=function(a,b){return this.accommodate(b/8),a<0&&(a+=2<<b-1),this.putInt(a,b)},b.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},b.DataBuffer.prototype.getInt16=function(){var a=this.data.getInt16(this.read);return this.read+=2,a},b.DataBuffer.prototype.getInt24=function(){var a=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,a},b.DataBuffer.prototype.getInt32=function(){var a=this.data.getInt32(this.read);return this.read+=4,a},b.DataBuffer.prototype.getInt16Le=function(){var a=this.data.getInt16(this.read,!0);return this.read+=2,a},b.DataBuffer.prototype.getInt24Le=function(){var a=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,a},b.DataBuffer.prototype.getInt32Le=function(){var a=this.data.getInt32(this.read,!0);return this.read+=4,a},b.DataBuffer.prototype.getInt=function(a){var b=0;do b=(b<<8)+this.data.getInt8(this.read++),a-=8;while(a>0);return b},b.DataBuffer.prototype.getSignedInt=function(a){var b=this.getInt(a),c=2<<a-2;return b>=c&&(b-=c<<1),b},b.DataBuffer.prototype.getBytes=function(a){var b;return a?(a=Math.min(this.length(),a),b=this.data.slice(this.read,this.read+a),this.read+=a):a===0?b="":(b=this.read===0?this.data:this.data.slice(this.read),this.clear()),b},b.DataBuffer.prototype.bytes=function(a){return typeof a=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},b.DataBuffer.prototype.at=function(a){return this.data.getUint8(this.read+a)},b.DataBuffer.prototype.setAt=function(a,b){return this.data.setUint8(a,b),this},b.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},b.DataBuffer.prototype.copy=function(){return new b.DataBuffer(this)},b.DataBuffer.prototype.compact=function(){if(this.read>0){var a=new Uint8Array(this.data.buffer,this.read),b=new Uint8Array(a.byteLength);b.set(a),this.data=new DataView(b),this.write-=this.read,this.read=0}return this},b.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},b.DataBuffer.prototype.truncate=function(a){return this.write=Math.max(0,this.length()-a),this.read=Math.min(this.read,this.write),this},b.DataBuffer.prototype.toHex=function(){var a="";for(var b=this.read;b<this.data.byteLength;++b){var c=this.data.getUint8(b);c<16&&(a+="0"),a+=c.toString(16)}return a},b.DataBuffer.prototype.toString=function(a){var c=new Uint8Array(this.data,this.read,this.length());a=a||"utf8";if(a==="binary"||a==="raw")return b.binary.raw.encode(c);if(a==="hex")return b.binary.hex.encode(c);if(a==="base64")return b.binary.base64.encode(c);if(a==="utf8")return b.text.utf8.decode(c);if(a==="utf16")return b.text.utf16.decode(c);throw new Error("Invalid encoding: "+a)},b.createBuffer=function(a,c){return c=c||"raw",a!==undefined&&c==="utf8"&&(a=b.encodeUtf8(a)),new b.ByteBuffer(a)},b.fillString=function(a,b){var c="";while(b>0)b&1&&(c+=a),b>>>=1,b>0&&(a+=a);return c},b.xorBytes=function(a,b,c){var d="",e="",f="",g=0,h=0;for(;c>0;--c,++g)e=a.charCodeAt(g)^b.charCodeAt(g),h>=10&&(d+=f,f="",h=0),f+=String.fromCharCode(e),++h;return d+=f,d},b.hexToBytes=function(a){var b="",c=0;a.length&!0&&(c=1,b+=String.fromCharCode(parseInt(a[0],16)));for(;c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b},b.bytesToHex=function(a){return b.createBuffer(a).toHex()},b.int32ToBytes=function(a){return String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(a&255)};var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];b.encode64=function(a,b){var c="",d="",e,g,h,i=0;while(i<a.length)e=a.charCodeAt(i++),g=a.charCodeAt(i++),h=a.charCodeAt(i++),c+=f.charAt(e>>2),c+=f.charAt((e&3)<<4|g>>4),isNaN(g)?c+="==":(c+=f.charAt((g&15)<<2|h>>6),c+=isNaN(h)?"=":f.charAt(h&63)),b&&c.length>b&&(d+=c.substr(0,b)+"\r\n",c=c.substr(b));return d+=c,d},b.decode64=function(a){a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var b="",c,d,e,f,h=0;while(h<a.length)c=g[a.charCodeAt(h++)-43],d=g[a.charCodeAt(h++)-43],e=g[a.charCodeAt(h++)-43],f=g[a.charCodeAt(h++)-43],b+=String.fromCharCode(c<<2|d>>4),e!==64&&(b+=String.fromCharCode((d&15)<<4|e>>2),f!==64&&(b+=String.fromCharCode((e&3)<<6|f)));return b},b.encodeUtf8=function(a){return unescape(encodeURIComponent(a))},b.decodeUtf8=function(a){return decodeURIComponent(escape(a))},b.binary={raw:{},hex:{},base64:{}},b.binary.raw.encode=function(a){return String.fromCharCode.apply(null,a)},b.binary.raw.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(a.length)),c=c||0;var e=c;for(var f=0;f<a.length;++f)d[e++]=a.charCodeAt(f);return b?e-c:d},b.binary.hex.encode=b.bytesToHex,b.binary.hex.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(Math.ceil(a.length/2))),c=c||0;var e=0,f=c;a.length&1&&(e=1,d[f++]=parseInt(a[0],16));for(;e<a.length;e+=2)d[f++]=parseInt(a.substr(e,2),16);return b?f-c:d},b.binary.base64.encode=function(a,b){var c="",d="",e,g,h,i=0;while(i<a.byteLength)e=a[i++],g=a[i++],h=a[i++],c+=f.charAt(e>>2),c+=f.charAt((e&3)<<4|g>>4),isNaN(g)?c+="==":(c+=f.charAt((g&15)<<2|h>>6),c+=isNaN(h)?"=":f.charAt(h&63)),b&&c.length>b&&(d+=c.substr(0,b)+"\r\n",c=c.substr(b));return d+=c,d},b.binary.base64.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(Math.ceil(a.length/4)*3)),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,""),c=c||0;var e,f,h,i,j=0,k=c;while(j<a.length)e=g[a.charCodeAt(j++)-43],f=g[a.charCodeAt(j++)-43],h=g[a.charCodeAt(j++)-43],i=g[a.charCodeAt(j++)-43],d[k++]=e<<2|f>>4,h!==64&&(d[k++]=(f&15)<<4|h>>2,i!==64&&(d[k++]=(h&3)<<6|i));return b?k-c:d},b.text={utf8:{},utf16:{}},b.text.utf8.encode=function(a,c,d){a=b.encodeUtf8(a);var e=c;e||(e=new Uint8Array(a.length)),d=d||0;var f=d;for(var g=0;g<a.length;++g)e[f++]=a.charCodeAt(g);return c?f-d:e},b.text.utf8.decode=function(a){return b.decodeUtf8(String.fromCharCode.apply(null,a))},b.text.utf16.encode=function(a,b,c){var d=b;d||(d=new Uint8Array(a.length));var e=new Uint16Array(d);c=c||0;var f=c,g=c;for(var h=0;h<a.length;++h)e[g++]=a.charCodeAt(h),f+=2;return b?f-c:d},b.text.utf16.decode=function(a){return String.fromCharCode.apply(null,new Uint16Array(a))},b.deflate=function(a,c,d){c=b.decode64(a.deflate(b.encode64(c)).rval);if(d){var e=2,f=c.charCodeAt(1);f&32&&(e=6),c=c.substring(e,c.length-4)}return c},b.inflate=function(a,c,d){var e=a.inflate(b.encode64(c)).rval;return e===null?null:b.decode64(e)};var h=function(a,c,d){if(!a)throw new Error("WebStorage not available.");var e;d===null?e=a.removeItem(c):(d=b.encode64(JSON.stringify(d)),e=a.setItem(c,d));if(typeof e!="undefined"&&e.rval!==!0){var f=new Error(e.error.message);throw f.id=e.error.id,f.name=e.error.name,f}},i=function(a,c){if(!a)throw new Error("WebStorage not available.");var d=a.getItem(c);if(a.init)if(d.rval===null){if(d.error){var e=new Error(d.error.message);throw e.id=d.error.id,e.name=d.error.name,e}d=null}else d=d.rval;return d!==null&&(d=JSON.parse(b.decode64(d))),d},j=function(a,b,c,d){var e=i(a,b);e===null&&(e={}),e[c]=d,h(a,b,e)},k=function(a,b,c){var d=i(a,b);return d!==null&&(d=c in d?d[c]:null),d},l=function(a,b,c){var d=i(a,b);if(d!==null&&c in d){delete d[c];var e=!0;for(var f in d){e=!1;break}e&&(d=null),h(a,b,d)}},m=function(a,b){h(a,b,null)},n=function(a,b,c){var d=null;typeof c=="undefined"&&(c=["web","flash"]);var e,f=!1,g=null;for(var h in c){e=c[h];try{if(e==="flash"||e==="both"){if(b[0]===null)throw new Error("Flash local storage not available.");d=a.apply(this,b),f=e==="flash"}if(e==="web"||e==="both")b[0]=localStorage,d=a.apply(this,b),f=!0}catch(i){g=i}if(f)break}if(!f)throw g;return d};b.setItem=function(a,b,c,d,e){n(j,arguments,e)},b.getItem=function(a,b,c,d){return n(k,arguments,d)},b.removeItem=function(a,b,c,d){n(l,arguments,d)},b.clearItems=function(a,b,c){n(m,arguments,c)},b.parseUrl=function(a){var b=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;b.lastIndex=0;var c=b.exec(a),d=c===null?null:{full:a,scheme:c[1],host:c[2],port:c[3],path:c[4]};return d&&(d.fullHost=d.host,d.port?d.port!==80&&d.scheme==="http"?d.fullHost+=":"+d.port:d.port!==443&&d.scheme==="https"&&(d.fullHost+=":"+d.port):d.scheme==="http"?d.port=80:d.scheme==="https"&&(d.port=443),d.full=d.scheme+"://"+d.fullHost),d};var o=null;b.getQueryVariables=function(a){var b=function(a){var b={},c=a.split("&");for(var d=0;d<c.length;d++){var e=c[d].indexOf("="),f,g;e>0?(f=c[d].substring(0,e),g=c[d].substring(e+1)):(f=c[d],g=null),f in b||(b[f]=[]),!(f in Object.prototype)&&g!==null&&b[f].push(unescape(g))}return b},c;return typeof a=="undefined"?(o===null&&(typeof window=="undefined"?o={}:o=b(window.location.search.substring(1))),c=o):c=b(a),c},b.parseFragment=function(a){var c=a,d="",e=a.indexOf("?");e>0&&(c=a.substring(0,e),d=a.substring(e+1));var f=c.split("/");f.length>0&&f[0]===""&&f.shift();var g=d===""?{}:b.getQueryVariables(d);return{pathString:c,queryString:d,path:f,query:g}},b.makeRequest=function(a){var c=b.parseFragment(a),d={path:c.pathString,query:c.queryString,getPath:function(a){return typeof a=="undefined"?c.path:c.path[a]},getQuery:function(a,b){var d;return typeof a=="undefined"?d=c.query:(d=c.query[a],d&&typeof b!="undefined"&&(d=d[b])),d},getQueryLast:function(a,b){var c,e=d.getQuery(a);return e?c=e[e.length-1]:c=b,c}};return d},b.makeLink=function(a,b,c){a=jQuery.isArray(a)?a.join("/"):a;var d=jQuery.param(b||{});return c=c||"",a+(d.length>0?"?"+d:"")+(c.length>0?"#"+c:"")},b.setPath=function(a,b,c){if(typeof a=="object"&&a!==null){var d=0,e=b.length;while(d<e){var f=b[d++];if(d==e)a[f]=c;else{var g=f in a;if(!g||g&&typeof a[f]!="object"||g&&a[f]===null)a[f]={};a=a[f]}}}},b.getPath=function(a,b,c){var d=0,e=b.length,f=!0;while(f&&d<e&&typeof a=="object"&&a!==null){var g=b[d++];f=g in a,f&&(a=a[g])}return f?a:c},b.deletePath=function(a,b){if(typeof a=="object"&&a!==null){var c=0,d=b.length;while(c<d){var e=b[c++];if(c==d)delete a[e];else if(e in a&&typeof a[e]=="object"&&a[e]!==null)a=a[e];else break}}},b.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},b.format=function(a){var b=/%./g,c,d,e=0,f=[],g=0;while(c=b.exec(a)){d=a.substring(g,b.lastIndex-2),d.length>0&&f.push(d),g=b.lastIndex;var h=c[0][1];switch(h){case"s":case"o":e<arguments.length?f.push(arguments[e++ +1]):f.push("<?>");break;case"%":f.push("%");break;default:f.push("<%"+h+"?>")}}return f.push(a.substring(g)),f.join("")},b.formatNumber=function(a,b,c,d){var e=a,f=isNaN(b=Math.abs(b))?2:b,g=c===undefined?",":c,h=d===undefined?".":d,i=e<0?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f),10)+"",k=j.length>3?j.length%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")},b.formatSize=function(a){return a>=1073741824?a=b.formatNumber(a/1073741824,2,".","")+" GiB":a>=1048576?a=b.formatNumber(a/1048576,2,".","")+" MiB":a>=1024?a=b.formatNumber(a/1024,0)+" KiB":a=b.formatNumber(a,0)+" bytes",a},b.bytesFromIP=function(a){return a.indexOf(".")!==-1?b.bytesFromIPv4(a):a.indexOf(":")!==-1?b.bytesFromIPv6(a):null},b.bytesFromIPv4=function(a){a=a.split(".");if(a.length!==4)return null;var c=b.createBuffer();for(var d=0;d<a.length;++d){var e=parseInt(a[d],10);if(isNaN(e))return null;c.putByte(e)}return c.getBytes()},b.bytesFromIPv6=function(a){var c=0;a=a.split(":").filter(function(a){return a.length===0&&++c,!0});var d=(8-a.length+c)*2,e=b.createBuffer();for(var f=0;f<8;++f){if(!a[f]||a[f].length===0){e.fillWithByte(0,d),d=0;continue}var g=b.hexToBytes(a[f]);g.length<2&&e.putByte(0),e.putBytes(g)}return e.getBytes()},b.bytesToIP=function(a){return a.length===4?b.bytesToIPv4(a):a.length===16?b.bytesToIPv6(a):null},b.bytesToIPv4=function(a){if(a.length!==4)return null;var b=[];for(var c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b.join(".")},b.bytesToIPv6=function(a){if(a.length!==16)return null;var c=[],d=[],e=0;for(var f=0;f<a.length;f+=2){var g=b.bytesToHex(a[f]+a[f+1]);while(g[0]==="0"&&g!=="0")g=g.substr(1);if(g==="0"){var h=d[d.length-1],i=c.length;!h||i!==h.end+1?d.push({start:i,end:i}):(h.end=i,h.end-h.start>d[e].end-d[e].start&&(e=d.length-1))}c.push(g)}if(d.length>0){var j=d[e];j.end-j.start>0&&(c.splice(j.start,j.end-j.start+1,""),j.start===0&&c.unshift(""),j.end===7&&c.push(""))}return c.join(":")},b.estimateCores=function(a,c){function e(a,h,i){if(h===0){var j=Math.floor(a.reduce(function(a,b){return a+b},0)/a.length);return b.cores=Math.max(1,j),URL.revokeObjectURL(d),c(null,b.cores)}f(i,function(b,c){a.push(g(i,c)),e(a,h-1,i)})}function f(a,b){var c=[],e=[];for(var f=0;f<a;++f){var g=new Worker(d);g.addEventListener("message",function(d){e.push(d.data);if(e.length===a){for(var f=0;f<a;++f)c[f].terminate();b(null,e)}}),c.push(g)}for(var f=0;f<a;++f)c[f].postMessage(f)}function g(a,b){var c=[];for(var d=0;d<a;++d){var e=b[d],f=c[d]=[];for(var g=0;g<a;++g){if(d===g)continue;var h=b[g];(e.st>h.st&&e.st<h.et||h.st>e.st&&h.st<e.et)&&f.push(g)}}return c.reduce(function(a,b){return Math.max(a,b.length)},0)}typeof a=="function"&&(c=a,a={}),a=a||{};if("cores"in b&&!a.update)return c(null,b.cores);if(typeof Worker===undefined)return b.cores=1,c(null,b.cores);if(typeof Blob===undefined)return b.cores=2,c(null,b.cores);var d=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){var b=Date.now(),c=b+4;while(Date.now()<c);self.postMessage({st:b,et:c})})}.toString(),")()"],{type:"application/javascript"}));e([],5,16)}}var e="util";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/util",["require","module"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.cipher=a.cipher||{},a.cipher.algorithms=a.cipher.algorithms||{},a.cipher.createCipher=function(b,c){var d=b;typeof d=="string"&&(d=a.cipher.getAlgorithm(d),d&&(d=d()));if(!d)throw new Error("Unsupported algorithm: "+b);return new a.cipher.BlockCipher({algorithm:d,key:c,decrypt:!1})},a.cipher.createDecipher=function(b,c){var d=b;typeof d=="string"&&(d=a.cipher.getAlgorithm(d),d&&(d=d()));if(!d)throw new Error("Unsupported algorithm: "+b);return new a.cipher.BlockCipher({algorithm:d,key:c,decrypt:!0})},a.cipher.registerAlgorithm=function(b,c){b=b.toUpperCase(),a.cipher.algorithms[b]=c},a.cipher.getAlgorithm=function(b){return b=b.toUpperCase(),b in a.cipher.algorithms?a.cipher.algorithms[b]:null};var b=a.cipher.BlockCipher=function(a){this.algorithm=a.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=a.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=a.decrypt,this.algorithm.initialize(a)};b.prototype.start=function(b){b=b||{};var c={};for(var d in b)c[d]=b[d];c.decrypt=this._decrypt,this._finish=!1,this._input=a.util.createBuffer(),this.output=b.output||a.util.createBuffer(),this.mode.start(c)},b.prototype.update=function(a){this._finish||this._input.putBuffer(a);while(this._input.length()>=this.blockSize||this._input.length()>0&&this._finish)this._op.call(this.mode,this._input,this.output);this._input.compact()},b.prototype.finish=function(a){a&&this.mode.name==="CBC"&&(this.mode.pad=function(b){return a(this.blockSize,b,!1)},this.mode.unpad=function(b){return a(this.blockSize,b,!0)});var b={};return b.decrypt=this._decrypt,b.overflow=this._input.length()%this.blockSize,!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,b)?!1:(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,b)?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,b)?!1:!0)}}var e="cipher";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/cipher",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function c(b){typeof b=="string"&&(b=a.util.createBuffer(b));if(a.util.isArray(b)&&b.length>4){var c=b;b=a.util.createBuffer();for(var d=0;d<b.length;++d)b.putByte(c[d])}return a.util.isArray(b)||(b=[b.getInt32(),b.getInt32(),b.getInt32(),b.getInt32()]),b}function d(a){a[a.length-1]=a[a.length-1]+1&4294967295}function e(a){return[a/4294967296|0,a&4294967295]}a.cipher=a.cipher||{};var b=a.cipher.modes=a.cipher.modes||{};b.ecb=function(a){a=a||{},this.name="ECB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)},b.ecb.prototype.start=function(a){},b.ecb.prototype.encrypt=function(a,b){for(var c=0;c<this._blocks;++c)this._inBlock[c]=a.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)b.putInt32(this._outBlock[c])},b.ecb.prototype.decrypt=function(a,b){for(var c=0;c<this._blocks;++c)this._inBlock[c]=a.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)b.putInt32(this._outBlock[c])},b.ecb.prototype.pad=function(a,b){var c=a.length()===this.blockSize?this.blockSize:this.blockSize-a.length();return a.fillWithByte(c,c),!0},b.ecb.prototype.unpad=function(a,b){if(b.overflow>0)return!1;var c=a.length(),d=a.at(c-1);return d>this.blockSize<<2?!1:(a.truncate(d),!0)},b.cbc=function(a){a=a||{},this.name="CBC",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)},b.cbc.prototype.start=function(a){if(a.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in a)this._iv=c(a.iv),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},b.cbc.prototype.encrypt=function(a,b){for(var c=0;c<this._blocks;++c)this._inBlock[c]=this._prev[c]^a.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)b.putInt32(this._outBlock[c]);this._prev=this._outBlock},b.cbc.prototype.decrypt=function(a,b){for(var c=0;c<this._blocks;++c)this._inBlock[c]=a.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)b.putInt32(this._prev[c]^this._outBlock[c]);this._prev=this._inBlock.slice(0)},b.cbc.prototype.pad=function(a,b){var c=a.length()===this.blockSize?this.blockSize:this.blockSize-a.length();return a.fillWithByte(c,c),!0},b.cbc.prototype.unpad=function(a,b){if(b.overflow>0)return!1;var c=a.length(),d=a.at(c-1);return d>this.blockSize<<2?!1:(a.truncate(d),!0)},b.cfb=function(a){a=a||{},this.name="CFB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._blocks)},b.cfb.prototype.start=function(a){if("iv"in a)this._iv=c(a.iv),this._inBlock=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},b.cfb.prototype.encrypt=function(a,b){this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)this._inBlock[c]=a.getInt32()^this._outBlock[c],b.putInt32(this._inBlock[c])},b.cfb.prototype.decrypt=function(a,b){this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)this._inBlock[c]=a.getInt32(),b.putInt32(this._inBlock[c]^this._outBlock[c])},b.cfb.prototype.afterFinish=function(a,b){return b.overflow>0&&a.truncate(this.blockSize-b.overflow),!0},b.ofb=function(a){a=a||{},this.name="OFB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._blocks)},b.ofb.prototype.start=function(a){if("iv"in a)this._iv=c(a.iv),this._inBlock=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},b.ofb.prototype.encrypt=function(a,b){this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._blocks;++c)b.putInt32(a.getInt32()^this._outBlock[c]),this._inBlock[c]=this._outBlock[c]},b.ofb.prototype.decrypt=b.ofb.prototype.encrypt,b.ofb.prototype.afterFinish=function(a,b){return b.overflow>0&&a.truncate(this.blockSize-b.overflow),!0},b.ctr=function(a){a=a||{},this.name="CTR",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._blocks)},b.ctr.prototype.start=function(a){if("iv"in a)this._iv=c(a.iv),this._inBlock=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},b.ctr.prototype.encrypt=function(a,b){this.cipher.encrypt(this._inBlock,this._outBlock),d(this._inBlock);for(var c=0;c<this._blocks;++c)b.putInt32(a.getInt32()^this._outBlock[c])},b.ctr.prototype.decrypt=b.ctr.prototype.encrypt,b.ctr.prototype.afterFinish=function(a,b){return b.overflow>0&&a.truncate(this.blockSize-b.overflow),!0},b.gcm=function(a){a=a||{},this.name="GCM",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks),this._R=3774873600},b.gcm.prototype.start=function(b){if(!("iv"in b))throw new Error("Invalid IV parameter.");var c=a.util.createBuffer(b.iv);this._cipherLength=0;var f;"additionalData"in b?f=a.util.createBuffer(b.additionalData):f=a.util.createBuffer(),"tagLength"in b?this._tagLength=b.tagLength:this._tagLength=128,this._tag=null;if(b.decrypt){this._tag=a.util.createBuffer(b.tag).getBytes();if(this._tag.length!==this._tagLength/8)throw new Error("Authentication tag does not match tag length.")}this._hashBlock=new Array(this._blocks),this.tag=null,this._hashSubkey=new Array(this._blocks),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var g=c.length();if(g===12)this._j0=[c.getInt32(),c.getInt32(),c.getInt32(),1];else{this._j0=[0,0,0,0];while(c.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[c.getInt32(),c.getInt32(),c.getInt32(),c.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(e(g*8)))}this._inBlock=this._j0.slice(0),d(this._inBlock),f=a.util.createBuffer(f),this._aDataLength=e(f.length()*8);var h=f.length()%this.blockSize;h&&f.fillWithByte(0,this.blockSize-h),this._s=[0,0,0,0];while(f.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[f.getInt32(),f.getInt32(),f.getInt32(),f.getInt32()])},b.gcm.prototype.encrypt=function(b,c){this.cipher.encrypt(this._inBlock,this._outBlock),d(this._inBlock);var e=b.length();for(var f=0;f<this._blocks;++f)this._outBlock[f]^=b.getInt32();if(e<this.blockSize){var g=e%this.blockSize;this._cipherLength+=g;var h=a.util.createBuffer();h.putInt32(this._outBlock[0]),h.putInt32(this._outBlock[1]),h.putInt32(this._outBlock[2]),h.putInt32(this._outBlock[3]),h.truncate(this.blockSize-g),this._outBlock[0]=h.getInt32(),this._outBlock[1]=h.getInt32(),this._outBlock[2]=h.getInt32(),this._outBlock[3]=h.getInt32()}else this._cipherLength+=this.blockSize;for(var f=0;f<this._blocks;++f)c.putInt32(this._outBlock[f]);this._s=this.ghash(this._hashSubkey,this._s,this._outBlock)},b.gcm.prototype.decrypt=function(a,b){this.cipher.encrypt(this._inBlock,this._outBlock),d(this._inBlock);var c=a.length();this._hashBlock[0]=a.getInt32(),this._hashBlock[1]=a.getInt32(),this._hashBlock[2]=a.getInt32(),this._hashBlock[3]=a.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var e=0;e<this._blocks;++e)b.putInt32(this._outBlock[e]^this._hashBlock[e]);c<this.blockSize?this._cipherLength+=c%this.blockSize:this._cipherLength+=this.blockSize},b.gcm.prototype.afterFinish=function(b,c){var d=!0;c.overflow&&b.truncate(this.blockSize-c.overflow),this.tag=a.util.createBuffer();var f=this._aDataLength.concat(e(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,f);var g=[];this.cipher.encrypt(this._j0,g);for(var h=0;h<this._blocks;++h)this.tag.putInt32(this._s[h]^g[h]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),c.decrypt&&this.tag.bytes()!==this._tag&&(d=!1),d},b.gcm.prototype.multiply=function(a,b){var c=[0,0,0,0],d=b.slice(0);for(var e=0;e<128;++e){var f=a[e/32|0]&1<<31-e%32;f&&(c[0]^=d[0],c[1]^=d[1],c[2]^=d[2],c[3]^=d[3]),this.pow(d,d)}return c},b.gcm.prototype.pow=function(a,b){var c=a[3]&1;for(var d=3;d>0;--d)b[d]=a[d]>>>1|(a[d-1]&1)<<31;b[0]=a[0]>>>1,c&&(b[0]^=this._R)},b.gcm.prototype.tableMultiply=function(a){var b=[0,0,0,0];for(var c=0;c<32;++c){var d=c/8|0,e=a[d]>>>(7-c%8)*4&15,f=this._m[c][e];b[0]^=f[0],b[1]^=f[1],b[2]^=f[2],b[3]^=f[3]}return b},b.gcm.prototype.ghash=function(a,b,c){return b[0]^=c[0],b[1]^=c[1],b[2]^=c[2],b[3]^=c[3],this.tableMultiply(b)},b.gcm.prototype.generateHashTable=function(a,b){var c=8/b,d=4*c,e=16*c,f=new Array(e);for(var g=0;g<e;++g){var h=[0,0,0,0],i=g/d|0,j=(d-1-g%d)*b;h[i]=1<<b-1<<j,f[g]=this.generateSubHashTable(this.multiply(h,a),b)}return f},b.gcm.prototype.generateSubHashTable=function(a,b){var c=1<<b,d=c>>>1,e=new Array(c);e[d]=a.slice(0);var f=d>>>1;while(f>0)this.pow(e[2*f],e[f]=[]),f>>=1;f=2;while(f<d){for(var g=1;g<f;++g){var h=e[f],i=e[g];e[f+g]=[h[0]^i[0],h[1]^i[1],h[2]^i[2],h[3]^i[3]]}f*=2}e[0]=[0,0,0,0];for(f=d+1;f<c;++f){var j=e[f^d];e[f]=[a[0]^j[0],a[1]^j[1],a[2]^j[2],a[3]^j[3]]}return e}}var e="cipherModes";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/cipherModes",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function b(b,c){var d=function(){return new a.aes.Algorithm(b,c)};a.cipher.registerAlgorithm(b,d)}function j(){c=!0,g=[0,1,2,4,8,16,32,64,128,27,54];var a=new Array(256);for(var b=0;b<128;++b)a[b]=b<<1,a[b+128]=b+128<<1^283;e=new Array(256),f=new Array(256),h=new Array(4),i=new Array(4);for(var b=0;b<4;++b)h[b]=new Array(256),i[b]=new Array(256);var d=0,j=0,k,l,m,n,o,p,q;for(var b=0;b<256;++b){n=j^j<<1^j<<2^j<<3^j<<4,n=n>>8^n&255^99,e[d]=n,f[n]=d,o=a[n],k=a[d],l=a[k],m=a[l],p=o<<24^n<<16^n<<8^(n^o),q=(k^l^m)<<24^(d^m)<<16^(d^l^m)<<8^(d^k^m);for(var r=0;r<4;++r)h[r][d]=p,i[r][n]=q,p=p<<24|p>>>8,q=q<<24|q>>>8;d===0?d=j=1:(d=k^a[a[a[k^m]]],j^=a[a[j]])}}function k(a,b){var c=a.slice(0),f,h=1,j=c.length,k=j+6+1,l=d*k;for(var m=j;m<l;++m)f=c[m-1],m%j===0?(f=e[f>>>16&255]<<24^e[f>>>8&255]<<16^e[f&255]<<8^e[f>>>24]^g[h]<<24,h++):j>6&&m%j===4&&(f=e[f>>>24]<<24^e[f>>>16&255]<<16^e[f>>>8&255]<<8^e[f&255]),c[m]=c[m-j]^f;if(b){var n,o=i[0],p=i[1],q=i[2],r=i[3],s=c.slice(0);l=c.length;for(var m=0,t=l-d;m<l;m+=d,t-=d)if(m===0||m===l-d)s[m]=c[t],s[m+1]=c[t+3],s[m+2]=c[t+2],s[m+3]=c[t+1];else for(var u=0;u<d;++u)n=c[t+u],s[m+(3&-u)]=o[e[n>>>24]]^p[e[n>>>16&255]]^q[e[n>>>8&255]]^r[e[n&255]];c=s}return c}function l(a,b,c,d){var g=a.length/4-1,j,k,l,m,n;d?(j=i[0],k=i[1],l=i[2],m=i[3],n=f):(j=h[0],k=h[1],l=h[2],m=h[3],n=e);var o,p,q,r,s,t,u;o=b[0]^a[0],p=b[d?3:1]^a[1],q=b[2]^a[2],r=b[d?1:3]^a[3];var v=3;for(var w=1;w<g;++w)s=j[o>>>24]^k[p>>>16&255]^l[q>>>8&255]^m[r&255]^a[++v],t=j[p>>>24]^k[q>>>16&255]^l[r>>>8&255]^m[o&255]^a[++v],u=j[q>>>24]^k[r>>>16&255]^l[o>>>8&255]^m[p&255]^a[++v],r=j[r>>>24]^k[o>>>16&255]^l[p>>>8&255]^m[q&255]^a[++v],o=s,p=t,q=u;c[0]=n[o>>>24]<<24^n[p>>>16&255]<<16^n[q>>>8&255]<<8^n[r&255]^a[++v],c[d?3:1]=n[p>>>24]<<24^n[q>>>16&255]<<16^n[r>>>8&255]<<8^n[o&255]^a[++v],c[2]=n[q>>>24]<<24^n[r>>>16&255]<<16^n[o>>>8&255]<<8^n[p&255]^a[++v],c[d?1:3]=n[r>>>24]<<24^n[o>>>16&255]<<16^n[p>>>8&255]<<8^n[q&255]^a[++v]}function m(b){b=b||{};var c=(b.mode||"CBC").toUpperCase(),d="AES-"+c,e;b.decrypt?e=a.cipher.createDecipher(d,b.key):e=a.cipher.createCipher(d,b.key);var f=e.start;return e.start=function(b,c){var d=null;c instanceof a.util.ByteBuffer&&(d=c,c={}),c=c||{},c.output=d,c.iv=b,f.call(e,c)},e}a.aes=a.aes||{},a.aes.startEncrypting=function(a,b,c,d){var e=m({key:a,output:c,decrypt:!1,mode:d});return e.start(b),e},a.aes.createEncryptionCipher=function(a,b){return m({key:a,output:null,decrypt:!1,mode:b})},a.aes.startDecrypting=function(a,b,c,d){var e=m({key:a,output:c,decrypt:!0,mode:d});return e.start(b),e},a.aes.createDecryptionCipher=function(a,b){return m({key:a,output:null,decrypt:!0,mode:b})},a.aes.Algorithm=function(a,b){c||j();var d=this;d.name=a,d.mode=new b({blockSize:16,cipher:{encrypt:function(a,b){return l(d._w,a,b,!1)},decrypt:function(a,b){return l(d._w,a,b,!0)}}}),d._init=!1},a.aes.Algorithm.prototype.initialize=function(b){if(this._init)return;var c=b.key,d;if(typeof c!="string"||c.length!==16&&c.length!==24&&c.length!==32){if(a.util.isArray(c)&&(c.length===16||c.length===24||c.length===32)){d=c,c=a.util.createBuffer();for(var e=0;e<d.length;++e)c.putByte(d[e])}}else c=a.util.createBuffer(c);if(!a.util.isArray(c)){d=c,c=[];var f=d.length();if(f===16||f===24||f===32){f>>>=2;for(var e=0;e<f;++e)c.push(d.getInt32())}}if(!a.util.isArray(c)||c.length!==4&&c.length!==6&&c.length!==8)throw new Error("Invalid key parameter.");var g=this.mode.name,h=["CFB","OFB","CTR","GCM"].indexOf(g)!==-1;this._w=k(c,b.decrypt&&!h),this._init=!0},a.aes._expandKey=function(a,b){return c||j(),k(a,b)},a.aes._updateBlock=l,b("AES-CBC",a.cipher.modes.cbc),b("AES-CFB",a.cipher.modes.cfb),b("AES-OFB",a.cipher.modes.ofb),b("AES-CTR",a.cipher.modes.ctr),b("AES-GCM",a.cipher.modes.gcm);var c=!1,d=4,e,f,g,h,i}var e="aes";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/aes",["require","module","./cipher","./cipherModes","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.pki=a.pki||{};var b=a.pki.oids=a.oids=a.oids||{};b["1.2.840.113549.1.1.1"]="rsaEncryption",b.rsaEncryption="1.2.840.113549.1.1.1",b["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",b.md5WithRSAEncryption="1.2.840.113549.1.1.4",b["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",b.sha1WithRSAEncryption="1.2.840.113549.1.1.5",b["1.2.840.113549.1.1.7"]="RSAES-OAEP",b["RSAES-OAEP"]="1.2.840.113549.1.1.7",b["1.2.840.113549.1.1.8"]="mgf1",b.mgf1="1.2.840.113549.1.1.8",b["1.2.840.113549.1.1.9"]="pSpecified",b.pSpecified="1.2.840.113549.1.1.9",b["1.2.840.113549.1.1.10"]="RSASSA-PSS",b["RSASSA-PSS"]="1.2.840.113549.1.1.10",b["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",b.sha256WithRSAEncryption="1.2.840.113549.1.1.11",b["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",b.sha384WithRSAEncryption="1.2.840.113549.1.1.12",b["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",b.sha512WithRSAEncryption="1.2.840.113549.1.1.13",b["1.3.14.3.2.7"]="desCBC",b.desCBC="1.3.14.3.2.7",b["1.3.14.3.2.26"]="sha1",b.sha1="1.3.14.3.2.26",b["2.16.840.1.101.3.4.2.1"]="sha256",b.sha256="2.16.840.1.101.3.4.2.1",b["2.16.840.1.101.3.4.2.2"]="sha384",b.sha384="2.16.840.1.101.3.4.2.2",b["2.16.840.1.101.3.4.2.3"]="sha512",b.sha512="2.16.840.1.101.3.4.2.3",b["1.2.840.113549.2.5"]="md5",b.md5="1.2.840.113549.2.5",b["1.2.840.113549.1.7.1"]="data",b.data="1.2.840.113549.1.7.1",b["1.2.840.113549.1.7.2"]="signedData",b.signedData="1.2.840.113549.1.7.2",b["1.2.840.113549.1.7.3"]="envelopedData",b.envelopedData="1.2.840.113549.1.7.3",b["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",b.signedAndEnvelopedData="1.2.840.113549.1.7.4",b["1.2.840.113549.1.7.5"]="digestedData",b.digestedData="1.2.840.113549.1.7.5",b["1.2.840.113549.1.7.6"]="encryptedData",b.encryptedData="1.2.840.113549.1.7.6",b["1.2.840.113549.1.9.1"]="emailAddress",b.emailAddress="1.2.840.113549.1.9.1",b["1.2.840.113549.1.9.2"]="unstructuredName",b.unstructuredName="1.2.840.113549.1.9.2",b["1.2.840.113549.1.9.3"]="contentType",b.contentType="1.2.840.113549.1.9.3",b["1.2.840.113549.1.9.4"]="messageDigest",b.messageDigest="1.2.840.113549.1.9.4",b["1.2.840.113549.1.9.5"]="signingTime",b.signingTime="1.2.840.113549.1.9.5",b["1.2.840.113549.1.9.6"]="counterSignature",b.counterSignature="1.2.840.113549.1.9.6",b["1.2.840.113549.1.9.7"]="challengePassword",b.challengePassword="1.2.840.113549.1.9.7",b["1.2.840.113549.1.9.8"]="unstructuredAddress",b.unstructuredAddress="1.2.840.113549.1.9.8",b["1.2.840.113549.1.9.20"]="friendlyName",b.friendlyName="1.2.840.113549.1.9.20",b["1.2.840.113549.1.9.21"]="localKeyId",b.localKeyId="1.2.840.113549.1.9.21",b["1.2.840.113549.1.9.22.1"]="x509Certificate",b.x509Certificate="1.2.840.113549.1.9.22.1",b["1.2.840.113549.1.12.10.1.1"]="keyBag",b.keyBag="1.2.840.113549.1.12.10.1.1",b["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",b.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",b["1.2.840.113549.1.12.10.1.3"]="certBag",b.certBag="1.2.840.113549.1.12.10.1.3",b["1.2.840.113549.1.12.10.1.4"]="crlBag",b.crlBag="1.2.840.113549.1.12.10.1.4",b["1.2.840.113549.1.12.10.1.5"]="secretBag",b.secretBag="1.2.840.113549.1.12.10.1.5",b["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",b.safeContentsBag="1.2.840.113549.1.12.10.1.6",b["1.2.840.113549.1.5.13"]="pkcs5PBES2",b.pkcs5PBES2="1.2.840.113549.1.5.13",b["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",b.pkcs5PBKDF2="1.2.840.113549.1.5.12",b["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",b.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",b["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",b.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",b["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",b["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",b["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",b["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",b["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",b["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",b["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",b["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",b["1.2.840.113549.3.7"]="des-EDE3-CBC",b["des-EDE3-CBC"]="1.2.840.113549.3.7",b["2.16.840.1.101.3.4.1.2"]="aes128-CBC",b["aes128-CBC"]="2.16.840.1.101.3.4.1.2",b["2.16.840.1.101.3.4.1.22"]="aes192-CBC",b["aes192-CBC"]="2.16.840.1.101.3.4.1.22",b["2.16.840.1.101.3.4.1.42"]="aes256-CBC",b["aes256-CBC"]="2.16.840.1.101.3.4.1.42",b["2.5.4.3"]="commonName",b.commonName="2.5.4.3",b["2.5.4.5"]="serialName",b.serialName="2.5.4.5",b["2.5.4.6"]="countryName",b.countryName="2.5.4.6",b["2.5.4.7"]="localityName",b.localityName="2.5.4.7",b["2.5.4.8"]="stateOrProvinceName",b.stateOrProvinceName="2.5.4.8",b["2.5.4.10"]="organizationName",b.organizationName="2.5.4.10",b["2.5.4.11"]="organizationalUnitName",b.organizationalUnitName="2.5.4.11",b["2.16.840.1.113730.1.1"]="nsCertType",b.nsCertType="2.16.840.1.113730.1.1",b["2.5.29.1"]="authorityKeyIdentifier",b["2.5.29.2"]="keyAttributes",b["2.5.29.3"]="certificatePolicies",b["2.5.29.4"]="keyUsageRestriction",b["2.5.29.5"]="policyMapping",b["2.5.29.6"]="subtreesConstraint",b["2.5.29.7"]="subjectAltName",b["2.5.29.8"]="issuerAltName",b["2.5.29.9"]="subjectDirectoryAttributes",b["2.5.29.10"]="basicConstraints",b["2.5.29.11"]="nameConstraints",b["2.5.29.12"]="policyConstraints",b["2.5.29.13"]="basicConstraints",b["2.5.29.14"]="subjectKeyIdentifier",b.subjectKeyIdentifier="2.5.29.14",b["2.5.29.15"]="keyUsage",b.keyUsage="2.5.29.15",b["2.5.29.16"]="privateKeyUsagePeriod",b["2.5.29.17"]="subjectAltName",b.subjectAltName="2.5.29.17",b["2.5.29.18"]="issuerAltName",b.issuerAltName="2.5.29.18",b["2.5.29.19"]="basicConstraints",b.basicConstraints="2.5.29.19",b["2.5.29.20"]="cRLNumber",b["2.5.29.21"]="cRLReason",b["2.5.29.22"]="expirationDate",b["2.5.29.23"]="instructionCode",b["2.5.29.24"]="invalidityDate",b["2.5.29.25"]="cRLDistributionPoints",b["2.5.29.26"]="issuingDistributionPoint",b["2.5.29.27"]="deltaCRLIndicator",b["2.5.29.28"]="issuingDistributionPoint",b["2.5.29.29"]="certificateIssuer",b["2.5.29.30"]="nameConstraints",b["2.5.29.31"]="cRLDistributionPoints",b["2.5.29.32"]="certificatePolicies",b["2.5.29.33"]="policyMappings",b["2.5.29.34"]="policyConstraints",b["2.5.29.35"]="authorityKeyIdentifier",b["2.5.29.36"]="policyConstraints",b["2.5.29.37"]="extKeyUsage",b.extKeyUsage="2.5.29.37",b["2.5.29.46"]="freshestCRL",b["2.5.29.54"]="inhibitAnyPolicy",b["1.3.6.1.5.5.7.3.1"]="serverAuth",b.serverAuth="1.3.6.1.5.5.7.3.1",b["1.3.6.1.5.5.7.3.2"]="clientAuth",b.clientAuth="1.3.6.1.5.5.7.3.2",b["1.3.6.1.5.5.7.3.3"]="codeSigning",b.codeSigning="1.3.6.1.5.5.7.3.3",b["1.3.6.1.5.5.7.3.4"]="emailProtection",b.emailProtection="1.3.6.1.5.5.7.3.4",b["1.3.6.1.5.5.7.3.8"]="timeStamping",b.timeStamping="1.3.6.1.5.5.7.3.8"}var e="oids";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/oids",["require","module"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.asn1=a.asn1||{};b.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},b.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},b.create=function(b,c,d,e){if(a.util.isArray(e)){var f=[];for(var g=0;g<e.length;++g)e[g]!==undefined&&f.push(e[g]);e=f}return{tagClass:b,type:c,constructed:d,composed:d||a.util.isArray(e),value:e}};var c=function(a){var b=a.getByte();if(b===128)return undefined;var c,d=b&128;return d?c=a.getInt((b&127)<<3):c=b,c};b.fromDer=function(d,e){e===undefined&&(e=!0),typeof d=="string"&&(d=a.util.createBuffer(d));if(d.length()<2){var f=new Error("Too few bytes to parse DER.");throw f.bytes=d.length(),f}var g=d.getByte(),h=g&192,i=g&31,j=c(d);if(d.length()<j){if(e){var f=new Error("Too few bytes to read ASN.1 value.");throw f.detail=d.length()+" < "+j,f}j=d.length()}var k,l=(g&32)===32,m=l;if(!m&&h===b.Class.UNIVERSAL&&i===b.Type.BITSTRING&&j>1){var n=d.read,o=d.getByte();if(o===0){g=d.getByte();var p=g&192;if(p===b.Class.UNIVERSAL||p===b.Class.CONTEXT_SPECIFIC)try{var q=c(d);m=q===j-(d.read-n),m&&(++n,--j)}catch(r){}}d.read=n}if(m){k=[];if(j===undefined)for(;;){if(d.bytes(2)===String.fromCharCode(0,0)){d.getBytes(2);break}k.push(b.fromDer(d,e))}else{var s=d.length();while(j>0)k.push(b.fromDer(d,e)),j-=s-d.length(),s=d.length()}}else{if(j===undefined){if(e)throw new Error("Non-constructed ASN.1 object of indefinite length.");j=d.length()}if(i===b.Type.BMPSTRING){k="";for(var t=0;t<j;t+=2)k+=String.fromCharCode(d.getInt16())}else k=d.getBytes(j)}return b.create(h,i,l,k)},b.toDer=function(c){var d=a.util.createBuffer(),e=c.tagClass|c.type,f=a.util.createBuffer();if(c.composed){c.constructed?e|=32:f.putByte(0);for(var g=0;g<c.value.length;++g)c.value[g]!==undefined&&f.putBuffer(b.toDer(c.value[g]))}else if(c.type===b.Type.BMPSTRING)for(var g=0;g<c.value.length;++g)f.putInt16(c.value.charCodeAt(g));else f.putBytes(c.value);d.putByte(e);if(f.length()<=127)d.putByte(f.length()&127);else{var h=f.length(),i="";do i+=String.fromCharCode(h&255),h>>>=8;while(h>0);d.putByte(i.length|128);for(var g=i.length-1;g>=0;--g)d.putByte(i.charCodeAt(g))}return d.putBuffer(f),d},b.oidToDer=function(b){var c=b.split("."),d=a.util.createBuffer();d.putByte(40*parseInt(c[0],10)+parseInt(c[1],10));var e,f,g,h;for(var i=2;i<c.length;++i){e=!0,f=[],g=parseInt(c[i],10);do h=g&127,g>>>=7,e||(h|=128),f.push(h),e=!1;while(g>0);for(var j=f.length-1;j>=0;--j)d.putByte(f[j])}return d},b.derToOid=function(b){var c;typeof b=="string"&&(b=a.util.createBuffer(b));var d=b.getByte();c=Math.floor(d/40)+"."+d%40;var e=0;while(b.length()>0)d=b.getByte(),e<<=7,d&128?e+=d&127:(c+="."+(e+d),e=0);return c},b.utcTimeToDate=function(a){var b=new Date,c=parseInt(a.substr(0,2),10);c=c>=50?1900+c:2e3+c;var d=parseInt(a.substr(2,2),10)-1,e=parseInt(a.substr(4,2),10),f=parseInt(a.substr(6,2),10),g=parseInt(a.substr(8,2),10),h=0;if(a.length>11){var i=a.charAt(10),j=10;i!=="+"&&i!=="-"&&(h=parseInt(a.substr(10,2),10),j+=2)}b.setUTCFullYear(c,d,e),b.setUTCHours(f,g,h,0);if(j){i=a.charAt(j);if(i==="+"||i==="-"){var k=parseInt(a.substr(j+1,2),10),l=parseInt(a.substr(j+4,2),10),m=k*60+l;m*=6e4,i==="+"?b.setTime(+b-m):b.setTime(+b+m)}}return b},b.generalizedTimeToDate=function(a){var b=new Date,c=parseInt(a.substr(0,4),10),d=parseInt(a.substr(4,2),10)-1,e=parseInt(a.substr(6,2),10),f=parseInt(a.substr(8,2),10),g=parseInt(a.substr(10,2),10),h=parseInt(a.substr(12,2),10),i=0,j=0,k=!1;a.charAt(a.length-1)==="Z"&&(k=!0);var l=a.length-5,m=a.charAt(l);if(m==="+"||m==="-"){var n=parseInt(a.substr(l+1,2),10),o=parseInt(a.substr(l+4,2),10);j=n*60+o,j*=6e4,m==="+"&&(j*=-1),k=!0}return a.charAt(14)==="."&&(i=parseFloat(a.substr(14),10)*1e3),k?(b.setUTCFullYear(c,d,e),b.setUTCHours(f,g,h,i),b.setTime(+b+j)):(b.setFullYear(c,d,e),b.setHours(f,g,h,i)),b},b.dateToUtcTime=function(a){var b="",c=[];c.push((""+a.getUTCFullYear()).substr(2)),c.push(""+(a.getUTCMonth()+1)),c.push(""+a.getUTCDate()),c.push(""+a.getUTCHours()),c.push(""+a.getUTCMinutes()),c.push(""+a.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(b+="0"),b+=c[d];return b+="Z",b},b.integerToDer=function(b){var c=a.util.createBuffer();if(b>=-128&&b<128)return c.putSignedInt(b,8);if(b>=-32768&&b<32768)return c.putSignedInt(b,16);if(b>=-8388608&&b<8388608)return c.putSignedInt(b,24);if(b>=-2147483648&&b<2147483648)return c.putSignedInt(b,32);var d=new Error("Integer too large; max is 32-bits.");throw d.integer=b,d},b.derToInteger=function(b){typeof b=="string"&&(b=a.util.createBuffer(b));var c=b.length()*8;if(c>32)throw new Error("Integer too large; max is 32-bits.");return b.getSignedInt(c)},b.validate=function(c,d,e,f){var g=!1;if(c.tagClass!==d.tagClass&&typeof d.tagClass!="undefined"||c.type!==d.type&&typeof d.type!="undefined")f&&(c.tagClass!==d.tagClass&&f.push("["+d.name+"] "+'Expected tag class "'+d.tagClass+'", got "'+c.tagClass+'"'),c.type!==d.type&&f.push("["+d.name+"] "+'Expected type "'+d.type+'", got "'+c.type+'"'));else if(c.constructed===d.constructed||typeof d.constructed=="undefined"){g=!0;if(d.value&&a.util.isArray(d.value)){var h=0;for(var i=0;g&&i<d.value.length;++i)g=d.value[i].optional||!1,c.value[h]&&(g=b.validate(c.value[h],d.value[i],e,f),g?++h:d.value[i].optional&&(g=!0)),!g&&f&&f.push("["+d.name+"] "+'Tag class "'+d.tagClass+'", type "'+d.type+'" expected value length "'+d.value.length+'", got "'+c.value.length+'"')}g&&e&&(d.capture&&(e[d.capture]=c.value),d.captureAsn1&&(e[d.captureAsn1]=c))}else f&&f.push("["+d.name+"] "+'Expected constructed "'+d.constructed+'", got "'+c.constructed+'"');return g};var d=/[^\\u0000-\\u00ff]/;b.prettyPrint=function(c,e,f){var g="";e=e||0,f=f||2,e>0&&(g+="\n");var h="";for(var i=0;i<e*f;++i)h+=" ";g+=h+"Tag: ";switch(c.tagClass){case b.Class.UNIVERSAL:g+="Universal:";break;case b.Class.APPLICATION:g+="Application:";break;case b.Class.CONTEXT_SPECIFIC:g+="Context-Specific:";break;case b.Class.PRIVATE:g+="Private:"}if(c.tagClass===b.Class.UNIVERSAL){g+=c.type;switch(c.type){case b.Type.NONE:g+=" (None)";break;case b.Type.BOOLEAN:g+=" (Boolean)";break;case b.Type.BITSTRING:g+=" (Bit string)";break;case b.Type.INTEGER:g+=" (Integer)";break;case b.Type.OCTETSTRING:g+=" (Octet string)";break;case b.Type.NULL:g+=" (Null)";break;case b.Type.OID:g+=" (Object Identifier)";break;case b.Type.ODESC:g+=" (Object Descriptor)";break;case b.Type.EXTERNAL:g+=" (External or Instance of)";break;case b.Type.REAL:g+=" (Real)";break;case b.Type.ENUMERATED:g+=" (Enumerated)";break;case b.Type.EMBEDDED:g+=" (Embedded PDV)";break;case b.Type.UTF8:g+=" (UTF8)";break;case b.Type.ROID:g+=" (Relative Object Identifier)";break;case b.Type.SEQUENCE:g+=" (Sequence)";break;case b.Type.SET:g+=" (Set)";break;case b.Type.PRINTABLESTRING:g+=" (Printable String)";break;case b.Type.IA5String:g+=" (IA5String (ASCII))";break;case b.Type.UTCTIME:g+=" (UTC time)";break;case b.Type.GENERALIZEDTIME:g+=" (Generalized time)";break;case b.Type.BMPSTRING:g+=" (BMP String)"}}else g+=c.type;g+="\n",g+=h+"Constructed: "+c.constructed+"\n";if(c.composed){var j=0,k="";for(var i=0;i<c.value.length;++i)c.value[i]!==undefined&&(j+=1,k+=b.prettyPrint(c.value[i],e+1,f),i+1<c.value.length&&(k+=","));g+=h+"Sub values: "+j+k}else{g+=h+"Value: ";if(c.type===b.Type.OID){var l=b.derToOid(c.value);g+=l,a.pki&&a.pki.oids&&l in a.pki.oids&&(g+=" ("+a.pki.oids[l]+") ")}if(c.type===b.Type.INTEGER)try{g+=b.derToInteger(c.value)}catch(m){g+="0x"+a.util.bytesToHex(c.value)}else c.type===b.Type.OCTETSTRING?(d.test(c.value)||(g+="("+c.value+") "),g+="0x"+a.util.bytesToHex(c.value)):c.type===b.Type.UTF8?g+=a.util.decodeUtf8(c.value):c.type===b.Type.PRINTABLESTRING||c.type===b.Type.IA5String?g+=c.value:d.test(c.value)?g+="0x"+a.util.bytesToHex(c.value):c.value.length===0?g+="[null]":g+=c.value}return g}}var e="asn1";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/asn1",["require","module","./util","./oids"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function h(){c=String.fromCharCode(128),c+=a.util.fillString(String.fromCharCode(0),64),d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],e=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],f=new Array(64);for(var b=0;b<64;++b)f[b]=Math.floor(Math.abs(Math.sin(b+1))*4294967296);g=!0}function i(a,b,c){var g,h,i,j,k,l,m,n,o=c.length();while(o>=64){h=a.h0,i=a.h1,j=a.h2,k=a.h3;for(n=0;n<16;++n)b[n]=c.getInt32Le(),l=k^i&(j^k),g=h+l+f[n]+b[n],m=e[n],h=k,k=j,j=i,i+=g<<m|g>>>32-m;for(;n<32;++n)l=j^k&(i^j),g=h+l+f[n]+b[d[n]],m=e[n],h=k,k=j,j=i,i+=g<<m|g>>>32-m;for(;n<48;++n)l=i^j^k,g=h+l+f[n]+b[d[n]],m=e[n],h=k,k=j,j=i,i+=g<<m|g>>>32-m;for(;n<64;++n)l=j^(i|~k),g=h+l+f[n]+b[d[n]],m=e[n],h=k,k=j,j=i,i+=g<<m|g>>>32-m;a.h0=a.h0+h|0,a.h1=a.h1+i|0,a.h2=a.h2+j|0,a.h3=a.h3+k|0,o-=64}}var b=a.md5=a.md5||{};a.md=a.md||{},a.md.algorithms=a.md.algorithms||{},a.md.md5=a.md.algorithms.md5=b,b.create=function(){g||h();var b=null,d=a.util.createBuffer(),e=new Array(16),f={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,messageLength64:[0,0]};return f.start=function(){return f.messageLength=0,f.messageLength64=[0,0],d=a.util.createBuffer(),b={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},f},f.start(),f.update=function(c,g){return g==="utf8"&&(c=a.util.encodeUtf8(c)),f.messageLength+=c.length,f.messageLength64[0]+=c.length/4294967296>>>0,f.messageLength64[1]+=c.length>>>0,d.putBytes(c),i(b,e,d),(d.read>2048||d.length()===0)&&d.compact(),f},f.digest=function(){var g=a.util.createBuffer();g.putBytes(d.bytes()),g.putBytes(c.substr(0,64-(f.messageLength64[1]+8&63))),g.putInt32Le(f.messageLength64[1]<<3),g.putInt32Le(f.messageLength64[0]<<3|f.messageLength64[0]>>>28);var h={h0:b.h0,h1:b.h1,h2:b.h2,h3:b.h3};i(h,e,g);var j=a.util.createBuffer();return j.putInt32Le(h.h0),j.putInt32Le(h.h1),j.putInt32Le(h.h2),j.putInt32Le(h.h3),j},f};var c=null,d=null,e=null,f=null,g=!1}var e="md5";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/md5",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function e(){c=String.fromCharCode(128),c+=a.util.fillString(String.fromCharCode(0),64),d=!0}function f(a,b,c){var d,e,f,g,h,i,j,k,l=c.length();while(l>=64){e=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4;for(k=0;k<16;++k)d=c.getInt32(),b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<20;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<32;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<40;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<60;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f&g|h&(f^g),d=(e<<5|e>>>27)+j+i+2400959708+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<80;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+3395469782+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;a.h0=a.h0+e|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,a.h4=a.h4+i|0,l-=64}}var b=a.sha1=a.sha1||{};a.md=a.md||{},a.md.algorithms=a.md.algorithms||{},a.md.sha1=a.md.algorithms.sha1=b,b.create=function(){d||e();var b=null,g=a.util.createBuffer(),h=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,messageLength64:[0,0]};return i.start=function(){return i.messageLength=0,i.messageLength64=[0,0],g=a.util.createBuffer(),b={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(c,d){return d==="utf8"&&(c=a.util.encodeUtf8(c)),i.messageLength+=c.length,i.messageLength64[0]+=c.length/4294967296>>>0,i.messageLength64[1]+=c.length>>>0,g.putBytes(c),f(b,h,g),(g.read>2048||g.length()===0)&&g.compact(),i},i.digest=function(){var d=a.util.createBuffer();d.putBytes(g.bytes()),d.putBytes(c.substr(0,64-(i.messageLength64[1]+8&63))),d.putInt32(i.messageLength64[0]<<3|i.messageLength64[0]>>>28),d.putInt32(i.messageLength64[1]<<3);var e={h0:b.h0,h1:b.h1,h2:b.h2,h3:b.h3,h4:b.h4};f(e,h,d);var j=a.util.createBuffer();return j.putInt32(e.h0),j.putInt32(e.h1),j.putInt32(e.h2),j.putInt32(e.h3),j.putInt32(e.h4),j},i};var c=null,d=!1}var e="sha1";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/sha1",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function f(){c=String.fromCharCode(128),c+=a.util.fillString(String.fromCharCode(0),64),e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=!0}function g(a,b,c){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.length();while(t>=64){for(k=0;k<16;++k)b[k]=c.getInt32();for(;k<64;++k)d=b[k-2],d=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,f=b[k-15],f=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,b[k]=d+b[k-7]+f+b[k-16]|0;l=a.h0,m=a.h1,n=a.h2,o=a.h3,p=a.h4,q=a.h5,r=a.h6,s=a.h7;for(k=0;k<64;++k)h=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),i=r^p&(q^r),g=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),j=l&m|n&(l^m),d=s+h+i+e[k]+b[k],f=g+j,s=r,r=q,q=p,p=o+d|0,o=n,n=m,m=l,l=d+f|0;a.h0=a.h0+l|0,a.h1=a.h1+m|0,a.h2=a.h2+n|0,a.h3=a.h3+o|0,a.h4=a.h4+p|0,a.h5=a.h5+q|0,a.h6=a.h6+r|0,a.h7=a.h7+s|0,t-=64}}var b=a.sha256=a.sha256||{};a.md=a.md||{},a.md.algorithms=a.md.algorithms||{},a.md.sha256=a.md.algorithms.sha256=b,b.create=function(){d||f();var b=null,e=a.util.createBuffer(),h=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,messageLength64:[0,0]};return i.start=function(){return i.messageLength=0,i.messageLength64=[0,0],e=a.util.createBuffer(),b={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(c,d){return d==="utf8"&&(c=a.util.encodeUtf8(c)),i.messageLength+=c.length,i.messageLength64[0]+=c.length/4294967296>>>0,i.messageLength64[1]+=c.length>>>0,e.putBytes(c),g(b,h,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var d=a.util.createBuffer();d.putBytes(e.bytes()),d.putBytes(c.substr(0,64-(i.messageLength64[1]+8&63))),d.putInt32(i.messageLength64[0]<<3|i.messageLength64[0]>>>28),d.putInt32(i.messageLength64[1]<<3);var f={h0:b.h0,h1:b.h1,h2:b.h2,h3:b.h3,h4:b.h4,h5:b.h5,h6:b.h6,h7:b.h7};g(f,h,d);var j=a.util.createBuffer();return j.putInt32(f.h0),j.putInt32(f.h1),j.putInt32(f.h2),j.putInt32(f.h3),j.putInt32(f.h4),j.putInt32(f.h5),j.putInt32(f.h6),j.putInt32(f.h7),j},i};var c=null,d=!1,e=null}var e="sha256";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/sha256",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function h(){d=String.fromCharCode(128),d+=a.util.fillString(String.fromCharCode(0),128),f=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],g={},g["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],g["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],g["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],g["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],e=!0}function i(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=c.length();while(N>=128){for(G=0;G<16;++G)b[G][0]=c.getInt32()>>>0,b[G][1]=c.getInt32()>>>0;for(;G<80;++G)J=b[G-2],H=J[0],I=J[1],d=((H>>>19|I<<13)^(I>>>29|H<<3)^H>>>6)>>>0,e=((H<<13|I>>>19)^(I<<3|H>>>29)^(H<<26|I>>>6))>>>0,L=b[G-15],H=L[0],I=L[1],g=((H>>>1|I<<31)^(H>>>8|I<<24)^H>>>7)>>>0,h=((H<<31|I>>>1)^(H<<24|I>>>8)^(H<<25|I>>>7))>>>0,K=b[G-7],M=b[G-16],I=e+K[1]+h+M[1],b[G][0]=d+K[0]+g+M[0]+(I/4294967296>>>0)>>>0,b[G][1]=I>>>0;q=a[0][0],r=a[0][1],s=a[1][0],t=a[1][1],u=a[2][0],v=a[2][1],w=a[3][0],x=a[3][1],y=a[4][0],z=a[4][1],A=a[5][0],B=a[5][1],C=a[6][0],D=a[6][1],E=a[7][0],F=a[7][1];for(G=0;G<80;++G)k=((y>>>14|z<<18)^(y>>>18|z<<14)^(z>>>9|y<<23))>>>0,l=((y<<18|z>>>14)^(y<<14|z>>>18)^(z<<23|y>>>9))>>>0,m=(C^y&(A^C))>>>0,n=(D^z&(B^D))>>>0,i=((q>>>28|r<<4)^(r>>>2|q<<30)^(r>>>7|q<<25))>>>0,j=((q<<4|r>>>28)^(r<<30|q>>>2)^(r<<25|q>>>7))>>>0,o=(q&s|u&(q^s))>>>0,p=(r&t|v&(r^t))>>>0,I=F+l+n+f[G][1]+b[G][1],d=E+k+m+f[G][0]+b[G][0]+(I/4294967296>>>0)>>>0,e=I>>>0,I=j+p,g=i+o+(I/4294967296>>>0)>>>0,h=I>>>0,E=C,F=D,C=A,D=B,A=y,B=z,I=x+e,y=w+d+(I/4294967296>>>0)>>>0,z=I>>>0,w=u,x=v,u=s,v=t,s=q,t=r,I=e+h,q=d+g+(I/4294967296>>>0)>>>0,r=I>>>0;I=a[0][1]+r,a[0][0]=a[0][0]+q+(I/4294967296>>>0)>>>0,a[0][1]=I>>>0,I=a[1][1]+t,a[1][0]=a[1][0]+s+(I/4294967296>>>0)>>>0,a[1][1]=I>>>0,I=a[2][1]+v,a[2][0]=a[2][0]+u+(I/4294967296>>>0)>>>0,a[2][1]=I>>>0,I=a[3][1]+x,a[3][0]=a[3][0]+w+(I/4294967296>>>0)>>>0,a[3][1]=I>>>0,I=a[4][1]+z,a[4][0]=a[4][0]+y+(I/4294967296>>>0)>>>0,a[4][1]=I>>>0,I=a[5][1]+B,a[5][0]=a[5][0]+A+(I/4294967296>>>0)>>>0,a[5][1]=I>>>0,I=a[6][1]+D,a[6][0]=a[6][0]+C+(I/4294967296>>>0)>>>0,a[6][1]=I>>>0,I=a[7][1]+F,a[7][0]=a[7][0]+E+(I/4294967296>>>0)>>>0,a[7][1]=I>>>0,N-=128}}var b=a.sha512=a.sha512||{};a.md=a.md||{},a.md.algorithms=a.md.algorithms||{},a.md.sha512=a.md.algorithms.sha512=b;var c=a.sha384=a.sha512.sha384=a.sha512.sha384||{};c.create=function(){return b.create("SHA-384")},a.md.sha384=a.md.algorithms.sha384=c,a.sha512.sha256=a.sha512.sha256||{create:function(){return b.create("SHA-512/256")}},a.md["sha512/256"]=a.md.algorithms["sha512/256"]=a.sha512.sha256,a.sha512.sha224=a.sha512.sha224||{create:function(){return b.create("SHA-512/224")}},a.md["sha512/224"]=a.md.algorithms["sha512/224"]=a.sha512.sha224,b.create=function(b){e||h(),typeof b=="undefined"&&(b="SHA-512");if(b in g){var c=g[b],f=null,j=a.util.createBuffer(),k=new Array(80);for(var l=0;l<80;++l)k[l]=new Array(2);var m={algorithm:b.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,messageLength128:[0,0,0,0]};return m.start=function(){m.messageLength=0,m.messageLength128=[0,0,0,0],j=a.util.createBuffer(),f=new Array(c.length);for(var b=0;b<c.length;++b)f[b]=c[b].slice(0);return m},m.start(),m.update=function(b,c){c==="utf8"&&(b=a.util.encodeUtf8(b)),m.messageLength+=b.length;var d=b.length;d=[d/4294967296>>>0,d>>>0];for(var e=3;e>=0;--e)m.messageLength128[e]+=d[1],d[1]=d[0]+(m.messageLength128[e]/4294967296>>>0),m.messageLength128[e]=m.messageLength128[e]>>>0,d[0]=d[1]/4294967296>>>0;return j.putBytes(b),i(f,k,j),(j.read>2048||j.length()===0)&&j.compact(),m},m.digest=function(){var c=a.util.createBuffer();c.putBytes(j.bytes()),c.putBytes(d.substr(0,128-(m.messageLength128[3]+16&127)));var e=[];for(var g=0;g<3;++g)e[g]=m.messageLength128[g]<<3|m.messageLength128[g-1]>>>28;e[3]=m.messageLength128[3]<<3,c.putInt32(e[0]),c.putInt32(e[1]),c.putInt32(e[2]),c.putInt32(e[3]);var h=new Array(f.length);for(var g=0;g<f.length;++g)h[g]=f[g].slice(0);i(h,k,c);var l=a.util.createBuffer(),n;b==="SHA-512"?n=h.length:b==="SHA-384"?n=h.length-2:n=h.length-4;for(var g=0;g<n;++g)l.putInt32(h[g][0]),(g!==n-1||b!=="SHA-512/224")&&l.putInt32(h[g][1]);return l},m}throw new Error("Invalid SHA-512 algorithm: "+b)};var d=null,e=!1,f=null,g=null}var e="sha512";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/sha512",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.md=a.md||{},a.md.algorithms={md5:a.md5,sha1:a.sha1,sha256:a.sha256},a.md.md5=a.md5,a.md.sha1=a.sha1,a.md.sha256=a.sha256}var e="md";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/md",["require","module","./md5","./sha1","./sha256","./sha512"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.hmac=a.hmac||{};b.create=function(){var b=null,c=null,d=null,e=null,f={};return f.start=function(f,g){if(f!==null)if(typeof f=="string"){f=f.toLowerCase();if(f in a.md.algorithms)c=a.md.algorithms[f].create();else throw new Error('Unknown hash algorithm "'+f+'"')}else c=f;if(g===null)g=b;else{if(typeof g=="string")g=a.util.createBuffer(g);else if(a.util.isArray(g)){var h=g;g=a.util.createBuffer();for(var i=0;i<h.length;++i)g.putByte(h[i])}var j=g.length();j>c.blockLength&&(c.start(),c.update(g.bytes()),g=c.digest()),d=a.util.createBuffer(),e=a.util.createBuffer(),j=g.length();for(var i=0;i<j;++i){var h=g.at(i);d.putByte(54^h),e.putByte(92^h)}if(j<c.blockLength){var h=c.blockLength-j;for(var i=0;i<h;++i)d.putByte(54),e.putByte(92)}b=g,d=d.bytes(),e=e.bytes()}c.start(),c.update(d)},f.update=function(a){c.update(a)},f.getMac=function(){var a=c.digest().bytes();return c.start(),c.update(e),c.update(a),c.digest()},f.digest=f.getMac,f}}var e="hmac";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/hmac",["require","module","./md","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function c(a){var b=a.name+": ",c=[],d=function(a,b){return" "+b};for(var e=0;e<a.values.length;++e)c.push(a.values[e].replace(/^(\S+\r\n)/,d));b+=c.join(",")+"\r\n";var f=0,g=-1;for(var e=0;e<b.length;++e,++f)if(f>65&&g!==-1){var h=b[g];h===","?(++g,b=b.substr(0,g)+"\r\n "+b.substr(g)):b=b.substr(0,g)+"\r\n"+h+b.substr(g+1),f=e-g-1,g=-1,++e}else if(b[e]===" "||b[e]==="\t"||b[e]===",")g=e;return b}function d(a){return a.replace(/^\s+/,"")}var b=a.pem=a.pem||{};b.encode=function(b,d){d=d||{};var e="-----BEGIN "+b.type+"-----\r\n",f;b.procType&&(f={name:"Proc-Type",values:[String(b.procType.version),b.procType.type]},e+=c(f)),b.contentDomain&&(f={name:"Content-Domain",values:[b.contentDomain]},e+=c(f)),b.dekInfo&&(f={name:"DEK-Info",values:[b.dekInfo.algorithm]},b.dekInfo.parameters&&f.values.push(b.dekInfo.parameters),e+=c(f));if(b.headers)for(var g=0;g<b.headers.length;++g)e+=c(b.headers[g]);return b.procType&&(e+="\r\n"),e+=a.util.encode64(b.body,d.maxline||64)+"\r\n",e+="-----END "+b.type+"-----\r\n",e},b.decode=function(b){var c=[],e=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,f=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,g=/\r?\n/,h;for(;;){h=e.exec(b);if(!h)break;var i={type:h[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:a.util.decode64(h[3])};c.push(i);if(!h[2])continue;var j=h[2].split(g),k=0;while(h&&k<j.length){var l=j[k].replace(/\s+$/,"");for(var m=k+1;m<j.length;++m){var n=j[m];if(!/\s/.test(n[0]))break;l+=n,k=m}h=l.match(f);if(h){var o={name:h[1],values:[]},p=h[2].split(",");for(var q=0;q<p.length;++q)o.values.push(d(p[q]));if(!i.procType){if(o.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(o.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');i.procType={version:p[0],type:p[1]}}else if(!i.contentDomain&&o.name==="Content-Domain")i.contentDomain=p[0]||"";else if(!i.dekInfo&&o.name==="DEK-Info"){if(o.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');i.dekInfo={algorithm:p[0],parameters:p[1]||null}}else i.headers.push(o)}++k}if(i.procType==="ENCRYPTED"&&!i.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}if(c.length===0)throw new Error("Invalid PEM formatted message.");return c}}var e="pem";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pem",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function b(b,c){var d=function(){return new a.des.Algorithm(b,c)};a.cipher.registerAlgorithm(b,d)}function k(a){var b=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],c=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],d=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],e=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],f=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],g=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],h=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],i=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],j=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],k=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],n=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],o=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=a.length()>8?3:1,q=[],r=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],s=0,t;for(var u=0;u<p;u++){var v=a.getInt32(),w=a.getInt32();t=(v>>>4^w)&252645135,w^=t,v^=t<<4,t=(w>>>-16^v)&65535,v^=t,w^=t<<-16,t=(v>>>2^w)&858993459,w^=t,v^=t<<2,t=(w>>>-16^v)&65535,v^=t,w^=t<<-16,t=(v>>>1^w)&1431655765,w^=t,v^=t<<1,t=(w>>>8^v)&16711935,v^=t,w^=t<<8,t=(v>>>1^w)&1431655765,w^=t,v^=t<<1,t=v<<8|w>>>20&240,v=w<<24|w<<8&16711680|w>>>8&65280|w>>>24&240,w=t;for(var x=0;x<r.length;++x){r[x]?(v=v<<2|v>>>26,w=w<<2|w>>>26):(v=v<<1|v>>>27,w=w<<1|w>>>27),v&=-15,w&=-15;var y=b[v>>>28]|c[v>>>24&15]|d[v>>>20&15]|e[v>>>16&15]|f[v>>>12&15]|g[v>>>8&15]|h[v>>>4&15],z=i[w>>>28]|j[w>>>24&15]|k[w>>>20&15]|l[w>>>16&15]|m[w>>>12&15]|n[w>>>8&15]|o[w>>>4&15];t=(z>>>16^y)&65535,q[s++]=y^t,q[s++]=z^t<<16}}return q}function l(a,b,k,l){var m=a.length===32?3:9,n;m===3?n=l?[30,-2,-2]:[0,32,2]:n=l?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,p=b[0],q=b[1];o=(p>>>4^q)&252645135,q^=o,p^=o<<4,o=(p>>>16^q)&65535,q^=o,p^=o<<16,o=(q>>>2^p)&858993459,p^=o,q^=o<<2,o=(q>>>8^p)&16711935,p^=o,q^=o<<8,o=(p>>>1^q)&1431655765,q^=o,p^=o<<1,p=p<<1|p>>>31,q=q<<1|q>>>31;for(var r=0;r<m;r+=3){var s=n[r+1],t=n[r+2];for(var u=n[r];u!=s;u+=t){var v=q^a[u],w=(q>>>4|q<<28)^a[u+1];o=p,p=q,q=o^(d[v>>>24&63]|f[v>>>16&63]|h[v>>>8&63]|j[v&63]|c[w>>>24&63]|e[w>>>16&63]|g[w>>>8&63]|i[w&63])}o=p,p=q,q=o}p=p>>>1|p<<31,q=q>>>1|q<<31,o=(p>>>1^q)&1431655765,q^=o,p^=o<<1,o=(q>>>8^p)&16711935,p^=o,q^=o<<8,o=(q>>>2^p)&858993459,p^=o,q^=o<<2,o=(p>>>16^q)&65535,q^=o,p^=o<<16,o=(p>>>4^q)&252645135,q^=o,p^=o<<4,k[0]=p,k[1]=q}function m(b){b=b||{};var c=(b.mode||"CBC").toUpperCase(),d="DES-"+c,e;b.decrypt?e=a.cipher.createDecipher(d,b.key):e=a.cipher.createCipher(d,b.key);var f=e.start;return e.start=function(b,c){var d=null;c instanceof a.util.ByteBuffer&&(d=c,c={}),c=c||{},c.output=d,c.iv=b,f.call(e,c)},e}a.des=a.des||{},a.des.startEncrypting=function(a,b,c,d){var e=m({key:a,output:c,decrypt:!1,mode:d||(b===null?"ECB":"CBC")});return e.start(b),e},a.des.createEncryptionCipher=function(a,b){return m({key:a,output:null,decrypt:!1,mode:b})},a.des.startDecrypting=function(a,b,c,d){var e=m({key:a,output:c,decrypt:!0,mode:d||(b===null?"ECB":"CBC")});return e.start(b),e},a.des.createDecryptionCipher=function(a,b){return m({key:a,output:null,decrypt:!0,mode:b})},a.des.Algorithm=function(a,b){var c=this;c.name=a,c.mode=new b({blockSize:8,cipher:{encrypt:function(a,b){return l(c._keys,a,b,!1)},decrypt:function(a,b){return l(c._keys,a,b,!0)}}}),c._init=!1},a.des.Algorithm.prototype.initialize=function(b){if(this._init)return;var c=a.util.createBuffer(b.key);if(this.name.indexOf("3DES")===0&&c.length()!==24)throw new Error("Invalid Triple-DES key size: "+c.length()*8);this._keys=k(c),this._init=!0},b("DES-ECB",a.cipher.modes.ecb),b("DES-CBC",a.cipher.modes.cbc),b("DES-CFB",a.cipher.modes.cfb),b("DES-OFB",a.cipher.modes.ofb),b("DES-CTR",a.cipher.modes.ctr),b("3DES-ECB",a.cipher.modes.ecb),b("3DES-CBC",a.cipher.modes.cbc),b("3DES-CFB",a.cipher.modes.cfb),b("3DES-OFB",a.cipher.modes.ofb),b("3DES-CTR",a.cipher.modes.ctr);var c=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],d=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],e=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],f=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],g=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],h=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],i=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],j=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}var e="des";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/des",["require","module","./cipher","./cipherModes","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.pkcs5=a.pkcs5||{};a.pbkdf2=b.pbkdf2=function(b,c,d,e,f){if(typeof f=="undefined"||f===null)f=a.md.sha1.create();var g=f.digestLength;if(e>4294967295*g)throw new Error("Derived key is too long.");var h=Math.ceil(e/g),i=e-(h-1)*g,j=a.hmac.create();j.start(f,b);var k="",l,m,n;for(var o=1;o<=h;++o){j.start(null,null),j.update(c),j.update(a.util.int32ToBytes(o)),l=n=j.digest().getBytes();for(var p=2;p<=d;++p)j.start(null,null),j.update(n),m=j.digest().getBytes(),l=a.util.xorBytes(l,m,g),n=m;k+=o<h?l:l.substr(0,i)}return k}}var e="pbkdf2";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pbkdf2",["require","module","./hmac","./md","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var c=typeof process!="undefined"&&process.versions&&process.versions.node,d=null;!a.disableNativeCode&&c&&!process.versions["node-webkit"]&&(d=b("crypto"));var e=a.prng=a.prng||{};e.create=function(b){function h(a){if(c.pools[0].messageLength>=32)return j(),a();var b=32-c.pools[0].messageLength<<5;c.seedFile(b,function(b,d){if(b)return a(b);c.collect(d),j(),a()})}function i(){if(c.pools[0].messageLength>=32)return j();var a=32-c.pools[0].messageLength<<5;c.collect(c.seedFileSync(a)),j()}function j(){var a=c.plugin.md.create();a.update(c.pools[0].digest().getBytes()),c.pools[0].start();var b=1;for(var d=1;d<32;++d)b=b===31?2147483648:b<<2,b%c.reseeds===0&&(a.update(c.pools[d].digest().getBytes()),c.pools[d].start());var e=a.digest().getBytes();a.start(),a.update(e);var f=a.digest().getBytes();c.key=c.plugin.formatKey(e),c.seed=c.plugin.formatSeed(f),c.reseeds=c.reseeds===4294967295?0:c.reseeds+1,c.generated=0}function k(b){var c=null;if(typeof window!="undefined"){var d=window.crypto||window.msCrypto;d&&d.getRandomValues&&(c=function(a){return d.getRandomValues(a)})}var e=a.util.createBuffer();if(c)while(e.length()<b){var f=Math.max(1,Math.min(b-e.length(),65536)/4),g=new Uint32Array(Math.floor(f));try{c(g);for(var h=0;h<g.length;++h)e.putInt32(g[h])}catch(i){if(!(typeof QuotaExceededError!="undefined"&&i instanceof QuotaExceededError))throw i}}if(e.length()<b){var j,k,l,m=Math.floor(Math.random()*65536);while(e.length()<b){k=16807*(m&65535),j=16807*(m>>16),k+=(j&32767)<<16,k+=j>>15,k=(k&2147483647)+(k>>31),m=k&4294967295;for(var h=0;h<3;++h)l=m>>>(h<<3),l^=Math.floor(Math.random()*256),e.putByte(String.fromCharCode(l&255))}}return e.getBytes(b)}var c={plugin:b,key:null,seed:null,time:null,reseeds:0,generated:0},e=b.md,f=new Array(32);for(var g=0;g<32;++g)f[g]=e.create();return c.pools=f,c.pool=0,c.generate=function(b,d){function k(l){if(l)return d(l);if(j.length()>=b)return d(null,j.getBytes(b));c.generated>1048575&&(c.key=null);if(c.key===null)return a.util.nextTick(function(){h(k)});var m=e(c.key,c.seed);c.generated+=m.length,j.putBytes(m),c.key=g(e(c.key,f(c.seed))),c.seed=i(e(c.key,c.seed)),a.util.setImmediate(k)}if(!d)return c.generateSync(b);var e=c.plugin.cipher,f=c.plugin.increment,g=c.plugin.formatKey,i=c.plugin.formatSeed,j=a.util.createBuffer();c.key=null,k()},c.generateSync=function(b){var d=c.plugin.cipher,e=c.plugin.increment,f=c.plugin.formatKey,g=c.plugin.formatSeed;c.key=null;var h=a.util.createBuffer();while(h.length()<b){c.generated>1048575&&(c.key=null),c.key===null&&i();var j=d(c.key,c.seed);c.generated+=j.length,h.putBytes(j),c.key=f(d(c.key,e(c.seed))),c.seed=g(d(c.key,c.seed))}return h.getBytes(b)},d?(c.seedFile=function(a,b){d.randomBytes(a,function(a,c){if(a)return b(a);b(null,c.toString())})},c.seedFileSync=function(a){return d.randomBytes(a).toString()}):(c.seedFile=function(a,b){try{b(null,k(a))}catch(c){b(c)}},c.seedFileSync=k),c.collect=function(a){var b=a.length;for(var d=0;d<b;++d)c.pools[c.pool].update(a.substr(d,1)),c.pool=c.pool===31?0:c.pool+1},c.collectInt=function(a,b){var d="";for(var e=0;e<b;e+=8)d+=String.fromCharCode(a>>e&255);c.collect(d)},c.registerWorker=function(a){if(a===self)c.seedFile=function(a,b){function c(a){var d=a.data;d.forge&&d.forge.prng&&(self.removeEventListener("message",c),b(d.forge.prng.err,d.forge.prng.bytes))}self.addEventListener("message",c),self.postMessage({forge:{prng:{needed:a}}})};else{var b=function(b){var d=b.data;d.forge&&d.forge.prng&&c.seedFile(d.forge.prng.needed,function(b,c){a.postMessage({forge:{prng:{err:b,bytes:c}}})})};a.addEventListener("message",b)}},c}}var e="prng";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/prng",["require","module","./md","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){if(a.random&&a.random.getBytes)return;(function(b){function f(){var b=a.prng.create(c);return b.getBytes=function(a,c){return b.generate(a,c)},b.getBytesSync=function(a){return b.generate(a)},b}var c={},d=new Array(4),e=a.util.createBuffer();c.formatKey=function(b){var c=a.util.createBuffer(b);return b=new Array(4),b[0]=c.getInt32(),b[1]=c.getInt32(),b[2]=c.getInt32(),b[3]=c.getInt32(),a.aes._expandKey(b,!1)},c.formatSeed=function(b){var c=a.util.createBuffer(b);return b=new Array(4),b[0]=c.getInt32(),b[1]=c.getInt32(),b[2]=c.getInt32(),b[3]=c.getInt32(),b},c.cipher=function(b,c){return a.aes._updateBlock(b,c,d,!1),e.putInt32(d[0]),e.putInt32(d[1]),e.putInt32(d[2]),e.putInt32(d[3]),e.getBytes()},c.increment=function(a){return++a[3],a},c.md=a.md.sha256;var g=f(),h=typeof process!="undefined"&&process.versions&&process.versions.node,i=null;if(typeof window!="undefined"){var j=window.crypto||window.msCrypto;j&&j.getRandomValues&&(i=function(a){return j.getRandomValues(a)})}if(a.disableNativeCode||!h&&!i){typeof window!="undefined"&&window.document!==undefined,g.collectInt(+(new Date),32);if(typeof navigator!="undefined"){var k="";for(var l in navigator)try{typeof navigator[l]=="string"&&(k+=navigator[l])}catch(m){}g.collect(k),k=null}b&&(b().mousemove(function(a){g.collectInt(a.clientX,16),g.collectInt(a.clientY,16)}),b().keypress(function(a){g.collectInt(a.charCode,8)}))}if(!a.random)a.random=g;else for(var l in g)a.random[l]=g[l];a.random.createInstance=f})(typeof jQuery!="undefined"?jQuery:null)}var e="random";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/random",["require","module","./aes","./md","./prng","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],c=[1,2,3,5],d=function(a,b){return a<<b&65535|(a&65535)>>16-b},e=function(a,b){return(a&65535)>>b|a<<16-b&65535};a.rc2=a.rc2||{},a.rc2.expandKey=function(c,d){typeof c=="string"&&(c=a.util.createBuffer(c)),d=d||128;var e=c,f=c.length(),g=d,h=Math.ceil(g/8),i=255>>(g&7),j;for(j=f;j<128;j++)e.putByte(b[e.at(j-1)+e.at(j-f)&255]);e.setAt(128-h,b[e.at(128-h)&i]);for(j=127-h;j>=0;j--)e.setAt(j,b[e.at(j+1)^e.at(j+h)]);return e};var f=function(b,f,g){var h=!1,i=null,j=null,k=null,l,m,n,o,p=[];b=a.rc2.expandKey(b,f);for(n=0;n<64;n++)p.push(b.getInt16Le());g?(l=function(a){for(n=0;n<4;n++)a[n]+=p[o]+(a[(n+3)%4]&a[(n+2)%4])+(~a[(n+3)%4]&a[(n+1)%4]),a[n]=d(a[n],c[n]),o++},m=function(a){for(n=0;n<4;n++)a[n]+=p[a[(n+3)%4]&63]}):(l=function(a){for(n=3;n>=0;n--)a[n]=e(a[n],c[n]),a[n]-=p[o]+(a[(n+3)%4]&a[(n+2)%4])+(~a[(n+3)%4]&a[(n+1)%4]),o--},m=function(a){for(n=3;n>=0;n--)a[n]-=p[a[(n+3)%4]&63]});var q=function(a){var b=[];for(n=0;n<4;n++){var c=i.getInt16Le();k!==null&&(g?c^=k.getInt16Le():k.putInt16Le(c)),b.push(c&65535)}o=g?0:63;for(var d=0;d<a.length;d++)for(var e=0;e<a[d][0];e++)a[d][1](b);for(n=0;n<4;n++)k!==null&&(g?k.putInt16Le(b[n]):b[n]^=k.getInt16Le()),j.putInt16Le(b[n])},r=null;return r={start:function(b,c){b&&typeof b=="string"&&(b=a.util.createBuffer(b)),h=!1,i=a.util.createBuffer(),j=c||new a.util.createBuffer,k=b,r.output=j},update:function(a){h||i.putBuffer(a);while(i.length()>=8)q([[5,l],[1,m],[6,l],[1,m],[5,l]])},finish:function(a){var b=!0;if(g)if(a)b=a(8,i,!g);else{var c=i.length()===8?8:8-i.length();i.fillWithByte(c,c)}b&&(h=!0,r.update());if(!g){b=i.length()===0;if(b)if(a)b=a(8,j,!g);else{var d=j.length(),e=j.at(d-1);e>d?b=!1:j.truncate(e)}}return b}},r};a.rc2.startEncrypting=function(b,c,d){var e=a.rc2.createEncryptionCipher(b,128);return e.start(c,d),e},a.rc2.createEncryptionCipher=function(a,b){return f(a,b,!0)},a.rc2.startDecrypting=function(b,c,d){var e=a.rc2.createDecryptionCipher(b,128);return e.start(c,d),e},a.rc2.createDecryptionCipher=function(a,b){return f(a,b,!1)}}var e="rc2";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/rc2",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function e(a,b,c){this.data=[],a!=null&&("number"==typeof a?this.fromNumber(a,b,c):b==null&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function f(){return new e(null)}function g(a,b,c,d,e,f){while(--f>=0){var g=b*this.data[a++]+c.data[d]+e;e=Math.floor(g/67108864),c.data[d++]=g&67108863}return e}function h(a,b,c,d,e,f){var g=b&32767,h=b>>15;while(--f>=0){var i=this.data[a]&32767,j=this.data[a++]>>15,k=h*i+j*g;i=g*i+((k&32767)<<15)+c.data[d]+(e&1073741823),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c.data[d++]=i&1073741823}return e}function i(a,b,c,d,e,f){var g=b&16383,h=b>>14;while(--f>=0){var i=this.data[a]&16383,j=this.data[a++]>>14,k=h*i+j*g;i=g*i+((k&16383)<<14)+c.data[d]+e,e=(i>>28)+(k>>14)+h*j,c.data[d++]=i&268435455}return e}function o(a){return k.charAt(a)}function p(a,b){var c=l[a.charCodeAt(b)];return c==null?-1:c}function q(a){for(var b=this.t-1;b>=0;--b)a.data[b]=this.data[b];a.t=this.t,a.s=this.s}function r(a){this.t=1,this.s=a<0?-1:0,a>0?this.data[0]=a:a<-1?this.data[0]=a+this.DV:this.t=0}function s(a){var b=f();return b.fromInt(a),b}function t(a,b){var c;if(b==16)c=4;else if(b==8)c=3;else if(b==256)c=8;else if(b==2)c=1;else if(b==32)c=5;else if(b==4)c=2;else{this.fromRadix(a,b);return}this.t=0,this.s=0;var d=a.length,f=!1,g=0;while(--d>=0){var h=c==8?a[d]&255:p(a,d);if(h<0){a.charAt(d)=="-"&&(f=!0);continue}f=!1,g==0?this.data[this.t++]=h:g+c>this.DB?(this.data[this.t-1]|=(h&(1<<this.DB-g)-1)<<g,this.data[this.t++]=h>>this.DB-g):this.data[this.t-1]|=h<<g,g+=c,g>=this.DB&&(g-=this.DB)}c==8&&(a[0]&128)!=0&&(this.s=-1,g>0&&(this.data[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),f&&e.ZERO.subTo(this,this)}function u(){var a=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==a)--this.t}function v(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(a==16)b=4;else if(a==8)b=3;else if(a==2)b=1;else if(a==32)b=5;else if(a==4)b=2;else return this.toRadix(a);var c=(1<<b)-1,d,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0){h<this.DB&&(d=this.data[g]>>h)>0&&(e=!0,f=o(d));while(g>=0)h<b?(d=(this.data[g]&(1<<h)-1)<<b-h,d|=this.data[--g]>>(h+=this.DB-b)):(d=this.data[g]>>(h-=b)&c,h<=0&&(h+=this.DB,--g)),d>0&&(e=!0),e&&(f+=o(d))}return e?f:"0"}function w(){var a=f();return e.ZERO.subTo(this,a),a}function x(){return this.s<0?this.negate():this}function y(a){var b=this.s-a.s;if(b!=0)return b;var c=this.t;b=c-a.t;if(b!=0)return this.s<0?-b:b;while(--c>=0)if((b=this.data[c]-a.data[c])!=0)return b;return 0}function z(a){var b=1,c;return(c=a>>>16)!=0&&(a=c,b+=16),(c=a>>8)!=0&&(a=c,b+=8),(c=a>>4)!=0&&(a=c,b+=4),(c=a>>2)!=0&&(a=c,b+=2),(c=a>>1)!=0&&(a=c,b+=1),b}function A(){return this.t<=0?0:this.DB*(this.t-1)+z(this.data[this.t-1]^this.s&this.DM)}function B(a,b){var c;for(c=this.t-1;c>=0;--c)b.data[c+a]=this.data[c];for(c=a-1;c>=0;--c)b.data[c]=0;b.t=this.t+a,b.s=this.s}function C(a,b){for(var c=a;c<this.t;++c)b.data[c-a]=this.data[c];b.t=Math.max(this.t-a,0),b.s=this.s}function D(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,f=Math.floor(a/this.DB),g=this.s<<c&this.DM,h;for(h=this.t-1;h>=0;--h)b.data[h+f+1]=this.data[h]>>d|g,g=(this.data[h]&e)<<c;for(h=f-1;h>=0;--h)b.data[h]=0;b.data[f]=g,b.t=this.t+f+1,b.s=this.s,b.clamp()}function E(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t){b.t=0;return}var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b.data[0]=this.data[c]>>d;for(var g=c+1;g<this.t;++g)b.data[g-c-1]|=(this.data[g]&f)<<e,b.data[g-c]=this.data[g]>>d;d>0&&(b.data[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function F(a,b){var c=0,d=0,e=Math.min(a.t,this.t);while(c<e)d+=this.data[c]-a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){d-=a.s;while(c<this.t)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{d+=this.s;while(c<a.t)d-=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0,d<-1?b.data[c++]=this.DV+d:d>0&&(b.data[c++]=d),b.t=c,b.clamp()}function G(a,b){var c=this.abs(),d=a.abs(),f=c.t;b.t=f+d.t;while(--f>=0)b.data[f]=0;for(f=0;f<d.t;++f)b.data[f+c.t]=c.am(0,d.data[f],b,f,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&e.ZERO.subTo(b,b)}function H(a){var b=this.abs(),c=a.t=2*b.t;while(--c>=0)a.data[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b.data[c],a,2*c,0,1);(a.data[c+b.t]+=b.am(c+1,2*b.data[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a.data[c+b.t]-=b.DV,a.data[c+b.t+1]=1)}a.t>0&&(a.data[a.t-1]+=b.am(c,b.data[c],a,2*c,0,1)),a.s=0,a.clamp()}function I(a,b,c){var d=a.abs();if(d.t<=0)return;var g=this.abs();if(g.t<d.t){b!=null&&b.fromInt(0),c!=null&&this.copyTo(c);return}c==null&&(c=f());var h=f(),i=this.s,j=a.s,k=this.DB-z(d.data[d.t-1]);k>0?(d.lShiftTo(k,h),g.lShiftTo(k,c)):(d.copyTo(h),g.copyTo(c));var l=h.t,m=h.data[l-1];if(m==0)return;var n=m*(1<<this.F1)+(l>1?h.data[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,r=c.t,s=r-l,t=b==null?f():b;h.dlShiftTo(s,t),c.compareTo(t)>=0&&(c.data[c.t++]=1,c.subTo(t,c)),e.ONE.dlShiftTo(l,t),t.subTo(h,h);while(h.t<l)h.data[h.t++]=0;while(--s>=0){var u=c.data[--r]==m?this.DM:Math.floor(c.data[r]*o+(c.data[r-1]+q)*p);if((c.data[r]+=h.am(0,u,c,s,0,l))<u){h.dlShiftTo(s,t),c.subTo(t,c);while(c.data[r]<--u)c.subTo(t,c)}}b!=null&&(c.drShiftTo(l,b),i!=j&&e.ZERO.subTo(b,b)),c.t=l,c.clamp(),k>0&&c.rShiftTo(k,c),i<0&&e.ZERO.subTo(c,c)}function J(a){var b=f();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(e.ZERO)>0&&a.subTo(b,b),b}function K(a){this.m=a}function L(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function M(a){return a}function N(a){a.divRemTo(this.m,null,a)}function O(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function P(a,b){a.squareTo(b),this.reduce(b)}function Q(){if(this.t<1)return 0;var a=this.data[0];if((a&1)==0)return 0;var b=a&3;return b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function R(a){this.m=a,this.mp=a.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function S(a){var b=f();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(e.ZERO)>0&&this.m.subTo(b,b),b}function T(a){var b=f();return a.copyTo(b),this.reduce(b),b}function U(a){while(a.t<=this.mt2)a.data[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a.data[b]&32767,d=c*this.mpl+((c*this.mph+(a.data[b]>>15)*this.mpl&this.um)<<15)&a.DM;c=b+this.m.t,a.data[c]+=this.m.am(0,d,a,b,0,this.m.t);while(a.data[c]>=a.DV)a.data[c]-=a.DV,a.data[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function V(a,b){a.squareTo(b),this.reduce(b)}function W(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function X(){return(this.t>0?this.data[0]&1:this.s)==0}function Y(a,b){if(a>4294967295||a<1)return e.ONE;var c=f(),d=f(),g=b.convert(this),h=z(a)-1;g.copyTo(c);while(--h>=0){b.sqrTo(c,d);if((a&1<<h)>0)b.mulTo(d,g,c);else{var i=c;c=d,d=i}}return b.revert(c)}function Z(a,b){var c;return a<256||b.isEven()?c=new K(b):c=new R(b),this.exp(a,c)}function $(){var a=f();return this.copyTo(a),a}function _(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function ba(){return this.t==0?this.s:this.data[0]<<24>>24}function bb(){return this.t==0?this.s:this.data[0]<<16>>16}function bc(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function bd(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function be(a){a==null&&(a=10);if(this.signum()==0||a<2||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=s(c),e=f(),g=f(),h="";this.divRemTo(d,e,g);while(e.signum()>0)h=(c+g.intValue()).toString(a).substr(1)+h,e.divRemTo(d,e,g);return g.intValue().toString(a)+h}function bf(a,b){this.fromInt(0),b==null&&(b=10);var c=this.chunkSize(b),d=Math.pow(b,c),f=!1,g=0,h=0;for(var i=0;i<a.length;++i){var j=p(a,i);if(j<0){a.charAt(i)=="-"&&this.signum()==0&&(f=!0);continue}h=b*h+j,++g>=c&&(this.dMultiply(d),this.dAddOffset(h,0),g=0,h=0)}g>0&&(this.dMultiply(Math.pow(b,g)),this.dAddOffset(h,0)),f&&e.ZERO.subTo(this,this)}function bg(a,b,c){if("number"==typeof b)if(a<2)this.fromInt(1);else{this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(e.ONE.shiftLeft(a-1),bo,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(b))this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(e.ONE.shiftLeft(a-1),this)}else{var d=new Array,f=a&7;d.length=(a>>3)+1,b.nextBytes(d),f>0?d[0]&=(1<<f)-1:d[0]=0,this.fromString(d,256)}}function bh(){var a=this.t,b=new Array;b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(a-->0){c<this.DB&&(d=this.data[a]>>c)!=(this.s&this.DM)>>c&&(b[e++]=d|this.s<<this.DB-c);while(a>=0){c<8?(d=(this.data[a]&(1<<c)-1)<<8-c,d|=this.data[--a]>>(c+=this.DB-8)):(d=this.data[a]>>(c-=8)&255,c<=0&&(c+=this.DB,--a)),(d&128)!=0&&(d|=-256),e==0&&(this.s&128)!=(d&128)&&++e;if(e>0||d!=this.s)b[e++]=d}}return b}function bi(a){return this.compareTo(a)==0}function bj(a){return this.compareTo(a)<0?this:a}function bk(a){return this.compareTo(a)>0?this:a}function bl(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c.data[d]=b(this.data[d],a.data[d]);if(a.t<this.t){e=a.s&this.DM;for(d=f;d<this.t;++d)c.data[d]=b(this.data[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=f;d<a.t;++d)c.data[d]=b(e,a.data[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function bm(a,b){return a&b}function bn(a){var b=f();return this.bitwiseTo(a,bm,b),b}function bo(a,b){return a|b}function bp(a){var b=f();return this.bitwiseTo(a,bo,b),b}function bq(a,b){return a^b}function br(a){var b=f();return this.bitwiseTo(a,bq,b),b}function bs(a,b){return a&~b}function bt(a){var b=f();return this.bitwiseTo(a,bs,b),b}function bu(){var a=f();for(var b=0;b<this.t;++b)a.data[b]=this.DM&~this.data[b];return a.t=this.t,a.s=~this.s,a}function bv(a){var b=f();return a<0?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function bw(a){var b=f();return a<0?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function bx(a){if(a==0)return-1;var b=0;return(a&65535)==0&&(a>>=16,b+=16),(a&255)==0&&(a>>=8,b+=8),(a&15)==0&&(a>>=4,b+=4),(a&3)==0&&(a>>=2,b+=2),(a&1)==0&&++b,b}function by(){for(var a=0;a<this.t;++a)if(this.data[a]!=0)return a*this.DB+bx(this.data[a]);return this.s<0?this.t*this.DB:-1}function bz(a){var b=0;while(a!=0)a&=a-1,++b;return b}function bA(){var a=0,b=this.s&this.DM;for(var c=0;c<this.t;++c)a+=bz(this.data[c]^b);return a}function bB(a){var b=Math.floor(a/this.DB);return b>=this.t?this.s!=0:(this.data[b]&1<<a%this.DB)!=0}function bC(a,b){var c=e.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c}function bD(a){return this.changeBit(a,bo)}function bE(a){return this.changeBit(a,bs)}function bF(a){return this.changeBit(a,bq)}function bG(a,b){var c=0,d=0,e=Math.min(a.t,this.t);while(c<e)d+=this.data[c]+a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){d+=a.s;while(c<this.t)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{d+=this.s;while(c<a.t)d+=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0,d>0?b.data[c++]=d:d<-1&&(b.data[c++]=this.DV+d),b.t=c,b.clamp()}function bH(a){var b=f();return this.addTo(a,b),b}function bI(a){var b=f();return this.subTo(a,b),b}function bJ(a){var b=f();return this.multiplyTo(a,b),b}function bK(a){var b=f();return this.divRemTo(a,b,null),b}function bL(a){var b=f();return this.divRemTo(a,null,b),b}function bM(a){var b=f(),c=f();return this.divRemTo(a,b,c),new Array(b,c)}function bN(a){this.data[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function bO(a,b){if(a==0)return;while(this.t<=b)this.data[this.t++]=0;this.data[b]+=a;while(this.data[b]>=this.DV)this.data[b]-=this.DV,++b>=this.t&&(this.data[this.t++]=0),++this.data[b]}function bP(){}function bQ(a){return a}function bR(a,b,c){a.multiplyTo(b,c)}function bS(a,b){a.squareTo(b)}function bT(a){return this.exp(a,new bP)}function bU(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0,c.t=d;while(d>0)c.data[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c.data[d+this.t]=this.am(0,a.data[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a.data[d],c,d,0,b-d);c.clamp()}function bV(a,b,c){--b;var d=c.t=this.t+a.t-b;c.s=0;while(--d>=0)c.data[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c.data[this.t+d-b]=this.am(b-d,a.data[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function bW(a){this.r2=f(),this.q3=f(),e.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function bX(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=f();return a.copyTo(b),this.reduce(b),b}function bY(a){return a}function bZ(a){a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(a.compareTo(this.r2)<0)a.dAddOffset(1,this.m.t+1);a.subTo(this.r2,a);while(a.compareTo(this.m)>=0)a.subTo(this.m,a)}function b$(a,b){a.squareTo(b),this.reduce(b)}function b_(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function ca(a,b){var c=a.bitLength(),d,e=s(1),g;if(c<=0)return e;c<18?d=1:c<48?d=3:c<144?d=4:c<768?d=5:d=6,c<8?g=new K(b):b.isEven()?g=new bW(b):g=new R(b);var h=new Array,i=3,j=d-1,k=(1<<d)-1;h[1]=g.convert(this);if(d>1){var l=f();g.sqrTo(h[1],l);while(i<=k)h[i]=f(),g.mulTo(l,h[i-2],h[i]),i+=2}var m=a.t-1,n,o=!0,p=f(),q;c=z(a.data[m])-1;while(m>=0){c>=j?n=a.data[m]>>c-j&k:(n=(a.data[m]&(1<<c+1)-1)<<j-c,m>0&&(n|=a.data[m-1]>>this.DB+c-j)),i=d;while((n&1)==0)n>>=1,--i;(c-=i)<0&&(c+=this.DB,--m);if(o)h[n].copyTo(e),o=!1;else{while(i>1)g.sqrTo(e,p),g.sqrTo(p,e),i-=2;i>0?g.sqrTo(e,p):(q=e,e=p,p=q),g.mulTo(p,h[n],e)}while(m>=0&&(a.data[m]&1<<c)==0)g.sqrTo(e,p),q=e,e=p,p=q,--c<0&&(c=this.DB-1,--m)}return g.revert(e)}function cb(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(f<0)return b;e<f&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));while(b.signum()>0)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function cc(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(b==0)c=this.data[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this.data[d])%a;return c}function cd(a){var b=a.isEven();if(this.isEven()&&b||a.signum()==0)return e.ZERO;var c=a.clone(),d=this.clone(),f=s(1),g=s(0),h=s(0),i=s(1);while(c.signum()!=0){while(c.isEven()){c.rShiftTo(1,c);if(b){if(!f.isEven()||!g.isEven())f.addTo(this,f),g.subTo(a,g);f.rShiftTo(1,f)}else g.isEven()||g.subTo(a,g);g.rShiftTo(1,g)}while(d.isEven()){d.rShiftTo(1,d);if(b){if(!h.isEven()||!i.isEven())h.addTo(this,h),i.subTo(a,i);h.rShiftTo(1,h)}else i.isEven()||i.subTo(a,i);i.rShiftTo(1,i)}c.compareTo(d)>=0?(c.subTo(d,c),b&&f.subTo(h,f),g.subTo(i,g)):(d.subTo(c,d),b&&h.subTo(f,h),i.subTo(g,i))}if(d.compareTo(e.ONE)!=0)return e.ZERO;if(i.compareTo(a)>=0)return i.subtract(a);if(i.signum()<0)i.addTo(a,i);else return i;return i.signum()<0?i.add(a):i}function cg(a){var b,c=this.abs();if(c.t==1&&c.data[0]<=ce[ce.length-1]){for(b=0;b<ce.length;++b)if(c.data[0]==ce[b])return!0;return!1}if(c.isEven())return!1;b=1;while(b<ce.length){var d=ce[b],e=b+1;while(e<ce.length&&d<cf)d*=ce[e++];d=c.modInt(d);while(b<e)if(d%ce[b++]==0)return!1}return c.millerRabin(a)}function ch(a){var b=this.subtract(e.ONE),c=b.getLowestSetBit();if(c<=0)return!1;var d=b.shiftRight(c),f=ci(),g;for(var h=0;h<a;++h){do g=new e(this.bitLength(),f);while(g.compareTo(e.ONE)<=0||g.compareTo(b)>=0);var i=g.modPow(d,this);if(i.compareTo(e.ONE)!=0&&i.compareTo(b)!=0){var j=1;while(j++<c&&i.compareTo(b)!=0){i=i.modPowInt(2,this);if(i.compareTo(e.ONE)==0)return!1}if(i.compareTo(b)!=0)return!1}}return!0}function ci(){return{nextBytes:function(a){for(var b=0;b<a.length;++b)a[b]=Math.floor(Math.random()*255)}}}var b,c=0xdeadbeefcafe,d=(c&16777215)==15715070;typeof navigator=="undefined"?(e.prototype.am=i,b=28):d&&navigator.appName=="Microsoft Internet Explorer"?(e.prototype.am=h,b=30):d&&navigator.appName!="Netscape"?(e.prototype.am=g,b=26):(e.prototype.am=i,b=28),e.prototype.DB=b,e.prototype.DM=(1<<b)-1,e.prototype.DV=1<<b;var j=52;e.prototype.FV=Math.pow(2,j),e.prototype.F1=j-b,e.prototype.F2=2*b-j;var k="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array,m,n;m="0".charCodeAt(0);for(n=0;n<=9;++n)l[m++]=n;m="a".charCodeAt(0);for(n=10;n<36;++n)l[m++]=n;m="A".charCodeAt(0);for(n=10;n<36;++n)l[m++]=n;K.prototype.convert=L,K.prototype.revert=M,K.prototype.reduce=N,K.prototype.mulTo=O,K.prototype.sqrTo=P,R.prototype.convert=S,R.prototype.revert=T,R.prototype.reduce=U,R.prototype.mulTo=W,R.prototype.sqrTo=V,e.prototype.copyTo=q,e.prototype.fromInt=r,e.prototype.fromString=t,e.prototype.clamp=u,e.prototype.dlShiftTo=B,e.prototype.drShiftTo=C,e.prototype.lShiftTo=D,e.prototype.rShiftTo=E,e.prototype.subTo=F,e.prototype.multiplyTo=G,e.prototype.squareTo=H,e.prototype.divRemTo=I,e.prototype.invDigit=Q,e.prototype.isEven=X,e.prototype.exp=Y,e.prototype.toString=v,e.prototype.negate=w,e.prototype.abs=x,e.prototype.compareTo=y,e.prototype.bitLength=A,e.prototype.mod=J,e.prototype.modPowInt=Z,e.ZERO=s(0),e.ONE=s(1),bP.prototype.convert=bQ,bP.prototype.revert=bQ,bP.prototype.mulTo=bR,bP.prototype.sqrTo=bS,bW.prototype.convert=bX,bW.prototype.revert=bY,bW.prototype.reduce=bZ,bW.prototype.mulTo=b_,bW.prototype.sqrTo=b$;var ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],cf=(1<<26)/ce[ce.length-1];e.prototype.chunkSize=bc,e.prototype.toRadix=be,e.prototype.fromRadix=bf,e.prototype.fromNumber=bg,e.prototype.bitwiseTo=bl,e.prototype.changeBit=bC,e.prototype.addTo=bG,e.prototype.dMultiply=bN,e.prototype.dAddOffset=bO,e.prototype.multiplyLowerTo=bU,e.prototype.multiplyUpperTo=bV,e.prototype.modInt=cc,e.prototype.millerRabin=ch,e.prototype.clone=$,e.prototype.intValue=_,e.prototype.byteValue=ba,e.prototype.shortValue=bb,e.prototype.signum=bd,e.prototype.toByteArray=bh,e.prototype.equals=bi,e.prototype.min=bj,e.prototype.max=bk,e.prototype.and=bn,e.prototype.or=bp,e.prototype.xor=br,e.prototype.andNot=bt,e.prototype.not=bu,e.prototype.shiftLeft=bv,e.prototype.shiftRight=bw,e.prototype.getLowestSetBit=by,e.prototype.bitCount=bA,e.prototype.testBit=bB,e.prototype.setBit=bD,e.prototype.clearBit=bE,e.prototype.flipBit=bF,e.prototype.add=bH,e.prototype.subtract=bI,e.prototype.multiply=bJ,e.prototype.divide=bK,e.prototype.remainder=bL,e.prototype.divideAndRemainder=bM,e.prototype.modPow=ca,e.prototype.modInverse=cd,e.prototype.pow=bT,e.prototype.gcd=cb,e.prototype.isProbablePrime=cg,a.jsbn=a.jsbn||{},a.jsbn.BigInteger=e}var e="jsbn";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/jsbn",["require","module"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function c(b,c,d){d||(d=a.md.sha1.create());var e="",f=Math.ceil(c/d.digestLength);for(var g=0;g<f;++g){var h=String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255);d.start(),d.update(b+h),e+=d.digest().getBytes()}return e.substring(0,c)}var b=a.pkcs1=a.pkcs1||{};b.encode_rsa_oaep=function(b,d,e){var f,g,h,i;typeof e=="string"?(f=e,g=arguments[3]||undefined,h=arguments[4]||undefined):e&&(f=e.label||undefined,g=e.seed||undefined,h=e.md||undefined,e.mgf1&&e.mgf1.md&&(i=e.mgf1.md)),h?h.start():h=a.md.sha1.create(),i||(i=h);var j=Math.ceil(b.n.bitLength()/8),k=j-2*h.digestLength-2;if(d.length>k){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=d.length,l.maxLength=k,l}f||(f=""),h.update(f,"raw");var m=h.digest(),n="",o=k-d.length;for(var p=0;p<o;p++)n+="\0";var q=m.getBytes()+n+""+d;if(!g)g=a.random.getBytes(h.digestLength);else if(g.length!==h.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=g.length,l.digestLength=h.digestLength,l}var r=c(g,j-h.digestLength-1,i),s=a.util.xorBytes(q,r,q.length),t=c(s,h.digestLength,i),u=a.util.xorBytes(g,t,g.length);return"\0"+u+s},b.decode_rsa_oaep=function(b,d,e){var f,g,h;typeof e=="string"?(f=e,g=arguments[3]||undefined):e&&(f=e.label||undefined,g=e.md||undefined,e.mgf1&&e.mgf1.md&&(h=e.mgf1.md));var i=Math.ceil(b.n.bitLength()/8);if(d.length!==i){var j=new Error("RSAES-OAEP encoded message length is invalid.");throw j.length=d.length,j.expectedLength=i,j}g===undefined?g=a.md.sha1.create():g.start(),h||(h=g);if(i<2*g.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");f||(f=""),g.update(f,"raw");var k=g.digest().getBytes(),l=d.charAt(0),m=d.substring(1,g.digestLength+1),n=d.substring(1+g.digestLength),o=c(n,g.digestLength,h),p=a.util.xorBytes(m,o,m.length),q=c(p,i-g.digestLength-1,h),r=a.util.xorBytes(n,q,n.length),s=r.substring(0,g.digestLength),j=l!=="\0";for(var t=0;t<g.digestLength;++t)j|=k.charAt(t)!==s.charAt(t);var u=1,v=g.digestLength;for(var w=g.digestLength;w<r.length;w++){var x=r.charCodeAt(w),y=x&1^1,z=u?65534:0;j|=x&z,u&=y,v+=u}if(j||r.charCodeAt(v)!==1)throw new Error("Invalid RSAES-OAEP padding.");return r.substring(v+1)}}var e="pkcs1";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pkcs1",["require","module","./util","./random","./sha1"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function g(a,b,c,d){return"workers"in c?i(a,b,c,d):h(a,b,c,d)}function h(b,c,e,f){var g=j(b,c),i=0,l=k(g.bitLength());"millerRabinTests"in e&&(l=e.millerRabinTests);var m=10;"maxBlockTime"in e&&(m=e.maxBlockTime);var n=+(new Date);do{g.bitLength()>b&&(g=j(b,c));if(g.isProbablePrime(l))return f(null,g);g.dAddOffset(d[i++%8],0)}while(m<0||+(new Date)-n<m);a.util.setImmediate(function(){h(b,c,e,f)})}function i(b,d,e,f){function n(){function o(e){if(n)return;--h;var i=e.data;if(i.found){for(var m=0;m<a.length;++m)a[m].terminate();return n=!0,f(null,new c(i.prime,16))}g.bitLength()>b&&(g=j(b,d));var o=g.toString(16);e.target.postMessage({hex:o,workLoad:k}),g.dAddOffset(l,0)}i=Math.max(1,i);var a=[];for(var e=0;e<i;++e)a[e]=new Worker(m);var h=i;for(var e=0;e<i;++e)a[e].addEventListener("message",o);var n=!1}if(typeof Worker=="undefined")return h(b,d,e,f);var g=j(b,d),i=e.workers,k=e.workLoad||100,l=k*30/8,m=e.workerScript||"forge/prime.worker.js";if(i===-1)return a.util.estimateCores(function(a,b){a&&(b=2),i=b-1,n()});n()}function j(a,b){var d=new c(a,b),g=a-1;return d.testBit(g)||d.bitwiseTo(c.ONE.shiftLeft(g),f,d),d.dAddOffset(31-d.mod(e).byteValue(),0),d}function k(a){return a<=100?27:a<=150?18:a<=200?15:a<=250?12:a<=300?9:a<=350?8:a<=400?7:a<=500?6:a<=600?5:a<=800?4:a<=1250?3:2}if(a.prime)return;var b=a.prime=a.prime||{},c=a.jsbn.BigInteger,d=[6,4,2,4,2,4,6,2],e=new c(null);e.fromInt(30);var f=function(a,b){return a|b};b.generateProbablePrime=function(b,c,d){typeof c=="function"&&(d=c,c={}),c=c||{};var e=c.algorithm||"PRIMEINC";typeof e=="string"&&(e={name:e}),e.options=e.options||{};var f=c.prng||a.random,h={nextBytes:function(a){var b=f.getBytesSync(a.length);for(var c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}};if(e.name==="PRIMEINC")return g(b,h,e.options,d);throw new Error("Invalid prime generation algorithm: "+e.name)}}var e="prime";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/prime",["require","module","./util","./jsbn","./random"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function l(b,c,d){var e=a.util.createBuffer(),f=Math.ceil(c.n.bitLength()/8);if(b.length>f-11){var g=new Error("Message is too long for PKCS#1 v1.5 padding.");throw g.length=b.length,g.max=f-11,g}e.putByte(0),e.putByte(d);var h=f-3-b.length,i;if(d===0||d===1){i=d===0?0:255;for(var j=0;j<h;++j)e.putByte(i)}else while(h>0){var k=0,l=a.random.getBytes(h);for(var j=0;j<h;++j)i=l.charCodeAt(j),i===0?++k:e.putByte(i);h=k}return e.putByte(0),e.putBytes(b),e}function m(b,c,d,e){var f=Math.ceil(c.n.bitLength()/8),g=a.util.createBuffer(b),h=g.getByte(),i=g.getByte();if(h!==0||d&&i!==0&&i!==1||!d&&i!=2||d&&i===0&&typeof e=="undefined")throw new Error("Encryption block is invalid.");var j=0;if(i===0){j=f-3-e;for(var k=0;k<j;++k)if(g.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(i===1){j=0;while(g.length()>1){if(g.getByte()!==255){--g.read;break}++j}}else if(i===2){j=0;while(g.length()>1){if(g.getByte()===0){--g.read;break}++j}}var l=g.getByte();if(l!==0||j!==f-3-g.length())throw new Error("Encryption block is invalid.");return g.getBytes()}function n(c,e,f){function h(){i(c.pBits,function(a,b){if(a)return f(a);c.p=b;if(c.q!==null)return j(a,c.q);i(c.qBits,j)})}function i(b,c){a.prime.generateProbablePrime(b,g,c)}function j(a,e){if(a)return f(a);c.q=e;if(c.p.compareTo(c.q)<0){var g=c.p;c.p=c.q,c.q=g}if(c.p.subtract(b.ONE).gcd(c.e).compareTo(b.ONE)!==0){c.p=null,h();return}if(c.q.subtract(b.ONE).gcd(c.e).compareTo(b.ONE)!==0){c.q=null,i(c.qBits,j);return}c.p1=c.p.subtract(b.ONE),c.q1=c.q.subtract(b.ONE),c.phi=c.p1.multiply(c.q1);if(c.phi.gcd(c.e).compareTo(b.ONE)!==0){c.p=c.q=null,h();return}c.n=c.p.multiply(c.q);if(c.n.bitLength()!==c.bits){c.q=null,i(c.qBits,j);return}var k=c.e.modInverse(c.phi);c.keys={privateKey:d.rsa.setPrivateKey(c.n,c.e,k,c.p,c.q,k.mod(c.p1),k.mod(c.q1),c.q.modInverse(c.p)),publicKey:d.rsa.setPublicKey(c.n,c.e)},f(null,c.keys)}typeof e=="function"&&(f=e,e={}),e=e||{};var g={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(g.prng=e.prng),h()}function o(b){var c=b.toString(16);return c[0]>="8"&&(c="00"+c),a.util.hexToBytes(c)}function p(a){return a<=100?27:a<=150?18:a<=200?15:a<=250?12:a<=300?9:a<=350?8:a<=400?7:a<=500?6:a<=600?5:a<=800?4:a<=1250?3:2}if(typeof b=="undefined")var b=a.jsbn.BigInteger;var c=a.asn1;a.pki=a.pki||{},a.pki.rsa=a.rsa=a.rsa||{};var d=a.pki,e=[6,4,2,4,2,4,6,2],f={name:"PrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},g={name:"RSAPrivateKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},i=a.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},j=function(a){var b;if(a.algorithm in d.oids)b=d.oids[a.algorithm];else{var e=new Error("Unknown message digest algorithm.");throw e.algorithm=a.algorithm,e}var f=c.oidToDer(b).getBytes(),g=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]),h=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]);h.value.push(c.create(c.Class.UNIVERSAL,c.Type.OID,!1,f)),h.value.push(c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,""));var i=c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,a.digest().getBytes());return g.value.push(h),g.value.push(i),c.toDer(g).getBytes()},k=function(c,d,e){if(e)return c.modPow(d.e,d.n);if(!d.p||!d.q)return c.modPow(d.d,d.n);d.dP||(d.dP=d.d.mod(d.p.subtract(b.ONE))),d.dQ||(d.dQ=d.d.mod(d.q.subtract(b.ONE))),d.qInv||(d.qInv=d.q.modInverse(d.p));var f;do f=(new b(a.util.bytesToHex(a.random.getBytes(d.n.bitLength()/8)),16)).mod(d.n);while(f.equals(b.ZERO));c=c.multiply(f.modPow(d.e,d.n)).mod(d.n);var g=c.mod(d.p).modPow(d.dP,d.p),h=c.mod(d.q).modPow(d.dQ,d.q);while(g.compareTo(h)<0)g=g.add(d.p);var i=g.subtract(h).multiply(d.qInv).mod(d.p).multiply(d.q).add(h);return i=i.multiply(f.modInverse(d.n)).mod(d.n),i};d.rsa.encrypt=function(c,d,e){var f=e,g,h=Math.ceil(d.n.bitLength()/8);e!==!1&&e!==!0?(f=e===2,g=l(c,d,e)):(g=a.util.createBuffer(),g.putBytes(c));var i=new b(g.toHex(),16),j=k(i,d,f),m=j.toString(16),n=a.util.createBuffer(),o=h-Math.ceil(m.length/2);while(o>0)n.putByte(0),--o;return n.putBytes(a.util.hexToBytes(m)),n.getBytes()},d.rsa.decrypt=function(c,d,e,f){var g=Math.ceil(d.n.bitLength()/8);if(c.length!==g){var h=new Error("Encrypted message length is invalid.");throw h.length=c.length,h.expected=g,h}var i=new b(a.util.createBuffer(c).toHex(),16);if(i.compareTo(d.n)>=0)throw new Error("Encrypted message is invalid.");var j=k(i,d,e),l=j.toString(16),n=a.util.createBuffer(),o=g-Math.ceil(l.length/2);while(o>0)n.putByte(0),--o;return n.putBytes(a.util.hexToBytes(l)),f!==!1?m(n.getBytes(),d,e):n.getBytes()},d.rsa.createKeyPairGenerationState=function(c,d,e){typeof c=="string"&&(c=parseInt(c,10)),c=c||2048,e=e||{};var f=e.prng||a.random,g={nextBytes:function(a){var b=f.getBytesSync(a.length);for(var c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}},h=e.algorithm||"PRIMEINC",i;if(h==="PRIMEINC")i={algorithm:h,state:0,bits:c,rng:g,eInt:d||65537,e:new b(null),p:null,q:null,qBits:c>>1,pBits:c-(c>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt);else throw new Error("Invalid key generation algorithm: "+h);return i},d.rsa.stepKeyPairGenerationState=function(a,c){"algorithm"in a||(a.algorithm="PRIMEINC");var f=new b(null);f.fromInt(30);var g=0,h=function(a,b){return a|b},i=+(new Date),j,k=0;while(a.keys===null&&(c<=0||k<c)){if(a.state===0){var l=a.p===null?a.pBits:a.qBits,m=l-1;a.pqState===0?(a.num=new b(l,a.rng),a.num.testBit(m)||a.num.bitwiseTo(b.ONE.shiftLeft(m),h,a.num),a.num.dAddOffset(31-a.num.mod(f).byteValue(),0),g=0,++a.pqState):a.pqState===1?a.num.bitLength()>l?a.pqState=0:a.num.isProbablePrime(p(a.num.bitLength()))?++a.pqState:a.num.dAddOffset(e[g++%8],0):a.pqState===2?a.pqState=a.num.subtract(b.ONE).gcd(a.e).compareTo(b.ONE)===0?3:0:a.pqState===3&&(a.pqState=0,a.p===null?a.p=a.num:a.q=a.num,a.p!==null&&a.q!==null&&++a.state,a.num=null)}else if(a.state===1)a.p.compareTo(a.q)<0&&(a.num=a.p,a.p=a.q,a.q=a.num),++a.state;else if(a.state===2)a.p1=a.p.subtract(b.ONE),a.q1=a.q.subtract(b.ONE),a.phi=a.p1.multiply(a.q1),++a.state;else if(a.state===3)a.phi.gcd(a.e).compareTo(b.ONE)===0?++a.state:(a.p=null,a.q=null,a.state=0);else if(a.state===4)a.n=a.p.multiply(a.q),a.n.bitLength()===a.bits?++a.state:(a.q=null,a.state=0);else if(a.state===5){var n=a.e.modInverse(a.phi);a.keys={privateKey:d.rsa.setPrivateKey(a.n,a.e,n,a.p,a.q,n.mod(a.p1),n.mod(a.q1),a.q.modInverse(a.p)),publicKey:d.rsa.setPublicKey(a.n,a.e)}}j=+(new Date),k+=j-i,i=j}return a.keys!==null},d.rsa.generateKeyPair=function(a,b,c,e){arguments.length===1?typeof a=="object"?(c=a,a=undefined):typeof a=="function"&&(e=a,a=undefined):arguments.length===2?typeof a=="number"?typeof b=="function"?(e=b,b=undefined):typeof b!="number"&&(c=b,b=undefined):(c=a,e=b,a=undefined,b=undefined):arguments.length===3&&(typeof b=="number"?typeof c=="function"&&(e=c,c=undefined):(e=c,c=b,b=undefined)),c=c||{},a===undefined&&(a=c.bits||2048),b===undefined&&(b=c.e||65537);var f=d.rsa.createKeyPairGenerationState(a,b,c);if(!e)return d.rsa.stepKeyPairGenerationState(f,0),f.keys;n(f,c,e)},d.setRsaPublicKey=d.rsa.setPublicKey=function(b,e){var f={n:b,e:e};return f.encrypt=function(b,c,e){typeof c=="string"?c=c.toUpperCase():c===undefined&&(c="RSAES-PKCS1-V1_5");if(c==="RSAES-PKCS1-V1_5")c={encode:function(a,b,c){return l(a,b,2).getBytes()}};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={encode:function(b,c){return a.pkcs1.encode_rsa_oaep(c,b,e)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={encode:function(a){return a}};else if(typeof c=="string")throw new Error('Unsupported encryption scheme: "'+c+'".');var g=c.encode(b,f,!0);return d.rsa.encrypt(g,f,!0)},f.verify=function(a,b,e){typeof e=="string"?e=e.toUpperCase():e===undefined&&(e="RSASSA-PKCS1-V1_5");if(e==="RSASSA-PKCS1-V1_5")e={verify:function(a,b){b=m(b,f,!0);var d=c.fromDer(b);return a===d.value[1].value}};else if(e==="NONE"||e==="NULL"||e===null)e={verify:function(a,b){return b=m(b,f,!0),a===b}};var g=d.rsa.decrypt(b,f,!0,!1);return e.verify(a,g,f.n.bitLength())},f},d.setRsaPrivateKey=d.rsa.setPrivateKey=function(b,c,e,f,g,h,i,k){var l={n:b,e:c,d:e,p:f,q:g,dP:h,dQ:i,qInv:k};return l.decrypt=function(b,c,e){typeof c=="string"?c=c.toUpperCase():c===undefined&&(c="RSAES-PKCS1-V1_5");var f=d.rsa.decrypt(b,l,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:m};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(b,c){return a.pkcs1.decode_rsa_oaep(c,b,e)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(a){return a}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(f,l,!1)},l.sign=function(a,b){var c=!1;typeof b=="string"&&(b=b.toUpperCase());if(b===undefined||b==="RSASSA-PKCS1-V1_5")b={encode:j},c=1;else if(b==="NONE"||b==="NULL"||b===null)b={encode:function(){return a}},c=1;var e=b.encode(a,l.n.bitLength());return d.rsa.encrypt(e,l,c)},l},d.wrapRsaPrivateKey=function(a){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(d.oids.rsaEncryption).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(a).getBytes())])},d.privateKeyFromAsn1=function(e){var h={},i=[];c.validate(e,f,h,i)&&(e=c.fromDer(a.util.createBuffer(h.privateKey))),h={},i=[];if(!c.validate(e,g,h,i)){var j=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw j.errors=i,j}var k,l,m,n,o,p,q,r;return k=a.util.createBuffer(h.privateKeyModulus).toHex(),l=a.util.createBuffer(h.privateKeyPublicExponent).toHex(),m=a.util.createBuffer(h.privateKeyPrivateExponent).toHex(),n=a.util.createBuffer(h.privateKeyPrime1).toHex(),o=a.util.createBuffer(h.privateKeyPrime2).toHex(),p=a.util.createBuffer(h.privateKeyExponent1).toHex(),q=a.util.createBuffer(h.privateKeyExponent2).toHex(),r=a.util.createBuffer(h.privateKeyCoefficient).toHex(),d.setRsaPrivateKey(new b(k,16),new b(l,16),new b(m,16),new b(n,16),new b(o,16),new b(p,16),new b(q,16),new b(r,16))},d.privateKeyToAsn1=d.privateKeyToRSAPrivateKey=function(a){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.n)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.e)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.d)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.p)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.q)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.dP)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.dQ)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.qInv))])},d.publicKeyFromAsn1=function(e){var f={},g=[];if(c.validate(e,i,f,g)){var j=c.derToOid(f.publicKeyOid);if(j!==d.oids.rsaEncryption){var k=new Error("Cannot read public key. Unknown OID.");throw k.oid=j,k}e=f.rsaPublicKey}g=[];if(!c.validate(e,h,f,g)){var k=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw k.errors=g,k}var l=a.util.createBuffer(f.publicKeyModulus).toHex(),m=a.util.createBuffer(f.publicKeyExponent).toHex();return d.setRsaPublicKey(new b(l,16),new b(m,16))},d.publicKeyToAsn1=d.publicKeyToSubjectPublicKeyInfo=function(a){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(d.oids.rsaEncryption).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,[d.publicKeyToRSAPublicKey(a)])])},d.publicKeyToRSAPublicKey=function(a){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.n)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o(a.e))])}}var e="rsa";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/rsa",["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function i(a,b,c){var d=[j(a+b)];for(var e=16,f=1;e<c;++f,e+=16)d.push(j(d[f-1]+a+b));return d.join("").substr(0,c)}function j(b){return a.md.md5.create().update(b).digest().getBytes()}if(typeof b=="undefined")var b=a.jsbn.BigInteger;var c=a.asn1,d=a.pki=a.pki||{};d.pbe=a.pbe=a.pbe||{};var e=d.oids,f={name:"EncryptedPrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},g={name:"PBES2Algorithms",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,onstructed:!0,capture:"kdfIterationCount"}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},h={name:"pkcs-12PbeParams",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"iterations"}]};d.encryptPrivateKeyInfo=function(b,f,g){g=g||{},g.saltSize=g.saltSize||8,g.count=g.count||2048,g.algorithm=g.algorithm||"aes128";var h=a.random.getBytesSync(g.saltSize),i=g.count,j=c.integerToDer(i),k,l,m;if(g.algorithm.indexOf("aes")===0||g.algorithm==="des"){var n,o,p;switch(g.algorithm){case"aes128":k=16,n=16,o=e["aes128-CBC"],p=a.aes.createEncryptionCipher;break;case"aes192":k=24,n=16,o=e["aes192-CBC"],p=a.aes.createEncryptionCipher;break;case"aes256":k=32,n=16,o=e["aes256-CBC"],p=a.aes.createEncryptionCipher;break;case"des":k=8,n=8,o=e.desCBC,p=a.des.createEncryptionCipher;break;default:var q=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw q.algorithm=g.algorithm,q}var r=a.pkcs5.pbkdf2(f,h,i,k),s=a.random.getBytesSync(n),t=p(r);t.start(s),t.update(c.toDer(b)),t.finish(),m=t.output.getBytes(),l=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(e.pkcs5PBES2).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(e.pkcs5PBKDF2).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,h),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,j.getBytes())])]),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(o).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,s)])])])}else{if(g.algorithm!=="3des"){var q=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw q.algorithm=g.algorithm,q}k=24;var u=new a.util.ByteBuffer(h),r=d.pbe.generatePkcs12Key(f,u,1,i,k),s=d.pbe.generatePkcs12Key(f,u,2,i,k),t=a.des.createEncryptionCipher(r);t.start(s),t.update(c.toDer(b)),t.finish(),m=t.output.getBytes(),l=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(e["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,h),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,j.getBytes())])])}var v=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[l,c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,m)]);return v},d.decryptPrivateKeyInfo=function(b,e){var g=null,h={},i=[];if(!c.validate(b,f,h,i)){var j=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw j.errors=i,j}var k=c.derToOid(h.encryptionOid),l=d.pbe.getCipher(k,h.encryptionParams,e),m=a.util.createBuffer(h.encryptedData);return l.update(m),l.finish()&&(g=c.fromDer(l.output)),g},d.encryptedPrivateKeyToPem=function(b,d){var e={type:"ENCRYPTED PRIVATE KEY",body:c.toDer(b).getBytes()};return a.pem.encode(e,{maxline:d})},d.encryptedPrivateKeyFromPem=function(b){var d=a.pem.decode(b)[0];if(d.type!=="ENCRYPTED PRIVATE KEY"){var e=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw e.headerType=d.type,e}if(d.procType&&d.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return c.fromDer(d.body)},d.encryptRsaPrivateKey=function(b,e,f){f=f||{};if(!f.legacy){var g=d.wrapRsaPrivateKey(d.privateKeyToAsn1(b));return g=d.encryptPrivateKeyInfo(g,e,f),d.encryptedPrivateKeyToPem(g)}var h,j,k,l;switch(f.algorithm){case"aes128":h="AES-128-CBC",k=16,j=a.random.getBytesSync(16),l=a.aes.createEncryptionCipher;break;case"aes192":h="AES-192-CBC",k=24,j=a.random.getBytesSync(16),l=a.aes.createEncryptionCipher;break;case"aes256":h="AES-256-CBC",k=32,j=a.random.getBytesSync(16),l=a.aes.createEncryptionCipher;break;case"3des":h="DES-EDE3-CBC",k=24,j=a.random.getBytesSync(8),l=a.des.createEncryptionCipher;break;case"des":h="DES-CBC",k=8,j=a.random.getBytesSync(8),l=a.des.createEncryptionCipher;break;default:var m=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+f.algorithm+'".');throw m.algorithm=f.algorithm,m}var n=i(e,j.substr(0,8),k),o=l(n);o.start(j),o.update(c.toDer(d.privateKeyToAsn1(b))),o.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:h,parameters:a.util.bytesToHex(j).toUpperCase()},body:o.output.getBytes()};return a.pem.encode(p)},d.decryptRsaPrivateKey=function(b,e){var f=null,g=a.pem.decode(b)[0];if(g.type!=="ENCRYPTED PRIVATE KEY"&&g.type!=="PRIVATE KEY"&&g.type!=="RSA PRIVATE KEY"){var h=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw h.headerType=h,h}if(g.procType&&g.procType.type==="ENCRYPTED"){var j,k;switch(g.dekInfo.algorithm){case"DES-CBC":j=8,k=a.des.createDecryptionCipher;break;case"DES-EDE3-CBC":j=24,k=a.des.createDecryptionCipher;break;case"AES-128-CBC":j=16,k=a.aes.createDecryptionCipher;break;case"AES-192-CBC":j=24,k=a.aes.createDecryptionCipher;break;case"AES-256-CBC":j=32,k=a.aes.createDecryptionCipher;break;case"RC2-40-CBC":j=5,k=function(b){return a.rc2.createDecryptionCipher(b,40)};break;case"RC2-64-CBC":j=8,k=function(b){return a.rc2.createDecryptionCipher(b,64)};break;case"RC2-128-CBC":j=16,k=function(b){return a.rc2.createDecryptionCipher(b,128)};break;default:var h=new Error('Could not decrypt private key; unsupported encryption algorithm "'+g.dekInfo.algorithm+'".');throw h.algorithm=g.dekInfo.algorithm,h}var l=a.util.hexToBytes(g.dekInfo.parameters),m=i(e,l.substr(0,8),j),n=k(m);n.start(l),n.update(a.util.createBuffer(g.body));if(n.finish())f=n.output.getBytes();else return f}else f=g.body;return g.type==="ENCRYPTED PRIVATE KEY"?f=d.decryptPrivateKeyInfo(c.fromDer(f),e):f=c.fromDer(f),f!==null&&(f=d.privateKeyFromAsn1(f)),f},d.pbe.generatePkcs12Key=function(b,c,d,e,f,g){var h,i;if(typeof g=="undefined"||g===null)g=a.md.sha1.create();var j=g.digestLength,k=g.blockLength,l=new a.util.ByteBuffer,m=new a.util.ByteBuffer;if(b!==null&&b!==undefined){for(i=0;i<b.length;i++)m.putInt16(b.charCodeAt(i));m.putInt16(0)}var n=m.length(),o=c.length(),p=new a.util.ByteBuffer;p.fillWithByte(d,k);var q=k*Math.ceil(o/k),r=new a.util.ByteBuffer;for(i=0;i<q;i++)r.putByte(c.at(i%o));var s=k*Math.ceil(n/k),t=new a.util.ByteBuffer;for(i=0;i<s;i++)t.putByte(m.at(i%n));var u=r;u.putBuffer(t);var v=Math.ceil(f/j);for(var w=1;w<=v;w++){var x=new a.util.ByteBuffer;x.putBytes(p.bytes()),x.putBytes(u.bytes());for(var y=0;y<e;y++)g.start(),g.update(x.getBytes()),x=g.digest();var z=new a.util.ByteBuffer;for(i=0;i<k;i++)z.putByte(x.at(i%j));var A=Math.ceil(o/k)+Math.ceil(n/k),B=new a.util.ByteBuffer;for(h=0;h<A;h++){var C=new a.util.ByteBuffer(u.getBytes(k)),D=511;for(i=z.length()-1;i>=0;i--)D>>=8,D+=z.at(i)+C.at(i),C.setAt(i,D&255);B.putBuffer(C)}u=B,l.putBuffer(x)}return l.truncate(l.length()-f),l},d.pbe.getCipher=function(a,b,c){switch(a){case d.oids.pkcs5PBES2:return d.pbe.getCipherForPBES2(a,b,c);case d.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case d.oids["pbewithSHAAnd40BitRC2-CBC"]:return d.pbe.getCipherForPKCS12PBE(a,b,c);default:var e=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw e.oid=a,e.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],e}},d.pbe.getCipherForPBES2=function(b,e,f){var h={},i=[];if(!c.validate(e,g,h,i)){var j=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw j.errors=i,j}b=c.derToOid(h.kdfOid);if(b!==d.oids.pkcs5PBKDF2){var j=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw j.oid=b,j.supportedOids=["pkcs5PBKDF2"],j}b=c.derToOid(h.encOid);if(b!==d.oids["aes128-CBC"]&&b!==d.oids["aes192-CBC"]&&b!==d.oids["aes256-CBC"]&&b!==d.oids["des-EDE3-CBC"]&&b!==d.oids.desCBC){var j=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw j.oid=b,j.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],j}var k=h.kdfSalt,l=a.util.createBuffer(h.kdfIterationCount);l=l.getInt(l.length()<<3);var m,n;switch(d.oids[b]){case"aes128-CBC":m=16,n=a.aes.createDecryptionCipher;break;case"aes192-CBC":m=24,n=a.aes.createDecryptionCipher;break;case"aes256-CBC":m=32,n=a.aes.createDecryptionCipher;break;case"des-EDE3-CBC":m=24,n=a.des.createDecryptionCipher;break;case"desCBC":m=8,n=a.des.createDecryptionCipher}var o=a.pkcs5.pbkdf2(f,k,l,m),p=h.encIv,q=n(o);return q.start(p),q},d.pbe.getCipherForPKCS12PBE=function(b,e,f){var g={},i=[];if(!c.validate(e,h,g,i)){var j=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw j.errors=i,j}var k=a.util.createBuffer(g.salt),l=a.util.createBuffer(g.iterations);l=l.getInt(l.length()<<3);var m,n,o;switch(b){case d.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:m=24,n=8,o=a.des.startDecrypting;break;case d.oids["pbewithSHAAnd40BitRC2-CBC"]:m=5,n=8,o=function(b,c){var d=a.rc2.createDecryptionCipher(b,40);return d.start(c,null),d};break;default:var j=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw j.oid=b,j}var p=d.pbe.generatePkcs12Key(f,k,1,l,m),q=d.pbe.generatePkcs12Key(f,k,2,l,n);return o(p,q)}}var e="pbe";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pbe",["require","module","./aes","./asn1","./des","./md","./oids","./pem","./pbkdf2","./random","./rc2","./rsa","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.asn1,c=a.pkcs7asn1=a.pkcs7asn1||{};a.pkcs7=a.pkcs7||{},a.pkcs7.asn1=c;var d={name:"ContentInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};c.contentInfoValidator=d;var e={name:"EncryptedContentInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:b.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};c.envelopedDataValidator={name:"EnvelopedData",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(e)},c.encryptedDataValidator={name:"EncryptedData",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"version"}].concat(e)};var f={name:"SignerInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.Version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1},{name:"SignerInfo.IssuerAndSerialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0},{name:"SignerInfo.DigestAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0},{name:"SignerInfo.AuthenticatedAttributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.DigestEncryptionAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0},{name:"SignerInfo.EncryptedDigest",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.UnauthenticatedAttributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0}]};c.signedDataValidator={name:"SignedData",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},d,{name:"SignedData.Certificates",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,capture:"signerInfos",optional:!0,value:[f]}]},c.recipientInfoValidator={name:"RecipientInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:b.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}var e="pkcs7asn1";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pkcs7asn1",["require","module","./asn1","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.mgf=a.mgf||{};var b=a.mgf.mgf1=a.mgf1=a.mgf1||{};b.create=function(b){var c={generate:function(c,d){var e=new a.util.ByteBuffer,f=Math.ceil(d/b.digestLength);for(var g=0;g<f;g++){var h=new a.util.ByteBuffer;h.putInt32(g),b.start(),b.update(c+h.getBytes()),e.putBuffer(b.digest())}return e.truncate(e.length()-d),e.getBytes()}};return c}}var e="mgf1";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/mgf1",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.mgf=a.mgf||{},a.mgf.mgf1=a.mgf1}var e="mgf";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/mgf",["require","module","./mgf1"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.pss=a.pss||{};b.create=function(b){arguments.length===3&&(b={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var c=b.md,d=b.mgf,e=c.digestLength,f=b.salt||null;typeof f=="string"&&(f=a.util.createBuffer(f));var g;if("saltLength"in b)g=b.saltLength;else if(f!==null)g=f.length();else throw new Error("Salt length not specified or specific salt not given.");if(f!==null&&f.length()!==g)throw new Error("Given salt length does not match length of given salt.");var h=b.prng||a.random,i={};return i.encode=function(b,i){var j,k=i-1,l=Math.ceil(k/8),m=b.digest().getBytes();if(l<e+g+2)throw new Error("Message is too long to encrypt.");var n;f===null?n=h.getBytesSync(g):n=f.bytes();var o=new a.util.ByteBuffer;o.fillWithByte(0,8),o.putBytes(m),o.putBytes(n),c.start(),c.update(o.getBytes());var p=c.digest().getBytes(),q=new a.util.ByteBuffer;q.fillWithByte(0,l-g-e-2),q.putByte(1),q.putBytes(n);var r=q.getBytes(),s=l-e-1,t=d.generate(p,s),u="";for(j=0;j<s;j++)u+=String.fromCharCode(r.charCodeAt(j)^t.charCodeAt(j));var v=65280>>8*l-k&255;return u=String.fromCharCode(u.charCodeAt(0)&~v)+u.substr(1),u+p+String.fromCharCode(188)},i.verify=function(b,f,h){var i,j=h-1,k=Math.ceil(j/8);f=f.substr(-k);if(k<e+g+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(k-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var l=k-e-1,m=f.substr(0,l),n=f.substr(l,e),o=65280>>8*k-j&255;if((m.charCodeAt(0)&o)!==0)throw new Error("Bits beyond keysize not zero as expected.");var p=d.generate(n,l),q="";for(i=0;i<l;i++)q+=String.fromCharCode(m.charCodeAt(i)^p.charCodeAt(i));q=String.fromCharCode(q.charCodeAt(0)&~o)+q.substr(1);var r=k-e-g-2;for(i=0;i<r;i++)if(q.charCodeAt(i)!==0)throw new Error("Leftmost octets not zero as expected");if(q.charCodeAt(r)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var s=q.substr(-g),t=new a.util.ByteBuffer;t.fillWithByte(0,8),t.putBytes(b),t.putBytes(s),c.start(),c.update(t.getBytes());var u=c.digest().getBytes();return n===u},i}}var e="pss";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pss",["require","module","./random","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function k(a,b){typeof b=="string"&&(b={shortName:b});var c=null,d;for(var e=0;c===null&&e<a.attributes.length;++e)d=a.attributes[e],b.type&&b.type===d.type?c=d:b.name&&b.name===d.name?c=d:b.shortName&&b.shortName===d.shortName&&(c=d);return c}function n(c){var d=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),e,f,g=c.attributes;for(var h=0;h<g.length;++h){e=g[h];var i=e.value,j=b.Type.PRINTABLESTRING;"valueTagClass"in e&&(j=e.valueTagClass,j===b.Type.UTF8&&(i=a.util.encodeUtf8(i))),f=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),b.create(b.Class.UNIVERSAL,j,!1,i)])]),d.value.push(f)}return d}function o(a){var c=b.create(b.Class.CONTEXT_SPECIFIC,3,!0,[]),d=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);c.value.push(d);var e,f;for(var g=0;g<a.length;++g){e=a[g],f=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),d.value.push(f),f.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.id).getBytes())),e.critical&&f.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255)));var h=e.value;typeof e.value!="string"&&(h=b.toDer(h).getBytes()),f.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,h))}return c}function p(c){var d={};for(var e=0;e<c.length;++e){var f=c[e];if(f.shortName&&(f.valueTagClass===b.Type.UTF8||f.valueTagClass===b.Type.PRINTABLESTRING||f.valueTagClass===b.Type.IA5STRING)){var g=f.value;f.valueTagClass===b.Type.UTF8&&(g=a.util.encodeUtf8(f.value)),f.shortName in d?a.util.isArray(d[f.shortName])?d[f.shortName].push(g):d[f.shortName]=[d[f.shortName],g]:d[f.shortName]=g}}return d}function q(a){var b;for(var d=0;d<a.length;++d){b=a[d],typeof b.name=="undefined"&&(b.type&&b.type in c.oids?b.name=c.oids[b.type]:b.shortName&&b.shortName in e&&(b.name=c.oids[e[b.shortName]]));if(typeof b.type=="undefined")if(b.name&&b.name in c.oids)b.type=c.oids[b.name];else{var f=new Error("Attribute type not specified.");throw f.attribute=b,f}typeof b.shortName=="undefined"&&b.name&&b.name in e&&(b.shortName=e[b.name]);if(typeof b.value=="undefined"){var f=new Error("Attribute value not specified.");throw f.attribute=b,f}}}function r(a,c){switch(a){case d["RSASSA-PSS"]:var e=[];return c.hash.algorithmOid!==undefined&&e.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])),c.mgf.algorithmOid!==undefined&&e.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.mgf.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.mgf.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])])),c.saltLength!==undefined&&e.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(c.saltLength).getBytes())])),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,e);default:return b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")}}function s(c){var d=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);if(c.attributes.length===0)return d;var e=c.attributes;for(var f=0;f<e.length;++f){var g=e[f],h=g.value,i=b.Type.UTF8;"valueTagClass"in g&&(i=g.valueTagClass),i===b.Type.UTF8&&(h=a.util.encodeUtf8(h));var j=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(g.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,i,!1,h)])]);d.value.push(j)}return d}var b=a.asn1,c=a.pki=a.pki||{},d=c.oids,e={};e.CN=d.commonName,e.commonName="CN",e.C=d.countryName,e.countryName="C",e.L=d.localityName,e.localityName="L",e.ST=d.stateOrProvinceName,e.stateOrProvinceName="ST",e.O=d.organizationName,e.organizationName="O",e.OU=d.organizationalUnitName,e.organizationalUnitName="OU",e.E=d.emailAddress,e.emailAddress="E";var f=a.pki.rsa.publicKeyValidator,g={name:"Certificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},f,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},h={name:"rsapss",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},i={name:"CertificationRequestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},f,{name:"CertificationRequestInfo.attributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0}]}]}]},j={name:"CertificationRequest",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[i,{name:"CertificationRequest.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};c.RDNAttributesAsArray=function(a,c){var f=[],g,h,i;for(var j=0;j<a.value.length;++j){g=a.value[j];for(var k=0;k<g.value.length;++k)i={},h=g.value[k],i.type=b.derToOid(h.value[0].value),i.value=h.value[1].value,i.valueTagClass=h.value[1].type,i.type in d&&(i.name=d[i.type],i.name in e&&(i.shortName=e[i.name])),c&&(c.update(i.type),c.update(i.value)),f.push(i)}return f},c.CRIAttributesAsArray=function(a){var c=[];for(var f=0;f<a.length;++f){var g=a[f],h=b.derToOid(g.value[0].value),i=g.value[1].value;for(var j=0;j<i.length;++j){var k={};k.type=h,k.value=i[j].value,k.valueTagClass=i[j].type,k.type in d&&(k.name=d[k.type],k.name in e&&(k.shortName=e[k.name])),c.push(k)}}return c};var l=function(c){var e=[],f,g,h;for(var i=0;i<c.value.length;++i){h=c.value[i];for(var j=0;j<h.value.length;++j){g=h.value[j],f={},f.id=b.derToOid(g.value[0].value),f.critical=!1,g.value[1].type===b.Type.BOOLEAN?(f.critical=g.value[1].value.charCodeAt(0)!==0,f.value=g.value[2].value):f.value=g.value[1].value;if(f.id in d){f.name=d[f.id];if(f.name==="keyUsage"){var k=b.fromDer(f.value),l=0,m=0;k.value.length>1&&(l=k.value.charCodeAt(1),m=k.value.length>2?k.value.charCodeAt(2):0),f.digitalSignature=(l&128)===128,f.nonRepudiation=(l&64)===64,f.keyEncipherment=(l&32)===32,f.dataEncipherment=(l&16)===16,f.keyAgreement=(l&8)===8,f.keyCertSign=(l&4)===4,f.cRLSign=(l&2)===2,f.encipherOnly=(l&1)===1,f.decipherOnly=(m&128)===128}else if(f.name==="basicConstraints"){var k=b.fromDer(f.value);k.value.length>0&&k.value[0].type===b.Type.BOOLEAN?f.cA=k.value[0].value.charCodeAt(0)!==0:f.cA=!1;var n=null;k.value.length>0&&k.value[0].type===b.Type.INTEGER?n=k.value[0].value:k.value.length>1&&(n=k.value[1].value),n!==null&&(f.pathLenConstraint=b.derToInteger(n))}else if(f.name==="extKeyUsage"){var k=b.fromDer(f.value);for(var o=0;o<k.value.length;++o){var p=b.derToOid(k.value[o].value);p in d?f[d[p]]=!0:f[p]=!0}}else if(f.name==="nsCertType"){var k=b.fromDer(f.value),l=0;k.value.length>1&&(l=k.value.charCodeAt(1)),f.client=(l&128)===128,f.server=(l&64)===64,f.email=(l&32)===32,f.objsign=(l&16)===16,f.reserved=(l&8)===8,f.sslCA=(l&4)===4,f.emailCA=(l&2)===2,f.objCA=(l&1)===1}else if(f.name==="subjectAltName"||f.name==="issuerAltName"){f.altNames=[];var q,k=b.fromDer(f.value);for(var r=0;r<k.value.length;++r){q=k.value[r];var s={type:q.type,value:q.value};f.altNames.push(s);switch(q.type){case 1:case 2:case 6:break;case 7:s.ip=a.util.bytesToIP(q.value);break;case 8:s.oid=b.derToOid(q.value);break;default:}}}else if(f.name==="subjectKeyIdentifier"){var k=b.fromDer(f.value);f.subjectKeyIdentifier=a.util.bytesToHex(k.value)}}e.push(f)}}return e},m=function(a,c,e){var f={};if(a!==d["RSASSA-PSS"])return f;e&&(f={hash:{algorithmOid:d.sha1},mgf:{algorithmOid:d.mgf1,hash:{algorithmOid:d.sha1}},saltLength:20});var g={},i=[];if(!b.validate(c,h,g,i)){var j=new Error("Cannot read RSASSA-PSS parameter block.");throw j.errors=i,j}return g.hashOid!==undefined&&(f.hash=f.hash||{},f.hash.algorithmOid=b.derToOid(g.hashOid)),g.maskGenOid!==undefined&&(f.mgf=f.mgf||{},f.mgf.algorithmOid=b.derToOid(g.maskGenOid),f.mgf.hash=f.mgf.hash||{},f.mgf.hash.algorithmOid=b.derToOid(g.maskGenHashOid)),g.saltLength!==undefined&&(f.saltLength=g.saltLength.charCodeAt(0)),f};c.certificateFromPem=function(d,e,f){var g=a.pem.decode(d)[0];if(g.type!=="CERTIFICATE"&&g.type!=="X509 CERTIFICATE"&&g.type!=="TRUSTED CERTIFICATE"){var h=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw h.headerType=g.type,h}if(g.procType&&g.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var i=b.fromDer(g.body,f);return c.certificateFromAsn1(i,e)},c.certificateToPem=function(d,e){var f={type:"CERTIFICATE",body:b.toDer(c.certificateToAsn1(d)).getBytes()};return a.pem.encode(f,{maxline:e})},c.publicKeyFromPem=function(d){var e=a.pem.decode(d)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var f=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw f.headerType=e.type,f}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var g=b.fromDer(e.body);return c.publicKeyFromAsn1(g)},c.publicKeyToPem=function(d,e){var f={type:"PUBLIC KEY",body:b.toDer(c.publicKeyToAsn1(d)).getBytes()};return a.pem.encode(f,{maxline:e})},c.publicKeyToRSAPublicKeyPem=function(d,e){var f={type:"RSA PUBLIC KEY",body:b.toDer(c.publicKeyToRSAPublicKey(d)).getBytes()};return a.pem.encode(f,{maxline:e})},c.getPublicKeyFingerprint=function(d,e){e=e||{};var f=e.md||a.md.sha1.create(),g=e.type||"RSAPublicKey",h;switch(g){case"RSAPublicKey":h=b.toDer(c.publicKeyToRSAPublicKey(d)).getBytes();break;case"SubjectPublicKeyInfo":h=b.toDer(c.publicKeyToAsn1(d)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}f.start(),f.update(h);var i=f.digest();if(e.encoding==="hex"){var j=i.toHex();return e.delimiter?j.match(/.{2}/g).join(e.delimiter):j}if(e.encoding==="binary")return i.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return i},c.certificationRequestFromPem=function(d,e,f){var g=a.pem.decode(d)[0];if(g.type!=="CERTIFICATE REQUEST"){var h=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw h.headerType=g.type,h}if(g.procType&&g.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var i=b.fromDer(g.body,f);return c.certificationRequestFromAsn1(i,e)},c.certificationRequestToPem=function(d,e){var f={type:"CERTIFICATE REQUEST",body:b.toDer(c.certificationRequestToAsn1(d)).getBytes()};return a.pem.encode(f,{maxline:e})},c.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(a){return k(e.issuer,a)},e.issuer.addField=function(a){q([a]),e.issuer.attributes.push(a)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(a){return k(e.subject,a)},e.subject.addField=function(a){q([a]),e.subject.attributes.push(a)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(a,b){q(a),e.subject.attributes=a,delete e.subject.uniqueId,b&&(e.subject.uniqueId=b),e.subject.hash=null},e.setIssuer=function(a,b){q(a),e.issuer.attributes=a,delete e.issuer.uniqueId,b&&(e.issuer.uniqueId=b),e.issuer.hash=null},e.setExtensions=function(f){var g;for(var h=0;h<f.length;++h){g=f[h],typeof g.name=="undefined"&&g.id&&g.id in c.oids&&(g.name=c.oids[g.id]);if(typeof g.id=="undefined")if(g.name&&g.name in c.oids)g.id=c.oids[g.name];else{var i=new Error("Extension ID not specified.");throw i.extension=g,i}if(typeof g.value=="undefined"){if(g.name==="keyUsage"){var j=0,k=0,l=0;g.digitalSignature&&(k|=128,j=7),g.nonRepudiation&&(k|=64,j=6),g.keyEncipherment&&(k|=32,j=5),g.dataEncipherment&&(k|=16,j=4),g.keyAgreement&&(k|=8,j=3),g.keyCertSign&&(k|=4,j=2),g.cRLSign&&(k|=2,j=1),g.encipherOnly&&(k|=1,j=0),g.decipherOnly&&(l|=128,j=7);var m=String.fromCharCode(j);l!==0?m+=String.fromCharCode(k)+String.fromCharCode(l):k!==0&&(m+=String.fromCharCode(k)),g.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,m)}else if(g.name==="basicConstraints")g.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),g.cA&&g.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in g&&g.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(g.pathLenConstraint).getBytes()));else if(g.name==="extKeyUsage"){g.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var n=g.value.value;for(var o in g){if(g[o]!==!0)continue;o in d?n.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(d[o]).getBytes())):o.indexOf(".")!==-1&&n.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(o).getBytes()))}}else if(g.name==="nsCertType"){var j=0,k=0;g.client&&(k|=128,j=7),g.server&&(k|=64,j=6),g.email&&(k|=32,j=5),g.objsign&&(k|=16,j=4),g.reserved&&(k|=8,j=3),g.sslCA&&(k|=4,j=2),g.emailCA&&(k|=2,j=1),g.objCA&&(k|=1,j=0);var m=String.fromCharCode(j);k!==0&&(m+=String.fromCharCode(k)),g.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,m)}else if(g.name==="subjectAltName"||g.name==="issuerAltName"){g.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var p;for(var q=0;q<g.altNames.length;++q){p=g.altNames[q];var m=p.value;if(p.type===7&&p.ip){m=a.util.bytesFromIP(p.ip);if(m===null){var i=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw i.extension=g,i}}else p.type===8&&(p.oid?m=b.oidToDer(b.oidToDer(p.oid)):m=b.oidToDer(m));g.value.value.push(b.create(b.Class.CONTEXT_SPECIFIC,p.type,!1,m))}}else if(g.name==="subjectKeyIdentifier"){var r=e.generateSubjectKeyIdentifier();g.subjectKeyIdentifier=r.toHex(),g.value=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,r.getBytes())}if(typeof g.value=="undefined"){var i=new Error("Extension value not specified.");throw i.extension=g,i}}}e.extensions=f},e.getExtension=function(a){typeof a=="string"&&(a={name:a});var b=null,c;for(var d=0;b===null&&d<e.extensions.length;++d)c=e.extensions[d],a.id&&c.id===a.id?b=c:a.name&&c.name===a.name&&(b=c);return b},e.sign=function(f,g){e.md=g||a.md.sha1.create();var h=d[e.md.algorithm+"WithRSAEncryption"];if(!h){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=h,e.tbsCertificate=c.getTBSCertificate(e);var j=b.toDer(e.tbsCertificate);e.md.update(j.getBytes()),e.signature=f.sign(e.md)},e.verify=function(f){var g=!1;if(!e.issued(f)){var h=f.issuer,i=e.subject,j=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw j.expectedIssuer=h.attributes,j.actualIssuer=i.attributes,j}var k=f.md;if(k===null){if(f.signatureOid in d){var l=d[f.signatureOid];switch(l){case"sha1WithRSAEncryption":k=a.md.sha1.create();break;case"md5WithRSAEncryption":k=a.md.md5.create();break;case"sha256WithRSAEncryption":k=a.md.sha256.create();break;case"RSASSA-PSS":k=a.md.sha256.create()}}if(k===null){var j=new Error("Could not compute certificate digest. Unknown signature OID.");throw j.signatureOid=f.signatureOid,j}var m=f.tbsCertificate||c.getTBSCertificate(f),n=b.toDer(m);k.update(n.getBytes())}if(k!==null){var o;switch(f.signatureOid){case d.sha1WithRSAEncryption:o=undefined;break;case d["RSASSA-PSS"]:var p,q;p=d[f.signatureParameters.mgf.hash.algorithmOid];if(p===undefined||a.md[p]===undefined){var j=new Error("Unsupported MGF hash function.");throw j.oid=f.signatureParameters.mgf.hash.algorithmOid,j.name=p,j}q=d[f.signatureParameters.mgf.algorithmOid];if(q===undefined||a.mgf[q]===undefined){var j=new Error("Unsupported MGF function.");throw j.oid=f.signatureParameters.mgf.algorithmOid,j.name=q,j}q=a.mgf[q].create(a.md[p].create()),p=d[f.signatureParameters.hash.algorithmOid];if(p===undefined||a.md[p]===undefined)throw{message:"Unsupported RSASSA-PSS hash function.",oid:f.signatureParameters.hash.algorithmOid,name:p};o=a.pss.create(a.md[p].create(),q,f.signatureParameters.saltLength)}g=e.publicKey.verify(k.digest().getBytes(),f.signature,o)}return g},e.isIssuer=function(a){var b=!1,c=e.issuer,d=a.subject;if(c.hash&&d.hash)b=c.hash===d.hash;else if(c.attributes.length===d.attributes.length){b=!0;var f,g;for(var h=0;b&&h<c.attributes.length;++h){f=c.attributes[h],g=d.attributes[h];if(f.type!==g.type||f.value!==g.value)b=!1}}return b},e.issued=function(a){return a.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return c.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){var b=d.subjectKeyIdentifier;for(var c=0;c<e.extensions.length;++c){var f=e.extensions[c];if(f.id===b){var g=e.generateSubjectKeyIdentifier().getBytes();return a.util.hexToBytes(f.subjectKeyIdentifier)===g}}return!1},e},c.certificateFromAsn1=function(e,f){var h={},i=[];if(!b.validate(e,g,h,i)){var j=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw j.errors=i,j}if(typeof h.certSignature!="string"){var n="\0";for(var o=0;o<h.certSignature.length;++o)n+=b.toDer(h.certSignature[o]).getBytes();h.certSignature=n}var p=b.derToOid(h.publicKeyOid);if(p!==c.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var r=c.createCertificate();r.version=h.certVersion?h.certVersion.charCodeAt(0):0;var s=a.util.createBuffer(h.certSerialNumber);r.serialNumber=s.toHex(),r.signatureOid=a.asn1.derToOid(h.certSignatureOid),r.signatureParameters=m(r.signatureOid,h.certSignatureParams,!0),r.siginfo.algorithmOid=a.asn1.derToOid(h.certinfoSignatureOid),r.siginfo.parameters=m(r.siginfo.algorithmOid,h.certinfoSignatureParams,!1);var t=a.util.createBuffer(h.certSignature);++t.read,r.signature=t.getBytes();var u=[];h.certValidity1UTCTime!==undefined&&u.push(b.utcTimeToDate(h.certValidity1UTCTime)),h.certValidity2GeneralizedTime!==undefined&&u.push(b.generalizedTimeToDate(h.certValidity2GeneralizedTime)),h.certValidity3UTCTime!==undefined&&u.push(b.utcTimeToDate(h.certValidity3UTCTime)),h.certValidity4GeneralizedTime!==undefined&&u.push(b.generalizedTimeToDate(h.certValidity4GeneralizedTime));if(u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");r.validity.notBefore=u[0],r.validity.notAfter=u[1],r.tbsCertificate=h.tbsCertificate;if(f){r.md=null;if(r.signatureOid in d){var p=d[r.signatureOid];switch(p){case"sha1WithRSAEncryption":r.md=a.md.sha1.create();break;case"md5WithRSAEncryption":r.md=a.md.md5.create();break;case"sha256WithRSAEncryption":r.md=a.md.sha256.create();break;case"RSASSA-PSS":r.md=a.md.sha256.create()}}if(r.md===null){var j=new Error("Could not compute certificate digest. Unknown signature OID.");throw j.signatureOid=r.signatureOid,j}var v=b.toDer(r.tbsCertificate);r.md.update(v.getBytes())}var w=a.md.sha1.create();r.issuer.getField=function(a){return k(r.issuer,a)},r.issuer.addField=function(a){q([a]),r.issuer.attributes.push(a)},r.issuer.attributes=c.RDNAttributesAsArray(h.certIssuer,w),h.certIssuerUniqueId&&(r.issuer.uniqueId=h.certIssuerUniqueId),r.issuer.hash=w.digest().toHex();var x=a.md.sha1.create();return r.subject.getField=function(a){return k(r.subject,a)},r.subject.addField=function(a){q([a]),r.subject.attributes.push(a)},r.subject.attributes=c.RDNAttributesAsArray(h.certSubject,x),h.certSubjectUniqueId&&(r.subject.uniqueId=h.certSubjectUniqueId),r.subject.hash=x.digest().toHex(),h.certExtensions?r.extensions=l(h.certExtensions):r.extensions=[],r.publicKey=c.publicKeyFromAsn1(h.subjectPublicKeyInfo),r},c.certificationRequestFromAsn1=function(e,f){var g={},h=[];if(!b.validate(e,j,g,h)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=h,i}if(typeof g.csrSignature!="string"){var l="\0";for(var n=0;n<g.csrSignature.length;++n)l+=b.toDer(g.csrSignature[n]).getBytes();g.csrSignature=l}var o=b.derToOid(g.publicKeyOid);if(o!==c.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var p=c.createCertificationRequest();p.version=g.csrVersion?g.csrVersion.charCodeAt(0):0,p.signatureOid=a.asn1.derToOid(g.csrSignatureOid),p.signatureParameters=m(p.signatureOid,g.csrSignatureParams,!0),p.siginfo.algorithmOid=a.asn1.derToOid(g.csrSignatureOid),p.siginfo.parameters=m(p.siginfo.algorithmOid,g.csrSignatureParams,!1);var r=a.util.createBuffer(g.csrSignature);++r.read,p.signature=r.getBytes(),p.certificationRequestInfo=g.certificationRequestInfo;if(f){p.md=null;if(p.signatureOid in d){var o=d[p.signatureOid];switch(o){case"sha1WithRSAEncryption":p.md=a.md.sha1.create();break;case"md5WithRSAEncryption":p.md=a.md.md5.create();break;case"sha256WithRSAEncryption":p.md=a.md.sha256.create();break;case"RSASSA-PSS":p.md=a.md.sha256.create()}}if(p.md===null){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=p.signatureOid,i}var s=b.toDer(p.certificationRequestInfo);p.md.update(s.getBytes())}var t=a.md.sha1.create();return p.subject.getField=function(a){return k(p.subject,a)},p.subject.addField=function(a){q([a]),p.subject.attributes.push(a)},p.subject.attributes=c.RDNAttributesAsArray(g.certificationRequestInfoSubject,t),p.subject.hash=t.digest().toHex(),p.publicKey=c.publicKeyFromAsn1(g.subjectPublicKeyInfo),p.getAttribute=function(a){return k(p.attributes,a)},p.addAttribute=function(a){q([a]),p.attributes.push(a)},p.attributes=c.CRIAttributesAsArray(g.certificationRequestInfoAttributes||[]),p},c.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(a){return k(e.subject,a)},e.subject.addField=function(a){q([a]),e.subject.attributes.push(a)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(a){return k(e.attributes,a)},e.addAttribute=function(a){q([a]),e.attributes.push(a)},e.md=null,e.setSubject=function(a){q(a),e.subject.attributes=a,e.subject.hash=null},e.setAttributes=function(a){q(a),e.attributes=a},e.sign=function(f,g){e.md=g||a.md.sha1.create();var h=d[e.md.algorithm+"WithRSAEncryption"];if(!h){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=h,e.certificationRequestInfo=c.getCertificationRequestInfo(e);var j=b.toDer(e.certificationRequestInfo);e.md.update(j.getBytes()),e.signature=f.sign(e.md)},e.verify=function(){var f=!1,g=e.md;if(g===null){if(e.signatureOid in d){var h=d[e.signatureOid];switch(h){case"sha1WithRSAEncryption":g=a.md.sha1.create();break;case"md5WithRSAEncryption":g=a.md.md5.create();break;case"sha256WithRSAEncryption":g=a.md.sha256.create();break;case"RSASSA-PSS":g=a.md.sha256.create()}}if(g===null){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=e.signatureOid,i}var j=e.certificationRequestInfo||c.getCertificationRequestInfo(e),k=b.toDer(j);g.update(k.getBytes())}if(g!==null){var l;switch(e.signatureOid){case d.sha1WithRSAEncryption:break;case d["RSASSA-PSS"]:var m,n;m=d[e.signatureParameters.mgf.hash.algorithmOid];if(m===undefined||a.md[m]===undefined){var i=new Error("Unsupported MGF hash function.");throw i.oid=e.signatureParameters.mgf.hash.algorithmOid,i.name=m,i}n=d[e.signatureParameters.mgf.algorithmOid];if(n===undefined||a.mgf[n]===undefined){var i=new Error("Unsupported MGF function.");throw i.oid=e.signatureParameters.mgf.algorithmOid,i.name=n,i}n=a.mgf[n].create(a.md[m].create()),m=d[e.signatureParameters.hash.algorithmOid];if(m===undefined||a.md[m]===undefined){var i=new Error("Unsupported RSASSA-PSS hash function.");throw i.oid=e.signatureParameters.hash.algorithmOid,i.name=m,i}l=a.pss.create(a.md[m].create(),n,e.signatureParameters.saltLength)}f=e.publicKey.verify(g.digest().getBytes(),e.signature,l)}return f},e},c.getTBSCertificate=function(d){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(d.version).getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,a.util.hexToBytes(d.serialNumber)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(d.siginfo.algorithmOid).getBytes()),r(d.siginfo.algorithmOid,d.siginfo.parameters)]),n(d.issuer),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(d.validity.notBefore)),b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(d.validity.notAfter))]),n(d.subject),c.publicKeyToAsn1(d.publicKey)]);return d.issuer.uniqueId&&e.value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+d.issuer.uniqueId)])),d.subject.uniqueId&&e.value.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+d.subject.uniqueId)])),d.extensions.length>0&&e.value.push(o(d.extensions)),e},c.getCertificationRequestInfo=function(a){var d=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(a.version).getBytes()),n(a.subject),c.publicKeyToAsn1(a.publicKey),s(a)]);return d},c.distinguishedNameToAsn1=function(a){return n(a)},c.certificateToAsn1=function(a){var d=a.tbsCertificate||c.getTBSCertificate(a);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[d,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(a.signatureOid).getBytes()),r(a.signatureOid,a.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+a.signature)])},c.certificationRequestToAsn1=function(a){var d=a.certificationRequestInfo||c.getCertificationRequestInfo(a);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[d,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(a.signatureOid).getBytes()),r(a.signatureOid,a.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+a.signature)])},c.createCaStore=function(b){var d={certs:{}};d.getIssuer=function(b){var e=null;if(!b.issuer.hash){var f=a.md.sha1.create();b.issuer.attributes=c.RDNAttributesAsArray(n(b.issuer),f),b.issuer.hash=f.digest().toHex()}if(b.issuer.hash in d.certs){e=d.certs[b.issuer.hash];if(a.util.isArray(e))throw new Error("Resolving multiple issuer matches not implemented yet.")}return e},d.addCertificate=function(b){typeof b=="string"&&(b=a.pki.certificateFromPem(b));if(!b.subject.hash){var e=a.md.sha1.create();b.subject.attributes=c.RDNAttributesAsArray(n(b.subject),e),b.subject.hash=e.digest().toHex()}if(b.subject.hash in d.certs){var f=d.certs[b.subject.hash];a.util.isArray(f)||(f=[f]),f.push(b)}else d.certs[b.subject.hash]=b};if(b)for(var e=0;e<b.length;++e){var f=b[e];d.addCertificate(f)}return d},c.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},c.verifyCertificateChain=function(b,d,e){d=d.slice(0);var f=d.slice(0),g=new Date,h=!0,i=null,j=0,k=null;do{var l=d.shift();if(g<l.validity.notBefore||g>l.validity.notAfter)i={message:"Certificate is not valid yet or has expired.",error:c.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:g};else{var m=!1;if(d.length>0){k=d[0];try{m=k.verify(l)}catch(n){}}else{var o=b.getIssuer(l);if(o===null)i={message:"Certificate is not trusted.",error:c.certificateError.unknown_ca};else{a.util.isArray(o)||(o=[o]);while(!m&&o.length>0){k=o.shift();try{m=k.verify(l)}catch(n){}}}}i===null&&!m&&(i={message:"Certificate signature is invalid.",error:c.certificateError.bad_certificate})}i===null&&!l.isIssuer(k)&&(i={message:"Certificate issuer is invalid.",error:c.certificateError.bad_certificate});if(i===null){var p={keyUsage:!0,basicConstraints:!0};for(var q=0;i===null&&q<l.extensions.length;++q){var r=l.extensions[q];r.critical&&!(r.name in p)&&(i={message:"Certificate has an unsupported critical extension.",error:c.certificateError.unsupported_certificate})}}if(!h||d.length===0&&!k){var s=l.getExtension("basicConstraints"),t=l.getExtension("keyUsage");t!==null&&(!t.keyCertSign||s===null)&&(i={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:c.certificateError.bad_certificate}),i===null&&s!==null&&!s.cA&&(i={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:c.certificateError.bad_certificate});if(i===null&&t!==null&&"pathLenConstraint"in s){var u=0;for(var q=1;q<d.length-1;++q)d[q].isIssuer(d[q])&&++u;var v=s.pathLenConstraint+1;d.length-u>v&&(i={message:"Certificate basicConstraints pathLenConstraint violated.",error:c.certificateError.bad_certificate})}}var w=i===null?!0:i.error,x=e?e(w,j,f):w;if(x===!0)i=null;else{w===!0&&(i={message:"The application rejected the certificate.",error:c.certificateError.bad_certificate});if(x||x===0)typeof x=="object"&&!a.util.isArray(x)?(x.message&&(i.message=x.message),x.error&&(i.error=x.error)):typeof x=="string"&&(i.error=x);throw i}h=!1,++j}while(d.length>0);return!0}}var e="x509";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c.pki}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/x509",["require","module","./aes","./asn1","./des","./md","./mgf","./oids","./pem","./pss","./rsa","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function j(a,b,c,d){var e=[];for(var f=0;f<a.length;f++)for(var g=0;g<a[f].safeBags.length;g++){var h=a[f].safeBags[g];if(d!==undefined&&h.type!==d)continue;if(b===null){e.push(h);continue}h.attributes[b]!==undefined&&h.attributes[b].indexOf(c)>=0&&e.push(h)}return e}function k(b){if(b.composed||b.constructed){var c=a.util.createBuffer();for(var d=0;d<b.value.length;++d)c.putBytes(b.value[d].value);b.composed=b.constructed=!1,b.value=c.getBytes()}return b}function l(a,d,f,g){d=b.fromDer(d,f);if(d.tagClass!==b.Class.UNIVERSAL||d.type!==b.Type.SEQUENCE||d.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var h=0;h<d.value.length;h++){var i=d.value[h],j={},l=[];if(!b.validate(i,e,j,l)){var o=new Error("Cannot read ContentInfo.");throw o.errors=l,o}var p={encrypted:!1},q=null,r=j.content.value[0];switch(b.derToOid(j.contentType)){case c.oids.data:if(r.tagClass!==b.Class.UNIVERSAL||r.type!==b.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");q=k(r).value;break;case c.oids.encryptedData:q=m(r,g),p.encrypted=!0;break;default:var o=new Error("Unsupported PKCS#12 contentType.");throw o.contentType=b.derToOid(j.contentType),o}p.safeBags=n(q,f,g),a.safeContents.push(p)}}function m(d,e){var f={},g=[];if(!b.validate(d,a.pkcs7.asn1.encryptedDataValidator,f,g)){var h=new Error("Cannot read EncryptedContentInfo.");throw h.errors=g,h}var i=b.derToOid(f.contentType);if(i!==c.oids.data){var h=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw h.oid=i,h}i=b.derToOid(f.encAlgorithm);var j=c.pbe.getCipher(i,f.encParameter,e),l=k(f.encryptedContentAsn1),m=a.util.createBuffer(l.value);j.update(m);if(!j.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return j.output.getBytes()}function n(a,d,e){if(!d&&a.length===0)return[];a=b.fromDer(a,d);if(a.tagClass!==b.Class.UNIVERSAL||a.type!==b.Type.SEQUENCE||a.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");var f=[];for(var h=0;h<a.value.length;h++){var j=a.value[h],k={},l=[];if(!b.validate(j,g,k,l)){var m=new Error("Cannot read SafeBag.");throw m.errors=l,m}var n={type:b.derToOid(k.bagId),attributes:o(k.bagAttributes)};f.push(n);var p,q,r=k.bagValue.value[0];switch(n.type){case c.oids.pkcs8ShroudedKeyBag:r=c.decryptPrivateKeyInfo(r,e);if(r===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case c.oids.keyBag:n.key=c.privateKeyFromAsn1(r);continue;case c.oids.certBag:p=i,q=function(){if(b.derToOid(k.certId)!==c.oids.x509Certificate){var a=new Error("Unsupported certificate type, only X.509 supported.");throw a.oid=b.derToOid(k.certId),a}n.cert=c.certificateFromAsn1(b.fromDer(k.cert,d),!0)};break;default:var m=new Error("Unsupported PKCS#12 SafeBag type.");throw m.oid=n.type,m}if(p!==undefined&&!b.validate(r,p,k,l)){var m=new Error("Cannot read PKCS#12 "+p.name);throw m.errors=l,m}q()}return f}function o(a){var d={};if(a!==undefined)for(var e=0;e<a.length;++e){var f={},g=[];if(!b.validate(a[e],h,f,g)){var i=new Error("Cannot read PKCS#12 BagAttribute.");throw i.errors=g,i}var j=b.derToOid(f.oid);if(c.oids[j]===undefined)continue;d[c.oids[j]]=[];for(var k=0;k<f.values.length;++k)d[c.oids[j]].push(f.values[k].value)}return d}var b=a.asn1,c=a.pki,d=a.pkcs12=a.pkcs12||{},e={name:"ContentInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:b.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},f={name:"PFX",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"version"},e,{name:"PFX.macData",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},g={name:"SafeBag",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:b.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},h={name:"Attribute",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0,capture:"values"}]},i={name:"CertBag",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:b.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:b.Class.UNIVERSAL,type:b.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};d.pkcs12FromAsn1=function(e,g,h){typeof g=="string"?(h=g,g=!0):g===undefined&&(g=!0);var i={},m=[];if(!b.validate(e,f,i,m)){var n=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw n.errors=n,n}var o={version:i.version.charCodeAt(0),safeContents:[],getBags:function(b){var c={},d;return"localKeyId"in b?d=b.localKeyId:"localKeyIdHex"in b&&(d=a.util.hexToBytes(b.localKeyIdHex)),d===undefined&&!("friendlyName"in b)&&"bagType"in b&&(c[b.bagType]=j(o.safeContents,null,null,b.bagType)),d!==undefined&&(c.localKeyId=j(o.safeContents,"localKeyId",d,b.bagType)),"friendlyName"in b&&(c.friendlyName=j(o.safeContents,"friendlyName",b.friendlyName,b.bagType)),c},getBagsByFriendlyName:function(a,b){return j(o.safeContents,"friendlyName",a,b)},getBagsByLocalKeyId:function(a,b){return j(o.safeContents,"localKeyId",a,b)}};if(i.version.charCodeAt(0)!==3){var n=new Error("PKCS#12 PFX of version other than 3 not supported.");throw n.version=i.version.charCodeAt(0),n}if(b.derToOid(i.contentType)!==c.oids.data){var n=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw n.oid=b.derToOid(i.contentType),n}var p=i.content.value[0];if(p.tagClass!==b.Class.UNIVERSAL||p.type!==b.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");p=k(p);if(i.mac){var q=null,r=0,s=b.derToOid(i.macAlgorithm);switch(s){case c.oids.sha1:q=a.md.sha1.create(),r=20;break;case c.oids.sha256:q=a.md.sha256.create(),r=32;break;case c.oids.sha384:q=a.md.sha384.create(),r=48;break;case c.oids.sha512:q=a.md.sha512.create(),r=64;break;case c.oids.md5:q=a.md.md5.create(),r=16}if(q===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+s);var t=new a.util.ByteBuffer(i.macSalt),u="macIterations"in i?parseInt(a.util.bytesToHex(i.macIterations),16):1,v=d.generateKey(h,t,3,u,r,q),w=a.hmac.create();w.start(q,v),w.update(p.value);var x=w.getMac();if(x.getBytes()!==i.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return l(o,p.value,g,h),o},d.toPkcs12Asn1=function(e,f,g,h){h=h||{},h.saltSize=h.saltSize||8,h.count=h.count||2048,h.algorithm=h.algorithm||h.encAlgorithm||"aes128","useMac"in h||(h.useMac=!0),"localKeyId"in h||(h.localKeyId=null),"generateLocalKeyId"in h||(h.generateLocalKeyId=!0);var i=h.localKeyId,j;if(i!==null)i=a.util.hexToBytes(i);else if(h.generateLocalKeyId)if(f){var k=a.util.isArray(f)?f[0]:f;typeof k=="string"&&(k=c.certificateFromPem(k));var l=a.md.sha1.create();l.update(b.toDer(c.certificateToAsn1(k)).getBytes()),i=l.digest().getBytes()}else i=a.random.getBytes(20);var m=[];i!==null&&m.push(b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.localKeyId).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,i)])])),"friendlyName"in h&&m.push(b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.friendlyName).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.BMPSTRING,!1,h.friendlyName)])])),m.length>0&&(j=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,m));var n=[],o=[];f!==null&&(a.util.isArray(f)?o=f:o=[f]);var p=[];for(var q=0;q<o.length;++q){f=o[q],typeof f=="string"&&(f=c.certificateFromPem(f));var r=q===0?j:undefined,s=c.certificateToAsn1(f),t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.certBag).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.x509Certificate).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,b.toDer(s).getBytes())])])]),r]);p.push(t)}if(p.length>0){var u=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,p),v=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.data).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,b.toDer(u).getBytes())])]);n.push(v)}var w=null;if(e!==null){var x=c.wrapRsaPrivateKey(c.privateKeyToAsn1(e));g===null?w=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.keyBag).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[x]),j]):w=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.pkcs8ShroudedKeyBag).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[c.encryptPrivateKeyInfo(x,g,h)]),j]);var y=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[w]),z=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.data).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,b.toDer(y).getBytes())])]);n.push(z)}var A=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,n),B;if(h.useMac){var l=a.md.sha1.create(),C=new a.util.ByteBuffer(a.random.getBytes(h.saltSize)),D=h.count,e=d.generateKey(g,C,3,D,20),E=a.hmac.create();E.start(l,e),E.update(b.toDer(A).getBytes());var F=E.getMac();B=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.sha1).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,F.getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,C.getBytes()),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(D).getBytes())])}return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(3).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.oids.data).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,b.toDer(A).getBytes())])]),B])},d.generateKey=a.pbe.generatePkcs12Key}var e="pkcs12";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pkcs12",["require","module","./asn1","./hmac","./oids","./pkcs7asn1","./pbe","./random","./rsa","./sha1","./util","./x509"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.asn1,c=a.pki=a.pki||{};c.pemToDer=function(b){var c=a.pem.decode(b)[0];if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return a.util.createBuffer(c.body)},c.privateKeyFromPem=function(d){var e=a.pem.decode(d)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var f=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw f.headerType=e.type,f}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var g=b.fromDer(e.body);return c.privateKeyFromAsn1(g)},c.privateKeyToPem=function(d,e){var f={type:"RSA PRIVATE KEY",body:b.toDer(c.privateKeyToAsn1(d)).getBytes()};return a.pem.encode(f,{maxline:e})},c.privateKeyInfoToPem=function(c,d){var e={type:"PRIVATE KEY",body:b.toDer(c).getBytes()};return a.pem.encode(e,{maxline:d})}}var e="pki";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pki",["require","module","./asn1","./oids","./pbe","./pem","./pbkdf2","./pkcs12","./pss","./rsa","./util","./x509"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=function(b,c,d,e){var f=a.util.createBuffer(),g=b.length>>1,h=g+(b.length&1),i=b.substr(0,h),j=b.substr(g,h),k=a.util.createBuffer(),l=a.hmac.create();d=c+d;var m=Math.ceil(e/16),n=Math.ceil(e/20);l.start("MD5",i);var o=a.util.createBuffer();k.putBytes(d);for(var p=0;p<m;++p)l.start(null,null),l.update(k.getBytes()),k.putBuffer(l.digest()),l.start(null,null),l.update(k.bytes()+d),o.putBuffer(l.digest());l.start("SHA1",j);var q=a.util.createBuffer();k.clear(),k.putBytes(d);for(var p=0;p<n;++p)l.start(null,null),l.update(k.getBytes()),k.putBuffer(l.digest()),l.start(null,null),l.update(k.bytes()+d),q.putBuffer(l.digest());return f.putBytes(a.util.xorBytes(o.getBytes(),q.getBytes(),e)),f},c=function(a,b,c,d){},d=function(b,c,d){var e=a.hmac.create();e.start("SHA1",b);var f=a.util.createBuffer();return f.putInt32(c[0]),f.putInt32(c[1]),f.putByte(d.type),f.putByte(d.version.major),f.putByte(d.version.minor),f.putInt16(d.length),f.putBytes(d.fragment.bytes()),e.update(f.getBytes()),e.digest().getBytes()},e=function(b,c,d){var e=!1;try{var f=b.deflate(c.fragment.getBytes());c.fragment=a.util.createBuffer(f),c.length=f.length,e=!0}catch(g){}return e},f=function(b,c,d){var e=!1;try{var f=b.inflate(c.fragment.getBytes());c.fragment=a.util.createBuffer(f),c.length=f.length,e=!0}catch(g){}return e},g=function(b,c){var d=0;switch(c){case 1:d=b.getByte();break;case 2:d=b.getInt16();break;case 3:d=b.getInt24();break;case 4:d=b.getInt32()}return a.util.createBuffer(b.getBytes(d))},h=function(a,b,c){a.putInt(c.length(),b<<3),a.putBuffer(c)},i={};i.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},i.SupportedVersions=[i.Versions.TLS_1_1,i.Versions.TLS_1_0],i.Version=i.SupportedVersions[0],i.MaxFragment=15360,i.ConnectionEnd={server:0,client:1},i.PRFAlgorithm={tls_prf_sha256:0},i.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},i.CipherType={stream:0,block:1,aead:2},i.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},i.CompressionMethod={none:0,deflate:1},i.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},i.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},i.Alert={},i.Alert.Level={warning:1,fatal:2},i.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},i.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},i.CipherSuites={},i.getCipherSuite=function(a){var b=null;for(var c in i.CipherSuites){var d=i.CipherSuites[c];if(d.id[0]===a.charCodeAt(0)&&d.id[1]===a.charCodeAt(1)){b=d;break}}return b},i.handleUnexpected=function(a,b){var c=!a.open&&a.entity===i.ConnectionEnd.client;c||a.error(a,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.unexpected_message}})},i.handleHelloRequest=function(a,b,c){!a.handshaking&&a.handshakes>0&&(i.queue(a,i.createAlert(a,{level:i.Alert.Level.warning,description:i.Alert.Description.no_renegotiation})),i.flush(a)),a.process()},i.parseHelloMessage=function(b,c,d){var e=null,f=b.entity===i.ConnectionEnd.client;if(d<38)b.error(b,{message:f?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.illegal_parameter}});else{var h=c.fragment,j=h.length();e={version:{major:h.getByte(),minor:h.getByte()},random:a.util.createBuffer(h.getBytes(32)),session_id:g(h,1),extensions:[]},f?(e.cipher_suite=h.getBytes(2),e.compression_method=h.getByte()):(e.cipher_suites=g(h,2),e.compression_methods=g(h,1)),j=d-(j-h.length());if(j>0){var k=g(h,2);while(k.length()>0)e.extensions.push({type:[k.getByte(),k.getByte()],data:g(k,2)});if(!f)for(var l=0;l<e.extensions.length;++l){var m=e.extensions[l];if(m.type[0]===0&&m.type[1]===0){var n=g(m.data,2);while(n.length()>0){var o=n.getByte();if(o!==0)break;b.session.extensions.server_name.serverNameList.push(g(n,2).getBytes())}}}}if(b.session.version)if(e.version.major!==b.session.version.major||e.version.minor!==b.session.version.minor)return b.error(b,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.protocol_version}});if(f)b.session.cipherSuite=i.getCipherSuite(e.cipher_suite);else{var p=a.util.createBuffer(e.cipher_suites.bytes());while(p.length()>0){b.session.cipherSuite=i.getCipherSuite(p.getBytes(2));if(b.session.cipherSuite!==null)break}}if(b.session.cipherSuite===null)return b.error(b,{message:"No cipher suites in common.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.handshake_failure},cipherSuite:a.util.bytesToHex(e.cipher_suite)});f?b.session.compressionMethod=e.compression_method:b.session.compressionMethod=i.CompressionMethod.none}return e},i.createSecurityParameters=function(a,b){var c=a.entity===i.ConnectionEnd.client,d=b.random.bytes(),e=c?a.session.sp.client_random:d,f=c?d:i.createRandom().getBytes();a.session.sp={entity:a.entity,prf_algorithm:i.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:a.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:e,server_random:f}},i.handleServerHello=function(a,b,c){var d=i.parseHelloMessage(a,b,c);if(a.fail)return;if(d.version.minor<=a.version.minor)a.version.minor=d.version.minor;else return a.error(a,{message:"Incompatible TLS version.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.protocol_version}});a.session.version=a.version;var e=d.session_id.bytes();e.length>0&&e===a.session.id?(a.expect=o,a.session.resuming=!0,a.session.sp.server_random=d.random.bytes()):(a.expect=k,a.session.resuming=!1,i.createSecurityParameters(a,d)),a.session.id=e,a.process()},i.handleClientHello=function(b,c,d){var e=i.parseHelloMessage(b,c,d);if(b.fail)return;var f=e.session_id.bytes(),g=null;if(b.sessionCache){g=b.sessionCache.getSession(f);if(g===null)f="";else if(g.version.major!==e.version.major||g.version.minor>e.version.minor)g=null,f=""}f.length===0&&(f=a.random.getBytes(32)),b.session.id=f,b.session.clientHelloVersion=e.version,b.session.sp={};if(g)b.version=b.session.version=g.version,b.session.sp=g.sp;else{var h;for(var j=1;j<i.SupportedVersions.length;++j){h=i.SupportedVersions[j];if(h.minor<=e.version.minor)break}b.version={major:h.major,minor:h.minor},b.session.version=b.version}g!==null?(b.expect=w,b.session.resuming=!0,b.session.sp.client_random=e.random.bytes()):(b.expect=b.verifyClient!==!1?t:u,b.session.resuming=!1,i.createSecurityParameters(b,e)),b.open=!0,i.queue(b,i.createRecord(b,{type:i.ContentType.handshake,data:i.createServerHello(b)})),b.session.resuming?(i.queue(b,i.createRecord(b,{type:i.ContentType.change_cipher_spec,data:i.createChangeCipherSpec()})),b.state.pending=i.createConnectionState(b),b.state.current.write=b.state.pending.write,i.queue(b,i.createRecord(b,{type:i.ContentType.handshake,data:i.createFinished(b)}))):(i.queue(b,i.createRecord(b,{type:i.ContentType.handshake,data:i.createCertificate(b)})),b.fail||(i.queue(b,i.createRecord(b,{type:i.ContentType.handshake,data:i.createServerKeyExchange(b)})),b.verifyClient!==!1&&i.queue(b,i.createRecord(b,{type:i.ContentType.handshake,data:i.createCertificateRequest(b)})),i.queue(b,i.createRecord(b,{type:i.ContentType.handshake,data:i.createServerHelloDone(b)})))),i.flush(b),b.process()},i.handleCertificate=function(b,c,d){if(d<3)return b.error(b,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.illegal_parameter}});var e=c.fragment,f={certificate_list:g(e,3)},h,j,k=[];try{while(f.certificate_list.length()>0)h=g(f.certificate_list,3),j=a.asn1.fromDer(h),h=a.pki.certificateFromAsn1(j,!0),k.push(h)}catch(m){return b.error(b,{message:"Could not parse certificate list.",cause:m,send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.bad_certificate}})}var n=b.entity===i.ConnectionEnd.client;!n&&b.verifyClient!==!0||k.length!==0?k.length===0?b.expect=n?l:u:(n?b.session.serverCertificate=k[0]:b.session.clientCertificate=k[0],i.verifyCertificateChain(b,k)&&(b.expect=n?l:u)):b.error(b,{message:n?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.illegal_parameter}}),b.process()},i.handleServerKeyExchange=function(a,b,c){if(c>0)return a.error(a,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.unsupported_certificate}});a.expect=m,a.process()},i.handleClientKeyExchange=function(b,c,d){if(d<48)return b.error(b,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.unsupported_certificate}});var e=c.fragment,f={enc_pre_master_secret:g(e,2).getBytes()},h=null;if(b.getPrivateKey)try{h=b.getPrivateKey(b,b.session.serverCertificate),h=a.pki.privateKeyFromPem(h)}catch(j){b.error(b,{message:"Could not get private key.",cause:j,send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.internal_error}})}if(h===null)return b.error(b,{message:"No private key set.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.internal_error}});try{var k=b.session.sp;k.pre_master_secret=h.decrypt(f.enc_pre_master_secret);var l=b.session.clientHelloVersion;if(l.major!==k.pre_master_secret.charCodeAt(0)||l.minor!==k.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(j){k.pre_master_secret=a.random.getBytes(48)}b.expect=w,b.session.clientCertificate!==null&&(b.expect=v),b.process()},i.handleCertificateRequest=function(a,b,c){if(c<3)return a.error(a,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.illegal_parameter}});var d=b.fragment,e={certificate_types:g(d,1),certificate_authorities:g(d,2)};a.session.certificateRequest=e,a.expect=n,a.process()},i.handleCertificateVerify=function(b,c,d){if(d<2)return b.error(b,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.illegal_parameter}});var e=c.fragment;e.read-=4;var f=e.bytes();e.read+=4;var h={signature:g(e,2).getBytes()},j=a.util.createBuffer();j.putBuffer(b.session.md5.digest()),j.putBuffer(b.session.sha1.digest()),j=j.getBytes();try{var k=b.session.clientCertificate;if(!k.publicKey.verify(j,h.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");b.session.md5.update(f),b.session.sha1.update(f)}catch(l){return b.error(b,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.handshake_failure}})}b.expect=w,b.process()},i.handleServerHelloDone=function(b,c,d){if(d>0)return b.error(b,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.record_overflow}});if(b.serverCertificate===null){var e={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.insufficient_security}},f=0,g=b.verify(b,e.alert.description,f,[]);if(g!==!0){if(g||g===0)typeof g=="object"&&!a.util.isArray(g)?(g.message&&(e.message=g.message),g.alert&&(e.alert.description=g.alert)):typeof g=="number"&&(e.alert.description=g);return b.error(b,e)}}b.session.certificateRequest!==null&&(c=i.createRecord(b,{type:i.ContentType.handshake,data:i.createCertificate(b)}),i.queue(b,c)),c=i.createRecord(b,{type:i.ContentType.handshake,data:i.createClientKeyExchange(b)}),i.queue(b,c),b.expect=r;var h=function(a,b){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&i.queue(a,i.createRecord(a,{type:i.ContentType.handshake,data:i.createCertificateVerify(a,b)})),i.queue(a,i.createRecord(a,{type:i.ContentType.change_cipher_spec,data:i.createChangeCipherSpec()})),a.state.pending=i.createConnectionState(a),a.state.current.write=a.state.pending.write,i.queue(a,i.createRecord(a,{type:i.ContentType.handshake,data:i.createFinished(a)})),a.expect=o,i.flush(a),a.process()};if(b.session.certificateRequest===null||b.session.clientCertificate===null)return h(b,null);i.getClientSignature(b,h)},i.handleChangeCipherSpec=function(a,b){if(b.fragment.getByte()!==1)return a.error(a,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.illegal_parameter}});var c=a.entity===i.ConnectionEnd.client;if(a.session.resuming&&c||!a.session.resuming&&!c)a.state.pending=i.createConnectionState(a);a.state.current.read=a.state.pending.read;if(!a.session.resuming&&c||a.session.resuming&&!c)a.state.pending=null;a.expect=c?p:x,a.process()},i.handleFinished=function(c,d,e){var f=d.fragment;f.read-=4;var g=f.bytes();f.read+=4;var h=d.fragment.getBytes();f=a.util.createBuffer(),f.putBuffer(c.session.md5.digest()),f.putBuffer(c.session.sha1.digest());var j=c.entity===i.ConnectionEnd.client,k=j?"server finished":"client finished",l=c.session.sp,m=12,n=b;f=n(l.master_secret,k,f.getBytes(),m);if(f.getBytes()!==h)return c.error(c,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.decrypt_error}});c.session.md5.update(g),c.session.sha1.update(g);if(c.session.resuming&&j||!c.session.resuming&&!j)i.queue(c,i.createRecord(c,{type:i.ContentType.change_cipher_spec,data:i.createChangeCipherSpec()})),c.state.current.write=c.state.pending.write,c.state.pending=null,i.queue(c,i.createRecord(c,{type:i.ContentType.handshake,data:i.createFinished(c)}));c.expect=j?q:y,c.handshaking=!1,++c.handshakes,c.peerCertificate=j?c.session.serverCertificate:c.session.clientCertificate,i.flush(c),c.isConnected=!0,c.connected(c),c.process()},i.handleAlert=function(a,b){var c=b.fragment,d={level:c.getByte(),description:c.getByte()},e;switch(d.description){case i.Alert.Description.close_notify:e="Connection closed.";break;case i.Alert.Description.unexpected_message:e="Unexpected message.";break;case i.Alert.Description.bad_record_mac:e="Bad record MAC.";break;case i.Alert.Description.decryption_failed:e="Decryption failed.";break;case i.Alert.Description.record_overflow:e="Record overflow.";break;case i.Alert.Description.decompression_failure:e="Decompression failed.";break;case i.Alert.Description.handshake_failure:e="Handshake failure.";break;case i.Alert.Description.bad_certificate:e="Bad certificate.";break;case i.Alert.Description.unsupported_certificate:e="Unsupported certificate.";break;case i.Alert.Description.certificate_revoked:e="Certificate revoked.";break;case i.Alert.Description.certificate_expired:e="Certificate expired.";break;case i.Alert.Description.certificate_unknown:e="Certificate unknown.";break;case i.Alert.Description.illegal_parameter:e="Illegal parameter.";break;case i.Alert.Description.unknown_ca:e="Unknown certificate authority.";break;case i.Alert.Description.access_denied:e="Access denied.";break;case i.Alert.Description.decode_error:e="Decode error.";break;case i.Alert.Description.decrypt_error:e="Decrypt error.";break;case i.Alert.Description.export_restriction:e="Export restriction.";break;case i.Alert.Description.protocol_version:e="Unsupported protocol version.";break;case i.Alert.Description.insufficient_security:e="Insufficient security.";break;case i.Alert.Description.internal_error:e="Internal error.";break;case i.Alert.Description.user_canceled:e="User canceled.";break;case i.Alert.Description.no_renegotiation:e="Renegotiation not supported.";break;default:e="Unknown error."}if(d.description===i.Alert.Description.close_notify)return a.close();a.error(a,{message:e,send:!1,origin:a.entity===i.ConnectionEnd.client?"server":"client",alert:d}),a.process()},i.handleHandshake=function(b,c){var d=c.fragment,e=d.getByte(),f=d.getInt24();if(f>d.length())return b.fragmented=c,c.fragment=a.util.createBuffer(),d.read-=4,b.process();b.fragmented=null,d.read-=4;var g=d.bytes(f+4);d.read+=4,e in O[b.entity][b.expect]?(b.entity===i.ConnectionEnd.server&&!b.open&&!b.fail&&(b.handshaking=!0,b.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:a.md.md5.create(),sha1:a.md.sha1.create()}),e!==i.HandshakeType.hello_request&&e!==i.HandshakeType.certificate_verify&&e!==i.HandshakeType.finished&&(b.session.md5.update(g),b.session.sha1.update(g)),O[b.entity][b.expect][e](b,c,f)):i.handleUnexpected(b,c)},i.handleApplicationData=function(a,b){a.data.putBuffer(b.fragment),a.dataReady(a),a.process()},i.handleHeartbeat=function(b,c){var d=c.fragment,e=d.getByte(),f=d.getInt16(),g=d.getBytes(f);if(e===i.HeartbeatMessageType.heartbeat_request){if(b.handshaking||f>g.length)return b.process();i.queue(b,i.createRecord(b,{type:i.ContentType.heartbeat,data:i.createHeartbeat(i.HeartbeatMessageType.heartbeat_response,g)})),i.flush(b)}else if(e===i.HeartbeatMessageType.heartbeat_response){if(g!==b.expectedHeartbeatPayload)return b.process();b.heartbeatReceived&&b.heartbeatReceived(b,a.util.createBuffer(g))}b.process()};var j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=0,t=1,u=2,v=3,w=4,x=5,y=6,z=7,A=i.handleUnexpected,B=i.handleChangeCipherSpec,C=i.handleAlert,D=i.handleHandshake,E=i.handleApplicationData,F=i.handleHeartbeat,G=[];G[i.ConnectionEnd.client]=[[A,C,D,A,F],[A,C,D,A,F],[A,C,D,A,F],[A,C,D,A,F],[A,C,D,A,F],[B,C,A,A,F],[A,C,D,A,F],[A,C,D,E,F],[A,C,D,A,F]],G[i.ConnectionEnd.server]=[[A,C,D,A,F],[A,C,D,A,F],[A,C,D,A,F],[A,C,D,A,F],[B,C,A,A,F],[A,C,D,A,F],[A,C,D,E,F],[A,C,D,A,F]];var H=i.handleHelloRequest,I=i.handleServerHello,J=i.handleCertificate,K=i.handleServerKeyExchange,L=i.handleCertificateRequest,M=i.handleServerHelloDone,N=i.handleFinished,O=[];O[i.ConnectionEnd.client]=[[A,A,I,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,J,K,L,M,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,A,K,L,M,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,A,A,L,M,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,A,A,A,M,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,N],[H,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[H,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A]];var P=i.handleClientHello,Q=i.handleClientKeyExchange,R=i.handleCertificateVerify;O[i.ConnectionEnd.server]=[[A,P,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,J,A,A,A,A,A,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,Q,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,A,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,N],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A]],i.generateKeys=function(a,c){var d=b,e=c.client_random+c.server_random;a.session.resuming||(c.master_secret=d(c.pre_master_secret,"master secret",e,48).bytes(),c.pre_master_secret=null),e=c.server_random+c.client_random;var f=2*c.mac_key_length+2*c.enc_key_length,g=a.version.major===i.Versions.TLS_1_0.major&&a.version.minor===i.Versions.TLS_1_0.minor;g&&(f+=2*c.fixed_iv_length);var h=d(c.master_secret,"key expansion",e,f),j={client_write_MAC_key:h.getBytes(c.mac_key_length),server_write_MAC_key:h.getBytes(c.mac_key_length),client_write_key:h.getBytes(c.enc_key_length),server_write_key:h.getBytes(c.enc_key_length)};return g&&(j.client_write_IV=h.getBytes(c.fixed_iv_length),j.server_write_IV=h.getBytes(c.fixed_iv_length)),j},i.createConnectionState=function(a){var b=a.entity===i.ConnectionEnd.client,c=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return!0},compressionState:null,compressFunction:function(a){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},d={read:c(),write:c()};d.read.update=function(a,b){return d.read.cipherFunction(b,d.read)?d.read.compressFunction(a,b,d.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.bad_record_mac}}),!a.fail},d.write.update=function(a,b){return d.write.compressFunction(a,b,d.write)?d.write.cipherFunction(b,d.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.internal_error}}),!a.fail};if(a.session){var g=a.session.sp;a.session.cipherSuite.initSecurityParameters(g),g.keys=i.generateKeys(a,g),d.read.macKey=b?g.keys.server_write_MAC_key:g.keys.client_write_MAC_key,d.write.macKey=b?g.keys.client_write_MAC_key:g.keys.server_write_MAC_key,a.session.cipherSuite.initConnectionState(d,a,g);switch(g.compression_algorithm){case i.CompressionMethod.none:break;case i.CompressionMethod.deflate:d.read.compressFunction=f,d.write.compressFunction=e;break;default:throw new Error("Unsupported compression algorithm.")}}return d},i.createRandom=function(){var b=new Date,c=+b+b.getTimezoneOffset()*6e4,d=a.util.createBuffer();return d.putInt32(c),d.putBytes(a.random.getBytes(28)),d},i.createRecord=function(a,b){if(!b.data)return null;var c={type:b.type,version:{major:a.version.major,minor:a.version.minor},length:b.data.length(),fragment:b.data};return c},i.createAlert=function(b,c){var d=a.util.createBuffer();return d.putByte(c.level),d.putByte(c.description),i.createRecord(b,{type:i.ContentType.alert,data:d})},i.createClientHello=function(b){b.session.clientHelloVersion={major:b.version.major,minor:b.version.minor};var c=a.util.createBuffer();for(var d=0;d<b.cipherSuites.length;++d){var e=b.cipherSuites[d];c.putByte(e.id[0]),c.putByte(e.id[1])}var f=c.length(),g=a.util.createBuffer();g.putByte(i.CompressionMethod.none);var j=g.length(),k=a.util.createBuffer();if(b.virtualHost){var l=a.util.createBuffer();l.putByte(0),l.putByte(0);var m=a.util.createBuffer();m.putByte(0),h(m,2,a.util.createBuffer(b.virtualHost));var n=a.util.createBuffer();h(n,2,m),h(l,2,n),k.putBuffer(l)}var o=k.length();o>0&&(o+=2);var p=b.session.id,q=p.length+1+2+4+28+2+f+1+j+o,r=a.util.createBuffer();return r.putByte(i.HandshakeType.client_hello),r.putInt24(q),r.putByte(b.version.major),r.putByte(b.version.minor),r.putBytes(b.session.sp.client_random),h(r,1,a.util.createBuffer(p)),h(r,2,c),h(r,1,g),o>0&&h(r,2,k),r},i.createServerHello=function(b){var c=b.session.id,d=c.length+1+2+4+28+2+1,e=a.util.createBuffer();return e.putByte(i.HandshakeType.server_hello),e.putInt24(d),e.putByte(b.version.major),e.putByte(b.version.minor),e.putBytes(b.session.sp.server_random),h(e,1,a.util.createBuffer(c)),e.putByte(b.session.cipherSuite.id[0]),e.putByte(b.session.cipherSuite.id[1]),e.putByte(b.session.compressionMethod),e},i.createCertificate=function(b){var c=b.entity===i.ConnectionEnd.client,d=null;if(b.getCertificate){var e;c?e=b.session.certificateRequest:e=b.session.extensions.server_name.serverNameList,d=b.getCertificate(b,e)}var f=a.util.createBuffer();if(d!==null)try{a.util.isArray(d)||(d=[d]);var g=null;for(var j=0;j<d.length;++j){var k=a.pem.decode(d[j])[0];if(k.type!=="CERTIFICATE"&&k.type!=="X509 CERTIFICATE"&&k.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=k.type,l}if(k.procType&&k.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var m=a.util.createBuffer(k.body);g===null&&(g=a.asn1.fromDer(m.bytes(),!1));var n=a.util.createBuffer();h(n,3,m),f.putBuffer(n)}d=a.pki.certificateFromAsn1(g),c?b.session.clientCertificate=d:b.session.serverCertificate=d}catch(o){return b.error(b,{message:"Could not send certificate list.",cause:o,send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.bad_certificate}})}var p=3+f.length(),q=a.util.createBuffer();return q.putByte(i.HandshakeType.certificate),q.putInt24(p),h(q,3,f),q},i.createClientKeyExchange=function(b){var c=a.util.createBuffer();c.putByte(b.session.clientHelloVersion.major),c.putByte(b.session.clientHelloVersion.minor),c.putBytes(a.random.getBytes(46));var d=b.session.sp;d.pre_master_secret=c.getBytes();var e=b.session.serverCertificate.publicKey;c=e.encrypt(d.pre_master_secret);var f=c.length+2,g=a.util.createBuffer();return g.putByte(i.HandshakeType.client_key_exchange),g.putInt24(f),g.putInt16(c.length),g.putBytes(c),g},i.createServerKeyExchange=function(b){var c=0,d=a.util.createBuffer();return c>0&&(d.putByte(i.HandshakeType.server_key_exchange),d.putInt24(c)),d},i.getClientSignature=function(b,c){var d=a.util.createBuffer();d.putBuffer(b.session.md5.digest()),d.putBuffer(b.session.sha1.digest()),d=d.getBytes(),b.getSignature=b.getSignature||function(b,c,d){var e=null;if(b.getPrivateKey)try{e=b.getPrivateKey(b,b.session.clientCertificate),e=a.pki.privateKeyFromPem(e)}catch(f){b.error(b,{message:"Could not get private key.",cause:f,send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.internal_error}})}e===null?b.error(b,{message:"No private key set.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.internal_error}}):c=e.sign(c,null),d(b,c)},b.getSignature(b,d,c)},i.createCertificateVerify=function(b,c){var d=c.length+2,e=a.util.createBuffer();return e.putByte(i.HandshakeType.certificate_verify),e.putInt24(d),e.putInt16(c.length),e.putBytes(c),e},i.createCertificateRequest=function(b){var c=a.util.createBuffer();c.putByte(1);var d=a.util.createBuffer();for(var e in b.caStore.certs){var f=b.caStore.certs[e],g=a.pki.distinguishedNameToAsn1(f.subject);d.putBuffer(a.asn1.toDer(g))}var j=1+c.length()+2+d.length(),k=a.util.createBuffer();return k.putByte(i.HandshakeType.certificate_request),k.putInt24(j),h(k,1,c),h(k,2,d),k},i.createServerHelloDone=function(b){var c=a.util.createBuffer();return c.putByte(i.HandshakeType.server_hello_done),c.putInt24(0),c},i.createChangeCipherSpec=function(){var b=a.util.createBuffer();return b.putByte(1),b},i.createFinished=function(c){var d=a.util.createBuffer();d.putBuffer(c.session.md5.digest()),d.putBuffer(c.session.sha1.digest());var e=c.entity===i.ConnectionEnd.client,f=c.session.sp,g=12,h=b,j=e?"client finished":"server finished";d=h(f.master_secret,j,d.getBytes(),g);var k=a.util.createBuffer();return k.putByte(i.HandshakeType.finished),k.putInt24(d.length()),k.putBuffer(d),k},i.createHeartbeat=function(b,c,d){typeof d=="undefined"&&(d=c.length);var e=a.util.createBuffer();e.putByte(b),e.putInt16(d),e.putBytes(c);var f=e.length(),g=Math.max(16,f-d-3);return e.putBytes(a.random.getBytes(g)),e},i.queue=function(b,c){if(!c)return;if(c.type===i.ContentType.handshake){var d=c.fragment.bytes();b.session.md5.update(d),b.session.sha1.update(d),d=null}var e;if(c.fragment.length()<=i.MaxFragment)e=[c];else{e=[];var f=c.fragment.bytes();while(f.length>i.MaxFragment)e.push(i.createRecord(b,{type:c.type,data:a.util.createBuffer(f.slice(0,i.MaxFragment))})),f=f.slice(i.MaxFragment);f.length>0&&e.push(i.createRecord(b,{type:c.type,data:a.util.createBuffer(f)}))}for(var g=0;g<e.length&&!b.fail;++g){var h=e[g],j=b.state.current.write;j.update(b,h)&&b.records.push(h)}},i.flush=function(a){for(var b=0;b<a.records.length;++b){var c=a.records[b];a.tlsData.putByte(c.type),a.tlsData.putByte(c.version.major),a.tlsData.putByte(c.version.minor),a.tlsData.putInt16(c.fragment.length()),a.tlsData.putBuffer(a.records[b].fragment)}return a.records=[],a.tlsDataReady(a)};var S=function(b){switch(b){case!0:return!0;case a.pki.certificateError.bad_certificate:return i.Alert.Description.bad_certificate;case a.pki.certificateError.unsupported_certificate:return i.Alert.Description.unsupported_certificate;case a.pki.certificateError.certificate_revoked:return i.Alert.Description.certificate_revoked;case a.pki.certificateError.certificate_expired:return i.Alert.Description.certificate_expired;case a.pki.certificateError.certificate_unknown:return i.Alert.Description.certificate_unknown;case a.pki.certificateError.unknown_ca:return i.Alert.Description.unknown_ca;default:return i.Alert.Description.bad_certificate}},T=function(b){switch(b){case!0:return!0;case i.Alert.Description.bad_certificate:return a.pki.certificateError.bad_certificate;case i.Alert.Description.unsupported_certificate:return a.pki.certificateError.unsupported_certificate;case i.Alert.Description.certificate_revoked:return a.pki.certificateError.certificate_revoked;case i.Alert.Description.certificate_expired:return a.pki.certificateError.certificate_expired;case i.Alert.Description.certificate_unknown:return a.pki.certificateError.certificate_unknown;case i.Alert.Description.unknown_ca:return a.pki.certificateError.unknown_ca;default:return a.pki.certificateError.bad_certificate}};i.verifyCertificateChain=function(b,c){try{a.pki.verifyCertificateChain(b.caStore,c,function f(c,d,e){var f=S(c),g=b.verify(b,c,d,e);if(g!==!0){if(typeof g=="object"&&!a.util.isArray(g)){var h=new Error("The application rejected the certificate.");throw h.send=!0,h.alert={level:i.Alert.Level.fatal,description:i.Alert.Description.bad_certificate},g.message&&(h.message=g.message),g.alert&&(h.alert.description=g.alert),h}g!==c&&(g=T(g))}return g})}catch(d){var e=d;if(typeof e!="object"||a.util.isArray(e))e={send:!0,alert:{level:i.Alert.Level.fatal,description:S(d)}};"send"in e||(e.send=!0),"alert"in e||(e.alert={level:i.Alert.Level.fatal,description:S(e.error)}),b.error(b,e)}return!b.fail},i.createSessionCache=function(b,c){var d=null;if(b&&b.getSession&&b.setSession&&b.order)d=b;else{d={},d.cache=b||{},d.capacity=Math.max(c||100,1),d.order=[];for(var e in b)d.order.length<=c?d.order.push(e):delete b[e];d.getSession=function(b){var c=null,e=null;b?e=a.util.bytesToHex(b):d.order.length>0&&(e=d.order[0]);if(e!==null&&e in d.cache){c=d.cache[e],delete d.cache[e];for(var f in d.order)if(d.order[f]===e){d.order.splice(f,1);break}}return c},d.setSession=function(b,c){if(d.order.length===d.capacity){var e=d.order.shift();delete d.cache[e]}var e=a.util.bytesToHex(b);d.order.push(e),d.cache[e]=c}}return d},i.createConnection=function(b){var c=null;b.caStore?a.util.isArray(b.caStore)?c=a.pki.createCaStore(b.caStore):c=b.caStore:c=a.pki.createCaStore();var d=b.cipherSuites||null;if(d===null){d=[];for(var e in i.CipherSuites)d.push(i.CipherSuites[e])}var f=b.server||!1?i.ConnectionEnd.server:i.ConnectionEnd.client,g=b.sessionCache?i.createSessionCache(b.sessionCache):null,h={version:{major:i.Version.major,minor:i.Version.minor},entity:f,sessionId:b.sessionId,caStore:c,sessionCache:g,cipherSuites:d,connected:b.connected,virtualHost:b.virtualHost||null,verifyClient:b.verifyClient||!1,verify:b.verify||function(a,b,c,d){return b},getCertificate:b.getCertificate||null,getPrivateKey:b.getPrivateKey||null,getSignature:b.getSignature||null,input:a.util.createBuffer(),tlsData:a.util.createBuffer(),data:a.util.createBuffer(),tlsDataReady:b.tlsDataReady,dataReady:b.dataReady,heartbeatReceived:b.heartbeatReceived,closed:b.closed,error:function(a,c){c.origin=c.origin||(a.entity===i.ConnectionEnd.client?"client":"server"),c.send&&(i.queue(a,i.createAlert(a,c.alert)),i.flush(a));var d=c.fatal!==!1;d&&(a.fail=!0),b.error(a,c),d&&a.close(!1)},deflate:b.deflate||null,inflate:b.inflate||null};h.reset=function(a){h.version={major:i.Version.major,minor:i.Version.minor},h.record=null,h.session=null,h.peerCertificate=null,h.state={pending:null,current:null},h.expect=h.entity===i.ConnectionEnd.client?j:s,h.fragmented=null,h.records=[],h.open=!1,h.handshakes=0,h.handshaking=!1,h.isConnected=!1,h.fail=!a&&typeof a!="undefined",h.input.clear(),h.tlsData.clear(),h.data.clear(),h.state.current=i.createConnectionState(h)},h.reset();var k=function(a,b){var c=b.type-i.ContentType.change_cipher_spec,d=G[a.entity][a.expect];c in d?d[c](a,b):i.handleUnexpected(a,b)},l=function(b){var c=0,d=b.input,e=d.length();if(e<5)c=5-e;else{b.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:a.util.createBuffer(),ready:!1};var f=b.record.version.major===b.version.major;f&&b.session&&b.session.version&&(f=b.record.version.minor===b.version.minor),f||b.error(b,{message:"Incompatible TLS version.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.protocol_version}})}return c},m=function(a){var b=0,c=a.input,d=c.length();if(d<a.record.length)b=a.record.length-d;else{a.record.fragment.putBytes(c.getBytes(a.record.length)),c.compact();var e=a.state.current.read;e.update(a,a.record)&&(a.fragmented!==null&&(a.fragmented.type===a.record.type?(a.fragmented.fragment.putBuffer(a.record.fragment),a.record=a.fragmented):a.error(a,{message:"Invalid fragmented record.",send:!0,alert:{level:i.Alert.Level.fatal,description:i.Alert.Description.unexpected_message}})),a.record.ready=!0)}return b};return h.handshake=function(b){if(h.entity!==i.ConnectionEnd.client)h.error(h,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(h.handshaking)h.error(h,{message:"Handshake already in progress.",fatal:!1});else{h.fail&&!h.open&&h.handshakes===0&&(h.fail=!1),h.handshaking=!0,b=b||"";var c=null;b.length>0&&(h.sessionCache&&(c=h.sessionCache.getSession(b)),c===null&&(b="")),b.length===0&&h.sessionCache&&(c=h.sessionCache.getSession(),c!==null&&(b=c.id)),h.session={id:b,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:a.md.md5.create(),sha1:a.md.sha1.create()},c&&(h.version=c.version,h.session.sp=c.sp),h.session.sp.client_random=i.createRandom().getBytes(),h.open=!0,i.queue(h,i.createRecord(h,{type:i.ContentType.handshake,data:i.createClientHello(h)})),i.flush(h)}},h.process=function(a){var b=0;return a&&h.input.putBytes(a),h.fail||(h.record!==null&&h.record.ready&&h.record.fragment.isEmpty()&&(h.record=null),h.record===null&&(b=l(h)),!h.fail&&h.record!==null&&!h.record.ready&&(b=m(h)),!h.fail&&h.record!==null&&h.record.ready&&k(h,h.record)),b},h.prepare=function(b){return i.queue(h,i.createRecord(h,{type:i.ContentType.application_data,data:a.util.createBuffer(b)})),i.flush(h)},h.prepareHeartbeatRequest=function(b,c){return b instanceof a.util.ByteBuffer&&(b=b.bytes()),typeof c=="undefined"&&(c=b.length),h.expectedHeartbeatPayload=b,i.queue(h,i.createRecord(h,{type:i.ContentType.heartbeat,data:i.createHeartbeat(i.HeartbeatMessageType.heartbeat_request,b,c)})),i.flush(h)},h.close=function(a){if(!h.fail&&h.sessionCache&&h.session){var b={id:h.session.id,version:h.session.version,sp:h.session.sp};b.sp.keys=null,h.sessionCache.setSession(b.id,b)}if(h.open){h.open=!1,h.input.clear();if(h.isConnected||h.handshaking)h.isConnected=h.handshaking=!1,i.queue(h,i.createAlert(h,{level:i.Alert.Level.warning,description:i.Alert.Description.close_notify})),i.flush(h);h.closed(h)}h.reset(a)},h},a.tls=a.tls||{};for(var U in i)typeof i[U]!="function"&&(a.tls[U]=i[U]);a.tls.prf_tls1=b,a.tls.hmac_sha1=d,a.tls.createSessionCache=i.createSessionCache,a.tls.createConnection=i.createConnection}var e="tls";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/tls",["require","module","./asn1","./hmac","./md","./pem","./pki","./random","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function c(c,e,f){var g=e.entity===a.tls.ConnectionEnd.client;c.read.cipherState={init:!1,cipher:a.cipher.createDecipher("AES-CBC",g?f.keys.server_write_key:f.keys.client_write_key),iv:g?f.keys.server_write_IV:f.keys.client_write_IV},c.write.cipherState={init:!1,cipher:a.cipher.createCipher("AES-CBC",g?f.keys.client_write_key:f.keys.server_write_key),iv:g?f.keys.client_write_IV:f.keys.server_write_IV},c.read.cipherFunction=h,c.write.cipherFunction=d,c.read.macLength=c.write.macLength=f.mac_length,c.read.macFunction=c.write.macFunction=b.hmac_sha1}function d(c,d){var f=!1,g=d.macFunction(d.macKey,d.sequenceNumber,c);c.fragment.putBytes(g),d.updateSequenceNumber();var h;c.version.minor===b.Versions.TLS_1_0.minor?h=d.cipherState.init?null:d.cipherState.iv:h=a.random.getBytesSync(16),d.cipherState.init=!0;var i=d.cipherState.cipher;return i.start({iv:h}),c.version.minor>=b.Versions.TLS_1_1.minor&&i.output.putBytes(h),i.update(c.fragment),i.finish(e)&&(c.fragment=i.output,c.length=c.fragment.length(),f=!0),f}function e(a,b,c){if(!c){var d=a-b.length()%a;b.fillWithByte(d-1,d)}return!0}function f(a,b,c){var d=!0;if(c){var e=b.length(),f=b.last();for(var g=e-1-f;g<e-1;++g)d=d&&b.at(g)==f;d&&b.truncate(f+1)}return d}function h(c,d){var e=!1;++g;var h;c.version.minor===b.Versions.TLS_1_0.minor?h=d.cipherState.init?null:d.cipherState.iv:h=c.fragment.getBytes(16),d.cipherState.init=!0;var i=d.cipherState.cipher;i.start({iv:h}),i.update(c.fragment),e=i.finish(f);var j=d.macLength,k="";for(var l=0;l<j;++l)k+=String.fromCharCode(0);var m=i.output.length();m>=j?(c.fragment=i.output.getBytes(m-j),k=i.output.getBytes(j)):c.fragment=i.output.getBytes(),c.fragment=a.util.createBuffer(c.fragment),c.length=c.fragment.length();var n=d.macFunction(d.macKey,d.sequenceNumber,c);return d.updateSequenceNumber(),e=n===k&&e,e}var b=a.tls;b.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(a){a.bulk_cipher_algorithm=b.BulkCipherAlgorithm.aes,a.cipher_type=b.CipherType.block,a.enc_key_length=16,a.block_length=16,a.fixed_iv_length=16,a.record_iv_length=16,a.mac_algorithm=b.MACAlgorithm.hmac_sha1,a.mac_length=20,a.mac_key_length=20},initConnectionState:c},b.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(a){a.bulk_cipher_algorithm=b.BulkCipherAlgorithm.aes,a.cipher_type=b.CipherType.block,a.enc_key_length=32,a.block_length=16,a.fixed_iv_length=16,a.record_iv_length=16,a.mac_algorithm=b.MACAlgorithm.hmac_sha1,a.mac_length=20,a.mac_key_length=20},initConnectionState:c};var g=0}var e="aesCipherSuites";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/aesCipherSuites",["require","module","./aes","./tls"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.debug=a.debug||{},a.debug.storage={},a.debug.get=function(b,c){var d;return typeof b=="undefined"?d=a.debug.storage:b in a.debug.storage&&(typeof c=="undefined"?d=a.debug.storage[b]:d=a.debug.storage[b][c]),d},a.debug.set=function(b,c,d){b in a.debug.storage||(a.debug.storage[b]={}),a.debug.storage[b][c]=d},a.debug.clear=function(b,c){typeof b=="undefined"?a.debug.storage={}:b in a.debug.storage&&(typeof c=="undefined"?delete a.debug.storage[b]:delete a.debug.storage[b][c])}}var e="debug";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/debug",["require","module"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function c(b,c,d,e){b.generate=function(b,f){var g=new a.util.ByteBuffer,h=Math.ceil(f/e)+d,i=new a.util.ByteBuffer;for(var j=d;j<h;++j){i.putInt32(j),c.start(),c.update(b+i.getBytes());var k=c.digest();g.putBytes(k.getBytes(e))}return g.truncate(g.length()-f),g.getBytes()}}a.kem=a.kem||{};var b=a.jsbn.BigInteger;a.kem.rsa={},a.kem.rsa.create=function(c,d){d=d||{};var e=d.prng||a.random,f={};return f.encrypt=function(d,f){var g=Math.ceil(d.n.bitLength()/8),h;do h=(new b(a.util.bytesToHex(e.getBytesSync(g)),16)).mod(d.n);while(h.equals(b.ZERO));h=a.util.hexToBytes(h.toString(16));var i=g-h.length;i>0&&(h=a.util.fillString(String.fromCharCode(0),i)+h);var j=d.encrypt(h,"NONE"),k=c.generate(h,f);return{encapsulation:j,key:k}},f.decrypt=function(a,b,d){var e=a.decrypt(b,"NONE");return c.generate(e,d)},f},a.kem.kdf1=function(a,b){c(this,a,0,b||a.digestLength)},a.kem.kdf2=function(a,b){c(this,a,1,b||a.digestLength)}}var e="kem";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/kem",["require","module","./util","./random","./jsbn"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.log=a.log||{},a.log.levels=["none","error","warning","info","debug","verbose","max"];var b={},c=[],d=null;a.log.LEVEL_LOCKED=2,a.log.NO_LEVEL_CHECK=4,a.log.INTERPOLATE=8;for(var e=0;e<a.log.levels.length;++e){var f=a.log.levels[e];b[f]={index:e,name:f.toUpperCase()}}a.log.logMessage=function(d){var e=b[d.level].index;for(var f=0;f<c.length;++f){var g=c[f];if(g.flags&a.log.NO_LEVEL_CHECK)g.f(d);else{var h=b[g.level].index;e<=h&&g.f(g,d)}}},a.log.prepareStandard=function(a){"standard"in a||(a.standard=b[a.level].name+" ["+a.category+"] "+a.message)},a.log.prepareFull=function(b){if(!("full"in b)){var c=[b.message];c=c.concat([]||b.arguments),b.full=a.util.format.apply(this,c)}},a.log.prepareStandardFull=function(b){"standardFull"in b||(a.log.prepareStandard(b),b.standardFull=b.standard)};var g=["error","warning","info","debug","verbose"];for(var e=0;e<g.length;++e)(function(b){a.log[b]=function(c,d){var e=Array.prototype.slice.call(arguments).slice(2),f={timestamp:new Date,level:b,category:c,message:d,arguments:e};a.log.logMessage(f)}})(g[e]);a.log.makeLogger=function(b){var c={flags:0,f:b};return a.log.setLevel(c,"none"),c},a.log.setLevel=function(b,c){var d=!1;if(b&&!(b.flags&a.log.LEVEL_LOCKED))for(var e=0;e<a.log.levels.length;++e){var f=a.log.levels[e];if(c==f){b.level=c,d=!0;break}}return d},a.log.lock=function(b,c){typeof c=="undefined"||c?b.flags|=a.log.LEVEL_LOCKED:b.flags&=~a.log.LEVEL_LOCKED},a.log.addLogger=function(a){c.push(a)};if(typeof console!="undefined"&&"log"in console){var h;if(console.error&&console.warn&&console.info&&console.debug){var i={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},j=function(b,c){a.log.prepareStandard(c);var d=i[c.level],e=[c.standard];e=e.concat(c.arguments.slice()),d.apply(console,e)};h=a.log.makeLogger(j)}else{var j=function(b,c){a.log.prepareStandardFull(c),console.log(c.standardFull)};h=a.log.makeLogger(j)}a.log.setLevel(h,"debug"),a.log.addLogger(h),d=h}else console={log:function(){}};if(d!==null){var k=a.util.getQueryVariables();"console.level"in k&&a.log.setLevel(d,k["console.level"].slice(-1)[0]);if("console.lock"in k){var l=k["console.lock"].slice(-1)[0];l=="true"&&a.log.lock(d)}}a.log.consoleLogger=d}var e="log";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/log",["require","module","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b=a.asn1,c=a.pkcs7=a.pkcs7||{};c.messageFromPem=function(d){var e=a.pem.decode(d)[0];if(e.type!=="PKCS7"){var f=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw f.headerType=e.type,f}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var g=b.fromDer(e.body);return c.messageFromAsn1(g)},c.messageToPem=function(c,d){var e={type:"PKCS7",body:b.toDer(c.toAsn1()).getBytes()};return a.pem.encode(e,{maxline:d})},c.messageFromAsn1=function(d){var e={},f=[];if(!b.validate(d,c.asn1.contentInfoValidator,e,f)){var g=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw g.errors=f,g}var h=b.derToOid(e.contentType),i;switch(h){case a.pki.oids.envelopedData:i=c.createEnvelopedData();break;case a.pki.oids.encryptedData:i=c.createEncryptedData();break;case a.pki.oids.signedData:i=c.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+h+" is not (yet) supported.")}return i.fromAsn1(e.content.value[0]),i};var d=function(d){var e={},f=[];if(!b.validate(d,c.asn1.recipientInfoValidator,e,f)){var g=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 EnvelopedData.");throw g.errors=f,g}return{version:e.version.charCodeAt(0),issuer:a.pki.RDNAttributesAsArray(e.issuer),serialNumber:a.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:b.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}},e=function(c){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(c.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[a.pki.distinguishedNameToAsn1({attributes:c.issuer}),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,a.util.hexToBytes(c.serialNumber))]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.encryptedContent.algorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,c.encryptedContent.content)])},f=function(a){var b=[];for(var c=0;c<a.length;c++)b.push(d(a[c]));return b},g=function(a){var b=[];for(var c=0;c<a.length;c++)b.push(e(a[c]));return b},h=function(c){return[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(a.pki.oids.data).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(c.algorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,c.parameter.getBytes())]),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,c.content.getBytes())])]},i=function(c,d,e){var f={},g=[];if(!b.validate(d,e,f,g)){var h=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw h.errors=h,h}var i=b.derToOid(f.contentType);if(i!==a.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(f.encryptedContent){var j="";if(a.util.isArray(f.encryptedContent))for(var k=0;k<f.encryptedContent.length;++k){if(f.encryptedContent[k].type!==b.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");j+=f.encryptedContent[k].value}else j=f.encryptedContent;c.encryptedContent={algorithm:b.derToOid(f.encAlgorithm),parameter:a.util.createBuffer(f.encParameter.value),content:a.util.createBuffer(j)}}if(f.content){var j="";if(a.util.isArray(f.content))for(var k=0;k<f.content.length;++k){if(f.content[k].type!==b.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");j+=f.content[k].value}else j=f.content;c.content=a.util.createBuffer(j)}return c.version=f.version.charCodeAt(0),c.rawCapture=f,f},j=function(b){if(b.encryptedContent.key===undefined)throw new Error("Symmetric key not available.");if(b.content===undefined){var c;switch(b.encryptedContent.algorithm){case a.pki.oids["aes128-CBC"]:case a.pki.oids["aes192-CBC"]:case a.pki.oids["aes256-CBC"]:c=a.aes.createDecryptionCipher(b.encryptedContent.key);break;case a.pki.oids.desCBC:case a.pki.oids["des-EDE3-CBC"]:c=a.des.createDecryptionCipher(b.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+b.encryptedContent.algorithm)}c.start(b.encryptedContent.parameter),c.update(b.encryptedContent.content);if(!c.finish())throw new Error("Symmetric decryption failed.");b.content=c.output}};c.createSignedData=function(){var d=null;return d={type:a.pki.oids.signedData,version:1,certificates:[],crls:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(b){i(d,b,c.asn1.signedDataValidator),d.certificates=[],d.crls=[],d.digestAlgorithmIdentifiers=[],d.contentInfo=null,d.signerInfos=[];var e=d.rawCapture.certificates.value;for(var f=0;f<e.length;++f)d.certificates.push(a.pki.certificateFromAsn1(e[f]))},toAsn1:function(){if("content"in d)throw new Error("Signing PKCS#7 content not yet implemented.");d.contentInfo||d.sign();var c=[];for(var e=0;e<d.certificates.length;++e)c.push(a.pki.certificateToAsn1(d.certificates[0]));var f=[];return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(d.type).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(d.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,d.digestAlgorithmIdentifiers),d.contentInfo,b.create(b.Class.CONTEXT_SPECIFIC,0,!0,c),b.create(b.Class.CONTEXT_SPECIFIC,1,!0,f),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,d.signerInfos)])])])},sign:function(c){if("content"in d)throw new Error("PKCS#7 signing not yet implemented.");typeof d.content!="object"&&(d.contentInfo=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(a.pki.oids.data).getBytes())]),"content"in d&&d.contentInfo.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,d.content)])))},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(b){typeof b=="string"&&(b=a.pki.certificateFromPem(b)),d.certificates.push(b)},addCertificateRevokationList:function(a){throw new Error("PKCS#7 CRL support not yet implemented.")}},d},c.createEncryptedData=function(){var b=null;return b={type:a.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:a.pki.oids["aes256-CBC"]},fromAsn1:function(a){i(b,a,c.asn1.encryptedDataValidator)},decrypt:function(a){a!==undefined&&(b.encryptedContent.key=a),j(b)}},b},c.createEnvelopedData=function(){var d=null;return d={type:a.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:a.pki.oids["aes256-CBC"]},fromAsn1:function(a){var b=i(d,a,c.asn1.envelopedDataValidator);d.recipients=f(b.recipientInfos.value)},toAsn1:function(){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(d.type).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(d.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,g(d.recipients)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,h(d.encryptedContent))])])])},findRecipient:function(a){var b=a.issuer.attributes;for(var c=0;c<d.recipients.length;++c){var e=d.recipients[c],f=e.issuer;if(e.serialNumber!==a.serialNumber)continue;if(f.length!==b.length)continue;var g=!0;for(var h=0;h<b.length;++h)if(f[h].type!==b[h].type||f[h].value!==b[h].value){g=!1;break}if(g)return e}return null},decrypt:function(b,c){if(d.encryptedContent.key===undefined&&b!==undefined&&c!==undefined)switch(b.encryptedContent.algorithm){case a.pki.oids.rsaEncryption:case a.pki.oids.desCBC:var e=c.decrypt(b.encryptedContent.content);d.encryptedContent.key=a.util.createBuffer(e);break;default:throw new Error("Unsupported asymmetric cipher, OID "+b.encryptedContent.algorithm)}j(d)},addRecipient:function(b){d.recipients.push({version:0,issuer:b.issuer.attributes,serialNumber:b.serialNumber,encryptedContent:{algorithm:a.pki.oids.rsaEncryption,key:b.publicKey}})},encrypt:function(b,c){if(d.encryptedContent.content===undefined){c=c||d.encryptedContent.algorithm,b=b||d.encryptedContent.key;var e,f,g;switch(c){case a.pki.oids["aes128-CBC"]:e=16,f=16,g=a.aes.createEncryptionCipher;break;case a.pki.oids["aes192-CBC"]:e=24,f=16,g=a.aes.createEncryptionCipher;break;case a.pki.oids["aes256-CBC"]:e=32,f=16,g=a.aes.createEncryptionCipher;break;case a.pki.oids["des-EDE3-CBC"]:e=24,f=8,g=a.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+c)}if(b===undefined)b=a.util.createBuffer(a.random.getBytes(e));else if(b.length()!=e)throw new Error("Symmetric key has wrong length; got "+b.length()+" bytes, expected "+e+".");d.encryptedContent.algorithm=c,d.encryptedContent.key=b,d.encryptedContent.parameter=a.util.createBuffer(a.random.getBytes(f));var h=g(b);h.start(d.encryptedContent.parameter.copy()),h.update(d.content);if(!h.finish())throw new Error("Symmetric encryption failed.");d.encryptedContent.content=h.output}for(var i=0;i<d.recipients.length;i++){var j=d.recipients[i];if(j.encryptedContent.content!==undefined)continue;switch(j.encryptedContent.algorithm){case a.pki.oids.rsaEncryption:j.encryptedContent.content=j.encryptedContent.key.encrypt(d.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+j.encryptedContent.algorithm)}}}},d}}var e="pkcs7";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/pkcs7",["require","module","./aes","./asn1","./des","./oids","./pem","./pkcs7asn1","./random","./util","./x509"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){function c(b,c){var d=c.toString(16);d[0]>="8"&&(d="00"+d);var e=a.util.hexToBytes(d);b.putInt32(e.length),b.putBytes(e)}function d(a,b){a.putInt32(b.length),a.putString(b)}function e(){var b=a.md.sha1.create(),c=arguments.length;for(var d=0;d<c;++d)b.update(arguments[d]);return b.digest()}var b=a.ssh=a.ssh||{};b.privateKeyToPutty=function(b,f,g){g=g||"",f=f||"";var h="ssh-rsa",i=f===""?"none":"aes256-cbc",j="PuTTY-User-Key-File-2: "+h+"\r\n";j+="Encryption: "+i+"\r\n",j+="Comment: "+g+"\r\n";var k=a.util.createBuffer();d(k,h),c(k,b.e),c(k,b.n);var l=a.util.encode64(k.bytes(),64),m=Math.floor(l.length/66)+1;j+="Public-Lines: "+m+"\r\n",j+=l;var n=a.util.createBuffer();c(n,b.d),c(n,b.p),c(n,b.q),c(n,b.qInv);var o;if(!f)o=a.util.encode64(n.bytes(),64);else{var p=n.length()+16-1;p-=p%16;var q=e(n.bytes());q.truncate(q.length()-p+n.length()),n.putBuffer(q);var r=a.util.createBuffer();r.putBuffer(e("\0\0\0\0",f)),r.putBuffer(e("\0\0\0",f));var s=a.aes.createEncryptionCipher(r.truncate(8),"CBC");s.start(a.util.createBuffer().fillWithByte(0,16)),s.update(n.copy()),s.finish();var t=s.output;t.truncate(16),o=a.util.encode64(t.bytes(),64)}m=Math.floor(o.length/66)+1,j+="\r\nPrivate-Lines: "+m+"\r\n",j+=o;var u=e("putty-private-key-file-mac-key",f),v=a.util.createBuffer();d(v,h),d(v,i),d(v,g),v.putInt32(k.length()),v.putBuffer(k),v.putInt32(n.length()),v.putBuffer(n);var w=a.hmac.create();return w.start("sha1",u),w.update(v.bytes()),j+="\r\nPrivate-MAC: "+w.digest().toHex()+"\r\n",j},b.publicKeyToOpenSSH=function(b,e){var f="ssh-rsa";e=e||"";var g=a.util.createBuffer();return d(g,f),c(g,b.e),c(g,b.n),f+" "+a.util.encode64(g.bytes())+" "+e},b.privateKeyToOpenSSH=function(b,c){return c?a.pki.encryptRsaPrivateKey(b,c,{legacy:!0,algorithm:"aes128"}):a.pki.privateKeyToPem(b)},b.getPublicKeyFingerprint=function(b,e){e=e||{};var f=e.md||a.md.md5.create(),g="ssh-rsa",h=a.util.createBuffer();d(h,g),c(h,b.e),c(h,b.n),f.start(),f.update(h.getBytes());var i=f.digest();if(e.encoding==="hex"){var j=i.toHex();return e.delimiter?j.match(/.{2}/g).join(e.delimiter):j}if(e.encoding==="binary")return i.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return i}}var e="ssh";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/ssh",["require","module","./aes","./hmac","./md5","./sha1","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){var b="forge.task",c=0,d={},e=0;a.debug.set(b,"tasks",d);var f={};a.debug.set(b,"queues",f);var g="?",h=30,i=20,j="ready",k="running",l="blocked",m="sleeping",n="done",o="error",p="stop",q="start",r="block",s="unblock",t="sleep",u="wakeup",v="cancel",w="fail",x={};x[j]={},x[j][p]=j,x[j][q]=k,x[j][v]=n,x[j][w]=o,x[k]={},x[k][p]=j,x[k][q]=k,x[k][r]=l,x[k][s]=k,x[k][t]=m,x[k][u]=k,x[k][v]=n,x[k][w]=o,x[l]={},x[l][p]=l,x[l][q]=l,x[l][r]=l,x[l][s]=l,x[l][t]=l,x[l][u]=l,x[l][v]=n,x[l][w]=o,x[m]={},x[m][p]=m,x[m][q]=m,x[m][r]=m,x[m][s]=m,x[m][t]=m,x[m][u]=m,x[m][v]=n,x[m][w]=o,x[n]={},x[n][p]=n,x[n][q]=n,x[n][r]=n,x[n][s]=n,x[n][t]=n,x[n][u]=n,x[n][v]=n,x[n][w]=o,x[o]={},x[o][p]=o,x[o][q]=o,x[o][r]=o,x[o][s]=o,x[o][t]=o,x[o][u]=o,x[o][v]=o,x[o][w]=o;var y=function(f){this.id=-1,this.name=f.name||g,this.parent=f.parent||null,this.run=f.run,this.subtasks=[],this.error=!1,this.state=j,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=e++,d[this.id]=this,c>=1&&a.log.verbose(b,"[%s][%s] init",this.id,this.name,this)};y.prototype.debug=function(c){c=c||"",a.log.debug(b,c,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",f)},y.prototype.next=function(a,b){typeof a=="function"&&(b=a,a=this.name);var c=new y({run:b,name:a,parent:this});return c.state=k,c.type=this.type,c.successCallback=this.successCallback||null,c.failureCallback=this.failureCallback||null,this.subtasks.push(c),this},y.prototype.parallel=function(b,c){return a.util.isArray(b)&&(c=b,b=this.name),this.next(b,function(d){var e=d;e.block(c.length);var f=function(b,d){a.task.start({type:b,run:function(a){c[d](a)},success:function(a){e.unblock()},failure:function(a){e.unblock()}})};for(var g=0;g<c.length;g++){var h=b+"__parallel-"+d.id+"-"+g,i=g;f(h,i)}})},y.prototype.stop=function(){this.state=x[this.state][p]},y.prototype.start=function(){this.error=!1,this.state=x[this.state][q],this.state===k&&(this.start=new Date,this.run(this),A(this,0))},y.prototype.block=function(a){a=typeof a=="undefined"?1:a,this.blocks+=a,this.blocks>0&&(this.state=x[this.state][r])},y.prototype.unblock=function(a){return a=typeof a=="undefined"?1:a,this.blocks-=a,this.blocks===0&&this.state!==n&&(this.state=k,A(this,0)),this.blocks},y.prototype.sleep=function(a){a=typeof a=="undefined"?0:a,this.state=x[this.state][t];var b=this;this.timeoutId=setTimeout(function(){b.timeoutId=null,b.state=k,A(b,0)},a)},y.prototype.wait=function(a){a.wait(this)},y.prototype.wakeup=function(){this.state===m&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=k,A(this,0))},y.prototype.cancel=function(){this.state=x[this.state][v],this.permitsNeeded=0,this.timeoutId!==null&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},y.prototype.fail=function(a){this.error=!0,B(this,!0);if(a)a.error=this.error,a.swapTime=this.swapTime,a.userData=this.userData,A(a,0);else{if(this.parent!==null){var b=this.parent;while(b.parent!==null)b.error=this.error,b.swapTime=this.swapTime,b.userData=this.userData,b=b.parent;B(b,!0)}this.failureCallback&&this.failureCallback(this)}};var z=function(a){a.error=!1,a.state=x[a.state][q],setTimeout(function(){a.state===k&&(a.swapTime=+(new Date),a.run(a),A(a,0))},0)},A=function(a,b){var c=b>h||+(new Date)-a.swapTime>i,d=function(b){b++;if(a.state===k){c&&(a.swapTime=+(new Date));if(a.subtasks.length>0){var d=a.subtasks.shift();d.error=a.error,d.swapTime=a.swapTime,d.userData=a.userData,d.run(d),d.error||A(d,b)}else B(a),a.error||a.parent!==null&&(a.parent.error=a.error,a.parent.swapTime=a.swapTime,a.parent.userData=a.userData,A(a.parent,b))}};c?setTimeout(d,0):d(b)},B=function(e,g){e.state=n,delete d[e.id],c>=1&&a.log.verbose(b,"[%s][%s] finish",e.id,e.name,e),e.parent===null&&(e.type in f?f[e.type].length===0?a.log.error(b,"[%s][%s] task queue empty [%s]",e.id,e.name,e.type):f[e.type][0]!==e?a.log.error(b,"[%s][%s] task not first in queue [%s]",e.id,e.name,e.type):(f[e.type].shift(),f[e.type].length===0?(c>=1&&a.log.verbose(b,"[%s][%s] delete queue [%s]",e.id,e.name,e.type),delete f[e.type]):(c>=1&&a.log.verbose(b,"[%s][%s] queue start next [%s] remain:%s",e.id,e.name,e.type,f[e.type].length),f[e.type][0].start())):a.log.error(b,"[%s][%s] task queue missing [%s]",e.id,e.name,e.type),g||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};a.task=a.task||{},a.task.start=function(d){var e=new y({run:d.run,name:d.name||g});e.type=d.type,e.successCallback=d.success||null,e.failureCallback=d.failure||null,e.type in f?f[d.type].push(e):(c>=1&&a.log.verbose(b,"[%s][%s] create queue [%s]",e.id,e.name,e.type),f[e.type]=[e],z(e))},a.task.cancel=function(a){a in f&&(f[a]=[f[a][0]])},a.task.createCondition=function(){var a={tasks:{}};return a.wait=function(b){b.id in a.tasks||(b.block(),a.tasks[b.id]=b)},a.notify=function(){var b=a.tasks;a.tasks={};for(var c in b)b[c].unblock()},a}}var e="task";if(typeof d!="function"){if(typeof c!="object"||!c.exports)return typeof forge=="undefined"&&(forge={}),a(forge);var f=!0;d=function(a,d){d(b,c)}}var g,h=function(b,c){c.exports=function(c){var d=g.map(function(a){return b(a)}).concat(a);c=c||{},c.defined=c.defined||{};if(c.defined[e])return c[e];c.defined[e]=!0;for(var f=0;f<d.length;++f)d[f](c);return c[e]}},i=d;d=function(a,b){return g=typeof a=="string"?b.slice(2):a.slice(2),f?(delete d,i.apply(null,Array.prototype.slice.call(arguments,0))):(d=i,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/task",["require","module","./debug","./log","./util"],function(){h.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var a="forge";if(typeof d!="function"){if(typeof c!="object"||!c.exports){typeof forge=="undefined"&&(forge={disableNativeCode:!1});return}var e=!0;d=function(a,d){d(b,c)}}var f,g=function(b,c){c.exports=function(c){var d=f.map(function(a){return b(a)});c=c||{},c.defined=c.defined||{};if(c.defined[a])return c[a];c.defined[a]=!0;for(var e=0;e<d.length;++e)d[e](c);return c},c.exports.disableNativeCode=!1,c.exports(c.exports)},h=d;d=function(a,b){return f=typeof a=="string"?b.slice(2):a.slice(2),e?(delete d,h.apply(null,Array.prototype.slice.call(arguments,0))):(d=h,d.apply(null,Array.prototype.slice.call(arguments,0)))},d("js/forge",["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){g.apply(null,Array.prototype.slice.call(arguments,0))})}(),b("js/forge")}),d("hls_mse/hls_toolkit",["require","exports","module","underscore","vendor/forge","vendor/events","errors"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/forge"),g=a("vendor/events"),h=a("errors"),i={NEW:0,REQUESTED:1,COMPLETE:2,FAILED:400},j={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};c.exports=d=function(a,b){var c;this._descriptor=a,this._logger=b,c=a.src,c.indexOf("?")>-1&&(c=c.substr(0,c.indexOf("?"))),this._baseURI=c.substr(0,c.lastIndexOf("/")+1)},e.extend(d.prototype,g),d.Segment=function(a,b,c,d){e.extend(this,{uri:a,startPosition:b,endPosition:b+c,duration:c,index:d,data:null,status:i.NEW})},d.prototype.updatePlaylist=function(){var a=new XMLHttpRequest;a.open("GET",this._descriptor.src,!0),a.responseType="text",a.send(),this._logger.log("Downloading playlist "),a.onload=e.bind(function(b){if(a.status!==200){this.trigger("playlist_failed",h.MSE_HLS_PLAYLIST_NOT_FOUND);return}this._segments=[],this._parsePlaylist(a.responseText),this._segments.length>0?(this._logger.log("Playlist download complete"),this._retrieveEncryptionKey(function(){this.trigger("playlist_complete",this._segments)})):this.trigger("playlist_failed",h.MSE_HLS_NOT_VALID_PLAYLIST)},this),a.onerror=e.bind(function(a){this.trigger("playlist_failed",h.MSE_HLS_PLAYLIST_NOT_FOUND)},this)},d.prototype._parsePlaylist=function(a){var b=a.split("\n"),c,e,f,g=0,h=0;this._duration=0;while(g<b.length)c=b[g++],c.indexOf(j.SEGMENT)===0?(f=1e3*Number(c.substr(8,c.indexOf(",")-8)),e=this._createSegmentURL(b[g]),this._appendSegment(new d.Segment(e,this._duration,f,h++)),g++):c.indexOf(j.ENCRYPTION)===0&&this._parsePlaylistEncryptionHeader(c)},d.prototype._appendSegment=function(a){this._segments.push(a),this._duration+=a.duration},d.prototype._parsePlaylistEncryptionHeader=function(a){var b=a.substr(j.ENCRYPTION.length).split(","),c,d,f;e.each(b,function(a){a.indexOf("METHOD")>=0?d=a.split("=")[1]:a.indexOf("URI")>=0?c=a.split("=")[1]:a.indexOf("IV")>=0&&(f=a.split("=")[1])});if(d&&c&&d.length&&c.length)d=d.trim(),c=c.trim().replace(/"/g,"");else throw new Error("Failed to parse M3U8 encryption header");this._encryptionMethod=d,this._encryptionKeyUri=c,f&&f.length?(this._encryptionIvHexString=f.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},d.prototype._parseEncryptionIvHexString=function(){var a=this._encryptionIvHexString.replace("0x",""),b=new Uint16Array(8),c,d=0;if(a.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;d<a.length;d+=4){c=parseInt(a.substr(d,4),16);if(!isNaN(c))b[d/4]=c;else throw new Error("Failed to parse hex number in IV string")}this._encryptionIv=b},d.prototype._encryptionIvForSegment=function(a){var b=new DataView(new ArrayBuffer(16));return b.setUint32(0,a.index,!0),b.buffer},d.prototype._retrieveEncryptionKey=function(a){if(!a)return;if(!this._encryptionKeyUri){a.call(this);return}var b=this._encryptionKeyUri,c=new XMLHttpRequest;c.open("GET",b,!0),c.responseType="arraybuffer",c.onload=e.bind(function(d){c.status===200?this._encryptionKey=new Uint8Array(c.response):this._logger.log("Failed to retrieve encryption key from "+b+", returned status "+c.status),a.call(this)},this),c.send(),this._logger.log("Downloading encryption key from "+b)},d.prototype._removeEncryptionPaddingBytes=function(a){var b=a.data[a.data.byteLength-1];b?(this._logger.log("Detected PKCS7 padding length of "+b+" bytes, slicing segment."),a.data=a.data.subarray(0,a.data.byteLength-b)):this._logger.log("No padding detected (last byte is zero)")},d.prototype.decryptSegmentAES128=function(a){this._logger.log("Decrypting AES-128 cyphered segment ...");var b=f.cipher.createDecipher("AES-CBC",f.util.createBuffer(this._encryptionKey)),c=0,d=a.data.byteLength,e;this._encryptionIv?e=this._encryptionIv:e=this._encryptionIvForSegment(a),this._logger.log("Using IV ->"),b.start({iv:f.util.createBuffer(e)}),b.update(f.util.createBuffer(a.data)),b.finish(),a.data=new Uint8Array(d);for(;c<d;c++)a.data[c]=b.output.getByte();this._removeEncryptionPaddingBytes(a)},d.prototype.isAES128Encrypted=function(){return this._encryptionMethod==="AES-128"},d.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},d.prototype.getEncryptionIv=function(){return this._encryptionIv},d.prototype.getEncryptionKey=function(){return this._encryptionKey},d.prototype.getSegmentIndexForTime=function(a){var b,c;if(a>this._duration||a<0||!this._segments||this._segments.length===0)return-1;b=Math.floor(this._segments.length*(a/this._duration)),c=this._segments[b];while(!(c.startPosition<=a&&c.startPosition+c.duration>a))c.startPosition+c.duration>=a?b--:b++,c=this._segments[b];return b},d.prototype.getSegmentForTime=function(a){var b=this.getSegmentIndexForTime(a);return b>=0?this._segments[b]:null},d.prototype._createSegmentURL=function(a){return a.substr(0,7)==="http://"||a.substr(0,8)==="https://"||a.substr(0,1)==="/"?a:this._baseURI+a},d.prototype.loadSegment=function(a){var b,c,d,f;d=this._segments[a];if(d.status===i.REQUESTED||d.status===i.COMPLETE)return;c=d.uri,b=new XMLHttpRequest,b.open("GET",c,!0),b.responseType="arraybuffer",b.send(),this._logger.log("Downloading segment "+a+" from "+c),d.downloadStartTime=Date.now(),d.status=i.REQUESTED,b.onload=e.bind(function(c){if(b.status!==200){this.trigger("segment_failed",h.MSE_HLS_SEGMENT_NOT_FOUND),d.status=i.FAILED;return}this._logger.log("Download of segment "+a+" complete"),d.data=new Uint8Array(b.response),d.downloadTime=Date.now()-d.downloadStartTime,d.status=i.COMPLETE,this.trigger("segment_complete",d)},this),b.onerror=e.bind(function(a){d.status=i.FAILED,this.trigger("segment_failed",h.MSE_HLS_SEGMENT_NOT_FOUND)},this)},d.prototype.getSegment=function(a){return this._segments[a]?this._segments[a]:null},d.prototype.getDuration=function(){return this._duration?this._duration:0},d.prototype.getNumSegments=function(){return this._segments.length}}),d("hlsmseplayer",["require","exports","module","underscore","vendor/events","errors","logger","html5audioplayer","hls_mse/hls_toolkit","states"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/events"),g=a("errors"),h=a("logger"),i=a("html5audioplayer"),j=a("hls_mse/hls_toolkit"),k=a("states");c.exports=d=function(a,b){var c;this._id=a.id,this._descriptor=a,this._isLoaded=!1,this._settings=b,this._bufferingTimeout=null,this._currentPosition=0,this._loadedPosition=0,this._prevCurrentPosition=0,this._prevCheckTime=0,this._prevComparison=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this._sourceBufferPtsOffset=0,this._state=k.INITIALIZE,this._minPreBufferLengthForPlayback=5e3,this._maxBufferLength=3e4,this._segmentsAwaitingAppendance=[],this._html5Audio=new Audio,this._logger=new h(this.getType(),this._id,this._settings),c=window.MediaSource||window.WebKitMediaSource;if(!c){this._error(g.MSE_NOT_SUPPORTED);return}e.bindAll(this,"_onPositionChange","_onPlaylistLoaded","_onMSEInit","_onSegmentLoaded","_onHtml5AudioStateChange","_onLoaded","_onLoadedMetadata","_onBuffering","_onSourceBufferUpdate","_onSourceBufferUpdateLastSegment"),this._toggleEventListeners(!0),this._mediaSource=new c,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("webkitsourceopen",this._onMSEInit,!1),this._html5Audio.src=window.URL.createObjectURL(this._mediaSource),this._hls_toolkit=new j(a,this._logger),this._hls_toolkit.on("segment_complete",this._onSegmentLoaded)},e.extend(d.prototype,i.prototype),d.prototype._onMSEInit=function(){this._logger.log("source open handler"),this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.removeEventListener("webkitsourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer("audio/mpeg"),this._descriptor.duration&&(this._setDuration(this._descriptor.duration),this._logger.log("duration set from descriptor metadata to "+this._duration)),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this._descriptor.preload&&this.preload(),this._descriptor.autoPlay?this.play():this._setState(k.IDLE)},d.prototype.getType=function(){return"HLS MSE audio"},d.prototype.play=function(a){if(this._isInOneOfStates(k.ERROR,k.DEAD))return;if(this._isInOneOfStates(k.PAUSED,k.ENDED)){this.resume();return}this._logger.log("play"),this._startFromPosition=a||0,clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval),this._hls_toolkit.once("playlist_complete",this._onPlaylistLoaded),this._hls_toolkit.updatePlaylist(),this._setState(k.LOADING)},d.prototype._inspectEncryptionData=function(){this._hls_toolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hls_toolkit.getEncryptionKey().byteLength),this._hls_toolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hls_toolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},d.prototype._onLoadedMetadata=function(){},d.prototype._onPlaylistLoaded=function(){this._logger.log("playlist loaded handler"),this._inspectEncryptionData(),this._setDuration(this._hls_toolkit.getDuration()),this._logger.log("duration set from playlist info to "+this._duration),this.trigger("loadedmetadata",this),this._requestSegment(this._hls_toolkit.getSegmentForTime(this._startFromPosition).index)},d.prototype._setDuration=function(a){this._duration=a,this._mediaSource.duration=this._duration/1e3},d.prototype._onSegmentLoaded=function(a){this._decryptSegment(a),this._tryAppendNextSegment(a),this._checkForNextSegmentToLoad()},d.prototype._decryptSegment=function(a){this._hls_toolkit.isAES128Encrypted()&&this._hls_toolkit.decryptSegmentAES128(a)},d.prototype._prepareBuffer=function(a){this._logger.log("Preparing buffer for non-zero timestamp offset ...");var b=0,c=setInterval(function(){if(this._sourceBuffer.updating)return;if(this._sourceBuffer.timestampOffset<a.startPosition){this._sourceBuffer.timestampOffset=b,this._sourceBuffer.appendBuffer(a.data),b+=a.duration,this._logger.log("Appended dummy fill data to buffer up to timestamp: "+this._sourceBuffer.timestampOffset);return}clearInterval(c),this._logger.log("Will retry to append segment "+a.index),this._tryAppendNextSegment(a)}.bind(this),1)},d.prototype._tryAppendNextSegment=function(a){if(this._sourceBuffer.updating){this._segmentsAwaitingAppendance.unshift(a);return}if(!this._sourceBuffer.buffered.length&&a.startPosition>0){this._prepareBuffer(a);return}this._sourceBuffer.timestampOffset=a.startPosition/1e3,this._sourceBuffer.appendBuffer(a.data),a.data=null,this._logger.log("Appending segment "+a.index),a.endPosition===this._duration&&this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdateLastSegment),this._state===k.LOADING&&this._isTimeBuffered(this._html5Audio.currentTime+this._minPreBufferLengthForPlayback/1e3)&&(this._logger.log("Triggering playback after appending enough segments"),this._html5Audio.play())},d.prototype._onSourceBufferUpdateLastSegment=function(){this._sourceBuffer.removeEventListener("update",this._onSourceBufferUpdateLastSegment),this._mediaSource.endOfStream()},d.prototype._onSourceBufferUpdate=function(){this.trigger("loadeddata",this),this._segmentsAwaitingAppendance.length&&this._tryAppendNextSegment(this._segmentsAwaitingAppendance.pop())},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(k.ERROR,k.DEAD))return;this._logger.log("pause"),this._html5Audio.pause(),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){var b=!1,c,d=this._html5Audio.seekable,e,f;if(this._isInOneOfStates(k.ERROR,k.DEAD))return;if(!this._isLoaded){this.once("loaded",function(){this.seek(a)});return}c=a/1e3;for(e=0;e<d.length;e++)if(c<=d.end(e)&&c>=d.start(e)){b=!0;break}if(!b)return;this._logger.log("seek"),this._setState(k.SEEKING),this._isTimeBuffered(a)||(f=this._hls_toolkit.getSegmentForTime(a),this._requestSegment(f.index)),this._html5Audio.currentTime=a/1e3,clearTimeout(this._bufferingTimeout)},d.prototype.resume=function(){if(this._isInOneOfStates(k.ERROR,k.DEAD))return;this._logger.log("resume"),this.getState()===k.PAUSED?(this._setState(k.LOADING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===k.ENDED&&(this._setState(k.LOADING),this._html5Audio.play(0)),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype.kill=function(){if(this._state===k.DEAD)return;clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this._html5Audio.src=null,delete this._html5Audio,this._setState(k.DEAD)},d.prototype.preload=function(){var a=this._html5Audio;a.preload!=="auto"&&(this._logger.log("preload"),a.preload="auto",a.type=this._descriptor.mimeType,a.src=this._descriptor.src,a.load())},d.prototype._checkForNextSegmentToLoad=function(){var a=this._currentPosition+this._maxBufferLength,b=this._lastSegmentRequested+1,c=null;if(this._hls_toolkit.getSegment(this._lastSegmentRequested).endPosition<a&&!this._isTimeBuffered(a))do{if(b>=this._hls_toolkit.getNumSegments())break;this._requestSegment(b),c=this._hls_toolkit.getSegment(b++)}while(c.endPosition<a)},d.prototype._requestSegment=function(a){this._lastSegmentRequested=a,this._hls_toolkit.loadSegment(this._lastSegmentRequested)},d.prototype._onPositionChange=function(a){i.prototype._onPositionChange.apply(this,arguments),isNaN(this._lastSegmentRequested)||this._checkForNextSegmentToLoad()},d.prototype._getErrorMessage=function(a){var b={};return b[g.MSE_NOT_SUPPORTED]="The browsed does not support Media Source Extensions yet",b[g.MSE_HLS_NOT_VALID_PLAYLIST]="Playlist is invalid",b[g.MSE_HLS_SEGMENT_NOT_FOUND]="Failed to load media segment",b[g.MSE_HLS_PLAYLIST_NOT_FOUND]="Failed to load HLS playlist",b[g.MSE_MP3_NOT_SUPPORTED]="Browser does not support MPEG streams in Media Source Extension",b[a]?b[a]:i.prototype._getErrorMessage.apply(this,arguments)},d.prototype._isTimeBuffered=function(a){var b=this._html5Audio.buffered,c;for(c=0;c<b.length;c++)if(a<b.end(c)&&a>=b.start(c))return!0;return!1}}),d("factory",["require","exports","module","underscore","browserutils","flashaudioproxy","hlsaudioplayer","hlssingleaudioplayer","html5audioplayer","mimetypes","singleaudioplayer","hlsmseplayer","vendor/swfobject"],function(a,b,c){var d,e=a("underscore"),f=a("browserutils"),g=a("flashaudioproxy"),h=a("hlsaudioplayer"),i=a("hlssingleaudioplayer"),j=a("html5audioplayer"),k=a("mimetypes"),l=a("singleaudioplayer"),m=a("hlsmseplayer"),n=a("vendor/swfobject");c.exports=d=function(){},d.createAudioPlayer=function(a,b){var c,e,n;c=a.src.split(":")[0];if((c==="rtmp"||c==="rtmpt"||a.forceFlash)&&!a.forceHTML5)n=new g(a,b);else{a.mimeType=d.getMimeType(a);if(a.mimeType===k.M3U8)f.isNativeHlsSupported()?f.isMobile()||a.forceSingle?n=new i(a,b):n=new h(a,b):f.isMSESupported()&&f.isMSESupportMPEG()?n=new m(a,b):n=new g(a,b);else if(f.supportHTML5Audio()&&f.canPlayType(a.mimeType)||a.forceHTML5)f.isMobile()||a.forceSingle?n=new l(a,b):n=new j(a,b);else if(a.mimeType===k.MPEG)n=new g(a,b);else return null}return n},d.getMimeType=function(a){if(a.mimeType)return a.mimeType;var b=a.src.split("?")[0];return b=b.substring(b.lastIndexOf(".")+1,b.length),k.getTypeByExtension(b)}}),d("audiomanager",["require","exports","module","underscore","factory","states","errors","browserutils"],function(a,b,c){var d,e=a("underscore"),f=a("factory"),g=a("states"),h=a("errors"),i=a("browserutils");c.exports=d=function(a){a=a||{},this._players={},this._volume=1,this._mute=!1,this._settings=e.defaults(a,d.defaults)},d.States=g,d.Errors=h,d.BrowserUtils=i,d.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,debug:!1},d.prototype.getAudioPlayer=function(a){return this._players[a]},d.prototype.hasAudioPlayer=function(a){return this._players[a]!==undefined},d.prototype.removeAudioPlayer=function(a){this.hasAudioPlayer(a)&&delete this._players[a]},d.prototype.setVolume=function(a){a=Math.min(1,a),this._volume=Math.max(0,a);for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setVolume(this._volume)},d.prototype.getVolume=function(){return this._volume},d.prototype.setMute=function(a){this._muted=a;for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setMute(this._muted)},d.prototype.getMute=function(){return this._muted},d.prototype.createAudioPlayer=function(a){var b,c,d;a.id||(a.id=Math.floor(Math.random()*1e10).toString()+(new Date).getTime().toString());if(!a.src)throw new Error("AudioManager: You need to pass a valid src");return this._players[a.id]||(this._players[a.id]=f.createAudioPlayer(a,this._settings)),this._players[a.id].setVolume(this._volume),this._players[a.id].setMute(this._muted),this._players[a.id].on("stateChange",this._onStateChange,this),this._players[a.id]},d.prototype._onStateChange=function(a,b){b.getState()===g.DEAD&&this.removeAudioPlayer(b.getId())}}),b(["audiomanager"]),b("audiomanager")})}),
define("lib/helpers/name-helper",["require","exports","module","vendor/handlebars-runtime","lib/helpers/lang-helper"],function(a,b,c){var d,e=a("vendor/handlebars-runtime"),f=a("lib/helpers/lang-helper");d=c.exports={get:function(a,b){var c=e.Utils.escapeExpression(a.username||a.title||a.name);return b===!0&&(c=f.possessive(c)),c}}})